<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::19262</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>035</td><td>Perl / Java / PCRE / .NET</td><td>210407T200027Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/223048#223048">Deadcode</a></td></tr>
<tr d-ix="1"><td>041</td><td>ECMAScript</td><td>210407T204232Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/223051#223051">Deadcode</a></td></tr>
<tr d-ix="2"><td>037</td><td>.NET</td><td>210409T072542Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/223129#223129">Deadcode</a></td></tr>
<tr d-ix="3"><td>050</td><td>ECMAScript / Perl / Java / Python / Ruby / PCRE / .NET</td><td>140224T073544Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/21951#21951">Deadcode</a></td></tr>
<tr d-ix="4"><td>039</td><td>Perl / Java / PCRE / .NET</td><td>140225T110220Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/22084#22084">primo</a></td></tr>
<tr d-ix="5"><td>066</td><td>Perl / PCRE / .NET</td><td>140126T013904Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/19413#19413">Volatili</a></td></tr>
<tr d-ix="6"><td>053</td><td>Perl / Java / PCRE / .NET</td><td>140207T193436Z</td><td><a href="https://codegolf.stackexchange.com/questions/19262/match-strings-whose-length-is-a-fourth-power/20331#20331">n̴̖̋h̷͉̃</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Perl / Java / PCRE / .NET, 35 bytes</h1>
<pre><code>((\2x|^x)+)\1(\3xx|x(?=\2$))+$|^x?$
</code></pre>
<p>This beats <a href="https://codegolf.stackexchange.com/a/22084/17216">primo's solution</a> by 4 bytes while supporting the exact same set of regex engines.</p>
<p><a href="https://tio.run/##RU5Na8MwDP0roojGIglxsu0yx00K3XWn3ZbOdKMBg9dmdgYebvbXM7cr9CL0PqT3hr01D/PnD6AVEMzxY2cACxGhrDfrl/Vqgv5oGTrJRb0SFED3EVEYrD6MsOgOCzFBa6QbjB5ZkieZ@353YzxRWV5mJe2/zqbmxvLI0yMqEudfLibubGvqikJrXsutjJNvxTVXXyHqWl7kuKUpBd0DY4lPwEM0EYH8hQJtQQHdcnkpd@kWi5fivytqMU2TUk/PG6VmxrrKn948pdSVrLvz/uRZI7sKiVKMQoPzzPP7ivM/" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##bVLbbtswDH3vV3BGh0hJqjoZ9jLVKLZhAwas29A@Jhmg2HKiVqY9SW7c27dnlONdCtQvNMmjQ50jXqtbdXJd3OxN1dQuwDXlwtRiLOH/ShuMfbHm9EZ31Dlq2rU1OeRWeQ8XyiA8wFDzQQUKt7UpoKIOuwrO4AaU2/jFikPYunrn4VOX6yaYmk4eAXw2VkOZod71vywReV1oQf2Eyw9tWWqni0utCu1g3cOeF9mfk0Naci6HuX4a5G4b@Rnz2Zo0qOKrQc04f5Vhay03JfNC/2qV9Sw5HY/HCecPz6EHBsbCiwQPxBD@MhDBKTGsCXcj/SQbLXEUY5BPh9rTDxWCdgguG/5IbdXEAZ5LcmNd11YrhPusJEYt4SpXiCTdYNMGyCCqHWrs6s4HXQmDXMKgs4eJrfLfdBfomr3FAIMhlu5OHAcQEmKQOPQXK7DUjijhG2sCS07oEQgfAFPqfMFAa@BEo5zXlDC7SFd8Cjh7sSmsxk3Yns3hHCIS3lGYrYgx3yq3WHWDnj7D2UrCe@fUnRelsZZ101E36k0BKGsXtdE1Mkwl4FmGMwqTCQm8UCHfkkMVsTlRHTLWby7Sgn8k8sPGiJ1TDRtG5HVz9728VLjRNCmdIudRaQmsovFYkHfxbe/5YHJNju2cCZrFR@XyPguuje/zr92Qh6FkyWufkCVcPsXvKG7VnrHlvHv82fEJX87Y8k3XPXbsPFvOjzmfHFPj/Hgfl2efnszfpulv" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://tio.run/##nVJNi9swEL37VwxCYM3Gjj82bcnKbi7tQqD00O1tvRWOo6xFHdnIChiy@e3pOLSXHleHQfPx3hvNaFeP7XX7@FSC0/UeYreHMARXFKF61wmDYjO0A3AHJbCEwRIGp1@V00NXN1qEyfJuo1Rbd141/XEwnXaVqFBWP5IxjEg8ggMF1aueC6zX1o9Cqcftt69KYQQZEiURy8BYo0btBRsap5e7uvntHRnVmaPxLAK2yter9cdP@foDQxkceie4KVPJu/JA7KN4@vll@x0lnsEcBO@eR@86bemGcfZSlqyyDKl4PO0oQ@EojeIMZ7yehq7fa8FiFlG5JHzTn6yfsUVOoGciIJu@yADgpmz/@twW5S1Pt8UCSRrEbULH2jet4C4isXlcuvYinMKIW0SE89yiQd20/dyXBHpKJmH2gVt5IZnLf2MVKK9CVPn09mvCBVaZqO6n6W0Sm7LKOeKCU2LDr@9bdHCTji0wfnYPD3F2YZ8bmsmSti/1pBtITqNLdsYm83/4l7qm8SpP0z8" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a> - PCRE1<br />
<a href="https://tio.run/##XVDBasMwDL33K4wxxFqSNsm6jeKGXLZBYeyw7dZ0Js2cJix1jONCoN23Z0rZaQcLSU/vPVmmNuM6M7UhzJKU0AUlc2KsOkirTFuUinuL@U0mZV20Tpbd0TStsjnPQeRvi94LiIevwqY8qGlAO6Vdz6V83rw8SQkBiQElUVjMGt3IXjlOTWnVfF@U385ikG1zbBwNCF0mq@Xq/iFZ3VEQs6qznDVpJFibVqje8/ePx80rCDiTpuKs3fbOtkpjBmG8S1Oaawo43J/2iGA7iIIwhomvBtN2X4rTkAY4LpBfdiftJu46QdIWBTBGOzEj5Oqs/2qm1@kVx8z3Aa0Jv17oWLiy5swGaDadSxWOe4MXMA0A5Dyt2IAq627aSxD8SizIVBOmxQ/a/Pw7Kwcxcp4nw@VzAB/ymOe3w3AZeJbmCQPwGQIZG8coXCZR9As" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> / <a href="https://ato.pxeger.com/run?1=XVHNTtwwEFav-xSWsRRP19lNUgqsvNEe2q20UgVVQFwIWCE4rNWsEzleGgl4kl6QUNW36b19mk4WLu3B4_n55vtm7O_P7bp9-vPm13yBDmGOpIROKZmQ1ulb5XRbF6XmwXTydqHUuqi9KptNa2rtcp6DzLNpFwgS4KkwqW71ALBeW99xpT6tPi-VAkFiQEoklqPqmzNe89Ozj8ssE_TLh2yZkDsK8t8CknS-sJ4HA0KdL7PT1clxACBHxhrVac9pWzo9uS7Kr96hUbXZGE8FofvJbH92cJjM3iPtqGocZyaNJKvTCufrBonVMUi4J6birL7ovKu1RQ_C-DJNaW4pILjbXmMF0yISYQxDv-7burnRnIZUIFxif9lscUoM5gk2XSAB2uhSjgjZKdvXmNl5uqujNx4DShO-e-NN4cs1Z06g2PDgusCl-0AwCwDkfhjRgC7XzTCXJLhKLMkQE2blI8o8_vcxHOSPra_Co997nOdJ_3DVwxjymOfv-v6h54s0TxjAmGFhwV6gT6_XzyiM4yiKXsK_" rel="nofollow noreferrer" title="PHP - Attempt This Online">Attempt This Online!</a> - PCRE2<br />
<a href="https://tio.run/##RY/RaoQwFER/JcgFk9os0dKXlbALfe4XqAWxd9dAeiMxi2Fdv91qS@njmRmGmcFN6McerV3B68rjFWNzPBJO/JyunNdFfHxEkYk65/VLjI/IT7ouQIgMNuMEa3p@Tt7c12AsfiaihLtW5cV5bLueg2WGGBgabkHM0GqwchysCYlMSnPh0B46d6MgbWDFHsg0tJVqlq2AA@nKUGh@lBJIWvzjfOcsE/Pe4Q/vbeh6HHka0ycg8SvfxTx5E1D2bgzLNisv/5lJcttHawgZ0LIsq5LFq1Lf" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET</p>
<p>It works by first finding two consecutive triangular numbers whose sum is the input number <span class="math-container">\$n\$</span> (using <code>(\2x|^x)+</code> to find the smaller one), implying that <span class="math-container">\$n\$</span> is a perfect square (i.e. <span class="math-container">\$\sqrt n \in \mathbb{N}\$</span>). With <code>\2</code> and <code>\2</code><span class="math-container">\$+1\$</span> then being the two consecutive triangular roots, <code>\2</code><span class="math-container">\$+1=\sqrt n\$</span>.</p>
<p>Then it tries to match <span class="math-container">\$\sqrt n\$</span> as itself being a perfect square (i.e. <span class="math-container">\$\sqrt[4]n \in \mathbb{N}\$</span>), using the equivalent of <code>(\3xx|^x)+$</code> (using a different method than <code>^</code> to distinguish the first iteration, being in the middle of the string at that point).</p>
<p>If it did not need to match <span class="math-container">\$0^4\$</span>, the regex would be <strong>34 bytes</strong>, and if it didn't need to match <span class="math-container">\$1^4\$</span> either, it would be 30 bytes.</p>
<pre><code>                   # tail = N = input number
    (              # \1 = a triangular number T_0; tail -= \1;
                   # \2 = triangular root of \1
        (
            \2x    # On iterations after the first, \2 = \2 + 1
        |
            ^x     # On the first iteration,        \2 = 1
        )+         # Iterate the above any nonzero number of times
    )
    # T_1, the next consecutive triangular number after \1, is \1 + \2 + 1.
    # N is a perfect square iff tail == T_1 at this point.
    \1             # tail -= \1
                   # Now iff N is a perfect square, tail == \2 + 1
    (
        \3xx       # On iterations after the first, \3 = \3 + 2; tail -= \3
    |
        x          # On the first iteration, \3 = 1; tail -= 1
        (?=\2$)    # Assert that this is the first iteration, while
                   # simultaneously asserting that N is a perfect square,
                   # because if tail == \2 here, it will have equalled \2+1
                   # before this loop began.
    )+             # Iterate the above any nonzero number of times
    $              # Assert tail == 0
|
    ^x?$           # Allow us to match N=0 or N=1, which can't be matched above
</code></pre>
<p>Alternative 35 bytes:</p>
<pre><code>((\2x|^x\B|^)+)\1(\3xx|x?(?=\2$))+$
</code></pre>
<p>This avoids the special cases for <span class="math-container">\$n\in [0,1]\$</span> at the end, while working around PCRE1's atomic behavior, by hinting that the group 2 loop should only capture <span class="math-container">\$1\$</span> <code>x</code> in its initial iteration if there are more <code>x</code>s following it. This way we can get the same behavior as the 32 byte version below, where both <code>\1</code> and <code>\2</code> capture an empty string when <span class="math-container">\$n\in [0,1]\$</span> – but unlike that version, this happens for <span class="math-container">\$n=1\$</span> without any backtracking.</p>
<h1>Perl / Java / PCRE2 <sub><sup>v10.34 or later</sup></sub> / .NET, 32 bytes</h1>
<pre><code>((\2x|^x?)+)\1(\3xx|x?(?=\2$))+$
</code></pre>
<p>This drops 3 bytes at the cost of sacrificing support for PCRE1 and older versions of PCRE2, because they automatically force capture groups with nested backreference(s) to be atomic – which would prevent <code>x?</code> from ever matching <span class="math-container">\$0\$</span> instead of <span class="math-container">\$1\$</span>, blocking <span class="math-container">\$1^4\$</span> from being matched.</p>
<p>If it did not need to match <span class="math-container">\$0^4\$</span>, the regex would be <strong>31 bytes</strong>.</p>
<p><a href="https://tio.run/##RY7NasMwEIRfZQki1mIbS257iazYgfTaU291KtIQg0BNXMkFFcV9dVdxA7ksO7M/8/VHa56mzx8gVkAw58PeAClElLLabl436xG6s6XESSaqtcAAuosKQ2/1aYBFe1qIERojXW/0QJM8ydz3hxviicpynnE8fl2X6rvLoo8rolBcf7mYuLeNqUoMjXnjOxkr24lbrr5Jois5j2OXphh0B5QmPgEPcQkR5C8UxBYYiFsuZ7iZLYJz8c9KtBjHUannl61SE6Vt6S/vvsYUW07bB@8vvqa1bEuCmJJpYvljydgf" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##bVLvb9owEP3OX3GLOmEDdQPTvsyN0DZt0qR1m8pHYJJJHOLWcTLbKYG2fzs7h@xHJfLlcnfP7/ye7048iMu77P6oyrqyHu4wZ6piIw7/Vxqv9NmalVvZYmdQNxutUki1cA5uhDLwCH3NeeExPFQqgxI7ZOGtMlsQduuWawq@sNXOwac2lbVXFZ4cAHxWWkKeGLnrfknE0iqTDPsR5R@aPJdWZrdSZNLCpoO9LJI/J/s0p5T3c93E810R@AlxyQY1iOyrMpJQ@ioxjdZU5cQx@asR2pHoajQaRZQ@voSeGAjxZwkekcH/ZUCCK2TYIO6eu3EyXJlhiJ4/n2rPP4T30hqwSf@Hass6DHCUoxubqtJSGDgkOTJKDotUGIPSlakbDwkEtX2NLPbOy5IpQzn0OjsYK4T7JluP1@wsBugN0Xh35DiBDCJ6iX1/uQaN7YBirtbKk@gSHwHxHkyMnS/G4xpYVgvrJCZEL@M1nYCZnm0yLc3WF9czmENAwjsM0zUypoWwy3Xb6@kyM11zeG@t2DuWK61JOxm2w84UgLyyQRteIzExB3OdmCmG8RgF3gifFuhQiWyWlaeMdJtrcME/IvlpY9jOipr0I9Kq3n/Pb4XZSpwUTwylQWkOpMTxJkPvwtseaG9yhY7trPKShEel/JB424T3@deu0UOfk@i1i9ASyp/DNwhbdSRkNWuffrZzOqarKVm9adundk7myWp2Qen44hg25xhfzt7G8W8" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://ato.pxeger.com/run?1=XVHNbtQwEBbXfYqRZSke1tlNQvlZeaMcYJFWQgWliEtTrDQ43YisEzleiNT2SbhUQoi34Q5Pw2TbCxw8np9vvm_G_va93_V3fx79WmfkAHeQAlsyWEDvzJV2pm_LyohguXicab0rW6-rbt83rXGFKFAV-XIIJAR0akrqKzMBrDfWD0Lr19s3G61RQoxEScRqVn91jTfi7P2rTZ5L9u5lvkngC0P1b4FIBl9aL4IJoT9s8rPt29MAUc0a2-jBeMH6ypnFZVl99o6Mbpt945kEdpKsTlbPnierp0Q7qzsneJNGirdpTfMNk8T2FBVeQ1ML3p4P3rXGkodhfJGmrLAMCTwcLqlCaRnJMMap34x9230ygoVMElxRf9UdaEoK1gk1nRMB2ehCzQCOyvYh5nadHuvkzedI0iCOb7wvfbUT3EkSmx7clLT0GEhuERGupxEbNNWum-ZSQKvECqYYuFW3JHP738cIVD8Ovg5f_AYhimS8-ThmOMciFsWTcbwZM5GlRcIR5_wed_dw_YzCOI6i6D78Cw" rel="nofollow noreferrer" title="PHP - Attempt This Online">Attempt This Online!</a> - PCRE2 v10.40+<br />
<a href="https://tio.run/##RY9Ra4MwFIX/isgFk6Up6thLJVjo836BOhB3WwPZjcQUQ62/3enG2ON3OHycM9gJ3dijMSs4VTm8YWhOJ8KJnZOVsToPz49QcsHrjNWvITxDyUpV58C5gDU5H@KL/Rq0wc@YF/BQaXG1DtuuZ2AiTRFoGu6ez9AqMHIcjPaxjAt9ZdAeO3snL42P8r0gFLRV2iybgAGpSpNvfpICSBr842xnIfi8O9zxvfVdjyNLQvICxH/jB58npz3K3o5@2WZlxT9Hkux20GjCCGhZljWV@VuafgM" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET</p>
</div>
<div id="pu1" class="pu"><h1>ECMAScript, 41 bytes</h1>
<pre><code>^((?=(x(x*)|)(?=(\2*)\3+$)(\2*$\4))\5){2}
</code></pre>
<p><a href="https://tio.run/##TY@9bsIwFIVfJY0QuTdpQkhLB1zD1IGFoR0JlSwwiVvHsWwDKT9rH6CP2BdJkwGp25G@I53zfbADsxsjtIutFltuqlp98q/WUMWP3isvXhoNcKKzUdi@A8wpNNCEeME@5lmI@UM0wD4N8kfEfILn7NqGoxMmrn5zRqgCMLFSbDg83cddhViakmMpJAeQ1HC2lUJxQLyjai8lngsqE6ulcBDEARKxA1C0SCRXhStxll0uwi7ZEgTVzFi@UA6KVbpGvAH@H6jZeD6e9hhdaeqjv1AHJsXWM0wVfOr5kSS72gARz5QTEUXYDVbUb/zEcM2ZA4FJxdymBIN4tsOh7qQc9B5jovfOOgMiCrzf7x8viKpVtr5dJddrm8bZJE3/AA" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a> - ECMAScript (SpiderMonkey)<br />
<a href="https://tio.run/##TY5LbsIwEECvghCSZwixkrRscA2rLtiwaJeECisxYargpLb5SIFtD9Aj9iJpUgmJ3ZPefN6nOimXWap9aKpct05Gwso3Xbxeanj3lkzBrTpv2w@AhYQLXMZ4xR7TZIzpUzDCnkbpM2I6xSa5tVvuSso0xJMwRhRWfx3JamBWq7wkoxnyrGOvl8Zru1PdaEOmPvpZbatMO8edz8nckFcG2P/GpJTzppAld3VJHljIUNAOwMiCl9oUfo/z5Holt1IrIFkr6/rrUKyjDeJd6Edh5vEinvUa/d5W5@HSnFRJ@cAqU@jZYBiUYldZEPQitaAgwO7hQQ4vQ2513eUDIT8on@3BIjYP6dXR87MlrwHcgqWGzRjDgAI2@P3@GbDgsE4292rhZCxuN2yjMJlG0R8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> - ECMAScript (Node.js - faster)<br />
<a href="https://tio.run/##RY/BaoNAEIZfZZEBd2JWjGkvkaUpocecelQLYje6sNmVdUWJ9doH6CP2Ray2lNz@b/7hY6YxvbBtLZSawfLUikoM@eGgRU@P/vxG6ROnAx02@IFrzOINZvsAcE2QPSBmjzjG0@wft97JXBupxPv25XR@fi2tbJyHCdx4lFyMFUVZU1BEagJSN53DEQoOirWNks5jXiIvFIqwNJ12TDkSrwsBhyKN8mkRUNA8ldrlv5MENFPin3crBwGOq@PKwYbnwpW1aKk/@BvQ@NfccOytdILVpnXTctkuuTNh2ix/K6kF8UCT788vAostrKzpmjaN81AJXbkavWma5ojt9lH0Aw" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET, in ECMAScript emulation mode</p>
<p>This uses a &quot;higher technology&quot; than my older <a href="https://codegolf.stackexchange.com/a/21951/17216">50 byte ECMAScript answer</a> (which was my very first post on this site), and unlike its algorithm (which works individually on prime factors), does actual division (or multiplication, depending on how you look at it) in a way that works thanks to the Chinese remainder theorem, as <a href="https://codegolf.stackexchange.com/questions/179239/find-a-rocco-number/179420#179420">explained in this post</a>. The upshot of this is that it returns the <span class="math-container">\$n\$</span>th root in a capture group when asserting a number is an <span class="math-container">\$n\$</span>th power, whereas the prime-factoring algorithm is completely unaware of what the root was.</p>
<p>This regex takes the square root twice in a row, asserting each time that the input was a perfect square. The same square-testing regex is used <a href="https://codegolf.stackexchange.com/questions/144561/golf-the-pseudoprimes/179024#179024">in the second answer in this post</a>. It could be modified to take <span class="math-container">\$8\$</span>th powers, <span class="math-container">\$16\$</span>th powers, etc., by changing the <code>2</code> in <code>{2}</code> to <span class="math-container">\$log_2 n\$</span> to match <span class="math-container">\$n\$</span>th powers.</p>
<pre><code>^                      # tail = N = input number
(
    (?=
        (x(x*)|)       # \2 = potential square root; \3 = \2-1, or unset if \2==0, in
                       #      order to match N=0 using ECMAScript NPCG behavior;
                       # tail = N-\2
        (?=
            (\2*)\3+$  # if \2*\2 == \2+tail, the first match here must result in \4==0
        )
        (\2*$\4)       # assert \2 divides tail, and \4==0; \5 = tool to make tail = \2
    )
    \5                 # tail = \2
){2}                   # Loop the above exactly 2 times
</code></pre>
<h1>ECMAScript / Python or better, 43 bytes</h1>
<pre><code>^((?=(x(x*))(?=(\2*)\3+$)(\2*$\4))\5){2}|^$
</code></pre>
<p>This version is NPCG-independent, allowing it to work on a wide variety of regex engines:</p>
<p><a href="https://tio.run/##TY9NTsMwEIWvEqKqmUlImgbKosHtikU3XcCyKZLVuo7BcSzbbUN/thyAI3KRkEggsXl60jfSvO@NHqjdGKFdbLXYMlPV6p19tIYodvSeGX9qNMCJzEZh@wowJ9BAEyL2rchCLO6iAfZtUNwjFhM8Z9fL66ANRydMXP3ijFAcMLFSbBg83MbdVW5Jmh9LIRmAJIbRrRSKAeINUXsp8cyJTKyWwkEQB5iLHYAiPJFMcVfiLLtchF3SJQiiqbFsoRzwVbpG/APsP1Cz8Xw87TG60tRHf6EOVIqtZ6jibOr5kcx3tYFcPBKWiyjC7mFF/MZPDNOMOhCYVNRtSjCIZzsc6k7KQe8xzvXeWWdARIH3/fnlBRFUq2w97@N38DTtlK/XNo2zSZr@AA" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a> - ECMAScript (SpiderMonkey)<br />
<a href="https://tio.run/##TZDPboJAEIdfhRiTnSm6AVov0NVTD148tEfRuMEVp8GF7q5Kglz7AH3EvgiFpk28TL7kmz@/zLu8SJsZqtxUl3vVWREkRryq/KWu4M0Z0jk38rrrtgALATXUD4gDpdEDpo/@GAcap0@I6QybqL1tx92O24IyBeFkGiImRn2cyShgRsl9QVox5FnPTi21U@Yg@9aGdHV2cWXKTFnLrduTbpGXGtjvxKQQ8yYXBbdVQQ7YlGFCBwAtcl4onbsjzqPbjexKroBEJY0dtkO@DjaI/0LdCz0PF2E8aHRHU15HS32RBe09I3WuYm/kF8mhNJDQs1AJ@T72B09iVI@4UVUfHwj5SbrsCAaxuYtenh2/GnIKwC5YqlnMGPrkM@/788tjPpzW0WYxlL/scdC/yYowaVvsgmk0C4If" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> - ECMAScript (Node.js - faster)<br />
<a href="https://tio.run/##RU7BToNAFLz3KzbNS3dfgXah9tJlC03q1ZM3aUk1VDdZKQImmHU9@gF@oj@CC5p4eZmZzLyZqqj1un9@I1ALYvTl4aQJLIWjMt7vbndbOzlfagaN5CLeCjREnR1DU9WqbMk0K6fCklTLptKqZTSgfvN637QukvtB6IdYvAym5F/lTscN5CiGX41rPNWpjiM0qb4LD9JdfhB2QsjYrP4EULEcDQ55HhqXZbSjHSiUH0uol2igmc3GXeMstzkUvzNBLSj5/vwidMEgSnRRPrZPEG04Cmttnl/f7PO8PzKWSNaxbo44oCyaY7byAAcE2RVitkYT2fcj9D0PwhXnPw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##bVLRbtMwFH3fV1yiTrXbzks7eCGLJkAgTWKAtse2k9zEad05TrCdNVvpKx/AJ/Ij5To1jEnLy/W99@Rcn@O75vf8ZJ3f7WVZV8bBGnMmKzZI4P9K46R6sWbEUrTYOaqbhZIZZIpbC1dcathCqFnHHYb7SuZQYofcOCP1ErhZ2umcgluZamPhY5uJ2skK/zwC@CSVgCLVYtMdScSyKhcM@xFN3jdFIYzIrwXPhYFFB3teJH//DGlBaRLm2pFLNivPT4hNF6iB55@lFoTSV6lulKKyIJaJ7w1XlkSng8EgonT7HHpgIMS9SLBFBvePAQlOkWGBuLvEDtP@TPd9dMnuUNt9484Jo8Gk4YRqy9oPsDRBNxZVpQTX8JgWyCgSuMm41ihd6rpxkIJXG2rk5sE6UTKpaQJBZwdjK26/iNbhNTuLAYIhCu@OHAeQRkSQGPrTOShsexSztZKORCf4CIh3oGPsXGqHa2BYzY0VmBA1jed0BHr8YpMpoZdudT6BC/BIeIthPEfGbMXNdN4GPV2mx/ME3hnDHywrpFKkHfXbfmcKQFEZrw2vkeo4AX2e6jGG4RAFXnGXrdChEtkMKw8Z6TZX44J/QPLDxrCN4TUJI7KqfvhaXHO9FDgpHmlKvdICSInjdY7e@bd9pMHkCh3bGOkE8Y9Kk8fUmca/z1O7Rg9dQaLjHH7//AXHeYTOjKBkS1M1NZmEnUEznkrBIkLRm5gmO/8d@UXc3xJykZKWtANK/Wk2GdDZ2bBH/ak3e03p7A3dTnY/bnt7v3f7@GR8Fsd/AA" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://tio.run/##bVLBctowEL3zFVvKFAnbBEPbg42TmX5Cp4d2gHgcIWxNjayx5IGEcO0H9BPzIaUrGQik1WFntdp9@/atmFJBztjhvZCsbJYcpg9Vpc1NzXO@HRZK3XZYkdWQqtkCEvja/bLZ/HyYND8eH79/Kz5vCnK4J@QuIVuyHVBqvfl4QOcTr0et15t/pHT@ie7G@@f73oG@Le/6MFBJqrww7rxyEEih5tn6tiOkAVWjTXldVzVhldQGHKXBmmud5ZzutFlGEcMEmE7hGLWui3O5LGOouWlqCWG8d5DrTEhCYdcBPGqG3UouiaJBuEhGMTSYMxmnBip7swW5dRwe5gqZY1A1Jnb1LSenWxQ54bAdUf5VKIoEyzSn8Smq15lhBWyK7AizqmogttfTuVfOTSkkJ@2AQvptWxqfqNtjS@QIl5OZShCXMGQp0iSU@iBDH1Sl8bl9WQm5JP2gT@MzgAzx1ea8Sy5HjCJpg3f/wQXP5XsQUoiw@StWuxnbTvJNe5vJ0AsXMS5mrbkh2of@tm@JoRYaH63i5/qzCCKRVvppIsMYPE9cTuymXgG51DfVPKtZQcjFBPSDxQ/Ewncy@7gW@hbnhPVEAQe0hEl/LlEeXEMY/5PabqJqjP1fwpouvPz6jRZd22Q2XgzxL@WmIPS6fN@59lp7/Jgowf4wCsLJaPSHrcos14egdPOlbry/" rel="nofollow noreferrer" title="C++ (gcc) – Try It Online">Try it online!</a> - Boost<br />
<a href="https://tio.run/##TY5BTsMwEEX3OcXIqlRPkkZxApsEi4MkqVSB2xo5TjR2RStgywE4IhcJnSIkdn/mz3/z50s8Tr5e7DhPFCFcQk4mfwmTb4E0CSGWrZSPWp7lOUVk1Vcp9nW2Qlar/g6xv8e36uN9u1qu951qNmpoweoy2U8EDqxnbhHis/VNAk67IszORik2AhOwe3DGS4cPVQOuU4N2XTkkwGHPYdr5g5HWR8kG5r9KDZgpvPJg1GSKYHb0dJSUgziL1F@5DB7ZZ2EbmImD2N42WrV/paZTLF7JRiNDJOkxW8P35xesMx652VgcaDrNQSI/vWH/b8C4YKBEXMqNqsvyBw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a> - Python<br />
<a href="https://tio.run/##TY5NTsMwEIX3OcXIilRP/hQ3sEmwOEiSShW4qZHjRLYrUgFbDsARuUjIFCGxezPz3jdvvobzZKtVj/PkAvirz5wa1JK9@Mk24KRjjK0Hzh8lX/iSIJLq9gl2VRojqbi7Q@zu8W3/8X6I183fijoXfQNaltFpcmBAW0IXPjxrW0dgpCn8bHTgLGcYgT6BUZYbfNjXYFrRS9OWfQQUthR2Rzsorm3gdMDsV4keU4EbD0Z5a114dXRPZ@4yYAtL7IYm9kgWErqG2VEWm9tGiuav13QJxavTQXEfHLeY7uD78wt2KY1UbiwGN11mz5H@3rD/N6CMV1AirmUuqrL8AQ" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a> - Python (with <code><a href="https://bitbucket.org/mrabarnett/mrab-regex/src/hg/" rel="nofollow noreferrer">regex</a></code>)<br />
<a href="https://tio.run/##PY5NasMwEIX3OcWrMVjjxkJ22k2NCIF020XpLnZESxRHIBSjOMSlP8seoEfsRVxb0G6GNx@8b8afX14HD4lH3ei@5U5fsF49rbjXz7sSRooSl4OxGlY2ujuNaA@7yfJayqhyUTlyuxGcZ0VdQrtdAPzUWtOxJEtoBuyPHg7GjT1R8@6oDMsFcR40/3sws6iPUkeQn/ABmKvpg/Y8XQ52I/Nx98Z1cPMEP1/fSOYsLrBEXHCrXdMdGOEOkzE0/sZMqfuHtVLDlrGlZD3rU6IpVUVK1eI6pinF1Q1RdUtvxcf7Nh4GkeULIX4B" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a> - Ruby<br />
<a href="https://tio.run/##XVHNjtMwEL73KSzLUmZaN01DCypu1AsgrYQ4LNyarpUN7iYicSzHKxV1e@UBeMR9kTKu4MLBo29@vm9@7Bp33e5c45jwrGB8wVnKnDdP2hvXVbWBZJFOd1o3VRd0PfSu7YwvoURV3i/GRLKE3pGC@snEAhuMDSNo/enu80etUbIlkiQJq0lrWz2aANzV3qSPVf0jeDK6a/s2cMn4Kt@sNm/f5Zs1RzU5Dh5EW2RKdMWR1Ef4@u3D3RdUeGbtEUS3H4PvjCWE8@WhKHhpOVLx@PxIGQrLTM6XGPnm5LrhuwE@55LKFfHr4dmGyN3mRNqTANnsoCaM3Trbv76w2@KWJzSbIbVmcLtQX4W6AeElNYvnMlWA5JRIYVGKHpGd45QtmroZ4miK0TZLxaLPhE05e/31m/EUTO/CTxD9Pj/gLnv/b6ubj@pCA13@@wBAdX0A2BVwgtMUMaIyn2L5ZiYwIlGuEMs1nvPLy4O4XrN5vs6yPw" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> - PCRE (fastest)<br />
<a href="https://tio.run/##RY9RaoQwEIavEsKAmbURdduXldCFPvcE6oLYrAayicSIstbXHqBH7EWstpS@/d/8w8dMZ0fp@lZqvYITuZONnMrTyciRnYP1wtizYBObDoh7KtIDFscQcE9QPCIWTziny/sF1uD8QF/srVNavlHM4C7i7GqdrOqWgSbKEFCmGzzOUAnQvO@08pTTTF0ZVFFtB@O59iTdF0IBVR6XyyZgYESujC9/JhkYruUfJzuHIc674ybARa@Vr1vZs2AKDmDwt7njPDrlJW9t75ftsiT7Z8KN3d7VykhCwZCvj08Cmy1qnB26Pk/LSEvT@BbpsixrzJNjHH8D" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET</p>
<pre><code>^                      # tail = N = input number
(
    (?=
        (x(x*))        # \2 = potential square root, which must be positive; \3 = \2-1;
                       # tail = N-\2
        (?=
            (\2*)\3+$  # if \2*\2 == \2+tail, the first match here must result in \4==0
        )
        (\2*$\4)       # assert \2 divides tail, and \4==0; \5 = tool to make tail = \2
    )
    \5                 # tail = \2
){2}                   # Loop the above exactly 2 times
|^$                    # Allow us to match N=0, which can't be matched above
</code></pre>
</div>
<div id="pu2" class="pu"><h1>.NET, <s>39</s> 37 bytes</h1>
<pre><code>^(?=((?&gt;^((?&lt;-1&gt;x)+|x)|\1\2\2))*$){2}
</code></pre>
<p><a href="https://tio.run/##RY9Ra4MwFIX/isgFk7qU6NOoS1vY836BWhB3WwPZjcQUpTa/3enG2MuB73A4nNPbEd3QoTELOFU6vOFUHw6EIzsny4WdFGOn42WVN5EdJ54@J/6ssiqvcs53wOc8LMn5JX63X702@BnzAh5KFlfrsGk7BibSFIGm/u75DI0CI4beaB@LuNBXBs2@tXfywvgo3wKpgqaUdVgLGJAqNfn6xymAhME/zjZOUz5vHW7/0fi2w4ElU7ID4r/2g8@j0x5FZwcf1llZ8c@RILu@NJowAgohLFLk8lXKbw" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
<p>Not only does this outgolf <a href="https://codegolf.stackexchange.com/a/22084/17216">primo's amazing answer</a>, but it runs at very close to exactly the same speed under .NET's regex engine.</p>
<p>This solution uses the .NET-specific feature of balanced groups, where every time a group is captured, it's pushed onto the stack for that particular group, and can then be popped off the same number of times. The popping is done in <code>(?&lt;-1&gt;</code>...<code>)</code> above.</p>
<p>This regex works by:</p>
<ol>
<li>Asserting that <span class="math-container">\$N/\2\$</span> is a perfect square, using a perfect analogy of the <code>^(\1xx|^x)*$</code> perfect square regex (which uses a nested backreference), and in so doing, pushing capture group <code>\2</code> onto the stack the same number of times as <span class="math-container">\$\sqrt{N/\2}\$</span>. This is done with capture group <span class="math-container">\$\2=1\$</span>.</li>
<li>Redefining capture group <span class="math-container">\$\2\$</span> to actually be <span class="math-container">\$\sqrt N\$</span> as found by the first main loop iteration, when we pop all copies of <code>\1</code> off the stack at the beginning of the second iteration of the main loop. Then we assert <span class="math-container">\$N/\2\$</span> to be a perfect square using this new definition of <span class="math-container">\$\2\$</span>.</li>
</ol>
<p>So it's basically a double square root, like my two other recent answers to this challenge, but this time using .NET's balanced groups to take the square root. (Also, it doesn't return the fourth root in a capture group, just the square root in <code>\2</code>.)</p>
<p>And like my 41 byte ECMAScript answer, it can be modified to match <span class="math-container">\$8\$</span>th powers, <span class="math-container">\$16\$</span>th powers, etc., by changing the <code>2</code> in <code>{2}</code> to <span class="math-container">\$log_2 n\$</span> to match <span class="math-container">\$n\$</span>th powers.</p>
<pre><code>^   # tail = N = input number
# Main loop - Execute the following in an lookahead, so that on the second iteration
# we can start again from zero.
(?=
    # Capture group \1:
    # Run the following inner loop; for every iteration, push the captured contents
    # onto the balanced group stack for \1. This will later be used as a count.
    # And since this is a loop with a minimum iteration count of zero, regardless of
    # what is done inside, we're guaranteed to be able to match N=0.
    (
        # Evaluate the following in an atomic group, because otherwise the regex engine
        # would backtrack into it, changing the value of \2.
        (?&gt;
            # Execute this if and only if we're on the first iteration of this inner loop.
            # The atomic group around it prevents the other alternative from being taken.
            ^
            # Define \2 to be one of the following two:
            (
                # Pop all copies of \1 off the stack, asserting that at least one
                # was pushed. If this is the first iteration of the main loop, \1
                # has not yet captured anything, and this won't match (and thus will
                # go to the next alternative below). This also clears \1's value,
                # allowing the next iteration of the main loop to start off properly.
                (?&lt;-1&gt;x)+
            |
                # \2 = 1
                x
            )
        |
            # If \1 has a value (which implies \2 also has a value), then \1 = \1 + \2*2;
            # tail -= \1. On the Kth iteration, this will give us head = K^2 * \2. This
            # uses the fact that (n+1)^2 - n^2 = 2n + 1. The 1 comes from \2's initial
            # value.
            \1\2\2
        )
    )*      # Loop the above zero or more times
    $       # Assert tail == 0
){2}    # Loop the main loop above exactly twice
</code></pre>
<h1>Perl / PCRE2 <sub><sup>v10.34 or later</sup></sub>, <s>41</s> <s>40</s> <s>38</s> <s>37</s> <s>35</s> 33 bytes</h1>
<pre><code>^(?=(?|^((\1|x))|\1(\1\2))*+$){2}
</code></pre>
<p><a href="https://tio.run/##RU5BasMwEPzKEkSsrW1suQRCZcUOpNeeeqsTkYYYBGriSi64yOrXXcUN9LLMzM7uTHc2ejV9fAMxHJy@no4aSMYDFeVu@7rdeGivhhIrcl5uODpQbWDoOqMuPSyay4J7qLWwnVY9jdIosV/vtg8nMklZwvD8eTNV/2oedHwiEvntlw2JR1PrskBX6ze2F2Hme37PVXdKVCnmdUBxjE61QGk0RDBAMCGC@IGMmAwdscvlXG7uFooz/teVKO69l/L5ZSfldKCVoNV4oLRh44A4NiygpkB8iAm6wk9Tnq4fVwX7BQ" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://regex101.com/r/v9Bzlc/1" rel="nofollow noreferrer">Try it on regex101</a> / <a href="https://ato.pxeger.com/run?1=XVBBTsMwEBTXvsJYluKlSduEFlq5US6AVAlxAG6kWGlwSETqRI4rVWr7A37ABQkh3gSvYdNy4uD17Hp2Zr1vH3Vev_8cvU4jBIQZEhLap6RHaqOepVF1maSKO_3eSSRlnpRWptWyLkplYh6DiG_7jeMSB0-GRfmsWoK2StuGS3k1u76UElziA0qisOgUupCNspzWqVG9RZK-WINBlsWysNQldBhMhpOz82AyoiA6WWU4K8KBYGWYoXrD7-4vZjcgYEOKjLPyobGmVBoReP48DGmsKSC5WS3wBcvuwPV8aPvVui6rJ8WpR12kC-xPq5W2be80wKYHFMA4mIsOIXtn_ZczPQ3374i6XUBrwvcbWiY2zTkzLpq161KJ5c7acZkGALJpRyxApXnVziUIfsUXpM0J02KHNrt_a-UgPlc288bfx488Cnm0feQ89rdrgG3sI4oDgJMug02wOxDf_66vgTc-HQX-If0F" rel="nofollow noreferrer">Attempt This Online!</a> - PCRE2</p>
<p>This is a port of the .NET version, using group-building (with a nested backreference) instead of a balanced group. Thanks to the use of a branch reset group <code>(?|</code>...<code>)</code> to reset the value of <code>\2</code> beteween iterations of the main loop, it too can be modified to match <span class="math-container">\$8\$</span>th powers, <span class="math-container">\$16\$</span>th powers, etc., by changing the <code>2</code> in <code>{2}</code> to <span class="math-container">\$log_2 n\$</span> to match <span class="math-container">\$n\$</span>th powers. Commented version to come.</p>
<h1>Perl / PCRE, <s>41</s> <s>40</s> <s>38</s> <s>37</s> 35 bytes</h1>
<pre><code>^((?=(?|^((\2|x))|\2(\2\3))*+$)){2}
</code></pre>
<p><a href="https://tio.run/##RU7LasMwEPyVJYhYW9v4EQKlsmIH0mtPvdWpSEsMAjVxJRdcZPXX3U0a6GV3ZvYx0x@tWc8f38CsAG/O7wcDLBNEZbXbPm83Abqz5czJXFQbgR50Rwx9b/VpgEV7WogAjZGuN3rgURol7uvNDXSikrRICjx@XpbqfzUnHR@YQnH55cjxYBtTlegb81LsJdV8L26@@kaZruR1TCiO0esOOI/GCEagJUSQP5Axm6Fnbrm8hrtmo@CF@MvKtAghKPX4tFNqfuW8lryeqLflNCJObUmoXSHexQzRl2Ge8/R@tS6LXw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##hVNrb9owFP3Or7hja7EhVAlMU5WQVl3XaR9YOyEqbQIWseCAteBEjhl9wF8fu7ZJmz6kRUj4ce855557Hed5ex7Hu7dcxOlqxqCXx5IdLU5q8WIqIcpHEwhhUP@4Xv/@1V39uL39Plx8WC/I7ichpyE53eD/uLO5oXQz7uBq3KW02XpH6X1nu6PP0@oONPMwylteUHukLNSMZ5qzeiS5mD894xmesunyZdxJjQsFOS5VxKTMJIkzUSgwNTSXrCimc0bvkcf3YwyAXg/2p3ppzpmYpQFIplZSgBdsDeRyygWhcF8D/PIRsqVMkJy2vUnoBrDCmG4nUpDpnU6Y48IEG0yrDi/ylQpAOwtNyQKoqkM5uZI2W7JilSq71nUkScGUA9lKIe1cLexN9ofFKpOj7sRSIWpowKM4W@Y8ZSR34Nv54CL6dDU86/dhY3fXw8/HDhxaQrsoGVxqoXgC5I1ktPQhMZ4mBKvBaAfqGshIkzBFJSYdDmY@HBRjgd2tYFqePXCCCUSLv9NOGXPmTKVcMGK7woVjfaIBxnil50YUpgkXa5yqjBMTdBRH6C2h1AHhOZBnBV7bm4SLGWm0G3ti/QlPG4Qxb8JqX3xf6MPTV3ChZeJbgEJ8JH/Esk3TdIKt7W4kvJY3CXCillg4KRxo3DS0MCylwMtJWMl/MIKHQs9MLxReAK0Wr1Zsu6pnoewsu2ExkcyBy@t@3wHk4Ng189uPgwPdSsllM/coJyG4sNmUoOiDmYiLweBqEF1efT0bnn95LqCEuKOAzuhKSWMsGrY/wYtQ20YcVf2iePAq1J6@h2IOD/8j5gle3YcLPXT1p7jb1x2r2G0jtjUzsr4dRckYKqEPj33/6mrbnds@fu@67t84SafzYtdOtff/AA" rel="nofollow noreferrer" title="C++ (gcc) – Try It Online">Try it online!</a> - PCRE1<br />
<a href="https://tio.run/##XVBRa4MwEH7vrwgSMNfGVt0eBqn4sDkojG3YsZfaBediFWwMardC29/uTtnL@pDkLt/33X13pjD9MjSFIbQhAbEWFpkT06idbJSp0kwxezGfhlIWadXJrN6bslJNwhIQSbxobU5sPDl@yp0aCLpTumuZlI@rp0hK4MQDLImFxST/acpOsfXbQxTH3Hq9jyOffFsg/gNYpO1S3TF7YMj3KF6vXp5tuOZZiUbtJK8bRsvAFbQKcjTRDvjqGQScSJkzWm3arqmUxggcbxsEow7J7eETEfzmLnc8GPTqaKr6SzHLsTjSBeqz@oBWMFn6KNpgAbzdrZgQMnbWfznVy2DEMZrNAFsTNi5yn3ZZwWjDsdmwVZXiZEebUw0A5DRYLEFlRT34EgRH8QQZckK1uGCby9X2GYj@g7EwYOEZ38Q/HwHOiY9RcgMwnVGAk3/pe9e5u3Vd9xc" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> / <a href="https://ato.pxeger.com/run?1=XVDNTsJAEI5XnmKzbtIdaKFUVMjScFETEuNBvVHclLqFxrJttktCAryBb-CFxBifSZ_GKXDysPP7fd_MzsdnuSj3v2fvwxEGhBkSEtqhpE1Ko-bSqDKPE8WdTrs5knIR51YmxbLMcmUiHoGIHjuV4xIHX4pFOVc1QFulbcWlvBvf30oJLukCSqKwaGQ6k5WynJaJUe1ZnLxZg0bm2TKz1CW0Fwx6g6vrYHBJQTTSwnCWhb5geZiiesWfnm_GDyBgQ7KUs3xSWZMrjRF43WkY0khTQHC1mmEHy67vel2o-Wpd5sWr4tSjLsIF8pNipW3NHQZImqAAWn8qGoQcJutTzvQwPPQxarUARxN-uNAytsmCM-PisPpcKrbcWTsu0wBANvWKGahkUdR7CYJf6QpS54RpscMxu39n5SC-Vjb1-j_nL5yPQj7aoo-C7RpgGwUYRRcAzRYD2AS7I3R_ct--1-_5vn9M_wA" rel="nofollow noreferrer">Attempt This Online!</a> - PCRE2</p>
<p>PCRE1 and earlier versions of PCRE2 did not support quantifying a lookaround, automatically short-circuiting a loop count of <span class="math-container">\$2\$</span> or more to be <span class="math-container">\$1\$</span>. So this version needs to wrap the lookaround in a dummy group in order to quantify it.</p>
<p>Not that it was necessary – but because this challenge and primo's answer talk about testing up to <span class="math-container">\$128^4\$</span>, I decided to do a test run on this regex. I tested it on all integers from <span class="math-container">\$0\$</span> to <span class="math-container">\$130^4\$</span> inclusive (that's <em>all</em> integers in that range, not just <span class="math-container">\$n^4-1\$</span>, <span class="math-container">\$n^4\$</span>, and <span class="math-container">\$n^4+1\$</span>) using <a href="https://github.com/Davidebyzero/RegexMathEngine" rel="nofollow noreferrer">RegexMathEngine</a>, and there were no false positives or negatives. It took about 4 days of computing time, single-threaded.</p>
<h1>PCRE1 / PCRE2 v10.33 and earlier, <s>36</s> 34 bytes</h1>
<pre><code>^((?=(?|^((\2|x))|\2(\2\3))*$)){2}
</code></pre>
<p><a href="https://tio.run/##hVNrb9owFP3Or7hla7EhVAlI05aQVl3XaR9YOyEqbQIWseCAteBEjjP6gL8@dm1Dmz6kRUj4ce855557Hed5ex7H2zdcxGk5Y9DLY8mOFye1eDGVEOWjCYQwqH9crX7/6pY/bm@/DxfvVguy/UnIaUhO1/g/7qxvKF2PO7gadyltvqX0vrPZ0udZdQeaeRjlLS@oPTIWasYzTVk9klzMn57xDE/ZdPky7qTGhYIclypiUmaSxJkoFJgSmktWFNM5o/fI4/sxBkCvB7tTvTTnTMzSACRTpRTgBRsDuZxyQSjc1wC/fIRsKRMkp21vEroBlBjT7UQKMr3TCXNcmGCDadXhRV6qALSx0JQsgKo6lJMrabMlK8pU2bWuI0kKphzISoW0c7WwN9kfFqtMjroTS4WooQGP4myZ85SR3IFv54OL6NPV8Kzfh7XdXQ8/v3fgyBLaxZ7BpRaKJ0AOJKN7HxLjaUKwGox2oK6BjDQJU1Ri0uFw5sNhMRbY3Qqm5dkBJ5hAtPg77ZQxZ85UygUjtitcONYnGmCMt/fciMI04WKNU5VxYoKO4wi9JZQ6IDwH8qzAa3uTcDEjjXZjR6w/4WmDMOYgrPbF94U@PH0FF1omvgUoxEfyRyzbNE0n2MruRsJreZMAJ2qJhZPCgcZNQwvDUgq8nISV/AcjeCj0zPRC4QXQavFqxbarehb2nWU3LCaSOXB53e87gBwcu2Z@u3FwoFsped/MHcpJCC6s13tQ9MFMxMVgcDWILq@@ng3PvzwXsIe4o4DO6EpJYywatj/Bi1DbRhxV/aJ48CrUjr6HYo6O/iPmCV7dhws9dPWnuJvXHavYbSM2NTOyvh1FyRgqoQ@Pfffqaput2@58cF33b5yk03mxbafa@38" rel="nofollow noreferrer" title="C++ (gcc) – Try It Online">Try it online!</a> - PCRE1<br />
<a href="https://tio.run/##XVDBboMwDL33KyIUibiFFthpShGHjUmVpm6i0y6lixgLBYkGFNKtUttvZwbtsh6S2Hnv2c9uy7ZfRm3ZEqpJSKyFReak1XIvtGzrLJfMXsynkRBlVhuRN4e2qqVOWQo8TRad7RAbT4GfYi8HgjJSmY4J8bR6joUAh/iAJbEwnxQ/ujKSbd4e4yRxrNeHJA7ItwX8P4BFOpMpw@yBId7jZLN6Wdtwy7NShdpJ0WhGq9DjtA4LNNEN@GoNHM6kKhitt53RtVQYgevvwnDUIbk7fiKC347nuD4Menlq6@ZLMsu1HKRz1OfNEa1gsgxQtMUCeHs7PiFk7Kz@cqqW4YhjNJsBtiZsXOQhM3nJqHaw2bBVmeFkJ9uhCgDIebBYgczLZvDFCY7iczLkhCp@xTbXm@0z4P0HY1HIogu@aXA5AVzSAKP0DmBKAc7Bte89N7j3PO8X" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> - PCRE2 v10.33</p>
<p>PCRE1 automatically forces capture groups with nested backreference(s) to be atomic, thus allowing us to save 1 byte by omitting the possessive quantifier. Early versions of PCRE2, like the one still on TIO, had the same behavior.</p>
<h1>.NET, <s>38</s> 36 bytes</h1>
<pre><code>^(?=(?&gt;^((?&lt;2&gt;\2|x))|\2(\2\1))*$){2}
</code></pre>
<p><a href="https://tio.run/##RY/RaoMwGIVfReQHk9qUmKtRl1ro9Z5ALYj7WwNZIjFFqc2zO90Yu/wOh49zejuiGzrUegEnS4d3nOrj0eBIzslyJYUkxelKSPEuTpV4TZS@KkEqUWWU7oDOIizJeR9f7FevNH7GNIen5PnNOmzajoCOlIlAmf7h6QyNBM2GXisfszhXNwLNobUP45n2kdgKqYSm5HVYBQSMLJXx9U@Sg2Ea/zjbOE3pvDnc4aPxbYcDSaZkB4b@xk86j055ZJ0dfFhnZfk/R8zY9aRWBiMwIYSFM8HfOP8G" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
<p>This is the Perl / PCRE version backported to .NET, using its feature of recapturing numbered groups by using the number as a name, seen as <code>(?&lt;2&gt;</code>...<code>)</code> above.</p>
<h1>Perl / Java / PCRE2 <sub><sup>v10.34 or later</sup></sub>, <s>41</s> <s>39</s> 37 bytes</h1>
<pre><code>^(?=(^(\3?x)|(?=(\3?x))\1\2\2)*+$){2}
</code></pre>
<p><a href="https://tio.run/##RU5BasMwEPzKEkSsrW0suzSHyIodSK899VYnIg0xCNTElVxwUdWvu7IbyGWZmZ3dme5s9NP48Q3EcHD6ejpqIBkPVJS77et246G9GkqsYLzccHSg2sDQdUZdelg0lwX3UGthO616GqVRYr/ebR9OZJLmSY7nz8lU3VUWdFwTiXz6ZUPi0dS6LNDV@i3fizDZnt9y1Y0SVYp5HVAco1MtUBoNEQwQTIggfiEjJkNH7HI5l5u7heI5/@9KFPfeS/n8spNyPNBK0ANtHqsBfyY8I2zypmgKfIgJusKPI0tXK8bYHw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##bVLbjtowEH3nK6ZRK2wu3kBfqnoj1FatVGm3rZZHYCWTOGDWcVLbWbJL@XY6DullJfIynpmTMz7HsxOPYrzLHk6qqErrYYc5UyUbcPi/UnulL9as3MgGO72qXmuVQqqFc3ArlIEDdDXnhcfwWKoMCuyQubfKbEDYjVusKPitLfcOPjeprLwq8c8ewBelJeSJkfv2SCKWlplk2I8o/1jnubQyu5MikxbWLexlkfz5s0tzSnk31408328DPyEuWaMGkd0oIwmlrxJTa01VThyTP2uhHYmuBoNBROnhJfTMQIi/SHBABv@XAQmukGGNuAfuhkl/afohen48144/hPfSGrBJd0K1RRUGOMrRjXVZaikMPCc5MkoO81QYg9KVqWoPCQS1XY3Mn5yXBVOGcuh0tjC2Fe6bbDxes7UYoDNE492R4wwyiOgkdv3FCjS2A4q5SitPojE@AuI9mBg7X43HNbCsEtZJTIhexCs6AjO52GRamo3fXk9hBgEJ7zFMVsiYboVdrJpOT5uZyYrDB2vFk2O50po0o37Tb00ByEsbtOE1EhNzMNeJmWAYDlHgrfDpFh0qkM2y4pyRdnMNLvgnJD9vDNtbUZFuRFpWT9/zO2E2EifFI0NpUJoDKXC8ydC78LbPtDO5RMf2VnlJwqNS/px4W4f3@deu0EOfk@iNi9ASyo/h64WtOt2TWULuyfLtrKG/wrk90eVkOV1O6WD4mh6mx1NYn1M8nsbv4vg3" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://regex101.com/r/v9Bzlc/2" rel="nofollow noreferrer">Try it on regex101</a> / <a href="https://ato.pxeger.com/run?1=XVDBTsJAEI1XvmKzWdMdaKGtopCl4aImJMaDerOwKXULjWXbbJeEBPkD_8ALiTF-k36NU-TkYWffzL43b3beP6pltf85eRuNERBmSERoj5IuqYxaSKOqIkkVd3rd9ljKZVJYmZarKi-UiXkMIr7v1Y5LHDwZFuVCNQRtlbY1l_JmcnstJbgkAGyJjUUr17msleW0So3qzpP0xRoMsshXuaUuoefh8Hx4cRkO-xREKysNZ3nkC1ZEGXav-cPj1eQOBGxJnnFWPNXWFEojAi-YRhGNNQUk1-s5vmDZ9V0vgEavNlVRPitOPeoiXaA-LdfaNtpRiKInbIDRn4oWIQdnfcyZHkWHd0SdDqA14YcNrRKbLjkzLpo161KJ5c7GcZkGALJtRsxBpcuymUsQ_EogSJMTpsUObXb_1spBfK5t5g2-T2d8HPEZj8_GG3ht8AFBHMRhHEK7w2Ab7v7I--P15XuDs34Y_KW_" rel="nofollow noreferrer">Attempt This Online!</a> - PCRE2</p>
<p>Unfortunately, without the branch reset group, it cannot be generalized by changing the <code>{2}</code> to anything higher, because the value of <code>\3</code> is not reset from iteration to iteration. The only way I can think of to generalize in that way makes it much longer, at <strong><s>55</s> 53 bytes</strong>:</p>
<pre><code>^(?=(^(\4?x)(?=(x*))|(?=(((?!\3)\4)?x))\1\2\2)*+$){2}
</code></pre>
<p><a href="https://tio.run/##bVJdb9swDHzvr2CNDZGSVHWyPgxTjWAbNmDAug3NY5wCii0nSmXZk@TGbZbfnlGO91GgfqFIno@6E7fiQVxs8/ujKuvKethizlTFhhz@rzRe6RdrVq5li52zullplUGmhXNwI5SBPfQ154XH8FCpHErskLm3yqxB2LVbLCn4ja12Dj61may9qvDPM4DPSksoEiN33ZFELKtyybAfUf6hKQppZX4rRS4trDrY8yL582efFpTyfq4be77bBH5CXLJCDSL/qowklJ4nptGaqoI4Jn82QjsSXQ6Hw4jS/XPoiYEQ/yLBHhn8XwYkuESGFeLuuRslg9QMQvT8cKodfgjvpTVgk/6Eass6DHCUoxurqtJSGHhKCmSUHOaZMAalK1M3HhIIavsamT86L0umDOXQ6@xgbCPcN9l6vGZnMUBviMa7I8cJZBDRS@z7iyVobAcUc7VWnkQX@AiI92Bi7HwxHtfAslpYJzEhehEv6RjM5MUm09Ks/eZ6CjMISHiHYbJExmwj7GLZ9nq6zEyWHN5bKx4dK5TWpB0P2kFnCkBR2aANr5GYmIO5TswEw2iEAm@EzzboUIlslpWnjHSba3DBPyL5aWPYzoqa9COyqn78XtwKs5Y4KR4bSoPSAkiJ402O3oW3faK9yRU6trPKSxIelfKnxNsmvM@/do0e@oJEr12EllB@CN9Z2KrjHZkl5I6kV7OWhmM7pPRXOBAyO0/f0PSKYoemk3SaTulw9Irup4djWKdjfDGN38bxbw" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java</p>
<h1>Perl / Java / PCRE2 <sub><sup>v10.34 or later</sup></sub> / .NET, 40 bytes</h1>
<pre><code>^(?=((?&gt;^(\3?x)|(?=(\3?x))\1\2\2))*$){2}
</code></pre>
<p><a href="https://tio.run/##RU5BasMwEPzKEkSsbWwsuzSHyLIdSK899VYnIg0xCNTElVxwUdWvu7IbyGWZmZ3dme5s9NP48Q3EcHD6ejpqICkPVBS77eu29NBeDSVWMF6UHB2oNjB0nVGXHhbNZcE91FrYTqueRkkU269324cTGSdZnOH5czJVd5UFHTdEIp9@2ZB4NLUucnS1fsv2Iky257dcdaNEFWJeB7RaoVMtUBoNEQwQTIggfiElJkVH7HI5l5u7heIZ/@9KFPfeS/n8spNyPNBKUFqVB9o8VgP@THRG2GRN3uSIDwRd7seRJes1Y@wP" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl<br />
<a href="https://tio.run/##bVLbjtMwEH3frxgiUO1evGl5QXhDBQgkJBbQ9rHtSm7itO46TrCdbdrSby/jNFxW2ryMZ@bkjM/xbMWjGG2zh7MqqtJ62GLOVMn6HP6v1F7pZ2tWrmWDnauqXmmVQqqFc3ArlIEjdDXnhcfwWKoMCuyQmbfKrEHYtZsvKfiNLXcOPjWprLwq8c8rgM9KS8gTI3ftkUQsLTPJsB9R/qHOc2lldidFJi2sWtjTIvnzZ5fmlPJurht6vtsEfkJcskINIvuqjCSUvkhMrTVVOXFM/qyFdiS67vf7EaXHp9ALAyH@WYIjMvi/DEhwjQwrxD1wN0h6C9ML0fPTpXb6IbyX1oBNuhOqLaowwFGObqzKUkth4JDkyCg5zFJhDEpXpqo9JBDUdjUy2zsvC6YM5dDpbGFsI9w32Xi8ZmsxQGeIxrsjxwVkENFJ7PrzJWhsBxRzlVaeRCN8BMR7MDF2vhiPa2BZJayTmBA9j5d0CGb8bJNpadZ@czOBKQQkvMUwXiJjuhF2vmw6PW1mxksO760Ve8dypTVphr2m15oCkJc2aMNrJCbmYG4SM8YwGKDAW@HTDTpUIJtlxSUj7eYaXPCPSH7ZGLazoiLdiLSs9t/zO2HWEifFQ0NpUJoDKXC8ydC78LYH2plcomM7q7wk4VEpPyTe1uF9/rUr9NDnJHrlIrSE8lP4rsJWne/JNCFk@u6eLF5PG/orpO2JLsaLyWJCaf8lPU5O57BB53g0id/E8W8" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://regex101.com/r/v9Bzlc/3" rel="nofollow noreferrer">Try it on regex101</a> / <a href="https://ato.pxeger.com/run?1=XVBLTsMwEBXbnsKyLGUGkrYJ5VO5IRtAqoRYALsGrBAcGpE6keNKlUpvwA3YICHEmeA0TAorFh6_N34zbzyv7828efveeZkkBJiwLGZ8wFmfNVY_KqubKss1eIP-bqLUPKucyutFU1bappCiTK8Greczj05BSfWoO4Fx2rgWlDqfXpwphT4LkVpSY9krTala7YA3udX9-yx_cpaCqspF6bjP-Cgaj8aHR9H4gKPsFbUFUcZDKaq4oO4tXN-cTi9R4pqVBYhq1jpbaUMIg_A2jnlqOJK4Xd7TC6X9oR-E2NXrVVPVDxp4wH2SS6rP66VxXe0koqIZNaA4vJU9xrbO5o8LM4m374T29pCsGWw3tMhcPgdhfTLr1qUzB97K84VBRLbuRixR5_O6m0sy-kooWceZMHJDNpt_awWUH0tXBMdfcAdJDJCc3EG6n6zwuaNbhGmYRmmEuCtwHW1-9W9_1-cwON4_iMJf-gM" rel="nofollow noreferrer">Attempt This Online!</a> - PCRE2<br />
<a href="https://tio.run/##RY/RaoQwFER/ReSCydos0b6UldSFPvcL1AWxd2sgvZGYRVmbb7e6pfRtzjAMM4Od0I09GrOCU5XDT5yb04lwYudkvbBSMVa@Xlj9XM78e8eH4nVW53XO@QH4koc1OT/Fb/Zr0AY/Yl7AXcniah22Xc/ARJoi0DTcPF@gVWDEOBjtYxEX@sqgPXb2Rl4YH@V7IFXQVrIJWwEDUpUm3zycAkgY/ONs5zTly97hju@t73ocWTInByD@a9/5MjntUfR29GGblRX/HAmy21GjCSOgEMIqRS5fpPwB" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET</p>
<p>To make the regex <em>fully</em> general to all four of these engines (ignoring PCRE1, because it's an outdated version of the same engine), we must not use balanced groups, recaptured groups, branch reset groups, or possessive quantifiers.</p>
<p>It is possible shorten the regex, while still supporting this exact set of regex engines, by dropping the pretense of a 2-iteration loop and <a href="https://codegolf.stackexchange.com/a/223048/17216">doing the two stages separately</a>.</p>
</div>
<div id="pu3" class="pu"><h1>ECMAScript / <sub><sup>Perl / Java / Python / Ruby / PCRE / .NET</sup></sub>, 50 bytes</h1>
<p>Here is a solution that does not use conditionals, forward-declared or nested backreferences, lookbehind, balancing groups, or regex recursion. It only uses lookahead and standard backreferences, which are very widely supported. I was inspired to operate under these limitations due to <a href="http://regex.alf.nu/" rel="nofollow noreferrer">Regex Golf</a>, which uses the ECMAScript regex engine.</p>
<p>The way this 50 byte regex works is conceptually rather simple, and completely different than all the other submitted solutions to this puzzle. It was surprising to discover that this kind of mathematical logic was expressible in a regex.</p>
<pre><code>      \2                     \4  \5
^((?=(xx+?)\2+$)((?=\2+$)(?=(x+)(\4+)$)\5){4})*x?$
</code></pre>
<p>(Capture groups are labeled above the regex)</p>
<p>The regex can be generalized to any power simply by replacing the <code>4</code> in <code>{4}</code> with the desired power.</p>
<p><a href="https://tio.run/##TY/BTgIxFEV/BScE3qPOMIPEBbXMygUbFroUTRp4dKql07QFRpBvH4eoibube25yc97lQYa11y6mwekN@V1tP@iz9cLSsfdE6rFxACcxH4/aNyhnUApoGlbiqmB9/Cl@YwcYwmrCsI@rOzxPLzhqyn47Gp8wi/Vz9NoqwCwYvSa4v02niDyInB8rbQjACE9yY7QlQLwRdm8MnpUwWXBGRximQ@R6C2CFygxZFSucT76@dFjKJWjhpA@0sBHUS/6K@AfoP7DzoixmV4yx8vUxWdiDNHrT89IqmvUSZvi29sD1gyCuGcPuMGmSzJMjGUFjtpNxXYFHPIfBwHVKEa4WBXf7GKLvJvxyafN0WuT5Nw" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a> - ECMAScript (SpiderMonkey)<br />
<a href="https://tio.run/##TY7BboMwEER/JUKRvFuCBVF6wXU49ZBLDu2xtIoFDtmKGmo7CRLh2ym0qpTbzL6d3flUF@UKS62PTFPq0clYWPmiq@euhVdvyVTcquth/ADIJHRdmGG@Dpc42z8xj0OEfBPiEvNH7DcDPnTZcjxwV1OhIVlFCaKw@vtMVgOzWpU1Gc2QF5P2eme8tkc1rfZk2rNPW9sU2jnufElmQN4YYL@JVS23fSVr7tqaPLCIoaAjgJEVr7Wp/Am369uN3F7tgWSrrJuvQ/UWvyP@A30PzDbJknTG6E@2uQY7c1E1lQurTKXTRRDW4thYEPQktaAwxOlh0AXc6nYqD4T8S/niBBaxvyvenD2/WvIawGUsNyxlDENC4WQihgHHONokcfwD" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> - ECMAScript (Node.js - faster)<br />
<a href="https://tio.run/##RU5BasMwEPzKEkSsrWwsB@dSWbED6bWn3upUpCUGgZq4kgsuQv26KzuBXpaZ2dmd6c/WbKfPHyBWgDfXj5MBkotIZXXYv@x3AbqrpcRJLqqdQA@6iwx9b/VlgFV7WYkAjZGuN3qgSZak7vvdDfFEpVmRFnj@mk31v8qjjo9EoZh/uZh4so2pNugb81ocZZz8KO65@k6JruSyjogx9LoDSpMxgRGiCRHkL@TE5uiJW6@Xcku3WLwQt65EixCCUk/PB6WmN0prSceR1dhuGMGZ3sAsM6RtyZBgu0VfBnwYazJNPCsLzv8A" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a> - Perl (faster still)<br />
<a href="https://tio.run/##bVLvb9owEP3ev@IWdcIm4Iaq/TI3Qtu0SZPWbWo/ApNM4oBbx8lspwQQfzs7h@xHJfLlfHcv7/ye70m8iPFT/nxUZV1ZD0@YM1WxIYf/K41X@mzNypVssXNRN0utMsi0cA7uhTKwh77mvPAYXiqVQ4kd8uitMisQduVmCwp@bauNg09tJmuvKvzzAuCz0hKK1MhNdyQRy6pcMuxHlH9oikJamT9IkUsLyw72ukj@/NmnBaW8n@tGnm/WgZ8Qly5Rg8i/KiMJpW9S02hNVUEck78aoR2JrobDYUTp/jX0xECIP0uwRwb/lwEJrpBhibhn7uJ0MDeDED0/nGqHH8J7aQ3YtD@h2rIOAxzl6MayqrQUBnZpgYySw2MmjEHpytSNhxSC2r5GHrfOy5IpQzn0OjsYWwv3TbYer9lZDNAbovHuyHECGUT0Evv@bAEa2wHFXK2VJ9EYHwHxHkyCnS/G4xpYVgvrJCZEz5IFHYGZnG0yLc3Kr@@uYQoBCe8wTBbImK2FnS3aXk@XmcmCw3trxdaxQmlN2tGgHXSmABSVDdrwGqlJOJi71EwwxDEKvBc@W6NDJbJZVp4y0m2uwQX/iOSnjWEbK2rSj8iqevu9eBBmJXFSMjKUBqUFkBLHmxy9C2@7o73JFTq2scpLEh6V8l3qbRPe51@7Rg99QaK3LkJLKD@E7yJs1fEnIdOUtG08pfPr@JKG9HQI5ZiS@U1ML@n8lu5vDnTYTi@PYZeOyfj6Nkl@Aw" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a> - Java<br />
<a href="https://tio.run/##NY7LasMwEEX3/opBeDETP5DcZGNH@ENsF0KrNCqKbEYqdSj9djdK6O7OPZzLLLd4mf3LZq/LzBHCLZRsys8w@w5YsxBie0XsNa5r0dPYFDml8xlSXRCO@4JyGg/0s/@l3drn210bVFupqQOrZXaeGRxYn@brEN@tbzNw2tVhcTaiqARlYM/gjEdHx6YFN6hJu0FOGSTZJ5lP/sOg9REToPKZ1ESFovteGmBTB3PitwtyCWIVO/8gCdkWFk4KPQqtuv9v5q9Yf7ONBkNk9ESbrJqDlH8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a> - Python<br />
<a href="https://tio.run/##PY7RS8MwEMbf/SvOUlhutSEt28tqKMUV8WXC9K2dRVnWBUJW0oxVRP/1mmy6hxz5fvd9d2eOH5@jAQ5r0Yqho1qcYFm8FtSI9@3dBS4WT4@r53X5ULyUGUjOMjjtpRKgeCtsfwMgd6CqONlwHtQ6yFxDVYzSON1kIPTWORyhfaekJZN4gn8RqoRu7Z7gfeoylcu72DWyOxjQIDV4SO2hkSRhSKk3XqXznWeRYAimGoH/gMk8kLf@zu5o@/M8f3fitJHagv5f4at/TVOulk0zvhGSczIMUY51GoXo5eXjcYSknkUYYj3Hr9k3Toc8HEcWp3PGfgE" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a> - Ruby<br />
<a href="https://tio.run/##XVBRa8IwEH73V4QQaM62Wos6JJa@bANh7GHbm3WhdtGW1TSkEQrib3cXt6c95Ljv7r7vu5ypzW2dm9oQZklG6JSSCTFWHaVVpi0rxYPpZJxLWZetk1V3Mk2rbMELEMXbtA8iEuA7YFEelR/QTmnXcymfNy9PUkJEZoCSKCxGjW5krxynprJqsi@rb2cxyLY5NY5GhM7T1Xy1fEhXCwpidOgsZ02WCNZmB1Tv@fvH4@YVBFxIc@Cs3fbOtkpjBvFsl2W00BRwuD/vsYPlKIniGXi@GkzbfSlOYxrhuEB@1Z2189x1iqQtCmBMdmJEyN1Z/2Gm19m9j1kYAloTfr/QqXRVzZmN0MyfS5WOB0MQMQ0A5OJXbEBVdef3EgS/MhPEY8K0uKLN9d9ZOYjbJ@d5xochzKFIQwYe/ia@HAIv5iEwKBZwmV9hPOTsdkvi5TJJfgA" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> - PCRE (fastest)<br />
<a href="https://tio.run/##RY/RioMwEEV/RWTATLMpVtqXSrDQ536BuiDutAayicQUpZJvd3XLsm9zDpfLnd6O5IaOtF7AydLRg6b6fDY0skuyfDJWSDZNvMAq44Abvo9Nc2TVkSNgdcL5GHA3FbAkl4/4ar97pekrxhxeMs3v1lHTdgx0pEwEyvRPjzM0ErQYeq18LOJc3Rk0@9Y@jRfaR9kW4BKaMq3DWsDAyFIZX/@aHIzQ9MeHjTnHeetw@1vj244GlkzJDgy@9Qvn0SlPorODD@usQ/7PkTB2fVkrQxGYEMKSiuyUpj8" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a> - .NET</p>
<p>It works by repeatedly dividing away the smallest fourth power of a prime that the current value is divisible by. As such the quotient at each step is always a fourth power, iff the original value was a fourth power. A final quotient of 1 indicates that the original value was indeed a fourth power; this completes the match. Zero is also matched.</p>
<p>First it uses a lazy capture group <code>\2</code> to capture the number's smallest factor larger than 1. As such, this factor is guaranteed to be prime. For example, with 1296 (6^4) it will initially capture <code>\2</code> = 2.</p>
<p>Then, at the beginning of a loop that is repeated 4 times, it tests to see if the current number is divisible by <code>\2</code>, with <code>(?=\2+$)</code>. The first time through this loop, this test is useless, but its purpose will become apparent later.</p>
<p>Next inside this inner loop, it uses the greedy capture group <code>\4</code> to capture the number's largest factor smaller than itself: <code>(?=(x+)(\4+)$)</code>. In effect this divides the number by its smallest prime factor, <code>\2</code>; for example, 1296 will initially be captured as <code>\4</code> = 1296/2 = 648. Note that the division of the current number by <code>\2</code> is implicit. While it is possible to explicitly divide the current number by a number contained in a capture group (which I only discovered four days after posting this answer), doing this would make for a slower and harder-to-understand regex, and it is not necessary, since a number's smallest factor larger than 1 will always match up with its largest factor smaller than itself (such that their product is equal to the number itself).</p>
<p>Since this kind of regex can only &quot;eat away&quot; from the string (making it smaller) by leaving a result at the end of the string, we need to &quot;move&quot; the result of the division to the end of the string. This is done by capturing the result of subtraction (the current number minus <code>\4</code>), into the capture group <code>\5</code>, and then, outside the lookahead, matching a portion of the beginning of the current number corresponding to <code>\5</code>. This leaves the remaining unprocessed string at the end matching <code>\4</code> in length.</p>
<p>Now it loops back to the beginning of the inner loop, where it becomes apparent why there is a test for divisibility by the prime factor. We have just divided by the number's smallest prime factor; if the number is still divisible by that factor, it means the original number might be divisible by the fourth power of that factor. The first time this test is done it is useless, but the next 3 times, it determines if the result of implicitly dividing by <code>\2</code> is still divisible by <code>\2</code>. If it is still divisible by <code>\2</code> at the beginning of each iteration of the loop, then this proves that each iteration divided the number by <code>\2</code>.</p>
<p>In our example, with an input of 1296, this will loop through as follows:</p>
<p><code>\2</code> = 2<br>
<code>\4</code> = 1296/2 = 648<br>
<code>\4</code> = 648/2 = 324<br>
<code>\4</code> = 324/2 = 162<br>
<code>\4</code> = 162/2 = 81<br></p>
<p>Now the regex can loop back to the first step; this is what the final <code>*</code> does. In this example, 81 will become the new number; the next loop will go as follows:</p>
<p><code>\2</code> = 3<br>
<code>\4</code> = 81/3 = 27<br>
<code>\4</code> = 27/3 = 9<br>
<code>\4</code> = 9/3 = 3<br>
<code>\4</code> = 3/3 = 1</p>
<p>It will now loop back to the first step again, with 1 as the new number.</p>
<p>The number 1 cannot be divided by any prime, which would make it a non-match by <code>(?=(xx+?)\2+$)</code>, so it exits the top-level loop (the one with <code>*</code> at the end). It now reaches the <code>x?$</code>. This can only match zero or one. The current number at this point will be 0 or 1 if and only if the original number was a perfect fourth power; if it is 0 at this point, it means that the top-level loop never matched anything, and if it is 1, it means the top-level loop divided a perfect fourth power down until it wasn't divisible by anything anymore (or it was 1 in the first place, meaning the top-level loop never matched anything).</p>
<p>It's also possible to solve this in 49 bytes by doing repeated explicit division (which is also generalized for all powers – replace the desired power minus one into the <code>{3}</code>), but this method is far, far slower, and an explanation of the algorithm it uses is beyond the scope of this Answer:</p>
<pre><code>^((x+)((\2(x+))(?=(\4*)\2*$)\4*(?=\5$\6)){3})?x?$
</code></pre>
<p><a href="https://tio.run/##TZDBboJAEIbvPgUlRmegIKClqXTl1IMXD@1RbLLRFbZdFrK7Kq167QP0EfsiFpKa9DIzf77DzDdvdE/1WvHaeLrmG6bKSr6zj4sikh2sZ5Y/NTXAJ5mNnMsrQOMiQBZ1HSElkE0czCKnj@3Q5uyun8WIx/EZU2jSPl6c0Sf6pnoxissc0NeCrxnEt94EMdEkSA4FFwxAEMXoRnDJAPGGyJ0QeMyJ8HUtuIGhN8SEbwEkyX3BZG4KnEWnE9cLugBOaqo0m0sD@TJYIV4B@w/kLEzDaYfRFKo62HO5p4JvLEVlzqaW7YpkWylI@CNhCXddbBeWxG5sX7GaUQMc/ZKadQGqddSDQd1KGeg8wqTeGW0UcHdo/Xx9W0MXoFxGq7QrfxdPA3TL5f01tg84ny@BF8VBL44CLx4HvTB6iHvRJAh/AQ" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>Perl / Java / PCRE / .NET, 39 bytes</h1>
<h2>Another Solution</h2>
<p>This is, in my opinion, one of the most interesting problems on the site. I need to thank <a href="https://codegolf.stackexchange.com/a/21951">deadcode</a> for bumping it back up to the top.</p>

<pre class="lang-regex prettyprint-override"><code>^((^|xx)(^|\3\4\4)(^|\4x{12})(^x|\1))*$
</code></pre>
<p><strong>39 bytes</strong>, without any conditionals or assertions... sort of. The alternations, as they're being used (<code>^|</code>), are a type of conditional in a way, to select between &quot;first iteration,&quot; and &quot;not first iteration.&quot;</p>
<p>This regex can be seen to work here: <a href="http://regex101.com/r/qA5pK3/1" rel="noreferrer">http://regex101.com/r/qA5pK3/1</a></p>
<p>PCRE interprets the regex correctly, and it has also been tested in Perl up to <em>n = 128</em>, including <em>n<sup>4</sup>-1</em>, and <em>n<sup>4</sup>+1</em>.</p>
<hr />
<p><strong>Definitions</strong></p>
<p>The general technique is the same as in the other solutions already posted: define a self-referencing expression which on each subsequent iteration matches a length equal to the next term of the forward difference function, <em>D<sub>f</sub></em>, with an unlimited quantifier (<code>*</code>). A formal definition of the forward difference function:</p>
<p><span class="math-container">\$D_f(n)=f(n+1)-f(n)\$</span></p>
<p>Additionally, higher order difference functions may also be defined:</p>
<p><span class="math-container">\$D_f^2(n)=D_f(n+1)-D_f(n)\$</span></p>
<p>Or, more generally:</p>
<p><span class="math-container">\$D_f^k(n)=D_f^{k-1}(n+1)-D_f^{k-1}(n)=\sum\limits_{i=0}^k{(-1)^i}{k\choose i}f(n+k-i)\$</span></p>
<p>The forward difference function has a lot of interesting properties; it is to sequences what the derivative is to continuous functions. For example, <em>D<sub>f</sub></em> of an <em>n</em>th order polynomial will always be an <em>n-1</em>th order polynomial, and for any <em>i</em>, if <em>D<sub>f</sub><sup>i</sup></em> = <em>D<sub>f</sub><sup>i+1</sup></em>, then the function <em>f</em> is exponential, in much the same way that the derivative of <em>e<sup>x</sup></em> is equal to itself. The simplest discrete function for which <em>f</em> = <em>D<sub>f</sub></em> is <em>2<sup>n</sup></em>.</p>
<hr />
<p><strong><em>f(n) = n<sup>2</sup></em></strong></p>
<p>Before we examine the above solution, let's start with something a bit easier: a regex which matches strings whose lengths are a perfect square. Examining the forward difference function:</p>
<p><span class="math-container">\$D_f=[1,3,5,7,9,\dots]=2n+1\$</span></p>
<p>Meaning, the first iteration should match a string of length <em>1</em>, the second a string of length <em>3</em>, the third a string of length <em>5</em>, etc., and in general, each iteration should match a string two longer than the previous. The corresponding regex follows almost directly from this statement:</p>
<pre class="lang-regex prettyprint-override"><code>^(^x|\1xx)*$
</code></pre>
<p>It can be seen that the first iteration will match only one <code>x</code>, and each subsequent iteration will match a string two longer than the previous, exactly as specified. This also implies an amazingly short perfect square test in perl:</p>
<pre class="lang-regex prettyprint-override"><code>(1x$_)=~/^(^1|11\1)*$/
</code></pre>
<p>This regex can be further generalized to match any <em>n</em>-gonal length:</p>
<p>Triangular numbers:<br />
<code>^(^x|\1x{1})*$</code></p>
<p>Square numbers:<br />
<code>^(^x|\1x{2})*$</code></p>
<p>Pentagonal numbers:<br />
<code>^(^x|\1x{3})*$</code></p>
<p>Hexagonal numbers:<br />
<code>^(^x|\1x{4})*$</code></p>
<p>etc.</p>
<hr />
<p><strong><em>f(n) = n<sup>3</sup></em></strong></p>
<p>Moving on to <em>n<sup>3</sup></em>, once again examining the forward difference function:</p>
<p><span class="math-container">\$D_f=[1,7,19,37,61,\dots]=3n^2+3n+1\$</span></p>
<p>It might not be immediately apparent how to implement this, so we examine the second difference function as well:</p>
<p><span class="math-container">\$D_f^2=[6,12,18,24,30,\dots]=6n+6\$</span></p>
<p>So, the forwards difference function does not increase by a constant, but rather a linear value. It's nice that the initial ('<em>-1</em>th') value of <em>D<sub>f</sub><sup>2</sup></em> is zero, which saves an initialization on the second iteration. The resulting regex is the following:</p>
<pre class="lang-regex prettyprint-override"><code>^((^|\2x{6})(^x|\1))*$
</code></pre>
<p>The first iteration will match <em>1</em>, as before, the second will match a string <em>6</em> longer (<em>7</em>), the third will match a string <em>12</em> longer (<em>19</em>), etc.</p>
<hr />
<p><strong><em>f(n) = n<sup>4</sup></em></strong></p>
<p>The forward difference function for <em>n<sup>4</sup></em>:</p>
<p><span class="math-container">\$D_f=[1,15,65,175,369,\dots]=4n^3-6n^2+4n-1\$</span></p>
<p>The second forward difference function:</p>
<p><span class="math-container">\$D_f^2=[14,50,110,194,302,\dots]=12n^2-24n+14\$</span></p>
<p>The third forward difference function:</p>
<p><span class="math-container">\$D_f^3=[36,60,84,108,132,\dots]=24n+36\$</span></p>
<p>Now that's ugly. The initial values for <em>D<sub>f</sub><sup>2</sup></em> and <em>D<sub>f</sub><sup>3</sup></em> are both non-zero, <em>2</em> and <em>12</em> respectively, which will need to be accounted for. You've probably figured out by now that the regex will follow this pattern:</p>
<pre class="lang-regex prettyprint-override"><code>^((^|\2\3{b})(^|\3x{a})(^x|\1))*$
</code></pre>
<p>Because the <em>D<sub>f</sub><sup>3</sup></em> must match a length of <em>12</em> on the second iteration, <em>a</em> is necessarily <em>12</em>. But because it increases by <em>24</em> each term, the next deeper nesting must use its previous value twice, implying <em>b = 2</em>. The final thing to do is initialize the <em>D<sub>f</sub><sup>2</sup></em>. Because <em>D<sub>f</sub><sup>2</sup></em> influences <em>D<sub>f</sub></em> directly, which is ultimately what we want to match, its value can be initialized by inserting the appropriate atom directly into the regex, in this case <code>(^|xx)</code>. The final regex then becomes:</p>
<pre class="lang-regex prettyprint-override"><code>^((^|xx)(^|\3\4{2})(^|\4x{12})(^x|\1))*$
</code></pre>
<hr />
<p><strong>Higher Orders</strong></p>
<p>A fifth order polynomial can be matched in with the following regex:<br />
<code>^((^|\2\3{c})(^|\3\4{b})(^|\4x{a})(^x|\1))*$</code></p>
<p><em>f(n) = n<sup>5</sup></em> is a fairly easy excercise, as the initial values for both the second and fourth forward difference functions are zero:</p>
<pre class="lang-regex prettyprint-override"><code>^((^|\2\3)(^|\3\4{4})(^|\4x{30})(^x|\1))*$
</code></pre>
<p>For six order polynomials:<br />
<code>^((^|\2\3{d})(^|\3\4{c})(^|\4\5{b})(^|\5x{a})(^x|\1))*$</code></p>
<p>For seventh order polynomials:<br />
<code>^((^|\2\3{e})(^|\3\4{d})(^|\4\5{c})(^|\5\6{b})(^|\6x{a})(^x|\1))*$</code></p>
<p>etc.</p>
<p>Note that not all polynomials can be matched in exactly this way, if any of the necessary coefficients are non-integer. For example, <em>n<sup>6</sup></em> requires that <em>a = 60</em>, <em>b = 8</em>, and <em>c = 3/2</em>. This can be worked around, in this instance:</p>
<pre class="lang-regex prettyprint-override"><code>^((^|xx)(^|\3\6\7{2})(^|\4\5)(^|\5\6{2})(^|\6\7{6})(^|\7x{60})(^x|\1))*$
</code></pre>
<p>Here I've changed <em>b</em> to <em>6</em>, and <em>c</em> to <em>2</em>, which have the same product as the above stated values. It's important that the product doesn't change, as <em>a·b·c·…</em> controls the constant difference function, which for a sixth order polynomial is <em>D<sub>f</sub><sup>6</sup></em>. There are two initialization atoms present: one to initialize <em>D<sub>f</sub></em> to <em>2</em>, as with <em>n<sup>4</sup></em>, and the other to initialize the fifth difference function to <em>360</em>, while at the same time adding in the missing two from <em>b</em>.</p>
</div>
<div id="pu5" class="pu"><h1>Perl / PCRE / .NET, 66 bytes</h1>
<p><a href="http://regex101.com/r/vH3nD8" rel="nofollow noreferrer">This (ir)regular expression</a> seems to work.</p>
<pre><code>^((?(1)((?(2)\2((?(3)\3((?(4)\4x{24}|x{60}))|x{50}))|x{15}))|x))*$
</code></pre>
<p>This regex is compatible with PCRE, Perl, .NET flavors.</p>
<p>This basically follows a &quot;difference tree&quot; (not sure if there's a proper name for it), which tells the regex how many more x's to match for the next fourth power:</p>
<pre><code>1     16    81    256   625   1296  2401 ...
   15    65    175   369   671   1105 ...
      50    110   194   302   434 ...
         60    84    108   132 ...
            24    24    24 ...  # the differences level out to 24 on the 4th iteration
</code></pre>
<p><code>\2</code>, <code>\3</code>, <code>\4</code> stores and updates the difference as shown on the 2nd, 3rd and 4th rows, respectively.</p>
<p>This construct can easily be extended for higher powers.</p>
<p>Certainly not an elegant solution, but it does work.</p>
</div>
<div id="pu6" class="pu"><h1>Perl / Java / PCRE / .NET, 53 bytes</h1>
<h2>Solution</h2>
<pre><code>^((?=(^|(?&lt;=^x)x|xx\2))(?=(^|\2\3))(^x|\4\3{12}xx))*$
</code></pre>
<p>This regex is compatible with Java, Perl, PCRE and .NET flavors. This regex uses quite a range of features: look-ahead, look-behind and forward-declared back-reference. Forward-declared back-reference kinds of limits the compatibility of this regex to a few engines.</p>
<h2>Explanation</h2>
<p>This solution makes use of the following derivation.</p>
<p>By fully expanding the summation, we can prove the following equality:</p>
<p><img src="https://i.sstatic.net/SK5OM.gif" alt="\sum\limits_{i=1}^n (i+1)^4 - \sum\limits_{i=1}^n i^4 = (n+1)^4 - 1" /><br />
<img src="https://i.sstatic.net/3c4dY.gif" alt="\sum\limits_{i=1}^n i^4 - \sum\limits_{i=1}^n (i-1)^4 = n^4" /></p>
<p>Let us combine the summation on the left-hand-side:</p>
<p><img src="https://i.sstatic.net/pKD07.gif" alt="\sum\limits_{i=1}^n (4(i+1)^3 - 6(i+1)^2 + 4(i+1) - 1) = (n+1)^4 - 1" /><br />
<img src="https://i.sstatic.net/HEYQb.gif" alt="\sum\limits_{i=1}^n (4i^3 - 6i^2 + 4i - 1) = n^4" /></p>
<p>Subtract the 2 equations (top equation minus bottom equation) and then combine the summations on the left-hand-side, then simplify it:</p>
<p><img src="https://i.sstatic.net/7pwDX.gif" alt="\sum\limits_{i=1}^n (12i^2 + 2) = (n+1)^4 - n^4 - 1" /></p>
<p>We obtain the difference between consecutive fourth powers as power sum:</p>
<p><img src="https://i.sstatic.net/YXU4U.gif" alt="(n+1)^4 - n^4 = \sum\limits_{i=1}^n (12i^2 + 2) + 1" /></p>
<p>This means that the <strong>difference</strong> between consecutive fourth powers will <strong>increase</strong> by (12n<sup>2</sup> + 2).</p>
<p>To make it easier to think, referring to the <a href="https://codegolf.stackexchange.com/a/19413/6638">difference tree in Volatility's answer</a>:</p>
<ul>
<li>The right-hand-side of the final equation is the 2nd row in the difference tree.</li>
<li>The increment (12n<sup>2</sup> + 2) is the 3rd row in the difference tree.</li>
</ul>
<hr />
<p>Enough mathematics. Back to the solution above:</p>
<ul>
<li><p>The <code>\2</code> capturing group maintains a series of odd number to calculate i<sup>2</sup> as seen in the equation.</p>
<p>Precisely speaking, the length of the <code>\2</code> capturing group will be 0 (unused), 1, 3, 5, 7, ... as the loop iterates.</p>
<p><code>(?&lt;=^x)x</code> sets the initial value for the odd number series. The <code>^</code> is just there to allow the look-ahead to be satisfied in the first iteration.</p>
<p><code>xx\2</code> adds 2 and advance to the next odd number.</p>
</li>
<li><p>The <code>\3</code> capturing group maintains the square number series for i<sup>2</sup>.</p>
<p>Precisely speaking, the length of the <code>\3</code> capturing group will be 0, 1, 4, 9, ... as the loop iterates.</p>
<p><code>^</code> in <code>(^|\2\3)</code> sets the initial value for the square number series. And <code>\2\3</code> adds the odd number to the current square number to advance it to the next square number.</p>
</li>
<li><p>The <code>\4</code> capturing group (outside any look-ahead and actually consume text) matches the whole right-hand-side of the equation we derived above.</p>
<p><code>^x</code> in <code>(^x|\4\3{12}xx)</code> sets the initial value, which is <code>+ 1</code> the right-hand-side of the equation.</p>
<p><code>\4\3{12}xx</code> adds the increase in difference (12n<sup>2</sup> + 2) using n<sup>2</sup> from capturing group <code>\3</code>, and match the difference at the same time.</p>
</li>
</ul>
<p>This arrangement is possible due to the amount of text matched in each iteration is more than or equal to the amount of text needed to execute the look-ahead to construct n<sup>2</sup>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/19262/">19262</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




