<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::958</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>094</td><td>Java 8</td><td>171110T151020Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/147700#147700">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>013</td><td>05AB1E</td><td>180809T134633Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/170349#170349">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>081</td><td>Python</td><td>240429T160002Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/272883#272883">movatica</a></td></tr>
<tr d-ix="3"><td>053</td><td>Perl 5</td><td>240429T151218Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/272882#272882">Xcali</a></td></tr>
<tr d-ix="4"><td>012</td><td>Vyxal</td><td>240429T020802Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/272872#272872">emanresu</a></td></tr>
<tr d-ix="5"><td>058</td><td>MATLAB</td><td>180808T171526Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/170259#170259">aaaaa sa</a></td></tr>
<tr d-ix="6"><td>052</td><td>R</td><td>131217T172304Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/15991#15991">Sven Hoh</a></td></tr>
<tr d-ix="7"><td>067</td><td>R</td><td>180808T124545Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/170211#170211">JayCe</a></td></tr>
<tr d-ix="8"><td>071</td><td>><></td><td>151005T133645Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/59734#59734">Aaron</a></td></tr>
<tr d-ix="9"><td>016</td><td>GS2</td><td>151005T061816Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/59696#59696">recursiv</a></td></tr>
<tr d-ix="10"><td>034</td><td>TIBASIC</td><td>150704T184402Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/52623#52623">lirtosia</a></td></tr>
<tr d-ix="11"><td>026</td><td>GolfScript</td><td>131217T152443Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/15988#15988">Howard</a></td></tr>
<tr d-ix="12"><td>028</td><td>GolfScript</td><td>110220T000709Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/1075#1075">Joey</a></td></tr>
<tr d-ix="13"><td>071</td><td>QBasic</td><td>110219T020053Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/1049#1049">PleaseSt</a></td></tr>
<tr d-ix="14"><td>030</td><td>J</td><td>110215T233507Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/960#960">J B</a></td></tr>
<tr d-ix="15"><td>044</td><td>Ruby</td><td>110218T231246Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/1033#1033">steensla</a></td></tr>
<tr d-ix="16"><td>nan</td><td></td><td>110218T123906Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/1023#1023">Lars Hau</a></td></tr>
<tr d-ix="17"><td>nan</td><td></td><td>110215T234554Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/962#962">Eelvex</a></td></tr>
<tr d-ix="18"><td>045</td><td>Windows PowerShell</td><td>110218T105723Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/1021#1021">Joey</a></td></tr>
<tr d-ix="19"><td>087</td><td>Bash</td><td>110216T102622Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/971#971">Peter Ta</a></td></tr>
<tr d-ix="20"><td>096</td><td>Bash with only one loop</td><td>110216T120743Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/973#973">Peter Ta</a></td></tr>
<tr d-ix="21"><td>nan</td><td></td><td>110216T014317Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/963#963">Aman Zee</a></td></tr>
<tr d-ix="22"><td>071</td><td>JavaScript</td><td>110215T231226Z</td><td><a href="https://codegolf.stackexchange.com/questions/958/random-dice-tipping/959#959">PleaseSt</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Java 8, <s>130</s> <s>95</s> 94 bytes</h1>

<pre class="lang-java prettyprint-override"><code>v-&gt;{long d=9,p,r=0;for(;r&lt;1e9;r=r*10+d--)for(p=d;p==d++|p+d==7;d*=Math.random())d=6;return r;}
</code></pre>
<p>-1 byte thanks to <em>@emanresuA</em>.</p>
<p><a href="https://tio.run/##LZBPb8IwDMXvfIp3bCktfySGUMhuO8IFaZdph6wJEJYmVeJUm1g/e5cCki3Llu3f07uKTpRX@T3URoSAvdD2NgG0JeVPolY4jC1gnD2jzt6dluhylmZ9yhSBBOkaB1hwDF35eruvSr6dtTPPF@zkfMb8bqm2zHM/XS4KWZb5OG25ZC3nsij@2kJyvmFyyveCLpUXVromy3PJX5hXFL2FZ/3AHsw2fpnEfKK7UVOThGdH8tqePz4h8ofq@RxvP6qOpEAXhVO0NWlnsVqDdKMCyOGsCME1CkE0rVHwKkRD4X4/qkxWQPMlg97x1TqVonh@B46/gVRTuUhVm9BkbGarOrPRmPxu0sOmftIP/w" rel="nofollow noreferrer">Try it online.</a></p>
<p>As full program with verbose main-method and printing the dice-rolls directly would be <strong><s>178</s> 132 bytes</strong> instead (for explanation, <a href="https://codegolf.stackexchange.com/revisions/147700/4">see edit history of 95 bytes version</a>):</p>
<pre class="lang-java prettyprint-override"><code>interface M{static void main(String[]a){for(int d=9,p,i=10;i--&gt;0;System.out.print(d--))for(p=d;p==d++|p+d==7;d*=Math.random())d=6;}}
</code></pre>
<p><a href="https://tio.run/##FcqxDoIwEADQX@nYCiW4aExz/gETo3G4cKCHoW3KSWKQb6/45jfignakV87spU8Ddr1q1llQuFNLYFITstetJPaP2x3NOoSk96sILmUsGY61Y2uvtWs/s/RTFd5SxX2LJmuN@fcI5CIAFcU3FgRwdnSABuVZJfQUJm0MwcltW84/" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>v-&gt;{               // Method with empty unused parameter and long return-type
  long d=9,        //  Random dice integer, starting at 9
                   //  (initially, any value outside range [0,6] for `d` is fine)
      p,           //  Previous dice-roll, starting uninitialized
      r=0;         //  Result-long, starting at 0
  for(;r&lt;1e9       //  Loop as long as the result is not 10 digits yet:
      ;            //    After every iteration:
       r=          //     Update the result to:
         r*10+d    //      Multiply by 10 and add the dice-roll
                   //      (aka, append the dice-roll to the result-long)
               --) //     And decrease `d` by 1 afterwards with `d--`
    for(p=d;       //   Set `p` to the current `d`
        p==d       //   Inner loop as long as `p` is still equal to `d`
            ++     //   And increase `d` by 1 afterwards with `d++`
        |          //   Or
         p+d==7    //   As long as `p` and `d` combined equals 7
                   //   (aka `p` and `d` are at opposite sides of the dice)
      d*=Math.random())d=6;}
                   //    Do a random 'dice roll' in the range [0,6)
                   //    (which is why we've did `d++` in the loop-condition)
  return r;}       //  After the loops, return the result-long
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>23</s> 13 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>TF6LsD7α‚KΩD?
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/xM3Mp9jF/NzGRw2zvM@tdLH//x8A" rel="nofollow noreferrer">Try it online.</a></p>
<p>If outputting newline-delimited instead of concatenated is allowed, it could be 1 byte less by replacing the <code>D?</code> with <code>=</code>:<br />
<a href="https://tio.run/##yy9OTMpM/f8/xM3Mp9jF/NzGRw2zvM@ttP3/HwA" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>TF             # Loop 10 times:
  6L           #  Push list [1,2,3,4,5,6]
    s          #  Swap the top two values on the stack (in the first iteration,
               #  it'll push an additional copy of the list)
     D         #  Duplicate this value/list
      7α       #  Get the absolute difference with 7
        ‚      #  Pair the two together
         K     #  Remove those two values from the list
               #  (pop + no-op for the pair of lists in the first iteration)
          Ω    #  Pop and push a random item from this list
           D?  #  Duplicate, pop and output it without newline
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>87</s> 81 bytes</h1>
<p><em>-6 bytes by <a href="/users/100664/emanresu-a">emanresu A</a></em></p>
<pre class="lang-python prettyprint-override"><code>from random import*
p=0
for _ in'x'*10:print(p:=choice([*{1,2,3,4,5,6}-{p,7-p}]))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3A9OK8nMVihLzUoBUZm5BflGJFleBrQFXWn6RQrxCZp56hbqWoYFVQVFmXolGgZVtckZ-ZnKqRrRWtaGOkY6xjomOqY5ZrW51gY65bkFtrKYmxGCo-TB7AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 53 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>say map$b=(grep$_+$b-7&amp;&amp;$_-$b,1..6)[rand!$b*2+4],0..9
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/784sVIhN7FAJclWI70otUAlXlslSddcTU0lXlclScdQT89MM7ooMS9FUSVJy0jbJFbHQE/P8v//f/kFJZn5ecX/dX1N9QwMDQA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 12 bytes</h1>
<pre><code>₀(:7ε&quot;6ɾ$F℅…
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLigoAoOjfOtVwiNsm+JEbihIXigKYiLCIiLCIiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>₀(           # Ten times
           … # Print
          ℅  # A random item of
      6ɾ     # [1...6]
        $F   # Without
  :7ε&quot;       # [prev,7-prev] (stack is padded with zeros)
</code></pre>
</div>
<div id="pu5" class="pu"><h2>MATLAB 58 bytes</h2>

<pre><code>a=randi(6)
for i=1:9;b=1:6;b([a,7-a])=[];a=b(randi(4))
end
</code></pre>
</div>
<div id="pu6" class="pu"><h2>R, <strike>56</strike> 52</h2>
<pre><code>for(i in 0:9)cat(F&lt;-sample(setdiff(1:6,c(F,7-F)),1))
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 67 bytes</h1>



<pre class="lang-r prettyprint-override"><code>c(3,5,1,4,2,6)[(sample(1:6,1)+cumsum(sample((-2:2)[-3],9,T)))%%6+1]
</code></pre>

<p><a href="https://tio.run/##K/r/P1nDWMdUx1DHRMdIx0wzWqM4MbcgJ1XD0MpMx1BTO7k0t7g0FyaooWtkZaQZrWscq2OpE6KpqamqaqZtGPv/PwA" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>There is <a href="https://codegolf.stackexchange.com/a/15991/80010">a golfier R answer</a> but this I think is a different approach from the answers submitted so far.</p>

<pre class="lang-r prettyprint-override"><code>c(3,5,1,4,2,6)                                                     #A dice and its facets
               (sample(1:6,1)                                      #Initial dice roll
                             +cumsum(sample((-2:2)[-3],9,T)))      #9 tippings in c(-2,-1,1,2)
                                                             %%6+1 #converts to values in [0,6]
              [                                                   ]#
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow">>&lt;></a>, 71 bytes</h1>

<p>I'm glad I could showcase >&lt;>'s <code>x</code> code-pointer randomization as I don't recall seeing it here. </p>

<pre><code>a&amp;0 v
 /2v
1x3v 
&gt;x&lt; &lt;&lt;
6x4v
 \5v ~
:{:/ ^?=}
:{:/ ^?=7+}
:~$&lt;^&amp;;!?:-1&amp;n
</code></pre>

<p>You can try it on <a href="http://fishlanguage.com/playground" rel="nofollow">this online interpreter</a> (paste code, submit, start).</p>
</div>
<div id="pu9" class="pu"><h2>GS2, 16 bytes</h2>

<pre><code>16 2f 25 08 41 20 17 30 16 2f 31 31 25 09 19 32
</code></pre>

<p>Here's how it works</p>

<pre><code>16 2f 25     # make range from 1 to 6 and push random element
08           # start block
    41       # duplicate top of stack twice
    20 17 30 # negate top of stack and add 7
    16 2f    # push range from 1 to 6
    31 31    # do set-wise difference with each of the two previous numbers
    25       # push a random element from the list
09           # end block
19 32        # repeat block 9 times
</code></pre>
</div>
<div id="pu10" class="pu"><h1>TI-BASIC, <s>38</s> 34</h1>

<pre><code>For(I,1,9
Ans→X
Repeat Ans≠X and Ans≠7-X
randInt(1,6
End
Disp Ans
End
</code></pre>

<p>Boring solution, but it's shorter than the previous revision. I take advantage of the fact that on a fresh calculator, <code>Ans</code> is initialized to zero.</p>
</div>
<div id="pu11" class="pu"><h3>GolfScript, 26 chars</h3>
<pre><code>0{(.6,5@--\-.,rand=).}10*;
</code></pre>
<p>A slight more compressed version of <a href="https://codegolf.stackexchange.com/users/15/joey">Joey</a>'s, basically working around the issue with zero-indexing.</p>
</div>
<div id="pu12" class="pu"><h2>GolfScript, 28</h2>
<pre><code>0:|;{7,[0|7|-]-.,rand=:|}10*
</code></pre>
</div>
<div id="pu13" class="pu"><h2>QBasic (71 characters)</h2>

<p>The two newlines are necessary and included in the character count as one character each.</p>

<pre><code>RANDOMIZE:FOR I=0TO 9
1N=INT(RND*6)+1:IF L=N OR L+N=7THEN 1
?N:L=N:NEXT
</code></pre>
</div>
<div id="pu14" class="pu"><h2>J, 30 characters</h2>

<pre><code>&gt;:(?@4:{(i.6)-.],5&amp;-)^:(&lt;10)?6
</code></pre>

<p><code>6 2 3 5 4 2 4 1 3 6</code></p>

<p>Explanations (read from right to left):</p>

<ul>
<li><code>?6</code> returns a random number between 0 and 5</li>
<li><code>^:(&lt;10)</code> applies a function 9 times, accumulating the results along the way.  The function is:</li>
<li><code>?@4:{(i.6)-.],5&amp;-</code>
<ul>
<li><code>] , 5&amp;-</code> returns an array of the input number and its complement to 5 (we're handling 0-based numbers currently, so the sum of opposite faces is 5)</li>
<li><code>(i. 6) -.</code> removes them from the full set of integers 0 to 5.  We're left with all valid positions after a single tipping operation from the input position.</li>
<li><code>?@4: {</code> picks one of those at random.</li>
</ul></li>
<li><code>&gt;:</code> increments the whole sequence to bring the figures back to the 1 to 6 interval.</li>
</ul>
</div>
<div id="pu15" class="pu"><h2>Ruby, 44</h2>

<pre><code>c=0;10.times{$&gt;&lt;&lt;c=([*1..6]-[c,7-c]).sample}
</code></pre>

<p>I found the [*1..6] trick by lucky experimenting. </p>
</div>
<div id="pu16" class="pu"><h2>Ruby</h2>

<h3>66 characters</h3>

<pre><code>(0..9).reduce([]){|m|m&lt;&lt;((1..6).to_a-[d=m[-1]||0,7-d]).shuffle[0]}
</code></pre>
</div>
<div id="pu17" class="pu"><h2>J</h2>

<p>This should work but unfortunately J's random generator gets stuck after the 3rd iteration:</p>

<pre><code>a=:&gt;:i.6
f=:a#~1-(+&amp;(a=])7&amp;-)
((,(?4)&amp;{@f@(_1&amp;{))^:9)&gt;:?6
</code></pre>

<p><code>6 4 5 4 5 4 5 4 5 4</code></p>
</div>
<div id="pu18" class="pu"><h2>Windows PowerShell, 45</h2>
<pre><code>-join(0..9|%{($d=1..6-ne(7-$d)-ne$d|random)})
</code></pre>
<p>Pretty trivial, actually. I generate a list of possible dice rolls <code>1..6</code> and then select only those not equal to seven minus the last roll and then only those not equal to the last roll. From the remaining list I then select a random item and assign it to <code>$d</code>. Since <code>$d</code> is initially treated as <code>0</code> it rolls a normal die the first time.</p>
<p>Test script:</p>
<pre><code>for($i=0;$i-lt20;$i++){
    $o=@(./tipping.ps1)
    if ($i-gt0-and$o-eq$o2) { throw &quot;Must have random output&quot; }
    if ($o.count-ne1) { throw &quot;Must only have one line of output&quot; }
    if ($o[0]-match'[^1-6]'){ throw &quot;Invalid characters&quot; }
    if($o[0].length-ne10){ throw &quot;Wrong length: $($o[0].length)&quot; }
    $r=[char[]]($o[0])|%{$_-48}
    for ($x=1;$x-lt$r.count;$x++){
        if ($r[$x-1]+$r[$x]-eq7) { throw &quot;Not a tipping: $($r[$x-1]) and $($r[$x])&quot; }
    }
    $o2=$o
}
</code></pre>
<p>History:</p>
<ul>
<li>2011-02-18 11:57 (61) First attempt.</li>
<li>2011-02-18 11:58 (45) I don't need to generate the first number separately.</li>
</ul>
</div>
<div id="pu19" class="pu"><h3>Bash: <strike>97 94 92 90 89</strike> 87</h3>

<p>Heavily golfed from Aman ZeeK Verma's answer:</p>

<pre>for((i=10,f=0;i--;))do
for((n=f;n==f||n+f==7;f=RANDOM%6+1))do :
done
printf $f
done</pre>

<p><a href="http://ideone.com/QiuTx" rel="nofollow">http://ideone.com/QiuTx</a></p>

<p>NB arguably it can be shrunk by 5 chars by changing the first line to <code>for((;i++&lt;10;))</code> but that makes assumptions which aren't always valid. It would work ok in ideone but someone running it from a shell could have <code>i</code> or <code>f</code> exported to something non-zero.</p>
</div>
<div id="pu20" class="pu"><h3>Bash with only one loop: <strike>100 99 98</strike> 96</h3>

<pre>for((i=10,f=RANDOM%6+1;i--;))do
printf $f
((n=RANDOM%4+1,m=f&lt;4?f:7-f,f=n&lt;m||++n&lt;7-m?n:n+1))
done</pre>

<p><a href="http://ideone.com/XrZO7" rel="nofollow">http://ideone.com/XrZO7</a></p>

<p>The key idea is that to pick a random number in [1,x] which isn't equal to y you can pick a random number in [1,x-1] and then increment if it's >= y. For this problem we want a random number in [1,6] which isn't equal to f or 7-f. We have to do the two tests in order min(f,7-f), max(f,7-f).</p>

<p>Assuming an initially empty environment could save 2 chars by not initialising i and changing the loop condition to <code>i++&lt;10</code></p>
</div>
<div id="pu21" class="pu"><p><strong>Bash</strong></p>

<pre><code>#/!bin/bash
f=`expr $RANDOM % 6` 
f=`expr $f + 1`
printf "$f"
for ((i=0; i&lt;9; i++))
do
   ((bad=7-$f))
   next=`expr $RANDOM % 6`
   next=`expr $next + 1`
   while [ $next -eq $bad ] || [ $next -eq $f ]
   do
      next=`expr $RANDOM % 6`
      next=`expr $next + 1`
   done
printf "$next"
f=$next
done
</code></pre>

<p>sample code: <a href="http://ideone.com/CCfro" rel="nofollow">http://ideone.com/CCfro</a></p>
</div>
<div id="pu22" class="pu"><h2>JavaScript (71 characters)</h2>

<p>You may need to replace <code>print</code> with <code>alert</code> or something else, depending on your JavaScript environment.</p>

<pre><code>for(C=L=T=0;C++&lt;10;print(L=T))while(!(T-L&amp;&amp;T+L-7))T=Math.random()*6+1|0
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/958/">958</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




