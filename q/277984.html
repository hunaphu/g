<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277984</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>055</td><td>Charcoal</td><td>250129T233232Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/277990#277990">Neil</a></td></tr>
<tr d-ix="1"><td>022</td><td>Jelly</td><td>250130T192902Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/278003#278003">Jonathan</a></td></tr>
<tr d-ix="2"><td>051</td><td>JavaScript Node.js</td><td>250130T003514Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/277991#277991">l4m2</a></td></tr>
<tr d-ix="3"><td>054</td><td>Ruby</td><td>250130T112123Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/278001#278001">G B</a></td></tr>
<tr d-ix="4"><td>053</td><td>Python</td><td>250130T103841Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/277999#277999">Albert.L</a></td></tr>
<tr d-ix="5"><td>100</td><td>Python 2</td><td>250130T025906Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/277994#277994">Lucenapo</a></td></tr>
<tr d-ix="6"><td>078</td><td>JavaScript ES6</td><td>250129T204657Z</td><td><a href="https://codegolf.stackexchange.com/questions/277984/index-into-a-fibonacci-tiling/277987#277987">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 55 bytes</h1>
<pre><code>Ｆ²⊞υＮ≔Ｅ⁴‹ι²θＷ⊙Ｅ⁴Σ✂θκＬθ⁴⎇‹λ²¬‹§υλκ‹§υλ±κ⊞θΣ…⮌Ｅθ⁺κ⁼³λ²Ｉ⌈θ
</code></pre>
<p><a href="https://tio.run/##bY@7bsMwDEX3fgVHClAWJ1snw@gQoDWMJj@guqwtRJatVxJ/vUrZ6FZt0tG9POxH5ftZmZx/Zg9YCehSGDFJONslxTZNX@RRiNeXOgQ9WPxQC54kvFMIqCVUQkhwjB@jNgRY2/XvyyVNeDG6J3QSbiVihzii48BJlNiVvFV@xa3LlC4J7Rz3ex3P9puexcTw@60E/gMtDSoSMuezy7t9drP2hppxXvCT7uQDbWIMO5MCstCbS8oEPJaiTYiX4U06r23ERoXIgaeeuMoVkPMRDlU@3M0v" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Probably not the best algorithm, but at least the number of bytes is relevant.</p>
<pre><code>Ｆ²⊞υＮ
</code></pre>
<p>Input the target coordinates.</p>
<pre><code>≔Ｅ⁴‹ι²θ
</code></pre>
<p>Start with a rectangle whose right, top, left and bottom are <code>1, 1, 0, 0</code> respectively, however the rectangle's coordinates are actually given by the cyclic sums of the list values so that rather than actually modifying the coordinates in place the additional values are simply appended to the list, plus the left and bottom coordinates need to be negated.</p>
<pre><code>Ｗ⊙Ｅ⁴Σ✂θκＬθ⁴⎇‹λ²¬‹§υλκ‹§υλ±κ
</code></pre>
<p>Repeat until the target coordinates lie inside the rectangle.</p>
<pre><code>⊞θΣ…⮌Ｅθ⁺κ⁼³λ²
</code></pre>
<p>Push the next Fibonacci number to the rectangle.</p>
<pre><code>Ｉ⌈θ
</code></pre>
<p>Output the highest used Fibonacci number.</p>
<p>46 bytes for a version that suffers from floating-point inaccuracy:</p>
<pre><code>Ｆ²⊞υ⁺·⁵Ｎ≔Ｅ²ιθＷ⊙υ÷κ⌈θ«≔⟦⁻⌈θ⊟υ⁻⊟υ⌈θ⟧υ⊞θΣ…⮌θ²»Ｉ⌈θ
</code></pre>
<p><a href="https://tio.run/##VU69DoIwEJ7lKW68JtUB48REcGHAEB2NQ8UqjaVAS1FifPZawUTd7r7/omS6qJl07lxrwJBAbk2JlkIurcHFikKqGtttbHXkGgkhURAbIy4KM9ZgSEEQCq1Hb6WQHDBWw9udqm4tenHieKWQsbuobIWttxN4BLNPwj4Typd8ad9aN2iJPyZqev8SDhSsr5uNO1sKOw8nQyF5UnrxlvdcGz5mhePaZ5BroTpMmOnwd0nkXAhLN@/lCw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes <code>x</code> and <code>-y</code> as inputs. Explanation:</p>
<pre><code>Ｆ²⊞υ⁺·⁵Ｎ
</code></pre>
<p>Input the coordinates but add <code>0.5</code> to each so they represent the centre of the square.</p>
<pre><code>≔Ｅ²ιθ
</code></pre>
<p>Start with the first two terms of the Fibonacci sequence.</p>
<pre><code>Ｗ⊙υ÷κ⌈θ«
</code></pre>
<p>Repeat until the point lies in the current square.</p>
<pre><code>≔⟦⁻⌈θ⊟υ⁻⊟υ⌈θ⟧υ
</code></pre>
<p>Rotate the entire diagram so that the next square arrives at the origin.</p>
<pre><code>⊞θΣ…⮌θ²
</code></pre>
<p>Get the size of the next square.</p>
<pre><code>»Ｉ⌈θ
</code></pre>
<p>Output the size of the found square.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 22 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ḢṚÄß’_¥;⁹.ịʋɗḶi&quot;Ạɗ?
Jç
</code></pre>
<p>A monadic Link that accepts a pair of integers and yields the tile value at that location (the tiling from the example has been rotated a quarter turn anti-clockwise).</p>
<p><strong><a href="https://tio.run/##ATwAw/9qZWxsef//4bii4bmaw4TDn@KAmV/CpTvigbku4buLyovJl@G4tmki4bqgyZc/CkrDp////1swLCAtNF0" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see it <a href="https://tio.run/##AUMAvP9qZWxsef//4bii4bmaw4TDn@KAmV/CpTvigbku4buLyovJl@G4tmki4bqgyZc/CkrDp/8xMMWSUixAw4fCpcO@YEf/" rel="nofollow noreferrer" title="Jelly – Try It Online">produce a tiling</a> (rotated to match the question's examples).</p>
<h4>How?</h4>
<p>Note: I <em>think</em> <code>ß</code> is not being counted as a chainlink when grouping (i.e. I would have thought the <code>ʋɗ</code> should be <code>ʋʋ</code>).</p>
<pre><code>ḢṚÄß’_¥;⁹.ịʋɗḶi&quot;Ạɗ? - Recursive Helper Link: [T, NextT]; [X, Y]
                  ? - if...
                 ɗ  - ...condition: last three links as a dyad - f([T, NextT], [-Y, X]):
             Ḷ      -      lowered range -&gt; TileRange = [[0..T-1], [0..NextT-1]]
               &quot;    -      zip with:
              i     -      index of {CoordinatePart} in {TileRange} or 0 if not found
                Ạ   -      all truthy?
Ḣ                   - ...then: Head {[T, NextT]} -&gt; T
            ɗ       - ...else: last three(four?!) links as a dyad - f([T, NextT], [X, Y]):
 Ṛ                  -      reverse {[T, NextT]} -&gt; [NextT, T]
  Ä                 -      cumulative sums {that} -&gt; [NextT, NextT + T]
           ʋ        -      last four links as a dyad - f([T, NextT], [X, Y]):
      ¥             -        last two links as a dyad - f([T, NextT], [X, Y]):
    ’               -          decrement {[T, NextT]} -&gt; [T - 1, NextT - 1]
     _              -          subtract {[X, Y]} -&gt; [T - 1 - X, NextT - 1 - Y]
       ;⁹           -        {that} concatenate {[X, Y]} -&gt; -&gt; [T - 1 - X, NextT - 1 - Y, X, Y]
         .          -        literal = 0.5
          ị         -        {0.5} index into {that} -&gt; [Y, T - 1 - X]
   ß                -      call this link again - f([NextT, NextT + T], [Y, T - 1 - X])

Jç - Main Link: [-Y, X]:
J  - indices -&gt; [1, 2]
 ç - call halper Link as a dyad - f([1, 2], [-Y, X])
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 51 bytes by Weird Glyphs</h1>

<pre class="lang-none prettyprint-override"><code>f=(x,y,u=1,r=2)=&gt;(x|y)&gt;-1&amp;x&lt;r&amp;y&lt;u?u:f(y,r+~x,r,r+u)
</code></pre>
<p><a href="https://tio.run/##hc/RCoIwFAbg@57CK9loSzc3iXD2LGIahbiYLTaIXn3NCK0ldG7OxXf@H865ulVDrU6XK@7loXGuFcAgi7QgSAkKRQnM3cISk9gUKraF3utdCyxS64dByi8NXS37QXbNppNH0IIURSmE0WuSJCKrbyZ/mXwwDRhns3vOFhi/3TMPeFQ6p7cB576bz0x@2pnP86mdkiXPJ89Y@BvjyKfYeOE9J6l7Ag" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 52 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=(x,y,u=0,r=1)=&gt;x&lt;0|x&gt;r|y&lt;0|y&gt;u?f(y,r-x,r,u-~r):u+1
</code></pre>
<p><a href="https://tio.run/##hc/RCoIwFAbg@57CS0db7ugmEc2eRUyjEBezxQbSq68ZobWEzs25@M7/w7mU97Kv1Pl6I5081s41IjbYYi0oVgKQKMyeDqZQg/XbFvrQxBYrYrDCmjwU2uk1uEp2vWzrTStPcRNTHFGEotckSQSrb4a/DB@cBkyy2T1nC0ze7pkHPGo6p7cB576bzww/7czn@dSewpLnk2cs/I1x7FNsvPCeA3VP" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>by shifting the rect</p>
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 69 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=(x,y,l=0,u=0,r=1,d=0)=&gt;x&lt;l|x&gt;r|y&lt;d|y&gt;u?f(y,-x,d,-l,u-~r-l,-r):u-d+1
</code></pre>
<p><a href="https://tio.run/##hc/RCoIwFAbg@57Cy43OctMpEc6eRZxGMTRmiw2kV7cZoWVCB8a5@Pb/cC7FvehKfb7eSNPKahhqgSw4UIKC8U8LBlJQLHKbqd7muneZ7F1ujjVyQCxIIAoMeWi/iMYHQ@SWDWXbdK2qdqo9oRpRCCjGwWvCMGCbb2Z/mX1wtGASz@45XmHyds/JgkeN5vR@wanvTmZmP@3c55OpPWJrnk4e8@VtPAGf4uMP7ymjwxM" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>If in the rect then output its height, otherwise rotate by 90 and extend to right</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 54 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=-&gt;x,y,a=0,b=1{x*x&gt;b*x||y*y&gt;a*y ?f[y,b-x,b,a-~b]:a+1}
</code></pre>
<p><a href="https://tio.run/##bc5BCsMgEAXQfU8xkJ0dwTEaSkF7kOBCF65LoaA07dWtMSbddJbv/w/zeIZcSjTcJszojcBg6JVYsoGlZcksW88y3OKcMfCEAT3/BHf1Z3qXO8RZIAgH7Qag00r0l@gg2YiPhw0wHsQ3G0A3WkXurUujqe70TtSXqvZ0X0r62dRtVNsfSmPNlVttIlG@" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Same as l4m2, rotate x and y around the tile recursively if they are not inside.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 53 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda y,x,H=1,W=2:H*(H&gt;y&gt;-1&lt;x&lt;W)or f(x,~y+H,W,W+H)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3TdNscxJzk1ISFSp1KnQ8bA11wm2NrDy0NDzsKu10DW0qbMI184sU0jQqdOoqtT10wnXCtT00oZqnFxRl5pVoKCmAgJKOVrSSqnGKkmqWQhpQS5ZCZp5CUWJeeqqGrqGhjqGRZqwmF6oGJV0lLUtDTS6Q8kwM5VZcClDlQFMVapRUM-E2pGlk6mRp4rQG4jyYHwE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Pretty straightforward recursion.</p>
<p>Looks like @Arnauld and @l4m2 did pretty much the same several hours before me. So this should count as a port of theirs.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 100 bytes</h1>

<pre class="lang-none prettyprint-override"><code>def f(x,y):
 a=c=0;b=1;s=[1]*4
 while(-s[2]&lt;x&lt;s[0]&gt;-s[3]&lt;y&lt;s[1])^1:a,b=b,a+b;s[c%4]+=b;c+=1
 print b
</code></pre>
<p><a href="https://tio.run/##TZBBboQwDEX3OYU3VUgDFYaAqoHMRWgqESZokBCDEtrC6amhs@jGeu/bVuTM23J/TNm@31wPfbTGm7gwaHWn08pqrIJu0LwqBj/3YXRREprM1GsdmtRcSXJTbyRoxCde2thqG7fSVqHpXpSR2lad1Mhg9sO0gN3Bu@XLT2CZ15zzNIYUkisgw/@EB2UsyZ@Yn5icXLADswPfWUkDxblGI4ryUzL8k/LcVQxVEVOoDi0xpXffwjwOS8Q/Ji5Y//CwwjCBp8M3vT6bgn4hBOcXcN/tGPE@4nKjq6mgkVxwybU@otyI/Rc" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Alternative:</p>
<h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 100 bytes</h1>

<pre class="lang-none prettyprint-override"><code>def f(x,y):
 a=c=0;s=[b:=1]*4
 while(-s[2]&lt;x&lt;s[0]&gt;-s[3]&lt;y&lt;s[1])^1:a,b=b,a+b;s[c%4]+=b;c+=1
 return b
</code></pre>
<p><a href="https://tio.run/##TY9BboMwEEX3PsVsKuMaKgYMigDnItSVMAUFCRFk0wROTweaRTfWe98zGv15W273Kb3Mbt@/ux76YA03UTBodKvj0uvaFhrNu2LwvA1jF0S@Tky1Vr6OzZUkNdVGgkZ8YdGEVtuwkbb0dfumjNS2bKVGBq5bftwEdneacx6HEEN0BWT4n/CghEXpC9MTo5MzdmBy4IXlNJCdazSiKD8lwT/Jz13FUGUhherQHGO6@@HncVgC/jlxwfq7gxWGCRzV3fT6@hTU3fvOLdA9mjHgfcDlRmXpQSO54JJrfUSpEfsv" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>If returning a generator is allowed:</p>
<h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 99 bytes</h1>

<pre class="lang-none prettyprint-override"><code>def f(x,y):
 a=c=0;s=[b:=1]*4
 while(-s[2]&lt;x&lt;s[0]&gt;-s[3]&lt;y&lt;s[1])^1:a,b=b,a+b;s[c%4]+=b;c+=1
 yield b
</code></pre>
<p><a href="https://tio.run/##TY9BboMwEEX3PsVsKts1RBgMioDJRagrYWIUJEQQRi0@PTE0i26s975nNPqzXx/PKbvOy77fbQ892yLPSwItdphUDhtTotSfisDvYxgti12T6nqrXZPoW5BM1z6I1Pxblm1k0EStMJVrug@lBZqqEygJ@MGOdzD7gpTSJIIE4htIIv@TPCglcfbG7MT45JwcmB54JUUYyM@1MKJCfkoq/6Q4dxWRKo9CqA4tZBLuXtw8DiujXxPlpH8usMEwwRLaetzenzxUd84uK9ifdmR0stvKekaFD4XDI7WgnFNBEY8s03x/AQ" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 78 bytes</h1>
<p>Expects <code>(x,y)</code> with <code>y</code> negated.</p>

<pre class="lang-none prettyprint-override"><code>f=(x,y,a=d=0,b=1)=&gt;x&lt;0|x/b|y&lt;0|y/b?f(x+(A=[-b,a,a+=b,0])[d++],y+A[d&amp;=3],b,a):b
</code></pre>
<p><a href="https://tio.run/##hc/fCoIwFAbw@57Cq9jYsW3@I6IVPod4sWlGIS4yYoLvbisibQntZhe/c75vO8u7bIvr6XLzG10ehqESyEAHUpSCgRIci53Zst5Q1Xf27qjaV8gQlIrMVyBBEqGA5TgrCcmhI2lWLkWYgzW8UUOhm1bXh1Wtj6hCDDyGsfc6lHp88c38L/v87ZYDh/1wdMvhDE@2Y4etBpPutcPJMzv@hPOf9Ai8ePI2PuPJ6GHk/i2KbUPAIztjPeFseAA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Method</h3>
<p>Given:</p>
<ul>
<li>the previous Fibonacci value <span class="math-container">\$a\$</span></li>
<li>the current Fibonacci value <span class="math-container">\$b\$</span></li>
<li>a direction <span class="math-container">\$d\$</span> initialized to <span class="math-container">\$0\$</span> and incremented modulo <span class="math-container">\$4\$</span> after each iteration</li>
</ul>
<p>the displacement vector to get the top-left corner of the next Fibonacci tile is:</p>
<ul>
<li>if <span class="math-container">\$d=0\$</span>: <span class="math-container">\$(+b,-a)\$</span></li>
<li>if <span class="math-container">\$d=1\$</span>: <span class="math-container">\$(-a,-a-b)\$</span></li>
<li>if <span class="math-container">\$d=2\$</span>: <span class="math-container">\$(-a-b,0)\$</span></li>
<li>if <span class="math-container">\$d=3\$</span>: <span class="math-container">\$(0,+b)\$</span></li>
</ul>
<p>Instead of adding these vectors to the current position <span class="math-container">\$(X,Y)\$</span> and testing if we have <span class="math-container">\$X\le x&lt;X+b\$</span> and <span class="math-container">\$Y\le y&lt;Y+b\$</span>, we subtract them from the target position <span class="math-container">\$(x,y)\$</span> until we have <span class="math-container">\$0\le x&lt;b\$</span> and <span class="math-container">\$0\le y&lt;b\$</span>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277984/">277984</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




