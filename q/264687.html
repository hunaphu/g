<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::264687</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>156</td><td>JavaScript Node.js</td><td>230828T151700Z</td><td><a href="https://codegolf.stackexchange.com/questions/264687/calculate-the-distance-to-a-line-segment/264707#264707">Someone</a></td></tr>
<tr d-ix="1"><td>009</td><td>MATL</td><td>230828T091104Z</td><td><a href="https://codegolf.stackexchange.com/questions/264687/calculate-the-distance-to-a-line-segment/264696#264696">Luis Men</a></td></tr>
<tr d-ix="2"><td>033</td><td>R</td><td>230828T151609Z</td><td><a href="https://codegolf.stackexchange.com/questions/264687/calculate-the-distance-to-a-line-segment/264706#264706">Dominic </a></td></tr>
<tr d-ix="3"><td>061</td><td>Charcoal</td><td>230828T090536Z</td><td><a href="https://codegolf.stackexchange.com/questions/264687/calculate-the-distance-to-a-line-segment/264695#264695">Neil</a></td></tr>
<tr d-ix="4"><td>032</td><td>J</td><td>230828T044641Z</td><td><a href="https://codegolf.stackexchange.com/questions/264687/calculate-the-distance-to-a-line-segment/264692#264692">Bubbler</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://nodejs.org/en" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <s>146</s> <s>144</s> <s>140</s> 156 bytes</h1>
<p>-2 bytes because of oversight noted by @noodleman</p>
<p>-4 bytes thanks to @TheThonnu's suggestion</p>
<p>+16 bytes because I noticed my own error with the solution</p>
<p>Algorithm somewhat yoinked from @Neil's <a href="https://codegolf.stackexchange.com/a/264695/95056">Charcoal answer</a>, though with a slightly different method for handling the &quot;segment&quot; of &quot;line segment.&quot;</p>
<pre class="lang-js prettyprint-override"><code>(a,b,c,d,e,f,S=Math.sqrt)=&gt;((x,y,z)=&gt;Math.min(S((x+y+z)*(x+y-z)*(x-y+z)*(y+z-x))/2/x,y,z))(S((f-d)**2+(e-c)**2),S((f-b)**2+(e-a)**2),S((d-b)**2+(c-a)**2))
</code></pre>
<p><code>(a,b)</code> is the point, <code>(c,d)</code> is vertex 1, <code>(e,f)</code> is vertex 2. Returns a float.</p>
<h2>Versions</h2>
<h3>Version 1 (original + oversight fix) (INCORRECT—SEE COMMENTS)</h3>
<pre class="lang-js prettyprint-override"><code>(S=&gt;(a,b,c,d,e,f)=&gt;((x,y,z)=&gt;S((x+y+z)*(x+y-z)*(x-y+z)*(y+z-x))/2/x)(S((f-d)**2+(e-c)**2),S((f-b)**2+(e-a)**2),S((d-b)**2+(c-a)**2)))(Math.sqrt)
</code></pre>
<p><a href="https://tio.run/##PYo7DoMwEESvs2PvBomelOlScYLFNiIp8gErMlzeMSTQzLx5mrt@dHLj7RXl8fQhX5pMbXMm5Y4dew7co0xKPPNSqC1oZ7vArC1by2@XlARUdZVA5deLhzG1pSBuBfAmu13qIf0u3V8CdNU4nKb3GJHzFw" rel="nofollow noreferrer">Try this old version online!</a></p>
<h3>Version 2 (uses default arg instead of separate call) (INCORRECT—SEE COMMENTS)</h3>
<pre class="lang-js prettyprint-override"><code>(a,b,c,d,e,f,S=Math.sqrt)=&gt;((x,y,z)=&gt;S((x+y+z)*(x+y-z)*(x-y+z)*(y+z-x))/2/x)(S((f-d)**2+(e-c)**2),S((f-b)**2+(e-a)**2),S((d-b)**2+(c-a)**2))
</code></pre>
<p><a href="https://tio.run/##PYo7DsIwEESvs2vPEim9KemocoKN7Qgo@CQWcnJ54wRCM/PmaW761smP12eS@yPEcnKFFD08AiIGdO6s6XKYXmNidyTKmLFU6ira2S5s1pat5btrSmZu2iYz1d8ggY1pLUXxKzA22e9S/zLs0v8kl/IB" rel="nofollow noreferrer">Try this old version online!</a></p>
<h3>Version 3 (current, fixes issue with solution)</h3>
<pre class="lang-js prettyprint-override"><code>(a,b,c,d,e,f,S=Math.sqrt)=&gt;((x,y,z)=&gt;Math.min(S((x+y+z)*(x+y-z)*(x-y+z)*(y+z-x))/2/x,y,z))(S((f-d)**2+(e-c)**2),S((f-b)**2+(e-a)**2),S((d-b)**2+(c-a)**2))
</code></pre>
<h2>Explanation</h2>
<pre class="lang-js prettyprint-override"><code>(a,b,c,d,e,f,S=Math.sqrt)=&gt;(...)
</code></pre>
<p>The function declaration. Uses <code>S</code> as a default argument in this version instead of a different call.</p>
<pre class="lang-js prettyprint-override"><code>((x,y,z)=&gt;...)(S((f-d)**2+(e-c)**2),S((f-b)**2+(e-a)**2),S((d-b)**2+(c-a)**2))
</code></pre>
<p>This is slightly more efficient than declaring <code>x,y,z</code> as variables outright—it uses another one of those define-exec chains. (Is there a canon term for this?)</p>
<p><code>x,y,z</code> are the side lengths for a triangle with vertices at the three points, with <code>x</code> being the length of the segment between the two vertices. <strong>THIS IS IMPORTANT.</strong> To find these, I just used the bog-standard distance formula. Nothing special here.</p>
<pre class="lang-js prettyprint-override"><code>Math.min(S((x+y+z)*(x+y-z)*(x-y+z)*(y+z-x))/2/x,y,z)
</code></pre>
<p>The final part. This calculates the area with [a slightly modified] <a href="https://en.wikipedia.org/wiki/Heron%27s_formula" rel="nofollow noreferrer">Heron's formula</a>, and then works backwards to find the height with one tiny optimization. It also accounts for the cases where the endpoints are closer with a <code>Math.min()</code> call.</p>
<h2>Links</h2>
<p><a href="https://tio.run/##PcvBDoIwDAbg12m3VhLu8@jNE09QthEwERUWA7z83AZ46f/3S/uQr8x2Gt6Bx5fz8WYiCLVkyZGnjhpzl9Bf5s8U0FwBFlppS63ocxihSaZXvaHKySV539PkBbGqq/0L83HHDpWqNXi2uSAVbE@UP7oT7YEY4w8" rel="nofollow noreferrer">Try this online!</a> This is a link to the golfed version. The verbose version no longer exists as of v2.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 9 bytes</h1>
<pre><code>9W&amp;ZS-|X&lt;
</code></pre>
<p>Supports two dimensions. Inputs are complex numbers: first the segment endpoints, then the other point.</p>
<p>Try at <a href="https://matl.io/?code=9W%26ZS-%7CX%3C&amp;inputs=0%0A0%2B10j%0A5%2B5j&amp;version=22.7.4" rel="nofollow noreferrer">MATL it online</a>! Or <a href="https://tio.run/##y00syfmf8N8yXC0qWLcmwua/S8h/Ay4DbUODLC5TbdMsLkMDIEJw4TwQRuJwGWkbZXGZaFuARMFsCJEFAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<pre><code>9W      % Push 9. Compute 2 raised to that number, that is, 512
&amp;ZS     % Implicit inputs: segment endpoints. Generate vector of 512 evenly
        % spaced numbers in the range defined by the endpoints, including them
-       % Implicit input: point. Subtract, element-wise
|       % Absolute value of each entry
X&lt;      % Minimum. Implicit display
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>34</s> 33 bytes</h1>
<p><em>Edit: -1 byte thanks to Giuseppe</em></p>
<pre class="lang-r prettyprint-override"><code>\(p,a,b)min(abs(p-seq(a,b,,1e4)))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=rZKxTsMwFEUlxn6FEYujupFtihoVZYKBiZEBsbjhkVokdrBNkPgVljCw8EfwNbwmDSnQoZUYLOte-93jZ_vl1TXvt9qHYD3k6dtjuJskH4c3tGKKLaJSG6oWnlYTDw8UHcYETKMo6jZ-HujKahNSzk_GOPQpqQUKjoKvhEy56MU3hbY1rBaslhE5IvN5u6ZMBqugmHM0L6zTz9YEVYy2IcRvhNgfcQUu6GwD0Mds7WEfwCzmMzTPtcqtGQDDof8ZMCZnhc3un7SHzWYGlkQh1yw-RZHszpJxcozmpQ3EgHIkLIEY68qfF9fF_2H1YmdW-zLX4CwpwORhSbCmBBNG3Y9rmm7-Ag" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Input point <code>p</code>, and segment endpoings <code>a</code> &amp; <code>b</code> as complex numbers.</p>
<p>Approach copied from <a href="https://codegolf.stackexchange.com/a/264696/95126">Luis Mendo's answer</a>: upvote that!</p>
<p>Accuracy can be improved by changing <code>1e4</code> to a higher value (for instance, <code>1e9</code> without increasing code-length), but as-is it's easily within the ±1 accuracy in the x,y-range of 0-127.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>65</s> 61 bytes</h1>
<pre><code>ＵＭθ₂ΣＸＥ§θ⊕κ⁻λ§ιμ²≔§θ⁰η≔⎇η⊗∕₂Π⁻⊘Σθ⁺θ⟦⁰⟧η⌈θζＩ⎇›Ｘ⌈θ²⁺Ｘη²Ｘζ²⌊Φθκζ
</code></pre>
<p><a href="https://tio.run/##TU89a8MwEN37KzSeQQUTOgQ6hYS2GQIm6WY0qLaoRPRRy5Kb5s@rJzlus@jQvXfvo5Pcd47rlA78a@uM4baHgZLTELkXR@cCnKKBxn0LD0iBTdjbXlwyZ287L4ywQfRwripKDsrGETQlC0lRYqqMrPCtnh8246g@7b1GjaD8R96Ft9z/gKRk5@KHRuWdmlQv4C5Q410fuwCz3RvXE9JyyiFbNRqXqNzWrCreskTjF2UWyhUNG69sgC0fw5/pqxc8YM2l7HKR4990Z0jeNuVznduV9uXgRemsghHOsxk2T6lt2xUyGQZ7omSdZ431GWPpcdK/" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as a list of the two vertices and the point. Explanation:</p>
<pre><code>ＵＭθ₂ΣＸＥ§θ⊕κ⁻λ§ιμ²
</code></pre>
<p>Calculate the lengths of the sides of a triangle with the given points.</p>
<pre><code>≔§θ⁰η
</code></pre>
<p>Get the base of the triangle separately.</p>
<pre><code>≔⎇η⊗∕₂Π⁻⊘Σθ⁺θ⟦⁰⟧η⌈θζ
</code></pre>
<p>Unless the base is zero, divide the triangle's area by it and double the result, giving the altitude.</p>
<pre><code>Ｉ⎇›Ｘ⌈θ²⁺Ｘη²Ｘζ²⌊Φθκζ
</code></pre>
<p>Determine whether the base of the triangle contains the foot, and if so, output the altitude, otherwise output the shorter of the other two sides.</p>
<p><s>58</s> 54 bytes taking complex numbers as input:</p>
<pre><code>ＵＭθ↔⁻ι§θ⊕κ≔§θ⁰η≔⎇η⊗∕₂Π⁻⊘Σθ⁺θ⟦⁰⟧η⌈θζＩ⎇›Ｘ⌈θ²⁺Ｘη²Ｘζ²⌊Φθκζ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TVC9TsMwGBQrTxF1-qKmUhQxRGKqWlE6RIooW5TBSVzi1rGJf0Lpq7B0AMHK6_A0fE5SioeTvrv77my_fZU1UaUk_HT6sGY7i3-u4oQ8L2TTEFFBG3jzQktuDYWECauBIWPWoqIHJ65FqWhDhaEV7H13bq_nWrMnAf9coR949UV5pEoQ9Qp14C2lLTjuLlnHKgqb1hJFH6Q0kCpZ2dKMrfeEd2jb2AZaH9NSjiQmZ2HuSl08QkIOrDlbjliYKiYMLIg2f6UrRYmhClL5gnjZCLzonDtI9cj0w9ENfQUT_cId4y4Fr7AfyvDl77oo9fiNn9lk1vFJ_p1l0TTaBd7NNEYM83zQfwE" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, 32 bytes</h1>
<pre><code>[:(1#.&amp;.:*:[-]*1&lt;.0&gt;.%. ::0)/-&quot;1
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FOJT0F9TQFWysFdR0FAwUrINbVU3AO8nFbWlqSpmtxUyHaSsNQWU9Nz0rLKlo3VsvQRs_ATk9VT8HKykBTX1fJEKquX5MrNTkjH6jfQCFNwRQIdawUDIE8iLAhurihAbJ6EB-rBFgfqoQREKYpQMVNFCxQRY1AokAOxFkLFkBoAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes input as <code>v1 f point ,: v2</code> (a vector <code>v1</code> on the left side, and a two-row matrix containing <code>point</code> and <code>v2</code> on the right side). Supports arbitrary dimensions.</p>
<p>The main approach is to translate <code>v1</code> to origin and compute the <a href="https://codegolf.stackexchange.com/q/205891/78410">vector component</a> of <code>point</code> onto <code>v2</code>. When the value is clamped to the range <code>[0, 1]</code>, that times <code>v2</code> becomes the point on the line segment that is closest to <code>point</code>. Then we can compute the norm of the difference.</p>
<pre><code>[:(1#.&amp;.:*:[-]*1&lt;.0&gt;.%. ::0)/-&quot;1    left: v1, right: point ,: v2
                             -&quot;1    (point - v1) ,: (v2 - v1)
[:(                        )/       run dyadically with the two rows as two args:
                     %. ::0     vector component
               1&lt;.0&gt;.           clamp to [0,1]
           [-]*                 get the distance vector
   1#.&amp;.:*:                     norm of the vector
</code></pre>
<p><code>::0</code> attached to <code>%.</code> handles the case of zero-length line segment (if it would throw an error, return 0 instead). <code>&amp;.:*:</code> is a fancy way of saying &quot;square something, do something on it, and take its square root&quot;.</p>
<h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, 23 bytes</h1>
<pre><code>[:([|@-]*1&lt;.0&gt;.9 o.%)/-
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FOJT0F9TQFWysFdR0FAwUrINbVU3AO8nFbWlqSpmuxPdpKI7rGQTdWy9BGz8BOz1IhX09VU18XInuzX5MrNTkjX8Egy0AhTcE0y1RBx0rBEMiDCBuiixsaIKsH8bFKgPWhShhlGYF1gMVNsixQRY1AokAOxFkLFkBoAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Same algorithm, but takes a complex number for each vector instead, therefore supporting only two dimensions. <code>%.</code> is replaced with <code>%</code> (division) followed by <code>9 o.</code> (extract real part). Norm is simply <code>|</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/264687/">264687</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




