<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::104508</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>029</td><td>Pari/GP</td><td>240505T020453Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/272958#272958">138 Aspe</a></td></tr>
<tr d-ix="1"><td>005</td><td>05AB1E</td><td>240504T033325Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/272943#272943">Flummox</a></td></tr>
<tr d-ix="2"><td>008</td><td>Pyt</td><td>240503T225349Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/272942#272942">Kip the </a></td></tr>
<tr d-ix="3"><td>003</td><td>Thunno 2 M</td><td>230813T091003Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/264109#264109">The Thon</a></td></tr>
<tr d-ix="4"><td>006</td><td>Vyxal</td><td>221115T184423Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/254580#254580">pacman25</a></td></tr>
<tr d-ix="5"><td>048</td><td>Prolog SWI</td><td>220904T014357Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/251624#251624">naffetS</a></td></tr>
<tr d-ix="6"><td>031</td><td>Regex ECMAScript</td><td>190123T041930Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/179023#179023">Deadcode</a></td></tr>
<tr d-ix="7"><td>008</td><td>Husk</td><td>201008T091152Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/212177#212177">Razetime</a></td></tr>
<tr d-ix="8"><td>040</td><td>APLNARS</td><td>190313T133455Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/181462#181462">user5898</a></td></tr>
<tr d-ix="9"><td>029</td><td>Regex ECMAScript</td><td>190313T141247Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/181463#181463">H.PWiz</a></td></tr>
<tr d-ix="10"><td>023</td><td>Wolfram Language Mathematica</td><td>190128T052240Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/179163#179163">lirtosia</a></td></tr>
<tr d-ix="11"><td>006</td><td>Japt</td><td>190124T175239Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/179091#179091">Oliver</a></td></tr>
<tr d-ix="12"><td>068</td><td>Python 3</td><td>161226T124621Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104639#104639">ABcDexte</a></td></tr>
<tr d-ix="13"><td>021</td><td>APL Dyalog Classic</td><td>190123T114643Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/179041#179041">akhmorn</a></td></tr>
<tr d-ix="14"><td>057</td><td>JavaScript Node.js</td><td>180826T044715Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/171209#171209">Shieru A</a></td></tr>
<tr d-ix="15"><td>016</td><td>J</td><td>180826T035044Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/171205#171205">junius</a></td></tr>
<tr d-ix="16"><td>053</td><td>Perl 5</td><td>170914T215726Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/142787#142787">Xcali</a></td></tr>
<tr d-ix="17"><td>049</td><td>Java 8</td><td>170831T122747Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/141150#141150">Kevin Cr</a></td></tr>
<tr d-ix="18"><td>008</td><td>Pyth</td><td>170831T120912Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/141148#141148">Mr. Xcod</a></td></tr>
<tr d-ix="19"><td>059</td><td>Scala</td><td>170203T092435Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/109003#109003">Aria Ax</a></td></tr>
<tr d-ix="20"><td>073</td><td>Python</td><td>161227T140117Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104768#104768">PM 2Ring</a></td></tr>
<tr d-ix="21"><td>094</td><td>C</td><td>170202T190619Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/108960#108960">Steadybo</a></td></tr>
<tr d-ix="22"><td>007</td><td>Pushy</td><td>170202T182812Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/108958#108958">FlipTack</a></td></tr>
<tr d-ix="23"><td>053</td><td>PHP</td><td>170125T183231Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/108127#108127">Titus</a></td></tr>
<tr d-ix="24"><td>026</td><td>Mathematica</td><td>161225T143708Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104512#104512">user6198</a></td></tr>
<tr d-ix="25"><td>065</td><td>Python</td><td>170108T021829Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/106047#106047">Cormac</a></td></tr>
<tr d-ix="26"><td>026</td><td>Mathematica 26 Bytes</td><td>161228T153506Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104926#104926">Kelly Lo</a></td></tr>
<tr d-ix="27"><td>076</td><td>Racket</td><td>161227T151145Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104779#104779">rnso</a></td></tr>
<tr d-ix="28"><td>066</td><td>Ceylon</td><td>161227T163646Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104805#104805">Paŭlo Eb</a></td></tr>
<tr d-ix="29"><td>005</td><td>Jelly</td><td>161227T145216Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104777#104777">steenber</a></td></tr>
<tr d-ix="30"><td>045</td><td>Python</td><td>161226T174732Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104664#104664">Dennis</a></td></tr>
<tr d-ix="31"><td>093</td><td>Python</td><td>161225T231748Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104576#104576">AvahW</a></td></tr>
<tr d-ix="32"><td>026</td><td>Julia</td><td>161226T124814Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104640#104640">alephalp</a></td></tr>
<tr d-ix="33"><td>009</td><td>Actually</td><td>161226T035122Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104588#104588">user4594</a></td></tr>
<tr d-ix="34"><td>047</td><td>Ruby</td><td>161225T234051Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104579#104579">G B</a></td></tr>
<tr d-ix="35"><td>007</td><td>Brachylog</td><td>161225T215457Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104561#104561">user6213</a></td></tr>
<tr d-ix="36"><td>010</td><td>Pyke</td><td>161225T161558Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104532#104532">Blue</a></td></tr>
<tr d-ix="37"><td>nan</td><td></td><td>161225T160005Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104530#104530">Brad Gil</a></td></tr>
<tr d-ix="38"><td>040</td><td>R</td><td>161225T143224Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104510#104510">JAD</a></td></tr>
<tr d-ix="39"><td>005</td><td>05AB1E</td><td>161225T145955Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104516#104516">Adnan</a></td></tr>
<tr d-ix="40"><td>005</td><td>Jelly</td><td>161225T143240Z</td><td><a href="https://codegolf.stackexchange.com/questions/104508/is-it-a-mersenne-prime/104511#104511">Dennis</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow noreferrer">Pari/GP</a>, 29 bytes</h1>
<p>A port of <a href="https://codegolf.stackexchange.com/a/179163/110802">@lirtosiast's Mathematica answer</a> in Pari/GP.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##Pc7NCsIwEATge55iQSiJHcFtrD@EPEnpIaItObiW2pv47HEFFfYwAx/DTmnOm3EqKVGkrgFjh2aLlrH3aMEM9vA4wDOOfOI@mMGKU5wf05xv10@pKrLnvCS5WAEJ1cQqIm1dKKOC@LN/JHXj1uJKME8z3GebdZBBK30DhoiUy2IHm1KXexfj@E0uGL1XeQM" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>g(n)=isprime(bitand(n,n+2)*n)
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 5 bytes</h1>
<pre><code>bWIp*
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/KdyzQOv/f0NTAA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p><code>b</code>: push binary version of (implicit) input<br />
<code>W</code>: push minimum (1 if it's 2^n-1, otherwise 0)<br />
<code>Ip</code>: push whether or not the input is prime<br />
<code>*</code>: multiply<br />
(implicit output)</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/mudkip201/pyt" rel="nofollow noreferrer">Pyt</a>, 8 bytes</h1>
<pre><code>Đṗ⇹ɓąƖΠ*
</code></pre>
<p><a href="https://tio.run/##ARwA4/9weXT//8SQ4bmX4oe5yZPEhcaWzqAq//84MTkx" rel="nofollow noreferrer" title="Pyt – Try It Online">Try it online!</a></p>
<pre><code>Đ            implicit input; Đuplicate
 ṗ           is input ṗrime?
  ⇹          swap top two items on the stack
   ɓ         get ɓinary string of input
    ą        convert to ąrray of characters
     Ɩ       cast to Ɩnteger
      Π      take product of list
       *     multiply by ṗrimality (implicitly cast to integer); implicit print
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a> <code>M</code>, 3 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>P×ḃ
</code></pre>
<p><a href="https://Not-Thonnu.github.io/run#aGVhZGVyPSZjb2RlPVAlQzMlOTclRTElQjglODMmZm9vdGVyPU4maW5wdXQ9MiUyMCUyMCUyMCUyMC0lM0UlMjBGYWxzZSUwQTElMjAlMjAlMjAlMjAtJTNFJTIwRmFsc2UlMjAlMEEyMCUyMCUyMCUyMC0lM0UlMjBGYWxzZSUwQTUxJTIwJTIwJTIwLSUzRSUyMEZhbHNlJTBBNjMlMjAlMjAlMjAtJTNFJTIwRmFsc2UlMEEzJTIwJTIwJTIwJTIwLSUzRSUyMFRydWUlMEEzMSUyMCUyMCUyMC0lM0UlMjBUcnVlJTBBODE5MSUyMC0lM0UlMjBUcnVlJmZsYWdzPUNN" rel="nofollow noreferrer">Try it online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>     # Implicit input

P    # Is the input prime?
     #   i.e.  1 if it's prime,
     #         0 otherwise

 ×   # Multiply by the input
     #   i.e.  (input) if it's prime,
     #         0 otherwise

  ḃ  # Convert to binary
     #   i.e.  a string of 1s if it's a Mersenne prime,
     #         a string including 0s if it's prime but not a Mersenne prime
     #         0 if it's not prime

     #   i.e   a string of 1s if it's a Mersenne prime,
     #         a string including 0s if it's not a Mersenne prime

     # M flag - take the minimum
     #   i.e.  1 if it's a Mersenne prime
     #         0 otherwise

     # Implicit output
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 6 bytes</h1>
<pre><code>æ[›¨²c
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLDplvigLrCqMKyYyIsIiIsIiJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>If N is prime, check if <code>n+1</code> is a power of 2.</p>
<h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 5 bytes</h1>
<pre><code>æ⁰bJΠ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyJQIiwiIiwiw6bigbBiSs6gIiwiIiwiMzEiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Port of the Jelly 5 byte answer.</p>
</div>
<div id="pu5" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 48 bytes</h1>
<pre><code>Y+X:-X=&lt;Y;X mod Y&gt;0,Y+1+X.
\X:-X&gt;1,2+X,X+1/\X&lt;1.
</code></pre>
<p><a href="https://tio.run/##KyjKz8lP1y0uz/z/P1I7wko3wtYm0jpCITc/RSHSzkAnUttQO0KPKwYkY2eoY6QdoROhbagfE2FjqPf/f4yRHhdXjCGIMDIAkaZgtpkxiIQQYAELQ0sQnZGYU6IHAA" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>-7 thanks to Jo King</p>
</div>
<div id="pu6" class="pu"><h1>Regex (ECMAScript), <s>42</s> 31 bytes</h1>
<p><code>^(?!(xx+)\1+$)(x(x*)(?=\3$))+x$</code></p>
<pre><code>^
(?!(xx+)\1+$)      # Assert that N is prime or 0 or 1.
(x(x*)(?=\3$))+x$  # Assert that N is a power of 2 minus 1 and is &gt;= 3.
                   # The &gt;=3 part of this prevents the match of 0 and 1.
</code></pre>
<p><a href="https://tio.run/##TY/NTgIxFEb3PAVMCNzLOEML/hBqYeWCDQtdiiYNXGaqpTRtgRHh2UcwMXH1Lc6XnJwPtVdh6bWLWXB6RX6ztZ/0VXtp6dB8puKpcgBHOen36neYtqCqUlzwtI1QQdVDmMrFsI2YVu261z9iHrcv0WtbAObB6CXB/U12iyiCZOJQakMARnpSK6MtAWJL2p0x@F1IkwdndIRu1kWh1wBWFrkhW8QSJ4PTSYe5moOWTvlAMxuheGVviH@A/gM74VM@vmKMpd8ekpndK6NXTa9sQeNmkhqx3noQ@lGS0GmKF2FSJbknRyqCxnyj4rIEj/gdOh13SYpwreDC7WKI/nIR53PNsjvGWGPERywbDThr8CFnDyz7ncEP" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<p>Edit: Down to 31 bytes thanks to Neil.</p>
<p>The basic &quot;is a power of 2 minus 1&quot; test is <code>^(x(x*)(?=\2$))*$</code>. This works by looping the operation &quot;subtract 1, then divide evenly by 2&quot; until it can be done no further, then asserting that the result is zero. This can be modified to match only numbers ≥1 by changing the last <code>*</code> to a <code>+</code>, forcing the loop to iterate at least once. Inserting an <code>x</code> before the last <code>$</code> further modifies it to match only numbers ≥3 by asserting that the final result after looping at least once is 1.</p>
<p>The related &quot;is a power of 2&quot; test is <code>^((x+)(?=\2$))*x$</code>. There is also a shorthand for matching powers of 2 minus 2, discovered by <a href="https://codegolf.stackexchange.com/users/6484/grimmy">Grimmy</a>: <code>^((x+)(?=\2$)x)*$</code>. All three of these regexes are of the same length.</p>
<p>Alternative 31 byte version, <a href="https://chat.stackexchange.com/transcript/message/49454897#49454897">by Grimmy</a>:</p>
<p><code>^(?!(xx+)\1+$|((xx)+)(\2x)*$)xx</code></p>
<p><a href="https://tio.run/##TY/LbsIwFET3fAVECO4lTbDTF8I1rLpgw6JdllaywCRujWPZBlII356GSpW6mpHOSKPzKQ7Cr52yIfFWbaTbleZLfjeOG3nsvsj8ubIAJz4bj5oPmPegqmJc0bhfQ1sxRlhlFY76WFXNaHzCNJSvwSmTA6Zeq7WEh5vkDpF5TtixUFoCaO6k2GhlJCD2uNlrjeec69RbrQIMkyEytQUwPE@1NHkocJbVtfJLsQTFrXBeLkyA/I28I/4B@R@YGZ3T6RVjKFx5jBbmILTadJ0wuZx2o1izbemAqScumYpjbA@jKkqdtFIEUJjuRFgX4BDPfjCwrVKAqwVldh98cO2EXS4NSe4JIZ0JnZBkklHSobeUPJLkN7If" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<pre><code># Match Mersenne primes in the domain ^x*$
^                   # N = input number
(?!                 # &quot;(?!p|q)&quot; is equivalent to &quot;(?!p)(?!q)&quot;; evaluate the
                    # logical AND of the following negative lookaheads:
    (xx+)\1+$       # Assert that N is prime or 0 or 1
|
    ((xx)+)(\2x)*$  # Assert that N is a power of 2 minus 1; this is based
                    # on &quot;(?!(x(xx)+)\1*$)&quot; which matches powers of 2.
)
xx                  # Assert that N &gt;= 2, to prevent the unwanted match of
                    # 0 and 1 by both of the negative lookahead statements.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 8 bytes</h1>
<pre><code>§&amp;o£İ2→ṗ
</code></pre>
<p><a href="https://tio.run/##ARkA5v9odXNr///CpyZvwqPEsDLihpLhuZf///8z" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1>APL(NARS), chars 20, bytes 40</h1>
<pre><code>{0π⍵×∧/⍵⊤⍨2⍴⍨1+⌊2⍟⍵}
</code></pre>
<p>0π return true [1] if its argument is prime else return false [0], test:</p>
<pre><code>  f←{0π⍵×∧/⍵⊤⍨2⍴⍨1+⌊2⍟⍵}
  f¨2 1 20 51 63
0 0 0 0 0 
  f¨3 31 8191
1 1 1 

  
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Regex (ECMAScript), 29 bytes</h1>

<pre><code>^(?!(xx+|(x(x))+)(\1\3)+$)xxx
</code></pre>

<p><a href="https://tio.run/##Tc3PT8IwGMbxO38FLCa8L3OlA38QZuHkgQsHPYomzXjpqqVb2goV598@0cTE05N8P4fnVR6kL51uQuYbvSW3r@0bfXROWDr2H0jdxwbgJBbjUfcCywHEmLYQISKmCJt8M8X0AmOM3Wh8Qhbqx@C0VYDMG10S3FxmV4jFsdKGAIxwJLdGWwLEgbDvxuCnEob5xugAw2yIhd4BWKGYIatChYtJ22q/lmvQopHO08oGUE/8GfEP6D/YRb7M5z@MoXL1MVnZgzR623fSKpr3k9QUu9pBoe8EFTpN8XyYxIQ5akgG0Mj2MpQVOMSytr42xEytzr346nh2zTnvzfIZz2aTnPfyac5vefY7k28" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>

<p>Inspired by Grimy in <a href="https://chat.stackexchange.com/transcript/message/49455538#49455538">chat</a></p>

<p>The regex asserts that the input is greater than 3, and that it is neither of the form: <code>(xx+)\1+</code> or <code>((xx)+)(\1x)+</code>.</p>

<p>The first matches composite numbers.<br>
The second matches a number that is 1 less than a multiple of some odd number greater than 2.</p>

<p>The first will <strong>not</strong> match prime numbers, or <code>0</code> or <code>1</code>.<br>
The second will <strong>not</strong> match numbers of the form <span class="math-container">\$2^n-1\$</span>, or numbers that are 1 less than an odd prime.</p>

<p>Since 2 is the only prime that is 1 less than an odd prime, the negative lookahead, together with the assertion that the input is greater than 3, will match only mersenne primes.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 23 bytes</h1>

<pre><code>PrimeQ[BitAnd[#,#+2]#]&amp;
</code></pre>

<p><a href="https://tio.run/##TY29CsIwFEb3@xSBQBY/0JtYf4ZI9Ql0Dhku2tYM6VCyFZ89ElzcDucMJ0t5D1lKekoVUV6tFow97A4d4@DQgRns4HCEY5z4zB@i0dN9SXl49NoYvtxSuc6voKE3HA3R5Osvh79io46m@bmEcdu3m1dTg1i/" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>

<p>1 is handled correctly because <code>PrimeQ[BitAnd[1,1+2]*1] == PrimeQ@1 == False</code>. Otherwise, for <code>BitAnd[#,#+2]#</code> to be prime, we need that <code>#</code> is prime and <code>BitAnd[#,#+2] == 1</code>, which happens when <code>#</code> is a Mersenne number.</p>
</div>
<div id="pu11" class="pu"><h1>Japt, 6 bytes</h1>
<pre><code>¢¬×&amp;Uj
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=oqzXJlVq&amp;input=NQoKLaE=" rel="nofollow noreferrer">Run it</a> or <a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=oqzXJlVq&amp;input=Wwo1LDIsMSwyMCw1MSw2MywgIC8vIGZhbHN5CjMsMzEsODE5MSAgICAgICAgLy8gdHJ1dGh5Cl0KCi1tUg==" rel="nofollow noreferrer">Run all test cases</a></p>
</div>
<div id="pu12" class="pu"><h1>Python 3, 68 bytes</h1>
<pre><code>a=int(input());print(a&amp;-~a&lt;1and a&gt;1and all(a%b for b in range(2,a)))
</code></pre>
<p><a href="http://ideone.com/ZPaMOQ" rel="nofollow noreferrer">Try it here</a></p>
<h1>Python 2, 63 bytes</h1>
<pre><code>a=input();print(a&amp;-~a&lt;1)and a&gt;1and all(a%b for b in range(2,a))
</code></pre>
<p><a href="http://ideone.com/jvHjxz" rel="nofollow noreferrer">Try it here</a></p>
<hr />
<p>Thanks for suggestion <a href="https://codegolf.stackexchange.com/users/73111/jonathan-frech">Jonathan</a></p>
<hr />
<p>Open to any suggestions for reducing the bytecount.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, 21 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>1∧.=1∘≠,2∘⊥⍣¯1,¯1↓⊢∨⍳
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v8/TeFR2wQFw0cdy/VsgeSMR50LdIxAdNfSR72LD6031AHiR22TH3UtetSx4lHvZq5HfVNBWtIOrVAwUjBUMDJQMDVUMDNWAEJDBQtDS0OF//8B" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Verify test cases</a></p>
<h3>Explanation:</h3>
<p>Similar method to others here. Prime test + binary representation of Mersenne number being all 1s.</p>
<ul>
<li><code>¯1↓⊢∨⍳</code> is a prime test. The length of the result depends on the size of the number but if the number is prime every element of the result list will be 1.
(the exception is 1 which annoyingly returns empty list) Catenated with <code>,</code> to....</li>
<li><code>2∘⊥⍣¯1</code> is the easiest way to encode into binary in Dyalog, by inverting the decode-from-binary operation (yeah i know right), catenated to.....</li>
<li><code>1∘≠</code> which is there to catch the corner case that the above tests can't tell that 1 isn't a Mersenne prime. (Prime test returns empty list, binary encode results in 1, so result of concatenations contains only 1s)</li>
<li>If the list resulting from the above operations contains only 1s, the result is a Mersenne prime. <code>1∧.=</code> checks that all elements are 1.</li>
</ul>
</div>
<div id="pu14" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 57 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>n=&gt;!(n&amp;n+1||(g=(m,q)=&gt;m&gt;3?g(m&gt;&gt;1,(q*q-2)%n):n-3&amp;&amp;q)(n,4))
</code></pre>

<p><a href="https://tio.run/##DchBDsIgEADAt/Qg2W3BBPFgNaxvIQikpixim574OzrHebvDbf67fHbF5RV6tJ0tDcCCJ90aJAtZVrSUyTwTZCItoY5VXfDEeGdlhKgILK@I/eELb2UN57UkiHDTs/7vDw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a>
Implements Lucas-Lehmer primality test. Works for <code>n&lt;2**26.5</code></p>

<p>(FINALLY NATIVE BIGINT SUPPORT IN JS IN 2018. HAIL V8)</p>

<p>For arbitrarily sized integers, try <code>n=&gt;!(n&amp;n+1n||(g=(m,q)=&gt;m&gt;3n?g(m/2n,(q*q-2n)%n):n-3n&amp;&amp;q)(n,4n))</code> for 62 bytes. Only works in Chrome 67+ and Node.js 10.4.1+ because of BigInt support. <a href="https://tio.run/##FclLDoMgFAXQtXQgeY9CjcCoDbgW44fYyEVq48i90/RMz3s4h2P8rPtXI09zXXyFDzeCwL3DdVH0lFRhH1Kw6COl1kBRkUUbcAN@QlsIUZigHJjra8w48jY/thxpIQMpnTMWuvvvDw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Have a try on 2**4423-1!</a></p>
</div>
<div id="pu15" class="pu"><h1>J, 16 bytes</h1>

<p><code>*./(#:,1&amp;=@#@q:)</code></p>

<p>This solution consists of a fork and then a reduce, returns a 1 if true and 0 if false.</p>

<p>The left side of the fork <code>#:</code> returns the binary expansion of the input; the right side <code>1&amp;=@#@q:</code> produces the prime factors, then tests whether the resulting array contains only a single item (so, whether or not the input is prime). Finally, the middle part of the fork <code>,</code> contains the two results. The result of the fork is reduced with the and operator (<code>*.</code>). Since the 1 less a power of two's binary expansion will only contain ones, we can pretend the binary expansion is actually an array of booleans.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 53 bytes</h1>

<p>52 bytes of code + 1 for <code>-p</code></p>



<pre class="lang-perl prettyprint-override"><code>$f=0|sqrt;1while$_%$f--;$_=!$f*(sprintf'%b',$_)!~/0/
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/18lzdagpriwqMTasDwjMydVJV5VJU1X11ol3lZRJU1Lo7igKDOvJE1dNUldRyVeU7FO30D//3/Tf/kFJZn5ecX/dX1N9QwMDf7rFgAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1>Java 8, <s>53</s> <s>52</s> 49 bytes</h1>

<pre class="lang-java prettyprint-override"><code>n-&gt;{int i=1;for(;n%++i&gt;0;);return(n&amp;n+1|i^n)==0;}
</code></pre>
<p>Bug-fixed and golfed by 4 bytes thanks to <em>@Nevay</em>.</p>
<p><strong>Explanation:</strong></p>
<p><a href="https://tio.run/##nZBfS8MwFMXf9ykuBSWhtjQrOjV032BlsEdRSLtsZLY3JUkHMvvZa/bnURcVkod7z@HwO3cn9iLRncTd@n2sG2EtLITCwwRAoZNmI2oJ5XEEqLRupECoiZcAKffbwX//rBNO1VACQgEjJvPD0aIKxjfaEI43cazmGafcSNcbJHiLMftUb0iLIuPDyM8xXV81PuaSttdqDa2nIStnFG5fXkHQM8rqwzrZprp3aecl1yCJSu3AD620zxCd4L71YVoTRq/r0yxguA8lPORXDD8r0fJU4A6q3l/YF1pIYyWiTJa/azYNcLEQOMtDhlnoeP@s/teqIdAQZx46xSN7uliGyTB@AQ" rel="nofollow noreferrer">Try it here.</a></p>
<pre class="lang-java prettyprint-override"><code>n-&gt;{                // Method with integer parameter and boolean return-type
  int i=1;          //  Temp integer `i`, starting at 1
  for(;n%++i&gt;0;);   //  Loop and increase `i` as long as `n` is divisible by `i`
  return(n&amp;n+1|i^n) //  Then return if `n` bitwise-AND `n+1` bitwise-OR `i` bitwise-XOR `n`
          ==0;      //  is exactly 0
}                   // End of method
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://pyth.readthedocs.io" rel="nofollow noreferrer">Pyth</a>, 8 bytes</h1>

<pre><code>&amp;.AjQ2P_
</code></pre>

<p><strong><a href="https://pyth.herokuapp.com/?code=%26.AjQ2P_&amp;input=31&amp;test_suite=1&amp;test_suite_input=2%0A1%0A20%0A51%0A63%0A3%0A31%0A8191&amp;debug=0" rel="nofollow noreferrer">Verify all the test cases.</a></strong></p>

<h1><a href="https://pyth.readthedocs.io" rel="nofollow noreferrer">Pyth</a>, 8 bytes</h1>

<pre><code>&lt;.&amp;QhQP_
</code></pre>

<p><strong><a href="https://pyth.herokuapp.com/?code=%3C.%26QhQP_&amp;input=31&amp;test_suite=1&amp;test_suite_input=2%0A1%0A20%0A51%0A63%0A3%0A31%0A8191&amp;debug=0" rel="nofollow noreferrer">Verify all the test cases.</a></strong></p>

<hr>

<h1>How?</h1>

<h3>Code Breakdown #1</h3>

<pre><code>&amp;.AjQ2P_    Full program with implicit input.

      P_    Is Prime?
   jQ2      Convert the input to binary as a list of digits.
 .A         All the elements are truthy (i.e. all are 1).
&amp;           Logical AND.
            Output implicitly.
</code></pre>

<h3>How does that work?</h3>

<p>A number of the form <strong><em>2<sup>n</sup> - 1</em></strong> always contains <strong><em>1</em></strong> only when written in binary. Hence, we test if all its binary digits are <strong><em>1</em></strong> and if it is prime.</p>

<h3>Code Breakdown #2</h3>

<pre><code>&lt;.&amp;QhQP_    Full program with implicit input.

      P_    Is Prime?
    hQ      Input + 1.
 .&amp;Q        Bitwise AND between the input and ^.
&lt;           Is smaller than? I.e. The bitwise AND results in 0 and the primality test results in 1.
            Output implicitly.
</code></pre>

<h3>How does that work?</h3>

<p>This tests if the <strong><em>input + 1</em></strong> is a power of two (i.e. if it is a Mersenne number), and then performs the primality test. In Python, <code>bool</code> is a subclass of <code>int</code>, so truthy is treated as <strong><em>1</em></strong> and falsy is treated as <strong><em>0</em></strong>. To avoid checking explicitly that one is <strong><em>0</em></strong> and the other is <strong><em>1</em></strong>, we compare their values using <code>&lt;</code> (since we only have 1 such case).</p>
</div>
<div id="pu19" class="pu"><h2>Scala,  59 Bytes</h2>
<pre><code>def f(t:BigInt)=t.isProbablePrime(t.bitLength*9)&amp;(1+t)%2==0
</code></pre>
<p>This function requires the input to be a <code>BigInt</code>.  You can easily convert a string &quot;162259276829213363391578010288127&quot; (2**107-1 is a Mersenne prime) into <code>BigInt</code> by doing <code>BigInt(&quot;162259276829213363391578010288127&quot;)</code>.
It might go wrong as the name of <code>isProbablePrime()</code> method suggests.  But the probability is not more than <code>0.5^(t.bigLength)*9</code>.</p>
<p>Standalone script version is 72 bytes long.</p>
<pre><code>val t=BigInt(args(0));print(t.isProbablePrime(t.bitLength*9)&amp;(1+t)%2==0)
</code></pre>
<p>Assume we save it as &quot;t.scala&quot;, then then program can be run as</p>
<pre><code>&gt;scala t.scala 162259276829213363391578010288127
&gt;true
</code></pre>
</div>
<div id="pu20" class="pu"><h2>Python, <s>83</s> <s>82</s> <s>79</s> <s>76</s> 73 bytes</h2>

<pre class="lang-python prettyprint-override"><code>def f(m):
 s,n=(m!=3)*4,m&gt;&gt;2
 while-~m&amp;m&lt;n:s,n=(s*s-2)%m,n&gt;&gt;1
 return s&lt;1
</code></pre>

<h2>Python 2, 71 bytes</h2>

<pre class="lang-python prettyprint-override"><code>def f(m):
 s,n=(m!=3)*4,m/4
 while-~m&amp;m&lt;n:s,n=(s*s-2)%m,n/2
 return s&lt;1
</code></pre>

<p>This function implements the <a href="https://en.wikipedia.org/wiki/Lucas%E2%80%93Lehmer_primality_test" rel="nofollow noreferrer">Lucas–Lehmer primality test</a>, so while it isn't as short as some of the other Python offerings it's <em>much</em> faster at handling huge inputs.</p>

<hr>

<p>Here's some test code that runs on Python 2 or Python 3.</p>

<pre class="lang-python prettyprint-override"><code>from __future__ import print_function

def primes(n):
    """ Return a list of primes &lt; n """
    # From http://stackoverflow.com/a/3035188/4014959
    sieve = [True] * (n//2)
    for i in range(3, int(n**0.5) + 1, 2):
        if sieve[i//2]:
            sieve[i*i//2::i] = [False] * ((n - i*i - 1) // (2*i) + 1)
    return [2] + [2*i + 1 for i in range(1, n//2) if sieve[i]]

def lucas_lehmer_old(p):
    m = (1 &lt;&lt; p) - 1
    s = 4
    for i in range(p - 2):
        s = (s * s - 2) % m
    return s == 0 and m or 0

# much faster
def lucas_lehmer(p):
    m = (1 &lt;&lt; p) - 1
    s = 4
    for i in range(p - 2):
        s = s * s - 2
        while s &gt; m:
            s = (s &amp; m) + (s &gt;&gt; p)
    return s == 0 or s == m and m or 0

def f(m):
 s,n=(m!=3)*4,m&gt;&gt;2
 while-~m&amp;m&lt;n:s,n=(s*s-2)%m,n&gt;&gt;1
 return s&lt;1

# Make a list of some Mersenne primes
a = [3]
for p in primes(608):
    m = lucas_lehmer(p)
    if m:
        print(p, m)
        a.append(m)
print()

# Test that `f` works on all the numbers in `a`
print(all(map(f, a))) 

# Test `f` on numbers that may not be Mersenne primes
for i in range(1, 525000):
    u = f(i)
    v = i in a
    if u or v:
        print(i, u, v)
    if u != v:
        print('Error:', i, u, v)
</code></pre>

<p><strong>output</strong></p>

<pre><code>3 7
5 31
7 127
13 8191
17 131071
19 524287
31 2147483647
61 2305843009213693951
89 618970019642690137449562111
107 162259276829213363391578010288127
127 170141183460469231731687303715884105727
521 6864797660130609714981900799081393217269435300143305409394463459185543183397656052122559640661454554977296311391480858037121987999716643812574028291115057151
607 531137992816767098689588206552468627329593117727031923199444138200403559860852242739162502265229285668889329486246501015346579337652707239409519978766587351943831270835393219031728127

True
3 True True
7 True True
31 True True
127 True True
8191 True True
131071 True True
524287 True True
</code></pre>

<p>FWIW, here's a slightly more efficient version of <code>f</code> that doesn't re-test <code>m</code> on every loop:</p>

<pre class="lang-python prettyprint-override"><code>def f(m):
 s,n=m!=3and 4,m&gt;&gt;2
 if-~m&amp;m&lt;1:
  while n:
   s=(s*s-2)%m
   n&gt;&gt;=1
 return s&lt;1
</code></pre>
</div>
<div id="pu21" class="pu"><h1>C, 94 bytes</h1>

<pre><code>g(n,i){return--i?g(2*n,i):n;}n,r;f(x){for(n=r=1;++n&lt;x;)r=x%n?x^g(2,n)-1?r:r|2:r&amp;2;return r&gt;2;}
</code></pre>

<p>Returns 1 if the number is a Mersenne Prime, 0 otherwise.</p>
</div>
<div id="pu22" class="pu"><h1><a href="https://github.com/FTcode/Pushy" rel="nofollow noreferrer">Pushy</a>, 7 bytes</h1>

<pre><code>oBoIpP#
</code></pre>

<p><strong><a href="https://tio.run/nexus/pushy#@5/vlO9ZEKD8//9/C0NLQwA" rel="nofollow noreferrer" title="Pushy – TIO Nexus">Try it online!</a></strong></p>

<p>This takes advantage of the fact that mersenne numbers have only ones in their binary representation:</p>

<pre><code>oB      \ Pop input, push its binary digits.
  oI    \ Re-push the input
    p   \ Test its primality (0/1)
     P# \ Print the product of the stack
</code></pre>

<p>The stack product will only be <code>1</code> if the number has no zeroes in its binary representation, and its primality is <code>True</code>.</p>
</div>
<div id="pu23" class="pu"><h1>PHP, 53 bytes</h1>
<pre class="lang-php prettyprint-override"><code>for($i=$n=$argv[1];--$i&amp;&amp;$n%$i;);echo!($i-1|$n+1&amp;$n);
</code></pre>
<p>takes command line argument; prints <code>1</code> for Mersenne prime, empty string else.
Run with <code>-r</code>.</p>
<p><strong>breakdown</strong></p>
<pre class="lang-php prettyprint-override"><code>for($i=$n=$argv[1];--$i&amp;&amp;$n%$i;);   // loop $i down from $n-1 until $i divides $n
                        // If $n is prime, loop ends with $i=1. ($n=1 -&gt; $i=0)
echo!($i-1|$n+1&amp;$n);    // If $i!=1, $n is not prime. If ($n+1&amp;$n)&gt;0, $n is not Mersenne.
                        // If either $i-1 or $n+1&amp;$n is truthy, the negation will be false.
</code></pre>
</div>
<div id="pu24" class="pu"><h2>Mathematica, <strike>29</strike> 26 bytes</h2>

<p><em>Edit: Saved 3 bytes thanks to Martin Ender</em></p>

<p><strike><code>PrimeQ@#&amp;&amp;IntegerQ@Log2[#+1]&amp;</code></strike></p>

<pre><code>PrimeQ@#&amp;&amp;1&gt;BitAnd[#,#+1]&amp;
</code></pre>

<p>I suspect this would be faster since the first 42 exponents are hard-coded:</p>

<pre><code>MersennePrimeExponentQ@Log2[#+1]&amp;
</code></pre>
</div>
<div id="pu25" class="pu"><h1>Python, 65 bytes</h1>

<pre><code>f=lambda n,i=3:(n^i)-all(n%i for i in range(2,n))&lt;0 or f(n,-~i|i)
</code></pre>

<p>Outputs via Exit Code. Recursion Error for False. No error for True.</p>

<p><strong>How it works</strong></p>

<p>Since <code>2^n-1</code> in binary is made entirely from 1's, the next <code>2^n-1</code> number can be generated by <code>number|number+1</code>. </p>

<p>This function uses this by recursively going through each <code>2^n-1</code>number checking to see if it's a prime number and eqaul to the input. If the number is not a mersenne prime, python will eventually throw an error as the maximum recursion depth would have been exceeded.</p>
</div>
<div id="pu26" class="pu"><h2>Mathematica 26 Bytes</h2>

<pre><code>PerfectNumberQ[# (#+1)/2]&amp;
</code></pre>

<p>See this <a href="https://primes.utm.edu/notes/proofs/EvenPerfect.html">proof</a></p>

<p>Works so long as there are no odd perfect numbers, and none are known to exist.</p>
</div>
<div id="pu27" class="pu"><h2>Racket 76 bytes</h2>

<pre><code>(define(g m)(for/or((i m))(= m(-(expt 2 i)1))))(if(and(prime? n)(g n))#t #f)
</code></pre>

<p>Ungolfed: </p>

<pre><code>(require math)
(define(f n)
  (define (ispowerminus1 m)
    (for/or ((i m))
      (= m (-(expt 2 i)1))))
  (if (and (prime? n)
           (ispowerminus1 n))
      #t #f))
</code></pre>

<p>Testing: </p>

<pre><code>(f 1)
(f 2)
(f 20)
(f 51)
(f 63)
(f 3)
(f 31)
(f 8191)
</code></pre>

<p>Output: </p>

<pre><code>#f
#f
#f
#f
#f
#t
#t
#t
</code></pre>
</div>
<div id="pu28" class="pu"><h1>Ceylon, 66 bytes</h1>
<pre class="lang-ceylon prettyprint-override"><code>Boolean m(Integer c)=&gt;c&gt;2&amp;&amp;c.and(c+1)&lt;1&amp;&amp;!(2:c-2).any((d)=&gt;c%d&lt;1);
</code></pre>
<p>Formatted (and commented):</p>
<pre class="lang-ceylon prettyprint-override"><code>// Check whether a (positive integer) number is a mersenne prime number.
//
// Question:  http://codegolf.stackexchange.com/q/104508/2338
// My Answer: http://codegolf.stackexchange.com/a/104805/2338

Boolean m(Integer c) =&gt;
        // check whether c+1 is a power of two
        c.and(c+1)&lt;1 &amp;&amp;
        // the standard primality check by trial division
         !(2 : c-2).any((d) =&gt; c%d &lt; 1) &amp;&amp;
        // we need to exclude 1, which is unfortunately
        // matched by both criteria above, but is no prime.
        c&gt;1;
</code></pre>
<hr />
<p>With cheating (hardcoding the results in the range of Ceylon's Integer), we can get a byte shorter (65):</p>
<pre class="lang-ceylon prettyprint-override"><code>Boolean h(Integer c) =&gt;
        c.and(c+1)&lt;1 &amp;&amp; #20000000800a20ac.and(c+1)&gt;0;
</code></pre>
<p>(It looks like the syntax highlighter misunderstands Ceylon's hex numerals as start-of-comment.)</p>
<p>If an anonymous function is okay, this one is 49 bytes:</p>
<pre class="lang-ceylon prettyprint-override"><code>[2,3,5,7,13,17,19,31,61].map((p)=&gt;2^p-1).contains
</code></pre>
</div>
<div id="pu29" class="pu"><h2>Jelly, 5 bytes</h2>
<p>Alternate approach to @Dennis' existing 5-byte Jelly answer:</p>
<pre><code>B;ÆPP
</code></pre>
<p><a href="https://tio.run/nexus/jelly#@@9kfbgtIOD///8WhpaGAA" rel="nofollow noreferrer">Try it online!</a></p>
<p>How it works:</p>
<pre><code>B      Returns the binary representation of the input as a list [1, 0, 1, 1, ...]
 ;     And attach to this list 
  ÆP   a 1 if the input is a prime, 0 otherwise
    P  Calculates the product of this list of 1's and 0's
</code></pre>
<p>Since a Mersenne Prime is one less than a power of 2, its binary representation
is excusively 1's. The output therefor is 1 for Mersenne primes, and 0 in all other cases .</p>
</div>
<div id="pu30" class="pu"><h1><a href="https://docs.python.org/">Python</a>, 45 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:-~n&amp;n&lt;all(n%i for i in range(2,n))&lt;n
</code></pre>

<p><a href="https://tio.run/nexus/python3#FchBCsIwEEbhtT3Fv7HMyAhNg6Kl3qSbEY0E0mkJLrry6jFdPd4X8MBUks7Pl8KG889aGzUlsmNEWDIioiGrfd7UizGPVnbedq4CJ@g7waX26llAXuDr3Nzd8dAc1hztS6dZVwqCjbn8AQ" title="Python 3 – TIO Nexus">Try it online!</a></p>

<h3>How it works</h3>

<p>The three terms of the chained comparison</p>

<pre class="lang-python prettyprint-override"><code>-~n&amp;n&lt;all(n%i for i in range(2,n))&lt;n
</code></pre>

<p>do the following:</p>

<ul>
<li><p><code>-~n&amp;n</code> computes the bitwise AND of <strong>n + 1</strong> and <strong>n</strong>. Since <strong>n</strong> consists solely of <strong>1</strong> bits if it is a Mersenne number, the bitwise AND will return <strong>0</strong> if (and only if) this is the case.</p></li>
<li><p><code>all(n%i for i in range(2,n))</code> returns <em>True</em> if and only if <strong>n mod i</strong> is non-zero for all values of <strong>i</strong> in <strong>[2, …, n - 1]</strong>, i.e., if and only if <strong>n</strong> has no positive divisors apart from <strong>1</strong> and <strong>n</strong>.</p>

<p>In other words, <em>all</em> returns <em>True</em> if and only if <strong>n</strong> is a composite number, i.e., <strong>n</strong> is either <strong>1</strong> or a prime.</p></li>
<li><p><code>n</code> is self-explanatory.</p></li>
</ul>

<p>The chained comparison returns <em>True</em> if and only if the individual comparisons do the same.</p>

<ul>
<li><p>Since <em>all</em> returns either <em>True</em>/<strong>1</strong> or <em>False</em>/<strong>0</strong>, <code>-~n&amp;n&lt;all(n%i for i in range(2,n))</code> can only return <em>True</em> if <code>-~n&amp;n</code> yields <strong>0</strong> (i.e., if <strong>n</strong> is a Mersenne number) and <em>all</em> returns <em>True</em> (i.e., if <strong>n</strong> either <strong>1</strong> or a prime).</p></li>
<li><p>The comparison <code>all(n%i for i in range(2,n))&lt;n</code> holds whenever <strong>n > 1</strong>, but since <em>all</em> returns <em>True</em> if <strong>n = 1</strong>, it does not hold in this case.</p></li>
</ul>
</div>
<div id="pu31" class="pu"><h1>Python, 93 Bytes</h1>
<pre><code>def f(a):
 for b in range(a):
  if(a+1==2**b and not[i for i in range(2,a)if a%i&lt;1]):return 1
</code></pre>
<p>This code would work in both Python 2 and Python 3 so I have not specified a version.</p>
</div>
<div id="pu32" class="pu"><h1>Julia, 26 bytes</h1>

<pre><code>n-&gt;isprime(n)&amp;&amp;ispow2(n+1)
</code></pre>
</div>
<div id="pu33" class="pu"><h1><a href="https://github.com/Mego/Seriously" rel="nofollow noreferrer">Actually</a>, 9 bytes</h1>

<pre><code>;├╔'1=@p*
</code></pre>

<p><a href="https://tio.run/nexus/actually#@2/9aMqcR1OnqBvaOhRo/f9vDAA" rel="nofollow noreferrer" title="Actually – TIO Nexus">Try it online!</a></p>

<p>Explanation:</p>

<p>Since every number of the form 2<sup>n</sup>-1 has all 1's in its binary representation, a Mersenne prime can be identified as a prime number with that quality.</p>

<pre><code>;├╔'1=@p*
 ├╔'1=     only unique binary digit is 1
        *  and
;     @p   is prime
</code></pre>
</div>
<div id="pu34" class="pu"><h2>Ruby, 47 bytes</h2>
<pre><code>-&gt;b{!(&quot;%b&quot;%(b/2)=~/0/||(2...b).find{|a|b%a&lt;1})}
</code></pre>
</div>
<div id="pu35" class="pu"><h1><a href="https://github.com/JCumin/Brachylog">Brachylog</a>, 7 bytes</h1>

<pre><code>#p+~^h2
</code></pre>

<p><a href="https://tio.run/nexus/brachylog#@69coF0Xl2H0/7@hkTkA" title="Brachylog – TIO Nexus">Try it online!</a></p>

<p>A Brachylog program is basically a sequence of constraints which form a chain: the first constraint is between the input and an anonymous unknown (let's call it <em>A</em> for the purpose of this discussion), the second constraint is between that anonymous unknown and a second anonymous unknown (which we'll call <em>B</em>), and so on. As such, the program breaks down like this:</p>

<pre><code>#p      Input = A, and is prime
+       B = A + 1
~^      B = X to the power Y, C = the list [X, Y]
h       D = the head of list C (= X)
2       D = 2
</code></pre>

<p>The only way all these constraints can be satisfied simultaneously is if B is a power of 2, i.e. the input is a power of 2 minus 1, and the input is also prime. (Brachylog uses a constraint solver internally, so the program won't be as inefficient as the evaluation order looks; it'll be aware that <code>C</code> is of the form <code>[2, Y]</code> before it tries to express <code>B</code> as the exponentiation of two numbers.)</p>

<p>Interestingly, <code>#p+~^</code> <em>almost</em> works, because Mersenne-like primes can only use 2 as the base in non-degenerate cases (<a href="https://en.wikipedia.org/wiki/Mersenne_prime#Theorems_about_Mersenne_numbers">proof</a>), but a) it fails for non-Mersenne primes <em>B</em>-1 as they can be expressed as <em>B</em>¹, and b) the existing Brachylog interpreter seems to be confused (going into an infinite, or at least long-duration, loop) by a program that's that poorly constrained. So 7 bytes seems unlikely to be beaten in Brachylog.</p>
</div>
<div id="pu36" class="pu"><h2>Pyke, 10 bytes</h2>
<pre><code>_PQb2+}\1q
</code></pre>
<p><a href="http://pyke.catbus.co.uk/?code=_PQb2%2B%7D%5C1q&amp;input=7" rel="nofollow noreferrer">Try it here!</a></p>
<pre><code>_P         -    is_prime(input)
     +     -   ^ + V
  Qb2      -    base_2(input)
      }    -  uniquify(^)
       \1q - ^ == &quot;1&quot;
</code></pre>
</div>
<div id="pu37" class="pu">
<h1><a href="https://perl6.org" rel="noreferrer">Perl 6</a>, 29 bytes</h1>
<pre class="lang-perl6 prettyprint-override"><code>{.base(2)~~/^1*$/&amp;&amp;.is-prime}
</code></pre>
<p><a href="https://tio.run/nexus/perl6#TU/LTgJBELzPV/SB8FCB7unpeYhi4sEv4CZqlB3NJrBLWDAShF/HWSKPS6e6q1JdtaoifNveZKBWCY1itRwoNVtDc1JmEe73m97HexXburPb9V/pqtFvNnt51Z0v8lnc7j/LBUzzIlbtDmwUwKyfBsDrYTbu8mK@Wg7hHsbZ9eE0rq6g1R22avCviT/zOFnGrJY9jxar@Pv0Pq3iS6L7kOyL@FNHSt5raBzFSftYltPb283uwmF70KV0WYzz6Roe6g7t690xSOfm7JDg20BtVVYWsbtMtfPia7DXAN0hHAIokhMGpfFMCJ2x5TNWXDdKa91CMV0sngKdFmW9NS44a5EYLQZHJiQFogsBPXFgTU7bYFgYkQwzisHAwRjLRgJ5EcPkmZOJWBRNWosEa9BaMmISHZzTwTIlNzIevXhkR5qCT0/SR2sNe9LiDGqvAxEJiiM5xfwD" rel="noreferrer" title="Perl 6 – TIO Nexus">Try it</a></p>
<h2>Expanded:</h2>
<pre class="lang-perl6 prettyprint-override"><code>{             # bare block lambda with implicit parameter ｢$_｣

  .base(2)    # is its binary representation ( implicit method call on ｢$_｣ )
   ~~
  /^ 1* $/    # made entirely of ｢1｣s

  &amp;&amp;          # and

  .is-prime   # is it prime

}
</code></pre>
<p>since Perl 6 has arbitrarily large Ints, it doesn't pad the front of <code>.base(2)</code> with <code>0</code>s.</p>
</div>
<div id="pu38" class="pu"><h1>R, <s>41</s> 40 bytes</h1>

<pre><code>matlab::isprime(x&lt;-scan())&amp;!log2(x+1)%%1
</code></pre>

<p>Oddly enough the builtin in R <code>mersenne</code> takes <code>n</code> as argument, not <code>2^n-1</code>. </p>

<p>This takes <code>x</code> from STDIN, checks if it is prime using the <code>matlab</code> package and checks if the 2-log of <code>x+1</code> is a whole number by taking mod 1 and checking for 'not zero-ness'.</p>

<p>Also, if you use the <code>mersenne</code> builtin, it ends up being slightly shorter, but feels like cheating:</p>

<pre><code>numbers::mersenne(log2(scan()+1))
</code></pre>

<p>Saved 1 byte thanks to @Billywob</p>
</div>
<div id="pu39" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E">05AB1E</a>, 5 bytes</h1>

<p>A positive number in the form <strong>2<sup>n</sup> - 1</strong> in binary only consists of <strong>1's</strong>.</p>

<p>Code:</p>

<pre><code>b`¹pP
</code></pre>

<p>Explanation:</p>

<pre><code>b`      # Push each digit of the binary representation of the number onto the stack
  ¹p    # Check if the input is prime
    P   # Take the product of all these digits
</code></pre>

<p>Uses the <strong>CP-1252</strong> encoding. <a href="https://tio.run/nexus/05ab1e#@5@UcGhnQcD//xaGloYA" title="05AB1E – TIO Nexus">Try it online!</a> or <a href="https://tio.run/nexus/05ab1e#qyn7X5mUUFkQ8F/nvxGXoSmXkQGXqSGXmTEXEBpyWRhaGgIA">Verify all test cases</a>.</p>
</div>
<div id="pu40" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly">Jelly</a>, 5 bytes</h1>

<pre><code>&amp;‘&lt;ÆP
</code></pre>

<p><a href="https://tio.run/nexus/jelly#@6/2qGGGzeG2gP@H2x81rQEi9///o410FAxNdRSMDHQUTA11FMyMY3UUoo11FIyBHAtDS8NYAA" title="Jelly – TIO Nexus">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>&amp;‘&lt;ÆP  Main link. Argument: x

 ‘     Yield x+1.
&amp;      Take the bitwise AND of x and x+1.
       This yields 0 iff x is a Mersenne number, i.e., iff x+1 is a power of 2.
   ÆP  Yield 1 if x is a prime, 0 if not.
  &lt;    Compare the results to both sides,
       This yields 1 iff x is both a Mersenne number and a prime.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/104508/">104508</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




