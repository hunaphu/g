<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::273541</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>118</td><td>JavaScript ES7</td><td>240609T170441Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273558#273558">Arnauld</a></td></tr>
<tr d-ix="1"><td>056</td><td>Octave</td><td>240612T021846Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273615#273615">Ka Wa Yi</a></td></tr>
<tr d-ix="2"><td>163</td><td>Scala + scalaz</td><td>240610T085021Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273588#273588">corvus_1</a></td></tr>
<tr d-ix="3"><td>026</td><td>Wolfram Language Mathematica</td><td>240609T220926Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273572#273572">att</a></td></tr>
<tr d-ix="4"><td>053</td><td>Python + SymPy</td><td>240609T031639Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273544#273544">Parcly T</a></td></tr>
<tr d-ix="5"><td>081</td><td>Python + NumPy</td><td>240609T072425Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273546#273546">Albert.L</a></td></tr>
<tr d-ix="6"><td>059</td><td>Charcoal</td><td>240609T085412Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273551#273551">Neil</a></td></tr>
<tr d-ix="7"><td>013</td><td>Vyxal</td><td>240609T080006Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273549#273549">emanresu</a></td></tr>
<tr d-ix="8"><td>015</td><td>05AB1E</td><td>240609T073603Z</td><td><a href="https://codegolf.stackexchange.com/questions/273541/sum-of-square-roots-as-an-algebraic-number/273547#273547">Command </a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES7), 118 bytes</h1>
<p>Returns the coefficients in increasing order.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;(i=n=g=p=&gt;n&gt;&gt;i?p.map(Math.round):g(q=[i=t=0],n=!a.map(v=&gt;t+=v**.5*(n&gt;&gt;i++&amp;1||-1)),p.map(x=&gt;q[n++]+=(q[n]=x)*t)))`1`
</code></pre>
<p><a href="https://tio.run/##TYxBbsIwEEX3OcWUBfLExiJto0qgcVddcoLIEqNAghG1Q3AjpMLZAy5S29W8p///7HngU927Ls582GzHhkYmIxx5aqkj441x753@5E6sOO50H778BhetOFLlKNLcKk9P/FMYyERJQ57rMhdpKOW0uFxmBaJ6vDiTOVZeSitJ3MHSGfOIiOtiPS6rDKAqrUrnWcHLgwoFf5JIQfk/eVXw9uspTJ7ZTDeh/@B6JxjIwPe9UAd/CoetPoRWNIJR74PzYqJggrjMrjjeAA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Method</h3>
<p>We don't have any fancy polynomial built-ins, so this implements the same formula as <a href="https://codegolf.stackexchange.com/a/273547/58563">Command Master</a> with a couple of basic <code>map()</code>'s.</p>
<p>Given an array <span class="math-container">\$a\$</span> of size <span class="math-container">\$S\$</span> and starting with <span class="math-container">\$p_0=1\$</span>, we compute for each <span class="math-container">\$n\in[0\dots 2^S[\$</span>:</p>
<ul>
<li><span class="math-container">\$t=\sum_{0\le i&lt;S}(-1)^{b_i+1}\sqrt a_i\$</span> where <span class="math-container">\$b_i\$</span> is the <span class="math-container">\$i\$</span>-th bit of <span class="math-container">\$n\$</span></li>
<li>for each <span class="math-container">\$i\in[0\dots n[\$</span>, starting with <span class="math-container">\$q_0=0\$</span>:
<ul>
<li><span class="math-container">\$q_i\gets q_i+p_i t\$</span></li>
<li><span class="math-container">\$q_{i+1}\gets p_i\$</span></li>
</ul>
</li>
<li><span class="math-container">\$p\gets q\$</span></li>
</ul>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt; (                   // a[] = input array
  i =                    // i = input size (set after the first iteration)
  n =                    // n = output size - 1 (initially zero'ish)
  g = p =&gt;               // g is a recursive function taking an array p[]
  n &gt;&gt; i ?               // if n = 2 ** i:
    p.map(Math.round)    //   return p[] with all values rounded (this
                         //   also coerces the trailing '1' to an integer)
  :                      // else:
    g(                   //   do a recursive call:
      q = [              //     q[] = new output array initialized to [0]
        i =              //     reset i to 0
        t = 0            //     t = sum of square roots, initialized to 0
      ],                 //
      n = !a.map(v =&gt;    //     for each value v in a[]:
        t += v ** .5 * ( //       add ± sqrt(v) to t
          n &gt;&gt; i++ &amp; 1   //       using the i-th bit of n to determine
          || -1          //       the sign
        )                //       (increment i afterwards)
      ),                 //     end of map() / reset n to 0
      p.map(x =&gt;         //     for each value x in p[]:
        q[n++] += (      //       add x * t to q[n]
          q[n] = x       //       and set q[n + 1] to x
        ) * t            //       (increment n afterwards)
      )                  //     end of map()
    )                    //   end of recursive call
)`1`                     // initial call to g with p = ['1']
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 56 bytes</h1>

<pre class="lang-matlab prettyprint-override"><code>f=@(x)poly((2*(dec2bin(0:2^numel(x)-1)-'0')-1)*sqrt(x)')
</code></pre>
<p><em>Input</em>: a list of integers.</p>
<p><em>Output</em>: a list of coefficients of a polynomial, whose roots are all possible <span class="math-container">\$\pm\$</span> combinations of square roots in input.</p>
<p><a href="https://tio.run/##XU3bCoJAEH33K86LzG6soZYESRH4GWZguguRrbaZFNG326YR0TzMucycmbpo8072vVpt2I03dXVnLJywUhbh/qCZvwx3@nqSlR16AffIpzdOLmfTWot4n2CFRxplAmmIWSbSACPajuij51gMzDqWPWO4KGRVITcmvzuqNjjaM8FyfJVwB7Y6ayWP4zMelGrMQbeKpTCyOeUtI7cEiUCMmY7zTHT8b5e8NegbgDv11U9GvVMctNWUiUHEjtRl/wI" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>Scala + scalaz, 163 bytes</h1>
<pre class="lang-scala prettyprint-override"><code>a=&gt;{def P[A]=scalaz.Scalaz.powerset[A]
val b=P(a map math.sqrt)map(_.sum*2)
P(b.map(_-b(0)/2)).groupMap(_.size)(_.product).toSeq.sortBy(_._1)map(_._2.sum.round)}
</code></pre>
<p>An expression of type <code>Set[Long] =&gt; Seq[Double]</code>, but the resulting values are all integers. This is more or less the same approach as <a href="https://codegolf.stackexchange.com/a/273547">Command Master's 05AB1E answer</a>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 26 bytes</h1>
<pre><code>MinimalPolynomial@Tr@√#&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b73zczLzM3MScgP6cyLz83MzHHIaTI4VHHLGW1/wFFmXkl0cq6dmkOyrFqdcHJiXl11VzVprU6XNVGOsYgylAHygBSOqYwERMdcwgTKAZkctX@BwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Outputs a pure function representing a polynomial.</p>
<p>Extracting the polynomial out of a <a href="https://reference.wolfram.com/language/ref/Root.html" rel="nofollow noreferrer"><code>Root</code></a> obtained from <a href="https://reference.wolfram.com/language/ref/RootReduce.html" rel="nofollow noreferrer"><code>RootReduce</code></a> would be a little shorter than using <a href="https://reference.wolfram.com/language/ref/MinimalPolynomial.html" rel="nofollow noreferrer"><code>MinimalPolynomial</code></a>, but such a <code>Root</code> could potentially simplify back to a <code>Sqrt</code>.</p>
</div>
<div id="pu4" class="pu"><h1>Python + <a href="https://sympy.org" rel="noreferrer">SymPy</a>, 53 bytes</h1>
<p>-6 from xnor</p>
<pre class="lang-python prettyprint-override"><code>lambda l:minpoly(sum(map(sqrt,l)))
from sympy import*
</code></pre>
<p>Function taking a list of the integers and returning a SymPy minimal polynomial.</p>
<p><a href="https://ato.pxeger.com/run?1=LU07CgIxFOz3FK98kVj4CcqCrZdYLSISDOQlb5NskbPYBETv5G0M7jbzg5l5frjkR_D1ZU6X95TN-vhVTtPtrsH1ZD0HVzBNhKQZ0xizdEKIzsRAkApxAUscYl4t5bMJERxYDzioqxy2ctdwI2duKNXi9_LwVy1pSvQdcLQ-o8H2MK_VOvMP" rel="noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 81 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda l:rint(poly(l**.5@(-1)**(r_[:1&lt;&lt;len(l)]&gt;&gt;c_[:len(l)])))
from numpy import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5LDoIwEIb3nKLLTlNNqhINAvEKrpGYKjaSTB-pZcFZ3JAYvZO3sQKb_7WY-Z4f14e7NcNLFad3F9Ri9z2i1JdGEsx8awJ1FnuKjC3TA10IYIz6c5WJPMeboQh1WV5jnwsAJMpbTUynXU9a7awPbD5slPUESWsIrdKaVyu-jir45FF5OvcN344pLjFBlhAspPcygsDeFipaQtyIh9zyP6JoqAX66PTEGkGmr8Mw-Q8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>How?</h2>
<p>Generates what <strike>I guess</strike> with my Galois theory slowly coming back to me I'm now pretty sure are all the conjugates of the sum of square roots (plus some redundant ones if there are redundant square roots in the sum) by flipping or not flipping all possible combinations of signs. Then multiplying all corresponding linear factors (the poly constructor does that), rounding and hoping for the best. Numerical stability looks atrocious, though the test cases which I stole from @Parcly seem to roughly work.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 59 bytes</h1>
<pre><code>ＦＸ²Ｌθ⊞υΣＥθ⎇﹪÷ιＸ²λ²±₂κ₂κＥ⊕Ｌυ﹪%.0fΣＥΦＥＸ²Ｌυ⮌⍘λ²⁼ιΣλΠ∨Ｅ⌕Ａλ1§υν¹
</code></pre>
<p><a href="https://tio.run/##XZBRS8MwFIXf/RWhINxAFDfxaU@TTSg4LatvYw@huWuDWWJvk6q/Pia1KHohkJubc76TNJ2kxkkT48kRg8q9I8FSsEe0re@g55yzKgwdBMHqcIadfINesBckK@kTdk4F46C0fqNHrRC0YD8ehnPBlmk9YSs9Qt0HSbh3zsNrHv3tU60uKtLWT5DSNoRntB4VzGFCFs3E4vL65lT8ZnrQxidq3v5/wyTb44g0INzLAWufKC2YHC7PtimHGXL07Gams4oSp/HwTLO9VWtjsqZYFGm@9qVV@JG/xeb7C/5dqxgPh8S@FezueIxXo/kC" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Originally based on @Albert.Lang's answer, but uses the formula subsequently noted in @CommandMaster's answer.</p>
<pre><code>ＦＸ²Ｌθ⊞υΣＥθ⎇﹪÷ιＸ²λ²±₂κ₂κ
</code></pre>
<p>Calculate all of the conjugates of the sum of square roots.</p>
<pre><code>Ｅ⊕Ｌυ﹪%.0fΣＥΦＥＸ²Ｌυ⮌⍘λ²⁼ιΣλΠ∨Ｅ⌕Ａλ1§υν¹
</code></pre>
<p>For each coefficient, takes all of the ways of choosing that many conjugates, takes the product of each set of conjugates, and takes the sum, then rounds to the nearest integer.</p>
<p>56 bytes using the newer version of Charcoal on ATO:</p>
<pre><code>ＦＸ²Ｌθ⊞υΣＥ₂θ⎇﹪÷ιＸ²λ²±κκＥ⊕Ｌυ﹪%.0fΣＥΦＥＸ²Ｌυ⮌⍘λ²⁼ιΣλΠＥ⌕Ａλ1§υν
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XZDdSsQwEIXx1qcIAWECXdFVQdirFRUKrpStd6UXsZ3-sNnEzc-qz-LNXigKvpFP46QWBQOBYU7ONyfz8lF10lZGqt3uLfhmcv61d9oYyyAzj2hhmrAb1K3vYCOEYFlwHYSE5WENC_kA-SZIi0tjPOkJu0OrpX2GhamDMpBqf9lv-xqhT9gvTwl6OaV7i630CCsqVwQXs_3M9toP4FRXFteoPdYwBgjRN5L5weFRw_9yXPfKEz2W_3MPtiVu0TqEC-kw9zSlBRVDRO2K_qBcjBhpauhlluZUfmTreq5UNPBjTuLcp7rGp7gHLcYze3X3lRtX-F7wyVbx8rMoKMdJws7K8kf5Bg" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Explanation: As above but the newer version of Charcoal can vectorise <code>SquareRoot</code> over a list and can take the <code>Product</code> of an empty list. I could save a further <code>4</code> bytes by not rounding the output (the version of Charcoal on TIO has a bug whereby it incorrectly rounds floating point numbers that are up to <code>5e-16</code> less than an integer).</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 13 bytes</h1>
<pre><code>√:NZΠṠ1v&quot;ƒÞƈ⌊
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJUIiwiIiwi4oiaOk5azqDhuaAxdlwixpLDnsaI4oyKIiwiIiwiWzIsMyw1XSJd" rel="nofollow noreferrer">Try it Online!</a> Takes about 15 seconds for <code>[2, 3, 5]</code>, hence the <code>T</code> flag to stop it timing out. Outputs the polynomial backwards, because it saves a byte. Uses a similar approach to Command Master's answer.</p>
<p>Ideally, I'd just be able to use the builtin <code>∆ṙ</code>, which creates a polynomial from a series of roots. Unfortunately, it's bugged for reasons I don't quite understand, so I have to do it manually with convolutions. This takes a while because sympy isn't particularly good at cancelling out zero expressions (which is also the reason for the <code>⌊</code> at the end).</p>
<pre><code>√             # Square roots of each input
   Z          # Zipped with
 :N           # roots negated
    Π         # Get all possible combinations
     Ṡ        # Sum them
      1v&quot;     # Append 1 to each
         ƒÞƈ  # Fold on convolution
            ⌊ # Floor to remove trailing not-quite-zeros
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, 15 bytes</h1>
<pre><code>tæO·¤;-æ.¡g}POò
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m73MwDQxyTB1wYKlpSVpuhZbSw4v8z-0_dASa93Dy_QOLUyvDfA_vGlJcVJyMVTFgjXRhjoKxjoKpjoK5rEQMQA" rel="noreferrer">Attempt This Online!</a></p>
<p>Computes <span class="math-container">\$(x-\sqrt{a_1}-\sqrt{a_2}-\cdots)(x+\sqrt{a_1}-\sqrt{a_2}-\cdots)(x-\sqrt{a_1}+\sqrt{a_2}-\cdots)(x+\sqrt{a_1}+\sqrt{a_2}-\cdots)\cdots\$</span> using Viete's formulas and rounds. Has time complexity <span class="math-container">\$O(2^{2^n})\$</span>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/273541/">273541</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




