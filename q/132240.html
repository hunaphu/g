<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::132240</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>031</td><td>HTML with Javascript</td><td>170713T143538Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132251#132251">V. Court</a></td></tr>
<tr d-ix="1"><td>034</td><td>PowerShell</td><td>181202T203251Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/176917#176917">GMills</a></td></tr>
<tr d-ix="2"><td>nan</td><td>C gcc + Win32</td><td>170717T152522Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132891#132891">Keyu Gan</a></td></tr>
<tr d-ix="3"><td>156</td><td>WinApi C gcc</td><td>170718T153946Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/133070#133070">Sir Rand</a></td></tr>
<tr d-ix="4"><td>026</td><td>AutoHotkey</td><td>170715T194658Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132614#132614">phil294</a></td></tr>
<tr d-ix="5"><td>019</td><td>TIBASIC</td><td>170715T150356Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132557#132557">bearacud</a></td></tr>
<tr d-ix="6"><td>021</td><td>Bash with X.org</td><td>170713T142659Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132244#132244">enedil</a></td></tr>
<tr d-ix="7"><td>191</td><td>C and Win32</td><td>170714T021040Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132359#132359">MooseBoy</a></td></tr>
<tr d-ix="8"><td>022</td><td>Tcl/Tk</td><td>170714T115353Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132405#132405">manatwor</a></td></tr>
<tr d-ix="9"><td>028</td><td>x86 machine code</td><td>170713T211329Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132330#132330">Margaret</a></td></tr>
<tr d-ix="10"><td>228</td><td>Java 7 or Higher</td><td>170713T143845Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132253#132253">Magic Oc</a></td></tr>
<tr d-ix="11"><td>279</td><td>Scala 2.10+</td><td>170713T163155Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132288#132288">V. Court</a></td></tr>
<tr d-ix="12"><td>nan</td><td>C#</td><td>170713T140958Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132241#132241">TheLetha</a></td></tr>
<tr d-ix="13"><td>369</td><td>Java OpenJDK 8</td><td>170713T143441Z</td><td><a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132247#132247">musicman</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>HTML (with Javascript), <s>46</s> 31 chars, <s>46</s> 31 bytes</h1>
<p><s>Using <a href="https://stackoverflow.com/q/5418313" title="How to differentiate between ‘Enter’ and ‘Return’ keys in JavaScript?">this</a> to differentiate numpad enter and return, LControl and RControl...</s> Not anymore since apsillers found a way to do it with a single function call.</p>
<pre class="lang-html prettyprint-override"><code>&lt;body onkeyup=alert(event.code)
</code></pre>
<p>Specific outputs:</p>
<p><em>Outputs that are still with the numbers are those I can’t test on my laptop. Please wait for me to have access to those keys.</em></p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: left;">description of key</th>
<th style="text-align: left;">printed output</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">PrtScn</td>
<td style="text-align: left;">PrintScreen</td>
</tr>
<tr>
<td style="text-align: left;">Scroll Lock</td>
<td style="text-align: left;">ScrollLock</td>
</tr>
<tr>
<td style="text-align: left;">Pause</td>
<td style="text-align: left;">Pause</td>
</tr>
<tr>
<td style="text-align: left;">left Shift</td>
<td style="text-align: left;">ShiftLeft</td>
</tr>
<tr>
<td style="text-align: left;">right Shift</td>
<td style="text-align: left;">ShiftRight</td>
</tr>
<tr>
<td style="text-align: left;">left Ctrl</td>
<td style="text-align: left;">ControlLeft</td>
</tr>
<tr>
<td style="text-align: left;">right Ctrl</td>
<td style="text-align: left;">ControlRight</td>
</tr>
<tr>
<td style="text-align: left;">Caps Lock</td>
<td style="text-align: left;">CapsLock</td>
</tr>
<tr>
<td style="text-align: left;">Tab</td>
<td style="text-align: left;">Tab</td>
</tr>
<tr>
<td style="text-align: left;">Enter</td>
<td style="text-align: left;">Enter</td>
</tr>
<tr>
<td style="text-align: left;">Enter on the number pad</td>
<td style="text-align: left;">NumpadEnter</td>
</tr>
<tr>
<td style="text-align: left;">Num Lock</td>
<td style="text-align: left;">NumLock</td>
</tr>
<tr>
<td style="text-align: left;">Insert</td>
<td style="text-align: left;">Insert</td>
</tr>
<tr>
<td style="text-align: left;">Ins on the number pad</td>
<td style="text-align: left;">Numpad0</td>
</tr>
<tr>
<td style="text-align: left;">Backspace</td>
<td style="text-align: left;">Backspace</td>
</tr>
<tr>
<td style="text-align: left;">Del</td>
<td style="text-align: left;">Delete</td>
</tr>
<tr>
<td style="text-align: left;">F1 … F12</td>
<td style="text-align: left;">F1 to F12</td>
</tr>
<tr>
<td style="text-align: left;">Esc</td>
<td style="text-align: left;">Escape</td>
</tr>
<tr>
<td style="text-align: left;">left Windows key</td>
<td style="text-align: left;">MetaLeft</td>
</tr>
<tr>
<td style="text-align: left;">right Windows key</td>
<td style="text-align: left;">MetaRight</td>
</tr>
<tr>
<td style="text-align: left;">Alt</td>
<td style="text-align: left;">AltLeft</td>
</tr>
<tr>
<td style="text-align: left;">AltGr</td>
<td style="text-align: left;">AltRight (kind of buggy, it detects ControlLeft and then AltRight, but it is indeed AltRight)</td>
</tr>
<tr>
<td style="text-align: left;">application key (context menu)</td>
<td style="text-align: left;">ContextMenu</td>
</tr>
</tbody>
</table></div>
<h3>Edits:</h3>
<ul>
<li>1 byte saved on <code>;</code> after func call</li>
<li>18 bytes saved thanks to Lil’ Bits and ETHproductions, they noticed I forgot to shorten func and var names.</li>
<li>32 bytes saved thanks to RogerSpielker, he noticed I was doing separated code for no reason; and again −2 bytes: <code>onkeydown</code> → <code>onkeyup</code></li>
<li>1 byte saved: no need for final slash</li>
<li>2 bytes saved thanks to CraigAyre: <code>with()</code> function</li>
<li>2 bytes saved thanks to ASCII‐only: <code>key</code> in place of <code>which</code></li>
<li>4 bytes saved, since we have text, there is no need for <code>'-'+</code> (every identifier is unique without this)</li>
<li>1 byte saved thanks to ASCII‐only (again): no more closing symbol <code>&gt;</code></li>
<li>15 bytes saved thanks to apsillers, as said at the top of my answer</li>
</ul>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false" data-babel-preset-react="false" data-babel-preset-ts="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;body onkeyup=alert(event.code)</code></pre>
</div>
</div>
</p>
</div>
<div id="pu1" class="pu"><h1>PowerShell, 34 bytes</h1>

<pre><code>$Host.UI.RawUI.ReadKey().Character
</code></pre>

<p>Outputs on the same line as the input, which can be a tad confusing.</p>
</div>
<div id="pu2" class="pu"><h1>C (gcc) + Win32, 94 <del>95</del> <del>98</del> <del>105</del> <del>107</del> <del>110</del> bytes</h1>

<pre><code>#import"d3d.h"
j;f(){for(;;)for(j=191;j--;)GetAsyncKeyState(j)&amp;(j&lt;16||j&gt;18)?printf("%d",j):0;}
</code></pre>

<p>The code captures keys even after focus is lost.</p>

<p>The following screenshots are recorded adding spaces between outputs (<code>printf("%d ",j);</code> +1 byte) for better readibility:</p>

<p><a href="https://i.sstatic.net/ZUH6p.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/ZUH6p.png" alt="key screenshot"></a></p>

<p><kbd>Left-ctrl</kbd> <kbd>Left-win</kbd> <kbd>Left-alt</kbd> <kbd>Space</kbd> <kbd>Right-alt</kbd> <kbd>Right-win</kbd> <kbd>Right-menu</kbd> <kbd>Right-ctrl</kbd> <kbd>Left-shift</kbd> <kbd>Z</kbd> <kbd>X</kbd> <kbd>C</kbd> <kbd>Right-shift</kbd> <kbd>Left-shift</kbd> <kbd>1</kbd> <kbd>2</kbd> <kbd>3</kbd> <kbd>Num 1</kbd> <kbd>Num 2</kbd> <kbd>Num 3</kbd> <kbd>Left-shift</kbd> <kbd>+/= (on the main part)</kbd> <kbd>Num +</kbd> <kbd>Left-alt</kbd> <kbd>PrtScn</kbd></p>

<p>The code uses <code>GetAsyncKeyState</code> to query key state without checking message queue, usually more real-time than other user-mode approaches (except DirectInput). This approach is widely used in keyloggers.</p>

<p><code>(j&lt;16||j&gt;18)</code> filters regular Ctrl/Alt/Shift. 16/17/18 is triggered whenever left or right one is pressed, along with location-specified vkey value.</p>
</div>
<div id="pu3" class="pu"><h1>WinApi C (<a href="https://nuwen.net/mingw.html" rel="nofollow noreferrer">gcc</a>), 156 bytes</h1>

<pre><code>#include &lt;d3d.h&gt;
#define b GetStdHandle(-10)
BYTE i[20];main(){SetConsoleMode(b,0);a:ReadConsoleInput(b,i,1,i+5);*i^1||*(i+4)||printf("%X\n",i[10]);goto a;}
</code></pre>

<p>This program prints out the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx" rel="nofollow noreferrer">Windows Virtual-Key Code</a> assciocated with each keyboard key of input. The <code>\n</code> in the <code>printf</code> format-string is optional (but makes output human-friendly) and can be dropped for a total score of <strong>154 bytes</strong>. An easy way to kill the program (without taskmgr) is with <code>CTRL + PAUSE</code>. If you have a keyboard with a Fn key, this program cannot pick it up since it isn't even noticed by Windows.</p>

<ul>
<li>Credit to MooseBoys's answer for the <code>#include &lt;d3d.h&gt;</code> trick and inspiration for the <code>BYTE</code> array.</li>
</ul>

<p>The program with local variables, readability, and without compiler warnings looks like this:</p>

<pre><code>#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;

int main(void)
{
    HANDLE conIn = GetStdHandle(STD_INPUT_HANDLE);
    INPUT_RECORD ir;
    DWORD useless;

    SetConsoleMode(conIn, 0);

    for(;;)
    {
        ReadConsoleInput(conIn, &amp;ir, 1, &amp;useless);

        if(ir.EventType == KEY_EVENT &amp;&amp; !ir.Event.KeyEvent.bKeyDown)
            printf("%X\n", ir.Event.KeyEvent.wVirtualKeyCode);
    }

    return 0;
}
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://autohotkey.com/docs/commands/Input.htm" rel="nofollow noreferrer">AutoHotkey</a>, 26 Bytes</h1>
<pre><code>loop{
input,x,L1M
send %x%
}
</code></pre>
<p>Can't test (win-only), but the <code>M</code> option says</p>
<blockquote>
<p>M: Modified keystrokes such as Control-A through Control-Z are recognized and transcribed if they correspond to real ASCII characters.</p>
</blockquote>
<p>So it should do fine.</p>
</div>
<div id="pu5" class="pu"><h1>TI-BASIC, 19 bytes</h1>

<blockquote>
  <p><strong>PROGRAM:S</strong></p>
</blockquote>

<pre><code>If Ans
Disp Ans
getKey
prgmS
</code></pre>

<ul>
<li>Enter: 105, </li>
<li>Left key: 24, </li>
<li>Right key: 26, </li>
<li>Ins[ert] is a little different because it would normally take two key presses to get to, but those would be 21 followed by 23.</li>
</ul>

<p><strong>Here's an illustration of the rest of the keys:</strong></p>

<p><a href="https://i.sstatic.net/FmFLY.jpg" rel="nofollow noreferrer"><img src="https://i.sstatic.net/FmFLY.jpg" alt="enter image description here"></a></p>

<p><strong>Explanation:</strong> </p>

<blockquote>
  <p><strong>PROGRAM:S</strong>  The editor displays the name at the top apart from the code; the name is "S"</p>
</blockquote>

<pre><code>If Ans    // If the last input isn't zero
Disp Ans  // Display the last input
getKey    // Input a key press
prgmS     // Call the same program in a recursive fashion
</code></pre>

<p>This, unfortunately, isn't possible to do in Arnold C, so I had to stick to TI-BASIC.</p>
</div>
<div id="pu6" class="pu"><h1>Bash with X.org, 21 bytes</h1>

<pre><code>xev|awk 'NR%2&amp;&amp;/\(k/'
</code></pre>

<p>Unfortunately, I can't test it since I'm on MacBook on Linux - no PrntScr, no numeric keyboard &amp;all.</p>

<p><code>xev</code> is a tool that outputs mouse and keyboard events under <code>X.org</code>. I pipe it to awk, filter even lines (since every key is shown when key is pressed, and then when it's released), and select only those that contain <code>(k</code> - this string is in every line that describes pressed key. </p>
</div>
<div id="pu7" class="pu"><h1>C and Win32, <strike>240</strike> <strike>224</strike> <strike>216</strike> <strike>205</strike> <strike>202</strike> <strike>194</strike> 191 bytes</h1>

<pre><code>#include&lt;d3d.h&gt;
#include&lt;stdio.h&gt;
w[9];p(x,y,a,b){printf("%X",a^b);}main(){w[1]=p;w[9]=p;CreateWindow(RegisterClass(w),0,1&lt;&lt;28,0,0,0,0,0,0,0,0);for(;GetMessage(w,0,16,0);)DispatchMessage(w);}
</code></pre>

<h2>Outputs</h2>

<p><kbd>TAB</kbd>: <code>F0008C00F0008</code></p>

<p><kbd>PAUSE</kbd>: <code>450012C0450012</code></p>

<p><kbd>ENTER</kbd>: <code>1C000CC01C000C</code></p>

<p><kbd>NUMPAD-ENTER</kbd>: <code>11C000CC11C000C</code></p>

<p><kbd>WINDOWS-LEFT</kbd>: <code>15B005AC15B005A</code></p>

<p><kbd>WINDOWS-RIGHT</kbd>: <code>15C005DC15C005D</code></p>

<p><kbd>INSERT</kbd>: <code>152002CC152002C</code></p>

<p><kbd>NUMPAD-INSERT</kbd>: <code>52002CC052002C</code></p>

<h2>Explanation</h2>

<pre><code>#include &lt;d3d.h&gt; // shortest built-in header that includes windows.h
#include &lt;stdio.h&gt; // for printf

w[9]; // space for wndclass-data array

// function castable to the signature of WNDPROC
p(x,y,a,b)
{
    // key and state are encoded in the last two 4-byte arguments to wndproc
    printf("%X",a^b);
}

main(m)
{
    // set minimal window class equivalent data pointing to wndproc above
    w[1]=p;w[9]=p;

    // create the window using the class, with WS_VISIBLE flag
    CreateWindow(RegisterClass(w),0,1&lt;&lt;28,0,0,0,0,0,0,0,0)
    for(;GetMessage(w,0,16,0);) // filter messages 15 and lower, which fire without input
        DispatchMessage(w);
}
</code></pre>

<h2>Edits</h2>

<p>-16 thanks to @ugoren</p>

<p>-8: changed <code>WNDCLASS</code> to <code>int</code> array since all 10 members are 4 bytes</p>

<p>-11: partial initialization of wndclass-data array, reduced to 9 elements</p>

<p>-3: use implicit <code>int</code> decl for wndclass-data array</p>

<p>-8: remove newline from output format (not required in spec and printf flushes immediately without it); move <code>RegisterClass</code> into <code>CreateWindow</code> arg, using returned <code>ATOM</code>; set wndclass name to <code>m</code> which just needs a zero-byte in it to be a valid string.</p>

<p>-3: reuse <code>w</code> var for <code>MSG</code> data</p>
</div>
<div id="pu8" class="pu"><h1>Tcl/Tk, 22 characters</h1>

<pre class="lang-tcl prettyprint-override"><code>bind . &lt;Key&gt; {puts %K}
</code></pre>

<p>Sample run:</p>

<p><img src="https://i.sstatic.net/LDeq6.png" alt="keys identified by Tcl/Tk"></p>

<p>Notes:</p>

<ul>
<li>No right Windows key on <a href="https://linustechtips.com/main/uploads/monthly_2016_10/20161011_190137.thumb.jpg.f3aec315be58e07c731a74adb08b5473.jpg" rel="noreferrer">my keyboard</a> ☹ (<s>clever</s> designer put the backlight switch in its place)</li>
<li>The numeric pad's Insert generates different code based on NumLock's status</li>
<li>The volume knob generates X.org specific codes, all other are just regular <a href="http://tcl.tk/man/tcl8.6/TkCmd/keysyms.htm" rel="noreferrer">keysyms</a></li>
</ul>
</div>
<div id="pu9" class="pu"><h2>x86 machine code, DOS executable, <s>29</s><sup>*</sup> 28 bytes</h2>

<pre><code>FAE464D0E873FAE460D0E073F4D41005212192B402CD2188F2CD21EBE3
</code></pre>

<p>This is a <a href="https://en.wikipedia.org/wiki/COM_file" rel="noreferrer">COM executable</a> for <a href="https://en.wikipedia.org/wiki/DOS" rel="noreferrer">MS-DOS</a>, it requires a <a href="https://en.wikipedia.org/wiki/IBM_PC_compatible" rel="noreferrer">IBM PC compatible</a> hardware.<br>
Particularly an <a href="http://wiki.osdev.org/%228042%22_PS/2_Controller" rel="noreferrer">8042 PS/2 controller</a> or more likely an <a href="https://superuser.com/questions/303365/what-does-legacy-usb-mouse-support-in-a-bios-mean">emulation of it</a> through <a href="https://en.wikipedia.org/wiki/System_Management_Mode" rel="noreferrer">SMM</a>.<br>
Long story short, it should work out of the box in any mainstream PC.  </p>

<p>The source code is</p>

<pre><code>BITS 16

 ;Disable the interrupts so we don't compete with the IRQ 1 (the 8042 main
 ;device IRQ) handler (the ISR n. 9 by default) for the reading of the codes.
 cli

_wait:

 ;Is 'Output buffer full (OBF)' bit set?

 in al, 64h                ;Read the 8042 status register             
 shr al, 1                 ;Move bit 0 (OBF) into the carry flag

jnc _wait                  ;Keep spinning if CF = OBF not set

 ;Read the scan code S
 in al, 60h

 ;Is S a break code?

 shl al, 1                 ;Bit 7 is set if it is
jnc _wait

 ;PART 2

 ;AL = S mod 10h := y, AH = S / 10h := x
 aam 16
 add ax, 2121h             ;Make both quantities in the printable ASCII range (skip space though)

 ;Print y
 xchg dx, ax
 mov ah, 02h
 int 21h                   ;int 21/ah=02 prints the char in DL

 ;DH is still valid here, it holds x. We print it now
 mov dl, dh
 int 21h

 ;Never terminate
jmp _wait
</code></pre>

<p>I've divided the program into two parts.  </p>

<p>The first part deals with the reading of the <a href="https://en.wikipedia.org/wiki/Scancode" rel="noreferrer">scancodes</a>. Scancodes are numeric values associated with every key.<br>
Note that these are hardware code, they don't depend on the OS or the charset. They are like an encoded pair (column, row) of the key.<br>
Every key has a scancode, even those non-standard weird function keys found on some keyboard (e.g. the "open calc" key).<br>
Some key has multi-byte scancode, they have prefixes designed to make the stream decodificable by just looking at the sequence of bytes.<br>
So each key gets its unique identifier, even CTRL, SHIFT, WinKeys and so on.</p>

<p>Only the "break codes", sent when a key is released, are processed, the "make codes" are ignored.<br>
The formers have the higher bit (bit 7 for a byte) set, so it's easy to recognise them.  </p>

<p>The second part deals with the printing of a byte.<br>
Printing is always lengthy in assembly, we have no builtins.<br>
To keep it short, and since it was required to write <em>an identifier</em> of the key, I abandoned decimal or hex numerals in favour of a personal encoding.  </p>

<p>A byte xy, where x is the higher nibble and y the lower is printed as two successive chars c<sub>0</sub> and c<sub>1</sub> defined as:</p>

<p>c<sub>0</sub> = 0x21 + y<br>
c<sub>1</sub> = 0x21 + x</p>

<p>Note that the lower nibble is printed <em>first</em> (this spared me a swap).<br>
The rationale is to map the each one of the 16 possible values of a nibble into consecutive ASCII characters from '!'.<br>
Simply put this is a hex numeral but with</p>

<ol>
<li>The nibbles swapped  </li>
<li><code>!"#$%&amp;'()*+,-./01</code> as digit(als) instead of <code>0123456789abcdef</code></li>
</ol>

<p>Running it in <a href="https://www.dosbox.com/" rel="noreferrer">DOSBox</a> and pressing some random key (some of which is a special key but note that as a Windows process DOSBox can't capture all the keys) yields</p>

<p><a href="https://i.sstatic.net/N0vjr.png" rel="noreferrer"><img src="https://i.sstatic.net/N0vjr.png" alt="DOSBox running the key identifier"></a></p>

<p>Note that this program never terminates (further, it takes complete control of the PC by disabling the interrupts) as I believe was intended by the question (simply there is no killing of processes in DOS).  </p>

<hr>

<p><sup>*</sup> Reduced thank to <a href="https://codegolf.stackexchange.com/questions/132240/what-key-did-i-press/132330?noredirect=1#comment324850_132330">CodyGray</a>.</p>
</div>
<div id="pu10" class="pu"><h1>Java 7 or Higher, <s>246</s> 228 bytes</h1>
<pre><code>import java.awt.event.*;class K{public static void main(String[]a){new java.awt.Frame(){{addKeyListener(new KeyAdapter(){public void keyPressed(KeyEvent e){System.out.println(e);}});show();setFocusTraversalKeysEnabled(0&lt;0);}};}}
</code></pre>
<p>Ungolfed:</p>
<pre><code>import java.awt.event.*;
class K{
    static void main(String[]a){
        new java.awt.Frame(){
            {
                addKeyListener(new KeyAdapter(){
                    public void keyPressed(KeyEvent e){
                        System.out.println(e);
                    }
                });
                show();
                setFocusTraversalKeysEnabled(0&lt;0);
            }
        };
    }
}
</code></pre>
<p><em>-18 thanks to @OlivierGrégoire for <code>show()</code>, <code>0&lt;0</code> and <code>import java.awt.event.*;</code></em></p>
<p>Which results in:</p>
<p><a href="https://i.sstatic.net/yHG2T.png" rel="noreferrer"><img src="https://i.sstatic.net/yHG2T.png" alt="enter image description here" /></a></p>
<p>Even handles shift-presses for capitalized characters, the windows key, cap locks, etc... You can see it printing the 'modifiers' as well, which are 'held keys'.</p>
<pre><code>java.awt.event.KeyEvent[KEY_PRESSED,keyCode=27,keyText=Escape,keyChar=Escape,keyLocation=KEY_LOCATION_STANDARD,rawCode=27,primaryLevelUnicode=27,scancode=1,extendedKeyCode=0x1b] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=192,keyText=Back Quote,keyChar='`',keyLocation=KEY_LOCATION_STANDARD,rawCode=192,primaryLevelUnicode=96,scancode=41,extendedKeyCode=0xc0] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=9,keyText=Tab,keyChar=Tab,keyLocation=KEY_LOCATION_STANDARD,rawCode=9,primaryLevelUnicode=9,scancode=15,extendedKeyCode=0x9] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=20,keyText=Caps Lock,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=20,primaryLevelUnicode=0,scancode=58,extendedKeyCode=0x14] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=16,keyText=Shift,keyChar=Undefined keyChar,modifiers=Shift,extModifiers=Shift,keyLocation=KEY_LOCATION_LEFT,rawCode=16,primaryLevelUnicode=0,scancode=42,extendedKeyCode=0x10] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=17,keyText=Ctrl,keyChar=Undefined keyChar,modifiers=Ctrl,extModifiers=Ctrl,keyLocation=KEY_LOCATION_LEFT,rawCode=17,primaryLevelUnicode=0,scancode=29,extendedKeyCode=0x11] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=524,keyText=Windows,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_LEFT,rawCode=91,primaryLevelUnicode=0,scancode=91,extendedKeyCode=0x20c] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=18,keyText=Alt,keyChar=Undefined keyChar,modifiers=Alt,extModifiers=Alt,keyLocation=KEY_LOCATION_LEFT,rawCode=18,primaryLevelUnicode=0,scancode=56,extendedKeyCode=0x12] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=32,keyText=Space,keyChar=' ',keyLocation=KEY_LOCATION_STANDARD,rawCode=32,primaryLevelUnicode=32,scancode=57,extendedKeyCode=0x20] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=18,keyText=Alt,keyChar=Undefined keyChar,modifiers=Alt,extModifiers=Alt,keyLocation=KEY_LOCATION_RIGHT,rawCode=18,primaryLevelUnicode=0,scancode=56,extendedKeyCode=0x12] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=17,keyText=Ctrl,keyChar=Undefined keyChar,modifiers=Ctrl,extModifiers=Ctrl,keyLocation=KEY_LOCATION_RIGHT,rawCode=17,primaryLevelUnicode=0,scancode=29,extendedKeyCode=0x11] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=37,keyText=Left,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=37,primaryLevelUnicode=0,scancode=75,extendedKeyCode=0x25] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=16,keyText=Shift,keyChar=Undefined keyChar,modifiers=Shift,extModifiers=Shift,keyLocation=KEY_LOCATION_RIGHT,rawCode=16,primaryLevelUnicode=0,scancode=42,extendedKeyCode=0x10] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=38,keyText=Up,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=38,primaryLevelUnicode=0,scancode=72,extendedKeyCode=0x26] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=39,keyText=Right,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=39,primaryLevelUnicode=0,scancode=77,extendedKeyCode=0x27] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=96,keyText=NumPad-0,keyChar='0',keyLocation=KEY_LOCATION_NUMPAD,rawCode=96,primaryLevelUnicode=48,scancode=82,extendedKeyCode=0x60] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=110,keyText=NumPad .,keyChar='.',keyLocation=KEY_LOCATION_NUMPAD,rawCode=110,primaryLevelUnicode=46,scancode=83,extendedKeyCode=0x6e] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=10,keyText=Enter,keyChar=Enter,keyLocation=KEY_LOCATION_NUMPAD,rawCode=13,primaryLevelUnicode=13,scancode=28,extendedKeyCode=0xa] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=107,keyText=NumPad +,keyChar='+',keyLocation=KEY_LOCATION_NUMPAD,rawCode=107,primaryLevelUnicode=43,scancode=78,extendedKeyCode=0x6b] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=109,keyText=NumPad -,keyChar='-',keyLocation=KEY_LOCATION_NUMPAD,rawCode=109,primaryLevelUnicode=45,scancode=74,extendedKeyCode=0x6d] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=106,keyText=NumPad *,keyChar='*',keyLocation=KEY_LOCATION_NUMPAD,rawCode=106,primaryLevelUnicode=42,scancode=55,extendedKeyCode=0x6a] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=34,keyText=Page Down,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=34,primaryLevelUnicode=0,scancode=81,extendedKeyCode=0x22] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=33,keyText=Page Up,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=33,primaryLevelUnicode=0,scancode=73,extendedKeyCode=0x21] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=35,keyText=End,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=35,primaryLevelUnicode=0,scancode=79,extendedKeyCode=0x23] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=36,keyText=Home,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=36,primaryLevelUnicode=0,scancode=71,extendedKeyCode=0x24] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=127,keyText=Delete,keyChar=Delete,keyLocation=KEY_LOCATION_STANDARD,rawCode=46,primaryLevelUnicode=0,scancode=83,extendedKeyCode=0x7f] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=155,keyText=Insert,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=45,primaryLevelUnicode=0,scancode=82,extendedKeyCode=0x9b] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=123,keyText=F12,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=123,primaryLevelUnicode=0,scancode=88,extendedKeyCode=0x7b] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=122,keyText=F11,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=122,primaryLevelUnicode=0,scancode=87,extendedKeyCode=0x7a] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=121,keyText=F10,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=121,primaryLevelUnicode=0,scancode=68,extendedKeyCode=0x79] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=120,keyText=F9,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=120,primaryLevelUnicode=0,scancode=67,extendedKeyCode=0x78] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=119,keyText=F8,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=119,primaryLevelUnicode=0,scancode=66,extendedKeyCode=0x77] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=118,keyText=F7,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=118,primaryLevelUnicode=0,scancode=65,extendedKeyCode=0x76] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=117,keyText=F6,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=117,primaryLevelUnicode=0,scancode=64,extendedKeyCode=0x75] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=116,keyText=F5,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=116,primaryLevelUnicode=0,scancode=63,extendedKeyCode=0x74] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=115,keyText=F4,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=115,primaryLevelUnicode=0,scancode=62,extendedKeyCode=0x73] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=114,keyText=F3,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=114,primaryLevelUnicode=0,scancode=61,extendedKeyCode=0x72] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=113,keyText=F2,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=113,primaryLevelUnicode=0,scancode=60,extendedKeyCode=0x71] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=112,keyText=F1,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_STANDARD,rawCode=112,primaryLevelUnicode=0,scancode=59,extendedKeyCode=0x70] on frame0
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Scala 2.10+, 279 chars, 279 bytes</h1>
<p>Now this is a scala response :) even though it feels like I'm doing Java.
Anyway we can't test it on TIO.</p>
<pre><code>import scala.swing._
import java.awt.event._
object M extends SimpleSwingApplication{def top=new MainFrame{this.peer.addKeyListener(new KeyListener(){def keyPressed(e:KeyEvent){print(e.getKeyCode+&quot;-&quot;+e.getKeyLocation)}
def keyReleased(e:KeyEvent){}
def keyTyped(e:KeyEvent){}})}}
</code></pre>
<p>It's sad we need to declare all inherited methods even if we don't use them :l can I remove them from byte count, since some compiler flags can permit not declaring them?</p>
<p>This prints (as for my html-js response) the keyPressed, &quot;-&quot; and then its &quot;location&quot;.</p>
<p>For instance :</p>
<p>PrtScn -&gt; not verifyable<br />
Scroll Lock -&gt; 145-1<br />
Pause -&gt; 19-1<br />
left Shift -&gt; 16-2<br />
right Shift -&gt; 16-3<br />
left Ctrl -&gt; 17-2<br />
right Ctrl -&gt; 17-3<br />
Caps Lock -&gt; 20-1<br />
Tab -&gt; not verifyable<br />
Enter -&gt; 10-1<br />
Enter on the number pad -&gt; 10-4<br />
Num Lock -&gt; 144-4<br />
Insert -&gt; 96-1<br />
Ins on the number pad -&gt; 96-4<br />
Backspace -&gt; 8-1<br />
Del -&gt; 127-1<br />
F1...F12 -&gt; 112-1 to 123-1<br />
Esc -&gt; 27-1<br />
left Windows key -&gt; 524-2<br />
right Windows key -&gt; 524-3<br />
Alt -&gt; 18-2<br />
AltGr -&gt; 18-3 (kind of buggy, it detects 17-2 and then 18-3, but it is indeed 18-3)<br />
application key (context menu) -&gt; 525-1</p>
<p>Though I think it depends on the computer :/ I'm on an azerty laptop right now.</p>
</div>
<div id="pu12" class="pu"><h1>C#, 144 + 601 = 745 bytes</h1>



<p>Consists of two classes, I couldn't manage to successfully combine them into one class. </p>

<p>Main class:</p>

<pre class="lang-c# prettyprint-override"><code>namespace System.Windows.Forms{class P:Form{static void Main(){Application.Run(new P());}P(){new Reflection.M().U+=k=&gt;Console.Write(k.f+k.v);}}}
</code></pre>

<p>Hook class:</p>

<pre class="lang-c# prettyprint-override"><code>namespace System.Reflection{using Runtime.InteropServices;public class M{public delegate void d(s s);event d u;public event d U{add{if(h&lt;1){j=m;h=SetWindowsHookEx(13,j,Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()[0]),0);}u+=value;}remove{u-=value;}}public struct s{public int v;public int c;public int f;}[DllImport("user32.dll")]static extern int SetWindowsHookEx(int idHook,p lpfn,IntPtr hMod,int dwThreadId);delegate int p(int c,int w,IntPtr l);p j;int h;int m(int c,int w,IntPtr l){if(c&gt;=0&amp;u!=null&amp;(w==257|w==261))u.Invoke((s)Marshal.PtrToStructure(l,typeof(s)));return -1;}}}
</code></pre>

<p>Outputs:</p>

<ul>
<li>Tab: <code>137</code></li>
<li>Pause: <code>147</code></li>
<li>Enter: <code>141</code></li>
<li>NumPad Enter: <code>142</code></li>
<li>Left Windows: <code>220</code></li>
<li>Right Windows: <code>221</code></li>
<li>Insert: <code>174</code></li>
<li>NumPad Insert: <code>224</code></li>
</ul>
</div>
<div id="pu13" class="pu"><h1><a href="http://openjdk.java.net/" rel="nofollow noreferrer">Java (OpenJDK 8)</a>, 369 bytes</h1>



<pre class="lang-java prettyprint-override"><code>import java.awt.event.*;import javax.swing.*;class F{public static void main(String[] a){JFrame f=new JFrame();f.addKeyListener(new KeyListener(){public void keyPressed(KeyEvent e){System.out.print(e.getKeyCode()*8+e.getKeyLocation());}public void keyTyped(KeyEvent e){}public void keyReleased(KeyEvent e){}});f.setVisible(true);f.setFocusTraversalKeysEnabled(false);}}
</code></pre>

<p>This cannot be run with TIO because it uses a graphical interface, but it works on my computer.</p>

<pre>
Pause: 153
Enter: 81
Enter on NumPad: 84
Left Super key: 193 (After disabling the Menu shortcut for my desktop)
Right Super key: 201
Insert: 241
Insert on Numpad: 522948 (I don't have one, but that's what you get when you press 5 with Num lock off. When Num lock is on, you get 812.)
</pre>

<h1>Ungolfed / Explanation:</h1>

<pre class="lang-java prettyprint-override"><code>import java.awt.event.*; // KeyListener, KeyEvent
import javax.swing.*; // JFrame

class F implements KeyListener {

    public static void main(String[] a) {
        JFrame f=new JFrame(); // creates a new GUI frame
        f.addKeyListener(new KeyListener() {  // puts a KeyListener in the frame with the following properties:

            // Method that runs whenever a key is pressed
            public void keyPressed(KeyEvent e) {
                // getKeyCode returns an integer that uniquely identifies the key,
                // but not the location (e.g. LShift and RShift have the same key code)
                // To fix this, I scale up the key code by 8 and add the location,
                // which is always 0-4 (Standard, Left, Right, NumPad, or Unknown)
                // I could have scaled by 5 instead but I wasn't really thinking
                System.out.print(e.getKeyCode() * 8 + e.getKeyLocation());
                // If you want nicer-looking output, just change "print" to "println"
            }

            // Method that runs whenever a printable character is typed (does nothing)
            public void keyTyped(KeyEvent e){}

            // Method that runs whenever a keyboard key is released (does nothing)
            public void keyReleased(KeyEvent e){}
        });

        f.setVisible(true); // the frame will only except key presses if it is visible
        f.setFocusTraversalKeysEnabled(false); // disables "focus traversal" keys (such as Tab) from actually traversing focus
    }
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/132240/">132240</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




