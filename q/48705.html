<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::48705</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>012</td><td>K ngn/k</td><td>230803T053802Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263652#263652">Bubbler</a></td></tr>
<tr d-ix="1"><td>053</td><td>K ngn/k</td><td>230803T014637Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263651#263651">doug</a></td></tr>
<tr d-ix="2"><td>048</td><td>JavaScript Node.js</td><td>230803T004528Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263649#263649">l4m2</a></td></tr>
<tr d-ix="3"><td>079</td><td>Scala</td><td>230802T041850Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263621#263621">138 Aspe</a></td></tr>
<tr d-ix="4"><td>070</td><td>JavaScript</td><td>230724T093726Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263245#263245">bsoelch</a></td></tr>
<tr d-ix="5"><td>005</td><td>Vyxal</td><td>230724T070456Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263240#263240">emanresu</a></td></tr>
<tr d-ix="6"><td>011</td><td>J</td><td>230724T063802Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/263239#263239">Bubbler</a></td></tr>
<tr d-ix="7"><td>035</td><td>05AB1E</td><td>190119T020330Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/178920#178920">Wisław</a></td></tr>
<tr d-ix="8"><td>166</td><td>JavaScript</td><td>150410T204552Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48725#48725">GiantTre</a></td></tr>
<tr d-ix="9"><td>054</td><td>Matlab</td><td>150410T183734Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48719#48719">flawr</a></td></tr>
<tr d-ix="10"><td>015</td><td>Pyth</td><td>150411T072935Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48740#48740">xnor</a></td></tr>
<tr d-ix="11"><td>050</td><td>Haskell</td><td>180801T120020Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/169708#169708">ბიმო</a></td></tr>
<tr d-ix="12"><td>046</td><td>Mathematica</td><td>150413T035133Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48800#48800">alephalp</a></td></tr>
<tr d-ix="13"><td>049</td><td>Python 2</td><td>150410T223416Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48730#48730">xnor</a></td></tr>
<tr d-ix="14"><td>098</td><td>Python 2</td><td>150410T154426Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48710#48710">grc</a></td></tr>
<tr d-ix="15"><td>021</td><td>CJam</td><td>150410T181706Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48717#48717">Runer112</a></td></tr>
<tr d-ix="16"><td>074</td><td>Haskell</td><td>150410T173957Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48714#48714">nimi</a></td></tr>
<tr d-ix="17"><td>049</td><td>dc</td><td>150410T170941Z</td><td><a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/48713#48713">Digital </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 12 bytes</h1>
<pre><code>-2/+2 2\0,4\
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700Oz4vPW_BgqWlJWm6FuvSrHSN9LWNFIxiDHRMYiCCOwwNDBRsFZRtFdLUFRSBHC4oDZGG6QUA" rel="nofollow noreferrer">Attempt This Online!</a> (ATO because the original ngn/k page isn't working at the time of posting)</p>
<p>Uses bit halving followed by base -2. <code>0,</code> is necessary to get <code>0 0</code> for input <code>0</code>.</p>
<pre><code>-2/+2 2\0,4\
          4\    convert to base 4
        0,      prepend a 0
    2 2\        convert each to base 2, forcing two bits per a base-4 digit
                (base conversion happens column-wise, so the result here is
                 a two-row matrix)
   +            transpose
-2/             evaluate each column in base -2
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>72</s> <s>68</s> <s>66</s> <s>62</s> 53 bytes</h1>
<pre><code>{(-|:)/[0&lt;d;0,d:m*x-1+s*s-1]+(m:*/s#-1)*2#-2!s:-_-%x}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs6rW0K2x0tSPNrBJsTbQSbHK1arQNdQu1irWNYzV1si10tIvVtY11NQyUtY1Uiy20o3XVa2o5eKyKrJKUzfUVjQ0MuVy0De0sYop4gIAAckSxQ==" rel="nofollow noreferrer">Try it online!</a></p>
<p>-4 : Squeezed out a few bytes<br/>
-2 : A couple more<br/>
-4 : Oh yeah, we’re golfing…<br/>
-9 : Forgot ngn/k has sqrt</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 48 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>f=(x,y)=&gt;x&amp;1?f(x/2,-~y):[x/2,y].map(t=&gt;t/2^-t%2)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGCpaUlaboWNw3SbDUqdCo1be0q1Azt0zQq9I10dOsqNa2iQazKWL3cxAKNElu7En2jON0SVSNNqD7NtPwijZzUEoVsWwPrbBsjU-tsbW1NLgWF5Py84vycVL2c_HSNNI1sTagGmIUA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 79 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/169708/110802">@ბიმო's Haskell answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##XU@xboNADN3zFU9RhjsJUJKRFqSOGTpFVYeI4QomcXs96OFWpBHfTo9Tpg6237Of5eehNtbM3ds71YJnww63FdBQi89AlPHnIceT9@Z6Oopnd650jhfHgiIqgR9j0eYHJ0V5cA2N1Bzp67SECs0EIemqQjG7omw7f@PHdAvp4B7GO@LpymQbhB2lxoTTUSehjuku5YBC@UcWhZ7j9VbttzprrREhl/1y/8pyiT4yMR@k9rsw7TyZ@nL3C9RmICj57i0l4EWrUZTow3tinRrWm9jMsYmatY5702qJaf4D" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>n=&gt;for{i&lt;-0 to n;x&lt;-0 to i}yield Seq((x,i-x),(x,x-1-i),(-1-x,x-1-i),(-1-x,i-x))
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##dY9BS8NAEIXv@RWP0sMuNKHtMVjBo6AnEQ/iYUwm7eq6CbtTSZX@9ri7Kb15ePDm483wJjRkaZr69w9uBI9kHH4LoOUOX3FQ5Pehxp33dHp9Em/c/k3XeHZGsMtJ4JssPIejTajr/QUDBjcl1pAe2/UFjVdkMjnjZNi2eDBBlBpXcafEqFdIfox@E2XSXCb3H5y3dJFvzl2qzpIIu@rHDC9GDveu5bES@mS13egq9mRqDteuDQWGkuNgOZ5LWY3dLYb4sVinwmKZYY1lziz0XL9IOhfT9Ac" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def main(args: Array[String]): Unit = {
    val result = for {
      i &lt;- 0 to 20
      x &lt;- 0 to i
    } yield List((x, i - x), (x, x - 1 - i), (-1 - x, x - 1 - i), (-1 - x, i - x))

    result.flatten.zipWithIndex.take(21).foreach {
      case (tuple, index) =&gt; println(s&quot;$index: $tuple&quot;)
    }
  }
}
</code></pre>
</div>
<div id="pu4" class="pu"><h1>JavaScript, <s>77</s> 70 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>Z=x=&gt;(x&amp;1n?x:-x)/2n
f=(x,y=1n)=&gt;++x&amp;1n?[Z(++x/2n),Z(y)]:f(x/2n-1n,++y)
</code></pre>
<p>Takes a BigInt as Input.</p>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGCpaUlaboWN92ibCts7TQq1Azz7CusdCs09Y3yuNJsNSp0Km0N8zRt7bS1wXLRURpAFlBSUydKo1Iz1ipNA8TTNczT0dau1ISapp2WX6SRk1qikG1rkGedbWNkCiS1tTW5FBSS8_OK83NS9XLy0zXSNLI1oVpgDgEA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>First few values:</p>
<pre class="lang-javascript prettyprint-override"><code>f(0n)=[0n,0n]
f(1n)=[0n,-1n]
f(2n)=[-1n,0n]
f(3n)=[0n,1n]
f(4n)=[1n,0n]
f(5n)=[-1n,-1n]
...
</code></pre>
<p>Explanation:</p>
<p>Uses more or less the same algorithm as <a href="https://codegolf.stackexchange.com/questions/48705/generate-a-pair-of-integers-from-a-non-negative-one/178920#178920">Wislaw's solution</a>:</p>
<p><code>Z</code> is the standard bijection from the positive integers to the integers.</p>
<p><code>f</code> computes positive integers <code>k</code> and <code>m</code> with <code>x+1=2^(k-1)*(2m-1)</code>
(which is a bijection <span class="math-container">\$\mathbb{N} \to \mathbb{N}_{&gt;0} \times \mathbb{N}_{&gt;0}\$</span> by the uniqueness of prime factorizations) and then outputs the pair <code>Z(m),Z(k)</code></p>
<hr />
<h1>JavaScript, 65 bytes</h1>
<p>bijection <span class="math-container">\$\mathbb{N}_{&gt;0} \to \mathbb{Z} \times \mathbb{Z}\$</span></p>
<pre class="lang-javascript prettyprint-override"><code>Z=x=&gt;(x&amp;1n?x:-x)/2n
f=(x,y=1n)=&gt;x&amp;1n?[Z(++x/2n),Z(y)]:f(x/2n,++y)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGCpaUlaboWNx2jbCts7TQq1Azz7CusdCs09Y3yuNJsNSp0Km0N8zRt7cAy0VEa2toVQClNnSiNSs1YqzQNEE9HW7tSE2qQdlp-kUZOaolCNlCfdbaNkSmQ1NbW5FJQSM7PK87PSdXLyU_XSNPI1oRqgbkBAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 5 bytes</h1>
<pre><code>Þn:Ẋi
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyIiLCIiLCLDnm464bqKaSIsIiIsIjUiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>Þn    # All integers
  :Ẋ  # Cartesian product with self
    i # Index input into that
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, 11 bytes</h1>
<pre><code>_1j1+.@#.#:
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FOJT0F9TQFWysFdR0FAwUrINbVU3AO8nFbWlqSpmuxOt4wy1Bbz0FZT9kKIrJBk4srNTkj3yFNzU4hU8_YCCK8YAGEBgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Uses <a href="https://en.wikipedia.org/wiki/Complex-base_system#Binary_systems" rel="nofollow noreferrer">complex base</a> <code>-1 + i</code> to generate a Gaussian integer from the binary representation of the given nonnegative integer.</p>
<pre><code>_1j1+.@#.#:
         #:  Convert to binary
_1j1   #.    Evaluate the binary sequence as base -1 + i
    +.@      Take apart its real and imaginary parts
</code></pre>
<p>If outputting a complex number were allowed, it would be 8 bytes (delete <code>+.@</code>).</p>
<p>I couldn't find a complete proof that this conversion is bijective, but <a href="https://codegolf.stackexchange.com/q/76062/78410">this challenge</a> mentions it, and I think the following argument is enough to prove it:</p>
<blockquote>
<p>Given a Gaussian integer, the lowest bit of base <code>-1 + i</code> representation is determined by <code>(real+imag)%2</code>. Subtract it and divide by <code>-1 + i</code>, and you always get another Gaussian integer with smaller magnitude (at least until it becomes small enough, at which point the proof can be done individually). This conversion algorithm is deterministic and finite, and defines an inverse of conversion from binary to Gaussian using base <code>-1 + i</code>.</p>
</blockquote>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 35 bytes</h1>

<pre><code>&gt;©DÝʒo®sÖ}àsÅÉʒ®sÖ}à&lt;2÷‚εDÈi2÷ë&gt;2÷(
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f/f7tBKl8NzT03KP7Su@PC02sMLig@3Hu48NQnGtTE6vP1Rw6xzW10Od2QC2YdX2wFJjf//zQE" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a> or as <a href="https://tio.run/##NY2/SgNBHIRfJaSy@Ir9/dnbXZCkubcQCwWLVCkOhBQHNgZtr7AQAmlFsBP7bJfCh8iLnNvYDDMfzMx2uLvfPMyPu35enT76ejhP29PXUN/Gehzqc309T//xWuvP5en997uvL5vm6@eq6dU8jrv1cnHZT4vlmvkmICiGE@lIZArSoCCKGOJIRDokIRkpaEBbR1FDHY1ohyY0owULmGBt0jDHItZhCctYwQMuuOLt0fGId3jCM16I4fYP" rel="nofollow noreferrer" title="05AB1E – Try It Online">Test suite</a></p>

<h2>Explanation</h2>

<p>Consider</p>

<p><span class="math-container">$$\begin{align*}
f: \mathbb{N} &amp;\longrightarrow \mathbb{N} \times \mathbb{N} \\
n&amp;\longmapsto (x,y)\, ,
\end{align*}
$$</span>
where <span class="math-container">\$x\$</span> is the largest number so that <span class="math-container">\$2^x\$</span> divides <span class="math-container">\$n+1\$</span>, and where <span class="math-container">\$2y+1\$</span> is the largest odd number which divides <span class="math-container">\$n+1\$</span>. The inverse of <span class="math-container">\$f\$</span> is the well-known bijection <span class="math-container">\$f^{-1}(x,y) = 2^x(2y+1)-1\$</span>.</p>

<p>Then consider
<span class="math-container">$$\begin{align*}
g: \mathbb{N} \times \mathbb{N} &amp;\longrightarrow \mathbb{Z} \times \mathbb{Z} \\
(m,n)&amp;\longmapsto (h(m),h(n))\, ,
\end{align*}
$$</span>
where
<span class="math-container">$$\begin{align*}
h: \mathbb{N}  &amp;\longrightarrow \mathbb{Z} \\
n&amp;\longmapsto \begin{cases}\frac n2, &amp; n \text{ even}\\ -\frac{n+1}2, &amp; n \text{ odd}\end{cases}\, .
\end{align*}
$$</span>
Since <span class="math-container">\$f\$</span>, <span class="math-container">\$g\$</span> and <span class="math-container">\$h\$</span> all are bijections, the composition <span class="math-container">\$g\circ f:\mathbb{N} \longrightarrow \mathbb{Z} \times \mathbb{Z}\$</span> is a bijection.</p>

<p>The program simply computes <span class="math-container">\$g\circ f\$</span>.</p>

<pre><code>&gt;©DÝʒo®sÖ}àsÅÉʒ®sÖ}à&lt;2÷‚εDÈi2÷ë&gt;2÷( # Full program

                                    # Implicit input: Integer n
&gt;©                                  # Compute n+1 and save it to the register
  DÝ                                # Duplicate n+1 and push the list [0,...,n+1]
    ʒo®sÖ}                          # Only keep those numbers x so that 2^x divides n+1
          à                         # Get maximum element in the list.
           sÅÉ                      # Swap so that n+1 is on top and push [1,3,5,...,n+1]
              ʒ®sÖ}                 # Only keep those numbers z which divides n+1
                   à&lt;2÷             # Compute y = (z-1)/2
                       ‚            # Push the pair [x,y]
                        ε           # Apply the function h to x (and y):
                           i        # if...
                         DÈ         # x is even
                            2÷      # then compute x/2
                              ë&gt;2÷( # else compute -(x+1)/2
                                    # Implicit output: [h(x),h(y)]
</code></pre>
</div>
<div id="pu8" class="pu"><h1>JavaScript, 166 <strike>168</strike> bytes/characters</h1>

<p>New approach using a rectangular spiral like others are using.</p>

<pre><code>function f(n){return b=Math,k=b.ceil((b.sqrt(n)-1)/2),t=2*k+1,m=b.pow(t,2),t+=4,m-t&gt;n?(m-=t,m-t&gt;n?(m-=t,m-t&gt;n?[k,k-(m-n-t)]:[-k+(m-n),k]):[-k,-k+(m-n)]):[k-(m-n),-k]}
</code></pre>

<p>I used <a href="https://math.stackexchange.com/a/163101">this</a> answer on Math.SE, translated it to JS and compressed it using <a href="http://lisperator.net/uglifyjs/#demo" rel="nofollow noreferrer">UglifyJS</a>.</p>

<p>This approach does not use any loops nor does it create the spiral in any way.</p>

<p>Because the spiral's coordinates cover all integers the function is bijective in the sense of \$f:\mathbb{N}^0\rightarrow \mathbb{Z}^2\$.</p>

<p><strong>Update:</strong>
Saved 2 characters by storing <code>Math</code> in <code>b</code>.</p>

<p><strong>Update 2:</strong>
Replaced <code>t-=1</code> with <code>t+=4</code> to fix the issue that caused \$f(0)=f(8)\$. This does not generate a spiral anymore but works for all non-negative integers \$\mathbb{N}^0\$ (all natural numbers including \$0\$).</p>
</div>
<div id="pu9" class="pu"><h1>Matlab, 54 bytes</h1>
<pre><code>n=input('')+1;[i,j]=find(spiral(2*n)==n);disp([i,j]-n)
</code></pre>
<p>The key here is <code>spiral</code>, this creates a spiral matrix of an arbitrary size.</p>
<pre><code>spiral(3)
</code></pre>
<p>returns</p>
<pre><code>ans =

 7     8     9
 6     1     2
 5     4     3
</code></pre>
<p>In Matlab, this works for integers, but you will get memory issues way before that, (well, I am assuming you  as the command <code>spiral</code> creates a full matrix first, that has size of about <span class="math-container">\$4n^2\$</span>. At around <span class="math-container">\$n \simeq 10^4\$</span> this matrix takes up more than 1GB of space. So with 1TB of RAM you will get to around <span class="math-container">\$n \simeq 10^5\$</span>, and about <span class="math-container">\$2.9\cdot 10^{11}\$</span> GB  of RAM will get you to <span class="math-container">\$n=2^{32}\$</span>.</p>
</div>
<div id="pu10" class="pu"><h1>Pyth, 15</h1>

<pre><code>u,-HyeGhGjQ2,ZZ
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=u%2C-HyeGhGjQ2%2CZZ&amp;input=19" rel="nofollow noreferrer">Try it online.</a></p>

<pre><code>u             reduce
                lambda G,H:    [implicit]
  ,-HyeGhG         (H-2*G[-1],G[0])
  jQ2           base(input(),2)
  ,ZZ           (0,0)
              print result     [implicit]
</code></pre>

<p>A Python translation:</p>

<pre class="lang-python prettyprint-override"><code>g=lambda Z,n:(n-2*Z[1],Z[0])
print reduce(g,binlist(input()),(0,0))
</code></pre>

<p>or iteratively:</p>

<pre class="lang-python prettyprint-override"><code>(x,y)=(0,0)
for b in binlist(input()):
    (x,y)=(b-2*y,x)
print (x,y)
</code></pre>

<p>where <code>binlist</code> converts a number to a list of digits like <code>binlist(4) = [1,0,0]</code>.</p>

<p>So, how does this work? It interprets the binary digits of the number \$n\$ as two interleaved numbers in <a href="http://en.wikipedia.org/wiki/Negative_base" rel="nofollow noreferrer">base negative two</a> like in my <a href="http://codegolf.stackexchange.com/a/48730/20260">Python solution</a>.</p>

<p>The binary number $$n=\dots b_5 b_4 b_3 b_2 b_1 b_0 $$ corresponds to the pair $$ (x,y) = (b_0 - 2 b_2 + 4 b_4 - 8 b_6 + \cdots, b_1 - 2 b_3 + 4 b_5 - 8 b_7 + \cdots).$$</p>

<p>If we hadn't yet processed the last digit \$b_0\$ of \$n\$, we'd have all indices higher by $1$, $$n'=\dots b_5 b_4 b_3 b_2 b_1 $$ corresponding to the pair $$ (x',y') = (b_1 - 2 b_3 + 4 b_5 - 8 b_7 + \cdots, b_2 - 2 b_4 + 4 b_6 - 8 b_8 + \cdots).$$</p>

<p>We can then express the new values once \$b_0\$ is read in terms of the old values </p>

<p>$$(x,y) = (b_0 - 2y', x').$$</p>

<p>So, by repeatedly performing the transformation \$(x,y) \to (b - 2y, x)\$ on each successive bit \$b\$ of \$n\$, we build the point \$(x,y)\$ that comes from extracting its digits.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 50 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>(0!).succ
l!n=(last$(!).succ:[(,)|odd n])l$div n 2
</code></pre>

<p><a href="https://tio.run/##y0gszk7NyfmfpmCrEPNfw0BRU6@4NDmZK0cxz1YjJ7G4REUDKmQVraGjWZOfkqKQF6uZo5KSWaaQp2D0PzcxMw@ot6AoM69EQU8hDYiLUhNTFGxtbBTSU0uc8/NKUvNKiv8b/EtOy0lML/6vG@EcEAAA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online</a> or <a href="https://tio.run/##hY@9CsIwAIT3PMVZCibalrSjoIurguAi1Cohba2YpmLiH/jsxljcHb/v7oZrhDlVSrl6CPqIngxTZLsHRqDZ6DlOGWKkhNRebx3lA5aYq5REDfSUKmFsSH9qktOIvbqyhC6YCsvjDRqZa8VR@20rzss96Plq1/ay0Ehw6BhyniQp57zAvakuFSHwGt@@7LQU1jOQwzTdHbqHCAHi2dYGP@qjEPWf2H/zFdbbwr1lrcTBuHgzX60@" rel="nofollow noreferrer" title="Haskell – Try It Online">try it with its inverse!</a></p>

<h2>Ungolfed</h2>

<pre class="lang-hs prettyprint-override"><code>ntoN2 n = 0 ! (n + 1)

xCounter ! remainingNum
  | odd remainingNum = (xCounter, div remainingNum 2)
  | otherwise        = (xCounter + 1) ! div remainingNum 2
</code></pre>

<h2>Explanation</h2>

<p>This uses the fact that each \$(x,y) \in \mathbb{N}^2\$ can be 1-to-1 mapped to \$2^x \cdot (2\cdot y + 1) - 1 \in \mathbb{N}\$. The above operator <code>(!)</code> computes \$x\$ by dividing the input as long as it's even, keeping track with the zero-initialized variable <code>l</code> (<code>xCounter</code>). Once we reached the even number an integer division computes <code>y</code>.</p>

<p>Note that the actual function <code>f</code> (<code>ntoN2</code>) increments the input before starting with the procedure.</p>
</div>
<div id="pu12" class="pu"><h1>Mathematica, 46</h1>
<pre><code>SortBy[Tuples[Range[2#]-#,2],Norm][[#]]&amp;[#+1]&amp;
</code></pre>
<p>Sort the vectors their norm, then take the <code>n</code>th one.</p>
</div>
<div id="pu13" class="pu"><h2>Python 2, 49</h2>

<p>Edit: Improved to 49 by using better one-step recursion for base -2.</p>

<pre class="lang-python prettyprint-override"><code>def f(n):x,y=n and f(n/2)or(0,0);return n%2-2*y,x
</code></pre>

<p>Here's a <a href="https://codegolf.stackexchange.com/a/48740/20260">Pyth version</a> using <code>reduce</code>.</p>

<p>Edit: Improved to 52 by switching to <a href="http://en.wikipedia.org/wiki/Negative_base" rel="nofollow noreferrer">base -2</a> from <a href="http://en.wikipedia.org/wiki/Balanced_ternary" rel="nofollow noreferrer">balanced ternary</a>.</p>

<p><strong>Python 2, 52</strong></p>

<pre class="lang-python prettyprint-override"><code>h=lambda n:n and n%2-2*h(n/4)
lambda n:(h(n),h(n/2))
</code></pre>

<hr>

<p><strong>Python 2, 54</strong> </p>

<pre class="lang-python prettyprint-override"><code>h=lambda n:n and-~n%3-1+3*h(n/9)
lambda n:(h(n),h(n/3))
</code></pre>

<p>This uses digit interleaving like <a href="https://codegolf.stackexchange.com/a/48717/20260">Runer112's solution</a>, but with balanced ternary rather than signed binary. Python doesn't have built-in base conversion, so the code implements it recursively.</p>

<p>The helper function <code>h</code> (with <code>3</code> in place of the <code>9</code>) takes a natural number and converts it from ternary to balanced ternary with the digit substitutions</p>

<pre><code>0 -&gt; 0 
1 -&gt; +1
2 -&gt; -1
</code></pre>

<p>So, for example, 19, which is 201 in base, becomes (-1)(0)(+1) in balanced ternary, which is (-1)*3^2 +(0)*3^1+(+1)*3^0 = -8.</p>

<p>Balanced ternary suffices to encode every integer, and so gives a mapping from natural numbers to integers.</p>

<p>To map to pairs of integers, we interleave the digits in <code>n</code>. To do so, we have <code>h</code> look at every other digit by doing <code>n/9</code> as the recursive step rather than <code>n/3</code>. Then, for one coordinate, we shift <code>n</code> by floor-dividing by <code>3</code>.</p>

<p>Here are the first 81 outputs, which cover the region [-4,4]^2.</p>

<pre><code>0 (0, 0)
1 (1, 0)
2 (-1, 0)
3 (0, 1)
4 (1, 1)
5 (-1, 1)
6 (0, -1)
7 (1, -1)
8 (-1, -1)
9 (3, 0)
10 (4, 0)
11 (2, 0)
12 (3, 1)
13 (4, 1)
14 (2, 1)
15 (3, -1)
16 (4, -1)
17 (2, -1)
18 (-3, 0)
19 (-2, 0)
20 (-4, 0)
21 (-3, 1)
22 (-2, 1)
23 (-4, 1)
24 (-3, -1)
25 (-2, -1)
26 (-4, -1)
27 (0, 3)
28 (1, 3)
29 (-1, 3)
30 (0, 4)
31 (1, 4)
32 (-1, 4)
33 (0, 2)
34 (1, 2)
35 (-1, 2)
36 (3, 3)
37 (4, 3)
38 (2, 3)
39 (3, 4)
40 (4, 4)
41 (2, 4)
42 (3, 2)
43 (4, 2)
44 (2, 2)
45 (-3, 3)
46 (-2, 3)
47 (-4, 3)
48 (-3, 4)
49 (-2, 4)
50 (-4, 4)
51 (-3, 2)
52 (-2, 2)
53 (-4, 2)
54 (0, -3)
55 (1, -3)
56 (-1, -3)
57 (0, -2)
58 (1, -2)
59 (-1, -2)
60 (0, -4)
61 (1, -4)
62 (-1, -4)
63 (3, -3)
64 (4, -3)
65 (2, -3)
66 (3, -2)
67 (4, -2)
68 (2, -2)
69 (3, -4)
70 (4, -4)
71 (2, -4)
72 (-3, -3)
73 (-2, -3)
74 (-4, -3)
75 (-3, -2)
76 (-2, -2)
77 (-4, -2)
78 (-3, -4)
79 (-2, -4)
80 (-4, -4)
</code></pre>

<p>An alternative coding with <a href="http://en.wikipedia.org/wiki/Quater-imaginary_base" rel="nofollow noreferrer">quarter-imaginary</a> turned out longer, though it is very pretty.</p>

<p><strong>Python 2, 63</strong></p>

<pre class="lang-python prettyprint-override"><code>h=lambda n:n and n%4+2j*h(n/4)
lambda n:(h(n).real,h(n).imag/2)
</code></pre>

<p>In a language with less clunky handling of complex conversion, this would probably be a better approach. If we could output complex numbers, we could do:</p>

<p><strong>Python 2, 38</strong></p>

<pre class="lang-python prettyprint-override"><code>f=lambda n:n and n%2+n/2%2*1j-2*f(n/4)
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Python 2, 98 bytes</h2>

<p>Let's start out with a simple approach:</p>

<pre class="lang-py prettyprint-override"><code>def f(N):
 x=a=0;b=2
 while N:x+=1j**b;b+=a&lt;1;a=a or b/2;N-=1;a-=1
 return int(x.real),int(x.imag)
</code></pre>

<p>It just forms a rectangular spiral <code>N</code> units long on a 2d grid, starting from the origin, and returns the coordinates of the last point.</p>

<p>The function is bijective since:</p>

<ul>
<li>Each point can be covered, given a long enough spiral</li>
<li>Each point will only be intersected by the spiral once</li>
</ul>

<p>The spiral looks something like this (except starting at 0 rather than 1):</p>

<p><img src="https://i.stack.imgur.com/mekMi.png" alt="Ulam Spiral"></p>
</div>
<div id="pu15" class="pu"><h1>CJam, <s>24</s> <s>22</s> 21 bytes</h1>

<p>My brain has trouble understanding the math other solutions are using. But my brain definitely understands binary, so here's a soultion based on bit manipulation!</p>

<pre><code>li4b2fmd2/z{)(\2b^}%p
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=li4b2fmd2%2Fz%7B)(%5C2b%5E%7D%25p&amp;input=73">Try it online.</a></p>

<h3>Explanation</h3>

<p>This approach treats the input as two interleaved binary values, one for each output number. All but the least significant bit of each encode a magnitude, and the least significant bit signals whether or not to take the bitwise complement of this magnitude. In this implementation, the odd-positioned bits correspond to the first output number (and the even-positioned bits correspond to the second) and an LSB of <code>0</code> signals to take the complement.</p>

<p>For example, given an input of <code>73</code>, uninterleaving its binary representation of <code>1001001b</code> produces <code>0 1|0</code> (odd-positioned bits) and <code>1 0 0|1</code> (even-positioned bits). The first value has a magnitude of <code>01b = 1</code> and should be complemented for a final value of <code>~1 = -2</code>, and the second value has a magnitude of <code>100b = 4</code> and should not be complemented.</p>

<h3>Informal demonstration of correctness</h3>

<p>I made a testing program that places each input from zero to a user-specified number minus one in its output location on a 2D grid. You can <a href="http://cjam.aditsu.net/#code=S2li%3AM(mq2mLi%23%3AL2*)%2CLf-%2B_%7BSL)2**%2B%7D%25S%40%2Ba%5C%2BM%2C%7B%3AX4b2fmd2%2Fz%7B)(%5C2b%5E%7D%25L2%2Bf%2B~_3%24%3D%40Xtt%7D%2F%7B%7BsSK*%5C%2BM(s%2CW*%3E%7D%25S*%7D%25N*&amp;input=100">try it online</a> as well. Here's an output of this program showing how the algorithm maps <code>0-99</code>:</p>

<pre><code>      -8 -7 -6 -5 -4 -3 -2 -1  0  1  2  3  4  5  6  7  8

-8                      92 84 86 94                     
-7                      88 80 82 90                     
-6                      76 68 70 78                     
-5                   96 72 64 66 74 98                  
-4                60 52 28 20 22 30 54 62               
-3                56 48 24 16 18 26 50 58               
-2                44 36 12  4  6 14 38 46               
-1                40 32  8  0  2 10 34 42               
 0                41 33  9  1  3 11 35 43               
 1                45 37 13  5  7 15 39 47               
 2                57 49 25 17 19 27 51 59               
 3                61 53 29 21 23 31 55 63               
 4                   97 73 65 67 75 99                  
 5                      77 69 71 79                     
 6                      89 81 83 91                     
 7                      93 85 87 95                     
 8                                                      
</code></pre>

<p>The fill pattern looks a bit weird, but it is in fact bijective! With each successive power of 4, it fills a square with double the previous side length. For example, here's how the algorithm maps <code>0-15</code>:</p>

<pre><code>      -2 -1  0  1  2

-2    12  4  6 14   
-1     8  0  2 10   
 0     9  1  3 11   
 1    13  5  7 15   
 2                  
</code></pre>

<p>This makes up the 4x4 square in the middle of the 8x8 square of <code>0-63</code>:</p>

<pre><code>      -4 -3 -2 -1  0  1  2  3  4

-4    60 52 28 20 22 30 54 62   
-3    56 48 24 16 18 26 50 58   
-2    44 36 12  4  6 14 38 46   
-1    40 32  8  0  2 10 34 42   
 0    41 33  9  1  3 11 35 43   
 1    45 37 13  5  7 15 39 47   
 2    57 49 25 17 19 27 51 59   
 3    61 53 29 21 23 31 55 63   
 4                              
</code></pre>

<p>Which makes up the 8x8 square in the middle of the 16x16 square of <code>0-255</code>:</p>

<pre><code>         -8  -7  -6  -5  -4  -3  -2  -1   0   1   2   3   4   5   6   7   8

 -8     252 244 220 212 124 116  92  84  86  94 118 126 214 222 246 254    
 -7     248 240 216 208 120 112  88  80  82  90 114 122 210 218 242 250    
 -6     236 228 204 196 108 100  76  68  70  78 102 110 198 206 230 238    
 -5     232 224 200 192 104  96  72  64  66  74  98 106 194 202 226 234    
 -4     188 180 156 148  60  52  28  20  22  30  54  62 150 158 182 190    
 -3     184 176 152 144  56  48  24  16  18  26  50  58 146 154 178 186    
 -2     172 164 140 132  44  36  12   4   6  14  38  46 134 142 166 174    
 -1     168 160 136 128  40  32   8   0   2  10  34  42 130 138 162 170    
  0     169 161 137 129  41  33   9   1   3  11  35  43 131 139 163 171    
  1     173 165 141 133  45  37  13   5   7  15  39  47 135 143 167 175    
  2     185 177 153 145  57  49  25  17  19  27  51  59 147 155 179 187    
  3     189 181 157 149  61  53  29  21  23  31  55  63 151 159 183 191    
  4     233 225 201 193 105  97  73  65  67  75  99 107 195 203 227 235    
  5     237 229 205 197 109 101  77  69  71  79 103 111 199 207 231 239    
  6     249 241 217 209 121 113  89  81  83  91 115 123 211 219 243 251    
  7     253 245 221 213 125 117  93  85  87  95 119 127 215 223 247 255    
  8                                                                        
</code></pre>
</div>
<div id="pu16" class="pu"><h1>Haskell, <s>78</s> 74 bytes</h1>

<pre><code>(concat[[(x,i-x),(x,x-1-i),(-1-x,x-1-i),(-1-x,i-x)]|i&lt;-[0..],x&lt;-[0..i]]!!)
</code></pre>

<p>Test run:</p>

<pre><code>*Main&gt; mapM_ (print . (concat[[(x,i-x),(x,x-1-i),(-1-x,x-1-i),(-1-x,i-x)]|i&lt;-[0..],x&lt;-[0..i]]!!) ) [0..20]
(0,0)
(0,-1)
(-1,-1)
(-1,0)
(0,1)
(0,-2)
(-1,-2)
(-1,1)
(1,0)
(1,-1)
(-2,-1)
(-2,0)
(0,2)
(0,-3)
(-1,-3)
(-1,2)
(1,1)
(1,-2)
(-2,-2)
(-2,1)
(2,0)
</code></pre>

<p>How it works: list all pairs in the first quadrant in the following order</p>

<pre><code>  |
 2| #4
  |
 1| #2  #5
  | 
 0| #1  #3  #6
  +---------------
     0   1   2   3 
</code></pre>

<p>mirror each point into the other quadrants to make a list of 4 element lists. Concatenate all into a single list and take the <code>n</code>th element.</p>

<p>Edit: function doesn't need a name, reordered math. expressions.</p>
</div>
<div id="pu17" class="pu"><h1>dc, 49</h1>
<pre><code>[1+2~2*1-*n]sm?dsa8*1+v1-2/dd1+*2/lar-dlmx32P-lmx
</code></pre>
<p>This starts off by arranging the non-negative integers on a grid thus:</p>
<pre><code>..| 
4 | 14
3 |  9 13
2 |  5  8 12
1 |  2  4  7 11
0 |  0  1  3  6 10
Y +-----------------
  X  0  1  2  3  4 ...
</code></pre>
<p>Note that how the grid positions are filled diagonally with increasing N.  Notice the Y=0 line contains the triangular number sequence, given by <code>N = X(X+1)/2</code>.  This is a quadratic equation which is solved using the normal formula, using just the +ve root, so that we can determine X from N when Y=0.  Next is some simple arithmetic shuffling to give unique {X,Y} for every N.</p>
<p>This provides the required bijective quality, but X and Y are only non-negative, but the question requires all possible integers.  So X and Y are mapped using <code>((t+1)/2)*((t+1)~2*2-1)</code> to give all possible integers.</p>
<p><code>dc</code> has arbitrary precision numbers, so input range to <code>2^31-1</code> is no problem.  Note also that default precision is 0 decimal digits, and the <code>sqrt()</code> and <code>/</code> round down which is the behavior needed here.</p>
<h3>Output:</h3>
<pre><code>$ for i in {0..10}; do dc biject.dc &lt;&lt;&lt; $i; echo; done
0 0
0 -1
-1 0
0 1
-1 -1
1 0
0 -2
-1 1
1 -1
-2 0
0 2
$
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/48705/">48705</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




