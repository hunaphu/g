<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::283903</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>095</td><td>Bash sed + dc</td><td>250930T225418Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283956#283956">Jan Blum</a></td></tr>
<tr d-ix="1"><td>224</td><td>Swift 6.1</td><td>251004T224613Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/284002#284002">macOSist</a></td></tr>
<tr d-ix="2"><td>147</td><td>Python 3</td><td>251004T195219Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/284000#284000">Jonathan</a></td></tr>
<tr d-ix="3"><td>038</td><td>Jelly</td><td>251003T184413Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283995#283995">Jonathan</a></td></tr>
<tr d-ix="4"><td>166</td><td>SNOBOL4 CSNOBOL4</td><td>251002T174927Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283989#283989">Giuseppe</a></td></tr>
<tr d-ix="5"><td>225</td><td>Google Sheets</td><td>250928T120439Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283907#283907">doubleun</a></td></tr>
<tr d-ix="6"><td>127</td><td>R</td><td>251001T190730Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283978#283978">Giuseppe</a></td></tr>
<tr d-ix="7"><td>138</td><td>Retina 0.8.2</td><td>250928T101841Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283905#283905">Neil</a></td></tr>
<tr d-ix="8"><td>046</td><td>05AB1E</td><td>250929T084510Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283921#283921">Kevin Cr</a></td></tr>
<tr d-ix="9"><td>186</td><td>R</td><td>250929T035640Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283918#283918">M--</a></td></tr>
<tr d-ix="10"><td>090</td><td>JavaScript ES6</td><td>250928T094653Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283904#283904">Arnauld</a></td></tr>
<tr d-ix="11"><td>047</td><td>Charcoal</td><td>250928T203830Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283913#283913">Neil</a></td></tr>
<tr d-ix="12"><td>213</td><td>Python3</td><td>250928T175340Z</td><td><a href="https://codegolf.stackexchange.com/questions/283903/interpret-g-code/283911#283911">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash</a> (<a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed</a> + <a href="https://www.gnu.org/software/bc/manual/dc-1.05/dc.html" rel="nofollow noreferrer">dc</a>), <s>104</s> 95 bytes</h1>

<pre class="lang-bash prettyprint-override"><code>sed -r '1i0sX0sY0sZ0sF
s/;.*//
s/G9(.)/\1sm/
s/([A-Z])[^ ]+/l&amp;rlm*+s\1/g
y/G-/F_/
$alZlYlXf'|dc
</code></pre>
<p><a href="https://tio.run/##hZFhb9owEIa/@1ecrIgkrV3bSbqtSzMRtSFDogRBtJG03cRoGFXTdsJs0wT97fRQWgYK2hTH9sl3z71679tIT1edsBsHZ2Ri2YuVLm6Az8BUt1IPpc6kzqVuES38owMh8IxPrCNbXCl9v46sy5Dn1/blF7g@FGVjVt4fHOorJb6TPyLmovVVEGNU5mVWDifm8ma8eiJkPC3Gd5YNCwIwKyaBofDy@HMeGNYEljD6fQf8F/QHgWmCuYAfs9uHOVCLGooyajjrzaU2hScTbKwsxtNH4A9ADYQB/wAGsoDiy7zQeFmHFIKgSqDQaFQlvXAwgOWyClphu0NetWEzJRkuiV1OT5skPpEklhKGDmSODxfJpwjSBAZp2E@hl7S7KT4rGCoJGf4tJSVpbsEUU04dVmVjrHyIumnUh37UCdM2wi@S8@gFiR1rQIfhV8MhDXK1KxZyZ7vQZR473hSq/xRWGa8icnePDm@/Rxt4ttP@HXvL3uy3AQXIv5I4QrgLOfd2fEQTmevVAGttno8TOU/eo4e9TngWwed2@tGvBCHIO94B7Z/uZiC16al/Jm/7VNnYXD0D" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>
<p><em>–9 bytes by making use of the observation that the last digit of <code>G90</code>/<code>G91</code> can immediately be used as a multiplicative factor (borrowed from @Arnauld's JavaScript solution)</em></p>
<p>Reads G-code from standard input, and outputs final values of X, Y and Z on three separate lines.</p>
<p>G code is translated 1:1 into a <code>dc</code> program using five registers:</p>
<ul>
<li><code>X</code>, <code>Y</code>, <code>Z</code> and <code>F</code> keep track of accumulated coordinates (treating <code>F</code> as if it were additive, discarded anyway)</li>
<li><code>m</code> stores the last digit of the most recent <code>G90</code>/<code>G91</code> command, to be used as an absolute/relative mode switch through expressions like <code>X = m * X + &lt;new coordinate&gt;</code></li>
</ul>
<p>G commands other than <code>G90</code>/<code>G91</code> are rewritten into F for brevity (to be finally ignored along with these). Initialize <code>F</code>,<code>X</code>,<code>Y</code>,<code>Z</code> in the beginning, and dump <code>X</code>,<code>Y</code>,<code>Z</code> in the end – that's it.</p>
</div>
<div id="pu1" class="pu"><h1>Swift 6.1, 224 bytes</h1>
<pre class="lang-swift prettyprint-override"><code>{var r=0&lt;1,w=[0,0,0]
($0+&quot;&quot;).split{$0&lt;&quot; &quot;}.map{let c=$0.matches(of:/G(..)([^;]*)/)[0]
c.1&gt;&quot;8&quot; ?r=c.1&gt;&quot;90&quot;:(w=zip(w,&quot;XYZ&quot;).map{y,x in(r ?y:0)+Int(c.2.split{$0&lt;&quot;!&quot;}.first{$0.first==x}?.dropFirst() ?? &quot;\(r ?0:y)&quot;)!})}
return w}
</code></pre>
<p><a href="https://swiftfiddle.com/mckg65cm5neezgqlokx2kme7by" rel="nofollow noreferrer">Try it on SwiftFiddle!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 147 bytes</h1>

<pre class="lang-python prettyprint-override"><code>def f(c):
 a=[0]*8;m=0
 for l in c:
  for p in l.split(&quot;;&quot;)[0].split():m=[m,p[-1]&gt;&quot;0&quot;][&quot;G9&quot;in p];i=ord(p[0])%8;a[i]=a[i]*m+int(p[1:])
 return a[:3]
</code></pre>
<p>A function that accepts a list of the program's lines and returns the final location as a list of three integers, <span class="math-container">\$[X, Y, Z]\$</span>.</p>
<p><strong><a href="https://tio.run/##hVLbasJAEH3PVwwLxcQ2ZdcL1SwRpKZWUCM2tJrLg6ihgWQNMX0o4rfb2RirtYUGEpg5t8nOpp/5@0bUD4fVOoRQXWqGAgvTo0G1xROTKhBuMoghErBEpKhSWcX32zSOcpVwoiG7rDQjMb3kLvV0FnQIJYFH@m2C9DTgkbnJVmqKZO2mxRdeFJjyU01uI5FjnxmBpkC2zj8yAQvPqAcHmZavt7kMJIT4Sr9NlT6lMKvBvMZhZL9a4Njw4nSnDkzswdhBmMGMUZjj@8QoVc6iYxdrxsEaO9YUptaw6wzQZGT3rFKKzqXwQolCcNnPfHBrksL@oRwZJ2e3fj2V5H3bzGu/5kVTeo7Rka7XwdUbl0Tp2@B4FD3bwJ@aDLuPFrwNnGd@jEBBo/nXSdC/m5czsysaejWPsz7gTk7XwBe@IPLy4BNHYr0Fs1hdiVd8UdEKMM3kukOyk@jeF2YHdqFaSLS99Dh8AQ" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre class="lang-python prettyprint-override"><code>a=[0]*8,m=0        # Set a to [0,0,0,0,0,0,0,0] and m to zero
for l in c         # Run through the lines of the code
l.split(&quot;;&quot;)[0]    #   split the line at ';'s and get the first chunk
for p in ^.split() #   Run through parts of that split by spaces
m=[ , ][ ]         #     set m to 
        &quot;G9&quot;in p   #       if &quot;G9&quot; is in the part:
     p[-1]&gt;&quot;0&quot;     #         whether the last character is a &quot;1&quot;
   m               #       else: itself
i=ord(p[0])%8      #     set the index to affect as the ordinal of the first
                   #     character of the part modulo eight: G,X,Y,Z,F -&gt; 7,0,1,2,6
a[i]=              #     update a at index i to:
 a[i]*m            #       itself multiplied by m (reset to zero if absolute mode)
  +int(p[1:])      #       plus the value of the trailing integer
return a[:3]       # finally return the first three values of a
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 38 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>×®+V}ʋḢO%8‘Ʋ}¦
ṣ”;ḢḲçƒFO&amp;/©ṛʋḊ?ð@ƒ0x3¤
</code></pre>
<p>A monadic Link that accepts the program's lines as a list of lists of characters and yields the final location as a list of three integers, <span class="math-container">\$[X, Y, Z]\$</span>.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///w9EPrtMNqT3U/3LHIX9XiUcOMY5tqDy3jerhz8aOGudZA0Yc7Nh1efmySm7@a/qGVD3fOBintsj@8weHYJIMK40NL/j/cveVw@///7pYG1gqpeSWpRQqJScX5OaUlqQq5@SmpXO4GBgoRRgqRRtYKhaWZydk5lQrp@Qol@QoaRjpGmkBpQ4UIQwOFSCB2MzQAGgKVNTTQMTTQVEgsUUhUSEtNTVEoSgQamZ@mAFTE5W5pCLOtKDUnsSSzDG4b0DhThUigObn5QEGYLNDWpEoFDVMdA00A" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8///w9EPrtMNqT3U/3LHIX9XiUcOMY5tqDy3jerhz8aOGudZA0Yc7Nh1efmySm7@a/qGVD3fOBintsj@8weHYJIMK40NL/h@dDFLcuO/QNiDcqvNw95bD7d7HurIeNcw5tM3WTgFojmYWVP7/f3dLAy53AwOFCCOFSCNrBV//MFeFEH@F4BDHoBCFAH9PvxCgtKFChKGBQiQQuxkaGHBxwTVBRIF8Q2sFV78Q1yCFIFcfxxBPoCG@/i6uUK1AkzE0AvUpRBlyoVivEGUEUmJIQAlEBczgKGN0s0Hq4MZEGmE4F2ioAcIaXaByXWOFKF0TZIUgc02sgSHh4m8F9FOAj6Ozq0K4Z4iHNcQKoAYTU2wBYYBdENnNhmjKgGaZQtxqDgA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<pre><code>×®+V}ʋḢO%8‘Ʋ}¦ - Helper: list of integers, Location; list of characters, Part
             ¦ - sparse application to {Location}...
           Ʋ}  - ...at 1-indices: last four links as a monad - f(Part):
      Ḣ        -    head      -&gt; 'G', 'X', 'Y', 'Z', or 'F' (removed from Part)
       O       -    ordinal   -&gt;  71,  88,  89,  90, or  70
        %8     -    mod eight -&gt;   7,   0,   1,   2, or   6
          ‘    -    increment -&gt;   8,   1,   2,   3, or   7
     ʋ         - ...apply: last four links as a dyad - f(LocationElement, BeheadedPart):
 ®             -    read the register -&gt; 0 if absolute mode, 1 if relative mode
×              -    {LocationElement} multiply {that}
  +            -    {that} add...
   V}          -    ...{BeheadedPart} evaluated as Jelly code

ṣ”;ḢḲçƒFO&amp;/©ṛʋḊ?ð@ƒ0x3¤ - Main Link: list of lists of characters, Lines
                   0x3¤ - starting with Location = a list of three zeros...
                  ƒ     - reduce {Lines} by
                ð@      - the dyadic chain - f(Line, Location):
ṣ”;                     -   split {Line} at ';' characters
   Ḣ                    -   head
    Ḳ                   -   split {that} at space characters -&gt; Parts
                      ? -   if...
                     Ḋ  -   ...condition: dequeue {Parts} (i.e. Line is a mode change)
      ƒ                 -   ...then: starting with {Location} reduce {Parts} by:
     ç                  -      call Helper as a dyad - f(currentLocation, Part)
             ʋ          -   ...else: last four links as a dyad - f(Parts, Location)
       F                -      flatten {Parts}       -&gt;      &quot;G90&quot; or &quot;G91&quot;
        O               -      ordinals              -&gt; [71,57,48] or [71,57,49]
         &amp;/             -      reduce by bitwise AND -&gt;          0 or 1
           ©            -      (copy that to the register)
            ṛ           -      right argument -&gt; Location (unadjusted)
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="http://www.snobol4.org/csnobol4/" rel="nofollow noreferrer">SNOBOL4 (CSNOBOL4)</a>, <s>178</s> 166 bytes</h1>
<pre><code> X =Y =Z =0
I I =INPUT :F(O)
 I ';' REM =
 I 'G9' LEN(1) . G :S(I)
E I ANY('XYZ') . D ARB . P (' ' | RPOS(0)) = :F(I)
 $D =$D * G + P :(E)
O OUTPUT =X ',' Y ',' Z
END
</code></pre>
<p><a href="https://tio.run/##JY07D8IwDIT3/IobkJzwUgIsLcpQ1LSqBG3Vh9RkZEZ0YOW/B7cMtnX32efPe37Or0uMmGA9bIDVokIFW9XtOCAtZKMEa7oSOveAXUWZEO6ulkbhiBJpLyslHJOs9pImH2gBObLuxrOFJBC@6Nqml1op2CWYT7DJYbm2HLLjvVQ6JRo047A8txNoT/BrD8LVeYxlYkSpNSYDbxBYJHo1/AnhcBJ/blbOzhmF0foH" rel="nofollow noreferrer" title="SNOBOL4 (CSNOBOL4) – Try It Online">Try it online!</a></p>
<p>Indirect reference <code>$</code> removes the need for <code>EVAL</code>.</p>
</div>
<div id="pu5" class="pu"><h1>Google Sheets, 225 bytes</h1>
<pre class="lang-none prettyprint-override"><code>=sort(choosecols(reduce(W1:Z1,iferror(split(regexreplace(A:A,&quot;G|;.*&quot;,),&quot; &quot;)),lambda(a,c,let(m,index(a,1),f,lambda(i,iferror(m*index(a,i)+mid(c,2,9*find(char(86+i),c)),index(a,i))),{if(n(c)&gt;1,c=91,m),f(2),f(3),f(4)}))),2,3,4))
</code></pre>
<p><img src="https://i.sstatic.net/8KLduyTK.png" alt="screenshot" /></p>
<p>Prettified:</p>
<pre class="lang-none prettyprint-override"><code>=sort(choosecols(
  reduce({ 0, 0, 0, 0 }, iferror(split(regexreplace(A:A, &quot;G|;.*&quot;,), &quot; &quot;)), lambda(a, c, let(
    m, index(a, 1),
    f, lambda(i, iferror(
      m * index(a, i) + mid(c, 2, 9 * find(char(86+i), c)),
      index(a, i)
    )),
    {
      if(n(c) &gt; 1, c = 91, m),
      f(2), f(3), f(4) 
    }
  ))),
  2, 3, 4
))
</code></pre>
<p>Explained:</p>
<ul>
<li><code>sort()</code> is used as an array processing enabler only</li>
<li><code>reduce()</code> accumulates the result in an array <code>[m, x, y, z]</code> where <code>m</code> is <code>0</code> for absolute and <code>1</code> for relative mode</li>
<li><code>split()</code> separates tokens into a subarray and casts strings like <code>G90</code>, <code>G91</code>, <code>G00</code> and <code>G01</code> to numbers; strings like <code>X10</code> and <code>Y-3</code> are left as is</li>
<li><code>f(index)</code> extracts an x, y or z coordinate, and adds previous coordinate when in relative mode</li>
<li>extraction will error out when a token doesn't represent a particular coordinate (<code>char(86+2)</code> === <code>X</code>), defaulting to the current value at <code>index</code> in the accumulator</li>
<li>in the <code>{}</code> array expression, <code>if()</code> sets or maintains the mode in the accumulator, and the three <code>f()</code> calls get new coordinates when they're present, maintaining coordinates that aren't present</li>
<li><code>c = 91</code> puts a Boolean in <code>m</code>, but that gets coerced to <code>0</code> or <code>1</code> in <code>f()</code></li>
<li>finally, <code>choosecols()</code> drops <code>m</code> and outputs the rest of the accumulator</li>
</ul>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>136</s> 127 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(s){X=Y=Z=0
`[`=gsub
eval(parse(t=&quot;([XYZF])(.\\d*)&quot;[&quot;\\1=\\1*G+\\2;&quot;,&quot;G9&quot;[&quot;G=&quot;,&quot;;.*|G0.&quot;[&quot;&quot;,el(strsplit(s,&quot;
&quot;))]]]))
c(X,Y,Z)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVJta9swEIZ91K84BAMpk4PkuFs71x_C6nqBti6Z2fwWWi-1g8EkbqSOQTf2Q_YlY-xHbb9m19oNDStDEjrdPc-jk-6-_1hvflaH1q8bU1n7v7_lTPPb2Eu81JPkMrv0FvrmIyk_FQ1ri7UumfEoy-IkPZ5xNszzqwGnGc1z5eEaBC_y3HapoMEBegMPLXc4-BLIIR6pKBumzVq3TW2YFpRQzmezGedkzmKRiJR_7dL482xsSm0uEFwvFxoOLWhqbRhBXUkCKSG2IbFdOA3f-xCF8C4aTyM4DydnEYYVxEpCgutYSUnFI1rnJ8GBcsE_i_wpTP2TcTRBmdPwyO_JqP0EFZmQKrKTAqR2B1L_B5EO8SCejv7Vv0OSB6HEfiJtFJZbRGwhwRpBajm70Dt1x8VfOQpf4-vOT8ZvfPgwid663TVIcfYoJ6T83JZzU15tv3fOlBQ4JReAthLK7m1b4Li3RsIRe73P6aP74pV42XGQIEYOVpRUqzWroV6CLq8vima1XLDHNeX8lswLw6odb5bV2A8CdItHUzHKtkl68FzzfEkFtIU25TZwT8G7V01TtLr0KGBXcdJ30mbT7X8B" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>-2 bytes thanks to pajonk..</p>
<p>Test harness taken from <a href="https://codegolf.stackexchange.com/a/283918/67312">M--</a>.</p>
<p>Uses regex to construct the appropriate R expressions, and then use R's interpreter to evaluate them. I suspect I missed something to save a few bytes, though.</p>
<p>The reassignment of <code>[</code> to <code>gsub</code> makes this very hard to follow; the mildly less golfed version is:</p>
<h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 149 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(s){X=Y=Z=0
s=el(strsplit(s,&quot;
&quot;))
s=gsub(&quot;;.*|G0.&quot;,&quot;&quot;,s)
s=gsub(&quot;G9&quot;,&quot;G=&quot;,s)
s=gsub(&quot;([XYZF])(.\\d*)&quot;,&quot;\\1=\\1*G+\\2;&quot;,s)
eval(parse(t=s))
c(X,Y,Z)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVLRbtMwFJV49FdcWUKyi1PZaQYbWR4qloVK2zKVCJI01RQ6t4oUtaH2ENLgM3jipQjxUfA13DVZWcWEEss3555z7o19v31fb37Mj52fN3buHP76WjDDb9MgC_JAEhPomhm7Nk1dWWYEJZRzRBfm5j2jfr_3OZJ9KigV5i8cHSESBXsYm6RZfjrlrF8U1z2OhKJQAa5e9KwoXH9L1h_LmjXl2mhmA4OFZiwVmcj5l7a530-GVht7hQ1Vy4WBYwfqylhGsKQkkZSQupC5PpzHb0NIYniTDMcJXMajiwTTClIlIcN1qqSk4oGsxUl0pHwIL5JwDOPwbJiM0OY8Pgk7MXo_IkUl5IrstQC525LU_0mkZdyb54N__e-Y5N4ocx9pG43ljpE6KHAGkDvePvXO3fPxVE7il_h3l2fDVyG8GyWv_bYMSrwDygnRnxo9s_p6d7wzpqTAV3IBGCuh3C52BT7baCA8cdBhXpc9FC_E81aDAjHw8EbJfLVmFVRLMPrDVVmvlgv28E45vyWz0rL5HjqZVNMpOpkGP-0cx2nXZABPDS-WVEBTGqt3ia0Ea6_qumyMDijg5HLSTdJm0-5_AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 138 bytes</h1>
<pre><code>;.*

T`G`A`G90(¶G0.*)*
[XYZ](?&lt;=(.).*)
$&amp;$1
\d+
$*#
M!`.[AG]-?#*
^
XA¶YA¶ZA¶
O$`(.).+
$1
+`(.).+¶\1A
$1A
O`
+`(.A.*)¶.G
$1
+1`(#+)-\1

%`#
</code></pre>
<p><a href="https://tio.run/##JY49CgIxEEb7OUUkUbJZEhK1WVSWVKnExmKzPzKCFjYW4tlygFwsjrvFg/ke3wzzeX5f73spB6MArhjQY2iszClYoyoFQxf7SbbHkzQVCRAb4WB81CAUh/MKzeDDpFuu4AadzykSPQEXgf8VKjqolzGn0XnKHi44O08XczJh7jiUvK706ADWyEuhNyBYyzpnWSR6R7lxi9NbFvWO9Xr/Aw" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Outputs each coordinate on its own line. Explanation:</p>
<pre><code>;.*

</code></pre>
<p>Delete any comments.</p>
<pre><code>T`G`A`G90(¶G0.*)*
</code></pre>
<p>Mark all absolute motion movements.</p>
<pre><code>[XYZ](?&lt;=(.).*)
$&amp;$1
</code></pre>
<p>Mark each coordinate with whether it is absolute or not.</p>
<pre><code>\d+
$*#
</code></pre>
<p>Convert to unary.</p>
<pre><code>M!`.[AG]-?#*
</code></pre>
<p>Keep only the coordinates.</p>
<pre><code>^
XA¶YA¶ZA¶
</code></pre>
<p>Add one of each in case some were unused.</p>
<pre><code>O$`(.).+
$1
</code></pre>
<p>Group the lines by axis.</p>
<pre><code>+`(.).+¶\1A
$1A
</code></pre>
<p>Within each axis, delete up to the last absolute motion.</p>
<pre><code>O`
</code></pre>
<p>Sort any negative relative coordinates to the end.</p>
<pre><code>+`(.A.*)¶.G
$1
</code></pre>
<p>Add all of the relative coordinate values together.</p>
<pre><code>+1`(#+)-\1

</code></pre>
<p>Subtract off any negative relative coordinate values.</p>
<pre><code>%`#
</code></pre>
<p>Convert to decimal, also removing the <code>XA</code>, <code>YA</code> and <code>ZA</code>.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 46 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Îvy';¡н¦¬!i#…XYZ©S0«ì.¡®sнk}3£€€¦OX_i©_*®}+ë¦U
</code></pre>
<p>Input as a list of string-lines. (If this is not allowed, the leading <code>Î</code> could be replaced with <code>0|</code> for +1 byte.)</p>
<p><a href="https://tio.run/##yy9OTMpM/f//cF9Zpbr1oYUX9h5admiNYqbyo4ZlEZFRh1YGGxxafXiN3qGFh9YVX9ibXWt8aPGjpjVAdGiZf0R85qGV8VqH1tVqH159aFno///RSu6WBko6Su4GhgoRxgpRplB2pLlS7H9d3bx83ZzEqkoA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##jZDfSgJBGMXve4qv7aKs2ZhZlci9EMnNBGvFtlo3RNZcY/HP1joKGwjRm0QgRNJlN9HN9AI9gy@yfWoriQbBzMXMd875nRmva9dcJ@xLRd/hPJBvfLfDnTq4nZseT4FEAvFO1iS9x2fndBDSbj/YVMXj14cYitG6uzG@H5plSzyfUvHyOdoVj@K1@/XRHMTF0/hhhEsMdbPqiufqtngd7Hy@iOFZOBgQ8ZZmZ@HlpZTbpyo4yPXBrnW9Vo870PbqjkSkHKVgKlBWVLjtuVfNVgDXHnAPthSixKYCBiajUMZ9yCgG/cwZJYzGwOZgQ8PBJ/k2xnoNQNHEt88ipu@0bO72fzExMgllzGp7eB3NkV0LYCtJaEyqEJj2Xqx4rJ9rYOhwamRKBhT1/ImxouKSeTaLSmknhlaCklbIGHmMO9az2jwEKX9EYAJYbJqxUAosJRKzf4nJXBkBrfhq5sTxS04nx9VPQxhdUJoymuU4WHJi2TIhJlT8x6yewn8oFjIHGlzkjSN1hkVbIom2BRdeJqMae1KlEspyx5Nb9l3wDQ" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Î                     # Push 0 and the input-list
 v                    # Loop over each line `y`:
  y';¡               '#  Split the line on &quot;;&quot;
      н               #  Pop and keep the first item
       ¦              #  Remove its leading &quot;G&quot;
        ¬             #  Get its first digit (without popping)
         !i           #  If it's a 0 or 1:
           #          #   Split the items on spaces
            …XYZ      #   Push string &quot;XYZ&quot;
                ©     #   Store it in variable `®` (without popping)
                 S    #   Convert it to a list: [&quot;X&quot;,&quot;Y&quot;,&quot;Z&quot;]
                  0«  #   Append a &quot;0&quot; to each: [&quot;X0&quot;,&quot;Y0&quot;,&quot;Z0&quot;]
                    ì #   Prepend-merge this triplet to the current list
            .¡        #   Group the items by:
              ®       #    Push &quot;XYZ&quot; again
               s      #    Swap to get the current item
                н     #    Keep its first character
                 k    #    Get the 0-based index of this character in &quot;XYZ&quot;
                      #    (or -1 if it's not present - for &quot;F&quot;, &quot;0&quot;, or &quot;1&quot;)
             }3£      #   After the group by: keep the first 3 groups
                €€    #   Nested map over each inner-most string:
                  ¦   #    Remove its first character
                   O  #   Sum the values in each inner group together
           X_i        #   If `X` is 1:
              ©       #    Store this triplet in variable `®` (without popping)
               _      #    Pop and do an ==0 check on each (1 if 0; 0 otherwise)
                *     #    Multiply that to the current values at the same positions,
                      #    or the initial 0 if this is the first encountered
                      #    &quot;G00&quot;/&quot;G01&quot; after the initial &quot;G90&quot;
                 ®    #    Push triplet `®` again
             }        #   Close the inner if-statement
              +       #   Add the values at the same positions in the triplets,
                      #   or add it to the initial 0 if this is the first encountered
                      #   &quot;G00&quot;/&quot;G01&quot; after the initial &quot;G91&quot;
          ë           #  Else (it's a 9):
           ¦          #   Remove its leading &quot;9&quot;
            U         #   Pop and store this 0 or 1 as new `X`
                      # (after which the resulting triplet is output implicitly)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>252</s> <s>205</s> <s>204</s> 186 bytes</h1>
<p><sub> -18 bytes by <a href="https://codegolf.stackexchange.com/users/55372/pajonk">pajonk</a>.</sub></p>
<pre class="lang-r prettyprint-override"><code>\(s,`?`=grepl){m=c(X=0,Y=0,Z=0)
for(v in sub(&quot;;.*&quot;,&quot;&quot;,el(strsplit(s,&quot;
&quot;)))){if(&quot;G9&quot;?v)V=v==&quot;G91&quot;
for(a in names(m))if(a?v)m[a]=m[a]*V+strtoi(sub(paste0(&quot;.*&quot;,a,&quot;(-?\\d+).*&quot;),&quot;\\1&quot;,v))}
m}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVLtatswFIX91FNcBAOplYfsuFs314Swul2grUtmssRxaL3UDgbH8SI1DEqfZH9Syl5ib7I9za4_GhpWZlv21dU5517J58fDavOYHhk_b3VqHP7-FTElrrvX7nyVlDm_W7gzNnKlGOMIXclJulyxNWQFqNuvjDpv9qigVCQ5U3qlyjzTyKeEcrzuspTR0_e0u-ZDd-26GJu0FogrgSJeJIotOEdYjJjFJJ661WtvuI9iepmxqkYZK51IRqtKsaDM6EbRzT7HKRc0ikwq1pzfk8V9s4M_r3o6UfoKFbJiruDIgDxTmhGsLsmplDCyYGw5cO4PPQh8-Bz0BgFc-v2LAJdNGJkSxjhOTCmpeEZr8gQ34YB3EXgDGHhnvaCPMuf-sdeSUfsFKjIhNMlOCxBaDcj8P4g0iCfxsPOvfoUkT0Jj64W2UVhuESMDCUYHQsPehVbqtoOncux_wN1dnvU-evClH3xymjJIsQ8oJyT5XiYzndxsj3fGTCnwkVwAxqYwrTa2BN511BG2OGhzdrt6KN6Jtw0HCaJjc1SvLJLVHku-XcX5spiz5_8UnUVmsWbpTnYyyaZTVFIlTjU6j22bdOG14lFBBdRm2i7UFKy9zPO4VIlLofItaZ202TTfvw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu10" class="pu"><h1>JavaScript (ES6), 90 bytes</h1>
<p>Expects a string and returns an object <code>{X,Y,Z}</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.replace(/;.*|G9(.)|.(-?\d+)/g,([c],M=m,v)=&gt;c&gt;s?C[c]=+v+C[c]*m:m=M,C={X:0,Y:0,Z:0})&amp;&amp;C
</code></pre>
<p><a href="https://tio.run/##jZHhT6MwGMa/81e88YNpt9K1DPUcKWaZuFvixGzk3PDuA2FsxwXGpNwSo/7t813m9IhnFGiat@3zex@e/onWkY7LdFWZy2KWbOZqo5WreZmssihOSMvhjcf@KeH0kRPz7OesSVsLRm7jX2yocramyo1dfdbDBdVcN7dzI@/kash66mHSEWyKI@yIJ3p42NuUyd3ftEzIwVwfUOwRzS7SLBnfL2MiKK@KcVWmywWhXK@ytCItxRstyvNoRTQoFzTH/ZxQyudpViXlyyqWRelF8e9d/WAAxMVSF1nCs2JB5kRT6hhPdKPwMfqnwugLARMLppYDQ/@HB4EP46A7CuDaH1wFuC1hIgVMcVxIIYyt0AUiBcNPUMOok3ZHsZYOeFeBN4KRd9kNBkge@ufeCw/b1WmSSet/NIRBKOtGIbT2Oovh@6aSn6h2J/YGwnbNQ5vZ7Oidg630lTz9p7H94c9ja/FmxkSC2YbQtPfab@yEHb/Xbg3ZDuZ/7ncwtOvLbs@Dm0Hw3dkZQYZ99BoYpsXa9sfxf/2iRC0WWdPitUjUPgM" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>s =&gt;                     // s = input string
s.replace(               // replace in s:
  /;.*|G9(.)|.(-?\d+)/g, //   match either a comment, a G9x command, or a
                         //   character followed by an integer value (which
                         //   may start with a '-')
  (                      //
    [c],                 //   c = leading character
    M = m,               //   M = mode from G9x, or the current value of m
                         //       (as per the challenge rules, the first
                         //       command is always G9x; this prevents us
                         //       from trying to use a still undefined m)
    v                    //   v = value (or undefined)
  ) =&gt;                   //
  c &gt; s ?                //   if c is greater than 'G' (Xn, Yn or Zn):
    C[c] =               //     update C[c] to:
      +v + C[c] * m      //       (int)v + C[c] * (int)m
  :                      //   else (Fn, G0x, G9x or comment):
    m = M,               //     update the mode m to M (this is effective
                         //     for G9x and leaves m unchanged otherwise)
  C = {                  //   start with an object C where ...
    X: 0, Y: 0, Z: 0     //   ... X, Y and Z are set to 0
  }                      //
)                        // end of replace()
&amp;&amp; C                     // return C
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 47 bytes</h1>
<pre><code>Ｆ³⊞υ⁰Ｗ↧ＳＦ⪪§⪪ι;⁰ ≡⌈κgＦ№κ9≔Ｉ⌊κθ§≔υ℅⌈κ⁺×θ§υ℅⌈κΣκＩυ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fZC_TsMwEMbFmqc4eTqLREooA2mmqkNViYpIYaBFDCZ_rTpOG9ukEuJJWDqA4JXgaXBIKjExWLo7f7_vPvv1M61YmzZMHI_vRhfe1ffZedG0gBMKsVEVGhd8GjldxUUOeN10eZsyleNS7oxOdMtliZRS-IWSneAaZ3ops_wwdtwFEhHa29gKCAXVcZ1WgCt24LWpcWvxZ6d3BVKS6WA1b4zUuLVISOz9TCleSpwzpXHF5YlzYW_DZXnBjNDTUXXab6PftBmXTPxd5UIsjMJbXucK9y78r-71yVhGzosT2wfrIYaxkzf1mKrx5z7uifckyMMXLkLfWfg-3AU-rO3ZBLYPg2HmXcDam8DGu3QG7gc" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Takes input as a list of newline-terminated strings. Explanation:</p>
<pre><code>Ｆ³⊞υ⁰
</code></pre>
<p>Start with all three axes at zero.</p>
<pre><code>Ｗ↧Ｓ
</code></pre>
<p>Loop through the input, lowercasing it.</p>
<pre><code>Ｆ⪪§⪪ι;⁰ 
</code></pre>
<p>Loop through each non-comment token.</p>
<pre><code>≡⌈κg
</code></pre>
<p>If its letter is <code>G</code>, then...</p>
<pre><code>Ｆ№κ9≔Ｉ⌊κθ
</code></pre>
<p>... if it contains <code>9</code> then save its last digit as an absolute/relative flag.</p>
<pre><code>§≔υ℅⌈κ⁺×θ§υ℅⌈κΣκ
</code></pre>
<p>Otherwise, update the appropriate entry of the axis array according to the absolute/relative flag and the current value. (I'm using ATO because its version of Charcoal will interpret <code>Sum(&quot;Z-4&quot;)</code> as <code>-4</code> and not <code>4</code>.)</p>
<pre><code>Ｉυ
</code></pre>
<p>Output the final axes.</p>
</div>
<div id="pu12" class="pu"><h1>Python3, 213 bytes</h1>
<pre class="lang-py prettyprint-override"><code>import re
T=re.findall
def f(p):
 m,F={'X':0,'Y':0,'Z':0},0
 for i in p:
  F={'G90':0,'G91':1}.get(v:=T('^G\d+\s*(?:[XYZ][\-\d]+\s*)*',i)[0],F)
  for j in T('[XYZ][\-\d]+',v):m[j[0]]=m[j[0]]*F+int(j[1:])
 return m
</code></pre>
<p><a href="https://tio.run/##lZFba8JAEIXf91cMvmyiiWyihRoJRWpiBTVilzbXQiFJGzExxFQoxd@eTryUlpa2PuwszJ7zzdnd/LV8Xmedy7yoqiTN10UJRUS4XkTtOMnCx9WKhFEMsZCLGoFUMvU3alONSdTZVxfrTmIE4nUBCSQZ5KiDWjbqsb1k1FOopuzaT1EpbDWdC/Rh5Ictf9MUrjTPdtzA82U/DOqO2KRSInoskEwRMTV0WUPR9FlJpa2opd4ShYF@3JtmK8lKYekpWoDeIipfigzSKi/qdiw0Gg1MREaMga2Co/Zhat0ZwC245YMFh7k1nnE8VsBWGDi4TIUxdLU3@SopBepnVBRFQn4CHhwEr9oHY8aNBSyMyYCPccDUGhpHLE49C4pMcBXyJTa46l925Xc7OShOgdzOOZlqBjmNcNSzngfDsA@vLSNK7oArd/8LqbN2@/hjQ0vD951PBtcG3I/5Tf8QDWHdi2@w6h0" rel="noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/283903/">283903</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




