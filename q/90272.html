<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::90272</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>167</td><td>Python3</td><td>250312T015840Z</td><td><a href="https://codegolf.stackexchange.com/questions/90272/extendable-train-swapping-problem/278608#278608">Ajax1234</a></td></tr>
<tr d-ix="1"><td>120</td><td>Perl</td><td>160828T061747Z</td><td><a href="https://codegolf.stackexchange.com/questions/90272/extendable-train-swapping-problem/91401#91401">Ton Hosp</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 167 bytes</h1>
<pre><code>def f(N,n,t):
 q,s=[(t,0)],[t]
 for t,c in q:
  if[*range(1,N+1)]==t:return c
  for i in range(N-n):
   if(T:=t[:i]+t[i:i+n][::-1]+t[i+n:])not in s:q+=[(T,c+1)];s+=[T]
</code></pre>
<p><a href="https://tio.run/##jY6xTsQwEET7fMV2Z5/3ELkEuFuUX0iVznJxCjFYuts4zlLw9cGGAiEaytG8N5r4IW8zN6eYtu1l8uBVj4yiqYIF184qwXvt0IqrwM8JBEcIDEvuIXi7Txd@nVSNvam16zqhNMl7YhhzX/hQ6G@oP3CZLZ4aqBNLwRmxgYJhZ4kO9Vc0TE7zLEVcaTH5w4BjmX9ecxjcFlNgUV61eES7v12iyhlhV0MDR2h3d2u8BlFaO62rH7j5P3z@A7fwAI9ZOcFT1s6/tO0T" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Perl, 120 bytes</h1>

<p>Includes +6 for <code>-Xapi</code> (<code>-</code> and space are counted too because both the <code>-i</code> and the <code>$'</code> in the code make it impossible to combine the options with <code>-e</code>)</p>

<p>Run with the input on STDIN and the platform length after the <code>-i</code> option, e.g.</p>

<pre><code>perl -Xapi3 trains.pl &lt;&lt;&lt; "1 4 5 6 3 8 7 2 9"
</code></pre>

<p>Prints <code>-2</code> if there is no solution</p>

<p><code>trains.pl</code>:</p>

<pre><code>1until$_=$n++*$z{pack"W*",@F}||-!grep!$z{$_}++&amp;&amp;/.{$^I}(??{!\$z{$`.reverse($&amp;).$'}})$/s,keys%z,pack"W*",1..@F;$_--
</code></pre>

<p>if <code>N &lt;= 9</code> then you can gain 5 more bytes:</p>

<pre><code>1until$_=$n++*$z{join"",@F}||-!grep!$z{$_}++&amp;&amp;/.{$^I}(??{!\$z{$`.reverse($&amp;).$'}})$/,keys%z,join"",1..@F;$_--
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/90272/">90272</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




