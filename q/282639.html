<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282639</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>021</td><td>Haskell + hgl</td><td>250720T225122Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282719#282719">Wheat Wi</a></td></tr>
<tr d-ix="1"><td>107</td><td>Nim</td><td>250719T143514Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282707#282707">janAkali</a></td></tr>
<tr d-ix="2"><td>008</td><td>Japt</td><td>250716T150152Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282657#282657">Shaggy</a></td></tr>
<tr d-ix="3"><td>135</td><td>C64 Basic</td><td>250719T102241Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282704#282704">OSI8</a></td></tr>
<tr d-ix="4"><td>004</td><td>Uiua</td><td>250717T220853Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282672#282672">nyxbird</a></td></tr>
<tr d-ix="5"><td>121</td><td>Clojure</td><td>250717T170818Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282670#282670">NikoNyrh</a></td></tr>
<tr d-ix="6"><td>086</td><td>Python3</td><td>250716T145047Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282656#282656">Ajax1234</a></td></tr>
<tr d-ix="7"><td>007</td><td>05AB1E</td><td>250715T131923Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282642#282642">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>017</td><td>Charcoal</td><td>250715T234540Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282650#282650">Neil</a></td></tr>
<tr d-ix="9"><td>005</td><td>Jelly</td><td>250715T194911Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282647#282647">Jonathan</a></td></tr>
<tr d-ix="10"><td>054</td><td>JavaScript ES11</td><td>250715T120653Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282641#282641">Arnauld</a></td></tr>
<tr d-ix="11"><td>068</td><td>JavaScript</td><td>250715T095311Z</td><td><a href="https://codegolf.stackexchange.com/questions/282639/who-was-leading-the-race/282640#282640">tata</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a> + <a href="https://gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 21 bytes</h1>
<pre><code>uue$l2m(rv&lt;&lt;nx&lt;rv)nbr
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYvtabalpakqOUa5GkVlNjZ5FTZFZZp5SUUQ2ZtKuYmZebYp-VwKCgVFCioKaQrRhjrGOkZACCINdQxjISoXLIDQAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>Two functions <code>uue</code> and <code>nbr</code> almost solve this task. <code>uue</code> is an &quot;unfold&quot;. It takes a function which breaks a list apart and repeats it until the input is empty collecting the pieces. <code>nbr</code> takes the first occurrence of every element of the list out, however it reorders the remaining elements. So instead of doing what we want <code>uue nbr</code> just sort of repeats the first lap a couple of times, eliminating cars if they don't finish a lap.</p>
<p>So we have to fix this ordering problem, and we end up paying quite a bit to do this. What I do is take the intersection of the remainder with the reverse of the original list. This takes the order of the reversed original list and imposes it on the fragment. Then I reverse the result.</p>
<p>This is done with this monstrosity: <code>rv&lt;&lt;nx&lt;rv</code></p>
<h1>Reflection</h1>
<p>I think this is a really good challenge, but I'm pretty unhappy with the result. hgl is really close to being quite short, but it fumbles it completely.</p>
<p>So I have a couple of things I think could be improved:</p>
<ul>
<li>I sort of understand why <code>nbr</code> is the way it is. But I ultimately think it is a poor choice. Implementing it the way that this challenge needs would be useful, and probably would be a faster function. But instead of changing the behavior, since it's a 3 byte built in, I think I should just add an alternate version.</li>
<li>I spend too much on <code>rv&lt;&lt;nx&lt;rv</code>. This is extremely close to the &quot;sandwich&quot; operation <code>swc</code>. There should be a version of the sandwich operation for binary functions, something like <code>sw2</code>. This would be more like <code>rv&lt;&lt;(nx.*rv)</code> but both work for shorter.</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://nim-lang.org" rel="nofollow noreferrer">Nim</a>, <s>112</s> <s>109</s> 107 bytes</h1>
<pre class="lang-none prettyprint-override"><code>proc(s= @[1]):auto=(var l:seq[s.type];for c in s:(var i=0;while(l.grow(i+1,@[]);c in l[i]):i+=1
l[i]&amp;=c)
l)
</code></pre>
<p><a href="https://wandbox.org/permlink/GKBHyq69foBXOn3W" rel="nofollow noreferrer">Try it in Wandbox!</a> (with added <code>let f=</code> header)</p>
<h2>Ungolfed:</h2>
<pre class="lang-none prettyprint-override"><code>proc raceOrder(cars = @[1]): auto =
  var laps: seq[cars.type]
  for car in cars:
    var i=0
    while(laps.grow(i+1,@[]); car in laps[i]):
      i+=1
    laps[i] &amp;= car
  return laps
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 8 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>I tried this initially and it didn't work; Nyxbird's solution inspired me to try it again and it worked this time ü§∑üèº‚Äç‚ôÇÔ∏è</p>
<pre><code>√º@¬ØY √®¬∂X
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=/ECvWSDotlg&amp;input=WzMwLDIwLDQwLDEwLDIwLDIwLDIwLDIwLDIwLDMwLDEwLDMwLDQwXQotUQ" rel="nofollow noreferrer">Try it</a></p>
<pre><code>√º@¬ØY √®¬∂X     :Implicit input of array U
√º            :Group by
 @           :Passing each X at index Y through the following function
  ¬ØY         :  Slice U to index Y
     √®       :  Count the elements
      ¬∂X     :    Equal to X
</code></pre>
<h1>Original, 10 bytes</h1>
<p>Was stuck on 12 for ages, with the possibility of 10 only dawning on me just before I posted. If outputting a 3D-array were allowed then the last 3 bytes could be replaced with <code>o</code>.</p>
<pre><code>√≠ √º√é√ï√ã√±√åm√é
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=7SD8ztXL8cxtzg&amp;input=WzEwLDIwLDMwLDIwLDEwLDMwLDIwLDEwXQotUQ" rel="nofollow noreferrer">Try it</a></p>
<pre><code>√≠ √º√é√ï√ã√±√åm√é     :Implicit input of array
√≠              :Interleave with indices
  √º            :Group &amp; sort by
   √é           :  First element (car)
    √ï          :Transpose
     √ã         :Map
      √±        :  Sort by
       √å       :    Last element
        m      :  Map to
         √é     :    First elements
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.c64-wiki.com/wiki/BASIC" rel="nofollow noreferrer">C64 Basic</a>, 135 bytes</h1>
<p><a href="https://i.sstatic.net/Hz3XxbOy.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/Hz3XxbOy.png" alt="C64 code" /></a></p>
<p>The code has 135 bytes without counting the DATA lines which may be different depending on the test case.</p>
<p>Additional limitations:</p>
<ul>
<li>car numbers can only be integer values up to 255</li>
<li>the total number of cars cannot exceed 28</li>
</ul>
<p><a href="https://i.sstatic.net/1KiqH6p3.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/1KiqH6p3.png" alt="C64 screenshot" /></a></p>
<p><a href="https://stigc.dk/c64/basic/?s=2TYoxCsMwDEV3nyQmGiQ5HqpWhAyFdOolTIqd4KHk_kROhhYEerz3Mb22jmMEvnlH32eVvNR9zrp1FdCLrEYZyEt7a89eq1xG157kmmk2_LzJ8dhEsdldihazeSmP5sjvM7swStVquiha-oUhTQGBEQYEOuH_wilDqy6mCQ8" rel="nofollow noreferrer">Try in emulator</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 4 bytes</h1>
<pre><code>‚äï‚ñ°‚ä∏‚ßÜ
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_17_0-dev_1__IyBFeHBlcmltZW50YWwhCmYg4oaQIOKKleKWoeKKuOKnhgpmwrBqc29uJCBbMTAsMjAsMzAsMTAsMjAsMzAsMTAsMjAsMzBdCmbCsGpzb24kIFsxMCwyMCwzMCwyMCwxMCwzMCwyMCwxMF0KZsKwanNvbiQgWzEwLDIwLDMwLDEwLDIwLDEwLDMwLDIwLDMwXQpmwrBqc29uJCBbMTAsMjAsMzAsMTAsMjAsMzAsMTAsMjAsMTAsMzAsMjAsMTAsMjAsMzBdCmbCsGpzb24kIFsxMF0KZsKwanNvbiQgWzMwLDIwLDQwLDEwLDIwLDIwLDIwLDIwLDIwLDMwLDEwLDMwLDQwXQo=" rel="nofollow noreferrer">Try it!</a></p>
<p><code>‚äï group</code> into <code>‚ñ° box</code>es <code>‚ä∏ by</code> <code>‚ßÜ occurences</code>.<br />
<code>‚ßÜ occurences</code> gives the number of times each element of an array has appeared (up to the current index), so <code>‚ßÜ[1 2 1 3 1 2]</code> is <code>[0 0 1 0 2 1]</code>.</p>
</div>
<div id="pu5" class="pu"><h2>Clojure, 121 bytes</h2>
<pre><code>#(map reverse(vals(second(reduce(fn[[R P]c](let[r(+(or(R c)0)1)][(assoc R c r)(update P r conj c)]))[{}(sorted-map)]%))))
</code></pre>
<p><a href="https://tio.run/##ZY3NisMwDITveYqBsiDRLDjbPkjp1fhgbAW2uHGQk17KPnvWbSj0R@gwfDMahZRPs8qyUJQePTZ09iNULqJF6OJToSIhD5FU4hyE@sHaIw4uOEoyWaUtZaUjAhvu2FnypeSACqBM8xj9JDhAUUtONeWY7fWPStZJ4nd9xu6Lb9M0RCGfR8TsU8LNwQpG/R2mNKDnBrC2M@2PaXemXUV313fiqo93/zPYvcRXtn/g5909jvbGOW6W5R8" rel="nofollow noreferrer">TIO</a></p>
</div>
<div id="pu6" class="pu"><h1>Python3, 86 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(c):
 while c:
  l=[[],[]]
  for i in c:l[i not in l[1]]+=[i]
  yield l[1];c=l[0]
</code></pre>
<p><a href="https://tio.run/##hY7BCoMwDIbvPkWOuvVQrYex4ZOEnGqLgdIWEYZPX7VD2OZkkMOX5PtD4jwNwatbHFPqjQVb6upewHNgZ0CvBK5DJIFEK9swAgP7deOQwYdpaxzWRNcOeVNmNq7Po4fuHEpKcWQ/lXixJdZSNFIoKQ5AFVXFL7PJzg6nWv1pqn/mMXL@yffk5bd75L3UfrDNqbQA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>17</s> <s>11</s> 7 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>.¬°IN¬£s¬¢
</code></pre>
<p>-6 bytes porting <a href="https://codegolf.stackexchange.com/a/282647/52210"><em>JonathanAllan</em>'s Jelly answer</a> (but without convenient <code>ƒ†</code> builtin).<br />
-4 bytes thanks to <em>@Neil</em></p>
<p><a href="https://tio.run/##yy9OTMpM/f9f79DCQzv9Di2uPLTo//9oYwMdIwMdEwMdQzADGRmDBY1BsrEA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaVL6H@9Qwsj/A4tLj606H@tzv/oaEMDHSMDHWMDHQxGrA5C0ggsDGMgyxiiShpjkcRUhWIFkICImsAkkJExTJuJQWzsf13dvHzdnMSqSgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Original 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a> answer:</strong></p>
<pre><code>v√ê√ô√ækD≈†√µs«ù}\¬Ø)√ô¬®√®
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f@/7PCEwzMP78t2Obrg8Nbi43NrYw6t1zw889CKwyv@/482NtAxMtAxMdAxBDOQkTFY0BgkGwsA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXL/7LDEw7PPLwv2@XogsNbi4/PrY05tF7z8MxDKyqLD6/4r/M/OtrQQMfIQMfYQAeDEauDkDQCC8MYyDKGqJLGWCQxVaFYASQgoiYwCWRkDNNmYhAb@19XNy9fNyexqhIA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>.¬°       # Group the values in the (implicit) input-list by:
  I      #  Push the input-list
   N     #  Push the 0-based group_by-index
    ¬£    #  Leave that many leading items from the input-list
     s   #  Swap so the current value is at the top of the stack
      ¬¢  #  Count how many times it occurs in this input-list prefix
         # (after which the list of lists of values is output implicitly)
</code></pre>

<pre class="lang-python prettyprint-override"><code>v        # Loop the (implicit) input-size amount of times:
 √ê       #  Triplicate the current list
         #  (which will be the implicit input-list in the first iteration)
  √ô      #  Uniquify the top copy
   √æ     #  Remove potential empty strings by only keeping numbers
    k    #  Get all (0-based) indices of these values in the duplicated list
 D       #  Duplicate that list of indices
  ≈†      #  Triple-swap to make the order indices,list,indices
   √µs«ù   #  Insert empty strings at those indices in the list,
         #  to mark the current lap as done
}\       # After the loop: discard the top list of empty strings
  ¬Ø      # Push an empty list (work-around for single-lap input-lists)
   )     # Wrap all other lists of indices into a list
    √ô¬®   # Uniquify and remove the last item to remove all trailing empty lists
      √®  # Index each inner index into the (implicit) input-list
         # (after which the list of lists of values is output implicitly)
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 17 bytes</h1>
<pre><code>Ôº©Ôº•‚åàÔº•Œ∏‚ÑñŒ∏ŒπŒ¶Œ∏‚ÅºŒπ‚Ññ‚Ä¶Œ∏ŒºŒª
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRMM5sbhEwzexAIgrMnNLc8HsQh0F5/xSoCyQkampqamj4JaZU5JaBOK7FpYm5hRrZMKUOFcm56Q6Z@SDdeUCleZogoH1///R0YYGOkYGOsYGOmgMQzDbCCEeG/tftywHAA" rel="nofollow noreferrer" title="Charcoal ‚Äì Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>    Œ∏               Input array
   Ôº•                Map over elements
     ‚Ññ              Count of
       Œπ            Current element
      Œ∏             In input array
  ‚åà                 Take the maximum
 Ôº•                  Map over implicit range
         Œ∏          Input array
        Œ¶           Filtered where
            ‚Ññ       Count of
                Œª   Inner element in
              Œ∏     Input array
             ‚Ä¶      Truncated to length
               Œº    Inner index
          ‚Åº         Equals
           Œπ        Outer value
Ôº©                   Cast to string
                    Implicitly print
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 5 <a href="https://github.com/DennisMitchell/jelly/wiki/code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ƒ†Z·π¢‚Ç¨·ªã
</code></pre>
<p>A monadic Link that accepts a list of car numbers in lap marker observed race order and yields a list of lists of car numbers at progressive laps, each in race order.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///IgqiHOxc9alrzcHf3f53D7UcnPdw5A8jNetQw59A2WzuFRw1zNbMeNe47tO3Qtv//o6MNDXSMDHSMDXQwGLE6XAoIaSOwBIyBKmeIKm2MVRpTHZpFYAoiYwKTREbGMK0mIKWxAA" rel="nofollow noreferrer" title="Jelly ‚Äì Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre><code>ƒ†Z·π¢‚Ç¨·ªã - Link: List, Cars  e.g. [7, 1, 3, 7, 3, 7, 1, 3, 3]
ƒ†     - group the indices of {Cars} by their respective values
                            -&gt; [[2, 7], [3, 5, 8, 9], [1, 4, 6]]
 Z    - transpose           -&gt; [[2, 3, 1], [7, 5, 4], [8, 6], [9]]
  ·π¢‚Ç¨  - sort each           -&gt; [[1, 2, 3], [4, 5, 7], [6, 8], [9]]
    ·ªã - index into {Cars}   -&gt; [[7, 1, 3], [7, 3, 1], [7, 3], [3]]
</code></pre>
</div>
<div id="pu10" class="pu"><h1>JavaScript (ES11), 54 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(p=n=&gt;(o[p[n]=p[n]+1|0]||=[]).push(n),o=[])&amp;&amp;o
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGiNNulpSVpuhY3zRJt7RL1chMLNAps82ztNPKjC6LzYm1BhLZhjUFsTY1tdKymXkFpcYZGnqZOPoinppYP1X0lOT-vOD8nVS8nP10jTSPa0EDHyEDH2EAHgxGrqcmFS7ERWBmMgU-lIapi_Mbi0oXXSUBBiN8WLIDQAA" rel="noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu11" class="pu"><h1>JavaScript, 68 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(c=&gt;o.find(r=&gt;!r.includes(c))?.push(c)??o.push([c]),o=[])&amp;&amp;o
</code></pre>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false" data-babel-preset-react="false" data-babel-preset-ts="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=

a=&gt;a.map(c=&gt;o.find(r=&gt;!r.includes(c))?.push(c)??o.push([c]),o=[])&amp;&amp;o

console.log(JSON.stringify(f([10,20,30,10,20,30,10,20,30])))
console.log(JSON.stringify(f([10,20,30,20,10,30,20,10])))
console.log(JSON.stringify(f([10,20,30,10,20,10,30,20,30])))
console.log(JSON.stringify(f([10,20,30,10,20,30,10,20,10,30,20,10,20,30])))</code></pre>
</div>
</div>
</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282639/">282639</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




