<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::32015</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>320</td><td>Python3</td><td>250310T214044Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/278591#278591">Ajax1234</a></td></tr>
<tr d-ix="1"><td>121</td><td>J</td><td>141023T115221Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/40205#40205">jpjacobs</a></td></tr>
<tr d-ix="2"><td>258</td><td>Python 2</td><td>141024T122327Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/40276#40276">6502</a></td></tr>
<tr d-ix="3"><td>106</td><td>CJam</td><td>141023T135224Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/40207#40207">Optimize</a></td></tr>
<tr d-ix="4"><td>378</td><td>Python 2</td><td>141023T144440Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/40216#40216">undergro</a></td></tr>
<tr d-ix="5"><td>085</td><td>GolfScript</td><td>141023T093052Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/40204#40204">Peter Ta</a></td></tr>
<tr d-ix="6"><td>nan</td><td>C#</td><td>140720T230151Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/34839#34839">VisualMe</a></td></tr>
<tr d-ix="7"><td>133</td><td>Ruby 2.0</td><td>140619T045533Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/32021#32021">Paul Pre</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>140619T084719Z</td><td><a href="https://codegolf.stackexchange.com/questions/32015/are-you-in-the-biggest-room/32023#32023">edc65</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 320 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b):
 d={}
 for x,r in E(b):
  for y,v in E(r):d[v]=d.get(v,[])+[(x,y)]
 U={*d['X'],*d[' ']}
 q,R=U,[]
 while q:
  v,*q=q
  T,L=[v],[v]
  for x,y in T:
   for X,Y in[(0,1),(0,-1),(1,0),(-1,0)]:
    if(N:=(x+X,y+Y))in U and N not in L:L+=[N];T+=[N]
  R+=[L];q={*q}-{*L}
 return{*d['X']}&amp;{*max(R,key=len)}
</code></pre>
<p><a href="https://tio.run/##bVFda8IwFH1ef8XFhzVpY1H3MpQ8@lZ8EIVKF0al6SzTtE2js4i/3d20m5viheQcDueem4@yMZtCvbyW@nKZcqn2O6kTI51UZpCRNR07kPLT2YGs0HBkGnIF005vpYYdOknTcRofBE@DD2nIgcWC@jE5soYKB5b85KWxG7mCWQRXYGLF5nyJPge@NvlWQmUzD8yreIVkwUKOeQzXzyjMsqMW1tYKEVuhEJMBG1KGe9/CkA1w71sQrRPyjMzGnBz9iDX@ilLMWEKiUpiBKoyNDMehz@OZmCxawK45klBMKjx3de6fvBDPq6XZa/V7kfPzydslRzJnn7LhW6no@VIPgUOv13OCtpwAIACEqAO4gc5i3fXopu23Ff43PKDBlVpiK7hPwIrgSu8MdmL7z6Z4XxeJTkmN3/rUXRPi2MtF@8y5faIs3xqpyaxQkkEd1OU2N8R9Uy7F/3VKnStDMvKXNKSUPpBHKF@@AQ" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h2>J : <strike>150</strike> 121 bytes</h2>

<pre><code>(({~[:($&lt;@#:I.@,)p=1:)=([:({.@#~(=&gt;./))/@|:@}.({.,#)/.~@,))(&gt;./**@{.)@(((,|."1)0,.0 _1 1)&amp;|.)^:_[(*i.@:$)2&gt;p=:' X'i.];._2
</code></pre>

<p><em>Edit</em>: <code>id</code> and <code>comp</code> were ridiculously complicated and slow.
Now it works shifting the map 4 times, instead of scanning it with a 3x3 window using <code>cut</code> (<code>;.</code>). </p>

<p>Takes as argument the blueprint as string. Explained below:</p>

<pre><code>    s =: 0 :0
..........
.   .  . .
.  .   . .
.  .   . .
. ..   . .
..       .
..........
.      X .
.        .
..........
)
p=:' X' i. ];._2 s                NB. 0 where space, 1 where X, 2 where wall
id=:*i.@:$2&gt;p                     NB. Give indices (&gt;0) to each space
comp =: (&gt;./ * *@{.)@shift^:_@id  NB. 4 connected neighbor using shift
  shift =: ((,|."1)0,.0 _1 1)&amp;|.  NB. generate 4 shifts
size=:|:}.({.,#)/.~ , comp        NB. compute sizes of all components
NB. (consider that wall is always the first, so ditch the wall surface with }.)
NB. is the component where X is the one with the maximal size?
i=: $&lt;@#:I.@,                     NB. find index where argument is 1
(comp {~ i p=1:) = {.((=&gt;./)@{: # {.) size

NB. golfed:
(({~[:($&lt;@#:I.@,)p=1:)=([:({.@#~(=&gt;./))/@|:@}.({.,#)/.~@,))(&gt;./**@{.)@(((,|."1)0,.0 _1 1)&amp;|.)^:_[(*i.@:$)2&gt;p=:' X'i.];._2 s
0
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Python 2 - 258 bytes</h1>

<pre><code>r=range;h=input();m="".join(raw_input()for x in r(h))
w=len(m)/h;n=0;f=[x!='.'for x in m]
for i in r(w*h):
 if f[i]:
    a=[i];M=s=0
    while a:
     i=a.pop();s+=1;M|=m[i]=='X';f[i]=0
     for j in(i-1,i+1,i-w,i+w):a+=[[],[j]][f[j]]
    n=max(s,n)
    if M:A=s
print A==n
</code></pre>

<p>uses stdin for input</p>

<p>Note: first <code>if</code> is indented by a single space, other indented lines are either using a single tab char or a tab and a space.</p>
</div>
<div id="pu3" class="pu"><h2>CJam, 106 bytes</h2>

<p>A different approach to flood fill. Although, makes it longer ...</p>

<pre><code>liqN-'Xs0aer\_:L*{_A=' ={[AAL-A(]1$f=$:D1=Sc&lt;{D2&lt;(aer}*D0=_' ={T):T}@?A\t}*}fAT),\f{\a/,}_$W%_2&lt;~&gt;@@0=#0=&amp;
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow">Try it here</a></p>
</div>
<div id="pu4" class="pu"><h1>Python 2 - 378 bytes</h1>

<p><em>Wow.</em> I'm out of practice.</p>

<pre class="lang-py prettyprint-override"><code>def t(l,x,y,m,c=' '):
 if l[y][x]==c:l[y][x]=m;l=t(l,x-1,y,m);l=t(l,x+1,y,m);l=t(l,x,y-1,m);l=t(l,x,y+1,m)
 return l
def f(s):
 l=s.split('\n');r=range(int(l.pop(0)));l=map(list,l);n=1
 for y in r:
    for x in r:l=t(l,x,y,*'0X')
 for y in r:
  for x in r:
    if l[y][x]==' ':l=t(l,x,y,`n`);n+=1
 u=sum(l,[]).count;o=sorted(map(u,map(str,range(n))));return n&lt;2or u('0')==o[-1]!=o[-2]
</code></pre>

<p>This is a function answer, but it pollutes the global namespace. If this is unacceptable, it can be fixed at the cost of 1 byte:</p>

<ul>
<li>Add a space to the beginning of line 1 (+1)</li>
<li>Replace the space at the beginning of lines 2 and 3 with a tab character (+0)</li>
<li>Move line 4 to the beginning (+0)</li>
</ul>

<p>I had a whole long explanation written out, but apparently it didn't save properly and I'm not doing that again l m a o</p>
</div>
<div id="pu5" class="pu"><h2>GolfScript (85 bytes)</h2>

<pre><code>n/(~.*:N:^;{{5%[0.^(:^N]=}/]}%{{{.2$*!!{[\]$-1=.}*}*]}%zip}N*[]*0-:A{.N=A@-,2*+}$0=N=
</code></pre>

<p><a href="http://golfscript.apphb.com/?c=O1snNgouLi4uLi4KLiAgLiAuCi5YIC4gLgouICAuIC4KLiAgLiAuCi4uLi4uLicKCicxMAouLi4uLi4uLi4uCi4gICAuICAuIC4KLiAgLiAgIC4gLgouICAuICAgLiAuCi4gLi4gICAuIC4KLi4gICAgICAgLgouLi4uLi4uLi4uCi4gICAgICBYIC4KLiAgICAgICAgLgouLi4uLi4uLi4uJwoKJzcKLi4uLi4uLgouIC4gLiAuCi4gLiAuIC4KLiAuWC4gLgouIC4gLiAuCi4gLiAuIC4KLi4uLi4uLiddewojIEVuZCBvZiB0ZXN0aW5nIGZyYW1ld29yayBwcmVmaXgKCm4vKH4uKjpOOl47e3s1JVswLl4oOl5OXT19L119JXt7ey4yJCohIXtbXF0kLTE9Ln0qfSpdfSV6aXB9TipbXSowLTpBey5OPUFALSwyKit9JDA9Tj0KCiMgU3RhcnQgb2YgdGVzdGluZyBmcmFtZXdvcmsgc3VmZml4CnB9LwoK" rel="nofollow noreferrer">Online demo</a></p>

<p>This has three sections:</p>

<ol>
<li><p>An initial input transformation which produces a 2D array using <code>0</code> to represent a wall, <code>N</code> (the total number of cells) to represent my starting position, and a distinct number between those for each other open space.</p>

<pre><code>n/(~.*:N:^;{{5%[0.^(:^N]=}/]}%
</code></pre></li>
<li><p>A flood-fill. </p>

<pre><code>{{{.2$*!!{[\]$-1=.}*}*]}%zip}N*
</code></pre></li>
<li><p>The final counting. This uses a variant on the tip for <a href="https://codegolf.stackexchange.com/a/25737/194">most common element in an array</a>, adding a tie-breaker which biases against <code>N</code>.</p>

<pre><code>[]*0-:A{.N=A@-,2*+}$0=N=
</code></pre></li>
</ol>
</div>
<div id="pu6" class="pu"><h3>C#, <s>444</s> 372/(342 thanks HackerCow)bytes</h3>

<p>Rather poor score and late to the party, but seems to work. Outputs 1 when you have the single biggest office, 0 when you do not. I've not been very intricate with the golfing yet. Works by building up disjoint sets from the input (first loop), tallying the size of each set (second loop) and then looking to see if my set is the largest (third loop).</p>

<p>Two versions are provided, one is a compilable program tat accepts the input from the command line, the other is just a function that expects a string as input and returns an int as the result (and is just a reworked copy of the first) - it does not need any using clauses or the like, should be able to put it anywhere and it will work.</p>



<p>Program <i>372bytes</i>:</p>

<pre class="lang-c# prettyprint-override"><code>using System;class P{static void Main(){int s=int.Parse(Console.ReadLine()),e=0,d=s*s,a=d;int[]t=new int[d],r=new int[d];Func&lt;int,int&gt;T=null,k=v=&gt;t[T(v)]=t[v]&gt;0?a:0;T=v=&gt;t[v]!=v?T(t[v]):v;for(;a&gt;0;)foreach(var m in Console.ReadLine()){a--;if(m!=46){t[a]=a;e=m&gt;46?a:e;k(a+s);k(a+1);}}for(a=d;a--&gt;2;)r[T(a)]++;for(;d--&gt;1;)a=d!=T(e)&amp;&amp;r[d]&gt;=r[T(e)]?0:a;Console.WriteLine(a);}}
</code></pre>

<p>Function <i>342bytes</i>:</p>

<pre class="lang-c# prettyprint-override"><code>static int F(string g){var b=g.Split('\n');int s=int.Parse(b[0]),e=0,d=s*s,a=d;int[]t=new int[d],r=new int[d];System.Func&lt;int,int&gt;T=null,k=v=&gt;t[T(v)]=t[v]&gt;0?a:0;T=v=&gt;t[v]!=v?T(t[v]):v;for(;a&gt;0;)foreach(var m in b[a/s]){a--;if(m!=46){t[a]=a;e=m&gt;46?a:e;k(a+s);k(a+1);}}for(a=d;a--&gt;2;)r[T(a)]++;for(;d--&gt;1;)a=d!=T(e)&amp;&amp;r[d]&gt;=r[T(e)]?0:a;return a;
</code></pre>

<p>Less golfed:</p>

<pre class="lang-c# prettyprint-override"><code>using System;

class P
{
    static int F(string g)
    {
        var b=g.Split('\n');
        int s=int.Parse(b[0]),e=0,d=s*s,a=d;
        int[]t=new int[d],r=new int[d];
        System.Func&lt;int,int&gt;T=null,k=v=&gt;t[T(v)]=t[v]&gt;0?a:0;
        T=v=&gt;t[v]!=v?T(t[v]):v;

        for(;a&gt;0;)
            foreach(var m in b[a/s])
            {
                a--;
                if(m!=46)
                {
                    t[a]=a;
                    e=m&gt;46?a:e;
                    k(a+s);
                    k(a+1);
                }
            }
        for(a=d;a--&gt;2;)
            r[T(a)]++;
        for(;d--&gt;1;)
            a=d!=T(e)&amp;&amp;r[d]&gt;=r[T(e)]?0:a;
        return a;
    }

    static void Main()
    {
        /* F() test
        var s=Console.ReadLine();
        int i=int.Parse(s);
        for(;i--&gt;0;)
        {
            s+="\n"+Console.ReadLine();
        }
        Console.WriteLine(F(s));*/


        int s=int.Parse(Console.ReadLine()),e=0,d=s*s,a=d;
        int[]t=new int[d],r=new int[d];
        Func&lt;int,int&gt;T=null,k=v=&gt;t[T(v)]=t[v]&gt;0?a:0;
        T=v=&gt;t[v]!=v?T(t[v]):v;

        for(;a&gt;0;)
            foreach(var m in Console.ReadLine())
            {
                a--;
                if(m!=46)
                {
                    t[a]=a;
                    e=m&gt;46?a:e;
                    k(a+s);
                    k(a+1);
                }
            }
        for(a=d;a--&gt;2;)
            r[T(a)]++;
        for(;d--&gt;1;)
            a=d!=T(e)&amp;&amp;r[d]&gt;=r[T(e)]?0:a;
        Console.WriteLine(a);
    }
}
</code></pre>
</div>
<div id="pu7" class="pu"><h2>Ruby 2.0, 133 characters</h2>

<p>A collaboration with @Ventero.  Always a good sign when it starts breaking the syntax highlighter!</p>

<p>This is a recursive flood-fill solution.  Reads from STDIN and outputs to STDOUT:</p>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;*a{a.product([~n=$_.to_i,-1,1,n+1]){|p,d|a|=[p]if$_[p+=d]&lt;?.}!=a ?f[*a]:a.size}
gets(p).scan(/ /){$*&lt;&lt;f[$`.size]}
p$*.max&lt;f[~/X/]
</code></pre>

<p>See it <a href="http://ideone.com/8A8MBD" rel="noreferrer">running on Ideone</a>.</p>
</div>
<div id="pu8" class="pu"><h1>Javascript (E6) 155 <s>292</s></h1>

<pre><code>F=(a,n=parseInt(a)+1,x,y)=&gt;[...a].map((t,p,b,e=0,f=p=&gt;b[p]==' '|(b[p]=='X'&amp;&amp;(e=1))&amp;&amp;(b[p]=1,1+f(p+n)+f(p-n)+f(p+1)+f(p-1)))=&gt;(t=f(p))&amp;&amp;e?y=t:t&lt;x?0:x=t)|y&gt;x
</code></pre>

<p><strong>Ungolfed base version</strong></p>

<pre><code>F=a=&gt;
{
  var k, max=0, my=0, k=1, t, n = parseInt(a)+1;
  [...a].forEach( 
    (e,p,b) =&gt;
    {
       x=0;
       F=p=&gt;
       {
          var r = 1;
          if (b[p] == 'X') x = 1;
          else if (b[p] != ' ') return 0;
          b[p] = k;
          [n,1,-n,-1].forEach(q =&gt; r+=F(q+p));
          return r;
       }
       t = F(p);
       if (t) {
          if (x) my = t;
          if (t &gt; max) max = t;
          k++;
          console.log(b.join(''));
       }    
    }
  )
  return my &gt;= max
}
</code></pre>

<p><strong>Test</strong></p>

<p>Javascript console in firefox</p>

<p><code>F('6\n......\n.  . .\n.X . .\n.  . .\n.  . .\n......')</code></p>

<pre><code>1
</code></pre>

<p><code>F('10\n..........\n.   .  . .\n.  .   . .\n.  .   . .\n. ..   . .\n..       .\n..........\n.      X .\n.        .\n..........\n')</code></p>

<pre><code>0
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/32015/">32015</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




