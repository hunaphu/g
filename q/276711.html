<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276711</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>169</td><td>JavaScript ES6</td><td>241116T232957Z</td><td><a href="https://codegolf.stackexchange.com/questions/276711/the-least-number-with-a-given-water-capacity/276713#276713">Arnauld</a></td></tr>
<tr d-ix="1"><td>039</td><td>J</td><td>241117T113106Z</td><td><a href="https://codegolf.stackexchange.com/questions/276711/the-least-number-with-a-given-water-capacity/276719#276719">ovs</a></td></tr>
<tr d-ix="2"><td>177</td><td>R</td><td>241117T060021Z</td><td><a href="https://codegolf.stackexchange.com/questions/276711/the-least-number-with-a-given-water-capacity/276717#276717">Eonema</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 169 bytes</h1>
<pre class="lang-none prettyprint-override"><code>with(Math)f=c=&gt;{for(d=n=[];d.reduce((t,v,i)=&gt;t-max(0,min(m=m&gt;v?m:v,max(...d.slice(i)))-v),c);)for(d=[x=m=1],N=++n;x++&lt;N;g()&gt;1&amp;&amp;d.push(p))g=_=&gt;p=N%x?1:x*g(N/=x);return n}
</code></pre>
<p><a href="https://tio.run/##JYxBboMwEEX3OYUXaTRTG7dkGWfICcoFoqhBxoArbBAYaglxdkrU1fv6eno/xVyMerB9SHxXmm37taGBryI0WJGmbKm6AUrydH@oUg6mnLQBCGIWFikLiSsifApnPThy2Xxzl1m8PillKcfW7rZFxGRGoVHhf@0eyVH6EDlx7lXk/JqrGjBLT6dS9tPYQI9Y0zdlPeVv8ZZe4nsN@QdFVIMJ0@CZX7dXqzWBaUYsVTuuO8/74BzZcmBMd37sWiPbroZnAcdFr7i7x6UCjesT1WHd/gA" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<h3>Output</h3>
<p>This is far too slow for TIO, so here is the full output computed on my laptop:</p>
<pre><code>a(1) = 60
a(2) = 120
a(3) = 440
a(4) = 168
a(5) = 264
a(6) = 840
a(7) = 2448
a(8) = 528
a(9) = 1904
a(10) = 624
a(11) = 1360
a(12) = 2295
a(13) = 816
a(14) = 1632
a(15) = 20128
a(16) = 1824
a(17) = 48300
a(18) = 3105
a(19) = 15392
a(20) = 2208
a(21) = 13024
a(22) = 2400
a(23) = 10656
a(24) = 4080
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, 39 bytes</h1>
<pre><code>(]+[~:1#.[:(-~&gt;./\&lt;.&gt;./\.)__^/@q:])^:_~
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FOJT31NAVbKwV1BR0FAwUrINbVU3AO8nFbWlqSpmtxU10jVju6zspQWS_aSkO3zk5PP8ZGD0TqacbHx-k7FFrFasZZxddBlG_Q5EpNzshXSFOzM9TO1DMygQgvWAChAQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>(              )^:_~   Starting with the input, call the inner function 
                       until the output does not change.

            __^/@q:]   prime factorization as a list of prime powers.

  (-~&gt;./\&lt;.&gt;./\.)      water capacity of each column:
         &lt;.             element-wise minimum of ...
     &gt;./\                cumulative maximum and ...
           &gt;./\.         cumulative maximum from the back.
   -~                   subtract the column heights from this.

     1#.               sum to get total water capacity.
  [~:                  is this not equal to the input?
]+                     add to the current value.
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>186</s> 177 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x,n=0)repeat{if({a=numbers::primeFactors(n&lt;-n+1);b=unique(a)^table(a);d=(0*b+1)%o%b;sum(pmax(pmin(apply(d*upper.tri(d),1,max),apply(d*lower.tri(d),1,max))-b,0))}==x)return(n)}
</code></pre>
<p>Test sequence:</p>
<pre class="lang-r prettyprint-override"><code>f&lt;-\(x,n=0)repeat{if({a=numbers::primeFactors(n&lt;-n+1);b=unique(a)^table(a);d=(0*b+1)%o%b;sum(pmax(pmin(apply(d*upper.tri(d),1,max),apply(d*lower.tri(d),1,max))-b,0))}==x)return(n)}
`names&lt;-`(sapply(1:24,f),1:24)

#&gt;     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15 
#&gt;    60   120   440   168   264   840  2448   528  1904   624  1360  2295   816  1632 20128 
#&gt;    16    17    18    19    20    21    22    23    24 
#&gt;  1824 48300  3105 15392  2208 13024  2400 10656  4080 
</code></pre>
<p>Ungolfed:</p>
<pre class="lang-r prettyprint-override"><code>\ (x,n=0) {
  repeat{
    if (
      {
        # increment n in the arguments of `primeFactors`
        a=numbers::primeFactors(n&lt;-n+1)
        # heights of bars
        b=unique(a)^table(a)
        # repeat b as length(b) rows to make a square matrix
        d=(0*b+1)%o%b
        # calculate amount of water per bar and sum
        sum(pmax(
          # the lesser height of the tallest bars on either side, minus the bar height
          pmin(
            # vector of tallest bars to the left for each position
            apply(d*upper.tri(d),1,max),
            # vector of tallest bars to the right for each position
            apply(d*lower.tri(d),1,max)
          )-b,
          0
        ))
      } == x ) 
    {
      return(n)
    }
  }
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276711/">276711</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




