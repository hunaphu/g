<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::240421</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>004</td><td>Thunno 2</td><td>230809T154355Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/263940#263940">The Thon</a></td></tr>
<tr d-ix="1"><td>029</td><td>JavaScript Node.js</td><td>220102T001918Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240458#240458">Dom Hast</a></td></tr>
<tr d-ix="2"><td>066</td><td>Prolog SWI</td><td>220102T060656Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240470#240470">0							</a></td></tr>
<tr d-ix="3"><td>007</td><td>Pyth</td><td>221003T184251Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/252522#252522">hakr14</a></td></tr>
<tr d-ix="4"><td>005</td><td>Nibbles</td><td>220105T195635Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240633#240633">Darren S</a></td></tr>
<tr d-ix="5"><td>023</td><td>Wolfram Language Mathematica</td><td>220102T042839Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240467#240467">att</a></td></tr>
<tr d-ix="6"><td>034</td><td>PowerShell Core</td><td>220126T000811Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/241766#241766">Julian</a></td></tr>
<tr d-ix="7"><td>005</td><td>Vyxal</td><td>220101T192059Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240427#240427">emanresu</a></td></tr>
<tr d-ix="8"><td>037</td><td>Ruby</td><td>220104T225634Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240580#240580">daniero</a></td></tr>
<tr d-ix="9"><td>006</td><td>05AB1E</td><td>220105T181400Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240626#240626">Kevin Cr</a></td></tr>
<tr d-ix="10"><td>049</td><td>C gcc</td><td>220105T064617Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240595#240595">att</a></td></tr>
<tr d-ix="11"><td>035</td><td>Pari/GP</td><td>220103T142713Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240539#240539">alephalp</a></td></tr>
<tr d-ix="12"><td>061</td><td>Juby</td><td>220102T071056Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240472#240472">Razetime</a></td></tr>
<tr d-ix="13"><td>064</td><td>Java</td><td>220103T014459Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240518#240518">Unmitiga</a></td></tr>
<tr d-ix="14"><td>015</td><td>x8664 machine code</td><td>220102T142933Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240496#240496">m90</a></td></tr>
<tr d-ix="15"><td>040</td><td>Python + Pandas</td><td>220102T043255Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240468#240468">U13-Forw</a></td></tr>
<tr d-ix="16"><td>046</td><td>Python 3.8</td><td>220101T191900Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240425#240425">DLosc</a></td></tr>
<tr d-ix="17"><td>047</td><td>C clang</td><td>220102T014438Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240463#240463">Noodle9</a></td></tr>
<tr d-ix="18"><td>023</td><td>Add++</td><td>220101T235625Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240454#240454">lyxal</a></td></tr>
<tr d-ix="19"><td>012</td><td>Perl 5 + p</td><td>220102T000154Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240455#240455">Dom Hast</a></td></tr>
<tr d-ix="20"><td>010</td><td>APL Dyalog Unicode</td><td>220101T195909Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240435#240435">user</a></td></tr>
<tr d-ix="21"><td>005</td><td>Japt</td><td>220101T225720Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240452#240452">AZTECCO</a></td></tr>
<tr d-ix="22"><td>006</td><td>Husk</td><td>220101T225601Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240451#240451">Dominic </a></td></tr>
<tr d-ix="23"><td>003</td><td>BQN</td><td>220101T191642Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240424#240424">ovs</a></td></tr>
<tr d-ix="24"><td>038</td><td>Zsh</td><td>220101T222817Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240449#240449">pxeger</a></td></tr>
<tr d-ix="25"><td>031</td><td>R</td><td>220101T215007Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240447#240447">Giuseppe</a></td></tr>
<tr d-ix="26"><td>044</td><td>Factor</td><td>220101T220850Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240448#240448">chunes</a></td></tr>
<tr d-ix="27"><td>037</td><td>Perl 5</td><td>220101T212104Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240443#240443">Kjetil S</a></td></tr>
<tr d-ix="28"><td>068</td><td>Retina 0.8.2</td><td>220101T213133Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240445#240445">Neil</a></td></tr>
<tr d-ix="29"><td>011</td><td>Haskell + hgl</td><td>220101T212616Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240444#240444">Wheat Wi</a></td></tr>
<tr d-ix="30"><td>010</td><td>Charcoal</td><td>220101T211303Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240441#240441">Neil</a></td></tr>
<tr d-ix="31"><td>009</td><td>J</td><td>220101T203032Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240439#240439">Jonah</a></td></tr>
<tr d-ix="32"><td>5654</td><td>C tcc</td><td>220101T200239Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240436#240436">wizzwizz</a></td></tr>
<tr d-ix="33"><td>6160</td><td>Python 3</td><td>220101T192317Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240429#240429">wizzwizz</a></td></tr>
<tr d-ix="34"><td>005</td><td>Jelly</td><td>220101T200511Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240437#240437">Jonathan</a></td></tr>
<tr d-ix="35"><td>033</td><td>R</td><td>220101T194142Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240433#240433">pajonk</a></td></tr>
<tr d-ix="36"><td>043</td><td>Scala</td><td>220101T194006Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240432#240432">user</a></td></tr>
<tr d-ix="37"><td>022</td><td>APL+WIN</td><td>220101T193452Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240430#240430">Graham</a></td></tr>
<tr d-ix="38"><td>005</td><td>Jelly</td><td>220101T191157Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240422#240422">caird co</a></td></tr>
<tr d-ix="39"><td>007</td><td>MATL</td><td>220101T191913Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240426#240426">Luis Men</a></td></tr>
<tr d-ix="40"><td>051</td><td>JavaScript ES6</td><td>220101T192131Z</td><td><a href="https://codegolf.stackexchange.com/questions/240421/incrementally-increment-identical-integers/240428#240428">Rydwolf </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 4 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ġıŻ+
</code></pre>
<p><a href="https://Not-Thonnu.github.io/run#aGVhZGVyPSZjb2RlPSVDNCVBMSVDNCVCMSVDNSVCQiUyQiZmb290ZXI9JmlucHV0PSU1QjElMkMlMjAxJTJDJTIwMSUyQyUyMDElMkMlMjAxMCUyQyUyMDEwJTJDJTIwMjAlMkMlMjAyMCUyQyUyMDIwJTJDJTIwMzAlMkMlMjA0MCUyQyUyMDQwJTJDJTIwNDAlMkMlMjA0MCU1RCZmbGFncz1TZQ==" rel="nofollow noreferrer">Try it online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>ġıŻ+  # Implicit input
ġ     # Group consecutive items together
 ı    # Map over each group:
  Ż   #  Push [0..length)
   +  #  Add this to the group
      # Implicit output
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 29 bytes</h1>
<p>Saved 6 bytes thanks to <a href="https://codegolf.stackexchange.com/users/44718/tsh">@tsh</a> and 2 more bytes thanks to <a href="https://codegolf.stackexchange.com/users/58974/shaggy">@Shaggy</a>!</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(i=n=&gt;i[n]=i[n]+1||n)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/Z9m@z/R1i5RLzexQCPTNs/WLjM6L9YWRGgb1tTkaf635oqONtSBQTMYjI0FawHqTc7PK87PSdXLyU/XSNNI1NTU/A8A" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<p><code>map</code>s over the input (<code>a</code>) (storing the <code>map</code>ping function as <code>i</code>) and returns the value of setting index <code>n</code> in <code>i</code> to the previous value + <code>1</code>, or the input (<code>n</code>), which will increment the input each following time it's encountered.</p>
</div>
<div id="pu2" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, <s>75</s> 66 bytes</h1>
<pre><code>B+A,[C]--&gt;[A],{C is A+B},B+1+A;[X],{C=X},1+X.
_+_--&gt;[].
a--&gt;0+x,!.
</code></pre>
<p><a href="https://tio.run/##KyjKz8lP1y0uz/z/30nbUSfaOVZX1y7aMVan2lkhs1jBUdupVsdJ21Db0To6AiRoG1GrY6gdoccVrx0PUhmrx5UIpA20K3QU9f7/T9SINtRRgCMjIIrVcdLUAwA" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>This program can be run by calling the grammar <code>a//0</code> to parse the input list. The remainder after parsing will be unified with the output list.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 7 bytes</h1>
<pre><code>+VsUM.g
</code></pre>
<p><a href="https://pythtemp.herokuapp.com/?code=%2BVsUM.g&amp;test_suite=1&amp;test_suite_input=%5B1%2C+2%2C+3%5D%0A%5B1%2C+1%2C+2%2C+2%2C+3%2C+3%5D%0A%5B0%2C+0%2C+0%2C+0%2C+0%5D%0A%5B1%2C+1%2C+10%2C+10%2C+100%2C+100%2C+100%2C+100%5D%0A%5B-5%2C+-5%2C+-5%2C+-5%2C+-4%2C+4%2C+4%2C+4%2C+4%2C+9%2C+9%5D%0A%5B1%2C+1%2C+1%2C+1%2C+2%2C+2%5D&amp;debug=0" rel="nofollow noreferrer">Test suite</a></p>
<h4>Explanation:</h4>
<pre><code>+VsUM.g    | Full code
+VsUM.gkQQ | with implicit variables
-----------+----------------------------------
     .gkQ  | Group identical runs in the input
   UM      | Convert each run to [0..length)
  s        | Flatten
+V       Q | Vector add to input
</code></pre>
</div>
<div id="pu4" class="pu"><h2><a href="http://golfscript.com/nibbles" rel="nofollow noreferrer">Nibbles</a>, 5 bytes</h2>
<pre><code>!$,~~+-@?_
</code></pre>
<p>That's 10 nibbles which are encoded in 0.5 bytes each. Nibbles isn't on TIO yet.</p>
<p>Translation:</p>
<pre><code>!       zip
 $      the input list
 ,~     1..
 ~      (by a function, as opposed to 1 op zip) \x y-&gt;
   +
    -
     @  y
     ?  index
      _ the input list
      implicit x
    implicit y
</code></pre>
<p>Usage: pass the input in via the command line i.e.</p>
<pre><code>nibbles filename.nbl &quot;[1,1,1,1,10,10]&quot;
</code></pre>
<p>Command line args used instead of stdin because input int list would still be 1 nibble in its second use (DeBruijn indicies incremented by 2 from the zip).</p>
<p>This is basically the same as DLosc's solution in Python (adding the difference of the index from its position)</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>28</s> 23 bytes</h1>
<pre><code>g[#]++&amp;/@((g@#=#)&amp;/@#)&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7Pz1aOVZbW03fQUMj3UHZVlkTyAQS/wOKMvNKopV17dIclGPV6oKTE/PqqrmqDXWMdIxrdUAMEBPIgXANdKAQJmdoAEEoGCSpa6qDQCY6MGipYwnXCjEamQsxzQiGjA10TBColqv2PwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<pre><code>          (g@#=#)&amp;/@#   initialize g[x]=x for each x in input
g[#]++&amp;/@(           )  post-increment g[x] for each x in input
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/PowerShell/PowerShell" rel="nofollow noreferrer">PowerShell Core</a>, 34 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>$args|%{if($c-$_){$c=$i=$_}($i++)}
</code></pre>
<p><a href="https://tio.run/##bU9Ra4MwGHz3V3xItir9Arq2G2UIlrI9DTbWvY0hXZa2Ka52JmUD6293iWmrliYR9e6@u9w2@@W5XPE0pSzLeUUWUVGReb6U@6tCLDzCKEn8grCIiIgkpUdEv@@XVek4seeAXhh7bog3OHARDh9@izCIxhq6/sFhSxTgYRtJUE90BcYlDOzpPEdPw4QH0LwN0r4GHWFzhnjcYxwbBwvSAdIby47wFu80Gwbnl7B1Tk211vb1YQ@PWf4wZyv6/LnmTEFRTxLFpZrOJZ/ImcrFZolA@N9WC/gXRECSrspA5xNA5TYVCnrYu5ACfZJAaV1yLnepmsgnIZV2uiYLiI9ubYVJ6WjpOhMbE@DUsveX2XQnVfZtQz5i28Ws2Y4xLmXjAJT/NJXuT0L3TQeDSXYvlWqEr2dXskzplE71Dw" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">Try it online!</a></p>
<p>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/80745/mazzy">mazzy</a>!</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 5 bytes</h1>
<pre><code>Ġvẏf+
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLEoHbhuo9mKyIsIiIsIlsxLDEsMSwxMCwxMCw0LDQsMiwyLDIsMiw1LDYsNiw2XSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>-1 thanks to lyxal</p>
<pre><code>Ġ     # Group runs of identical chars
 vẏf  # 0...n each and flatten
    + # Add to input
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/240422">caird coinheringaahing's answer</a>.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 37 bytes</h1>
<p>Requires Ruby version 2.7 or newer.</p>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a{a.tally.flat_map{[*_1.._1+_2-1]}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsGiNNulpSVpuhY3VXXtEqsT9UoSc3Iq9dJyEkvicxMLqqO14g319OINteONdA1ja2uhigMLFNKiow11FBDIAIKNkLAxEJug4NhYLiSdRmBkDESxsRCDFyyA0AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h5>A quick rundown:</h5>
<p><code>-&gt;a{X}</code> is an anonymous lambda function taking a parameter <code>a</code> and returning <code>X</code>.</p>
<p><code>tally</code> returns a hash with each unique number in the input list and the number of times that number appeared in the list.</p>
<p><code>[*1..4]</code> returns <code>[1,2,3,4]</code>.
<code>flat_map</code> returns a flattened list from the result of the given <code>{code block}</code> being run on each number/count pair returned by <code>tally</code>, where <code>_1</code> is a placeholder for the number and <code>_2</code> is the count. So for example with an array with 5 <code>2</code>s, <code>[*_1.._1+_2-1]</code> returns <code>[2,3,4,5,6]</code>.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 6 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÅγL&lt;+˜
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//cOu5zT422qfn/P8fbaijgEAGEGyEhI2B2AQFxwIA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXL/8Ot5zb72GifnvNf5390tKGOAgIZQLAREjYGYhMUHKujANJlBJSDMiE8kABUDKgOgRCKYOYbGqATIDW6pjoKKNgEaBsSsgQiJLPg1sbGAgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<pre><code>€kā&lt;α+
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//UdOa7CONNuc2av//H22oo4BABhBshISNgdgEBccCAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##S0oszvifnFiiYKeQnJ@SqpdfnJiUmapgY6Pg6u/GZa@k8KhtkoKS/f9HTWuyjzTanNuo/V@HCyTFVZ6RmZOqUJSamKKQmceVks@loKCfX1CiDzEBSqEZaqOgAlabl/o/2lBHAYEMINgICRsDsQkKjuUCaTICSkFYEA6IDxECKkIguBKY2YYG6ARQia6pjgIKNgFahIQsgQhhEtzKWC4A" rel="nofollow noreferrer">verify all test cases</a>.</p>
<pre><code>γεεN+,
</code></pre>
<p>Outputs each item newline separated.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//3OZzW89t9dPW@f8/2lBHAYEMINgICRsDsQkKjv2vq5uXr5uTWFUJAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaBkX2nLpeRfWgLh6fw/t/nc1nNb/bR1/tfWHtpm/z862lBHAYEMINgICRsDsQkKjtVRAOkyAspBmRAeSAAqBlSHQAhFMPMNDdAJkBpdUx0FFGwCtA0JWQIRkllwa2Nj/@vq5uXr5iRWVQIA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p>I have the feeling 5 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a> should be possible, but haven't been able to find it yet. Here are three different 6-bytes approached, though.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Åγ      # Run-length encode the (implicit) input-list, pushing the lists of items and
        # counts separated to the stack
  L     # Transform each count to an inner list in the range [1,count]
   &lt;    # Decrease each by 1 to make the ranges [0,count)
    +   # Add the run-length items to each inner list
     ˜  # Flatten the list of lists
        # (after which this list is output implicitly as result)

€       # Map each item in the (implicit) input-list to:
 k      #  The 0-based index of its first occurrence
  ā     # Push a list in the range [1,length] (without popping)
   &lt;    # Decrease each by 1 to make the range [0,length)
    α   # Get the absolute difference of each with the indices
     +  # And add each to the (implicit) input-items
        # (after which the list is output implicitly as result)
        
γ       # Split the (implicit) input-list into parts of equal adjacent items
 ε      # Map each inner list to:
  ε     #  Map each integer to:
   N+   #   Add the 0-based (inner) map-index
     ,  #   Pop and output it with trailing newline
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 49 bytes</h1>

<pre class="lang-c prettyprint-override"><code>f(r,l,i)int*r;{for(i=0;--l;*r-=i*=r[i--]==*++r);}
</code></pre>
<p><a href="https://tio.run/##bVDtboMwDPxNnsJimkTA2WBdp00pe5GKHxUfqyUGVaCbtIpnZzbQdZUqJ4ovuXPsy81Hno931OT1sShh0/UFtQ/797EKHNZImpo@dPZUtS6gNLbG1DZ0JqUwdVsyJkvTMIqctsP41VIBB8eCnWMy64ATBM6gLhsNJ@V976kuIWBojJ7JVeDfF@AjhMyOIm2Vdzj2XeD7nA5K1J87agLRC@jLru@2GaRSL8EnXKGckkkuKMZzzC9JPK/rrTyzxst6nsQSbxyLcC6rBlTc8t@vK4QXhDXCK0KSMFCDVewQyNTANvEw0iazp24t0Kajn7KtZPJOPy6A2ZrfeGipuvjEoukvysSJs51SBycb@ba6hrdJFxO9qZfoX91BDeMv" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow noreferrer">Pari/GP</a>, 35 bytes</h1>
<pre><code>a-&gt;b=x;[if(b-t,c=0;b=t,b+c++)|t&lt;-a]
</code></pre>
<p><a href="https://tio.run/##XU3LCsMgEPyVJSfFXTB9HEpqfkQ8rAGLUIoEDyn0363SR9LCzDIzDLOJ50iXVAKYwjR6sww2BuEp42T04E1Gryal5COfiV3hlK53wUAjpDnecpVdMx0EwVIiWNsj7BD2ruoqX64F70wjrFhLvf7w/7QOHRF@eEDY4lSx2fq@dU6WJw" rel="nofollow noreferrer" title="Pari/GP – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow noreferrer">Pari/GP</a>, 36 bytes</h1>
<pre><code>a-&gt;p=0;[t+polcoeff(p+=x^t,t)-1|t&lt;-a]
</code></pre>
<p><a href="https://tio.run/##XU3LCsIwEPyVpaeE7kLi4yCa/kiIsIiRQrFLyUHBf48JPlqFmWVmGGaFp54ukiO4zNSJM3ufWhmH03iOUUnrbseESZN9pANxyCwy3BUDdSBTf01FNtU0EBVrjeC9RVghrEPRRb5cDd6ZQZgxl6z58P/UDm0RfrhBWGJXsNj6vg1B5yc" rel="nofollow noreferrer" title="Pari/GP – Try It Online">Try it online!</a></p>
<p>Based on <a href="https://codegolf.stackexchange.com/a/178726/9288">my PARI/GP answer to another challenge</a>.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/cyoce/J-uby" rel="nofollow noreferrer">J-uby</a>, <s>66</s> 61 bytes</h1>
<pre><code>:group_by+:next|:values|:*&amp;(:zip%(:size|:*)|:*&amp;:sum)|:flatten
</code></pre>
<p><a href="https://tio.run/##y9ItTar8n2b73yq9KL@0ID6pUtsqL7WipMaqLDGnNLW4xkpLTcOqKrNAVcOqOLMqFcjXBIlZFZfmAhlpOYklJal5/wsU0vQ0og11FBDIAIKNkLAxEJug4FjN/wA" rel="nofollow noreferrer" title="J-uby – Try It Online">Try it online!</a></p>
<p><s>Surely there is a way to improve this.</s> Yep, <code>+</code> is very useful.</p>
</div>
<div id="pu13" class="pu"><h1>Java, 64 bytes</h1>
<pre class="lang-java prettyprint-override"><code>l-&gt;{int i=0;for(int x:l)System.out.println(x+i++-l.indexOf(x));}
</code></pre>
<p><a href="https://tio.run/##bU/LasMwEDxHX6GjjGuRPk5VYig5BVp6yLH0oMqSWVeWjLQKDsHf7sp90JZ22WFfwwzbyaOsuuZ1hn7wAWmXZ54QLDfJKQTv@M67mHodBPnDuYeI/6zvQpCnKMiQXiwoqqyMkT5IcPRMaI7PfUSJuRw9NLTPV3bAAK59eqYytLHI5NWX92Zx2uwd6laHuqZmO9uqPoNDCtu1MD6wpR9vbXE4RdQ99wn5kOXQOjaWUJaV5eAaPT4aNhaFmGZBVoZLpfSAbJHn3rDLC/qd6w9c/cB1xs0vZKn3nyYyzW8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1>x86-64 machine code, 15 bytes</h1>
<pre><code>3b 06 74 02 31 c9 ad 29 4e fc ff cf e0 f2 c3
</code></pre>
<p><a href="https://tio.run/##VVHLTsMwEDzbX7EYISVpWgpEHFLKj5QcjB@pwXnITquqVX@dsLErWiSPd3Z3xl7ZYl4LMY7cN5BQtqht98ktaEbZR@tUr/hQEtMKUPIQakQ0PSh@yGHjvKli7UuB/zZ9SHRJDp2b9PmfaWqWxHbSy2jgUgb/vKiuKiLVdI@5nNkeIQ4Qc6eQpCu674wEnZh2gDaHKWQcy/c4pN1JBW9@kKZbbN8pnZoNN20Qc1eLHMSWO8gyTPYpPVESOpsK1nB6yuG6lhHPN3hBFP9wXsUDLNq9OapOJzx9vLAwFdGJzSEyfJQwiEH1coXhbg0W42yWQu@woxP2YIChfmOqydLvBp8whvQ8jj9CW177cd68Frjhh63Ro@wv" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Following the standard calling convention for Unix-like systems (from the System V AMD64 ABI), this takes the length of the array in RDI and the address of the array of 32-bit integers in RSI. The starting point is after the first 4 bytes.</p>
<p>Assembly:</p>
<pre><code>.global f
repeat:
    cmp eax, [rsi]      # Compare last value and current value
    je skip             # Jump if they are equal
f:
    xor ecx, ecx        # (If not equal, or at the start) ECX = 0
skip:
    lodsd               # Put the current value in EAX, and advance the pointer
    sub [rsi-4], ecx    # Subtract ECX from the (same) value
    dec edi             # Count down from the length
    loopnz repeat       # Jump back if not finished, also reducing ECX by 1
    ret                 # Return
</code></pre>
<p>Here is another solution I found, at 16 bytes, taking the arguments in the opposite order:</p>
<pre><code>.global f
f:
    mov eax, edx
repeat:
    cmpxchg [rdi], edx
    cmovne edx, eax
    inc edx
    scasd
    dec esi
    jnz repeat
    ret
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://python.org" rel="nofollow noreferrer">Python</a> + <a href="https://pandas.pydata.org/" rel="nofollow noreferrer">Pandas</a>, 40 bytes</h1>
<pre><code>lambda L:S(L)+S(L).groupby(L).cumcount()
</code></pre>
<p>The code doesn't run on TIO, since it's <code>pandas</code>...</p>
<p>But anyway, <a href="https://tio.run/##XU7LDoIwELz3KyacaCwGRA@S4Bdw44gcyktJhDZtOfD1SCEomszszkw2uytH8xR9ODVKdJC8r7hG20mhDNJatbXGHKSkie/Ti3dFxZFEqZvQgy3HhxKDLEYry6ErxdAbl06m1kYjRkaQBQwnhjBnq16tTbbQZ/hiNxb4G//LMuRdGH54ZtjjOmO/7XM6JzlphIJ9Em2/dB0RSNXOz1vH4Hg3h6FZHKXTGw" rel="nofollow noreferrer">here</a> is the code.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3.8</a>, <s>48</s> 46 bytes</h1>
<p><em>2-byte savings jointly contributed by <a href="https://codegolf.stackexchange.com/users/53748">Jonathan Allan</a> and <a href="https://codegolf.stackexchange.com/users/88546">dingledooper</a></em></p>

<pre class="lang-python prettyprint-override"><code>lambda L,j=1:[n-(j:=j-1)-L.index(n)for n in L]
</code></pre>
<p><a href="https://tio.run/##XU5BDoIwELz3FRNONNkaKppok/oCfoA9YIAI0UKgB319tRAUTWY2O5PJ7vRPd@1seugHX@uzvxX3S1kgo1ZLlVsRt0q3QnKRbRpbVo/Y8robYNFYZMa7anQjNHKGXBK2hNTQvM8yOIuZEL5YxWSy8H9MIbEn/HBHWOP4xvra57VhhoWyoWToO5VVDP3QWBcHRYjEKSLUk@LcvwA" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>The original 48-byte solution is easier to explain:</p>
<pre class="lang-python prettyprint-override"><code>lambda L:[n+i-L.index(n)for i,n in enumerate(L)]
</code></pre>
<p>Consider each number <span class="math-container">\$n\$</span> in the list together with its index <span class="math-container">\$i\$</span>. Suppose that we are looking at the <span class="math-container">\$k^{th}\$</span> occurrence (0-indexed) of the number <span class="math-container">\$n\$</span>. We want to add <span class="math-container">\$k\$</span> to the number. Since identical numbers are adjacent, the index of the <span class="math-container">\$0^{th}\$</span> occurrence of <span class="math-container">\$n\$</span> will be at index <span class="math-container">\$i-k\$</span>. This is the result of <code>L.index(n)</code>, meaning <span class="math-container">\$k\$</span> is <code>i-L.index(n)</code>. Add that value to <span class="math-container">\$n\$</span> for each element of the list, and we're done.</p>
<p>To get the 46-byte solution, we track the index using a variable instead of <code>enumerate</code>, updating it in the list comprehension using Python 3.8's &quot;walrus operator&quot; <code>:=</code>. We could track the actual index <span class="math-container">\$i\$</span>:</p>
<pre class="lang-python prettyprint-override"><code>lambda L,i=-1:[n+(i:=i+1)-L.index(n)for n in L]
</code></pre>
<p>but it saves a byte to track <span class="math-container">\$j \equiv -i\$</span> instead, because we can initialize it to <code>1</code> instead of <code>-1</code>.</p>
</div>
<div id="pu17" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 47 bytes</h1>

<pre class="lang-c prettyprint-override"><code>b;f(*a,n){for(b=0;n--;b+=*a-b-*++a?-b:1)*a+=b;}
</code></pre>
<p><a href="https://tio.run/##rVPbbpwwEH3PV4yQNuJiq9yjxKV5qPoVu/sALKQoqXe1IHXVFb9eOmtjbJM8RUXGt3PmcpihpvVbyV@mqWKt65eEe9f2eHarImScUlYFhV/SivpBUD7T6iny/DIoKjZOHR/gV9lx14PrHeBzuxiafoi2eyjgGhGICSQjW4B4ASR2g21GIhkhAT0MODUdRKF615NhkUkLmhGw3pSAOR5xGFa5FWdJd2RKpy9ovaQJzUQqlEsil1QumVxybS7OXFr33Z/m2LrCifdlPvnySMBAYxuNbTSx0cRGUxtNbTSz0cxGcxvNPUNHczk19dAcPiy5AmMTnGuOX33F0qWPFGtNSU1HovTRUnSxE9fr8GYLYEUoOqbx0gJ4mxN4EC0QhSvT3JIl@FKf7gNFlczlexCtXm8TvU31NtNb1SL1kfcD1D/Ls49zU782Z@nf2V1@xLvL43d8M4eAeU6c2Rp/X3BvMjp@aC5oFrJ5@1XVVQXUpV1uGASBYHvCmfy1ddujO9n6grNnJgx8Rvk79HRGvHWdrePpS53onCQmyEV8z4hrmm/6zQFld8837U8OzsO22xsux3cR90C/gR3WHQhwj9nKGsxhKeZH4k5l3yMn@lT@0lYs9/ciaSgwHq7s/wnd9DuOTNUxt2jKZLwbp791@1a@9BP9/Q8" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<p>Inputs a pointer to an array of integers and its length (because pointers in C carry no length info).<br />
Incrementally increments identical elements in place.</p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/cairdcoinheringaahing/AddPlusPlus" rel="noreferrer">Add++</a>, <s>26</s> 23 bytes</h1>
<pre><code>L,dBG€bL€RbFz£+dbL1Xz£_
</code></pre>
<p><a href="https://tio.run/##S0xJKSj4/99HJ8XJ/VHTmiQfIBGU5FZ1aLF2SpKPYQSQEf9fJScxNyklUcHQzp7L////aF1TBQQyUYBBSwXLWAA" rel="noreferrer" title="Add++ – Try It Online">Try it online!</a></p>
<h2>Explained</h2>
<pre><code>L,dBG€bL€RbFz£+dbL1Xz£_
L,                       # create a lambda that:
  d                      # pushes two copies of the input
   BG                    # ... groups the second on consecutive items
     €bL                 # ... gets the length of each of those groups
        €R               # ... creates the range [1...n] for each of those lengths (add++ doesn't have a range [0...n) built-in for some reason dang it caird.)
          bF             # ... flattens that list
            z            # and zips it with the original input. This creates a list of items and how much to increment by
             £+          # now, reduce each item by addition
               dbL       # and push the length of the list, keeping a copy on the stack of the original list
                  1X     # push a list of length(^) 1s
                    z£_  # and subtract that from each item in the other list (this is just to account for the fact that there's no [0...n) built-in)
</code></pre>
</div>
<div id="pu19" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> + <code>-p</code>, 12 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$_+=$h{$_}++
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/18lXttWJaNaJb5WW/v/f11TLgQy4YJBSy7Lf/kFJZn5ecX/dQtyAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu20" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>22 17</s> 10 bytes</h1>
<p>Saved 7 bytes thanks to ovs!</p>

<pre class="lang-apl prettyprint-override"><code>∊{⊂⍺+⍳≢⍵}⌸
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkGXFyPeucqBOTnVKZl5uQopOUXKZTmZRaWpirkJhZnc4UC1VRXG9pq6z/q3Wp7aL3ho7aJQFbtoRU6MSD6fxpQwaOOrupHXU2PendpP@rd/KhzEUjmUc@O///TFAwVjBSMuUA0iAVkg3kGMAiVMTSAIBQMlDu03hQNmyjAoKWCJUw3xGwA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
</div>
<div id="pu21" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 5 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ü ®í+
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=/CCu7Ss&amp;input=WzEsIDEsIDIsIDIsIDMsIDNd" rel="nofollow noreferrer">Try it</a></p>
<pre><code>ü      - group
  ®    - for each
   í+  - zip with index then sum
</code></pre>
</div>
<div id="pu22" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="noreferrer">Husk</a>, 6 bytes</h1>
<pre><code>ṁGo→Kg
</code></pre>
<p><a href="https://tio.run/##yygtzv6f@6ip8f/DnY3u@Y/aJnmn////PzraUMdIxzhWB0iDWEA2mGegA4VQGUMDCELBQDldUx0EMtGBQUsdS5hGiLGxsQA" rel="noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<pre><code>     g  # group equal elements
ṁ       # then map the following onto each group
        # (concatenating the results):
 G      #   scan from left
        #   (arg1=result so far, arg2=next element)
  o     #   combination of 2 functions:
    K   #     constant function (= arg1)
   →    #     incremented
</code></pre>
</div>
<div id="pu23" class="pu"><h1><a href="https://mlochbaum.github.io/BQN/" rel="noreferrer">BQN</a>, 3 bytes<sup><a href="https://github.com/mlochbaum/BQN/blob/master/commentary/sbcs.bqn" rel="noreferrer">SBCS</a></sup></h1>
<p>Perfect challenge for BQN's <em>occurence count</em> builtin.</p>
<pre class="lang-none prettyprint-override"><code>+⟜⊒
</code></pre>
<p><a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAgK+KfnOKKkgoKPuKLiOKfnEbCqCDin6gx4oC/MuKAvzMKMeKAvzHigL8y4oC/MuKAvzPigL8zCjDigL8w4oC/MOKAvzDigL8wCjHigL8x4oC/MTDigL8xMOKAvzEwMOKAvzEwMOKAvzEwMOKAvzEwMArCrzXigL/CrzXigL/CrzXigL/CrzXigL/CrzTigL804oC/NOKAvzTigL804oC/OeKAvzkKMeKAvzHigL8x4oC/MeKAvzLigL8y4p+p" rel="noreferrer">Run online!</a></p>
<p>The modifier <code>⟜</code> composes two functions. If there is a single argument (as is the case here), the right function is called on that argument, and then the left function is called with that result and the original argument:</p>
<pre><code>(f⟜g x) ≡ (x f g x)
</code></pre>
<p>The builtin <code>⊒</code> takes a vector and returns for each element how many times the same value appeared before:</p>
<pre><code>(⊒ 1‿1‿1‿10‿10‿100) ≡ 0‿1‿2‿0‿1‿0
</code></pre>
<p>The result of <code>⊒</code> is then added element-wise to original input by <code>+</code>:</p>
<pre><code>(1‿1‿1‿10‿10‿100 + 0‿1‿2‿0‿1‿0) ≡ 1‿2‿3‿10‿11‿100
</code></pre>
<hr />
<p>Ports of other more interesting answers:</p>
<ul>
<li><a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAg4oqiK+KKksucLeKKkMucCgo+4ouI4p+cRsKoIOKfqDHigL8y4oC/Mwox4oC/MeKAvzLigL8y4oC/M+KAvzMKMOKAvzDigL8w4oC/MOKAvzAKMeKAvzHigL8xMOKAvzEw4oC/MTAw4oC/MTAw4oC/MTAw4oC/MTAwCsKvNeKAv8KvNeKAv8KvNeKAv8KvNeKAv8KvNOKAvzTigL804oC/NOKAvzTigL854oC/OQox4oC/MeKAvzHigL8x4oC/MuKAvzLin6k=" rel="noreferrer"><code>⊢+⊒˜-⊐˜</code></a>, <a href="https://codegolf.stackexchange.com/a/240425">DLosc in Python</a></li>
<li><a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAgKOKKoivLnT3ijJzDl+KKkjzijJziipIpy5wKCj7ii4jin5xGwqgg4p+oMeKAvzLigL8zCjHigL8x4oC/MuKAvzLigL8z4oC/Mwow4oC/MOKAvzDigL8w4oC/MAox4oC/MeKAvzEw4oC/MTDigL8xMDDigL8xMDDigL8xMDDigL8xMDAKwq814oC/wq814oC/wq814oC/wq814oC/wq804oC/NOKAvzTigL804oC/NOKAvznigL85CjHigL8x4oC/MeKAvzHigL8y4oC/MuKfqQ==" rel="noreferrer"><code>(⊢+˝=⌜×⊒&lt;⌜⊒)˜</code></a>, <a href="https://codegolf.stackexchange.com/a/240426">Luis Mendo in MATL</a></li>
</ul>
</div>
<div id="pu24" class="pu"><h1><a href="https://www.zsh.org/" rel="nofollow noreferrer">Zsh</a>, 38 bytes</h1>
<pre>p=.5
for x;echo $[(c=p-x?0:c+1)+(p=x)]</pre>
<p><a href="https://ato.pxeger.com/run?1=m724qjhjwYKlpSVpuhY31Qps9Uy50vKLFCqsU5Mz8hVUojWSbQt0K-wNrJK1DTW1NQpsKzRjIaphmgyiDXQUgEjXFA2b6CggI0swMjSIhWoEAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>I think there might a solution abusing <code>mv</code>'s backup functionality like <a href="https://codegolf.stackexchange.com/a/35950">this answer</a>, but I can't work out how.</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 31 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a)a+seq(!a)-match(a,a)
</code></pre>
<p><a href="https://tio.run/##ZZDNDsIgDMfvPkWNFxpLAnNqPOiLGA8N0biDM@p8fsRugCBpCfz760f69F04e395927o7r1i5OXr/FBzRn3jwV0VE6NQyilL0BCsEBegD3CcvqdZDo/SV/3jJpGgTQmGIFukTaxSoGNta6LXV9lLGJui8hI5D6vXBIW3od2P7YLFojGuw0i6SWxQNwRbYa2pR03LqNYlqbI3RP8B" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/240439/67312">Jonah's J answer</a>. Uses 1-based indices but it makes no difference.</p>
<p>Test harness taken from <a href="https://codegolf.stackexchange.com/a/240433/110034">pajonk's answer</a>.</p>
</div>
<div id="pu26" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a>, 44 bytes</h1>
<pre><code>[ dup '[ over + swap _ index - ] map-index ]
</code></pre>
<p><a href="https://tio.run/##VY/NCsIwEITvfYq5eZBK6x@oDyBevIinUiS0Ww3GNCapWqXPHltrizKzMB/DLmzGEptrt99ttuslzqQlCWS6xIXZEwxdC5IJGRxJkmaCP5nluTRQmqwtlebSYuV5L4QYY4Lqk5rcUMtBr64Ng9b/07T@7MdTdFrU6pe/5yvPRUgLhUGE/EYaQ5g7UziAy5Qe8BHXTyi/pdjNIZlSosTIIBHEtHsD" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>Port of @Dlosc's <a href="https://codegolf.stackexchange.com/a/240425/97916">Python answer</a>.</p>
<p><code>dup '[ ... _ ... ]</code> slots a copy of the input into the quotation at the <code>_</code>. <code>map-index</code> is like <code>map</code> except it also places the index on the stack in addition to the element.</p>
<p>There were a lot of other approaches and attempts; the last three are just longer versions of the above.</p>
<pre><code>[ histogram &gt;alist [ first2 over + 1 &lt;range&gt; ] map-concat ]
[ [ ] group-by values [ dup length iota v+ ] map-flat ]
[ histogram [ over + 1 &lt;range&gt; ] f assoc&gt;map concat ]
[ dup '[ _ overd index -rot + - abs ] map-index ]
[| l | l [ | n i | n i + l index - ] map-index ]
[| l | l [ over + swap l index - ] map-index ]
</code></pre>
</div>
<div id="pu27" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 37 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/-?\d+/$&amp;-$f?$i=0:$i++;$i+($f=$&amp;)/ge
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/79YX9c@JkVbX0VNVyXNXiXT1sBKJVNb2xpIaKik2aqoaeqnp/7/b6hgpGDMZagAooEsINtAAQrBooYGEISCuXRNFRDIRAEGLRUsIZogxv3LLyjJzM8r/q@bWAAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu28" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 68 bytes</h1>
<pre><code>r(`(?&lt;=(^|,)(\3,)*)((-)?\d+)
#$#2$*1$4$3$*
+`1-1
-
#(-)?(1*)-?
$1$.2
</code></pre>
<p><a href="https://tio.run/##VYzBCsJADETv@Y2NkGwTaXbroaDs0Z8oZQU9ePFQPPrva@tWSpkJ80jITI/383UrB7rmMlGmdL7Q@BGmIQp7JlJOw71hcOgCesMOI3posqmBglvuZJ41ARoeQykmQSKYLDnTzK2s@m2trd4N6Ek2d/JXL319qnVf" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>r(`
</code></pre>
<p>Use right-to-left matching for the whole script, as that allows the matches to be specified slightly more golfily.</p>
<pre><code>(?&lt;=(^|,)(\3,)*)((-)?\d+)
</code></pre>
<p>Match each integer, and count how many times it's been repeated.</p>
<pre><code>#$#2$*1$4$3$*
</code></pre>
<p>Replace each integer with a marker <code>#</code>, the repetition count in unary, and the integer in unary. Note that if the integer is positive this already adds the count to the integer.</p>
<pre><code>+`1-1
-
</code></pre>
<p>If the integer was negative then find the difference between it and the count.</p>
<pre><code>#(-)?(1*)-?
$1$.2
</code></pre>
<p>Convert the integer back to decimal, ignoring a trailing <code>-</code> sign, which indicates that the count was at least as large as the absolute value of the integer and therefore the result is no longer negative.</p>
<p>28 bytes in <a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina 1</a> if only non-negative integers need to be supported:</p>
<pre><code>r`(?&lt;=(\2,)*)(\d+)
$.(*_$#1*
</code></pre>
<p><a href="https://tio.run/##K0otycxLNPyvquGe8L8oQcPexlYjxkhHU0tTIyZFW5NLRU9DK15F2VDr/39DHSMdYy5DHRANZAHZBjpQCBY1NIAgFAyRgegBAA" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>r`(?&lt;=(\2,)*)(\d+)
</code></pre>
<p>From right to left, match each integer, and count how many times it's been repeated.</p>
<pre><code>$.(*_$#1*
</code></pre>
<p>Add the number of repetitions to the integer.</p>
</div>
<div id="pu29" class="pu"><h1>Haskell + <a href="https://gitlab.com/WheatWizard/haskell-golfing-library" rel="noreferrer">hgl</a>, 11 bytes</h1>
<pre><code>gr+&gt;zW(+)nn
</code></pre>
<h2>Explanation</h2>
<p>Most of this is pretty simple</p>
<ul>
<li><code>gr</code> is &quot;group&quot;; it groups a list into a list of equal segments.</li>
<li><code>zW</code> is &quot;zip with&quot;; it takes a function and uses it to combine two lists pairwise.</li>
<li><code>(+)</code> is &quot;plus&quot;; it adds things.</li>
<li><code>nn</code> is &quot;the natural numbers&quot;; an infinite list of all non-negative numbers in order.</li>
<li><code>zW(+)nn</code> combines the last 3 into a single thing which takes a list and adds every element with its index.</li>
</ul>
<p>The last thing here that links <code>gr</code> with <code>zW(+)nn</code>. The <code>+&gt;</code> operator.  This operator has a name it's called &quot;Kleisli composition&quot;.  Regular composition takes functions <code>a -&gt; b</code> and <code>b -&gt; c</code> and produces a third function <code>a -&gt; c</code>, Kleisli composition does very similar.  It takes Kleisli morphisms, which are just a particular kind of function, that maps into a monad.  So <code>a -&gt; m b</code> where <code>m</code> is a monad would be an example of a function from <code>a</code> to <code>m b</code>, but is a Kleisli morphism from <code>a</code> to <code>b</code>.</p>
<p>So Kleisli composition takes a function <code>a -&gt; m b</code> and a function <code>b -&gt; m c</code> and produces a function <code>a -&gt; m c</code> where <code>m</code> is some monad.</p>
<p>This is in fact sort of the fundamental essence of a monad, that Kleisli composition forms a category.  So how are we using it here?</p>
<p>Well we have <code>gr :: List a -&gt; List (List a)</code> and <code>zW(+)nn :: List a -&gt; List a</code> and the thing we want is <code>List a -&gt; List a</code>. A naive way to do it would be to group the whole thing map across each element and the concat everything back up:</p>
<pre><code>jn&lt;m(zW(+)nn)&lt;gr
</code></pre>
<p>However an experienced Haskell golfer will notice that map and then concat is exactly the monad behavior of the <code>List</code>.  So we could potentially get a bind to do the concat and the map in one go.</p>
<p>And now if we look at the types we can see they fit the shape of Kleisli morphisms.  So we can actually, compose, map and concat all at once using Kleisli composition.</p>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 10 bytes</h1>
<pre><code>ＩＥθ⁺ι№…θκι
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRMM5sbhEwzexQKNQRyEgp7RYI1NHwTm/FCRTmZyT6pyRD5bK1tRRyNQEAev//6OjDXUUEMgAgo2QsDEQm6Dg2Nj/umU5AA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Does not require the array to be sorted or grouped. Explanation:</p>
<pre><code>  θ         Input array
 Ｅ          Map over elements
    ι       Current element
   ⁺        Plus
     №      Count of
         ι  Current element in
      …θκ   Prefix of input
Ｉ           Cast to string
            Implicitly print
</code></pre>
<p>Alternative approach, also 10 bytes, but requires the array to be grouped:</p>
<pre><code>ＩＥθ⁺ι⁻κ⌕θι
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRMM5sbhEwzexQKNQRyEgp7RYI1NHwTczD8jI1lFwy8xLAUlkaoKB9f//0dGGOgoIZADBRkjYGIhNUHBs7H/dshwA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>  θ         Input array
 Ｅ          Map over elements
    ι       Current element
   ⁺        Plus
      κ     Current index
     ⁻      Minus
       ⌕    First index of
         ι  Current element in
        θ   Input array
Ｉ           Cast to string
            Implicitly print
</code></pre>
</div>
<div id="pu31" class="pu"><h1><a href="http://jsoftware.com/" rel="noreferrer">J</a>, 9 bytes</h1>
<pre><code>+i.@#-i.~
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/tTP1HJR1M/Xq/mty@TnpKURbWds4aIBFNfX16rhSkzPyFdIUDHWQkAEEGyFhYyA2QcH/AQ" rel="noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Basically a port of <a href="https://codegolf.stackexchange.com/a/240425/15469">DLosc's python answer</a>, which fits naturally in the array paradigm.</p>
<h2>how</h2>
<p>Consider <code>1, 1, 1, 1, 10, 10, 20, 20, 20, 30, 40, 40, 40, 40</code></p>
<ul>
<li><p><code>i.~</code> Index of each element's first appearance:</p>
<pre><code>0 0 0 0 4 4 6 6 6 9 10 10 10 10
</code></pre>
</li>
<li><p><code>i.@#-</code> Subtract that from <code>0 1 2 ... n</code>:</p>
<pre><code>0 1 2 3 0 1 0 1 2 0 0 1 2 3
</code></pre>
</li>
<li><p><code>+</code> Add that to the original input:</p>
<pre><code>1 2 3 4 10 11 20 21 22 30 40 41 42 43
</code></pre>
</li>
</ul>
</div>
<div id="pu32" class="pu"><h1><a href="http://savannah.nongnu.org/projects/tinycc" rel="nofollow noreferrer">C (tcc)</a>, <del>56</del> 54 bytes</h1>

<pre class="lang-c prettyprint-override"><code>c;f(int*p,int*q){for(c=0;p-q;*p+=++c)c*=!(*p-*++p-c);}
</code></pre>
<p><a href="https://tio.run/##VVDbboMgGL7nKf65bAHBRVfvqHsRZ4wBTEkcUqW7mPHZHbQaLeHj8MN3AJE4IZZF8BZr42LLwnglU9sPWBQpt8mVx5YWlAoi4uIFxzaJKbWJIHxeXrUR3U0qOI9O6v7j8oXQb68l2MHr1J0eHR71n6oddMow8EWQjWvKisCEwLf7xRZHZUT4veCNYeNoKCDlfjoHul9QuvGO3DfJIGIPYV2tOvOTfPVtgsGMUIjw02iDN6VQcGp0tWhGVWZ55U2njMHe0wc@Dzh55E@Y1/j4fRdLKwaHbXbawh2@J8vZbr8eD8rdBuOfjublHw" rel="nofollow noreferrer" title="C (tcc) – Try It Online">Try it online!</a></p>
<ul>
<li>-2 bytes thanks to <a href="/users/97857/pxeger">pxeger</a></li>
</ul>
<p>This is a rather straightforward port of my suboptimal <a href="https://codegolf.stackexchange.com/a/240429/43394">Python answer</a>. Takes a pointer to the beginning and end of the array.</p>
<h2>Explanation</h2>
<pre class="lang-c prettyprint-override"><code>c;  /* int c; (thanks pxeger) */
f(
    int *p,  /* pointer to the first integer */
    int *q   /* pointer to the last integer */
) {
    for (
        c=0;  /* initialise the increment */
        p-q;  /* reached the end? (if so, stop) */

        /* note: these run out of order */
                         *p+=++c)
        c*=!(*p-*++p-c);
        /*
            equivalent to:
                int original_p0 = p[0] - c;  // undo increment
                if (original_p0 != p[1]) {
                    c = 0;  // different, so reset counter
                }
                p[1] += c;
                c += 1;
                p += 1; // move to next p
        */
}
</code></pre>
</div>
<div id="pu33" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <del>61</del> 60 bytes</h1>
<p>I wrote this answer to make sure my algorithm was sound, before I <a href="https://codegolf.stackexchange.com/a/240436/43394">implemented it in C</a>.</p>

<pre class="lang-python prettyprint-override"><code>def f(a,b=.5,c=0):
 for d in a:c*=not d-b;yield d+c;c+=1;b=d
</code></pre>
<p><a href="https://tio.run/##VcNLCoAgEADQfaeYpZZF300yJ4kW6SQJoVFuOr0FLSp4bzvD4l0TI80GDJuEwqITGkveJ2D8DgTWwdTrFJ0PQLmSp51XAsq01BlWUiHFbbcusNUegRk2VAJe5bP@bO7t78g5jxc" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<pre class="lang-python prettyprint-override"><code>def f(
    a,     # input list
    b=.5,  # previous value
    c=0    # consecutive counter
):
    for d in a:
        c *= not d-b;  # if d and b are different, c = 0
        yield d + c;
        c += 1;
        b = d          # next loop, this'll be the previous value
</code></pre>
</div>
<div id="pu34" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 5 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>+ċṪ$Ƥ
</code></pre>
<p>A monadic Link accepting a sorted list of integers that yields a list of integers.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/1/7SPfDnatUji35//9/tK6pjgIKNtFRQEaWQBQLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>+ċṪ$Ƥ - Link: list of integers, A
    Ƥ - for prefixes of A:
   $  -   last two links as a monad, f(prefix):
  Ṫ   -     pop off the tail from the prefix
 ċ    -     count occurrences of that in the remaining prefix
+     - A add that (vectorises)
</code></pre>
</div>
<div id="pu35" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>40</s> 33 bytes</h1>
<p><em>Edit: -7 bytes thanks to @Giuseppe.</em></p>

<pre class="lang-r prettyprint-override"><code>function(a)a+sequence(rle(a)$l)-1
</code></pre>
<p><a href="https://tio.run/##ZZDNCsIwDMfvPkVADw220M6peNAXEQ@jVBiMitM9f43Z2tpaktL@88sHGUNP5xzuk7fv/uFFh9325Z6T89aJcXAkbAZUhjlhhZHQSNghrkFd4Lp8b6scnqWv@sctooQ2JWgJ2SKtY5UCnWsbHb2@yl7MmBTlF8t5WLWXUHhL7X7sRBaLxriikVSTWFIPEo7MGl2PmpZRrYtTeW@I4QM" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu36" class="pu"><h1>Scala, 43 bytes</h1>
<pre class="lang-scala prettyprint-override"><code>s=&gt;s.indices.map(i=&gt;s(i)+i-s.indexOf(s(i)))
</code></pre>
<p><a href="https://scastie.scala-lang.org/sEZcMudCRjSsj3EGXOuJeQ" rel="noreferrer">Try it online!</a></p>
<p>A port of <a href="https://codegolf.stackexchange.com/a/240425">DLosc's great answer</a>. Go upvote that!</p>
<h2>My original answer, 48 bytes</h2>
<pre class="lang-scala prettyprint-override"><code>s=&gt;s.distinct.flatMap(x=&gt;x to x-1+s.count(x.==))
</code></pre>
<p><a href="https://scastie.scala-lang.org/7WxItEEnTQODkMZO1M3iaw" rel="noreferrer">Try it online!</a></p>
<p>This one gets distinct elements, then for every element <code>x</code>, it makes a range from <code>x</code> to <code>x + n</code>, where <code>n</code> is the number of occurrences of <code>x</code>.</p>
</div>
<div id="pu37" class="pu"><h1>APL+WIN, 22 bytes</h1>
<p>Prompts for input vector</p>
<pre><code>v+¯1++⌿p×+\p←&lt;⍀v∘.=v←⎕
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlyPWooz3tf5n2ofWG2tqPevYXHJ6uHVMAlLF51NtQ9qhjhp5tGZAHVP8fqJLrfxqXoYKRgjEXiAaxgGwwz0ABCqEyhgYQhIKBcofWmyqgYhMFGLRUsITphpgNAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu38" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 5 bytes</h1>
<pre><code>ŒɠḶF+
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///opJMLHu7Y5qb9/3D70UkPd87QjPz/P5or2lBHwUhHwThWB8yE8EACUDEDHQUEQigyNIBhdAKkRtdURwEFm@goICNLIEIyC25tLFcsAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<h2>How it works</h2>
<pre><code>ŒɠḶF+ - Main link. Takes a list L on the left
Œɠ    - Group run lengths
  Ḷ   - Zero based range
   F  - Flatten
    + - Add elementwise to L
</code></pre>
<p>For example, take <code>L = [1, 1, 2, 2, 3, 3]</code>:</p>
<ul>
<li><code>Œɠ</code>: <code>[2, 2, 2]</code></li>
<li><code>Ḷ</code>: <code>[[0, 1], [0, 1], [0, 1]]</code></li>
<li><code>F</code>: <code>[0, 1, 0, 1, 0, 1]</code></li>
<li><code>+</code>: <code>[0, 1, 0, 1, 0, 1] + [1, 1, 2, 2, 3, 3] = [1, 2, 2, 3, 3, 4]</code></li>
</ul>
</div>
<div id="pu39" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, 7 bytes</h1>
<pre><code>t&amp;=XRs+
</code></pre>
<p><a href="https://tio.run/##y00syfn/v0TNNiKoWPv//2hDHQUQMoBhdCIWAA" rel="noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8L9EzTYiqFj7v0vI/2hDHQUjHQXjWC4QC8IB8ZGFDA1gGJ0AKgEyEIg4LbqmOgoo2ERHARlZAhHCJLirYgE" rel="noreferrer">verify all test cases</a></p>
<h3>How it works</h3>
<p>Consider input <code>[1, 1, 10, 10, 100, 100, 100, 100]</code> as an example.</p>
<pre><code>t    % Implicit input. Duplicate
     % STACK: [1 1 10 10 100 100 100 100], [1 1 10 10 100 100 100 100]
&amp;=   % Matrix of equality comparisons 
     % STACK: [1 1 10 10 100 100 100 100], [1 1 0 0 0 0 0 0
                                            1 1 0 0 0 0 0 0
                                            0 0 1 1 0 0 0 0
                                            0 0 1 1 0 0 0 0
                                            0 0 0 0 1 1 1 1
                                            0 0 0 0 1 1 1 1
                                            0 0 0 0 1 1 1 1
                                            0 0 0 0 1 1 1 1]
XR   % Upper triangular part, without the diagonal
     % STACK: [1 1 10 10 100 100 100 100], [0 1 0 0 0 0 0 0
                                            0 0 0 0 0 0 0 0
                                            0 0 0 1 0 0 0 0
                                            0 0 0 0 0 0 0 0
                                            0 0 0 0 0 1 1 1
                                            0 0 0 0 0 0 1 1
                                            0 0 0 0 0 0 0 1
                                            0 0 0 0 0 0 0 1]
s    % Sum of each column
     % STACK: [1 1 10 10 100 100 100 100], [0 1 0 1 0 1 2 3]
+    % Add, element-wise. Implicit display
     % STACK: [1 2 10 11 100 101 102 103]
</code></pre>
</div>
<div id="pu40" class="pu"><h1>JavaScript (ES6), 51 bytes</h1>
<pre><code>x=&gt;x.map((y,i)=&gt;y+x.reduce((r,z,k)=&gt;r+=z==y&amp;k&lt;i,0))
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/240421/">240421</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




