<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::174142</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>072</td><td>Haskell + hgl</td><td>240717T144836Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/274213#274213">Wheat Wi</a></td></tr>
<tr d-ix="1"><td>165</td><td>Lexurgy</td><td>240717T161918Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/274217#274217">bigyihsu</a></td></tr>
<tr d-ix="2"><td>060</td><td>JavaScript Node.js</td><td>181017T093417Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/174176#174176">tsh</a></td></tr>
<tr d-ix="3"><td>060</td><td>Perl 6</td><td>181017T103044Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/174177#174177">nwellnho</a></td></tr>
<tr d-ix="4"><td>688</td><td>Retina 0.8.2</td><td>181017T082607Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/174172#174172">Neil</a></td></tr>
<tr d-ix="5"><td>032</td><td>Jelly</td><td>181016T225107Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/174151#174151">Jonathan</a></td></tr>
<tr d-ix="6"><td>nan</td><td>APL Dyalog</td><td>181016T234035Z</td><td><a href="https://codegolf.stackexchange.com/questions/174142/japanese-pitch-accent-numbers/174154#174154">Adalynn</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a> + <a href="https://gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 72 bytes</h1>
<p><em>Uses <code>u</code> and <code>d</code> to indicate tones</em></p>
<pre class="lang-haskell prettyprint-override"><code>f=fcq sA&lt;fmX ao&lt;K
</code></pre>
<pre><code>skX&quot;du_|d_.+u&quot;&lt;&lt;fo&lt;&lt;f&quot;d&quot;^.f&quot;u&quot;1&lt;gky(rX&quot;.[ャュョ]?&quot;)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYubXmm2acmFCsWONmm5EQqJ-TbeXIm2xdkRSiml8TUp8XrapUo2Nmn5QKyUohSnl6ZUqmRok55dqVEUoaQX_bh58ePmpY-bl8faK2lCTZyVm5iZp2CrkJLPpaBQEKygopCoYKCg9LhpO1h18-OmtY-bNyshJA3xSRrhkzTGJ2mCKQlx4YIFEBoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>We define <code>f</code> as a function to insert a value at a particular location in a list.  We will use this to insert the tone markings.</p>
<ul>
<li><code>gky(rX&quot;.[ャュョ]?&quot;)</code>: break the input into moras using a regex</li>
<li><code>f&quot;u&quot;1</code>: insert a <code>&quot;u&quot;</code> between the first and second moras</li>
<li><code>f&quot;d&quot;</code>: insert a &quot;d&quot; before the syllable given by the index</li>
<li><code>fo</code>: concat back together</li>
<li><code>skX&quot;du_|d_.+u&quot;</code>: remove a <code>u</code> directly following a <code>d</code> or a <code>d</code> that comes before a <code>u</code> possibly with intermediate characters.</li>
</ul>
<h1>No regex, 81 bytes</h1>
<p><em>Uses <code>/</code> and <code>,</code> to indicate tones</em></p>
<pre class="lang-haskell prettyprint-override"><code>f=fcq sA&lt;fmX ao&lt;K
</code></pre>
<pre><code>fo&lt;&lt;(!)(f&quot;/&quot;1:f&quot;,&quot;1:f&quot;/&quot;1&lt;&lt;f&quot;,&quot;&lt;eF2)^.gky(hdS&lt;&gt;?xys&quot;ャュョ&quot;)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYubwWm2acmFCsWONmm5EQqJ-TbeXIm2afk2NhqKmhppSvpKhlZpSjpgEsi2sQFxbFLdjDTj9NKzKzUyUoJt7OwrKouVHjcvfty89HHzciVNqNGzchMz8xRsFVLyuRQUCoIVVBQSFQwUlB43bQerbX7ctPZx82YlhKQhPkkjfJLG-CRNMCUhLlywAEIDAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>We use the same <code>f</code> function as the last answer.</p>
<ul>
<li><p><code>gky(rX&quot;.[ャュョ]?&quot;)</code> breaks the input into the moras.</p>
</li>
<li><p><code>f&quot;/&quot;1:f&quot;,&quot;1:f&quot;/&quot;1&lt;&lt;f&quot;,&quot;&lt;P1&lt;nN</code> is an infinite list of functions with the function at the nth place being the function to insert the tones for the nth pitch accent.</p>
</li>
<li><p><code>(!)</code> indexes our list of functions by the pitch accent number.</p>
</li>
<li><p><code>fo</code> combines the pieces back together.</p>
</li>
</ul>
<h2>Reflection</h2>
<p>This is very long, I think it could be shorter somehow, but I'm not sure. There are a couple of improvements that already jump out though.</p>
<ul>
<li>I don't know why <code>(!)</code> still doesn't have a prefix, this is getting annoying.</li>
<li>The <code>f</code> we've defined here should just be a library function.</li>
<li>There should be a shorthand for <code>ʃ&lt;p</code> / <code>p&lt;&lt;χ</code>. It wouldn't improve either the regex or regex free version but I noticed it didn't exist.</li>
<li>I could add a function for <code>(*:*)^.pY</code> which save one byte on the no regex version, but I am not convinced of the overall utility of this function.</li>
<li>It would be useful to have a function which maps across the tail of the list. This would make it cheaper to insert things for this particular challenge and seems like it would generally be useful.</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.lexurgy.com/sc" rel="nofollow noreferrer">Lexurgy</a>, <s>442</s> 165 bytes</h1>

<pre class="lang-bash prettyprint-override"><code>class F {I,ャ,ュ,ョ,^,v}
element s !@F @F*(0-2)
h:
*=&gt;^/$ @s _
I @s$1 *=&gt;* $1 v/$ _
@s$1 * *=&gt;v $1 ^/$ I+ _
l propagate:
I=&gt;*/_ !@F
then:
v @s$1 =&gt; $1 v/$ I []* _
</code></pre>
<p><a href="https://lexurgy-app.vercel.app/sc?changes=Y2xhc3MgRiB7SSzjg6Ms44OlLOODpyxeLHZ9CmVsZW1lbnQgcyAhQEYgQEYqKDAtMikKaDoKKj0-Xi8kIEBzIF8KSSBAcyQxICo9PiogJDEgdi8kIF8KQHMkMSAqICo9PnYgJDEgXi8kIEkrIF8KbCBwcm9wYWdhdGU6Ckk9PiovXyAhQEYKdGhlbjoKdiBAcyQxID0-ICQxIHYvJCBJIFtdKiBf&amp;input=44OKCuOCs-ODieODogrjg6_jgr_jgrcK44Ks44OD44Kz44KmCknjgq0KSeOCreODpApJ44Kt44OjCknjgrjjgrfjg6cKSeODgeODpeOCpuOCtOOCrwpJ44OK44OLCknjgrfjg6XjgqQKSeOCreODp-OCpgpJ44Kt44Oj44Oz44OQ44K5CklJ44Kt44Oo44KrCklJ44Kt44On44KrCklJ44Kz44Kz44OtCklJ44K444OG44Oz44K344OjCklJSeOCu-ODs-OCu-OCpApJSUnjgr_jgq_jgrXjg7MKSUlJSeOCouOCv-ODqeOCt-OCpApJSUlJ44Kq44OI44Km44OICklJSUlJSeOCuOODpeOCpuOCpOODgeOCrOODhA" rel="nofollow noreferrer">Try it on Lexurgy!</a></p>
<p>Expects input of the form <code>IK</code>, where <code>I</code> is the unary representation of the kind of pitch accent with each digit being <code>I</code>, and <code>K</code> which is the kana string. So, the input <code>4 アタラシイ</code> would be <code>IIIIアタラシイ</code>.</p>
<p>Output uses <code>^v</code> for <code>/\</code>.</p>
<ul>
<li>-227 bytes by removing the big list of kana. The core functionality is the same, though.</li>
</ul>
<h3>Ungolfed Explanation</h3>
<pre class="lang-bash prettyprint-override"><code>class K {ア,イ,ウ,エ,オ,カ,キ,ク,ケ,コ,サ,シ,ス,セ,ソ,タ,チ,ツ,テ,ト,ナ,ニ,ヌ,ネ,ノ,ハ,ヒ,フ,ヘ,ホ,マ,ミ,ム,メ,モ,ヤ,ユ,ヨ,ラ,リ,ル,レ,ロ,ワ,ン,ッ,ガ,ギ,グ,ゲ,ゴ,ザ,ジ,ズ,ゼ,ゾ,ダ,ヂ,ヅ,デ,ド,バ,ビ,ブ,ベ,ボ,パ,ピ,プ,ペ,ポ}
class Y {ャ,ュ,ョ}
class p {^,v}
element syl @K @Y? @p? # a mora is a big kana with optional small kana. add ^,v so that it's considered part of the syllable
# `syllable` wasn't used here because it ended up being really hard to implement using syllables, and trying to account for the unary numeral at the front.
# use unary I for counting
# no I for 0, one I for 1, etc.

heibangata:
# 0 = LHH...
* =&gt; ^ / $ @syl _

atamadakagata:
# 1 = HLL...
I @syl$1 * =&gt; * $1 v / $ _

the-rest-start:
# k&gt;1= L.k*H.L...
# start by placing a rise after the 1st syllable:
@syl$1 * * =&gt; v $1 ^ / $ I+ _
# then propagate so that we delete one I each time, and move the L to the right 1 syllable
the-rest-loop propagate:
I =&gt; * / _ @K # delete an I
then:
v @syl$1 =&gt; $1 v / $ I []* _ # move the v to the right when there is an I to start
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 60 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>n=&gt;s=&gt;s.replace(/.[ャュョ]?/g,s=&gt;i=--n-i?s+1:n?s:s+2,i=0)
</code></pre>

<p><a href="https://tio.run/##dZLBTsJAEIbvPgU32mBZQOMBU3kQ64FgITWkJdR4d8cQxIvPAIiR0HBAA4YDD7MPUme6BbZ1SXpo/plv/tmZeWg@NcNW3@s9Wn5w78ZtO/btmxC/ct/tdZst12DlWwETAR8CPu8arHOOUc@2LN/yGmGpWvcbYT0s1c49u2LGrcAPg65b7gYdo21UTKMoYFQ0zesCYwX6Z8UzTQ5fCXgVMD5m8hVLJV0@LAXfCb5WKi9ZKmnrLwQAufCZYrFgRzVHVRMqUpIjx9EnbdAUR6Okbhwn1XQAPNMs@Uzwb8GXygtIJ3If0cIjAW/qPBFAQdvYOvGZKo2tU4fpiediy9kJkZK0dBLAw8DdvQv@m8Um1Ng@koNr6cpp61F25XxFXKQnNgIGVJTeMVHnjXscSD8ZytEXCb1N4tvsRLZMqtqpSA6PCq/tB/MUbsekmrjmucuEGxMKX9RSxnLMDgGtq6TnAoZ0CjBU0Dk7qP@v8Wo/I3lcUzoouvsXdVIYZbkwVor/AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, <s>63</s> 60 bytes</h1>

<p><em>-3 bytes thanks to Lynn's suggestion to use other separators than <code>/ \</code></em></p>



<pre class="lang-perl6 prettyprint-override"><code>-&gt;\n{&amp;{S:g[.&lt;[ャュョ]&gt;?]=$/~7 x!$++*?+^-n~1 x(++$==n&gt;0)}}
</code></pre>

<p><a href="https://tio.run/##XVLRSgJBFH3Or5hgkd1WnaxQSHf0F6LeHAMfNALbxDUwRKGZELOXvkHNSBQfLDR88GPmQ2yuO@4sPiyz59wzZ@aeO7VyvZraPjyjaAU52zihbivaur68KySyBcGHgn8K/lUkuaJj4E4aNY8N2z7J2bdxt5NETdO2DcdxyanVbm@fvDK6KXuNTETa5RvIiZinMXSVFbxP1IqJFduzbCH4m@ADohBWUCv4XLCNYEu1e44VDHlMBefgxMbKZoo1A7qkT89UeUbD7Eq6yfZUbUUV1Ar@AgGwsWA/gs2J5qgmQ@q@4O/7Vin8h85a7pxGRCMKMHxHebZuBBA97GI3EZnbh2B/WjekmgT12T5fiHim82ULCjgkWQnehb1wn@E@Bplgl2oW5Od@ab1j17qNNfaZoBUllGOSs/uVRSXcYJ8B353wwucHoOXfcFRgOsABGfgq@UTwHiTPe0o7wQHjTzYVNObPbQTzgmfySnQFH5Tk1kykVi25yM7L51t5rMP7jRNkGm4MGZ78yhZqRY7uPVSRnGUangVkolEvuZ6ZxYhSghyCsmmUBLP29h8" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>

<p>Curried function. Uses <code>7 1</code> instead of <code>/ \</code>.</p>

<h3>Explanation</h3>

<pre class="lang-perl6 prettyprint-override"><code>-&gt;\n{     # Block taking argument n
  &amp;{      # Return a block
    S:g   # Replace globally
    [.&lt;[ャュョ]&gt;?]  # regex for mora
    =$/            # with match
     ~7            # followed by 7
      x!$++*?+^-n  # if i==1 and n!=1
                   # should be read as (! $++) * (? +^ - n)
                   # +^ is bitwise negation like ~ in C
                   # ? converts to Bool like !! in C
                   # so ?+^-n is like !!~-n or !!(n-1) or n!=1
     ~1            # followed by 1
      x(++$==n&gt;0)  # if i==n and n&gt;0
  }
}
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 68 bytes (UTF-8)</h1>

<pre><code>\d+(.[ャュョ]?)
$1/$&amp;$*1\
/1\b

/.
/
+`1(1*.)(.[ャュョ]?)
$2$1
</code></pre>

<p><a href="https://tio.run/##ZU8xTsNAEOz3HQeyE8mXcxAtJY/ASAFBkYYiygfYRSiEhjfETiIQkYsE2ZELHjMPMbuHqGhOszOzs3Oz@/n04aY/SS4nfXE3TLIrSAlZQ7bXFym54N2pG4SCfChuiXxGnoaTkIRBlv4z5y70/QiypBF4D3mBrBRKDf4GN8Z@QsQ03lAA7@xpVdIEhfJoYbwBH8C1EUvIq3maKFRxR71/6/G8HnoDHymPuTrtDLaQZ9NstaQxuItTZynj2EdbfSlHZ@CVEfJuZpWV@IAsrIgs6Dxm/daqrKL94ekH" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>

<pre><code>\d+(.[ャュョ]?)
$1/$&amp;$*1\
</code></pre>

<p>Convert the number to unary, wrap it in <code>/\</code>, and insert it after the first mora.</p>

<pre><code>/1\b
</code></pre>

<p>If the number was 1, then delete it and the <code>/</code>, leaving the <code>\</code>.</p>

<pre><code>/.
/
</code></pre>

<p>Subtract 1 from the number, but in the case of <code>0</code>, this deletes the <code>\</code>, leaving the <code>/</code>.</p>

<pre><code>+`1(1*.)(.[ャュョ]?)
$2$1
</code></pre>

<p>Move the <code>\</code> one mora to the right for each remaining <code>1</code>.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 32 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>O%62ḟ€“579‘œṗ⁸Ḋ⁹‘+Ị$,2¤œṖżCØ.ḟƊ}
</code></pre>

<p>A full program accepting a list of characters and a non-negative integer which prints using <code>0</code> for <code>/</code> and <code>1</code> for <code>\</code>.</p>

<p><strong><a href="https://tio.run/##y0rNyan8/99f1czo4Y75j5rWPGqYY2pu@ahhxtHJD3dOf9S44@GOrkeNO4EC2g93d6noGB1aApKZdnSP8@EZekA9x7pq/////7hpx@PmpY@blj1uWvK4ufFx05rHzS3/zQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##XZLBTsJAEIbvPMUG9GR1BRXjxZj4AJ4N5eiF8AIeTOiuIVgvRhPloDGBCpHQcEBDSYkkEHyPdh6kznbbddsDh/7/N//szNC4ajavo@hiu1oJvPeQjcPW69HxSdjqbp6C@UtoeYFnh9YchZ3At7eMysoRzvNmcb7u7mHNr30TbRbr4RnF6gb@yquByLF@DNKQgWT3lIStt8soqtX2DVIEbhfrhJRI2H4k@EELhtTZFPgd8J7msimVWsrwCbAlsJmeMKFSUzlj4FyksYEeNaZKRrIck64OuKbSPYwDPtRdz5RaynAL@AdmAfsCNtHfIwxTOYq3gd9nBjdRUB1ncZojAFKSHWcyx/l/LbbPDSUkMzMR8D5w3OQDsHmO7JvKQb6S7Fys3c3tnE0RdRXkAW@LUvGkfmYpuNO2qSwsOIgL/Fjyk4FS2qdSToaSKF4Ob/qNjo4uqZRFNqKHMdoTNP8UvbLBPaqcJFsWjIB3xCF4R6dHVMni4tV0RHlNRxxQ/IVuM4OiTXO@Waj/AQ" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>

<h3>How?</h3>

<pre><code>O%62ḟ€“579‘œṗ⁸Ḋ⁹‘+Ị$,2¤œṖżCØ.ḟƊ} - Main Link: list of characters S, integer N
O                                - convert to ordinals
 %62                             - modulo by 62
      “579‘                      - code-page indices list = [53,55,57]
                                 -   (representing the three optional characters)
     €                           - for each ordinal:
    ḟ                            -   filter discard if in [53,55,57]
             ⁸                   - chain's left argument, S
           œṗ                    - partition before truthy indices
                                 -   (so before the non optional character positions)
              Ḋ                  - dequeue (remove the leading empty list)
                       œṖ        - partition at indices...
                      ¤          - nilad followed by (links) as a nilad:
               ⁹                 -   chain's right argument, N
                ‘                -   increment
                   $             -   last two links as a monad:
                 +               -     add
                  Ị              -     insignificant? (1 if 1; 0 if 2+)
                    ,2           -   pair with 2
                               } - use right argument, N, for...
                              Ɗ  - last three links as a monad:
                          C      -   compliment = 1-N
                             ḟ   -   filter discard if in...
                           Ø.    -   bits = [0,1]
                                 -     (i.e. if N=0:[0], if N=1:[1], otherwise:[0,1])
                         ż       - zip together
                                 -   e.g. [[["ジュ"],0],[["ウ","イ","チ","ガ","ツ"],1]]
                                 - implicit (smashing) print
                                 -   e.g. ジュ0ウイチガツ1
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 45 characters / 51 bytes* / 83 bytes</h1>

<pre><code>{S←⍵⊂⍨~⍵∊'ャュョ'⋄S[⍺~0],←'\'⋄S[0~⍨⍺≠1],←'/'⋄∊S}
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///vzr4UduER71bH3U1PepdUQdidXSpP25e/Lh56ePm5eqPuluCox/17qoziNUBqlSPgYgYAFWuAAo/6lxgCJHQB0kA9QbX/v/vBhSggcFcj/qmAkUMFNwUgAZ1qUP5hmB@01oY3wzC3wGyqGnZ46Ylj5sbHzetedzcog4A" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p>The second score only applies if the three Katakana characters in the code can be counted as a different encoding than the other portion of the code. </p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/174142/">174142</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




