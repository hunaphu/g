<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::51189</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>030</td><td>05AB1E</td><td>241218T134840Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/277326#277326">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>116</td><td>JavaScript Node.js</td><td>241218T011801Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/277318#277318">l4m2</a></td></tr>
<tr d-ix="2"><td>358</td><td>Go</td><td>240131T223938Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/269664#269664">bigyihsu</a></td></tr>
<tr d-ix="3"><td>222</td><td>C++</td><td>160604T163727Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/81271#81271">Alexande</a></td></tr>
<tr d-ix="4"><td>163</td><td>Python 2</td><td>150607T020027Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51389#51389">Jarmex</a></td></tr>
<tr d-ix="5"><td>047</td><td>Perl  47 Bytes</td><td>150603T021813Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51202#51202">primo</a></td></tr>
<tr d-ix="6"><td>240</td><td>Bash</td><td>150603T162459Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51225#51225">Daniel W</a></td></tr>
<tr d-ix="7"><td>042</td><td>Pyth</td><td>150603T135231Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51220#51220">Jakube</a></td></tr>
<tr d-ix="8"><td>038</td><td>CJam</td><td>150602T212710Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51192#51192">Dennis</a></td></tr>
<tr d-ix="9"><td>239</td><td>Python 2</td><td>150602T221104Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51195#51195">mbomb007</a></td></tr>
<tr d-ix="10"><td>488</td><td>Factor</td><td>150603T042229Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51204#51204">Gaslight</a></td></tr>
<tr d-ix="11"><td>139</td><td>JavaScript Spidermonkey console</td><td>150603T121304Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51214#51214">Not that</a></td></tr>
<tr d-ix="12"><td>149</td><td>JavaScript ES6</td><td>150603T103900Z</td><td><a href="https://codegolf.stackexchange.com/questions/51189/tell-me-how-many-math-problems-i-have-to-do/51212#51212">edc65</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 30 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>',¡ε':¡θDáU'-¡€þŸʒÉXgÉQXõQ~]˜g
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fXefQwnNb1a2A5A6XwwtD1XUPLXzUtObwvqM7Tk063BmRfrgzMOLw1sC62NNz0v//L0jXUzA1MbNSMDTXNbTUUTAyAmIzHQWIuIWVgrGprpm5Qn5Kio6COVDewkDXwkwhtSw1TweoxMTSyErBSNcELG@uawmWAAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9TVmmvpPCobZKCkn2l0n91nUMLz21VtwKSO1wOLwxV1z208FHTmsP7ju44NelwZ0T64c7AiMNbA@tiT89J/6@kF6bzvyBdT8HUxMxKwdBc19BSR8HICIjNdBQg4hZWCsamumbmCvkpKToK5kB5CwNdCzOF1LLUPC6QEmMToE6uAHegYjNTKwUjXVMdIMfYxNTKHCpvbKVgqmOhY2isoAtUA9apA5EBqjc2AYqaW@hYGIBUm1gagYwwAdtmrmuJsIY8F@rgMhMA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>',¡            '# Split the (implicit) input-string on &quot;,&quot;
   ε            # Map over each substring in the list:
    ':¡        '#  Split the substring on (a potential) &quot;:&quot;
       θ        #  Pop and keep the last/only part
        D       #  Duplicate this part
         à      #  Only keep the letters of this copy
          U     #  Pop and store it in variable `X`
        '-¡    '#  Split it on (a potential) &quot;-&quot;
           €þ   #  For each part in this pair/singleton: only keep the digits
                #  (this removes any spaces, as well as &quot;even&quot;/&quot;odd&quot;)
             Ÿ  #  Convert this pair/singleton to a ranged list
    ʒ           #  Filter this list by:
     É          #   Check if the current integer is odd
      X         #   Push string `X`
       g        #   Pop and push its length
        É       #   Check whether this is odd as well
                #   (1 if `X` was &quot;odd&quot;; 0 if it was &quot;even&quot; or &quot;&quot;)
         Q      #   Check whether it equals the odd-check of the integer
     X          #   Push string `X` again
      õQ        #   Check whether it equals an empty string &quot;&quot;
          ~     #   Check if either was truthy
   ]            # Close both the inner filter and outer map
    ˜           # Flatten the list of lists of integers
     g          # Pop and push its length
                # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 116 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=x=&gt;x.replace(/(\d+) *-?( *\d+)? *(o|e|,|$)/g,g=(_,a,b,c)=&gt;a%~(c&gt;{})-(a++-b&amp;&amp;g(_,a,b,c),c=='o'|c=='O')||++n,n=0)&amp;&amp;n
</code></pre>
<p><a href="https://tio.run/##dY7dToQwEIXvfYq5UGhhyvJXWkjKXnqpD2BiutAlGkLJrtlsIvrqWFjjFU4ymXZOznfmXV/0uTm9jR9ssK2Z56O6qvoanczY68aQHXlpQwoB2xMIluceAmInM@F0T3cddoq8osYDNlTV@uGbNPXnF2VEhyE7eF73p2KjlG/9aRlPPp2mMBxwUDH1vGFu7HC2vYl625Ej8ccuAp4XFSSCJSVCmrouEG57WUHGWSHAti2CcLqMmSzAXMzgU3q3Actyx4IN8fnREQteQco4uk@W80rAUv@Ssgo4SkwyYM66puJNcZgsd1shUcbb/rxMl6x8vV2wcrX/xs0/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 358 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import(.&quot;fmt&quot;;.&quot;regexp&quot;;.&quot;strings&quot;)
func f(s string)(O int){C:=Contains
for _,m:=range MustCompile(`pg\.\d+:`).Split(ReplaceAll(ToLower(s),&quot; &quot;,&quot;&quot;),-1){for _,r:=range Split(m,&quot;,&quot;) {if r==&quot;&quot;{continue}
l,h,e,o:=0,0,C(r,&quot;even&quot;),C(r,&quot;odd&quot;)
Sscanf(r,`%d-%d`,&amp;l,&amp;h)
h=max(h,l)
h++
for i:=l;i&lt;h;i++{if e&amp;&amp;i%2&lt;1{O++}else if o&amp;&amp;i%2&gt;0{O++}else if !e&amp;&amp;!o{O++}}}}
return}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VVLbbptAEFVf-YrJSrYWMSDfMBhnI0Vu1Je2iWK_1VWNYLFRuRXWaSrEl_TFqtSXql_Ur-kAdpUiod09e-bMzNn5_mOfn34XfvDZ30tI_Tj7eVSR6f55FcVpkZeKWyxKFVtarJR7-Vy0u0qVcbavmK5FxyyAiFfQQzq_hzhTer3yxCrPFMlVWpSX8AlTT5R-RjneHSu1ytMiTiTfFfuttQ0Nb6db6yKJFX-UReIH8jZJ-CZ_m3-VJa90ZMCQMR3NsV73cuVFrg9LkQg61HEEpRCM1QFlj7OjbLQEDygx98QIR7jiJTL5JDMS6_Z5GFIb6yrws4jOu0FoDsIdDhMcHnTtIFL_mR8woa1hdJ3EnkiW8fVhGRtGm04Oh_Fgcj2u7w2jkUklgcC8A29G_4FXRL3KO4g-rZTqWGbNxe5f6lshYdMaeQwUdZIVZ1OXQLa3tjbak1-CkpWqQMCHj5taq1mxt8CezT0YO-Z4gTCZ0D9H6HHXg6ltzh2gPhEcundHpjuHzgIiOg2eNaYzkiBo3CEPbyh6bnswMW2kw3Rmew7d2i_4Uw9sdHE8BZO4nST2NxQ3nRHquOiOKMoZXcJmi0mrOevqcczFv0KI0PTT1M4gp6fUHqh5lWScCSHWm9vHDa3tyHXvr8AT0E9Ab0it-UEHRlxZZJ6ukeUtdCVAWa2DNXSKEWeDLyBuYBACH4T6ts3fhWDLx56tQ0MFvSzh7v3rvoDzk51O_foX" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Does some input preprocessing (to lowercase, remove spaces), then splits on the pages. After that, for each problem range (matches split on commas), add to the problem count. If it's even only count on even indexes, and the same for odds. If neither, count on each index.</p>
</div>
<div id="pu3" class="pu"><h1>C++ <s>226</s> <s>224</s> 222</h1>

<p>I know I'm kinda late for the party, but this seemed like a fun problem and lack of entries using C-family languages bothered me.</p>

<p>So here's a C++ function using no regexp or string substitution, just some simple math:</p>

<pre><code>void f(){char c;int o=0,i,j;while(cin&gt;&gt;c)c=='p'||c==80?cin.ignore(9,58):cin.unget(),cin&gt;&gt;i&gt;&gt;c&amp;&amp;c==45?cin&gt;&gt;j&gt;&gt;c&amp;&amp;(c=='e'||c=='o')?cin.ignore(9,44),c=='e'?i+=i&amp;1,j+=!(j&amp;1):(i+=!(i&amp;1),j+=j&amp;1),o+=(j-i)/2:o+=j-i:0,++o;cout&lt;&lt;o;}
</code></pre>

<p><strong>Ungolfed</strong>:</p>

<pre><code>void f()
{
  char c;
  int o=0,i,j;
  while(cin&gt;&gt;c)
    c=='p'||c==80?cin.ignore(9,58):cin.unget(),
    cin&gt;&gt;i&gt;&gt;c&amp;&amp;c==45?
      cin&gt;&gt;j&gt;&gt;c&amp;&amp;(c=='e'||c=='o')?
        cin.ignore(9,44),
        c=='e'?
          i+=i&amp;1,j+=!(j&amp;1)
        :(i+=!(i&amp;1),j+=j&amp;1),
        o+=(j-i)/2
      :o+=j-i
    :0,
    ++o;
  cout&lt;&lt;o;
}
</code></pre>

<p>I didn't say it would be readable, now did I? :) Ternary operators are hell. I tried my best to (sort of) format it, though, so I hope it helps at least a little bit.</p>

<p><strong>Usage</strong>:</p>

<pre><code>#include &lt;iostream&gt;
using namespace std;

void f(){char c;int o=0,i,j;while(cin&gt;&gt;c)c=='p'||c==80?cin.ignore(9,58):cin.unget(),cin&gt;&gt;i&gt;&gt;c&amp;&amp;c==45?cin&gt;&gt;j&gt;&gt;c&amp;&amp;(c=='e'||c=='o')?cin.ignore(9,44),c=='e'?i+=i&amp;1,j+=!(j&amp;1):(i+=!(i&amp;1),j+=j&amp;1),o+=(j-i)/2:o+=j-i:0,++o;cout&lt;&lt;o;}

int main()
{
  f();
}
</code></pre>
</div>
<div id="pu4" class="pu"><h2><strong>Python 2 - 163 bytes:</strong></h2>

<p><a href="http://repl.it/q86/4" rel="nofollow">Try it here</a></p>

<p>Input must be given inside quotes
</p>

<pre class="lang-python prettyprint-override"><code>import re
print len(eval(re.sub('([^,]+:|) *(\d+) *-? *(\d*)(?=.(.)).*?,',r'[x for x in range(\2,\3+1 if \3.0 else \2+1)if x%2!="oe".find("\4")]+',input()+',[]')))
</code></pre>

<p><strong>Explanation:</strong></p>

<p>The general approach is to convert the existing input into valid python, then evaluate this. Each comma separated value is converted to an array, which are then all appended together and the length gives the final result.</p>

<p>For example, with the input <code>12-15 odd,19</code>, before evaluation the regex substitution will produce:</p>

<pre class="lang-python prettyprint-override"><code>[x for x in range(12,15+1 if 15.0 else 12+1)if x%2!="oe".find("o")]
+[x for x in range(19,+1 if .0 else 19+1)if x%2!="oe".find("[")]
+[]
</code></pre>

<p>To break this down further:</p>

<ul>
<li><code>15+1 if 15.0 else 12+1</code> This bit will make sure the second argument
of range() is correct depending if there is a range or a single value
given (if \3 is empty, \3.0 will evaluate to false). </li>
<li><p><code>if x%2!="oe".find("o")</code> Depending on the value found two characters away
from the final digit in the range (<code>(?=.(.))</code> in the regex - lookahead two characters without consuming them), there
are three possible outcomes:</p>

<ul>
<li><code>x%2!="oe".find("o")</code> evaluates to <code>x % 2 != 0</code> (only odd matched)</li>
<li><code>x%2!="oe".find("e")</code> evaluates to <code>x % 2 != 1</code> (only even matched)</li>
<li><code>x%2!="oe".find("[")</code> evaluates to <code>x % 2 != -1</code> (this character could be multiple things as it's just two characters away from the
last digit, but will only be o or e if odd/even is intended)</li>
</ul></li>
<li>The seemingly random +[] on the end is to ensure that the last token in the comma-separated list has a character two away from the last digit, but also allows us to append something to the end to use up the last '+' which would have been trailing otherwise. </li>
</ul>
</div>
<div id="pu5" class="pu"><h2>Perl - 47 Bytes</h2>



<pre class="lang-perl prettyprint-override"><code>#!perl -p054
{map$\+=($_%2x9^lc$')!~T,$&amp;..$'*/\d+ ?-/}}{
</code></pre>

<p>Amended to pass the new test case.</p>

<hr>

<p><strong>Original</strong></p>

<h2>Perl - 36 Bytes</h2>

<pre class="lang-perl prettyprint-override"><code>#!perl -p054
$\+=/\d+ ?-/*($'-$&amp;&gt;&gt;/o|e/i)+1}{
</code></pre>

<p>Counting the shebang as 4, input is taken from stdin.</p>

<hr>

<p><strong>Sample Usage</strong></p>

<pre class="lang-perl prettyprint-override"><code>$ echo pg. 546: 17-19, 22, 26, pg. 548: 35-67 odd, 79, 80-86 even | perl math-problems.pl
27

$ echo pg. 34: 1 | perl math-problems.pl
1

$ echo PG. 565: 2-5,PG.345:7 | perl math-problems.pl
5

$ echo pg. 343: 5,8,13 - 56 even,pg. 345: 34 - 78,80 | perl math-problems.pl
70
</code></pre>

<hr>

<p><strong>Caveats</strong></p>

<p>For even/odd ranges, it is expected that at least one of the endpoints matches the parity of the range. For example, <code>11-19 odd</code>, <code>11-20 odd</code>, and <code>10-19 odd</code> will all be correctly counted as 5, but <code>10-20 odd</code> will be over-counted as 6.</p>
</div>
<div id="pu6" class="pu"><h1>Bash <strike>344 315 306 294 262 252 242</strike> 240</h1>

<pre><code>IFS=,
o(){ R=0;for ((i=$1;i&lt;=$2;R+=i++%2));do :
done
}
e(){ q=$R;o $*;((R=q-R))
}
for c in ${1,,};do
c=${c#*:}
m=${c##* }
l=${c%-*}
l=${l// }
h=${c#*-}
[[ a&lt; $m ]]&amp;&amp;h=${h% *}
h=${h// }
((R=h-l+1))
eval "${m::1} $l $h"
((t+=R))
done;echo $t
</code></pre>

<p>I don't think I've golfed this as much as is possible but not bad for a first submission.
Commented version below.</p>

<pre><code>IFS=, # Setup IFS for the for loops, We want to be able to split on commas

o(){ # Odd
    R=0  # Reset the R variable

    # Increments R for each odd element in the range
    # $1-$2 inclusive
    for ((i=$1;i&lt;=$2;R+=i++%2));do
        : # Noop command
    done
}

e(){ # Even
    # Save R, it contains the total number of elements between low
    # and high
    q=$R
    # Call Odd, This will set R
    o $*
    # Set R = total number of elements in sequence - number of odd elements.
    ((R=q-R))
}

# This lowercases the firs arg. IFS causes it to split on commas.
for c in ${1,,};do
    c=${c#*:}  # Strips the page prefix if it exists
    m=${c##* }  # Capture the odd/even suffix if it exists
    l=${c%-*}  # Capture low end of a range, Strips hyphen and anything after it
    l=${l// }  # Strips spaces
    h=${c#*-}  # Capture high end of a range, Strips up to and including hyphen

    # If we have captured odd/even in m this will trigger and strip
    # it from the high range variable.
    [[ a&lt; $m ]]&amp;&amp;h=${h% *}
    h=${h// }  # Strip Spaces

    # Give R a value.
    # If we are in a range it will be the number of elements in that range.
    # If we arent l and h will be equal are R will be 1
    ((R=h-l+1))

    # Call the odd or even functions if we captured one of them in m.
    # If we didnt m will contain a number and this will cause a warning
    # to stderr but it still works.
    eval "${m::1} $l $h"

    # Add R to total
    ((t+=R))
done

# Print result
echo $t
</code></pre>

<p>Run the test cases:</p>

<pre><code>bash math.sh "pg. 546: 17-19, 22, 26, pg. 548: 35-67 odd, 79, 80-86 even"
bash math.sh "pg. 34: 1"
bash math.sh "PG. 565: 2-5,PG.345:7"
bash math.sh "pg. 343: 5,8,13 - 56 even,pg. 345: 34 - 78,80"
bash math.sh "pg.492: 2-4 odd,7-9 even"
</code></pre>

<p>Depending on how I read the rules it could be possible to save another 4 bytes. If even/odd is always lowercase <code>${1,,}</code> can be changed to <code>$1</code></p>
</div>
<div id="pu7" class="pu"><h1>Pyth, <s>43</s> <s>42</s> <s>44</s> 42 bytes</h1>

<pre><code>lsm-%R2}hKvMc-ecd\:G\-eK?}\ed}edGYc-rzZd\,
</code></pre>

<p>Try it online: <a href="https://pyth.herokuapp.com/?code=lsm-%25R2%7DhKvMc-ecd%5C%3AG%5C-eK%3F%7D%5Ced%7DedGYc-rzZd%5C%2C&amp;input=PG.492%3A+2-4+ODD%2C7-9+EVEN&amp;debug=0" rel="nofollow">Demonstration</a> or <a href="https://pyth.herokuapp.com/?code=zFz.z%0Alsm-%25R2%7DhKvMc-ecd%5C%3AG%5C-eK%3F%7D%5Ced%7DedGYc-rzZd%5C%2C&amp;input=Test+cases%3A%0Apg.+546%3A+17-19%2C+22%2C+26%2C+pg.+548%3A+35-67+odd%2C+79%2C+80-86+even%0Apg.+34%3A+1%0APG.+565%3A+2-5%2CPG.345%3A7%0Apg.+343%3A+5%2C8%2C13+-+56+even%2Cpg.+345%3A+34+-+78%2C80%0APG.492%3A+2-4+ODD%2C7-9+EVEN&amp;debug=0" rel="nofollow">Test harness</a></p>

<p>I think I can still chop one or two bytes. </p>

<h3>Explanation</h3>

<pre><code>lsm-%R2}hKvMc-ecd\:G\-eK?}\ed}edGYc-rzZd\,  implicit: z = input string
                                    rzZ     convert z to lower-case
                                   -   d    remove all spaces from z
                                  c     \,  and split by ","
  m                                         map each part d to:
               cd\:                           split d by ":"
              e                               and only use the last part (removes page number)
             -     G                          remove all letters (removes odd/even)
            c       \-                        split by "-"
          vM                                  and evaluate all (one or two) numbers
         K                                    and store the result in K
       }hK            eK                      create the list [K[0], K[0]+1, ..., K[-1]]
    %R2                                       apply modulo 2 to each element
   -                                          and remove:
                         }\ed                   "e" in d (1 for in, 0 for not in)
                        ?    }edG               if d[-1] in "abcde...z" else
                                 Y              dummy value
 s                                            combine all the lists
l                                             print the length                                      
</code></pre>
</div>
<div id="pu8" class="pu"><h1>CJam, <s>61</s> <s>58</s> <s>51</s> <s>48</s> <s>46</s> <s>43</s> <s>41</s> 38 bytes</h1>

<pre><code>leuS-',/{':/W&gt;:~_2*2&lt;~z),&gt;1f&amp;\,5--~}%,
</code></pre>

<p>Verify the test cases in the <a href="http://cjam.aditsu.net/#code=%7BleuS-&#39;%2C%2F%7B&#39;%3A%2FW%3E%3A~_2*2%3C~z)%2C%3E1f%26%5C%2C5--~%7D%25%2Cp%7D5*&amp;input=pg.%20546%3A%2017-19%2C%2022%2C%2026%2C%20pg.%20548%3A%2035-67%20odd%2C%2079%2C%2080-86%20even%0Apg.%2034%3A%201%0APG.%20565%3A%202-5%2CPG.345%3A7%0Apg.%20343%3A%205%2C8%2C13%20-%2056%20even%2Cpg.%20345%3A%2034%20-%2078%2C80%0Apg.492%3A%202-4%20odd%2C7-9%20even" rel="noreferrer">CJam interpreter</a>.</p>

<h3>How it works</h3>

<pre><code>leuS-      e# Read a line from STDIN, convert to uppercase and remove spaces.
',/        e# Split at commas.
{          e# For each chunk:
  ':/W&gt;    e#   Split at colons and only keep the last chunk.
  :~       e#   Evaluate the string inside the array.
  _2*      e#   Copy the array, repeated twice.
  2&lt;       e#   Keep only the first two elements.

           e#   In all possible cases, the array now contains exactly two
           e#   integers, which are equal in case of a single problem.

  ~        e#   Dump the array on the stack.
  z),      e#   Push [0 ... -N], where N is the second integer.
  &gt;        e#   Discard the first M elements, where M is the first integer.
  1f&amp;      e#   Replace each element by its parity.
  \,       e#   Push L, the length of the original array.

           e#   EVEN and ODD all push elements, so L is 1 for single problems,
           e#   2 for simple ranges, 5 for odd ranges and 6 for even ranges.

  5--      e#   Discard all elements equal to L - 5 from the array of parities.

           e#   This removes 0's for odd ranges, 1's for even ranges, -3's for
           e#   other ranges and -4's for single problems, thus counting only
           e#   problems of the desired parities.

  ~        e#   Dump the resulting array on the stack.
}%         e# Collect the results in an array.
,          e# Compute its length.
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Python 2, <s>259</s> <s>253</s> <s>249</s> 239 bytes</h1>

<p><a href="http://repl.it/q86/3" rel="nofollow"><strong>Try it here</strong></a></p>

<p>This can probably still be golfed more.</p>

<p>Edit: Fixed a bug that caused mine to not work for <code>2-4 even</code> as I had expected. Then made an adjustment for that fix. That fix saved me four bytes!</p>

<p>Edit: Now uses <code>input()</code> and <strong>+2 bytes</strong> for the two quotation marks the user must surround input with.</p>



<pre class="lang-python prettyprint-override"><code>import re
c=0
for x in re.sub(r'..\..*?:','',input()).replace(' ','').split(','):
 y=x.split('-')
 if len(y)&lt;2:c+=1
 else:
    a,b=y[0],y[1];d=int(re.sub('[A-z]','',b))-int(a)+1
    if b[-1]&gt;':':d=d/2+d%2*(int(a)%2==ord(b[-3])%2)
    c+=d
print c
</code></pre>

<h3>Less golfed (with comments! :D):</h3>

<p>I hope these comments help some. I'm still not quite sure if I explained that last complex line correctly or not.</p>

<pre class="lang-python prettyprint-override"><code>import re
def f(s):
    c=0
    l=re.sub(r'..\..*?:','',s).replace(' ','').split(',')   # remove pg #'s and split
    for x in l:
        y=x.split('-')
        if len(y)&lt;2:                                # if not a range of numbers
            c+=1
        else:
            a,b=y[0],y[1]                           # first and second numbers in range
            d=int(re.sub('[A-z]','',b))-int(a)+1    # number of pages
            if b[-1]&gt;':':                           # if last character is not a digit
                # half the range
                # plus 1 if odd # of pages, but only if first and last numbers in the range
                #       are the same parity
                # ord(b[-3])%2 is 0 for even (v), 1 for odd (o)
                d=d/2+(d%2)*(int(a)%2==ord(b[-3])%2)
            c+=d
    print c
</code></pre>
</div>
<div id="pu10" class="pu"><h2>Factor - 488 bytes:</h2>
<pre><code>USING: arrays ascii kernel math math.parser math.ranges pcre sequences ;
IN: examples.golf.homework

: c ( a -- b )
    &gt;lower &quot;(?:[,:]|^) *(\\d+) *(?:- *(\\d+) *(e|o)?)?&quot; findall [
        rest [ second dup string&gt;number swap or ] map
        dup length 1 = [ drop 1 ] [
            dup length 2 = [ first2 swap - 1 + ] [
                first3 &quot;o&quot; = [ [a,b] [ odd? ] count ] [
                    [a,b] [ even? ] count
                ] if
            ] if
        ] if
    ] map sum ;
</code></pre>
</div>
<div id="pu11" class="pu"><h1>JavaScript (Spidermonkey console) - 139</h1>

<p>It's just easier to test on the command line.</p>



<pre class="lang-js prettyprint-override"><code>for(r=/[:,] *(\d+)[- ]*(\d+)? *(o|e)?/gi,m=readline(z=0);f=r.exec(m);z+=!b||((p=b-a)%2||!c|a%2^/e/i.test(c))+p/(2-!c)|0)[,a,b,c]=f
print(z)
</code></pre>

<p>Ungolfed:</p>

<pre class="lang-js prettyprint-override"><code>// any number set after "pg:" or a comma
// \1 is FROM, \2 is TO, \3 is odd/even 
r=/[:,] *(\d+)[- ]*(\d+)? *(o|e)?/gi;
m=readline();
z=0; // this is the sum.
while(f=r.exec(m)){
    [,from,to,oddEven]=f;
    if(!to) {
        z++;
    } else {
        if((to-from)%2) {
            // if to and from are not the same parity, add 1
            z++;
        } else {
            // if to and from are not the same parity...
            if(!oddEven) {
                // and we don't have a parity marker, add one
                z++;
            } else if(a%2 != /e/i.test(c)) {
                // if we do have a parity marker,
                // AND the parity of from and to matches the 
                // parity of the oddEven sign, then add 1
                z++;
            }
        }
        // then add the difference between to-from and
        // if oddEven exists, divide by two and round down
        z+=(to-from)/(oddEven?2:1)|0;
    }

}
print(z);
</code></pre>
</div>
<div id="pu12" class="pu"><h1>JavaScript (<em>ES6</em>), 149</h1>

<p>Run snippet in Firefox to test</p>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>F=s=&gt;s.replace(/([-,.:]) *(\d+) *(o?)(e?)/ig,(_,c,v,o,e)=&gt;
  c=='-'?(t+=1+(o?(v-(r|1))&gt;&gt;1:e?(v-(-~r&amp;~1))&gt;&gt;1:v-r),r=0)
  :c!='.'&amp;&amp;(t+=!!r,r=v)
,r=t=0)&amp;&amp;t+!!r

// Less golfed

U=s=&gt;{
  var r = 0, // value, maybe range start
  t = 0; // total
  s.replace(/([-,.:]) *(\d+) *(o?)(e?)/ig, // execute function for each match
    (_ // full match, not used
     , c // separator char, match -:,.
     , v // numeric value
     , o // match first letter of ODD if present
     , e // match first letter of EVEN if present
    )=&gt;
    {
      if (c == '-') // range end
      {
        t++; // in general, count range values as end - start + 1
        if (o) // found 'odd'
        {
          r = r | 1; // if range start is even, increment to next odd
          t += (v-r)&gt;&gt;1; // end - start / 2
        }
        else if (e) // found 'even'
        {
          r = (r+1) &amp; ~1; // if range start is odd, increment to next even
          t += (v-r)&gt;&gt;1; // end - start / 2
        }
        else
        {
          t += v-r; // end - start
        }
        r = 0; // range start value was used
      }
      else if (c != '.') // ignore page numbers starting with '.'
      { 
        // if a range start was already saved, then it was a single value, count it
        if (r != 0) ++t;
        r = v; // save value as it counld be a range start
      }
    }
  )            
  if (r != 0) ++t; // unused, pending range start, was a single value
  return t
}

// TEST

out=x=&gt;O.innerHTML+=x+'\n';

test=["pg. 546: 17-19, 22, 26, pg. 548: 35-67 odd, 79, 80-86 even",
"pg. 34: 1", "PG. 565: 2-5,PG.345:7",
"pg. 343: 5,8,13 - 56 even,pg. 345: 34 - 78,80"];

test.forEach(t=&gt;out(t + ' --&gt; ' + F(t)))</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;pre id=O&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/51189/">51189</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




