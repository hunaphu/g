<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::272836</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>1450</td><td>TSQL</td><td>240508T032328Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/273007#273007">CrSb0001</a></td></tr>
<tr d-ix="1"><td>059</td><td>Raku Perl 6 rakudo</td><td>240804T185926Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/274674#274674">bb94</a></td></tr>
<tr d-ix="2"><td>064</td><td>StackControl</td><td>240804T182101Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/274673#274673">CREAsTIV</a></td></tr>
<tr d-ix="3"><td>014</td><td>05AB1E</td><td>240430T072922Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272894#272894">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>064</td><td>Python 3</td><td>240428T224239Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272869#272869">Jonathan</a></td></tr>
<tr d-ix="5"><td>064</td><td>Haskell</td><td>240429T112003Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272880#272880">matteo_c</a></td></tr>
<tr d-ix="6"><td>055</td><td>R</td><td>240429T093416Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272878#272878">ovs</a></td></tr>
<tr d-ix="7"><td>015</td><td>Brachylog</td><td>240429T084254Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272877#272877">Fatalize</a></td></tr>
<tr d-ix="8"><td>014</td><td>K ngn/k</td><td>240426T175304Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272840#272840">att</a></td></tr>
<tr d-ix="9"><td>132</td><td>Python</td><td>240428T213236Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272868#272868">corvus_1</a></td></tr>
<tr d-ix="10"><td>007</td><td>Jelly</td><td>240428T201420Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272867#272867">Jonathan</a></td></tr>
<tr d-ix="11"><td>091</td><td>Python</td><td>240427T221429Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272861#272861">math sca</a></td></tr>
<tr d-ix="12"><td>082</td><td>R</td><td>240427T184307Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272858#272858">pajonk</a></td></tr>
<tr d-ix="13"><td>275</td><td>Google Sheets</td><td>240427T091844Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272851#272851">doubleun</a></td></tr>
<tr d-ix="14"><td>209</td><td>Python</td><td>240427T111818Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272852#272852">Rhaixer</a></td></tr>
<tr d-ix="15"><td>012</td><td>Uiua 0.11.0</td><td>240426T161549Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272839#272839">Tbw</a></td></tr>
<tr d-ix="16"><td>066</td><td>JavaScript ES6</td><td>240426T155509Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272837#272837">Arnauld</a></td></tr>
<tr d-ix="17"><td>032</td><td>Charcoal</td><td>240427T063921Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272848#272848">Neil</a></td></tr>
<tr d-ix="18"><td>024</td><td>J</td><td>240426T222855Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272842#272842">Jonah</a></td></tr>
<tr d-ix="19"><td>975</td><td>Vyxal</td><td>240427T041036Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272846#272846">lyxal</a></td></tr>
<tr d-ix="20"><td>043</td><td>Perl 5 + a M5.10.0</td><td>240426T160545Z</td><td><a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272838#272838">Dom Hast</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>T-SQL, <s>3378</s> 1450 bytes</h1>
<p><sup><i>2025 May 22: <code>-1928 bytes</code></i></sup></p>
<p>Update May 22, 2025: Arrgh, so close to sub-1K, and so close to saving 2K bytes!</p>
<hr />
<p>I saw this a few days ago, and was thinking of languages I could use to solve this problem. Ended up deciding to write the entire thing in a query on data.stackexchange.com because I had a lot of free time today and was willing to hardcode each and every one of the cases.</p>
<p>This runs in ~3ms on my Chromebook so I think it is as optimized runtime-wise as it gets.</p>
<p>Also note that loops don't exactly work in T-SQL, so I ended up having to brute-force all 33 cases (32 different ways to arrange +/- and the case where nothing works).</p>
<p>Although it is cool that it actually rounds down if one of the inputs is a decimal, I was afraid that might not happen.</p>
<pre><code>DECLARE @ INT=##a##,@b INT=##b##,@c INT=##c##,@d INT=##d##,@e INT=##e##,@f INT=##f##,@g INT=##g##
IF @+@b+@c+@d+@e+@f=@g SELECT'+++++'
ELSE IF @+@b+@c+@d+@e-@f=@g SELECT'++++-'
ELSE IF @+@b+@c+@d-@e+@f=@g SELECT'+++-+'
ELSE IF @+@b+@c+@d-@e-@f=@g SELECT'+++--'
ELSE IF @+@b+@c-@d+@e+@f=@g SELECT'++-++'
ELSE IF @+@b+@c-@d+@e-@f=@g SELECT'++-+-'
ELSE IF @+@b+@c-@d-@e+@f=@g SELECT'++--+'
ELSE IF @+@b+@c-@d-@e-@f=@g SELECT'++---'
ELSE IF @+@b-@c+@d+@e+@f=@g SELECT'+-+++'
ELSE IF @+@b-@c+@d+@e-@f=@g SELECT'+-++-'
ELSE IF @+@b-@c+@d-@e+@f=@g SELECT'+-+-+'
ELSE IF @+@b-@c+@d-@e-@f=@g SELECT'+-+--'
ELSE IF @+@b-@c-@d+@e+@f=@g SELECT'+--++'
ELSE IF @+@b-@c-@d+@e-@f=@g SELECT'+--+-'
ELSE IF @+@b-@c-@d-@e+@f=@g SELECT'+---+'
ELSE IF @+@b-@c-@d-@e-@f=@g SELECT'+----'
ELSE IF @-@b+@c+@d+@e+@f=@g SELECT'-++++'
ELSE IF @-@b+@c+@d+@e-@f=@g SELECT'-+++-'
ELSE IF @-@b+@c+@d-@e+@f=@g SELECT'-++-+'
ELSE IF @-@b+@c+@d-@e-@f=@g SELECT'-++--'
ELSE IF @-@b+@c-@d+@e+@f=@g SELECT'-+-++'
ELSE IF @-@b+@c-@d+@e-@f=@g SELECT'-+-+-'
ELSE IF @-@b+@c-@d-@e+@f=@g SELECT'-+--+'
ELSE IF @-@b+@c-@d-@e-@f=@g SELECT'-+---'
ELSE IF @-@b-@c+@d+@e+@f=@g SELECT'--+++'
ELSE IF @-@b-@c+@d+@e-@f=@g SELECT'--++-'
ELSE IF @-@b-@c+@d-@e+@f=@g SELECT'--+-+'
ELSE IF @-@b-@c+@d-@e-@f=@g SELECT'--+--'
ELSE IF @-@b-@c-@d+@e+@f=@g SELECT'---++'
ELSE IF @-@b-@c-@d+@e-@f=@g SELECT'---+-'
ELSE IF @-@b-@c-@d-@e+@f=@g SELECT'----+'
ELSE IF @-@b-@c-@d-@e-@f=@g SELECT'-----'
ELSE SELECT''
</code></pre>
<p><a href="https://data.stackexchange.com/stackoverflow/query/1841005/infer-in-tsql-to-7-inputs-going-to-be-eligible-for-cgpp-answer" rel="nofollow noreferrer">Try it online (also commented out version)</a> (3378 bytes)<br>
<a href="https://data.stackexchange.com/stackoverflow/query/1901262/infer-in-tsql-new-version" rel="nofollow noreferrer">Try it online (no comments, 2025-05-22 version)</a> 1450 bytes</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://raku.org" rel="nofollow noreferrer">Raku (Perl 6) (rakudo)</a>, 59 bytes</h1>
<p>Outputs a list of all valid solutions, using <code>1</code> for <code>+</code> and <code>-1</code> for <code>-</code>.</p>
<pre class="lang-perl prettyprint-override"><code>{grep {.[*-1]-.[0]==[+] .[1..*]Z*@^a},[X,] ((-1,1)xx$_-2,)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kKDG7dMHNibmVamm2XMoK1bmJBQpa0XEaWrqGmrE66UWpBQrVetFAXqyuXrRBrK1ttHasgl60oZ6eVmyUlkNcYq1OdIROrEKNhoauoY6hZkWFSryukaaOQS3INOL1o2jX0axdWlqSpmtx05pyI_ZYcxUnViqkKWgY6ygY6SiY6CgYAklNZGFTHQVzhIAhTJ0xWKkhQsYIIoak1BAsYqCjYIEQBPIMTUEYIQQ0zFJHwQxFrwXYGqBuYxQxE7BzQPaaaVpD_LBgAYQGAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/CREAsTIVE/StackControl/commit/4b419b83c1901c80b8b0a3ffe8ed6a5ca08a90a3" rel="nofollow noreferrer">StackControl</a>, 64 characters</h1>
<p>Pretty bad solution, but i m too lazy to think more sooo</p>
<p>works only on the last commit since ∸ and one bug</p>
<p>btw can work with any operations (add them onto this: <code>[#+#∸]</code> list)</p>
<pre><code>⟄←:←⬌1∸:←[#+#∸]⇆∏(→→:←⇆←⦽→:(⇆←)⟲←⇆→(→⇆⟃⇆←!→)⟲,→:⬌1⇆-⇆→:3(⇆←)⟲=)⊚
</code></pre>
<p>try this:</p>
<pre><code>[1 2 4 3 1 1]⟄←:←⬌1∸:←[#+#∸]⇆∏(→→:←⇆←⦽→:(⇆←)⟲←⇆→(→⇆⟃⇆←!→)⟲,→:⬌1⇆-⇆→:3(⇆←)⟲=)⊚
</code></pre>
<h2>Explanation</h2>
<p><code>⟄</code> - extracting last value since this is answer</p>
<p><code>←:←⬌1∸:←</code> - get length + sum cursor setup</p>
<p><code>[#+#∸]⇆∏</code> make product of those elements based on the length
(for <code>[2 5 7]</code> it generates product of operations + and - with len of 3-1: <code>[+ +] [+ -] [- +] [- -]</code>)</p>
<p><code>(...)⊚</code> - store values, only where function returns non zero</p>
<p>Now what inside:</p>
<p><code>→→:←⇆←⦽→</code> - setup cursor and unpack all our values</p>
<p><code>:(⇆←)⟲</code> - move our operation list to the begining of unpacked values</p>
<p><code>←⇆→(→⇆⟃⇆←!→)⟲</code> - [length] times repeat {move our operation list; pop first operation; execute it}</p>
<p><code>,→:⬌1⇆-⇆→:</code> - delete empty list and setup same values for next iteration</p>
<p><code>3(⇆←)⟲</code> - return cursor</p>
<p><code>=</code> - check if our value is equals</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 14 <a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>®X‚Ig&lt;ãʒ1š¹*OQ
</code></pre>
<p>Two separated inputs <span class="math-container">\$[a_0,...,a_{n-1}]\$</span> and <span class="math-container">\$a_n\$</span>. Output as a list of all possible results, with <code>-1</code> for <code>-</code> and <code>1</code> for <code>+</code>.</p>
<p><a href="https://tio.run/##ASoA1f9vc2FiaWX//8KuWOKAmklnPMOjypIxxaHCuSpPUf//WzMsMiw0LDFdCjQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVCmEvo/0PrDB81zIpItzm8@NQkw6MLI7T8IwP/1x5er/M/OjraWMdIx0THMFbHJFZHAcQ1jdUxBzMNwTLGIDlDsICRjjGMaWgIlDCI1bEA8wx0DIG6QBjIMdGx1DGDqbPQAWsyhnJMdEzBxpnFxgIA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>®X‚            # Push pair [-1,1]
   Ig&lt;         # Push the length-1 of the first input-list
      ã        # Take the cartesian product of the two
       ʒ       # Filter this list:
        1š     #  Prepend a 1
          ¹*   #  Multiply the values at the same positions to the first input-list
            O  #  Sum them together
             Q #  Check whether it equals the (implicit) second input-integer
               # (after which the filtered list is output implicitly)
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s> 75 </s> <s> 67 </s> 64 bytes</h1>
<p>-8 bytes thanks to <a href="https://codegolf.stackexchange.com/users/87681/jitse">Jitse</a> (by placing the output in <code>r</code> - a very smart golf!).</p>

<pre class="lang-python prettyprint-override"><code>f=lambda a,b,*r:f(a+b,*r,-2)or f(a-b,*r,-3)if-1&lt;r[0]else(a==b)*r
</code></pre>
<p>A recursive function that accepts the full sequence of non-negative integers as arguments in order <span class="math-container">\$a_1, a_2, \cdots, a_N\$</span> and returns a tuple of instructions as integers, where <code>-2</code> means add and <code>-3</code> means subtract, representing one way that works, or an empty tuple if not possible.</p>
<p><strong><a href="https://tio.run/##TZDPboMwDMbvfQqLS2NqpoZQ@kfL@iBVD0EFLROFKnDZZa/O7FSpGiWRv58@O7Efv/P3OJhl6Wzv7s3NgaOG8nDqlNtIQEWJYwCWxVMa9F2hP8Nle237qVXO2gbzsHTsmttpBj@AWgEvZQhKgopA8430gjuCfZI6eUy06cTLJ3nZdNRbgkNCHOudnAS4yJGgfss6xOKcZ95IFT8gb9WJ7vlDsbhsXOEp4tBOYLnzXNrCiB7BD7MSTZDZr4zExOGfhOv1x8/oB5UVm3N28VeQkXiZB5sQl38" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<p>The first two terms of the sequence are <code>a</code> and <code>b</code>, the rest of the sequence is <code>r</code>.<br />
If <code>r</code>'s first element is greater than <code>-1</code> the function is called with the first two terms added and <code>-2</code> &quot;instruction&quot; is appended to <code>r</code> but if that results in an empty tuple then the function is called with the second term subtracted from the first along an additional <code>-3</code> &quot;instruction&quot;.<br />
However, if <code>r</code>'s first element is <code>-2</code> or <code>-3</code> then <code>r</code> is returned if <code>a==b</code> otherwise an empty tuple is returned.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 64 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>f(x:w:y)=[q|q&lt;-mapM(\_-&gt;[-1,1])y,sum(zipWith(*)q$w:y)==last y-x]
</code></pre>
<p><a href="https://tio.run/##VVGxTsMwEN3zFTd0sNEZcNOWUjVMjDAzGAtZKFUtkpLURsRR/z3YjhyawZbv7r13785HZb7Kqhp03XyfLTwrq25ftLFAjI/pcCDd7nfnaCHaS7tntWpeyfsHexKMI5fUofmpSa@bN22P5Ia2iwguKuUlHOvkYEtjP5UpDRQgMgAicoQlwgqB@1siiKAVAsalpJgwa4SHUE0pnmh5BPPIjKxE9okpCIDEXI6cmRiPuXuE7b@DJHDlwwP4Opyx25T3Nh4RNsnGvN82OvXy@VRks@oqThc4mzRFwniIzLJa6ZPfV3PWJwsLEKRDcAg9hQv4t6OwZzBt1hdCLA7Qebnwb@DgrhhfvRz@AA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 55 bytes</h1>
<p>Takes <span class="math-container">\$a_N\$</span> as a separate argument, returns a matrix of all solutions with <code>1/2</code> for <code>-/+</code>.</p>
<pre class="lang-r prettyprint-override"><code>\(a,b)which(Reduce(\(x,y)x%o%c(1/y,y),2^a)==2^b,T)[,-1]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NZBRasMwDIbfcwo1UCKBw-okbVOGd4ixtySlrpcshc2FNaExYyfZS_ew4-wAu83kpAU9fPolfWB_fb9fLj9918T536ZRJWqxp3N7MC0-1s-9qbHEQTga5se5QXnnmEWy1aRUst2LJypELKur4Hc324ECvqCPAMDojm8j9QCljYgDp05GW-zUQPdg1WttX7oWnR-d2uMZe2v1W40NuiK2lXCFrYjoaopGyWcQzMIUEshAQhaOzRLWHuSYppxL3yYex1wyLSD3vAC55PKYwQZW00YOfjmdMGMfK1bh9Kjb7_wD" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>The size of numbers this can handle is fairly limited by the powers of 2 a double value can represents.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 15 bytes</h1>
<pre><code>{+.∧1w₄|-.∧w₄}ˡ
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v1pb71HHcsPyR00tNbogJohVe3rh///RFjomOqY6hrH/Dc0A" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
<p>Outputs <code>+</code> as <code>1</code> and <code>-</code> as <code>0</code>. Empty output for impossible test cases.</p>
<p>The first <code>n-1</code> numbers are given as an input list, and the expected result is given as the output variable.</p>
<h3>Explanation</h3>
<pre><code>{             }ˡ    Left fold on the input list:
                      Either…
 +.                     Add the 2 numbers together
   ∧1w₄                 And delayed write a 1 to stdout
       |              Or…
        -.              Subtract the 2 numbers together
          ∧w₄           And delayed write an unknown variable (defaults to 0) to stdout
                    The output of the left fold must match the given output
</code></pre>
<p>This predicate will try different combinations of + and - in a <a href="https://en.wikipedia.org/wiki/Fold_(higher-order_function)" rel="nofollow noreferrer">left fold</a> over the input list until the result is equal to the expected result given as output.</p>
<p>Once this predicate succeeds, the delayed writes <code>w₄</code> will be printed out to stdout. If we were to use normal write commands, then it would write everytime it tries a choice, instead of writing the final correct choices.</p>
<p>If the test case is impossible, the predicate will eventually fail after trying everything, and the delayed writes will not be called. Nothing is thus printed to stdout.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 14 bytes</h1>
<p>-1 thanks to <a href="https://codegolf.stackexchange.com/questions/272836/infer-pluses-and-minuses/272840?noredirect=1#comment589035_272840">naffetS</a></p>
<pre><code>&amp;~*{x-/:y,-y}/
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700Oz4vPW_BgqWlJWm6FhvSrNTqtKordPWtKnV0K2v1IcI3PdIUjBWMFEwUDBVMuEBsUwVzIG0IFjMG0oZAnhGIBRI1BDIMFCyATAMFQ1MgArJMFCwVzBQMIebBrAMA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Return a 2d list with solutions in reverse order. <code>-+</code> are denoted by <code>01</code>.</p>
<pre><code>   {x-/:y,-y}/  all values obtainable by inserting -/+
  *             enforce last op is -
&amp;~              locate 0s
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 132 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda e,f,*a:{p for p in permutations(&quot;+-&quot;*len(a),len(a))if f+eval(&quot;&quot;.join(x+str(y)for x,y in zip(p,a)))==e}
from itertools import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5LCsIwFAD3nuJRQZL2VVC7EKE3cRMxoZHmw8urWMWdt3BTEL2Tt1Gpq9kMw9xfsecm-OFh6u2zY1Ou37dWud1egUaDudpcIphAEMF6iJpcx4pt8ElkRZnlrfZCSRwhrQFT6KNqRZbND8F6cSoSk-jlL3HC_hc52ygifm1Z1_o6MRQcWNbEIbQJrIuBOP-_zCJZz8KICgFghUuscCElTIGahJD7zu00pdEehpEf" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>_,+ɗ/œẹ
</code></pre>
<p>A dyadic Link that accepts a list of non-negative<sup>*</sup> integers<sup>*</sup>, the summands <span class="math-container">\$[a_1, a_2, \cdots, a_{N-1}]\$</span>, on the left and a non-negative<sup>*</sup> integer<sup>*</sup>, the goal <span class="math-container">\$a_N\$</span>, on the right and yields a list of reversed lists of instructions. <code>1</code> means subtract while <code>2</code> means add.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/z9eR/vkdP2jkx/u2vn//38jHQVjHQVTHQUTHQWj/2YA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/z9eR/vkdP2jkx/u2vn/8HL90Ie7ux817tPV9tZxODrp4c4ZWY8a5ijY2ik8apirGfn/f3R0tLGOgpGOgomOgmEskIrV4VIAi5kCeeYQniFMhTFEkSFEGChmjOAZGoLlDYAiFhARA6AcyBQQAeIDDbDUUTBDaLEAmwsywxguAFRkCrUFqJIrFgA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<p><sup>* Not a necessary restriction, any numbers will do.</sup></p>
<h3>How?</h3>
<pre><code>_,+ɗ/œẹ - Link: list of numbers, Summands; number, Goal
    /   - reduce {Summands} by:
   ɗ    -   last three links as a dyad - f(L, R):
_       -     {L} subtract {R} (vectorises) -&gt; L-R
  +     -     {L} add {R} (vectorises) -&gt; L+R
 ,      -     {L-R} pair {L+R} -&gt; [L-R, L+R]
     œẹ - all multidimensional indices of {Goal}
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <strike>105</strike> 91 bytes</h1>
<p>- 14 bytes thanks to xnor</p>
<pre class="lang-python prettyprint-override"><code>def f(l,n,o=[]):
 if[n]==l:print(o)
 if l[1:]:c,d,*r=l;[f([c+a*d]+r,n,o+[a])for a in[1,-1]]
</code></pre>
<p>I have very little experience of golfing in Python, so any tips would be appreciated.</p>
<p><a href="https://ato.pxeger.com/run?1=NY0xDsIgFEB3T8EI5XdAOxgMJ_n5Ayn-SEKgIXTwLC5ddOx9ehttGteX9_Jen-nZHiUvy3tu3F83DHcWLBNkKA5J2ZOIjJmcS3aqMTdZ1I5EQmPJjhCgqy7dkCWO2neBdN1bjZ4Ulyq8iBkN9IboWKw_8wJnGMAQDOqA__8X" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>85</s> 82 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(a,s=expand.grid(rep(list(c(-1,1)),sum(a|1)-2)))s[apply(s,1,\(x)!c(1,x,-1)%*%a),]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZLBSsQwEIZBbz7FWFmY2GTZ2XbXetiX8Op6iN1UC922JClU8OwDePVSBR9Kjz6J6dZTq0EIZC7fxz8_8_Kqu7ds897YTCQfV1uU3GxUW8tyN7_T-Q61qrHIjcUUBXFijJtmj_KRmFgyxsy1rOviAQ0nvsWWnaZIvOWC2Ox8Jhm_GcyfR8cZSjMvm73SeYqqQGO1qYvcYhDBEmIgiAMeQOCk7Ay-np5BQAji5G-ODlzkSBqR4cBCpX-GsB9vK3vv05FzLSD5JcXBI_7hWACt3BvH8RAxXMJ6soDwMolbPIJowvjKSlxVq76q9aQrf8uRwy5GTFmVyoP06cYb9chwC103_N8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes input as a vector <span class="math-container">\$[a_1, a_2, \ldots, a_{N-1}, a_N]\$</span> and returns a matrix of ±1s with solutions in rows. For &quot;none&quot;, the function outputs <code>numeric(0)</code>.</p>
</div>
<div id="pu13" class="pu"><h1>Google Sheets, 275 bytes</h1>
<pre><code>=let(d,tocol(A:A,1),ø,tocol(,1),regexreplace(reduce(d,index(mod(sequence(6^5),rows(d)-1)+2),lambda(a,i,if(a=a&amp;&quot;&quot;,a,let(r,{chooserows(a,sequence(i-1));index(a,i)*(2*(rand()&lt;0.5)-1);iferror(chooserows(a,sequence(rows(a)-i,1,i+1)),ø)},if(sum(r)=B1,join(&quot;+&quot;,r),r))))),&quot;\+-&quot;,&quot;-&quot;))
</code></pre>
<p>Put operands in column <code>A</code>, the expected result in cell <code>B1</code> and the formula in cell <code>B2</code>.</p>
<p>Gives the solution as in <code>3-2+4-1</code>, or an error when a solution was not found. Works probabilistically up to 7776 rounds which seems plenty with up to 100 small operands or several dozen operands of any size.</p>
<p><a href="https://i.sstatic.net/oTKoZg2A.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/oTKoZg2A.png" alt="plusminus.png" /></a></p>
<p>Ungolfed:</p>
<pre><code>=regexreplace( 
  reduce(tocol(A1:A, 1), index(mod(sequence(6^5), rows(tocol(A1:A, 1)) - 1) + 2), lambda(a, i, 
    if(istext(a), a, let( 
      null, tocol(æ, 2), 
      head, chooserows(a, sequence(i - 1)), 
      try, index(a, i) * (2 * (rand() &lt; 0.5) - 1), 
      tail, iferror(chooserows(a, sequence(rows(a) - i, 1, i + 1)), null), 
      result, vstack(head, try, tail), 
      if(sum(result) = B1, join(&quot;+&quot;, result), result) 
    )
  ))), 
  &quot;\+-&quot;, &quot;-&quot; 
)
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://python.org" rel="nofollow noreferrer">Python</a>, <s>215</s> 209 bytes</h1>
<p><em>-6 bytes by using another input format.</em></p>
<pre class="lang-py prettyprint-override"><code>lambda*n,p,r=range,t=len:(x:=[bin(i)[2:].rjust(t(n)-1,'0').replace('1','-').replace('0','+')for i in r(2**~-t(n))],[x[j]for j in r(t(x))if eval(n[0]+&quot;&quot;.join([x[j][l]+n[1:][l]for l in r(t(n)-1)])+&quot;==%s&quot;%p)])[1]
</code></pre>
<p>The first part of the <code>lambda</code> creates a list with the signs, and the second part evaluates them. Returns <code>[]</code> if there is no solution. Takes input as parameters of stringified <code>int</code>s, followed by a keyword argument taking the RHS value.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua 0.11.0</a>, <sup><strike>27</strike></sup>12 bytes <sup><a href="https://tinyurl.com/Uiua-SBCS-Apr-12" rel="nofollow noreferrer" title="SBCS for Uiua 0.11.0">SBCS</a></sup></h1>
<pre><code>≡⇌⊚=/(⊟⊃-+:)
</code></pre>
<p><a href="https://uiua.org/pad?src=0_11_0-dev_1__RiDihpAg4omh4oeM4oqaPS8o4oqf4oqDLSs6KQpGIDNfMl80XzEgNApGIDdfNSAzCkYgMTFfM18wIDgK" rel="nofollow noreferrer">Try on Uiua Pad!</a></p>
<p>Similar to <em>@att</em>'s K answer, so upvote that one too. Takes the list and <span class="math-container">\$a_N\$</span> on stack and returns all possible +/- choices as an array of 1s and 0s, with an empty list if not possible.</p>
<h2>Explanation</h2>
<pre><code>≡⇌⊚=/(⊟⊃-+:)
    /(     ) # fold the list by
       ⊃-+:  # a-b and a+b
      ⊟      # combine as two rows of a new array
   =         # test equal to a_N element-wise
  ⊚          # get coordinates of 1s
≡⇌           # reverse each row
</code></pre>
<h2>Old solution</h2>
<pre><code>⊡⊗:/+⍉⊙:⊃×∘¬×2☇1⇡×2⊃±¤⊙-:°⊂
</code></pre>
<p><a href="https://uiua.org/pad?src=0_11_0-dev_1__RiDihpAgKAogIMKw4oqCICAjIHRha2UgZmlyc3QgZWxlbWVudCBvZmYgb2YgbGlzdAogIDogICAjIHN3YXAgdGhlIHRvcCB0d28gb2Ygc3RhY2sgCiAg4oqZLSAgIyBzdWJ0cmFjdCBhMSBmcm9tIGFOCiAg4oqDwrHCpCAjIGdldCB0aGUgc2lnbnMgb2YgdGhlIGxpc3QgKGFsbCAxcykKICAjIGFuZCBhIGNvcHkgd2l0aCBhbiBheGlzIGFkZGVkCiAg4oehw5cyICMgKjIgKGFsbCAycykgYW5kIHJhbmdlOiBhbGwgYmluYXJ5IGxpc3RzCiAg4piHMSAgIyBtYWtlIGl0IHJhbmsgMgogIMKsw5cyICMgbm90KHgqMiksIGNoYW5nZXMgMCwxIHRvIDEsLTEKICDiioPDl-KImCAjIG11bHRpcGx5IGJ5IGxpc3QsIGtlZXBpbmcgMSwtMSBhcnJheQogIOKKmTogICMgZmxpcCBwb3NpdGlvbnMgMiBhbmQgMyBvbiBzdGFjawogIC8r4o2JICMgc3VtIGVhY2ggcm93CiAg4oqXOiAgIyBmaW5kIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgYU4KICDiiqEgICAjIHBpY2sgdGhhdCBmcm9tIHRoZSAxLC0xIGFycmF5LCBlcnJvciBpZiBubyBzb2x1dGlvbgopCkYgM18yXzRfMSA0CiMgRiA3XzUgMyAjIGdpdmVzIGVycm9yCg==" rel="nofollow noreferrer">Try on Uiua Pad!</a></p>
<h2>Explanation</h2>
<pre><code>°⊂  # take first element off of list
:   # swap the top two of stack 
⊙-  # subtract a1 from aN
⊃±¤ # get the signs of the list (all 1s)
    # and a copy with an axis added
⇡×2 # *2 (all 2s) and range: all binary lists
☇1  # make it rank 2
¬×2 # not(x*2), changes 0,1 to 1,-1
⊃×∘ # multiply by list, keeping 1,-1 array
⊙:  # flip positions 2 and 3 on stack
/+⍉ # sum each row
⊗:  # find the index of the first aN-a1
⊡   # pick that from the 1,-1 array, error if no solution
</code></pre>
</div>
<div id="pu16" class="pu"><h1>JavaScript (ES6), 66 bytes</h1>
<p>Returns either a binary string (with <code>0</code> for <code>-</code> / <code>1</code> for <code>+</code>) or <em>undefined</em> if there's no solution.</p>

<pre class="lang-javascript prettyprint-override"><code>f=([n,...a],s=0,o)=&gt;a+a?f(a,s+n,o?o+1:[])||o&amp;&amp;f(a,s-n,o+0):s==n&amp;&amp;o
</code></pre>
<p><a href="https://tio.run/##ZcnBCsIwDADQux9SGpqVTSfCIO5DSg9hrqKMZBjxtH@vw6vX9578YZtej/XdiN7mWgv5JBhj5IxGLSrQlQOPxTNaENRRQzekDNumzv202TW0MBiROKd1UjFd5rjo3RefTnjEHjvsM8Dh78542b1@AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (          // f is a recursive function taking:
  [ n,         //   n = next value from input array
       ...a ], //   a[] = remaining values
  s = 0,       //   s = sum
  o            //   o = output (initially undefined)
) =&gt;           //
a + a ?        // if a[] is not empty:
  f(           //   do a 1st recursive call:
    a,         //     pass a[]
    s + n,     //     add n to s
    o ?        //     if o is defined:
      o + 1    //       append '1' for '+' to o
    :          //     else:
      []       //       initialize o to [] (coerced to
               //       an empty string, but truthy)
  ) ||         //   end of recursive call
  o &amp;&amp;         //   if o is defined,
  f(           //   do a 2nd recursive call:
    a,         //     pass a[]
    s - n,     //     subtract n from s
    o + 0      //     append '0' for '-' to o
  )            //   end of recursive call
:              // else:
  s == n &amp;&amp; o  //   if s = n, return o
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 32 bytes</h1>
<pre><code>ＩＥΦＥ…Ｘ²⁻Ｌθ²Ｘ²⊖Ｌθ⊖⊗↨⊗ι²¬Σ×ιθ✂ι¹±¹
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TY89DoJAEIWvQqiGBArQwsROiZUYInaEYllH2GRZlF30MDYUGj2AB_Aa3sblJ2gzMy_vm5eZ65PmpKIl4U1zr9XBmX3eYcWEgiWRCgJyhBXjCqtu3BKRIYTlRWvPNgImaglrFJnK4WTZhmfpMto-0goLFAr3P8hqkX_HL-uU674gEkfB-rCW3ZQKorqAHStQArONISPijGKrXc1gRhSC2zrW_CZTKodvHrHpnLmZvOJYc_qoqW1Muh03SXrkCw" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Outputs a list of <code>1</code>s and <code>-1</code>s for the signs with each solution double-spaced. Explanation:</p>
<pre><code>      ²                             Literal integer `2`
     Ｘ                              Raised to power
         θ                          Input list
        Ｌ                           Length
       ⁻                            Subtract
          ²                         Literal integer `2`
    …                               Range to
            ²                       Literal integer `2`
           Ｘ                        Raised to power
               θ                    Input list
              Ｌ                     Length
             ⊖                      Decremented
   Ｅ                                Map over values
                    ι               Current value
                   ⊗                Doubled
                  ↨                 Converted to base
                     ²              Literal integer `2`
                 ⊗                  Vectorised doubled
                ⊖                   Vectorised decremented
  Φ                                 Filtered where
                         ι          Current list
                       Σ×           Dot product with
                          θ         Input list
                      ¬             Is zero
 Ｅ                                  Map over solutions
                           ✂ι¹±¹    Slice off leading and trailing signs
Ｉ                                   Cast to string
                                    Implicitly print
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, <s>26</s> 24 bytes</h1>
<pre><code>(##:@i.@#)@(=]F..(+,-~))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FNVUtFK8NYM0UrS3V1LiU99TQFWysFdQUdBQMFKyDW1VNwDvJxW1pakqZrsUNDWdnKIVPPQVnTQcM21k1PT0NbR7dOUxMifXOlJldqcka-golCmoKxghGQNoQIAI0G04ZACUOwhDG6lAVIyhAoboCmxRQoYQCkME0yUbBUMIMK--Ur5JeWFJSWKOgrFOfnlJZk5udBlZqDXWOK0GekYAxx8IIFEBoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Outputs all solutions or an empty list when none exists.  <code>1 = -, 0 = + </code>.</p>
<ul>
<li><code>]F..(+,-~)</code> Fold forward +/-, catting both options to the accumulated result each time</li>
<li><code>=</code> Where does that equal the left input?  Returns boolean list.</li>
<li><code>#</code> Use that 0-1 list to filter...</li>
<li><code>#:@i.@#</code> The numbers <code>0 1 2 ... &lt;len of list - 1&gt;</code> converted to binary</li>
</ul>
<p>Worth noting this is a similar idea to att's nicer K solution... what makes that more elegant is K's ability to &quot;find&quot; 1s in a multidimensional list, return a lookup path directly to that list as a list of indexes for each axis.  This can also be thought of as the result of a binary search algorithm.</p>
<p>J's <code>I.</code>, on the other hand, only works for 1 dimensional lists, so we have to deal with some boring mechanics manually to accomplish the same thing.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 78 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 9.75 bytes</h1>
<pre><code>L‹k+↔'1p¹*∑⁰=
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyI9IiwiIiwiTOKAuWsr4oaUJzFwwrkq4oiR4oGwPSIsIiIsIjEsIDIsIDQsIDMsIDFcbjEiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Bitstring:</p>
<pre><code>011000010011100110100110111001010111110001011011110111001100010101101101001001
</code></pre>
<p>A silly little answer that might be golfable with a better algorithm. Outputs all possible solutions, or an empty list for no solutions. Represents <code>-</code> as <code>-1</code> and <code>+</code> as <code>1</code>.</p>
<h2>Explained</h2>
<pre><code>L‹k+↔'1p¹*∑⁰=­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁡⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁣⁤⁪‏‏​⁡⁠⁡‌­
L‹  ↔          # ‎⁡Combinations with replacement of length (a0...a(n-1) length - 1) of
  k+           # ‎⁢the list [1, -1]
     '         # ‎⁣Filtered to keep combinations where:
      1p       # ‎⁤  Prepending 1
        ¹*     # ‎⁢⁡  and transferring the signs of the combination to a0...a(n-1)
          ∑ =  # ‎⁢⁢  sums to
           ⁰   # ‎⁢⁣  a(n)
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu20" class="pu"><h1><a href="https://www.perl.org/" rel="noreferrer">Perl 5</a> + <code>-a -M5.10.0</code>, 43 bytes</h1>
<p>Outputs all valid solutions. Outputs nothing if there's no solution.</p>

<pre class="lang-perl prettyprint-override"><code>$n=&lt;&gt;;$"="{-,+}";eval==$n&amp;&amp;say/\D/g for&lt;@F&gt;</code></pre>
<p><a href="https://dom111.github.io/code-sandbox/#eyJsYW5nIjoid2VicGVybC01LjI4LjEiLCJjb2RlIjoiJG49PD47JFwiPVwiey0sK31cIjtldmFsPT0kbiYmc2F5L1xcRC9nIGZvcjxARj4iLCJhcmdzIjoiLWFcbi1NNS4xMC4wIiwiaW5wdXQiOiIzIDIgNCAxXG40In0=" rel="noreferrer">Try it online!</a></p>
<h2>Explanation</h2>
<p>Initial list of numbers is implicitly stored in <code>@F</code> thanks to <code>-a</code>, target value is then stored in <code>$n</code> and the field separator (<code>$&quot;</code>) is set to <code>&quot;{-,+}&quot;</code>. For each value in the <a href="https://perldoc.perl.org/functions/glob" rel="noreferrer"><code>glob</code></a> <code>&lt;@F&gt;</code> (when interpolating a list into a string, the field separator is used which expands <code>3 2 4 1</code> into <code>3{-,+}2{-,+}4{-,+}1</code> <a href="https://dom111.github.io/code-sandbox/#eyJsYW5nIjoid2VicGVybC01LjI4LjEiLCJjb2RlIjoiJFwiPVwiey0sK31cIjtzYXkgZm9yPEBGPiIsImFyZ3MiOiItYVxuLU01LjEwLjAiLCJpbnB1dCI6IjMgMiA0IDEifQ==" rel="noreferrer">which as a <code>glob</code> returns all permutations interpolating <code>-</code> and <code>+</code></a>. The string is then <code>eval</code>uated as code (<code>eval</code> works on <code>$_</code> by default) and if it matches <code>$n</code> is output (<code>say</code> - which prints <code>$_</code> by default).</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/272836/">272836</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




