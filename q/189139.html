<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::189139</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>088</td><td>Janet</td><td>250905T190902Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/283539#283539">Adam&#22</a></td></tr>
<tr d-ix="1"><td>112</td><td>JavaScript V8</td><td>210406T044243Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/222942#222942">rydwolf</a></td></tr>
<tr d-ix="2"><td>090</td><td>Python 3</td><td>190802T100010Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189144#189144">Jitse</a></td></tr>
<tr d-ix="3"><td>029</td><td>Stax</td><td>190812T145540Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189817#189817">recursiv</a></td></tr>
<tr d-ix="4"><td>091</td><td>Python 3</td><td>190802T222212Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189190#189190">movatica</a></td></tr>
<tr d-ix="5"><td>035</td><td>Jelly</td><td>190802T200931Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189187#189187">Nick Ken</a></td></tr>
<tr d-ix="6"><td>065</td><td>Charcoal</td><td>190802T190906Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189181#189181">Neil</a></td></tr>
<tr d-ix="7"><td>030</td><td>05AB1E</td><td>190802T113128Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189150#189150">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>062</td><td>Perl 6</td><td>190802T140030Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189157#189157">Jo King</a></td></tr>
<tr d-ix="9"><td>045</td><td>Perl 5 0777p Mre=/si</td><td>190802T092434Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189141#189141">Nahuel F</a></td></tr>
<tr d-ix="10"><td>092</td><td>JavaScript Node.js</td><td>190802T101347Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189146#189146">Arnauld</a></td></tr>
<tr d-ix="11"><td>045</td><td>Gema</td><td>190802T085110Z</td><td><a href="https://codegolf.stackexchange.com/questions/189139/decode-an-url-string/189140#189140">manatwor</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://janet-lang.org/" rel="nofollow noreferrer">Janet</a>, 88 bytes</h1>
<pre><code>|(peg/match~(%(any(+(/&quot;+&quot;&quot; &quot;)(*&quot;%&quot;(/(number(2 :h)16),string/from-bytes))(*(!&quot;%&quot;)'1))))$)
</code></pre>
<p>Returns a single-element array with the resulting string. +3 bytes if this is unacceptable:</p>
<pre><code>|((peg/match~(%(any(+(/&quot;+&quot;&quot; &quot;)(*&quot;%&quot;(/(number(2 :h)16),string/from-bytes))(*(!&quot;%&quot;)'1))))$)0)
</code></pre>
<p>In the case of invalid input, chops off the string at the last valid point, as requested.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://v8.dev" rel="nofollow noreferrer">JavaScript (V8)</a>, 112 bytes</h1>
<pre class="lang-js prettyprint-override"><code>u=&gt;u.match(/([^%]|%[\da-f]{2})*/i)[0].replace(/%..|./g,d=&gt;d==&quot;+&quot;?&quot; &quot;:d[1]?String.fromCharCode(&quot;0x&quot;+d[1]+d[2]):d)
</code></pre>
<p><a href="https://tio.run/##XYzdasJAEIXvfQpZGNh1dZNM4g/CKm3avkBvWuIKSzbRtGrCNqaF2mdPx5tCvfhmhnPOnDfb2Y/cV0076RZ9Z/2w1P1Zr87qaNt8zwOebcFcINs4OynNN/6IUVCJLDTKF83B5gUPQKmLCnZjp1dOaybZmg3Z0mWRWT@3vjrtVOnrY7q3Pq1dwVn4xeTVpYFGLJ3oG0q1vOQsCkPAqfys/Tv9MSEGfxZgIgFnEuKUeCSeiHvSYtp3xAPd5CEScwlzyuDVn/7vSaIEk/i2G15eJQCQ3P8C" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<p>Noticed Arnauld's <a href="https://codegolf.stackexchange.com/a/189146/79857">92 byte</a> Node.js answer shortly after spending some time golfing this. Porting that method would save quite a few bytes (with the main difference being <code>Buffer</code> vs. <code>String.fromCharCode</code>), but I wanted to post this one as it's more interesting and the V8 port wouldn't be worth a separate answer.</p>
<p>This challenge requires input validation, so the first <code>.match</code> takes only the valid part of the URL. Then, each part of it is <code>replace</code>d using a function. One trick I used that's kind of neat is the <code>&quot;0x&quot;+d[1]+d[2]</code>. Ordinarily you can convert hexadecimal to decimal using <code>+(&quot;0x&quot;+n)</code>, but it seems <code>String.fromCharCode</code> casts to number on its own, saving three bytes. Instead of slicing the initial <code>%</code>, I just concatenate the second and third characters, which is shorter.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 90 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def d(s):t='%'!=s[0];print(end=t*s[0].replace('+',' ')or chr(int(s[1:3],16)));d(s[3-2*t:])
</code></pre>

<p><a href="https://tio.run/##JY3NasMwEITvegr1sEiK0mJLdgIKPqh/z9BiTBG2kpgWWUgqbZ7eXdPDxy4zw0y8lesS9LpO/kwnnoUpHQN21@W@Gk4xzaFwH6au7DbhIfn45UbPmWR7RplYEh2viW@p3NdGD/v6IIQ4YVOv79WumEGsZ0x90DnQ5MLF81YYQku6GdybQ/wuXAhC/e/oYzE0upwJ/R8Wa11VoFr5s6TPOVwIqEaCOkjQT8gL8oo8oqbxWuQZf/SUQo4SjphRm98SaOpGNXrrgLd3CQAEnANrwVmw7g8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<h1>Explanation</h1>

<p>Checks if the first character is <code>%</code>. If that is the case, it will try to hex-decode the following two characters and print the result. If not, it will just print the first character and replaces <code>x</code> with <code></code> if necessary.</p>

<p>If the first character was <code>%</code>, the first three characters are sliced off the string and the function is called recursively. If not, only the first character is sliced off and the function is called again.</p>

<p>Raises an error if the hex string cannot be decoded or if end of line is reached.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 29 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>í☼∩ò☺µ◘Γπ╓l▄╓█₧ß:♦+ÇP¢Y╚↑░ºHÑ
</code></pre>

<p><a href="https://staxlang.xyz/#p=a10fef9501e608e2e3d66cdcd6db9ee13a042b80509b59c818b0a748a5&amp;i=%2524%2B%2526%2B%253C%2B%253E%2B%253F%2B%253B%2B%2523%2B%253A%2B%253D%2B%252C%2B%2522%2B%2527%2B%257E%2B%252B%2B%2525%0A%25414243%0A100%2525%2Bworking%0A%2524%25XY%2B%25%25%25&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>

<p>It's mostly regex.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 91 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda s:re.sub('%([A-Fa-f\d]{2})',lambda t:chr(int(t[1],16)),s.replace('+',' '))
import re
</code></pre>

<p><a href="https://tio.run/##XYzbCoJAFEXf@woRDjPDmOh4CYIepovfUKgPU1pJpTJORETfbkeIwB4W57D3YrdPc27qoC8WWX9Vt32hrG6uS7e77ykBmsppoqbHrMhf4s2I81XM/HDWtKoNNamfO37MmNO5umyv6lBSwolDLMLYpLq1jTaWLvtWD3ZBbd/zQET80ehLVZ9slH4ViJCDiDkEK2SDJMgSswCvRNb4YycEMuMwQ0cMfTTeCf1QhMH/Nmx3HADGsVIgJSgJUmHRfwA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>Approach this with regular expressions.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 35 bytes</h1>

<pre><code>ṣ”+Kṣ”%µḊḢ;ḢƊ€ŒuØHiⱮⱮ’ḅ⁴⁸żFO&lt;0œṗƊḢỌ
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///hzsWPGuZqe0No1UNbH@7oerhjkTUQH@t61LTm6KTSwzM8Mh9tXAdCDTMf7mh91LjlUeOOo3vc/G0Mjk5@uHP6MZCOh7t7/ls/apijoGunADTJ@nA718PdWw63A82I/P/f0MBA1chUuzy/KDszL51L1chEW9XITFvV2BmIXYHYDYidgGLGQNoRiF2AbKCckREQm2urmgPVGIHkTblUTQxNjEyMQWaoRkRqq6qqAgA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>A monadic link that takes a string as its argument and returns the decoded string, terminating early at any invalid hex. </p>

<p>I’ve assumed for now that standard I/O rules apply. If it really has to be stdin, that will cost a byte. </p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 65 bytes</h1>

<pre><code>≔Ｅ¹⁶⍘ιφθＷθ«≔⮌⪪Ｓ%ι⊟ιＷ∧ι⊟ι«¿∧›Ｌκ¹⬤01№θ↧§κμ«℅⍘↧…κ²¦¹⁶✂κ²»«≔υι≔υθ»»Ｄ⎚
</code></pre>

<p><a href="https://tio.run/##TVBda8IwFH22vyIUAintoI1VH/ZU6zYEBzJftsdQ72ww9iNNdWP427ubmjFLD0nOzTn33BSl0EUt1DBkXScPFXsVDUvmEVmKDnZGy@rAZESSOI6DICJt8OhdSqmAsDYgP97Eqd7gDLoDtmuUNGxdNb1xYhT51LdaidrJFknDtnXDZGDPziyr9raN40fnify88S8ahAHNNlAdTMmOaJUgMqWYHyd@RPK6R882Ipv6ArrA4Cwz62oPX@wYkVMwfqOla5/j0KKwnndT/ovz70JBXmIWlHMbPZkHY9o/g52SBbiqpa8EVAe3Fu5FejfwPdHeLnv2X/WnhtlzrkBou7sOAz4z5bPwUusjRvIoT0PK5yGd5ognxDNiidwU1wyxwj3WOEcsQrrAO9zWZx5Nk5SnU@tB3z9CSunwcFa/" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Note that Charcoal prompts "Enter input:" if it runs out of input. Explanation:</p>

<pre><code>≔Ｅ¹⁶⍘ιφθ
</code></pre>

<p>Grab the list of hex digits into a variable.</p>

<pre><code>Ｗθ«
</code></pre>

<p>Repeat while the variable is not empty. This is used as a flag to break out of the loop, since Charcoal has no other way of terminating the loop.</p>

<pre><code>≔⮌⪪Ｓ%ι
</code></pre>

<p>Read the next line of text and split it on <code>%</code>s.</p>

<pre><code>⊟ι
</code></pre>

<p>Output the first split.</p>

<pre><code>Ｗ∧ι⊟ι«
</code></pre>

<p>Repeat while there are more splits to process, but stop if any of them are empty.</p>

<pre><code>¿∧›Ｌκ¹⬤01№θ↧§κμ«
</code></pre>

<p>Also check that the length of the split is at least 2 and that the first 2 characters are hex digits. (Inconveniently I can't use a literal <code>2</code>, I have to use a string of length 2 instead.)</p>

<pre><code>℅⍘↧…κ²¦¹⁶
</code></pre>

<p>Convert the first two characters from hex and output the character with that code.</p>

<pre><code>✂κ²
</code></pre>

<p>Output the rest of that split.</p>

<pre><code>»«≔υι≔υθ»»Ｄ⎚
</code></pre>

<p>Otherwise clear the loop variables so that we terminate processing. The canvas is also printed after each loop as otherwise Charcoal's input handling gets in the way again.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>41</s> 30 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>'+ð:Δć©'%Qi2ôćuDHç©Ç`hÊiq}J}®?
</code></pre>
<p>-11 bytes thanks to <em>@Grimy</em>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f9fXfvwBqtzU460H1qprhqYaXR4y5H2UhePw8sPrTzcnpBxuCuzsNar9tA6@///VY1MtFWNzLRVjZOB2BWI3YDYCShmDKQdgdgFyHYGYiMgNtdWNQeqMQLJmwIA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9TpuSZV1BaYqWgZF@pw6XkX1oC4/1X1z68werclCPth1aqqwZmGh3ecqS91MXj8PJDKw@3J2Qc7so0VK71qj20zv5/7aFtOv8NDQxUjUy1y/OLsjPz0rlUjUy0VY3MtFWNnYHYFYjdgNgJKGYMpB2B2AXIBsoZGQGxubaqOVCNEUjelEvVxNDEyMQYZIZqRKS2qqoql2pioqqjo2qio6pjIgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>'+ð:                  '# Replace all &quot;+&quot; in the (implicit) input with spaces
Δ                      # Loop until the result no longer changes:
 ć                     #  Extract head; pop and push remainder-string and first character
  ©                    #  Store the character in variable `®` (without popping)
   '%Qi               '#  If this character is a &quot;%&quot;:
       2ô              #   Split the remainder-string into parts of size 2
                       #    i.e. &quot;abcde&quot; → [&quot;ab&quot;,&quot;cd&quot;,&quot;e&quot;]
         ć             #   Extract head again
          u            #   Convert it to uppercase
           D           #   Duplicate it
            H          #   Convert it from hexadecimal to integer
                       #   (NOTE: even if it isn't a valid hexadecimal string,
                       #    it will still result in an integer regardless)
             ç         #   And then from integer to ASCII-character with this codepoint
              ©        #   Replace variable `®` with this (without popping)
               Ç`h     #   Reverse process: ASCII-character → integer → hexadecimal string
                  Êi   #   If both are NOT equal (so it initially was invalid hexadecimal):
                    q  #    Stop the program
                   }J  #   And join the list of 2-char strings back together
      }®?              #  And then print `®<span class="math-container">`</span> without newline
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, 62 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{S:g{(&lt;-[%]&gt;*)\%?(..)?}={TR/+/ /}($0).print+print chr "0x"~$1}
</code></pre>

<p><a href="https://tio.run/##HczdCoJQDAfw@/MUQ5pph/w4WkFm0ecDVBdFdRGhJZnKUSgRe3WbXfy2P9tYFsh42LxKUEPwm2o3vlfapH/Cy7Snn3GmGYY@q/1qvzW5CWatdSzdyGSUFPxf4faQoFgf5dux6yZMJWhxlAS5DhUDKGQJhhp6FPNrCd2ux@rGtiwUA/5O5TNK7gyFy1EMOTo3siYbsqCZQ31OVpSXRJARxxHdiHY/YOjarnCd9gcejhwRWRHkBf4A" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>

<p>Anonymous code block that outputs to STDOUT and then errors. This assumes that the input cannot contain spaces.</p>
</div>
<div id="pu9" class="pu"><h1>Perl 5 (<code>-0777p -Mre=/si</code>), 45 bytes</h1>
<pre><code>s/%.?[^\da-f].*//;y/+/ /;s/%(..)/chr hex$1/ge
</code></pre>
<p><a href="https://tio.run/##FYvLCsIwEEX3@YouDKihmXaamkUR8bnzA8QHiMa2KElJCtafN46Lw1zm3NsZ/ypjDMDl4ng53a/p4yynANUHBCRQkRhLOYFb45PGDKMcahNjnmUcS/F2/tnamjGOSnCcCV6siS2xI1b0K@guiQ1lcoiEFlxTB/@@pLHKFaqCwnBgzLo@CcZY9nVd3zobYppprbuY7r2ZQ2h/" rel="nofollow noreferrer">TIO</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 92 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>f=([x,y,z,...a])=&gt;x=='%'?1/(n='0x'+y+z)?Buffer([n])+f(a):'':x?(x=='+'?' ':x)+f([y,z,...a]):a
</code></pre>

<p><a href="https://tio.run/##bY3bCoJAEIbve4oIht1lzHS1AmGTjs9QiBdLuWLFbtjJenkbr4Lo4mMO38/MUT/0dV9Xl9vQukPRtkbxrPFe3tvzfV/nQs0apRiwNBxxq1jQMHzhW6SLuzFFzTObCzRci4SxpEl5F0aWsj5Nnci@lxLd7p29unPhn13JDR@EQQByjE9XnypbDoTo/QRAxghyghAtiTWxIRa0i6jOiRX15KQkpghTysjOj/9di8NYxtH/P7DdIQCQbD8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="http://gema.sourceforge.net/" rel="nofollow noreferrer">Gema</a>, 45 characters</h1>

<pre><code>+= 
%&lt;X2&gt;=@int-char{@radix{16;10;$1}}
%=@fail
</code></pre>

<p>Insensitive on hexadecimal case.</p>

<p>Sample run:</p>

<pre><code>bash-5.0$ gema '+= ;%&lt;X2&gt;=@int-char{@radix{16;10;$1}};%=@fail' &lt;&lt;&lt; $'100%25+working\n%24+%26+%3C+%3E+%3F+%3B+%23+%3A+%3D+%2C+%22+%27+%7E+%2B+%25\n%414243\n%24+%XY+%%%'
100% working
$ &amp; &lt; &gt; ? ; # : = , " ' ~ + %
A4243
$ 
</code></pre>

<p><a href="https://tio.run/##JcxNCsIwEAXgfU7hwrcahGaStosaib9nqMugtga1QhAUSs8eR1x8zPDeMP3lEXImN1NYtrxyPg6vxeka0uhTOMfPqKtGF81cT5OC812I95x1UYBLej/TLQ69AlsCVwSzFXtxEBvJjMy12MkuHbOoCbXc8K8vFay2bM3/R3skAF8" rel="nofollow noreferrer" title="Gema – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/189139/">189139</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




