<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::142019</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>029</td><td>Dyalog APL</td><td>251006T013748Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/284011#284011">Aaron</a></td></tr>
<tr d-ix="1"><td>103</td><td>Kotlin 1.1</td><td>170909T203543Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142272#142272">jrtapsel</a></td></tr>
<tr d-ix="2"><td>013</td><td>Jelly</td><td>170907T181257Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142032#142032">miles</a></td></tr>
<tr d-ix="3"><td>016</td><td>Husk</td><td>170907T192015Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142042#142042">H.PWiz</a></td></tr>
<tr d-ix="4"><td>016</td><td>Jelly</td><td>170907T181345Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142033#142033">Jonathan</a></td></tr>
<tr d-ix="5"><td>057</td><td>Mathematica</td><td>170907T183054Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142035#142035">JungHwan</a></td></tr>
<tr d-ix="6"><td>nan</td><td>Perl 5</td><td>170907T185136Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142036#142036">Xcali</a></td></tr>
<tr d-ix="7"><td>109</td><td>Python 3</td><td>170907T172334Z</td><td><a href="https://codegolf.stackexchange.com/questions/142019/measuring-a-pile-of-logs/142023#142023">anon</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Dyalog APL, 29 bytes</h1>
<pre><code>{+⌿↑⍵{∊⍵⍺⍴¨0 1}¨0,+\2(0⌈-)/⍵}­⁡​‎‎⁪⁡⁪⁠⁪⁢⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁢⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁢⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁣⁪‏‏​⁡⁠⁡‌⁣​‎⁪⁪⁠‎⁪⁡⁪⁠⁪⁢⁣⁤⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁡⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁤⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁡⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁢⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁤⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁢⁪‏‏​⁡⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏‏​⁡⁠⁡‌⁣⁡​‎‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁣⁢​‎‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏‏​⁡⁠⁡‌­
                     (0⌈-)     # ‎⁡Find the max between zero and the difference between the left and right args
                    2     /    # ‎⁢applied between each pair of elements
                           ⍵   # ‎⁣of the input
                  +\           # ‎⁤Sum-scan
                0,             # ‎⁢⁡Prepend a zero as the first log cannot be offset
    ⍵{        }¨               # ‎⁢⁢For-each element of the input and the previously generated set of differences
       ⍵⍺⍴¨0 1                 # ‎⁢⁣Take right-many zeroes and left-many ones
      ∊                        # ‎⁢⁤Enlist (flatten)
   ↑                           # ‎⁣⁡Mix into a matrix
 +⌿                            # ‎⁣⁢Sum down the columns
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://kotlinlang.org" rel="nofollow noreferrer">Kotlin</a> 1.1, <s>113</s> 103 bytes</h1>

<pre><code>{var l=0
var r=0
it.flatMap{l=maxOf(l,r-it+1)
r=l+it-1
(l..r).toList()}.groupBy{it}.map{it.value.size}}
</code></pre>

<h2>Beautified</h2>

<pre><code>{
    // Current row leftmost value
    var l = 0
    // Current row rightmost value
    var r = 0
    // For each log
    it.flatMap {
        // Work out the new leftmost point
        l = maxOf(
                l,
                r - it+1)
        // Use it to work out the new rightmost point
        r = l + it-1
        // Record the used columns
        (l..r).toList()}
            // Group the column numbers together
            .groupBy { it }
            // Count the amount of times each column is used
            // Put the results into a list
            .map { it.value.size }
}
</code></pre>

<h2>Test</h2>

<pre><code>var z:(List&lt;Int&gt;)-&gt;List&lt;Int&gt; =
{var l=0
var r=0
it.flatMap{l=maxOf(l,r-it+1)
r=l+it-1
(l..r).toList()}.groupBy{it}.map{it.value.size}}

fun main(args: Array&lt;String&gt;) {
    println(z(listOf(5, 8, 6, 2, 4, 3, 6, 2)))
    println(listOf(2,2,3,3,3,2,4,6,3,3,1,2,2))
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, <s>19</s> 13 bytes</h1>

<pre><code>IN0»0;+\+"RṬS
</code></pre>

<p><a href="https://tio.run/##PU6xDQIxDNyF9l0k@SQPYgKERAEVCilp0C9AS8MyvwD6DiaBRcz5FJDlO/tsX3I5j@NVdbNzz9mtu1O32L8f00Ff989t2iKPqqX4KiUiewnAID0x/DoykLq3HmHMO3BE3xhKkqXkpuSmeCce@A9TPQzohFlEaVKw0s5sSP9Bkq3xmIvJ9iIFGuT2nUFWeKPWLw" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Saved 2 bytes thanks to @Jonathan Allan.</p>

<h2>Explanation</h2>

<pre><code>IN0»0;+\+"RṬS  Input: array A
I              Increments
 N             Negate
  0»           Max with 0
    0;         Prepend 0
      +\       Cumulative sum
        +"     Vectorized add with
          R    Range, vectorizes over each integer
           Ṭ   Create a list with 1's at the specified indices
            S  Sum
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 16 bytes</h1>
<pre><code>Fż+Ṡzo`Ṙ↔ḋ2eo∫Ẋ&lt;
</code></pre>
<p><a href="https://tio.run/##yygtzv7/3@3oHu2HOxdU5Sc83DnjUduUhzu6jVLzH3Wsfriry@b////RpjoWOmY6RjomOsYgOhYA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<pre><code>              Ẋ    For all adjacent pairs, x y
               &lt;   return max(0,x-y)
            o∫     Cumulative sum, with an extra 0 at the start
   Ṡz              Zip the input list and ^ with ...
           e         Make a two element list
        ↔ḋ2          The list [0,1]
     o`Ṙ             Repeat each in ^ by ^^
Fż+               Sum the columns
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, <s>&nbsp;18&nbsp;</s> 16 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>

<p>-2 bytes prompted by help from <a href="https://codegolf.stackexchange.com/users/6710/miles">miles</a></p>

<p><sup>Maybe there is a quicker way using mathematics rather than construction like this does?</sup></p>

<pre><code>IN0;»0+\0ẋ;"1ẋ$S
</code></pre>

<p><strong><a href="https://tio.run/##y0rNyan8/9/Tz8D60G4D7RiDh7u6rZUMgaRK8P///6NNdSx0zHSMdEx0jEF0LAA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> or see the <a href="https://tio.run/##y0rNyan8/9/Tz8D60G4D7RiDh7u6rZUMgaRK8P@jew63P2pac3TSw50zgDQQZYGohjkKunYKjxrmRv7/Hx1tGKvDpRBtAiaNdRSMwAwjHQVjGMMIWRDGNgaLQ9QYQsTBCMKGmglmm4DFEWywlKmOgoWOghmSlBmSlKEBEJuCDUNGEHlDkPlQy0DqTEBciIwRhAsxDawO5hRzHQVTiDaosVCdphCNJjBxqNlmSN4BarUEOSc2FgA" rel="noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>

<h3>How?</h3>

<pre><code>IN0;»0+\0ẋ;"1ẋ$S - Link: list of positive integers, logLengths  e.g. [4, 3, 3, 1, 4, 3]
I                - incremental differences                            [-1, 0,-2, 3,-1]
 N               - negate (vectorises)                                [ 1, 0, 2,-3, 1]
  0;             - zero concatenated with that                      [0, 1, 0, 2,-3, 1]
    »0           - maximum (vectorises) of that and zero            [0, 1, 0, 2, 0, 1]
      +\         - cumulative reduce with addition                  [0, 1, 1, 3, 3, 4]
        0ẋ       - zero repeated (vectorises)    [[],[0],[0],[0,0,0],[0,0,0],[0,0,0,0]]
              $  - last two links as a monad (right is implicitly logLengths):
            1ẋ   -   one repeated     [[1,1,1,1],[1,1,1],[1,1,1],[1],[1,1,1,1],[1,1,1]]
           "     - zip with:
          ;      -   concatenation
              [[1,1,1,1],[0,1,1,1],[0,1,1,1],[0,0,0,1],[0,0,0,1,1,1,1],[0,0,0,0,1,1,1]]
              ... this is an upside-down version of the logs like those in the OP
                  with 0 for spaces and 1 for # with any right-hand-side spaces missing.
               S - sum                                           [1, 3, 3, 5, 2, 2, 2]
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Mathematica, <s>76</s> <s>60</s> <s>58</s> 57 bytes</h1>
<pre><code>#2&amp;@@@Tally[l=j=0;##&amp;@@(Range@#+(j+=Ramp[l-(l=#)]))&amp;/@#]&amp;
</code></pre>
<p><a href="https://sandbox.open.wolframcloud.com" rel="nofollow noreferrer">Try it on Wolfram Sandbox</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 64 + 1 (<code>-a</code>) = 65 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>for(@F){$e&lt;$s+--$_?$e=$s+$_:($s=$e-$_);$_++for@r[$s..$e]}say"@r"
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/z8tv0jDwU2zWiXVRqVYW1dXJd5eJdUWyFSJt9JQKbZVSQUKaVqrxGtrA5U6FEWrFOvpqaTG1hYnVio5FCn9/29opGBoomCsYKZgaKxgqGD4L7@gJDM/r/i/rq@pnoGhwX/dRAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <strike>114</strike> 109 bytes</h1>

<p><strong>Edit:</strong> Saved 5 bytes thanks to <a href="https://codegolf.stackexchange.com/users/59487/mr-xcoder">@Mr.Xcoder</a></p>



<pre class="lang-python prettyprint-override"><code>f=lambda x,i=1:x[i:]and x[i]&gt;=x[~-i]and f(x,i+1)or[i]+f([q-(e&lt;i)for e,q in enumerate(x)if(e&lt;i)&lt;q])if x else[]
</code></pre>

<p><a href="https://tio.run/##bVPbboMwDH0uX5G9gepKC7duqOwr9oaiiq1BjdTSFqjEXvbrzDFJoHSyEPHx8bFjzPWnO17qaBiq/FSevw4l60HlPOsLlYmyPjA8iI@8L343ivzKR8KaB5cGA@vKL24bX@5UUF0aJuHGVM1kfT/Lpuyk3weqoujuJvDIeiZPrSzE0Mm223@XrWxZzgqvKLgAfATgMdZHIBuBCEKCQnwTEEKEALqWEVIMkBk5BgHj26pQGkcosonaIR2CRn6CnsmJ0Y0xbN4uO0EbEaIl8AapoaWmbkjEiNB0LDldAEu8Ak@AOzPduyRrNr51HaMQBVAgxqOdzJONPT6aiRmlUCvojrWmuf7/SjFNYd6PNjPrrZ5YSGMbm0rMB5zqcuAztaX@sq@YtOieqSm6hXec17QY88k96D5iMX6Y5f1nuUJ4wvP05rp9BNbI9n7q9B5PS5p5K@fsDSHHX8GBgbfC9fafSC@50Qsydm1U3fmzSku2rY1i@jexGZ/NXQbDHw" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/142019/">142019</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




