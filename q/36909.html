<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::36909</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>006</td><td>Vyxal</td><td>250901T144056Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/283414#283414">lyxal</a></td></tr>
<tr d-ix="1"><td>023</td><td>Ly</td><td>221124T013718Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/254854#254854">cnamejj</a></td></tr>
<tr d-ix="2"><td>045</td><td>Raku</td><td>221123T202537Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/254845#254845">Sean</a></td></tr>
<tr d-ix="3"><td>061</td><td>Ruby</td><td>221123T180911Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/254843#254843">Jordan</a></td></tr>
<tr d-ix="4"><td>085</td><td>C clang</td><td>220616T052801Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/248664#248664">c--</a></td></tr>
<tr d-ix="5"><td>008</td><td>Japt</td><td>190410T234720Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/182998#182998">Shaggy</a></td></tr>
<tr d-ix="6"><td>054</td><td>Python 2</td><td>190410T214731Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/182993#182993">ArBo</a></td></tr>
<tr d-ix="7"><td>008</td><td>Brachylog</td><td>190410T090500Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/182950#182950">Unrelate</a></td></tr>
<tr d-ix="8"><td>047</td><td>APL NARS</td><td>171217T063710Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/150847#150847">user5898</a></td></tr>
<tr d-ix="9"><td>009</td><td>Husk</td><td>171207T001813Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/150054#150054">ბიმო</a></td></tr>
<tr d-ix="10"><td>141</td><td>05AB1E</td><td>171122T182517Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/148845#148845">Magic Oc</a></td></tr>
<tr d-ix="11"><td>084</td><td>JavaScript ES6</td><td>171123T214238Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/148939#148939">yetirs</a></td></tr>
<tr d-ix="12"><td>412</td><td>Axiom</td><td>171121T085803Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/148745#148745">user5898</a></td></tr>
<tr d-ix="13"><td>068</td><td>javascript</td><td>171121T132057Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/148754#148754">Brian H.</a></td></tr>
<tr d-ix="14"><td>073</td><td>Bash</td><td>171121T123635Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/148751#148751">iBug</a></td></tr>
<tr d-ix="15"><td>056</td><td>PHP</td><td>170223T191128Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/111082#111082">Titus</a></td></tr>
<tr d-ix="16"><td>038</td><td>QBIC</td><td>170223T175055Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/111073#111073">steenber</a></td></tr>
<tr d-ix="17"><td>086</td><td>Javascript</td><td>170223T122929Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/111035#111035">Beldrait</a></td></tr>
<tr d-ix="18"><td>109</td><td>Python</td><td>140827T145851Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36916#36916">RageCage</a></td></tr>
<tr d-ix="19"><td>073</td><td>CoffeeScript</td><td>140828T223153Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/37007#37007">Justin M</a></td></tr>
<tr d-ix="20"><td>049</td><td>J</td><td>140829T032340Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/37025#37025">algorith</a></td></tr>
<tr d-ix="21"><td>044</td><td>Perl 5</td><td>140828T034622Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36954#36954">user0721</a></td></tr>
<tr d-ix="22"><td>075</td><td>Mathematica</td><td>140828T223007Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/37006#37006">freddiek</a></td></tr>
<tr d-ix="23"><td>289</td><td>C++</td><td>140828T193605Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36991#36991">bacchusb</a></td></tr>
<tr d-ix="24"><td>020</td><td>Pyth</td><td>140827T134148Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36910#36910">izzyg</a></td></tr>
<tr d-ix="25"><td>117</td><td>JavaScript</td><td>140827T134315Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36911#36911">Jacob</a></td></tr>
<tr d-ix="26"><td>062</td><td>Haskell</td><td>140827T153919Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36920#36920">Ray</a></td></tr>
<tr d-ix="27"><td>025</td><td>CJam</td><td>140827T162924Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36923#36923">Dennis</a></td></tr>
<tr d-ix="28"><td>092</td><td>Clojure</td><td>140827T231342Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36946#36946">Yosemite</a></td></tr>
<tr d-ix="29"><td>076</td><td>Python 2</td><td>140827T194049Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36933#36933">BeetDemG</a></td></tr>
<tr d-ix="30"><td>109</td><td>Java</td><td>140827T142820Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36914#36914">Geobits</a></td></tr>
<tr d-ix="31"><td>107</td><td>Groovy</td><td>140827T182503Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36925#36925">Michael </a></td></tr>
<tr d-ix="32"><td>081</td><td>Python 2.7</td><td>140827T153222Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36918#36918">Moop</a></td></tr>
<tr d-ix="33"><td>084</td><td>Ruby</td><td>140827T135228Z</td><td><a href="https://codegolf.stackexchange.com/questions/36909/find-the-closest-palindromic-number/36912#36912">Martin E</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 6 bytes</h1>
<pre><code>?+Ḃ=)N
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJBIiwiIiwiPyvhuII9KU4iLCIiLCIzXG4yMzRcbjEyOTk5MzFcbjEyNiJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Single character modification of my answer <a href="https://codegolf.stackexchange.com/a/283413/78850">here</a> lol.</p>
<h2>Explained</h2>
<pre><code>?+Ḃ=)N­⁡​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁣⁪‏‏​⁡⁠⁡‌­
    )N  # ‎⁡Find the first X where:
?+      # ‎⁢  N + X
   =    # ‎⁣  equals
  Ḃ     # ‎⁤  it's reverse
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/LyricLy/Ly" rel="nofollow noreferrer">Ly</a>, 23 bytes</h1>
<pre><code>n:[s&gt;lSrJl=[&lt;f-u;]pp&lt;`]
</code></pre>
<p><a href="https://tio.run/##y6n8/z/PKrrYLie4yCvHNtomTbfUOragwCYh9v9/c0MA" rel="nofollow noreferrer" title="Ly – Try It Online">Try it online!</a></p>
<p>At a high level, this one keeps the original number on the stack, then increments a value on the backup cell for the &quot;is this a palindrome?&quot; test.  That test is done one a separate stack using a simple &quot;convert number to digits&quot;, reverse the stack, &quot;convert digits to number&quot; check.</p>
<pre><code>n:                      - get the input number, make a copy we can increment
  [                   ] - infinite loop, the code exit once it finds the answer
   s&gt;l                  - save the current candidate, switch stacks and load it
      SrJ               - convert to digits, reverse, convert back to a number
         l=             - re-load the candidate and compare
           [     ]      - codeblock used if they match (is palindrome)
            &lt;           - switch back to the main stack
             f-         - flip the top two and subtract to get the offset
               u;       - print as a number and exit
                  pp    - delete stack
                    &lt;<span class="math-container">`</span>  - switch back to main stack and increment candidate
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://raku.org/" rel="nofollow noreferrer">Raku</a>, 45 bytes</h1>
<pre><code>{($_,{++$*($*=-1)+$_}...{$_==.flip})[*-1]-$_}
</code></pre>
<p><a href="https://tio.run/##DcjRCkAwFAbgV/nTSWy2mkmtHC8iLRdWiogrLc8@u/rqu9Z779PxogzgFCvyTZSSREWClakl@U9rHckz67Bv11dPQplZ5U/P8qIgDx4RA/IUCOeNwaK1HUzrnLMm24/pBw" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<ul>
<li><code>$_, { ... } ... { ... }</code> defines a sequence that starts with the input argument <code>$_</code>.</li>
<li>The first set of braces <code>{ ++$ * ($ *= -1) + $_ }</code> generates each term of the sequence from the previous one.  It uses two anonymous state variables, both written as <code>$</code>.  The first one increments on each call to the block, and the other alternates between -1 and +1.  Multiplying them together and adding to the previous element gives the sequence <code>$_, $_ + 1, $_ - 1, $_ + 2, $_ - 2, ...</code>.</li>
<li>The second set of braces <code>{ $_ == .flip }</code> is the terminating condition, met by the first number which is equal to itself with the digits flipped (reversed).</li>
<li><code>[* - 1]</code> picks the last element of the sequence (the palindromic one).</li>
<li><code>- $_</code> subtracts the input element to give the required difference.</li>
</ul>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 61 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/182993/11261">ArBo's Python 2 answer</a>.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;n,d=0{(n+d).to_s!=(n+d).to_s.reverse ? F[n,~d+(d&lt;0?1:0)]:d}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsEiN9ulpSVpuhY3bXXt8nRSbA2qNfK0UzT1SvLjixVtEWy9otSy1KLiVAV7BbfoPJ26FG2NFBsDe0MrA81Yq5RaqCHBBUBZ41gFKFBWMOACiRgZm8TCRHSNwEKGRpaWlsaGsWAhQwOomBlcmalCfpGCrimQDTF6wQIIDQA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 85 bytes</h1>

<pre class="lang-c prettyprint-override"><code>f(n,x,y,z){for(x=0;z=n+x;x=(1&gt;x)-x){for(y=0;z;z/=10)y=y*10+z%10;if(y==n+x)return x;}}
</code></pre>
<p>This turned out to be a port of <a href="https://codegolf.stackexchange.com/a/36910/112488">isaacg's Pyth solution</a>.</p>
<p><a href="https://tio.run/##VY5BCsIwEEXXzimCUkg01cSKUmJ6EjfStBrQqdQoaaVnr6mK6O593vzP5HF@2uOh70uK3POGt@xRVjX1WqhW48wrr6nMPIv9WzSDUO1CS8Ea3UylmLWRFMqWQQ0FVhfuViPxquv6icX8dDMF2V6dsdX8mAHcK2vAFVdHLTqCDB4wutSBSzqONobEGYkSs8MxJ8hJ@IsxBR1AuIDz3iIdBl6t10gS7JuWyeqHE/kNcpmm6V9eB4bR51MR5vsn" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 8 bytes</h1>
<pre><code>nÈ¥sw}cU
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=bsilc3d9Y1U&amp;input=MTI2" rel="nofollow noreferrer">Try it</a></p>
<pre><code>nÈ¥sw}cU     :Implicit input of integer U
      cU     :Get the first number in the sequence [U,U-1,U+1,U-2,U+2,...,U-n,U+n]
 È           :That returns true when passed the the following function
  ¥          :  Test for equality with
   s         :  Convert to string
    w        :  Reverse
     }       :End function
n            :Subtract U from the result
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>55</s> 54 bytes</h1>



<pre class="lang-python prettyprint-override"><code>l=lambda n,d=0:`n+d`!=`n+d`[::-1]and l(n,~d+(d&lt;0))or d
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/r/P8c2JzE3KSVRIU8nxdbAKiFPOyVB0RZMRVtZ6RrGJualKORo5OnUpWhrpNgYaGrmFymk/C8oyswr0cjRMNbU5IKxjYxNkHiGRpaWlsaGKCJmmpr/AQ" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 8 bytes</h1>

<pre><code>;.≜+A↔A∧
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFRu/6htw6Ompoe7Omsfbp3w31rvUeccbcdHbVMcH3Us//8/2ljHyNhEx9DI0tLS2BBIm8UCAA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>

<p>The label predicate <code>≜</code> is vital here, because by using it on the output before anything else happens (although it's really being invoked on the list containing the input and the output), its absolute value is minimized, because instead of doing anything smarter based on the constraints the program <a href="https://codegolf.stackexchange.com/a/182893/85334">guesses every integer starting from 0 until it can find one that works.</a> If <code>≜</code> is omitted, it dawns on the program that 0 is a very nice palindrome, and it will <a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFRu/6htw6Ompoe7Omsfbp3w31pP2/FR2xTHRx3L//@PNtYxMjbRMTSytLQ0NgTSZrEA" rel="nofollow noreferrer">always output the negative of the input.</a></p>

<pre><code>            The input
;  +        plus
 .          the output
  ≜         which is instantiated immediately
    A       is A
     ↔      which reversed
      A     is still A
       ∧    but isn't necessarily the output.
</code></pre>
</div>
<div id="pu8" class="pu"><h1>APL NARS 47 chars</h1>
<pre><code>r←s a;b
r←0
A:b←⍕a+r⋄→0×⍳b≡⌽b⋄r←-r⋄→A×⍳r&lt;0⋄r+←1⋄→A
</code></pre>
<p>this above search but algo can not be fast and right as the g below...</p>
<p>This</p>
<pre><code>A:b←⍕a+r⋄→0×⍳b≡⌽b⋄r←-r⋄→A×⍳r&lt;0⋄r+←1⋄→A
</code></pre>
<p>is a simple loop exit only when it find b≡⌽b so b is a string palindrome</p>
<pre><code>  s¨3,10,234,1299931,126
0 1 ¯2 ¯10 5 

∇r←g w;n;a;y;t;o;h;v
         r←0J1
   →0×⍳0≠⍴⍴w⋄→0×⍳''≡0↑w ⍝ if arg is not scalar int&gt;=0→0J1
   →0×⍳(w&lt;0)∨w≠⌊w
   h←{z←⍕⍺⋄q←⍕⍵⋄⍎(z,⌽q)}⍝ h return as digit ⍺⌽⍵
   n←⍴⍕w⋄r← 0
   →0×⍳n≤1              ⍝ arg one digit return r←0
   a←10*⌊n÷2
B: v←a⋄→C×⍳∼2∣n⋄v←a×10
C: t←⌊w÷v ⋄y←⌊w÷a
   o←y h t⋄r←(y+1)h t+1
   →D×⍳∼(∣r-w)&lt;∣o-w⋄r←r-w⋄→0
D: r←o-w
∇

  g¨3,10,234,1299931,126
0 1 ¯2 ¯10 ¯5 
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>16 12</s> 9 bytes</h1>

<pre><code>ḟoS=↔+⁰İZ
</code></pre>

<p>Thanks @H.PWiz for -4 bytes!</p>

<p><a href="https://tio.run/##yygtzv7//@GO@fnBto/apmg/atxwZEPU////DY0sLS2NDQE" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<pre><code>ḟ(S=↔+⁰)İZ  -- input ⁰ a number, for example: 126
        İZ  -- built-in integers: [0,1,-1,2,-2...]
ḟ(     )    -- first element that satisfies the following (eg. 5):
     +⁰     --   add element to input: 131
  S=        --   is it equal to itself..
    ↔       --   ..reversed: 131 == 131
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>15</s> 14 bytes (-1 Thanks to Emigna)</h1>
<pre><code>2äнsgÈi∞ë.∞}s-
</code></pre>
<p><a href="https://tio.run/##MzBNTDJM/f/f6PCSC3uL0w93ZD7qmHd4tR6QrC3W/f/f0BgA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<hr />
<h1>Method:</h1>
<ul>
<li>Take the first half of the number.</li>
<li>Mirror it intersected if odd, non-intersected if even.</li>
<li>Difference.</li>
</ul>
</div>
<div id="pu11" class="pu"><h1>JavaScript (ES6), 84 bytes</h1>

<pre><code>n=&gt;[...(''+n)].reduce((p,c,i,s,m=s.length-1)=&gt;i&lt;m/2?p+(c-s[m-i])*Math.pow(10,i):p,0)
</code></pre>

<p>My first golf challenge!  I know the shorter and more elegant solution has already been posted by @Brian H., but this is another approach.</p>

<h3>Test Code</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const t =
n=&gt;[...(''+n)].reduce((p,c,i,s,m=s.length-1)=&gt;i&lt;m/2?p+(c-s[m-i])*Math.pow(10,i):p,0)
;

console.log('t(3) =', t(3)); // expected: 0
console.log('t(234) =', t(234)); // expected: -2
console.log('t(1299931) =', t(1299931)); // expected: -10
console.log('t(126) =', t(126)); // expected: -5</code></pre>
</div>
</div>
</p>
</div>
<div id="pu12" class="pu"><h1>Axiom, <s>720</s> <s>594</s> 412 bytes</h1>
<pre><code>R(x)==&gt;return x;p(r,a)==(n:=#(a::String);if r&lt;0 then(a=0=&gt;R a;n=1 or a=10^(n-1)=&gt;R(a-1);a=10^(n-1)+1=&gt;R(a-2));if r&gt;0 then(n=1 and a&lt;9=&gt;R(a+1);a=10^n-1=&gt;R(a+2));r=0 and n=1=&gt;1;v:=a quo 10^(n quo 2);repeat(c:=v;w:=(n rem 2&gt;0=&gt;v quo 10;v);repeat(c:=10*c+w rem 10;w:=w quo 10;w=0=&gt;break);r&lt;0=&gt;(c&lt;a=&gt;R c;v:=v-1);r&gt;0=&gt;(c&gt;a=&gt;R c;v:=v+1);R(c=a=&gt;1;0));c)
D(a:NNI):INT==(p(0,a)=1=&gt;0;w:=p(-1,a);s:=p(1,a);a-w&lt;s-a=&gt;w-a;s-a)
</code></pre>
<p>The byte count it is again this, but the algo it would be O(log(n)) because it would dipend only from the digit lenght of its input (and log10(n) would be near the lenght of the decimal digits of n).
ungolfed and results</p>
<pre><code>-- Ritorna il precedente numero palidrome rispetto ad 'a' NNI, se r&lt;0
--                               ha la particolarita' palpn(-1,0) = 0
-- Ritorna il successivo numero palidrome rispetto ad 'a' NNI, se r&gt;0
-- Se r=0 ritorna 1 se 'a' e' palindrome, 0 se 'a' non e' palindrome
R(x)==&gt;return x
palpn(r,a)==
    n:=#(a::String) -- n la lunghezza in cifre di base 10 di a
    if r&lt;0 then(a=0        =&gt;R a;n=1 or a=10^(n-1)=&gt;R(a-1);a=10^(n-1)+1=&gt;R(a-2))
    if r&gt;0 then(n=1 and a&lt;9=&gt;R(a+1);    a=10^n-1  =&gt;R(a+2))
    r=0  and n=1=&gt;1
    v:=a quo 10^(n quo 2)
    repeat -- because here not there is a goto instruction i have to use repeat
        c:=v;w:=(n rem 2&gt;0=&gt;v quo 10;v)
        repeat
          c:=10*c+w rem 10
          w:=w quo 10
          w=0=&gt;break
        r&lt;0=&gt;(c&lt;a=&gt;R c;v:=v-1)
        r&gt;0=&gt;(c&gt;a=&gt;R c;v:=v+1)
        R(c=a=&gt;1;0) -- for r==0
    c

-- Ritorna la distanza minima tra l'input 'a' e una palindrome:
--        0 se 'a' e' una palindrome
--        r numero con segno negativo se tale palindrome precede 'a'
--        r numero con segno positivo se tale palindrome e' successiva ad 'a'
palDistance(a:NNI):INT==
    palpn(0,a)=1=&gt;0
    p:=palpn(-1,a);s:=palpn(1,a)
    a-p&lt;s-a=&gt;p-a
    s-a

--------------------------------------

(3) -&gt; [[i,D(i)] for i in [3,10,234,1299931,126]]
   (3)  [[3,0],[10,1],[234,- 2],[1299931,- 10],[126,5]]
                                                  Type: List List Integer
(4) -&gt; D 7978986575546463645758676970789089064235234524548028408198401348930489104890184018410
   (4)  - 199223418598327604580355025458434427119613
                                                            Type: Integer
(5) -&gt;  p(0,7978986575546463645758676970789089064235234524548028408198401348930489104890184018410+%)
   (5)  1
                                                    Type: PositiveInteger
(6) -&gt; 7978986575546463645758676970789089064235234524548028408198401348930489104890184018410+%%(-2)
   (6)
       7978986575546463645758676970789089064235234325324609809870796768575463646455756898797
                                                    Type: PositiveInteger
</code></pre>
</div>
<div id="pu13" class="pu"><h1>javascript 68 bytes</h1>

<pre><code>(n,s=[...(''+n)],j=s.length)=&gt;s.map((v,i,)=&gt;i&gt;--j?s[j]:v).join('')-n
</code></pre>

<p>HUGE props to @Beldraith for the algorithm, i'm posting this as an answer though, because it took me quite the time to get it to work in a single statement.</p>

<p>Any tips are welcome ;)</p>

<h3>ungolfed</h3>

<pre><code>(
    n, // input
    s=[...(''+n)], // input split to array of chars
    j=s.length, // highest available index in s
)=&gt; 
s.map( // this will return a new array, without modifying s
    (
        v, // value of current iteration
        i, // index of current iteration
    )=&gt; i &gt; --j ? s[j] : v
).join('') - n
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Bash, 73 bytes</h1>

<pre><code>i=$1;x=$i;while((x-10#$(rev&lt;&lt;&lt;$x)));do ((r=(1&gt;r)-r,x=r+i));done;echo $x
</code></pre>

<p>Input goes to the 1st command line argument:</p>

<pre><code>foo.sh 123456789
</code></pre>
</div>
<div id="pu15" class="pu"><h1>PHP, 56 bytes</h1>
<pre class="lang-php prettyprint-override"><code>for(;strrev($i+$n=$argv[1])-$n-$i;$i=($i&lt;1)-$i);echo+$i;
</code></pre>
<p>takes input from command line argument; run with <code>-nr</code>.</p>
</div>
<div id="pu16" class="pu"><h2><a href="https://drive.google.com/drive/folders/0B0R1Jgqp8Gg4cVJCZkRkdEthZDQ" rel="nofollow noreferrer">QBIC</a>, 38 bytes, nc</h2>
<pre><code>:{[-1,1,2|A=!a+b*c$~A=_fA||_xb*c]c=c+1
</code></pre>
<p>Explanation:</p>
<p>The code reads an input, and then applies a modifier. It then tests to see if the number + modifier is a palindrome. Then, it flips the sigh on the modifier, re-applies that and tests again.</p>
<pre><code>:{        Read the input value, start a DO-loop
[-1,1,2|  FOR (b = -1; b &lt;= 1; b+=2 )
A=!a+b*c$ Get a string from the input number, 
            plus modifier c (which is 0 at the start of QBIC)
            times -1 or 1, depending on b's iteration.
~A=_fA|   if that string is equal to it's own reversed version
|_xb*c]   then Quit, printing the modifier * sign
c=c+1     Increment the modifoer and DO-LOOP again.
          The DO-loop is implicitly closed by QBIC at EOF
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Javascript 86</h1>

<pre><code>n=&gt;{s=(n+'').split('');for(i=0,j=s.length-1;i&lt;j;i++,j--)s[j]=s[i];return s.join('')-n}
</code></pre>

<p>This is my first codegolf challenge. Hope this solution is acceptable.</p>

<p>ungolfed:
<code>
n => {
    s = (n + '').split(''); 
    for (i = 0, j = s.length - 1; i &lt; j; i++,j--) 
        s[j] = s[i]; 
    return s.join('') - n 
}
</code>
Explanation:<br>
Convert input n to String and split.<br>
Iterate over both sides of the resulting array and copy digit on s[i] to s[j] until i &lt; j. This will result in our desired palindrome.<br>
Join array back together and subtract n to get x</p>
</div>
<div id="pu18" class="pu"><p>Python, 109</p>

<pre><code>def q(x,z):
 r=lambda s:int(str(s)[::-1])
 if x+z==r(x+z):return z
 if x-z==r(x-z):return -z
 return q(x,z+1)
</code></pre>
</div>
<div id="pu19" class="pu"><h1>CoffeeScript: 73</h1>
<pre><code>(x)-&gt;(x+=&quot;&quot;)[0...(y=x.length/2)]+x[0...-y].split(&quot;&quot;).reverse().join(&quot;&quot;)-x
</code></pre>
<p><strong>Explanation:</strong>
This takes advantage of the fact that if we have a number of odd length (say 1234567), <code>x.slice(0, y)</code> won't include the middle digit but <code>x.slice(0, -y)</code> will. JavaScript's <code>slice</code> probably <em>shouldn't</em> work this way, but it does.</p>
<p>I was expecting CoffeeScript/JavaScript to have a better way to reverse a string, but the split/reverse/join method seems to be all there is.</p>
</div>
<div id="pu20" class="pu"><h1>J - 49 char</h1>

<p>A function mapping integers to integers.</p>

<pre><code>((0{g#f)&gt;:@]^:(+:/@g=.(-:|.)@":@+f=._1 1*])^:_&amp;0)
</code></pre>

<p>Here's how you might build to this result, in three parts. This is the display of the J REPL: indented lines are user input and outdented ones are REPL output. And yes, J spells the negative sign with an underscore <code>_</code>.</p>

<pre><code>   236 (_1 1*]) 4                          NB. -ve and +ve of right arg
_4 4
   236 (f=._1 1*]) 4                       NB. name it f
_4 4
   236 (+f=._1 1*]) 4                      NB. add left to each
232 240
   236 (":@+f=._1 1*]) 4                   NB. conv each to string
232
240
   236 ((-:|.)@":@+f=._1 1*]) 4            NB. palindrome? on each
1 0
   236 (g=.(-:|.)@":@+f=._1 1*]) 4         NB. name it g
1 0
   236 (+:/@g=.(-:|.)@":@+f=._1 1*]) 4     NB. logical NOR (result 1 if both=0)
0
   palin =: (+:/@g=.(-:|.)@":@+f=._1 1*])


   236 (&gt;:@]) 0                            NB. increment right
1
   236 (&gt;:@]^:2) 0                         NB. functional power
2
   236 (&gt;:@]^:(236 palin 3)) 3             NB. power 1 if no palindromes
4
   236 (&gt;:@]^:(236 palin 4)) 4             NB. power 0 if has palindrome
4
   236 (&gt;:@]^:palin) 4                     NB. syntactic sugar
4
   236 (&gt;:@]^:palin^:_) 0                  NB. increment until palindrome, start with 0
4
   (&gt;:@]^:(+:/@g=.(-:|.)@":@+f=._1 1*])^:_&amp;0) 236    NB. bind 0
4
   delta =: &gt;:@]^:(+:/@g=.(-:|.)@":@+f=._1 1*])^:_&amp;0


   ((f) delta) 236       NB. f=: -ve and +ve
_4 4
   ((g) delta) 236       NB. g=: which are palindromes
1 0
   ((g#f) delta) 236     NB. select the palindromes
_4
   ((g#f) delta) 126     NB. what if both are equal?
_5 5
   ((0{g#f) delta) 126   NB. take the first element
_5
   ((0{g#f)&gt;:@]^:(+:/@g=.(-:|.)@":@+f=._1 1*])^:_&amp;0) 236   NB. it works!
_4
</code></pre>

<p>Examples:</p>

<pre><code>   pal =: ((0{g#f)&gt;:@]^:(+:/@g=.(-:|.)@":@+f=._1 1*])^:_&amp;0)
   pal 3
0
   pal every 234 1299931 126
_2 _10 _5
   pal 2424
18
   2424 + pal 2424
2442
</code></pre>

<p>You can also make the golf prefer the positive solution over the negative when they're equal, by changing <code>_1 1</code> to <code>1 _1</code>.</p>
</div>
<div id="pu21" class="pu"><h2>Perl 5, <strike>93</strike> <strike>89</strike> <strike>88</strike> <strike>87</strike> <strike>75</strike> <strike>63</strike> 44</h2>

<pre><code>$/=($/&lt;1)-$/while$_+$/-reverse$_+$/;$_=$/+0
</code></pre>

<p>Ungolfed:</p>

<pre><code>while($input + $adjustment - reverse($input + $adjustment)) {
    $adjustment = ($adjustment &lt; 1) - $adjustment;   
}
$input = $adjustment + 0;  ## gives 0 if $adj is undefined (when $input is a palindrome)
print $input;  ## implicit
</code></pre>

<p>Thanks to Dennis's suggestions, got it down to 43 + <code>-p</code>  = 44</p>
</div>
<div id="pu22" class="pu"><h2>Mathematica 75</h2>

<p>Probably can be golfed more..</p>

<pre><code>p = (j=0; b=#; While[a=IntegerDigits[b]; b += ++j(-1)^j; a!=Reverse[a]]; #-b+(-1)^j) &amp;
</code></pre>

<p>Spaces not counted and not needed.</p>
</div>
<div id="pu23" class="pu"><h2>C++ 289</h2>

<p>Function P checks for palindromes using <code>&lt;algorithm&gt;</code> method.</p>

<p>Ungolfed:</p>

<pre><code>bool P(int32_t i)
{
string a,b;
stringstream ss;
ss&lt;&lt;i;
ss&gt;&gt;a;
b=a;
reverse_copy(b.begin(),b.end(),b.begin());
int k=a.compare(b);
return (k==0);
}
int main()
{
int32_t n; cin&gt;&gt;n;
int32_t x=0,y=n,z=n,ans=x;
while(1)
{
if(P(y)){ans=x; break;}
if(P(z)){ans=-1*x; break;}
x++;
y+=x;
z-=x;
}
cout&lt;&lt;ans&lt;&lt;endl;
return 0;
}
</code></pre>
</div>
<div id="pu24" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <strike>26</strike> 20</h1>
<pre><code>Lnb_bWP`+QZ=Z-g0ZZ)Z
</code></pre>
<p>Updated to meet the new rules.</p>
<p>The program runs in an infinite loop which tests every possible increment, in the order 0, -1, 1, -2, -2 ...</p>
<p>Explanation:</p>
<pre><code>Q=eval(input())     implicit
Z=0                 implicit
Lnb_b               def P(b): return b != rev(b)
WP`+QZ              while P(repr(Q+Z)):
=Z-g0ZZ             Z=(0&gt;=Z)-Z
)                   &lt;end while&gt;
Z                   print(Z)
</code></pre>
<p>Example run:</p>
<pre><code>python3 pyth.py programs/palin.pyth &lt;&lt;&lt; 965376457643450
-2969881
</code></pre>
<p>This took 23 seconds.</p>
<hr />
<p>Bonus solution, same character count:</p>
<pre><code>Wn`+QZ_`+QZ=Z-g0ZZ)Z
</code></pre>
</div>
<div id="pu25" class="pu"><h1>JavaScript, <strike>175</strike> <strike>136</strike> 117</h1>

<p>Straightforward. <code>p</code> returns true if a given number is palindrome, <code>f</code> searches the nearest.</p>

<p><strong>EDIT:</strong> I also golfed it a little bit more thanks to the sweet "indecrement" trick by <a href="https://codegolf.stackexchange.com/users/14215/geobits">Geobits</a> in the <a href="https://codegolf.stackexchange.com/a/36914/20449">Java answer</a> here.</p>

<pre><code>p=function(n){return (s=''+n).split('').reverse().join('')==s}
f=function(n){for(i=0;!p(n+i);i=i&lt;1?-i+1:-i);return i}
</code></pre>

<p>Usage:</p>

<pre><code>f(3)
f(234)
f(1299931)
</code></pre>
</div>
<div id="pu26" class="pu"><h1>Haskell - 62</h1>

<pre><code>f n=[x-n|x&lt;-[0..]&gt;&gt;= \v-&gt;[n+v,n-v],show x==(reverse.show)x]!!0
</code></pre>

<p>Save it to a file named <code>golf.hs</code> and then test it with ghci:</p>

<pre><code>*Main&gt; :l golf
[1 of 1] Compiling Main             ( golf.hs, interpreted )
Ok, modules loaded: Main.
*Main&gt; map f [1000..1050]
[-1,0,-1,-2,-3,-4,-5,-6,-7,-8,-9,-10,-11,-12,-13,-14,-15,-16,-17,-18,-19,-20,-21,-22,-23,-24,-25,-26,-27,-28,-29,-30,-31,-32,-33,-34,-35,-36,-37,-38,-39,-40,-41,-42,-43,-44,-45,-46,-47,-48,-49]
*Main&gt; 
</code></pre>
</div>
<div id="pu27" class="pu"><h1>CJam, <s>34</s> <s>29</s> 25 bytes</h1>

<pre><code>q~:I!{:R1&lt;R-RI+`_W%=!}g;R
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow" title="CJam interpreter">Try it online.</a></p>

<h3>Examples</h3>

<pre><code>$ cjam palfind.cjam &lt;&lt;&lt; 120; echo
1
$ cjam palfind.cjam &lt;&lt;&lt; 121; echo
0
$ cjam palfind.cjam &lt;&lt;&lt; 122; echo
-1
</code></pre>

<h3>How it works</h3>

<pre><code>q~:I    " Read from STDIN, evaluate and save the result in “I”.                           ";
!       " Compute the logical NOT (0 since the integer is positive).                      ";
{       "                                                                                 ";
  :R    " Save the topmost integer in “R”.                                                ";
  1&lt;R-  " Compute (R &lt; 1) - R. This produces the sequence 0 → 1 → -1 → 2 → -2 → … .       ";
  RI+   " Push I + R.                                                                     ";
  `_    " Cast to string and push a copy.                                                 ";
  W%=!  " Check if the reversed copy matches the original.                                ";
}g      " If it doesn't, repeat the loop.                                                 ";
;R      " Discard the integer on the stack and push “R”.                                  ";
</code></pre>
</div>
<div id="pu28" class="pu"><h1>Clojure, 92</h1>

<p>Takes the first from a lazy for-sequence that works from 0 out and only includes values that make palindromes:</p>

<pre><code>(defn p[x](first(for[i(range)j[1 -1]k[(* i j)]s[(str(+ x k))]:when(=(seq s)(reverse s))]k)))
</code></pre>

<p>REPL-LPER session:</p>

<pre><code>golf-flog&gt; (p 3)
0
golf-flog&gt; (p 10)
1
golf-flog&gt; (p 234)
-2
golf-flog&gt; (p 1299931)
-10
golf-flog&gt; (p (bigint 1e15))
1
</code></pre>
</div>
<div id="pu29" class="pu"><h1>Python 2 - 76</h1>

<pre><code>i=input()
print sorted([r-i for r in range(2*i)if`r`==`r`[::-1]],key=abs)[0]
</code></pre>

<p>Gets the input number and generates a list of the differences between the input and every number between <code>0</code> and <code>2*i</code> only if the number is palindromic. </p>

<p>It then sorts the list by absolute value and prints the first element. </p>
</div>
<div id="pu30" class="pu"><h1>Java : <s>127</s> 109</h1>
<p>Basic iteration, checking both negative and positive before moving to the next candidate.</p>
<pre><code>int p(long n){int i=0;for(;!(n+i+&quot;&quot;).equals(new StringBuilder(n+i+&quot;&quot;).reverse()+&quot;&quot;);i=i&lt;1?-i+1:-i);return i;}
</code></pre>
<p>For input <code>123456789012345</code>, it returns <code>-1358024</code>, to equal palindrome <code>123456787654321</code>.</p>
<p>Line breaks:</p>
<pre><code>int p(long n){
    int i=0;
    for(;!(n+i+&quot;&quot;).equals(new StringBuilder(n+i+&quot;&quot;).reverse()+&quot;&quot;);i=i&lt;1?-i+1:-i);
    return i;
}   
</code></pre>
</div>
<div id="pu31" class="pu"><h2>Groovy - <strike>131</strike> <strike>111</strike> 107 chars</h2>

<p>Golfed:</p>

<pre><code>n=args[0] as long;a=n;b=n;f={if("$it"=="$it".reverse()){println it-n;System.exit 0}};while(1){f a++;f b--}
</code></pre>

<p>sample runs:</p>

<pre><code>bash-2.02$ groovy P.groovy  0
0
bash-2.02$ groovy P.groovy  234
-2
bash-2.02$ groovy P.groovy  1299931
-10
bash-2.02$ groovy P.groovy  123456789012345
-1358024
</code></pre>

<p>Ungolfed:</p>

<pre><code>n=args[0] as long
a=n
b=n
f={ if("$it"=="$it".reverse()) {
       println it-n
       System.exit 0
    }
}

while(1) {
    f a++
    f b--
}
</code></pre>
</div>
<div id="pu32" class="pu"><h1>Python 2.7, <s>98</s>, 81</h1>

<p>Creates a palindrome from the input number, then subtracts that from the input to find the delta.</p>

<pre><code>def f(n):
    m=map(int,str(n));l=len(m)/2;m[-l:]=m[l-1::-1];return int(`m`[1::3])-n
</code></pre>

<p>usage:</p>

<pre><code>print f(3)          # 0
print f(234)        # -2
print f(2342)       # -10
print f(129931)     # -10
print f(100000)     # 1
</code></pre>

<p>ungolfed and annotated:</p>

<pre><code>def f(n):                      # take a integer n
    m=map(int,str(n));         # convert n into array of ints
    l=len(m)/2;                # get half the length of the array of ints
    m[-l:]=m[l-1::-1];         # replace the last elements with the first elements reversed
    return int(`m`[1::3])-n    # convert array of ints backinto single int and subtract the original number to find the delta
</code></pre>
</div>
<div id="pu33" class="pu"><h1>Ruby, <s>111</s> 84 bytes</h1>

<pre><code>i=$*[j=-1].to_i
r=-&gt;j{s=(i+j).to_s
abort(j.to_s)if s==s.reverse}
loop{r[j+=1]
r[-j]}
</code></pre>

<p>Takes the number as its only command-line argument.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/36909/">36909</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




