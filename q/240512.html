<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::240512</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>045</td><td>Ruby</td><td>220103T093043Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240529#240529">G B</a></td></tr>
<tr d-ix="1"><td>051</td><td>jq</td><td>240603T122500Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/273423#273423">GammaFun</a></td></tr>
<tr d-ix="2"><td>009</td><td>Jelly</td><td>240602T233902Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/273408#273408">DLosc</a></td></tr>
<tr d-ix="3"><td>037</td><td>Arturo</td><td>230212T133531Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/257727#257727">chunes</a></td></tr>
<tr d-ix="4"><td>011</td><td>Burlesque</td><td>220106T145122Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240672#240672">DeathInc</a></td></tr>
<tr d-ix="5"><td>012</td><td>Vyxal</td><td>220811T041122Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/250964#250964">naffetS</a></td></tr>
<tr d-ix="6"><td>081</td><td>Julia 1.0</td><td>220310T132447Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/243942#243942">MarcMush</a></td></tr>
<tr d-ix="7"><td>071</td><td>R</td><td>220103T074447Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240526#240526">pajonk</a></td></tr>
<tr d-ix="8"><td>006</td><td>05AB1E</td><td>220105T184728Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240630#240630">Kevin Cr</a></td></tr>
<tr d-ix="9"><td>005</td><td>Japt</td><td>220103T224835Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240551#240551">Shaggy</a></td></tr>
<tr d-ix="10"><td>011</td><td>Jelly</td><td>220103T143108Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240540#240540">lynn</a></td></tr>
<tr d-ix="11"><td>021</td><td>Haskell + hgl</td><td>220103T152821Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240541#240541">Wheat Wi</a></td></tr>
<tr d-ix="12"><td>068</td><td>Python 2</td><td>220103T061015Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240524#240524">loopy wa</a></td></tr>
<tr d-ix="13"><td>079</td><td>Python 2</td><td>220103T010254Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240515#240515">pxeger</a></td></tr>
<tr d-ix="14"><td>057</td><td>JavaScript Node.js</td><td>220104T015334Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240559#240559">tsh</a></td></tr>
<tr d-ix="15"><td>053</td><td>Perl 5 & probable regex polyglot</td><td>220103T140219Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240537#240537">Dominic </a></td></tr>
<tr d-ix="16"><td>087</td><td>Python 3</td><td>220103T133153Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240535#240535">Surculos</a></td></tr>
<tr d-ix="17"><td>046</td><td>Juby</td><td>220103T020819Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240521#240521">Razetime</a></td></tr>
<tr d-ix="18"><td>029</td><td>Retina</td><td>220103T095615Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240531#240531">Neil</a></td></tr>
<tr d-ix="19"><td>029</td><td>Charcoal</td><td>220103T094955Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240530#240530">Neil</a></td></tr>
<tr d-ix="20"><td>034</td><td>Retina 0.8.2</td><td>220103T060833Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240523#240523">Neil</a></td></tr>
<tr d-ix="21"><td>042</td><td>Factor + splitting.extras</td><td>220103T020912Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240522#240522">chunes</a></td></tr>
<tr d-ix="22"><td>2219</td><td>J</td><td>220103T005646Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240514#240514">Jonah</a></td></tr>
<tr d-ix="23"><td>011</td><td>Jelly</td><td>220103T011925Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240517#240517">Jonathan</a></td></tr>
<tr d-ix="24"><td>027</td><td>Wolfram Language Mathematica</td><td>220103T014758Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240519#240519">att</a></td></tr>
<tr d-ix="25"><td>006</td><td>Add++</td><td>220103T004331Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240513#240513">lyxal</a></td></tr>
<tr d-ix="26"><td>006</td><td>Vyxal 2.7.1</td><td>220103T010531Z</td><td><a href="https://codegolf.stackexchange.com/questions/240512/collect-the-elements-of-an-array/240516#240516">lyxal</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>46</s> 45 bytes</h1>

<pre class="lang-none prettyprint-override"><code>-&gt;l{l.chunk{|x|x*0}.sum([]){|a,b|a==0?[b]:b}}
</code></pre>
<p><a href="https://tio.run/##BcHdCkAwGAbgW3GIXvI/1LiQr@/AlJSfRCvadu3zPLdWn1@kT4bd7Om86nMz9rVvnLn00UdIHBk7QdlJymwkxb1yzl/BQpSjQAmqGDUaCFCLjkFCIK@Y2f8" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://stedolan.github.io/jq/" rel="nofollow noreferrer">jq</a>, 51 bytes</h1>
<pre><code>reduce.[]as$i([[]];.[-1]+=[0+$i]?//.+=[$i,[]])-[[]]
</code></pre>
<p><a href="https://tio.run/##XU9BDoIwELz3FT1w0FDAFigQY3zIZA8GPeBBVPT71m5bTfTUzs7Mzuz55tz9dHyOpxJ0WLJpBRBtSxSa8h02eTbRvqpK/88m5al1wQLngEHJRklDJGCVhFaSJww7D1sla2JaMGM8CvI2YhimwhANuyIDTR9tH9bB@kH3yyCo08v7h6D2oTbmNilaSc3OPkYNwcTZNgYi1PmrGw8xEX0XpzJ1MnIX8OFCvObrY5oviyvGNw" rel="nofollow noreferrer" title="jq – Try It Online">Try it online!</a></p>
<pre><code>reduce .[] as $i (     # iterate over all elements of the input array
    [[]];              # start with an array containing an empty array
    .[-1] += [0 + $i]? # if $i is not a number, 0 + $i will throw an error, suppressed by `?`
                       #   otherwise, append this element to the last subarray
    // . += [$i, []]   # if the previous statement was null or empty,
                       #   add two new elements to the array: This one, and an empty array
) - [[]]               # remove all empty arrays
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 9 bytes</h1>
<pre><code>ŒḊ€»ƝÄŻFƙ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///opIc7uh41rTm0@9jcwy1Hd7sdm/n/cDtQdOeM//@jzXUUok11FIxjdRSMgExDMAXiWYIRUNoCzIg21lEwiQWpABFGEFYsAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>Something of a Frankenstein's monster combination of the Jelly answers by <a href="https://codegolf.stackexchange.com/a/240540/16766">lynn</a> and <a href="https://codegolf.stackexchange.com/a/240517/16766">Jonathan Allan</a>, but with the magic of <code>ƙ</code>:</p>
<pre><code>ŒḊ€»ƝÄŻFƙ
ŒḊ€        Depth of each (0 for integers, 1 for lists)
   »Ɲ      Max of each adjacent pair of depths
     Ä     Cumulative sum
      Ż    Prepend a 0
       Fƙ  Group the original list by unique values in that list, then flatten each group
</code></pre>
<p>For example:</p>
<pre><code>           [[1, 1], 2, 3, [4], 5, [4], 2]
ŒḊ€        [1, 0, 0, 1, 0, 1, 0]
   »Ɲ      [1, 0, 1, 1, 1, 1]
     Ä     [1, 1, 2, 3, 4, 5]
      Ż    [0, 1, 1, 2, 3, 4, 5]
       Fƙ  [[1, 1], [2, 3], [4], [5], [4], [2]]
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://arturo-lang.io" rel="nofollow noreferrer">Arturo</a>, 37 bytes</h1>
<pre class="lang-arturo prettyprint-override"><code>$=&gt;[chunk&amp;=&gt;[integer?&amp;]|map=&gt;flatten]
</code></pre>
<p><a href="http://arturo-lang.io/playground?ZYuhbd" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/FMNSSun/Burlesque" rel="nofollow noreferrer">Burlesque</a>, <s>13</s> 11 bytes</h1>
<pre><code>{n!z?}gB)FL
</code></pre>
<p><a href="https://tio.run/##SyotykktLixN/V9dlPi/Ok@xyr423UnTzed/bXjO/2hDHQUjHQVjHQUTHQXTWK5ocx2FaFOgQCxQHMgFSkcbgZhgNdFARSaxEIXRhrEwrdFgMSgN0hVtCTbPKBZVnQlElRlQwBwoYwZkA80HqY2NBQA" rel="nofollow noreferrer" title="Burlesque – Try It Online">Try it online!</a></p>
<pre><code>{
 n!   # Not for ints (if 0 then 1 else 0); most common element for lists
 z?   # Is zero
}gB   # Group by is list
)FL   # Flatten each resulting list (double groups those already as lists)
</code></pre>
<p>Since the lists are always non-zero we can get away with this hack.</p>
<p>An alternative is doing a list/int only op and then seeing if there's an error (e.g <code>tpis</code> transpose-iserr) unfortunately no single op I know can test for <code>is list</code></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 12 bytes</h1>
<pre><code>⁽-ḊƛÞj∷ßw;Þf
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLigb0t4biKxpvDnmriiLfDn3c7w55mIiwiIiwiW1s4LCAyXSwgOSwgNSwgMSwgWzYsIDRdLCBbNCwgNV1dIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 1.0</a>, 81 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>+(x,y=[])=x&gt;[] ? x[1] isa Int ? x[2:end]+[[y...;x[1]]] : [y;[x[1]];+x[2:end]] : y
</code></pre>
<p><a href="https://tio.run/##bVHLboNADLzzFVZOILZIkIS8RHruoV9g@bBRqLQVohHQCr6e7nqdJpsmF@KZ8Xjs/fxujM7HeU7jUU0VUlKNRyR4hRFzAtNreGsHLot93Z4pRZyyLDs4mgj2gNMBuTikV42Dpzn6@OrAgGmhq/W5MW3dx0kE9qfVCSqof3STxe/1oLOL7vo6i/tLY4bYKFjAyxEWSeLll860Q9PGGqojpDoEU4tWcEoiO5iJGXGnYKWgsDmszV0ZYakAcwUOubIl3WMRbmy5VrAk1@IlG7phyD5WX9iajdeiCjEvwsK5MIorN@BOTjca2VkEyM3Me78th@Ogm4dmYUlomzRsRZ4o3@KxmYSwE6//eLsdu9pDlH7vlZxDQX47qSgokCBrXIat32zH490lStnOX8fbiAhFRf9k4XP4h5LkfxHkPEtpzGWNp08XOGBgQU88fgE" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
<p>a recursive approach</p>
<h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 1.0</a>, 82 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>f(;y=[])=y
f(x::Int,X...;y=[])=f(X...;y=[[y...;x]])
f(x,X...;y=[])=[y;[x];f(X...)]
</code></pre>
<p><a href="https://tio.run/##bVHLasMwELzrK5acZFANdhLnhXPvoffCsgeF2KBi3OC4xf56V491EqXRRdqZ2dmHvn4ao7Nhmmp5GEukpBxFLYf9/r3t1WeapozWcg5wdI@BKHHCRw2OBxzoEKQJTaL@7sCAaaGr9LkxbXWViQB7tDpBCdWvblL5UfU6vejuWqXyemlML42CBbwdYZEkQX7pTNs3rdRQHqGW2tnHDINQlnBKRNWePTthRs4I7U0CcadgpSAnBm@hwEIBZgocMrMFPWICNzZcK1iSSwmSDd0x9D5Wn9vYG6/n2hEWRJg7F4/iyhV4kNOdRu/MAvTJng9@W9@cb3TzlMwsMW07jVPRV@Q7f04mJmzF@eWn23lXu4gizL3idSjI7itlBUUS9BrXwzZMtvPl3SYKni5sJ9iwCFlF/2Txd4SP4s5vLfB6lpyY8Rgvvy5ywMiCXnj8AQ" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
<p>the same idea, but with multiple dispatch</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>76</s> <s>75</s> 71 bytes</h1>
<p>Or <strong><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>&gt;=4.1, 64 bytes</strong> by replacing the word <code>function</code> with a <code>\</code>.</p>
<p><em>Edit: -1 byte thanks to <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">@Dominic van Essen</a>.</em></p>

<pre class="lang-r prettyprint-override"><code>function(x){y[]=cumsum(c(T,y&lt;-sapply(x,is.list))|y);tapply(x,y,unlist)}
</code></pre>
<p><a href="https://tio.run/##hVJNa8MwDL3vV/hWG7xB3HzS9l/sluZQAoFAm5YlgZpuvz2zZHm13cAukSzpSS9P@lq6w9LNQzv114HfxUPXzaGdL@N84S3/lHr/Pp5ut7Pmd9mPH@d@nIT41mI3uaiW84Dhn6Xj4NhPJVkqmRKCiR1rTxPf1DXFmuY4HIeNeKP6XDK0iWRQEUDyRrKaEjGuIFwm2VbALA9XAA4SYF8mmobK5JBO5sOCxAoKrYJZWIXPFDjHfXAs/KuxyAGqkFPc1bYWbnCJ/2p1McFirSuVwQv1Kf7paWkCR89Xq52RquXpvBf1Khxv1M@fC0hpB5Il0caplPaRupWYwlXWpRW3QrJO8dxK7OTOghMpSWaCoCok9toW46t5Hp@ykT/O3iq2HoHEOeFxRxdnz9ZJGvTEmyCGSaDw8gs" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<pre class="lang-r prettyprint-override"><code>function(x)            # take x as input
{
y[]=                   # assign to elements of y (to preserve length of y)
cumsum(                # cumulative sum of
 c(T,                  # TRUE followed by
 y&lt;-sapply(x,is.list)) # which elements of x are lists themselves
                       # (assign this to y)
|y                     # or y
);                     # this creates a mask on the positions of lists or first non-list elements 
tapply(x,y,unlist)     # apply unlist to x splitted by y
}
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 6 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>.γd}€˜
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9f79zmlNpHTWtOz/n/PzraMFbHSMdYx0THVCfaLFYn2jxWx0LHMhYA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/vXObU2ofNa05Pee/zv/oaEMdIx1jHRMd01gdhWhznWhTHeNYHSMQx1An2gjEMtaJNtExiYWoiDaMBWuIBgmASbDaaEugEUaxyCpMQPJmsTrmIEEzHaBxQDVYVUQDlVjoWMbGAgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>.γ     # Adjacent group-by:
  d    #  Transform every integer into a 1 (with a &gt;=0 check)
   }€  # After the group-by: map over each group:
     ˜ #  Flatten it
       # (after which the list of lists is output implicitly as result)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>6</s> 5 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>If the sub-arrays in the input could be nested another level deep in the output then the last 3 bytes could be removed.</p>
<pre><code>ó* mc
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=8yogbWM&amp;input=WzEsMixbOSwyXSwzLDQsNSxbNiw3LDgsOV0sNSw0LDMsMiwxLDgsOF0KLVE" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>12</s> 11 bytes</h1>
<pre><code>ŒḊ€aJŒg⁸ṁF€
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///opIc7uh41rUn0Ojop/eHORodDW92A3P@H24EyO2f8/x9trqMQbaqjYByro2AEZBqCKRDPUkfBQkfBHEwC2dHGOgomsSAVIMIoNhYA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<pre><code>ŒḊ€   Depth of each (1 for lists, 0 for numbers)
aJ    Replace each 1 with its index  [0 0 1 0 1 1] -&gt; [0 0 3 0 5 6]
Œg    Group runs of equal elements [[0 0] [3] [0] [5] [6]]
⁸ṁ    Reshape the original input to this list
F€    Flatten each element (turns entries like [[1 2]] back into [1 2])
</code></pre>
<p>This approach feels elegant in theory, but a lot of bytes are wasted on <code>€@µ€</code>, so there might be saves.</p>
<p>Jonathan Allan saved a byte! Thanks.</p>
</div>
<div id="pu11" class="pu"><h1>Haskell + <a href="https://gitlab.com/WheatWizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 21 bytes</h1>
<p>In order to do this I needed to add support for <code>Either</code> types to hgl.
I was planning on doing this eventually and I don't think knowledge of this challenge influenced the way things were implemented.
So this is <em>non-competing</em> for whatever that means to you.</p>
<pre><code>fR p&lt;tv(mst p)&lt;+gB ø
</code></pre>
<p>This takes a <code>List (Either Int (List Int))</code> to represent a ragged array.
Surprisingly we can do flip the order of the <code>Either</code> at no cost to bytes.</p>
<pre><code>fL p&lt;tv(mst p)&lt;+gB ø
</code></pre>
<h2>Relfections</h2>
<p>There are some things here that could be improved.</p>
<ul>
<li><code>m&lt;mst</code> should get it's own command.  It's not used here but if I had had it this could have been 1 byte shorter:
<pre class="lang-haskell prettyprint-override"><code>fR p&lt;sQ&lt;m2t p&lt;+gB ø
</code></pre>
where <code>m2t = m&lt;mst</code>. (Implemented in <a href="https://gitlab.com/WheatWizard/haskell-golfing-library/-/commit/871c240698fa7d0420ccb4115b4e51619607587d" rel="nofollow noreferrer">871c2406</a>)</li>
<li>There needs to be a <code>Bitraversable</code> class. The whole reason we have <code>mst p</code> a very costly construct is that we need to massage the correct monoid instance onto the left hand side of the <code>Either</code>.  If we had <code>Bitraversable</code>, the entire <code>tv(mst p)</code> could just be a <code>bisequence</code>.</li>
<li>Other <code>Bifunctor</code> classes might have also helped here and are probably needed in the long run.  <code>Either</code> isn't the only type that would benefit from this.  We have other bifunctors like <code>(,)</code> and <code>These</code> which would benefit as well.</li>
<li>Here I expressed ragged lists as lists of either the element or more lists. This works for ragged lists of max depth 2 fine, but it would also be possible to represent ragged lists more generally using the free monad combinator.  If I had that I could have tried an approach with that, and even so I should probably have that for future challenges where the depth restriction might not exist.</li>
</ul>
<p>Most of these basically boil down to &quot;better bifunctor&quot; support, so I think some of that is warranted.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 68 bytes</h1>
<pre>lambda L:eval(re.sub(&quot;[^\d]{3,}&quot;,&quot;],[&quot;,`[[0,L,0]]`))[1:-1]
import re</pre>
<p>Textually replaces every stretch of more than 2 non digit characters (i.e. everything that is not &quot;, &quot;) with &quot;],[&quot;. A little trickery at the ends is required to guarantee balanced brackets.</p>
<p><a href="https://ato.pxeger.com/run?1=bZLNTsJAEMcTj_sUk562yUJogfKR1Ise8QmGUUooYZNCm1IkxvgkXkiM8Zn0aezuDkKRU3dm_vObr75_FS_VKt-Eh49lPP3cVcvW8Ps-S9bzRQKTcfqcZLJM29vdXHr4OF3Qa1e9ecojhZ6aIXbURHWIZr6PwbgVkNDrIi8rKFNm3e1XOkshGAvQKocY1kkhDVaVyf5Jb4pdJf32tsh0JT1o3YLn-wKKUm8quZTaj-Pcd6jDz80D4khBT0FIZLRnpsBIAQYKjOcYjejcJ3BQm30FXTIpTjKgkw8tp9aHtW3BfVY1fU6EoaFYL_ZMgTM5ncJoySxAm2zjjje0zdlGBxfJHCUO1502U9FW5G94mUwcqCseX3a6kaXWi4jc3D1eh4LgtFJWUEOCVmN6GLrJRra82UTE07ntOAyLkFX0T9Y8hzsUd_7XAq-ny4kBj3H1dA0CNhB0hSGE-61-AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h4>Old <a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 73 bytes</h4>
<pre>lambda L:[map(int,x[1::3])for x in re.findall(&quot;(?:.\d.)+&quot;,`L`)]
import re</pre>
<p><a href="https://ato.pxeger.com/run?1=bZLNasJAEMehxzzFkNMuXQOJGjWQ9tBTwT7BuNQUDS7EJKSx2mfpRSilz9Q-Tfdj_Ij1lJ2Z3_znKx_f9Xu7qspo_5mns69Nm_fGP49Ftn5ZZDBNcJ3VTJWt2GGYJH3J86qBHagSmmWQq3KRFQXz2X0SzBYBv_XFfDrn0lPrumpazZDgw3aliiWEiQdKVJCCkV2-ZYVosu2zKutNy3jwWheqZT707sDn3IO60ZVZzhRP04o7qf3vzRPiRMBAQCSlYc9MD2MBGAownkM0luc-D0faHAroS5PikJE8-dDqaD7SthUeEtX1OQgjo2K9ODAFznB5CqNVJgBtso07vbFtzjY6ukimqKSw7rSbirYifaPLZEkBXfHwstNNrKpeROzmHtA6BISnlRIhOwhaxvQwdpNNbHmziZimc9txMgQhUfIf1j2HOxR1fmyB1tOnxJDGuHq6jgJ2JOQVDc9zv9Uf" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Just a stoopid regex that finds stretches of digits alternating with two arbitrary other characters (in the repr of the input).</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <sup><s>84</s></sup> 79 bytes</h1>
<pre>s=[]
for x in input()+[{}]:
 if x&gt;9:
    if s:print s
    s=x[:0];print x
 else:s+=x,</pre>
<p><a href="https://ato.pxeger.com/run?1=m728oLIkIz_PaMGCpaUlaboWN_2LbaNjudLyixQqFDLzgKigtERDUzu6ujbWikshM02hws7SiosTyCi2KijKzCtRKObiLLatiLYyiLWGCFRwKaTmFKdaFWvbVuhAjIWavmBfdLRhrI6CkY6CsY5CtAmQaaqjYAllGsVCVAEA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>-5 bytes thanks to @ovs</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 57 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.flatMap(c=n=&gt;n[0]?c=[,n]:c[0]?c.push(n)&amp;&amp;[]:[c=[n]])
</code></pre>
<p><a href="https://tio.run/##fZLBboMwDIbve4qcKpAyOiiF0onuCfYElg8RK90mFNDo9vosMR6QkvVEZH/@bf/4U/2ovvr66K6Pun07D3U5qPKkorpR11fVBVWpy5OGJ3ypSpAajxW9o@67fw90uNkAHsGkNGI4VK3u2@YcNe0lqAOAQopUisSkwmex3YpF5OGGzaSAWAqbX@AZLsO3NblJ7qXYoVWcanKcw@DpZOQSk6VB9nOZG/ZVQWL7EAOpHcitx5kA6s0MeNSIHtsdaDvaNF@rMYBMmOXuaQHNxN/Eo4acMzP9vTwOFdTUuJuNTqbssRSx8ycZQocCwtZTHkZrChrQupmxPaPfky5zwCCuyHtXMF4LbzpNyBbvWCbmtf@7GEcEHBX0yAy/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> &amp; probable regex polyglot, 53 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/(?&lt;!\]),\[|],(?!\[)/],[/g;s/^\[+(.*[^]])]+$/[[\1]]/
</code></pre>
<p><a href="https://tio.run/##DctBCsJAEATAtwQ87JrWIZKViEIe0tO5iQhiFtejb3e07lWvr0eJaJbmS@fKcH6ENHfObALtdm62OPu033KRsvqNkT5IFkFOOAgnFAzgEeN/jCjSd63v@/pssas/" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>First change all &quot;<code>],</code>&quot; or &quot;<code>,[</code>&quot; to &quot;<code>],[</code>&quot;; then make sure it's all enclosed in &quot;<code>[[</code>...<code>]]</code>&quot;.<br />
I forgot the second bit on my first attempt, so it seemed a bit golfier than it turned out...</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 87 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda L:[[*x]for t,g in groupby(L,type)for x in[g,[g]][t==int]]
from itertools import*
</code></pre>
<p><a href="https://tio.run/##bZHJjoJAEIbvPEVlTmBaE1FxSfAJfIOaOmAE7IQtTTuRp2d6KUdxPEHV/9VfS3eDvrbNaizS77HK6vMlg9MBcXanolWgRQmygVK1t@48hCehhy6PrHI3eSwFlkSo01Q2migoVFuD1LnSbVv1IOuuVXo2@i/0Qx/Y0ko2uXU18aLXF9kcAoAqL7QAJcurhhTqrAvzn6wSDl70XSV1@DU/fkWRYVXe3yqLFaEts6lOmQnCh5B6I8FkNCLuBawFxEQwP8JLGGAiAJcCbOahJvSaC3Brwo2AFdkSj2zpmUPnY/jYxM54w9Q05yGMrYvL4to2eMHpKaNzZgBdsdO9384N5wbdvhWzSiybSael6DryN34vJhZMx8ef227vXM0hEr/3ms8hYPk8KRM0QdAxdoad32zv2ttLJLydv463YQiZon/Y9Dn8Q/HkfyPweVZcuOQ1Pj7dxAEnFvTB4xc" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Group the list by type (int or list), then wrap the int groups in list.</p>
<p>I thought <code>groupby</code> would be great for this job, however the <code>itertools</code> import ended up costing too many characters.</p>
<h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 84 bytes</h1>

<pre class="lang-python prettyprint-override"><code>def f(L,s=[]):t=s and[s];return L and[f(L[1:],s+L[:1]),t+L[:1]+f(L[1:])][L&gt;[[]]]or t
</code></pre>
<p><a href="https://tio.run/##bZHbjoJADIbveYrGK4ijCaiobPAJeIOmFybCOgkiYcZNfHp2plMP7HoF/fv172H6uz1fu2wcT3UDTVwpUyIlhS0NHLsTGvoaansbOqg4dgSmBSkzr7BIKVE2/MwlkRBWB0Qiug5gR33pr4MFczdR44RWdzXozsdLY0@6KyKAtm6sgkF/ny2UcDn2cf1zbBXDS9O32sazxWGWJI4danNrPdbEvsxL/aA7@0yUwUiJMCLuFawVZESwOMBbGGGuAFMFXnlkc3rXIty6cKNgRb4kIFt6acg@js9czMYboaZagDDzLqzi2jd4w@mVRnYWALmY88Fvx8PxoNs/xZIlSbtJp6XIHeWb/S0mSbiOjz/ebs@u7hB52Hst51CQvk4qBE0QZMbPsAub7bm9v0Qu24XrBBuBUCj6h02fIzyUTP4cQc6zksJU1vj4dBMHnFjQB49f" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<pre class="lang-python prettyprint-override"><code>f=lambda L,s=[]:L and[f(L[1:],s+L[:1]),(s and[s])+L[:1]+f(L[1:])][L[0]&gt;9]or s and[s]
</code></pre>
<p><a href="https://tio.run/##bZHbjoJADIbveYrGK4ijWdBFIcEn4A2aXrAR1kkQCcNu4tOzM516wPUK@vfr38P01/F06ZJpaoq2On8dKyiVKZDyEqruiE1YYpyTMssS85giFRrWDUVeWQoREZb4QYeMLgPcmEmf@8swgrmaoLF6q7sadOfitRmPussDgLZuRgWD/j6NUMC56sP6t2oVw2vTt3oMF6vDIoosO9Tmp3VYE7oyJ/WD7sZ7ovBGSoQJMVOwVZAQweoAT2GAqQKMFTjllk3pWQtwZ8NPBRtyJR7Z0UND9rF8YmM2/hRqrnkIE@fCKm5dgyecHmlkZwGQiznv/fY8HA@6eymWLEnaTjovRe4o3@S1mCRhO97@eLuMXe0hUr/3Vs6hIH6cVAiaIciMm2HvN8u4vbtEKtv563gbgVAo@ofNn8M/lEx@H0HOs5HCWNZ4@3QzB5xZ0BuPPw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>I tried to golf <a href="https://codegolf.stackexchange.com/a/240515/92237">@pxeger's answer</a> by using recursive function, but wasn't able to save any bytes.</p>
<p>These 2 functions simply loop through each element. If the current element is a digit, accumulate it in the list <code>s</code>. If the current element is a list, add the accumulated elements (<code>s</code>) if not empty to the result, followed by the current element.</p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/cyoce/J-uby" rel="nofollow noreferrer">J-uby</a>, 46 bytes</h1>
<pre><code>:slice_when+:|%([~:*&amp;0|:!=&amp;0]*2)|:map+:flatten
</code></pre>
<p><a href="https://tio.run/##bZDRCoIwFIbve4p1kZQu0KlTBz7JYYSFUmEiZEQgvfrazmZ64dXYd85/zrfdj6/zRzWlEs/2dqlP72vdBWLc7eErfC8cxbb0QumzwygeVR@Ipq2Goe5UTxoAKChJKGFSErlBwimBiBLDZ5hpmFISS9M6Qd3FNMMB6ZICM21YgsTMWdYhklMuxzXANcjW6oBJd857C0xqJW6tEidGSTRPya1CgQOME7cigLKrD7MPZ/b2X@IkYxc3doDfpX4" rel="nofollow noreferrer" title="J-uby – Try It Online">Try it online!</a></p>
<p>Today I learned about <code>slice_when</code>, and J-uby's <code>+</code>.</p>
<p>-4 from translating GB's idea.</p>
<h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 49 bytes</h1>
<pre>-&gt;a{a.slice_when{_1*0!=0||_2*0!=0}.map &amp;:flatten}</pre>
<p><a href="https://ato.pxeger.com/run?1=bZBNCsJADIVx6ynixoVMpTP9sRUq3iMMpUqLghbRFpHqSdwU0UPpaZzJtNZFV5l5yUu-5P48lqtL_ciiV1lkVvDm1iKpkulpt12n8XmT5lXMJ_Yosq_XWNDjNt0nBxjPs11SFGl-M8bPYHmADBFDBi4DISXIISk-A-QMtN6JMyV6DBypS1tRVQmlUQPvX0WhyyiFru7zn0cuW19AY9BXwqwvj-RsYjc3JKdC8g2V24Ax4F2XwCCE1EAz-QYECbZ3MbO4ML_fkAbSaeyaDulc5pB1beIX" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>-6 bytes from GB.</p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 29 bytes</h1>
<pre><code>[&quot;[[&quot;|&quot;], [&quot;]&quot;]]&quot;L`\b[^][]+\b
</code></pre>
<p><a href="https://tio.run/##XU8xDsIwDNz7CisSEhJZkrZp8wIWfnA1KpUYWBgQI38PsR2QYLLOd@c7P67P2/0Sym5/XAsc4F6OPcGxY3anddlwZvBh2UoBsqfBU2TukKooeJKNwKnC0VPPQnfCxIpUPhpGFEqXGMRlDAJ/tLOeQ6qL6ZeBqtuU@1nVNTRZ7tCiPQVxzhaV1STZyQKhdf7q2iPR0PdwK9M3o3RBffwN" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Explanation: Based on @loopywalt's idea. Would be 28 bytes if I could be bothered to remove all the spaces from the lists.</p>
<pre><code>L`\b[^][]+\b
</code></pre>
<p>List all runs of digits and separators (but excluding <code>[]</code>s).</p>
<pre><code>[&quot;[[&quot;
</code></pre>
<p>Precede the entire result with <code>[[</code>.</p>
<pre><code>|&quot;], [&quot;
</code></pre>
<p>Separate each run with <code>], [</code>.</p>
<pre><code>]&quot;]]&quot;
</code></pre>
<p>Suffix <code>]]</code> to the result.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 29 bytes</h1>
<pre><code>⊞υ⟦⟧ＦＡ¿⁺ι⟦⟧⊞⊞Ｏυι⟦⟧⊞§υ±¹ι⭆¹Φυλ
</code></pre>
<p><a href="https://tio.run/##JYwxD4IwEIV3fsWNd0kdAA0aJhcTBpXEsenQYJEmDZDSGv99bcvy3ru8790wSTss0oTQ@21Cz4ALaotxsYDdvHqHRKBHwN74DXWuCTKb5LkqK91i01DTPgZlNrUjV9fNb/VL7UN9pFNYEiWyLXqrZ4cvF@1zlyuWDG7aOJVfGSJqQ@AFb@LPE4NaMKhiLLOl68LgzKDJGjOvGRxFIpJUQhQiHL7mDw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>⊞υ⟦⟧
</code></pre>
<p>Push an empty list to the result in case the first element of the input is not a list.</p>
<pre><code>ＦＡ
</code></pre>
<p>Loop through all of the elements of the input list.</p>
<pre><code>¿⁼ι⟦⟧«
</code></pre>
<p>If adding the empty list to the element doesn't produce an empty list, then...</p>
<pre><code>⊞⊞Ｏυι⟦⟧
</code></pre>
<p>... the element was a list, so push it to the result, plus another empty list in case the next element of the input is not a list, otherwise...</p>
<pre><code>⊞§υ±¹ι
</code></pre>
<p>... append the element to the last list of the result.</p>
<pre><code>⭆¹Φυλ
</code></pre>
<p>Filter out any empty lists (e.g. from consecutive lists in the input) and pretty-print the result.</p>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 34 bytes</h1>
<pre><code>(?&lt;=^\[|], )[^][]+(?=, \[|]$)
[$&amp;]
</code></pre>
<p><a href="https://tio.run/##XU@7DoJAEOz5ii3QQNyGAw5IJJR@xLhECwsbC2Lpv5@3e6eJVpd57cxtt@f9cQ276nQJ1XKc1zNewlRjFcihWmYmZcq6QLmXEICJqWNyIgU8ExomZRQOEfZMrahcqOIiMnufMJxKRqLTVFLQyMc72jn4SAy/CsydX70/mTuW@tTb5WqmRpNjqpospN0@FcLm/M1NH3EJfQ/nMW0O6hbEj78B" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Would be 32 bytes if I could be bothered to remove all of the spaces from the lists. Explanation: Simply matches sublists composed of non-lists that are between two lists or positioned at the start and/or end of the main list and wraps them in a list. Using lookarounds to anchor the match avoids having to explicitly capture the sublist thus saving a byte.</p>
<pre><code>(?&lt;=^\[|], )
</code></pre>
<p>Match at the beginning of the main list or after a list.</p>
<pre><code>[^][]+
</code></pre>
<p>Match anything that isn't a list.</p>
<pre><code>(?=, \[|]$)
</code></pre>
<p>Match at the end of the main list or before a list.</p>
<pre><code>[$&amp;]
</code></pre>
<p>Wrap the sublist in a list.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a> + <code>splitting.extras</code>, <s>43</s> 42 bytes</h1>
<pre><code>[ [ array? ] split*-when [ flatten ] map ]
</code></pre>
<p><a href="https://tio.run/##bVDBTsMwDL33K3xGWkTWla1w2HHiwmXiVPUQFY9VlCwkRmOK8u3FSQqdBIniWO/lPTs@qI5OdnzePz7t7kFZqy4OnBl6ol6/Cvwiqxy8odU4gMOPT9QdujkTL4gGjEWii7G9JngoCl8AL8@7hhUsIUCYkDs@MqEztuZTQcnI8heTnJf8qrpCPGPRq@RslRxmNvIhaTbsHusE9v3L@kmX77lezbp16q5iJvcir/SbVLlmVib3qPa5v3//8fODMDnnruQtSJmUOebJhLGBJo9@C20e/s3ifETN8GFQRJy18K4MtGOMDQghGEHVHcdv" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<ul>
<li><code>[ array? ] split*-when</code> Split on arrays (sublists) and keep the delimiters.</li>
<li><code>[ flatten ] map</code> Flatten each element. <code>flatten</code> doesn't touch arrays of depth 1 but otherwise decreases depth to 1.</li>
</ul>

<pre><code>                        ! { 1 { 2 2 } 3 { 4 4 } 5 }
[ array? ] split*-when  ! { { 1 } { { 2 2 } } { 3 } { { 4 4 } } { 5 } }
[ flatten ] map         ! { { 1 } { 2 2 } { 3 } { 4 4 } { 5 } }
</code></pre>
</div>
<div id="pu22" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <sup>22</sup> 19 bytes</h1>
<pre><code>&lt;@;;.1~2+./\1,#@$&amp;&gt;
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/bRysrfUM64y09fRjDHWUHVTU7P5rcqUmZ@QrpCkYWhtZG1ubWJtamymYW1tYa@hYagIJQwNNa0NDiCJ1x7wUhdTE5AyF5NScHIXMYoW8/HKFRIWczOISPT09dYgqoKmEjPsPAA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p><sup>-3 thanks to Bubbler</sup></p>
<p>This is a little tricky in J, which requires boxes for heterogeneous arrays.  The task becomes to &quot;collect&quot; iff the box contents are atoms.  Contents which are already lists (either 1 items or more) should remain as single boxes.</p>
<p>Our strategy is then to &quot;cut&quot; (start a new group) unless adjacent elements are both atoms.</p>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 11 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>Really not sure if this is optimal, it's just the first way I though of...</p>
<pre><code>,⁻;ɗƝŻœṗ⁸F€
</code></pre>
<p><strong><a href="https://tio.run/##XVC7DcIwEO0zxQ1wjZ3EcUTPDujkkgZlAcrQ0EMRGjZgAKKUyEiMkSxizmcLoTS238/v7MO@644h4NJPm8/wvvvJX@dxWPrndjk9wuvMq7/M4433XQhUELUIFYJ2DgsyCKQQIiW4YVwjlC4aGLOmGUqizgRpESNLVQxmiZT7d7NqmGhWEok/79LB5ZZ9CCaVV7kfQUnWprpWYrHfpFKSmdZTpwfphH5XWzlTmZNxHJIfcF8" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>,⁻;ɗƝŻœṗ⁸F€ - Link: list, A
    Ɲ       - for each of the neighbours:
   ɗ        -   last three links as a dyad, f(left, right):
,           -     pair them        (e.g. [1,2] and 3 -&gt; [[1,2],3]])
  ;         -     concatenate them (e.g. [1,2] and 3 -&gt; [1,2,3])
 ⁻          -     are these not equal? (i.e. was either left or right a list?)
     Ż      - prefix a zero
        ⁸   - use A as the right argument of...
      œṗ    - partition right at truthy indices of left
         F€ - flatten each
</code></pre>
</div>
<div id="pu24" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>30</s> 27 bytes</h1>
<pre><code>##&amp;@@@#&amp;/@Split[#,#&gt;0&lt;#2&amp;]&amp;
</code></pre>
<p><a href="https://tio.run/##VY/NCoMwEITvvkYgpyk1/gut5BFaPBYPIkqFKqXY0xJf3e5GCu0lYWY/Znandrn3U7uMXbsN500pba1V@mjr52NcbgqqCk8q0o3eru@xX@zlNc7sH6rBqkavddfOKwVEJRJEziGgDGTA0osclCJ2PGJhECFmLt0FRWLHoITh3STjvgwoc8h/TRLKvz6tRIEcmRQkvgLG04WMSya5IZNkksa/ZbCvIphkFPyTCWE4QMqIDwnc9gE" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<pre><code>          Split[#        ]  group adjacent items which
                 ,#&gt;0&lt;#2&amp;     are both positive (non-lists)
##&amp;@@@#&amp;/@                  remove extraneous brackets
</code></pre>
<p>At times like this, it'd be nice if <code>@@</code>, <code>@@@</code> generalized to more <code>@</code>s...</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://github.com/cairdcoinheringaahing/AddPlusPlus" rel="nofollow noreferrer">Add++</a>, 6 bytes</h1>
<pre><code>L*~,BC
</code></pre>
<p><a href="https://tio.run/##S0xJKSj4/99Hq07Hyfn////R5grRpgrGsQpGsf/yC0oy8/OK/@tmAgA" rel="nofollow noreferrer" title="Add++ – Try It Online">Try it online!</a></p>
<p><s>Wow holy crap a challenge where Add++ will probably win.</s> Nevermind I tied myself with vyxal.</p>
<h2>Explained</h2>
<pre><code>L*~,BC
L*~,   ; a lambda that dumps its arguments onto the stack and returns the entire stack that:
    BC ; calls the built-in this challenge is all about. 
</code></pre>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal 2.7.1</a>, 6 bytes</h1>
<pre><code>ƛf⁼;Ġ•
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLGm2bigbw7xKDigKJ2ZiIsIiIsIls3LCBbNSwgM10sIDIsIDRdIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>The link uses the latest version of vyxal (2.7.3 at the time of writing) which has a bug fix where molding no longer wraps singletons in lists, hence the extra <code>vf</code>.</p>
<h2>Explained</h2>
<pre><code>ƛf⁼;Ġ•
ƛf⁼;     # For each item in the input, does the flattened version equal the item? For integers, this returns a list, which does not equal the item. For lists, this just returns the list - this wouldn't work if there wasn't any depth restriction. 
   Ġ    # Group on consecutive items
    •   # and mold the input to that shape
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/240512/">240512</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




