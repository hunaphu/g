<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::211763</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>021</td><td>APLNARS</td><td>240110T161411Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/269130#269130">Rosario</a></td></tr>
<tr d-ix="1"><td>051</td><td>Python/mpmath</td><td>230213T173741Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/257777#257777">Parcly T</a></td></tr>
<tr d-ix="2"><td>031</td><td>PARI/GP</td><td>221229T115249Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/256136#256136">alephalp</a></td></tr>
<tr d-ix="3"><td>026</td><td>APL Dyalog Extended</td><td>200930T043510Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211821#211821">Razetime</a></td></tr>
<tr d-ix="4"><td>022</td><td>Arn</td><td>201103T222301Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/214688#214688">ZippyMag</a></td></tr>
<tr d-ix="5"><td>029</td><td>CJam</td><td>201103T073524Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/214648#214648">JosiahRy</a></td></tr>
<tr d-ix="6"><td>nan</td><td>x87 machine code</td><td>201001T005649Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211884#211884">640KB</a></td></tr>
<tr d-ix="7"><td>052</td><td>Charcoal</td><td>201006T104845Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/212109#212109">Neil</a></td></tr>
<tr d-ix="8"><td>019</td><td>MATL</td><td>201003T230042Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/212003#212003">Luis Men</a></td></tr>
<tr d-ix="9"><td>070</td><td>Perl 5</td><td>201002T081956Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211931#211931">Kjetil S</a></td></tr>
<tr d-ix="10"><td>040</td><td>Pyth</td><td>201001T095855Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211902#211902">PkmnQ</a></td></tr>
<tr d-ix="11"><td>057</td><td>R</td><td>200929T075625Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211773#211773">Dominic </a></td></tr>
<tr d-ix="12"><td>073</td><td>Haskell</td><td>201001T003340Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211883#211883">Pseudony</a></td></tr>
<tr d-ix="13"><td>020</td><td>Wolfram Language Mathematica</td><td>200929T053957Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211764#211764">ZaMoC</a></td></tr>
<tr d-ix="14"><td>024</td><td>Wolfram Language Mathematica</td><td>200929T203605Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211806#211806">Roman</a></td></tr>
<tr d-ix="15"><td>067</td><td>Python 3</td><td>200929T090623Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211780#211780">Anders K</a></td></tr>
<tr d-ix="16"><td>063</td><td>Ruby</td><td>200929T160826Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211797#211797">Dingus</a></td></tr>
<tr d-ix="17"><td>020</td><td>Jelly</td><td>200929T194629Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211802#211802">Jonathan</a></td></tr>
<tr d-ix="18"><td>091</td><td>C gcc</td><td>200929T104334Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211786#211786">Noodle9</a></td></tr>
<tr d-ix="19"><td>035</td><td>Japt</td><td>200929T152617Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211795#211795">Mukundan</a></td></tr>
<tr d-ix="20"><td>030</td><td>J</td><td>200929T115527Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211787#211787">Galen Iv</a></td></tr>
<tr d-ix="21"><td>023</td><td>APL Dyalog Unicode</td><td>200929T080628Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211775#211775">ovs</a></td></tr>
<tr d-ix="22"><td>056</td><td>JavaScript ES7</td><td>200929T063134Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211770#211770">Arnauld</a></td></tr>
<tr d-ix="23"><td>020</td><td>MathGolf</td><td>200929T093200Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211781#211781">Kevin Cr</a></td></tr>
<tr d-ix="24"><td>020</td><td>05AB1E</td><td>200929T081704Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211776#211776">Kevin Cr</a></td></tr>
<tr d-ix="25"><td>035</td><td>Symja</td><td>200929T055731Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211767#211767">lyxal</a></td></tr>
<tr d-ix="26"><td>037</td><td>SageMath</td><td>200929T054714Z</td><td><a href="https://codegolf.stackexchange.com/questions/211763/circumference-of-an-ellipse/211765#211765">Sisyphus</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 21 chars</h1>
<pre><code>a←⎕⋄{√+/×⍨a×1 2○⍵}∫○2
</code></pre>
<p>test:</p>
<pre><code>      a←⎕⋄{a{√+/×⍨⍺×1 2○⍵}⍵}∫○2
⎕:
      1 1
6.283185307 
      a←⎕⋄{a{√+/×⍨⍺×1 2○⍵}⍵}∫○2
⎕:
      123 45
556.6359936
</code></pre>
<p>it is based on the parametric representation of elipse something as phi(t)=(a cos(t),b sin(t))
and the formula for find the lenght of the curve integral_0^2Pi)|phi'(t)|dt
It is possible calculate more digit in that integral but solution is more long, as in</p>
<pre><code>      ⎕FPC←3000⋄a←1 1⋄200⍕{a{√+/×⍨⍺×1v 2v○⍵}⍵}∫○2v
 6.28318530717958647692528676655900576839433879875021164194988918461563281257241799725606965068423413596429617302656461329418768921910116446345071881625696223490056820540387704221111928924589790986076393
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>/<a href="https://mpmath.org" rel="nofollow noreferrer">mpmath</a>, 51 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda a,b:8*elliprg(0,a*a,b*b)
from mpmath import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LYxNCsIwEEb3PcUsM2EsxqqUojdxk6CxgfwRxoVncRMQvZO3UVI378EH73u8853nFOvTHk-vG9vV-Bm8DuasQZOZRnnx3uVyFWvS8rdIg50tKUDIQfMMLuRUWP7Tg00FGFwEIRQpJKH6XfOmcd-4pQFx6iAXF1kwgRWSEZePWhd_AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Using Carlson's symmetric integrals – as seen <a href="https://codegolf.stackexchange.com/a/257775/110698">here</a> – not only removes the need to sort input, it saves 1 byte off the bog-standard <span class="math-container">\$4aE(e)\$</span> formula. As given in <a href="https://dlmf.nist.gov/19.30#E5" rel="nofollow noreferrer">DLMF 19.30.5</a>, <span class="math-container">\$L=8R_G(0,a^2,b^2)\$</span>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 31 bytes</h1>
<pre><code>f(a,b)=4*a*ellE((1-b^2/a^2)^.5)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMGCpaUlaboW-9M0EnWSNG1NtBK1UnNyXDU0DHWT4oz0E-OMNOP0TDUhqm4WJhYU5FRqJCro2ikUFGXmlQCZSiCOkkJyYk6ORpqOQqKmpo5CdLShjoJhLJBhqGcEZ5lCWTARYygNFzcAMgzAao2AciamsbFQi2HOBAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, <sup><s>28</s></sup> 26 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>○+×1+∘(⊢÷10+∘√4-⊢)3×2*⍨-÷+
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn//9H0bu3D0w21H3XM0HjUtejwdkMDEPtRxywTXSBf0/jwdCOtR70rdA9v1/6f9qhtwqPevkddzY961zzq3XJovfGjtomP@qYGBzkDyRAPz@D/hgppCoZchnpGUNoURAMA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>ovs's conversion to a train.</p>
<p>-2 using <code>√</code>.</p>
<h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, 35 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{h←3×2*⍨⍺(-÷+)⍵⋄(○⍺+⍵)×1+h÷10+√4-h}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/vzrjUdsE48PTjbQe9a541LtLQ/fwdm3NR71bH3W3aDya3g0U0gbyNA9PN9TOOLzd0ED7UccsE92M2v9pQI2PevsedTU/6l3zqHfLofXGj9omPuqbGhzkDCRDPDyD/xsqpCkYchnqGUFpUzAN5gEA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>Uses Equation 4.</p>
<p>Longer than the other APL answer because there's more than one usage of <span class="math-container">\$h\$</span>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/ZippyMagician/Arn" rel="nofollow noreferrer">Arn</a>, <a href="https://github.com/ZippyMagician/Arn/wiki/Carn" rel="nofollow noreferrer">22 bytes</a></h1>
<pre><code>┴þ5‡Ôç¸„”R¤ËíÜç›WðÙÝÁ*
</code></pre>
<p><a href="https://zippymagician.github.io/Arn?code=cGkqKDMqKCtcKS06LygqMys6fSkqKzMqOn0=&amp;input=WzEgMV0KWzEuMiAxXQpbMiAxXQpbMjAgMTBd&amp;flags=ZQ==" rel="nofollow noreferrer">Try it!</a> A pretty good approximation, but not exact for the larger values. Uses the crossed out formula (which I assume was removed due to the innacuracy). For any wondering, I managed to get the non-crossed out formula 5 to 33 bytes, but I couldn't figure out how to shorten it (and it was even less accurate than this one).</p>
<h1>Explained</h1>
<p>Unpacked: <code>pi*(3*(+\)-:/(*3+:})*+3*:}</code></p>
<pre><code>pi                     Variable; first 20 digits of π
  *
    (
          3
        *
          (+\)         Folded sum ([a, b] -&gt; a + b)
      -
        :/             Square root
            (
                  _    Variable; initialized to STDIN; implied
                *
                  3
              +
                  _    Implied
                :}     Tail
            )
          *
              _        Implied
            +
                3
              *
                  _    Implied
                :}
                       Ending parentheses implied
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://sourceforge.net/p/cjam" rel="nofollow noreferrer">CJam</a>, 29 bytes</h1>
<pre><code>{_:+_P*@:-@d/_*3*_4\-mqA+/)*}
</code></pre>
<p><a href="https://tio.run/##S85KzP1fWPe/Ot5KOz5Ay8FK1yFFP17LWCveJEY3t9BRW19Tq/Z/3f9oUwXDWAA" rel="nofollow noreferrer" title="CJam – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>x87 machine code, <del>65</del> <del>59</del> 53 bytes</h1>
<pre><code>00000000: d9c1 d9c1 dec1 d9ca dee9 d8c8 d9c1 d8c8  ................
00000010: def9 6a03 8bf4 de0c ff04 df04 d9c1 dee9  ..j.............
00000020: d9fa 8304 06de 04de f9d9 e8de c1d9 ebde  ................
00000030: c9de c95e c3                             ...^.
</code></pre>
<p>Listing:</p>
<pre><code>D9 C1       FLD   ST(1)             ; load a to ST
D9 C1       FLD   ST(1)             ; load b to ST
DE C1       FADD                    ; a + b
D9 CA       FXCH  ST(2)             ; save result for end 
DE E9       FSUB                    ; a - b 
D8 C8       FMUL  ST(0), ST(0)      ; ST ^ 2 
D9 C1       FLD   ST(1)             ; copy a + b result to ST 
D8 C8       FMUL  ST(0), ST(0)      ; ST ^ 2 
DE F9       FDIV                    ; calculate h 
6A 03       PUSH  3                 ; load const 3 
8B F4       MOV   SI, SP            ; SI to top of CPU stack
DE 0C       FIMUL WORD PTR[SI]      ; ST = h * 3 
FF 04       INC   WORD PTR[SI]      ; 4 = 3 + 1 
DF 04       FILD  WORD PTR[SI]      ; load const 4 
D9 C1       FLD   ST(1)             ; load 3h to ST
DE E9       FSUB                    ; 4 - 3h 
D9 FA       FSQRT                   ; sqrt(ST) 
83 04 06    ADD   WORD PTR[SI], 6   ; 10 = 4 + 6 
DE 04       FIADD WORD PTR[SI]      ; ST + 10 
DE F9       FDIV                    ; 3h / ST 
D9 E8       FLD1                    ; load const 1 
DE C1       FADD                    ; ST + 1 
D9 EB       FLDPI                   ; load PI 
DE C9       FMUL                    ; * PI 
DE C9       FMUL                    ; * ( a + b ) from earlier 
5E          POP   SI                ; restore CPU stack 
C3          RET                     ; return to caller 
</code></pre>
<p>Callable function, input <code>a</code> and <code>b</code> in <code>ST(0)</code> and <code>ST(1)</code>.  Output in <code>ST(0)</code>.  Implements Ramanujan's 2nd approximation (eq 5) in full hardware 80-bit extended precision.</p>
<p>Test program:</p>
<p><a href="https://i.stack.imgur.com/iP4N0.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/iP4N0.png" alt="enter image description here" /></a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 52 bytes</h1>
<pre><code>≧×χφＮθＮηＩ×⁴ΣＥＥφＥ²∕⁺ιλφ₂⁺××θθ⁻Σι⊗₂Πι××ηη⁻⁻²Σι⊗₂⁻⊕ΠιΣι
</code></pre>
<p><a href="https://tio.run/##bZC/bsIwEMbn5ilutCVXalA3pqosDFQIeAETX/BJiU2cmAHEs7t2nLZR1OWsz9/97l@lpausbELYyetH39PFHOiiB3aiFnsB5ZuAmq@Lrbn64cu3Z3SsW2gddUZZzL5HVVsHrObwKF4mY0M3Usi2pnLYohlQsY315ya@xHnqIQAjucgfp2AkYA6OQHbqREalErrYYN/4uMCx89Lhwdr8MVXMsRPQRXhHJhoo4GeiGaM4/@uWoxagf6kcV2n4f/nsz6dX46Y8103HehZ7R2Zgn7Kfzs7ek8P5OoQSyvB6a74B" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Works by approximating the line integral for a quadrant. The default precision is unfortunately only ~5 significant figures so the first four bytes are needed to increase the precision to ~7 significant figures. Further increases are possible for the same byte count but then it becomes too slow to demonstrate on TIO. Explanation:</p>
<pre><code>≧×χφ
</code></pre>
<p>Increase the number of pieces <span class="math-container">\$ n \$</span> in which to divide the quadrant from <span class="math-container">\$ 1,000 \$</span> to <span class="math-container">\$ 10,000 \$</span>. <code>≧×φφ</code> would increase it to <span class="math-container">\$ 1,000,000 \$</span> but that's too slow for TIO.</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the ellipse's axes <span class="math-container">\$ a \$</span> and <span class="math-container">\$ b \$</span>.</p>
<pre><code>Ｉ×⁴Σ
</code></pre>
<p>After calculating the approximate arc length of each piece into which the quadrant was subdivided, take the sum, multiply by <span class="math-container">\$ 4 \$</span> for the whole ellipse and output the result.</p>
<pre><code>ＥＥφＥ²∕⁺ιλφ
</code></pre>
<p>Create a list of pieces of the quadrant. In the ellipse equation <span class="math-container">\$ \left ( \frac x a \right ) ^ 2 + \left ( \frac y b \right ) ^ 2 = 1 \$</span> we can set <span class="math-container">\$ \left ( \frac {x_i} a \right ) ^ 2 = \frac i n \$</span> and <span class="math-container">\$ \left ( \frac {y_i} b \right ) ^ 2 = 1 - \frac i n \$</span>. Given a piece index <span class="math-container">\$ i \$</span> we want to calculate the distance between <span class="math-container">\$ ( x_i, y_i ) \$</span> and <span class="math-container">\$ ( x _{i+1}, y_{i+1} ) \$</span>. For each <span class="math-container">\$ i \$</span> we calculate <span class="math-container">\$ j = \frac i n \$</span> and <span class="math-container">\$ k = \frac {i+1} n \$</span> and loop over the list.</p>
<pre><code>₂⁺××θθ⁻Σι⊗₂Πι××ηη⁻⁻²Σι⊗₂⁻⊕ΠιΣι
</code></pre>
<p>The distance <span class="math-container">\$ \sqrt { ( a \sqrt k - a \sqrt j ) ^ 2 + ( b \sqrt { 1 - j } - b \sqrt { 1 - k } ) ^ 2 } \$</span> expands to  <span class="math-container">\$ 
\sqrt { a^2 \left ( j + k - 2 \sqrt { j k } \right ) + b^2 \left ( (1 - j) + (1 - k) - 2 \sqrt { (1 - j) (1 - k) } \right ) } \$</span> which expands to <span class="math-container">\$ 
\sqrt { a^2 \left ( j + k - 2 \sqrt { j k } \right ) + b^2 \left ( 2 - (j + k) - 2 \sqrt { 1 + j k - (j + k) } \right ) } \$</span>.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer" title="MATL – Try It Online">MATL</a>, 19 bytes</h1>
<pre><code>y/U_Q.5t_hlbZh*YPE*
</code></pre>
<p><a href="https://tio.run/##y00syfn/v1I/ND5Qz7QkPsMwKSpDKzLAVev/fyMuQwA" rel="nofollow noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8L9SPzQ@UM@0JD7DMCkqQysywFXrv0vIf0MuINQzApOmQBLEMgZiMNuAyxCIjIy5TEwB" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Formula used</h3>
<p>This is based on formula (1) from the challenge description,
\[
C =  4a\int^{\pi/2}_{0}{\sqrt{1-e^2 \sin^2 \theta} ;d\theta} = 4 a\,E(e),
\]
where <span class="math-container">\$e\$</span> is the eccentricity,
\[
e = \sqrt{1 - b^2/a^2},
\]
and <span class="math-container">\$E\$</span> is the <a href="https://en.wikipedia.org/wiki/Elliptic_integral#Complete_elliptic_integral_of_the_second_kind" rel="nofollow noreferrer">complete elliptic integral of the second kind</a>. This integral can be expressed in terms of <a href="https://en.wikipedia.org/wiki/Hypergeometric_function" rel="nofollow noreferrer">Gauss' hypergeometric function</a>, <span class="math-container">\${}_2F_1\$</span>, as follows:
\[
E(e) = \tfrac{\pi}{2}  \;{}_2F_1 \left(\tfrac12, -\tfrac12; 1; e^2 \right).
\]
Combining the above gives the formula used in the code:
\[
C = 2\pi a \;{}_2F_1 \left(\tfrac12, -\tfrac12; 1; 1 - b^2/a^2 \right).
\]</p>
<h3>Code explanation</h3>
<pre><code>y       % Implicit inputs: a, b. Duplicate from below
        % STACK: a, b, a
/       % Divide
        % STACK: a, b/a
U_Q     % Square, negate, add 1
        % STACK: a, 1-(b/a)^2
.5t_h   % Push 0.5, duplicate, negate, concatenate
        % STACK: a, 1-(b/a)^2, [0.5, -0.5]
1       % Push 1
        % STACK: a, 1-(b/a)^2, [0.5, -0.5], 1
b       % Bubble up in the stack
        % STACK: a, [0.5, -0.5], 1, 1-(b/a)^2
Zh      % Hypergeometric function, 2F1
        % STACK: a, 2F1([0.5, -0.5], 1, 1-(b/a)^2)
*       % Multiply
        % STACK: a * 2F1([0.5, -0.5], 1, 1-(b/a)^2)
YPE     % Push pi, multiply by 2
        % STACK: a * 2F1([0.5, -0.5], 1, 1-(b/a)^2), 2*pi
*       % Multiply. Implicit display
        % STACK: 2*pi*a * 2F1([0.5, -0.5], 1, 1-(b/a)^2)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 70 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{my$s;map$s+=sqrt+($_[0]*cos)**2+($_[1]*sin)**2,0..1570795;4e-6*$s}
</code></pre>
<p><a href="https://tio.run/##TZBNj9owEIbv/hUW9ZIQghN/JTEh6vZSqepWPbQ9LQiFykGR@KoddouW7V@nttnS5DCe9/HMO@MclN6Iy9Eo@NCabjr90bUbGJjjNigBaqqLOa5etidkym19QGZcmV@6G4do@Zguop97M4oi6iVZRKbdORmnGBORp7kUJVeTLELm9VICN@K7ciO@7LUqwfYE7zurK2v8aA6btlvE/kjmuySezQK7AIHuu8YM04KRQrA0BwTTHpdU5JIQKSwXN55jyWhOpF0D0J6PxFlRcF5QmgLW44RhlvHCNlEgepwSnJI05VxwQFPPfZQZvvkQ6py4bxMiwxkTUrLszR/68UTgIhOcSSEBaPY69K8fvQB3uT2FqI7RKkbq92FU3aNl@cbRet9VQ9Rc70c3rLSuXPHEFfTpUqtNVa9M6ETi/Ur4zsK6a58UtHCvfflBt7sO/muBM/euKIKTDL6HwdfPEAZwCoOPHz49BGWvYQDr6m7CDFxdjzqxicCsgXaURYQY6HZ2GXbCbXpnc@6H@/WclM1/yTFV890AXH9X9cck4fzbeFT5mBg/uBnYKzQcxOqp3iBii87z5/F5jtDwvNaxStZKg9fLXw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 78 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub f{($a,$b)=@_;$H=3*(($a-$b)/($a+=$b))**2;3.141593*$a*(1+$H/(10+sqrt 4-$H))}
</code></pre>
<p>With the <code>a+=b</code> trick stolen from the Javascript answer.</p>
<p><a href="https://tio.run/##TZHbbtswDIbv9RRCqtaH2LJ1sq04xrqbIcM67GLbVRMEDiAHBnKa5bYrmuzVM0npMhsCRX4if9LgQXUbcX7SCj60up9MfvbtBnr6aeuVZ/20gs2bj@oIrYLqflmiWcVC34DYgMTc48o4QRjSkmHCiZAsRHXokzGaJT5Jx/pX10Meo1kQnM43Fz2u4iw0DeC2PqDlY7oIXRaJfXMMIIvEYSsbhLrdGWj9KMWYiDzNpTgBO/APZQf@uu9UCbav8L43cWVEH/Vh0/aLyF3JfJdE06nnlYBA@11shmnBSCFYmgOC6YBLKnJJiBSGiyvPsWQ0J9I0B3SgI3FWFJwXlKaADThhmGW8MEUUiAGnBKckTTkXHNDUcWdlhq86hFol7sqEyHDGhJQsA6DZd777y@AN2Mft62U3EVK/D2ZBaFm@c7Te91XzvrkrVF1X2dTYPg/pslObql5p3waJUyvhjYF13z4raOC@c@mHrt318F8JnNrpwxDGGfwAvW9fIPTgBHqfPn5@8MpBwQjW1W3MNFxdrjoxjsCsgaaVQYRoaCe2HraBnfTW@Nw1d@PZUDb/Q46pmu9GrguE1R@d@PPv46ByNtGucTMyT@huFKnneoOISTrOX8bHOUJ3x3UXqWStOnA6/wU" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Or this one which is 13 bytes less (but uses core module List::Util)</p>
<h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> -MList::Util=sum, <s>74</s> <s>65</s> 65+16 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub f{4e-6*sum map sqrt+($_[0]*cos)**2+($_[1]*sin)**2,0..1570795}
</code></pre>
<p><a href="https://tio.run/##TZDLbtswEEX3/IqBq0S2LFPiSxItC003BYqm6KLtKjYMuaAMAX6VlJMGcfrrLkmnrrQYzj0zc4fUQemNOB@NgvvWdNPpj67dQGiO27A8m@MKmheuJllkAWzrA5hfuhsPg@VDuoh@7s0oiqiXZBGZdudknGJMRJ7mUrx63@/K@X7Za1Wi7TPcdVZX1uvBHDZtt4j9kcx3STybhWGJCLjvEjNMC0YKwdIcEUx7XFKRS0KksFxceY4lozmRdjmiPR@Js6LgvKA0RazHCcMs44Udokj0OCU4JWnKueCIpp77KDN89SHUOXE/JkSGMyakZNmbP/j1ROAiE5xJIRFq9nroXz96Qa64fR4GdRys4kD9Poyqu2BZvvFgve@q5lIdXaHSunKtE1fu06VWm6pemaETiXcr4Z2Fddc@KrBwr337Qbe7Dv6NwMy9KopgksF7CL9@BghhCuHHD5/uw7I3MIC6upkwA6vLUSc2EZg1YFdZRIgBd2OXYSfcTW9szv1yfz0nZfNfckzVfDdAl59V/THJcP5tPKp8TIxf3AxsKbgdxOqx3gTENp3mT@PTPAhuT2sdq2StNHo9/wU" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Which numerically calculates a variant of formula (1).</p>
<p>I was surprised this worked with sin and cos of integers up to 1570795 ≈ 500000π. But the tests in the question in &quot;Try it online&quot; has relative error &lt; 0.000001. Guess <code>sin²(the integers)</code> is &quot;averaged out&quot; good enough.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 40 bytes</h1>
<pre><code>A,hQeQJc^-GH2^+GH2**.n0+GHhc*3J+T@-4*3J2
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/31EnIzA10Cs5TtfdwyhOG0hoaenlGQAZGclaxl7aIQ66JkDa6P//aEM9Ix3DWAA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Just formula 5, like most other answers here.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>60</s> 57 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b,c=a+b,h=3*(a-b)^2/c)pi*(c+h/(10+(4-h/c)^.5))
</code></pre>
<p><a href="https://tio.run/##hc7NjoIwEMDxu09h4qWVWjsznX4ceBUNNCWQIBp2fX7WJV4kAXuaNPnN/McpdWN63po85iHl67255r7vHj@5nJrnkH67@yAqVatUVkWt2pKOojrV8oLnJB/dUaSiPQswhbCn9vV10Szl6k4Bav//QO4P8@A0BoLAZPxuHWlUnygi@wgQeQvxB/I6EnqIfgvhIi9qF4K1AdGsI1ogIE3Ohtc5XEe8QAjagDHWst3IM7MC81bR6e95gHOg5TdidtoRx0huN01/" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Straightforward implementation of Ramanujan's 2nd approximation (eq 5).</p>
<p>Rather sadly, this approximation comes out as <s>much</s> more concise than a more-interesting <strong>different approach</strong> prompted by the comments: 'draw' a big ellipse, and measure around the edge of it (unfortunately counting the actual pixels wasn't going to work...):</p>
<p><strong><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>90</s> <s>65</s> 62 bytes</strong></p>
<p><em>Edit: -3 bytes by calculating hypotenuse length using <code>abs</code> value of complex number</em></p>

<pre class="lang-r prettyprint-override"><code>function(a,b,n=1e5)sum(4*abs(diff(b*(1-(0:n/n)^2)^.5)+1i*a/n))
</code></pre>
<p><a href="https://tio.run/##hc/dboMgFAfw@z7FSXqjnWWAoLKkr9JG2aGSKG4IS/b0jpomy5rUccPn75w/ftHW6zga9Og0XiZzwWGwHzOeFhOdDnZyWVt0hTsxlPkcx0wc2m7O3q0xWXfI2DGjb@7V5Ween4nMX5g9tGmbL3twU0DQfeuuCA7CBL299ujhqx0izmAmDx2GkE5araNv9Td0McAwJeDBR3cMdsTdHlJrsDPM0RirLbpwKzYiprnHX@zxM1qP4@3BZNa71H0YMNXb7Z59NGMF3AbLYb8uKsKbkjWypPUGIrz4ixSXtWJMyS0k/6CaqJLXTNVbiD/EU6RqGiEazulzVD4gVpKyEk1qx58j@YA4I5RRKoQUG/Hoqhi9K1WR/@MxvgYU8o6krEhVSqXKarcsPw" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p><strong>How?</strong> (ungolfed code):</p>
<pre class="lang-r prettyprint-override"><code>circumference_of_ellipse=
function(a,b                # a,b = axes of ellipse
n=1e6){                     # n = number of pixels to 'draw' across 'a' axis
x=a*0:n/n                   # x coordinates = n pixels from 0 to a
y=b*(1-(x/a)^2)^.5)         # y coordinates = to satisfy (x/a)^2 + (y/b)^2 =1
                            # we could actually draw the (quarter) ellipse here
                            # with 'plot(x,y)'
step_y=diff(y)              # step_y = change in y for each step of x
step_x=a/n                  # step_x = size of each step of x
h=(step_y^2+step_x^2)^.5    # h=hypotenuse of triangle formed by step_y &amp; step_x
sum(4*h)                    # sum all the hypotenuses and multiply by 4
                            # (since we only 'drew' a quarter of the ellipse)
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Haskell, 73 bytes</h1>
<pre><code>e a b=(a+b)*pi*(1+3*l/(10+sqrt(4-3*l))+3*l^5/2^17)where l=((a-b)/(a+b))^2
</code></pre>
<p>Experimenting with an improved version of (5):</p>
<p><span class="math-container">$$E(a,b) = \pi (a+b) \left( 1 + \frac{3h^2}{10 + \sqrt{4-3h^2}} + \frac{3h^{10}}{2^{17}}\right)$$</span></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="noreferrer">Wolfram Language (Mathematica)</a>, 20 bytes</h1>
<pre><code>Perimeter[#~Disk~#]&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n277PyC1KDM3tSS1KFq5ziWzOLtOOVbtf0BRZl6Jgr5Dur5DdbWhno6hXq0OkDaCMUwhDCOojDGUNoXSRgZAhgFYqRFQzsRUr7b2/38A" rel="noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>-2 bytes from @Roman (see comments)</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>25</s> 24 bytes</h1>
<pre><code>4EllipticE[1-(#2/#)^2]#&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b738Q1JyezAMhzjTbU1VA20lfWjDOKVVb7H1CUmVcSraxrl@bg4BetHBurpqDvoFBdbahjWKtTbahnBKVNwTSEZwwmoSIGOoYGIBVGxjomprW1//8DAA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>-1 thanks to @AndersKaseorg</p>
<p>Note that Mathematica uses a different convention for elliptic integrals, hence the square root disappears.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, <s>68</s> 67 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda a,b,k=2:k&gt;&gt;9or(1-b*b/a/a)*(k-4+3/k)/k*f(a,b,k+2)+6.28319*a
</code></pre>
<p><a href="https://tio.run/##XcxBDoIwEIXhvadwOdMOlJkCERO4yzSm0VSBEDaeviYujGX55f1563u/L7PPOY5PfYWbnpUCpVGuaZqGZQOugglOnaKBVLXWu4QumQjfzgravpaL58FoXrfHvEMEJkY8/VTLwV3hcvWFDmVD3Pw/iae2Q8wf" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>An exact infinite series, given sufficiently accurate values of <span class="math-container">\$2\pi \approx 6.28319\$</span> and <span class="math-container">\$\infty \approx 9\$</span>.</p>
<h3><s>69</s> 68 bytes</h3>
<pre class="lang-python prettyprint-override"><code>f=lambda a,b,k=0:k//7*.785398*a*(8-k)or f(a+b,2*(a*b)**.5,k*b/a/2+4)
</code></pre>
<p><a href="https://tio.run/##XczLCsIwEIXhvU/R5cx0mmtDo9CHmSBBibaldOPTx52YLj/@w9k@x2NdfK15fsk73aUTTlxmcytaT6SmGPw1khDEoeC6dxmkT@wIhBISqcCFkhbt@hHrtj@XAzJYtoiXn5Q7OTRuq290Whq25v/JeR4DYv0C" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Another exact series, given sufficiently accurate values of <span class="math-container">\$\frac\pi4 \approx .785398\$</span> and <span class="math-container">\$8 \approx 7\$</span>.  This one converges extremely quickly, using just five recursive calls for each test case!  The recursion exactly preserves the invariant value</p>
<p><span class="math-container">$$\left(1 + \frac{kb}{8a}\right)C(a, b) - \frac{kb}{8a}C(a + b, 2\sqrt{a b}),$$</span></p>
<p>which can then be approximated as <span class="math-container">\$(1 - \frac k8)2\pi a\$</span> when <span class="math-container">\$a, b\$</span> become sufficiently close.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="noreferrer">Ruby</a>, 63 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a,b,h=1r*(a-b)/a+=b{3.141593*a*((154+53*h*=h)*h*h/1e4+h/4+1)}
</code></pre>
<p><a href="https://tio.run/##VdC7boQwEAXQPl8xIg1Pw/iFXZAfQRQ2AnmjlRLxiBSxfDsxsGiVZop7Zm4xw2x/t77asg@T2tRVOMShyWyUm6SyCyPIUWgWmzgMUfBEsNjFlYv8dDl2PHE5TzBat/oNoMYUAPYhCVUMlWBF2aSHEJo@RVNRakQtLhGnlEQzWqIuL6FXmyZSKc4VpcUp7BJkhEmu/CE9RVxCkRRYFJwL/mwr9n0/tCT/25D6Pu4vhZBEMqE1k14a0pnWwQKP/TPtA77naYTAQAXvi1nTgNw/53EKdQQJBPaI7StWR9wf8Vj1tS9pXkr5wUN3N9Ptp4NuGL6GYzcc8zbDiBg7rgGs2x8" rel="noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>A <a href="https://tio.run/##VdC7asQwEAXQPl8xOI38kvW2tOD0KQLpzRaSsXHCQoIfgeD1tztaec2SZop7Zm4xw@x@t67a8hebueXNTv3p9P6aINRXfEiQzV2cJKywaeXiAlGSIpH3hfUhwTJObbxu9RNATTMAuA2FmeZUS07KcxYEs@wuhsnSUGrkIXKXEhvOSmrKQ9jRZrDSWgjNGNmFH0I55kpof8h2kYcwigklRAgp7m3ktu@HUfh/G2W@T/hLKRVWXBrDlZczbm3TwwJX/5SsucL3PI0QWajgebFrFuHL5zxOyMSQQuRC7B6xDnEX4rHqal9yfigTgYf2YqePnxbaYfgawi4aiyanMbZuXCNYtz8" rel="noreferrer" title="Ruby – Try It Online">direct port</a> of @Arnauld's <a href="https://codegolf.stackexchange.com/a/211770/92901">JavaScript answer</a> is shorter (58 bytes). However, I like the 63-byter above because it differs from other approaches in that it's a cubic polynomial: no square roots, no infinite series.</p>
<p><a href="http://www.ebyte.it/library/docs/math05a/EllipsePerimeterApprox05.html" rel="noreferrer">This excellent review</a> lists nearly 40 different methods for approximating the circumference of an ellipse, with graphs of the relative error in each approximation as a function of <span class="math-container">\$b/a\$</span>. Inspection of the graphs shows that only a few of the listed methods are capable of satisfying the required tolerance of <span class="math-container">\$10^{-6}\$</span> for all test cases. Since several answers here had already explored 'Ramanujan II' (eq. (5)), I decided to look at the Padé approximations 'Padé 3/2' and 'Padé 3/3'.</p>
<p>A <a href="https://en.wikipedia.org/wiki/Pad%C3%A9_approximant" rel="noreferrer">Padé approximant</a> is a rational function with coefficients chosen so as to match the largest possible number of terms in a known power series. In this case, the relevant power series is the infinite sum that appears in eq. (4). The Padé 3/2 and Padé 3/3 approximants for this series are mathematically straightforward (see the review linked above) but not suited to code golf. Instead, an <em>approximation to the approximants</em> is obtained by least-squares fitting. The resulting cubic polynomial (with truncated coefficients), as implemented in the code, is
<span class="math-container">$$
0.0053h^3 + 0.0154h^2+0.25h+1.
$$</span>
Note that this function is overfitted to the test cases, partly because of the truncation and partly because the fit was optimised using only those values of <span class="math-container">\$h=(a-b)^2/(a+b)^2\$</span> that occur in the test cases. (Consequently, <code>Math::PI</code> cannot be substituted in place of <code>3.141593</code>, despite having the same byte count, without yielding relative errors above the <span class="math-container">\$10^{-6}\$</span> threshold for the two test cases for which <span class="math-container">\$b/a=1/2\$</span>.)</p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 20 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>I÷S²3×÷ạ4½+⁵Ʋ$‘×S×ØP
</code></pre>
<p>A monadic Link accepting a pair of <code>[a, b]</code> which yields the result of formula 5.</p>
<p><strong><a href="https://tio.run/##ATYAyf9qZWxsef//ScO3U8KyM8OXw7fhuqE0wr0r4oG1xrIk4oCYw5dTw5fDmFD///9bMTIzLCA0NV0" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<hr />
<p>I thought formula 4 would be the way to go, but only got 21:</p>
<pre><code>9Ḷ.c×⁹I÷S*⁸¤²ʋ€×ØP×SS
</code></pre>
<p><a href="https://tio.run/##ATgAx/9qZWxsef//OeG4ti5jw5figblJw7dTKuKBuMKkwrLKi@KCrMOXw5hQw5dTU////1sxMjMsIDQ1XQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>97</s> <s>92</s></sup> 91 bytes</h1>
<p>Saved <s>4</s> 5 bytes thanks to <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">Dominic van Essen</a>!!!<br />
Saved 2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</p>

<pre class="lang-c prettyprint-override"><code>float f(a,b,k)float a,b,k;{k=k?:2;k=k&gt;999?1:(1-b*b/a/a)*(k-4+3/k)/k*f(a,b,k+2)+6.283185*a;}
</code></pre>
<p><a href="https://tio.run/##dZLbjpswEIbv8xSjSJE4GINtbPCyh4uqT9FEK0NMi0ghAi6iRnn2dDhksxu1CGyP/f3j32OK4GdRXK/loTUDlI4hOandOZrG2bl@qd@eeIbdq9b6jT05LMi9PDShcT2nDmJfhLUb1t6i9rnrK8pTwVLpmexyrZoBfpuqcdzVeQX4zOkH2w/v5scOXuDMCDDKx0YSwF4QGAcRznBxyR5V@V318KIill8E9nS0xWD3s@RmTEQJAUU1l4lmTONmCdWCJ0wnY6CpStM4TvlkQVCh4hSX0RlnNGJRFMcyRkzROyalokpIrYX6auDYV4e2wd1ZZAM1LxW/TOdBN5tab0/f@fakv@En1wQ@x2KNyeZsbQfOWMuq2dsT6qJsGT5DX/2xbenczuqGy4T3MZOB70@0C/Ml3A0azLVcxkTssgcgvwH5fwCLwEed/430iEw/iPu4sreHYbRQmrx3@sB@AsbTFm3XYWIEZvD5VtA7duwQLJ31piSwKSF4HdtNv22wloZATqAnWOsl027Z4LK6XP8C" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/users/39242/anders-kaseorg">Anders Kaseorg</a>'s <a href="https://codegolf.stackexchange.com/a/211780/9481">Python answer</a>.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 35 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>MP*ºH=3*(U-V ²/(U±V)/(A+(4-H/U ¬ +U
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=TVAqukg9MyooVS1WILIvKFWxVikvKEErKDQtSC9VIKwgK1U&amp;input=MTIzCjQ1" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu20" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <s>31</s> 30 bytes</h1>
<p>-1 byte thanks to Jonah!</p>
<pre><code>[:o.1#.+*i.@9*:@(^~*0.5!~[)-%+
</code></pre>
<p><a href="https://tio.run/##fc6xCsJAEATQPl8xicjlLmbZu@TALAgBwcrKNmATDGqTP8ivn2cfthimeDDMN1VkFlwEBicwJKclXB/3W5pkJX@gxn1oHJyM9XNzTLHcJtsem2QLFK/5vcIwDQbnUgJqD2ABvM29oxRUjYoGdblTNaoa@K@e7e6p0GXsY8b0Aw" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Essentially a J port of <a href="https://codegolf.stackexchange.com/a/211775/75681">@ovs's APL solution</a>.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>28</s> <s>25</s> 23 <a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">bytes</a></h1>
<p>Thanks to <a href="https://codegolf.stackexchange.com/users/78410/bubbler">Bubbler</a> for -5 bytes!</p>
<p>Assumes <code>⎕IO←0</code>.</p>

<pre class="lang-apl prettyprint-override"><code>f←○1⊥+×9(×⍨*×.5!⍨⊢)∘⍳⍨-÷+
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkGXI9656YBGY@mdxs@6lqqfXi6kdaj3hUaeqaKQOpR72ZLzcPTLbUedcwAsoEiuoe3a@PSA1atAWIeng7V37VYE6TjP6pyS43D04GyWghlizRRbAC5TwGoRcFQIU3BkAvO0zNC45ui8FFljVF4aCoNQFwDhElGINUmpv8B" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>This calculates</p>
<p><span class="math-container">$$
\pi \cdot \sum_{n=0}^{8} (a+b) \cdot \left( h^{\prime n} \binom{1/2}{n} \right) ^2 \qquad h^\prime =  {{a-b}\over{a+b}}
$$</span></p>
<p>which is a good enough approximation using the 4th formula.
For the explanation the function will be split into two. <code>f</code> is the main function and <code>g</code> calculates <span class="math-container">\$  \left( \alpha^{\prime n} \binom{1/2}{n} \right) ^2 \$</span> for <span class="math-container">\$n\$</span> from <span class="math-container">\$0\$</span> to <span class="math-container">\$\omega-1\$</span>:</p>
<pre class="lang-apl prettyprint-override"><code>g ← (×⍨*×.5!⍨⊢)∘⍳
f ← ○1⊥+×9g⍨-÷+
</code></pre>
<p>Starting with <code>a f b</code> from the right:</p>
<p><code>-÷+</code> calculates <span class="math-container">\$h^\prime = (a-b)÷(a+b)\$</span>.<br />
<code>g⍨</code> is <code>g</code> commuted =&gt; <code>9 g⍨ h' ≡ h' g 9</code>. <code>g</code> returns a vector of the 9 values of <span class="math-container">\$\left( h^{\prime n} \binom{1/2}{n} \right) ^2\$</span>.<br />
<code>+×</code> multiplies <span class="math-container">\$a + b\$</span> to this vector.<br />
<code>1⊥</code> converts the resulting vector from base 1, which is the same as summing the vector.<br />
<code>○</code> multiplies the resulting number by <span class="math-container">\$\pi\$</span>.</p>
<p>Now to <code>h' g 9</code>:</p>
<p><code>⍳</code> is an index generator, with <code>⎕IO←0</code>, <code>⍳9</code> results in the vector <code>0 1 ... 8</code>.<br />
The remaining train <code>×⍨*×.5!⍨⊢</code> is now called with <span class="math-container">\$h^\prime\$</span> as a left argument and the vector <span class="math-container">\$v = (0,1, \cdots, 8)\$</span> as a right argument:</p>
<p><code>.5!⍨⊢</code> is the commuted binomial coefficient called with the vector <code>v</code> on its right and <span class="math-container">\$0.5\$</span> on its left. This calculates <span class="math-container">\$\binom{1/2}{n}\$</span> for all <span class="math-container">\$n \in v\$</span>.<br />
<code>*×</code> multiplies this vector element-wise with <span class="math-container">\$h^\prime * n\$</span> (<span class="math-container">\$*\$</span> denotes exponentiation).<br />
<code>×⍨</code> is commuted multiplication, which given only a right argument, seems to use this as left and right argument? and squares the vector element-wise.</p>
</div>
<div id="pu22" class="pu"><h1>JavaScript (ES7), <s> 59 </s> 56 bytes</h1>
<p><em>Saved 2 bytes thanks to @DominicvanEssen</em></p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;b=&gt;Math.PI*((h=3*(a-b)**2/(a+=b))/(10+(4-h/a)**.5)+a)
</code></pre>
<p><a href="https://tio.run/##dc1NTsNADIbhPafI0pMonrE9np/FdM8CiStMSkuKqgbRiuuHIJCIUrHxwnr0vW/1s173H6f3W3@ZXg7zscy17Iaye6q3EZ8fW4CxSAu1H0zbsoXalcEYC@Q68P1o6/JGNV018366XKfzAc/TKxyBmsYsx5jG2iYgJ6Gk4uLDhiGvWWaNmSjrHdM/FjELR8rxjvE6mjGk5H1idhsma0aCEnxaJnnDdM2Y0JFz3qvfRt03c7/RgP9EicWA1x@mGjCI5ixh/gI" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/maxbergmark/mathgolf/blob/master/math_golf.txt" rel="nofollow noreferrer">MathGolf</a>, 20 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>-ëΣ_¬/²3*_4,√♂+/)π**
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/211776/52210">my 05AB1E answer</a>, and thus also implements a modification of the fifth formula.</p>
<p><a href="https://tio.run/##y00syUjPz0n7/1/38Opzi@MPrdE/tMlYK95E51HHrEczm7T1Nc83aGn9/2@oZ6AAxFyGekZQ2hRMG0HFjaG0KZQ2MgAxDEAqjUByJkAJAA" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>-                     # b-a
 ëΣ                   # a+b
   _                  # Duplicate
    ¬                 # Rotate stack: b-a,a+b,a+b → a+b,b-a,a+b
     /                # Divide
      ²               # Square
       3*             # Multiply by 3
         _            # Duplicate
          4,          # Subtract from 4
            √         # Square-root
             ♂+       # Add 10
               /      # Divide
                )     # Increment by 1
                 π*   # Multiply by PI
                   *  # Multiply by the a+b we've duplicated
                      # (after which the entire stack is output implicitly as result)
</code></pre>
</div>
<div id="pu24" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>22</s> <s>21</s> 20 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÆnIOn/3*D4s-tT+/&gt;IOžqP
</code></pre>
<p>Implements the fifth formula. Input as a pair <span class="math-container">\$[a,b]\$</span>.</p>
<p>-1 byte thanks to <em>@ovs</em>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//cFuep3@evrGWi0mxbkmItr6dp//RfYUB//9Hm@oYxgIA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeX/w22V/vp5xlouJsW6JSHa@naV/kf3FQb81/kfHW2oYxirE22oZwSlTcE0hGcMJqEiBjqGBiAVRsY6JqaxsQA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Æ                     # Reduce the (implicit) input-pair by subtraction: a-b
 IO                   # Push the input-pair again and sum it: a+b
   /                  # Divide them by one another: (a-b)/(a+b)
    n                 # Square it: ((a-b)/(a+b))²
     3*               # Multiply it by 3: ((a-b)/(a+b))²*3
       D              # Duplicate that
        4α            # Take the absolute difference with 4: |((a-b)/(a+b))²*3-4|
          t           # Take the square-root of that: sqrt(|((a-b)/(a+b))²*3-4|)
           T+         # Add 10: sqrt(|((a-b)/(a+b))²*3-4|)+10
             /        # Divide the duplicate by this:
                      #  (a-b)²/(a+b)²*3/(sqrt(|((a-b)/(a+b))²*3-4|)+10)
              &gt;       # Increase it by 1:
                      #  (a-b)²/(a+b)²*3/(sqrt(|((a-b)/(a+b))²*3-4|)+10)+1
               IO     # Push the input-sum again: a+b
                 žq   # Push PI: 3.141592653589793
                   P  # Take the product of the three values on the stack:
                      #  ((a-b)²/(a+b)²*3/(sqrt(|((a-b)/(a+b))²*3-4|)+10)+1)*(a+b)*π
                      # (after which the result is output implicitly)
</code></pre>
<p>Note that I use <span class="math-container">\$\left|3h-4\right|\$</span> instead of <span class="math-container">\$4-3h\$</span> in my formula to save a byte, but given the constraints <span class="math-container">\$0&lt;b\leq a\$</span>, <span class="math-container">\$h\$</span> will be: <span class="math-container">\$0\leq h&lt;1\$</span>, and thus <span class="math-container">\$3h\$</span> will be at most <span class="math-container">\$2.999\dots\$</span>.<br />
I also use <span class="math-container">\$h=\left(\frac{a-b}{a+b}\right)^2\$</span> instead of <span class="math-container">\$h=\frac{(a-b)^2}{(a+b)^2}\$</span> to save another byte (thanks to <em>@ovs</em>).</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://symjaweb.appspot.com/" rel="nofollow noreferrer">Symja</a>, 35 bytes</h1>
<pre><code>f=N(4*#1*EllipticE(1-#2*#2/#1/#1))&amp;
</code></pre>
<p><a href="https://symjaweb.appspot.com/input?i=f%3dN%284%2a%231%2aEllipticE%281%2d%232%2a%232%2f%231%2f%231%29%29%26%3bf%2820%2c10%29" rel="nofollow noreferrer">Try It Online!</a></p>
<p>A port of the SageMath answer in Symja.</p>
</div>
<div id="pu26" class="pu"><h1><a href="https://sagemath.org" rel="nofollow noreferrer">SageMath</a>, 37 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda a,b:4*a*elliptic_ec(1-b*b/a/a)
</code></pre>
<p><a href="https://sagecell.sagemath.org/?z=eJw1jUEKgzAURPeB3OHvzA8xmlQ3QnuRtpSfVCGgVmx24t0b23Q278EMzHC-cTbS5J4EpFzXSJL9OIYlBv_ovTClk66iipAzzobXCp7ePYQZrsJoZTSqRPuX9ic2N6fMNtPWServ1KauaTXeO84gZVnDHEWx7VBeYNsLnb4miuK4UzAIeQgifgCCUywB&amp;lang=sage&amp;interacts=eJyLjgUAARUAuQ==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Uses the elliptic integral formulation.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/211763/">211763</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




