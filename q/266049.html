<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::266049</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>200</td><td>Python</td><td>231115T140328Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266778#266778">Ondrej S</a></td></tr>
<tr d-ix="1"><td>358</td><td>Python3</td><td>231017T161125Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266057#266057">Ajax1234</a></td></tr>
<tr d-ix="2"><td>424</td><td>sed</td><td>231025T113754Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266213#266213">Philippo</a></td></tr>
<tr d-ix="3"><td>168</td><td>Desmos</td><td>231018T091231Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266077#266077">Aiden Ch</a></td></tr>
<tr d-ix="4"><td>113</td><td>Scala</td><td>231022T014432Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266149#266149">138 Aspe</a></td></tr>
<tr d-ix="5"><td>089</td><td>C89</td><td>231017T194202Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266060#266060">Pignotto</a></td></tr>
<tr d-ix="6"><td>097</td><td>Ruby</td><td>231019T063324Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266098#266098">G B</a></td></tr>
<tr d-ix="7"><td>078</td><td>APL Dyalog Unicode</td><td>231021T150726Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266146#266146">boltcapt</a></td></tr>
<tr d-ix="8"><td>068</td><td>Raku</td><td>231020T160759Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266133#266133">Jayant C</a></td></tr>
<tr d-ix="9"><td>062</td><td>JavaScript</td><td>231017T155823Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266056#266056">m90</a></td></tr>
<tr d-ix="10"><td>026</td><td>Charcoal</td><td>231017T203917Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266062#266062">Neil</a></td></tr>
<tr d-ix="11"><td>060</td><td>JavaScript Node.js</td><td>231019T061652Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266097#266097">tsh</a></td></tr>
<tr d-ix="12"><td>nan</td><td>J</td><td>231018T225509Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266088#266088">Jonah</a></td></tr>
<tr d-ix="13"><td>182</td><td>Python</td><td>231017T190155Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266058#266058">bsoelch</a></td></tr>
<tr d-ix="14"><td>076</td><td>JavaScript SpiderMonkey</td><td>231018T035424Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266069#266069">l4m2</a></td></tr>
<tr d-ix="15"><td>013</td><td>Nekomata</td><td>231018T034519Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266068#266068">alephalp</a></td></tr>
<tr d-ix="16"><td>087</td><td>JavaScript ES6</td><td>231017T211523Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266063#266063">Arnauld</a></td></tr>
<tr d-ix="17"><td>061</td><td>R</td><td>231017T151319Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266054#266054">Dominic </a></td></tr>
<tr d-ix="18"><td>013</td><td>05AB1E</td><td>231017T144215Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266052#266052">Command </a></td></tr>
<tr d-ix="19"><td>017</td><td>05AB1E</td><td>231017T144036Z</td><td><a href="https://codegolf.stackexchange.com/questions/266049/how-many-umbrellas-to-cover-the-beach/266051#266051">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 200 bytes</h1>
<p>Not a very competitive answer, but it's the best I can do with the baseline python functions.</p>
<ul>
<li>l: is list of the beach spaces</li>
<li>r: radius of already covered spaces</li>
<li>p: amount of umbrellas and the final answer</li>
</ul>
<p>Function goes through the beach from the left, finds the right most umbrella placing which covers all uncovered space to its left and reaches the farthest right.
The function then starts again with the spaces to the right of the last placed umbrella and now with info of which spaces on the left are already covered. When all spaces are covered prints out number of placed umbrellas.</p>
<p>Any tips for making this more streamlined are welcome, thank you.</p>
<pre class="lang-python prettyprint-override"><code>def f(l,r=0,p=0):
    m=r
    for u in range(len(l)):
        s=l[u]-1
        if u-s-r&lt;1 and u+s&gt;=m:
            m=u+s
            t=u
    if m&gt;len(l)-2: return p+1
    else: return f(l[t+1:],m, p+1)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VZDBbsMgDIbvPIWPRDFSabtpi0ZfJMqhVWGLRGhE4LDX2HWXXrZn2Sv0bYoDzRRbBuvTb2P8_Tt-ho-Lu15_YjDi5fZ31gYMt-jVBke1qRoGyQbl59tcPEToHfije9fcasdtVTRkk7Jt7IRcQG8gikn4NwlHd4ZYTwc1_Otz70RXJKjISvFwyG-IbQNeh-gdjHVur-2kF5hGbkMtmw4HJEVV_vNlFbTtK25R4i6de8o6ZAmtnJDElROisn0JajDDp5zOQf5McFEkTccYLepEi7L5s6PvXeCGn6oy2WPjdw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Python3, 358 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
F=lambda h,i,a:{*[i+j for j in range(1,a)if i+j&lt;len(h)]+[i-j for j in range(1,a)if i-j&gt;=0],i}
def f(h):
 q,m=[(F(h,i,a),1)for i,a in sorted(E(h),key=lambda x:x[1])[::-1]],-1
 while q:
  a,b=q.pop(0)
  if len(a)==len(h):m=b if m==-1 else min(m,b);continue
  for x,y in E(h):
   if x not in a and(m==-1or b+1&lt;m):q=[({*a,*F(h,x,y)},b+1)]+q
 return m
</code></pre>
<p>Non-greedy (where is the fun otherwise?) with a basic heuristic for the sake of speed.</p>
<p><a href="https://tio.run/##dVDBTsMwDL33K3xMNhctDBCEhdv2E1UPKU1pRpO2WSc6Tfv24nSAtAOKHDl@79nP6U5D3fr1cxemaauMPzoT9GCSnWq0K0oNNVrU8rzI7HIPVRtgD9ZD0P7DMIGa2woI2TTGs5rny8ym/9LS/Zta5WgvSWkqqIgvE@jRqYzt2DyHo@BRTGmUH9owmJJtiYmf5vRraZRjJnKeSZmKPMdUJPBV28ZAT/1AY6H6u67t2IrTkwZHb5ordfUonSpi1SmVCjDNwYCznjks@Ot76wfrj4Z00caIp2hje3U69xrBt0MsatC@ZHMTYhZLsXFc9rTKeaFxEfchNb8gIfQtfQLBDMfgwU1dsH5gFcte8B4Frul@iFnOefKHCbw5N1hUPfxE1N@ij9faHPE8ETp9Aw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed</a>, 424 bytes</h1>
<p>Thank you for restricting umbrella sizes to 9, otherwise <code>sed</code> stops to be the natural choice for solving this thing. (-; The maximum number of umbrellas is also limited to nine; you can upgrade to the big-beach-edition for a couple of extra bytes as an in-app-purchase.</p>
<p>I got distracted so often, that I decided to publish this initial version solving the problem, although I'm feeling that there are still ten to twenty bytes to golf away on a rainy day.</p>
<p>How it works:</p>
<ul>
<li>loop <code>1</code> creates all possible combinations of umbrellas used or not</li>
<li>loop <code>2</code> sorts those combinations by their number of umbrellas used, which is awfully slow with this approach for 2^beachsize combinations!</li>
<li>loop <code>3</code> takes one combination after the other to test whether they cover the beach with those sub-elements:
<ul>
<li>loop <code>4</code> makes a separate line for each umbrella</li>
<li>loop <code>5</code> opens the umbrellas by couting down there size and spreading <code>=</code></li>
<li>loop <code>6</code> transposes the beaches from lines to columns (this will probably only work with wet sand)</li>
<li>if there is a line without umbrella, this means sun will hit the beach, so we have to start with the next combination of loop <code>3</code></li>
</ul>
</li>
<li>loop <code>7</code> finally counts the number of umbrellas in the first shady combination</li>
</ul>
<pre><code>G
s/^/_/
:1
s/(\S*)_(\S)(\S*.)/\1-_\3\1\2_\3/
t1
:2
s/-(\S*_)/0\1#/
s/(\S*_(#*)\n)(\S*_\2#+\n)/\3\1/
t2
h
:3
s/\S*\n//
x
s/_.*/\n/
:4
s/^(-*)([0-9])(\S*.)/\1-\3\1\2_\3/
s/_\S/-_/
t4
s/-*/987654321#/
:5
s/((.)(.).*#.*)\2/\1x\3x/
s/(x=*)-/\1=/
s/-(=*)x/=\1/
s/x//g
t5
s/#./&amp;!_/
s/\n//g
:6
s/!(.*_)([^x])/!\2\1x/
t6
s/_x*/_/g
s/!/!\n/
/__/!t6
s/!/!#/
/\n[-0]+(\n|_)/!b7
g
b3
:7
s/((.)(.).*!)\3(.*)1.*/\1\2\4/
t7
s/.*!(.).*/\1/

</code></pre>
<p><a href="https://tio.run/##TZDBasMwDIbvfosQGLaLrdpOm9XQ49gD9Fi1hrKR7ZIOkoEPe/Zlv8IOheDI@n9Jnzy9v7lh/F6WVzXRlQqpHBBpPllTcBqJvCEOrnDiwBE/UnNQOcLnRC6Gthxa@q8rurWGx7WycGw3iElqURbVh8oJRmg8EqmKuHhLuKjcCYN21ujz1h0uD7MfRsPPJ3IgncXvLB2e@/2uS1EQ8k4otDf4vG09SCIaVE515atHaxwSR1rpcat0FLSJKtGgZqlvPT01RXLCOKi8R9hoj031@VovhhqOaAoEUUq1eLhBPBCwCJVCzSohASi0ObvtZaN5/MFjNbdeDeqWVO4fYRvDCTNMkOfAttyhvzggrQYSzmXpQkghxPB7/5o/7@O0uJc/" rel="nofollow noreferrer" title="sed – Try It Online">Try it online!</a>
<em>Note that beaches of 8 parts or bigger will time out on TIO. Adding a <code>g</code> flag in the sorting part of the second loop drastically reduces execution time, but still not enough for hard cases.</em></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, <s>169</s> 168 bytes</h1>
<pre><code>L=l.count
I=[1...L]
B=mod(floor(2n/2^I),2)
k=i-l[i]
H=[1...k]0
A=[min(∑_{i=1}^Ljoin(H[k&gt;H],[1...2l[i]-1+min(k,0)]0+1,I0)[I]B[i])B.totalforn=[1...2^L]]
f(l)=A[A&gt;0].min
</code></pre>
<p><a href="https://www.desmos.com/calculator/jwxvjlvn20?nographpaper" rel="nofollow noreferrer">Try It On Desmos!</a></p>
<p><a href="https://www.desmos.com/calculator/hmmay3qe6m?nographpaper" rel="nofollow noreferrer">Try It On Desmos! - Prettified</a></p>
<p>This brute forces every single umbrella combination, so expectedly this is very slow. In fact, this took about 40 or so seconds to finish running on my computer LOL.</p>
<p>Also, the code is absolutely horrendous and can definitely be golfed. I mean, just look at it....</p>
</div>
<div id="pu4" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 113 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/266097/110802">@tsh's Python code</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##fY1BawIxEIXv/oo5zmBcN9aWdukWPArtSXoSD6lNtgkxanYOFvG3bxOrBWEpw8ybeXy8adfKq2774fSa4U3ZAMfuUxswqKqF3i/ngVfCVknqks5iDdpnVXgdGv4iOUykwBJ4C1dzJKkw1rOO6OoXN0o4OqJio3bZyMfQ5fNA2rcaym4AkJ9u0n9UsWkrmMWovpcLjjY0K6rgPViGGo6JBNgll31Ag6@2ZXwSEyHFXZrTvBERjMcg@1ApbuqCPvahOXN66Zx@hSd98P0vcu5cD//Bf4k3mafBqfsB" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>def f(a:Seq[Int],i:Int=0):Int=if(i&lt;a.length)1+f(a,(0 to a.length-1).filter(j=&gt;j-i&lt;a(j)).map(j=&gt;a(j)+j).max)else 0
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##fZBRS8MwFIXf@yvOY4Jxa@cULU7wUdEn8WnsIc6kpqSxpJlMpL@9Jmu6WShyueHm3o@Te9JsueZd9/lWiq3DM1cGPwnwLiQk4TmeVOPWD8ZtGFQOX2CFlA5VQAElQRRuwWdamMJ90NgHvrhGxfePu6r2NEmxM07pExgxYCaVdsKSEqs7lDjHQY@U9A9S8bqfhz7OUI5m@3jJ/MRvzoZ3e6iF0I047pX2zSRkdFt564Tboslxby3/Xr84q0yx8V5fjTqZrX3XaUMkCV9DbtiCZezCn8tQUUoxnyObQjM2ioheT6FBcxkzqA/wYgq@7JFDhrj6Dz4qjjTbpO26Xw" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def f(a: List[Int], i: Int = 0): Int = {
    if (i &lt; a.length) {
      val maxJump = (0 until a.length)
        .filter(j =&gt; j - i &lt; a(j))
        .map(j =&gt; a(j) + j)
        .max
      1 + f(a, maxJump)
    } else {
      0
    }
  }

  def main(args: Array[String]): Unit = {
    println(f(List(9,2,1,3,2,4,2,1))) // 1
    println(f(List(1,1,1,1,1,1,1,1))) // 8
    println(f(List(2,1,4,1,4,1,1,3,1))) // 2
    println(f(List(5,1,3,1,3,1,1,1,6))) // 2
    println(f(List(4,1,1,3,1,1))) // 2
  }
}
</code></pre>
</div>
<div id="pu5" class="pu"><h2>C89,  89 bytes</h2>
<p><strong>-11 bytes thanks to @Martin Kealey</strong></p>
<pre class="lang-c prettyprint-override"><code>int m,i,x;f(v,n)int*v;{for(i=n;i--;m=abs(m-i)&lt;x?x+i:m)x=v[i];return m&gt;=n?m=0,1:1+f(v,n);}

</code></pre>
<p><a href="https://tio.run/##dZLRToMwFIbveYoTvKGunbDpsq3rFm9MjCY@AFkMsjFPMoqBQoikry62dLpo9DSnPeV8@Qt/SVl6TOShv0CZHuvdHlaV2mExfl33KBXkFGnLs6Chkpj9ZcO7rCgDFJIjYzwXyUsV5AzJqt20I1zmpBVNjFte7lVdSsjXQm5yEdJoGY2cDNdOOUEZNAXuSOeBiUqVdao62yo52KWJp5OtKyXXoOItCHCwjS6i0C3ohEZ0auZrW2nqenNNz9ycWvbH@JObUJuRUXJpdU/k4jd347pD2jH7h/vWOZ9pY6YHTHPPfTu@758VIB92xmAwDtuHRQbq6quIQ@sGY@uQkwE8e/FWqyrIAmWcHzcUhlUSEMKVJWzAf3rwYQn@3e39o0/cSe4thul0XyH3tNd/pNkxOVQ9M/@CSOeLTw" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<pre class="lang-c prettyprint-override"><code>int m, i, x;
int f(int *v, int n)
{
    for(i=n; i--;)
    {
        extern int abs();
        x = v[i];
        if (abs(m-i) &lt; x) m = x+i;
    }
    
    if (m&gt;=n){
        m = 0;
        return 1;
    }
    else { 
        return 1 + f(v, n);
    }
}
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>102 100</s> 97 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;l{(r=*1..l.size).find{|c|r.combination(c).any?{|x|r&amp;x.flat_map{|a|[*a-l[-a]+1...a+l[-a]]}==r}}}
</code></pre>
<p><a href="https://tio.run/##VU7RisIwEHzvV@RJtLYrrVXuwOqL9@oPrOFYYwOBNC3RO/SafnttcxWUYZdhhhnG/pzuncy7eKubqc3DBEDDRf0VM5DKnBsnnAVRlSdl6KoqMxUzIHPfNe7m7OQGUtP1u6S6ceQwpFhjTHzetwDNPedtntu2bbuaScQsSnosh895ULPN5uuwB61McQHfIpzE4pc0E7g4IoRHvugrAvyMUh9Mo2xgnMVblgzyG55yEr3Byx8BDhXZeH6FN9IAV@Oo5ZhYP43Xvf9Sv7d7AA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Thanks value ink for some good ideas (-2/-3 bytes)</p>
</div>
<div id="pu7" class="pu"><h1>APL (Dyalog Unicode), 78 bytes</h1>
<pre><code>⌊/b/⍨×b←{(+/⍵)×∧/(1@(∊{n(1⌈⌊)(⍳¯1+2×⍵⌷v)+⍵-⍵⌷v}¨⍵/⍳n))n⍴0}¨{⍵⊤⍨n⍴2}¨⍳¯1+2*n←⍴v
</code></pre>
<p>Another brute force attack. The index origin is set to 1 (⎕IO←1). The variable v contains the integer vector to be evaluated.</p>
<p>I have some more work to do on this one. It is a bit convoluted as it is. I think I'm missing something obvious.</p>
<p><a href="https://tryapl.org/?clear&amp;q=%E2%8C%8A%2Fb%2F%E2%8D%A8%C3%97b%E2%86%90%7B(%2B%2F%E2%8D%B5)%C3%97%E2%88%A7%2F(1%40(%E2%88%8A%7Bn(1%E2%8C%88%E2%8C%8A)(%E2%8D%B3%C2%AF1%2B2%C3%97%E2%8D%B5%E2%8C%B7v)%2B%E2%8D%B5-%E2%8D%B5%E2%8C%B7v%7D%C2%A8%E2%8D%B5%2F%E2%8D%B3n))n%E2%8D%B40%7D%C2%A8%7B%E2%8D%B5%E2%8A%A4%E2%8D%A8n%E2%8D%B42%7D%C2%A8%E2%8D%B3%C2%AF1%2B2*n%E2%86%90%E2%8D%B4v%E2%86%902%201%204%201%204%201%201%203%201%0A2&amp;run" rel="nofollow noreferrer">Try it on TryAPL.org!</a></p>
</div>
<div id="pu8" class="pu"><p><strong>Raku 68 bytes</strong></p>
<pre><code>map({$^a-$^b+1..^$^a+$^b},@_.kv).combinations.grep(^@_⊆*)&gt;&gt;.elems.min
</code></pre>
<p>simple brute force approch
<a href="https://tio.run/##K0gtyjH7n1up4JCoYKugYaRjqGMCxYY6xjqGmtZc/6tzEws0qlXiEnVV4pK0DfX0gExtIFPXsFbHIV4vu0xTLzk/NykzL7EkMz@vWC@9KLVAI84h/lFXm5amnZ1eak5qbrFebmZerYZDoqZecWLl//8A" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1>JavaScript, 62 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(a,s=0)=&gt;a[s]?1+f(a,Math.max(...a.map((v,i)=&gt;i-v&lt;s&amp;&amp;i+v))):0
</code></pre>
<p><a href="https://tio.run/##VYrRCsIgGIWv6ym8Gsr@yVYrKFo9QU8gXohpWdscU6Se3rS6icM5fHycuwjCydlMvnKTuah5sONDvWLUHRbgupp0R8EcPzWlTuIs/I0O4okppSLBhHEAkz6mCgdXFKYMhJB9HbWdEe6VR14iqxFjO1hBA@u0bSYOrIG/JJMf7a/5m93mS5/mbDkny4W0o7O9or29Yo29JCS@AQ" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<p>Greedy algorithm: pick the umbrella that covers the most spaces while including the first uncovered space.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>30</s> <s>27</s> 26 bytes</h1>
<pre><code>Ｗ‹↨υ⁰Ｌθ⊞υ⌈Ｅθ∧‹⁻λ↨υ⁰κ⁺λκＩＬυ
</code></pre>
<p><a href="https://tio.run/##RY0xC8IwEIV3f8WNFzjBopuTujaQvXQ4ajChaWybRP33MaGCd7w3fMd7Nxhehye7nN/GOg3Y6hDwykFjIjgIglb7RzS4CCFApWAql/yxU5pQ8owLwcXft5y0PgV0BP@C0jAWKbcdRlHnvFOr9RFvHCL@HqTKc@66hk7UlD1W7/u8f7kv" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Greedy algorithm.</p>
<pre><code>Ｗ‹↨υ⁰Ｌθ
</code></pre>
<p>Until all of the beach has been covered, ...</p>
<pre><code>⊞υ⌈Ｅθ∧‹⁻λ↨υ⁰κ⁺λκ
</code></pre>
<p>... filtering on those umbrellas whose left end is not to the right of the first uncovered index, pick the one that maximises the next uncovered index.</p>
<pre><code>ＩＬυ
</code></pre>
<p>Output the number of umbrellas used.</p>
<p>Edit: Saved 1 byte by porting @tsh's optimisation. Example: Take the input <code>[1,4,1,1,3,1,1]</code>. Initially, five umbrellas lie to the right of index <code>0</code>, the valid two being the <code>1</code> at index <code>0</code> itself, and the <code>4</code> at index <code>1</code>, which also covers indices <code>1</code> to <code>4</code>. The maximum next uncovered index is therefore <code>5</code>, obtained by choosing the <code>4</code>. The <code>1</code> at index <code>6</code> is the only umbrella to the right of index <code>5</code>, and the maximum next uncovered index is therefore <code>7</code>, obtained by choosing the <code>3</code>. This completes the coverage of the beach using two umbrellas.</p>
<p>A port of @Jonas' J solution was also 27 bytes:</p>
<pre><code>ＵＭθＥθ¬‹↔⁻μκιＷ⌈⌊θ«→≧×⌊θθ»Ｉ⊕ⅈ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=PU6xCsIwEJ3brwhOV0iHooPoJJ0EKyIOQukQa7TBJrG9VAXxS1wcFB31c_wb0yrewT3u3rt7d36kGStTzfLL5VaZld99PyO2DbWUTC2hoMR2NYy1gRFHhMECdV4ZDpFQFYKkZON5lAjPRt_dZyLnBCJ2ELKStabBwpLk6DqR3nHoTcU6M1bs2NsDRLFWzQRmQnK0jv8lSgorO7mTUigDIUMDQ5WWXHJl-BLm0JhecZHi7_t73PJ3eSt5xXFAOzSw2a5rknz5Dw" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt this Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＵＭθＥθ¬‹↔⁻μκι
</code></pre>
<p>Convert each umbrella into a list of <code>0</code>s and <code>1</code>s where the <code>0</code>s are the locations that are covered.</p>
<pre><code>Ｗ⌈⌊θ«
</code></pre>
<p>Repeat until opening an umbrella will cover the beach.</p>
<pre><code>→
</code></pre>
<p>Keep count of the number of umbrellas opened.</p>
<pre><code>≧×⌊θθ
</code></pre>
<p>Zero out the locations covered by the largest remaining umbrella.</p>
<pre><code>»Ｉ⊕ⅈ
</code></pre>
<p>Output the number of umbrellas required.</p>
<p>Previous 30-byte brute force solution:</p>
<pre><code>Ｉ⌊ＥΦＸ²Ｌθ⬤θ⊙θ‹↔⁻μξ×ν﹪÷ιＸ²ξ²Σ⍘ι²
</code></pre>
<p><a href="https://tio.run/##PY7NCoMwEIRfJccVtgdtbz3ZlkJBQbA38ZBqsAv5qSax7dOnRqQDO3PYj2G6J586w2UI1UTawZlbByVpUl5ByV9wJenEBJV5L54hK4Qe3BPGJEGWSwnjEvoboxDWQv6wRnonYoe3oJB9InknJSxoZKXpvTRw0@5CM/UCCNm/e0WzZBWyellw4lbUblk2RHB7HUNomgxTPGyX4h7Ttg27Wf4A" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>     ²                          Literal integer `2`
    Ｘ                           Raised to power
       θ                        Input array
      Ｌ                         Length
   Φ                            Filter over implicit range
         θ                      Input array
        ⬤                       All indices satisfy
           θ                    Input array
          ⊙                     Any value satisfies
               μ                Inner index
                ξ               Innermost index
              ⁻                 Difference
             ↔                  Absolute value
            ‹                   Is less than
                     ι          Outer value
                    ÷           Integer divided by
                       ²        Literal integer `2`
                      Ｘ         Raised to power
                        ξ       Innermost index
                   ﹪            Modulo
                         ²      Literal integer `2`
                 ×              Multiplied by
                  ν             Innermost value
  Ｅ                             Map over implicit range
                            ι   Current value
                           ⍘    Convert to base
                             ²  Literal integer `2`
                          Σ     Take the sum (i.e. popcount)
 ⌊                              Take the minimum
Ｉ                               Cast to string
                                Implicitly print
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 60 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;(g=i=&gt;a[i]&amp;&amp;-~g(a.reduce((m,r,j)=&gt;j-i&lt;r&amp;r+j&gt;m?r+j:m)))(0)
</code></pre>
<p><a href="https://tio.run/##dY1RC4IwFIXf@xV7kl2a2kyjoq0fIj4MnbKhLmb12F9fTkVI6B7O4cL9OFeLtxhKqx7PsDeVdDVzgnHcMMW4yFURBOGnwSKysnqVEuOOWKKBcR2qmw3sXvPuPua1AwB8AFeafjCtjFrT4BrnF5IQSo5jpn4rEAJAcYzobgNS8qMVPG9B35cu9s20mMFkC2bzebLX6R@4Nk1v/Syg@wI" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 73 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda a,i=0:i&lt;len(a)and-~f(a,max(r+j for j,r in enumerate(a)if j-i&lt;r))
</code></pre>
<p><a href="https://tio.run/##ZY3RCsIwDEXf/YqALy1mYLcpU7YvkT1E1mLL1o0yQV/89bp2uiHmckMIJzfDc7z1NvNeVS1114aAUFf7sy5baRlxsk3yUoywowdzOwOqd2DQgbYg7b2TjkY5cVqBSXTpOPeD03Zkil1OmKLAbOp5mGoAzmELYrMQAn/0JYqVCAn5xyFL1JFIV@Iw76ODjn/Echs/hJoJ/wY" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, <sup>36 34 33 31 </sup> 33 bytes</h1>
<pre><code>{{1&gt;.#}.(OR&gt;./)^:a:#.y&gt;|@-/~#\y}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dZDBSsNAEIbxmqeYZLWb2M0ku2ppFhqWCp6kQvHWptCWBCuCYNJDie2LeIkHH6o-jZuskfQgw7Aw3_ezs_vx-VwdLyJb8mRgy4hSy0GawUgCBQYhSN0-wu30_u5rW2T-8GiXJY-R7NF9mMYYeAu5lAR38bvygwOZ7_Z7I36fTTxrMkbgRGm5j855WCZzucFe6PAmplyTUhtUpJUxLN1A8h5BT7mCyBouiOfOyGEmLwOH9zHQdtKJWpaVrp9eATIQjLPr3-bsinFD6GOaF7Be5mlOzYTDSOsRE40mdEC08rBBnJ2UQaJB_1xi4I0ZNV3XoAv_EjpTP3e8Xa1e0jeaQ9EueLJet8y3VpU5fwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><em>-1 thanks to Bubbler suggesting a conversion to explicit fn.</em></p>
<p><em>Also thanks to Bubbler for pointing out a bug when a single umbrella covers everything, which must be handled as a special case.</em></p>
<p>Inspired by <a href="https://codegolf.stackexchange.com/a/266062/15469">Neil's idea</a>, but with an array  implementation.</p>
<p>Consider the example <code>2 1 4 1 4 1 1 3 1</code>:</p>
<ul>
<li><p><code>y&gt;|@-/~#\y</code> For each entry in the list, this shows what the beach would look like with only that umbrella open, using a <code>1 0</code> list.  The full phrase returns a binary matrix, with each row showing one &quot;isolated umbrella&quot; version of the beach:</p>
<pre><code>1 1 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0
1 1 1 1 1 1 0 0 0
0 0 0 1 0 0 0 0 0
0 1 1 1 1 1 1 1 0
0 0 0 0 0 1 0 0 0
0 0 0 0 0 0 1 0 0
0 0 0 0 0 1 1 1 1
0 0 0 0 0 0 0 0 1
</code></pre>
</li>
<li><p><code>#.</code> Interpret those as binary numbers:</p>
<pre><code>384 128 504 32 254 8 4 15 1
</code></pre>
<p>Conceptually, we'll still be working with <code>1 0</code> lists, but using integers will help us shorten the necessary computations.</p>
</li>
<li><p><code>(...^:a:)</code> Accumulate the results of <code>...</code> until a fixed point...</p>
</li>
<li><p><code>(...&gt;./)</code> On each iteration, we find the row with the farthest rightward span of ones, provided that span starts at the left:</p>
<pre><code>1 1 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0
1 1 1 1 1 1 0 0 0  &lt;- farthest rightward span
0 0 0 1 0 0 0 0 0
0 1 1 1 1 1 1 1 0  &lt;- doesn't count since it starts with 0
0 0 0 0 0 1 0 0 0
0 0 0 0 0 0 1 0 0
0 0 0 0 0 1 1 1 1
0 0 0 0 0 0 0 0 1
</code></pre>
<p>This row, however, is nothing but the largest integer in our list, because of how binary numbers work.</p>
</li>
<li><p><code>(OR...)</code> We then add that &quot;farthest right&quot; row elementwise to every row, essentially &quot;blocking out&quot; everything it covers from all rows.  This is nothing but the bitwise <code>OR</code> operation.  The transformation in this step corresponds to our chosen umbrella being deployed:</p>
<pre><code>1 1 1 1 1 1 0 0 0
1 1 1 1 1 1 0 0 0
1 1 1 1 1 1 0 0 0
1 1 1 1 1 1 0 0 0
1 1 1 1 1 1 1 1 0
1 1 1 1 1 1 0 0 0
1 1 1 1 1 1 1 0 0
1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 0 0 1
</code></pre>
<p>Then we continue.  Our process will reach a fixed point (a matix of all ones) in <code>n + 1</code> steps, where <code>n</code> is the minimum number of covering umbrellas.</p>
</li>
<li><p><code>#}.</code> So we kill one element and get the length.</p>
</li>
<li><p><code>1&gt;.</code> Finally, we return the max of that length and 1.  This is needed for the case where a single umbrella covers the entire beach, because otherwise the algorithm above will return 0 in this case.</p>
</li>
</ul>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 182 bytes</h1>
<p><em>-2 bytes, thanks to xigoi</em></p>
<pre class="lang-python prettyprint-override"><code>lambda l:(S:={*range(L:=len(l))})and[len(c)for n in S|{L}for c in combinations([range(i-k+1,i+k)for i,k in enumerate(l)],n)if{L}.union(*({*r}for r in c))&gt;S][0]
from itertools import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bY6xTsMwEED3foUlFjt1KlIKaiOlX9AtY8jgpjZYsc-R6wyo9EtYIiEYGfkX_gY7qZIiodP5fPK753v7bF7cs4HuXWSPH60T8frnWzG9PzCkUpyn2SmyDJ443qWZ4oAVIWfC4FCEpiLCWARIAspfT7tz6KrQVUbvJTAnDRxxMQhkXM8TKud1PyRpHUAOreaWOe7FJQUihdcsWvCDOML-795peych27wsbsuZsEYj6bh1xqgjkrox1kWX7b8aK8FhgYsNXdKE3vlzFW4lIegGxVuUzEYkoX9iRNYTEhyrSwbbBC0n6H546jPEw3_QaLh2DFt33VB_AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>ungolfed code:</h2>
<pre class="lang-python prettyprint-override"><code>import itertools
def f(l):
 l=[range(i-k+1,i+k)for i,k in enumerate(l)]
 S={*range(L:=len(l))}
 for n in range(len(l)+1):
  for c in itertools.combinations(l,n):
   s=set()
   for r in c:
    s|={*r}
   if s&gt;S: # s=S not possible as L in s\S
    return len(c)
</code></pre>
<p>Brute force solution, goes through all possible sets of umbrellas ordered by size and picks the first one that covers the whole range</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Releases/45" rel="nofollow noreferrer">JavaScript (SpiderMonkey)</a>, 76 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(a,k=0,b=-1)=&gt;a[k]?1+Math.min(...a.map((v,i)=&gt;i&gt;b&amp;v+k&gt;i?f(a,v+i,i):1/0)):0
</code></pre>
<p><a href="https://tio.run/##dY1RCoMwDIbfd4o@jRZrtc6NTVBPsBOID9Xp1lWtqBR2@q5VESYs4Q8h@fLnzRQby4H3kzv2/FENrexE9dG6jiHDIvZxEbsUxQnLRJ5S586mF2l5BwkhjLSsh1BhbvY8KY7KEQlPa3OoHG6mEfV8hCJfl7IbZVORRj5hDbMbDjDFJ1ND2@UAIAQ8D9DDDqT4JzfwugetX7jKOtN8AYM9eF7Ws2xe/oGb0/zWxgrqLw" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<p>Try to fix m90's error</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a>, 13 bytes</h1>
<pre><code>Jᵐ{x:ᵒ≈&gt;~}aş#
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFZtJJurlLsgqWlJWm6Flu8Hm6dUF1h9XDrpEedHXZ1tYlH5ysvKU5KLoYqWHAzMtpSx0jHUMcYSJqAWLFc0YY6KBAoAlJhAsUgtSAxUwgLjEHQDCgGlweqgNgAAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>Jᵐ{x:ᵒ≈&gt;~}aş#
J               Split the list into parts
 ᵐ{x:ᵒ≈&gt;~}      Check that each part can be covered by an umbrella:
 ᵐ{      }          For each part:
   x:ᵒ≈                 Create a table a[i][j] = abs(i-j)
       &gt;~               Check that there is at least one row in the table
                        that is smaller than the corresponding item in the input
          aş    Find the shortest solution
            #   Take the length
</code></pre>
<p>This may output the same result multiple times. For example, the input <code>[2,1,4,1,4,1,1,3,1]</code> can be split into <code>[[2,1,4,1,4],[1,1,3,1]]</code> or <code>[[2,1,4,1,4,1],[1,3,1]]</code>, and the output is <code>2</code> in both cases.</p>
</div>
<div id="pu16" class="pu"><h1>JavaScript (ES6), 87 bytes</h1>
<p>Brute force.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;(g=(i,b=a,v=a[i++])=&gt;v?Math.min(g(i,b),1+g(i,b.map(q=&gt;--i*i&lt;v*v?0:q))):b.join``*i)``
</code></pre>
<p><a href="https://tio.run/##dY3hCoIwFIX/9xT7uemczSxKmj5BTyCC09QmumnKXt@aipDQPdzLgfNxbs01H/K36EZHqmcxlWziLIQVgwJnjGPNeCxsO0Es1NGDjy/SCgkrkyJM7dmQlnewZ6HjCEvctaWjY9AjhIKM1ErINLUEStMpV3JQTUEaVcESxjfsYYpP3@sblwCAEHBdQA87kOIfbeB1D5o@f13TTJMF9PbgeYnnNbr8A7em@a2ZFZw@" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 61 bytes</h1>
<pre class="lang-r prettyprint-override"><code>f=\(b,p=l,l=sum(b|1))sum(if(p&gt;0)1+f(b,min((1:l-b)[1:l+b&gt;p])))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGq0tykotScnMRi26WlJWm6Fjdt02xjNJJ0CmxzdHJsi0tzNZJqDDU1QYzMNI0COwNNQ-00oHxuZp6GhqFVjm6SZjSQ0k6yK4jV1NSEGvIYbqxGsoaljpGOoY4xkDQBsTQ1FZQVdO0UDLmQFRnqoECYIgsURSBzTKAYZCJcmRGKMlOIJBiDoBl2ZSApI6gSY1RrTRRQVJog1CCMgnh1wQIIDQA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><strong>Ungolfed code</strong></p>
<pre><code>f=function(b,p=1){ # begin at position p=1
    l=length(b)
    s=1:l-b+1 # start positions of umbrellas
    e=1:l+b-1 # end positions of umbrellas
    if(p&gt;l)0  
    else 1+f(b,max(e[s&lt;=p])+1) 
              # update position to 
              # furthest end of umbrella  
              # with start before current position
}
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>16</s> 13 bytes</h1>
<p>-3 thanks to @KevinCruijssen</p>
<pre><code>gDδα›æʒøOß}øg
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/3eXclnMbHzXsOrzs1KTDO/wPz689vCP9//9oIx1DHRMoNtQx1jGMBQA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<pre><code>g         # push the length
D         # twice
δα        # create the 2D array a[i][j] = abs(i-j)
›         # compare each value to the correct value in the input
æ         # take the powerset
ʒ         # and keep sets such that:
 ø         # if transposed
 O         # and summed
 ß         # the minimum value
}         # (is 1)
ø         # transpose
g         # and return the length
</code></pre>
<p>Requiring that the minimum is 1 is valid because in an optimal solution exactly one umbrella covers the leftmost position.</p>
<p>Transposing and then taking the length finds the minimum length, due to the way transposing works on different-sized arrays.</p>
<p><code>δ›Å\</code> really feels like it can be shorter, but I can't find anything.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>18</s> 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>x&lt;Ls-ā©+æʒ˜®åP}øg
</code></pre>
<p>-1 byte thanks to <em>@CommandMaster</em>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f@/wsanWPdI46GV2oeXnZp0es6hdYeXBtQe3pH@/3@0kY6hjgkUG@oY6xjGAgA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeX/ChufYt0jjYdWah9edmrS6TmH1h1eGlB7eEf6f53/0dGWOkY6hjrGQNIExIrViTbUQYFAEZAKEygGqQWJmUJYYAyCZrGxAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>x&lt;      # Calculate the width of each umbrella:
x       #  Double each value in the (implicit) input-list (without popping)
 &lt;      #  Decrease each by 1
Ls-ā©+  # Convert each to 1-based ranges it can cover:
L       #  Convert each inner value to a [1,value]-ranged list
 s-     #  Subtract the values of the input-list from each value of the lists
   ā +  #  Add the 1-based indices
    ©   #  And also store the list of 1-based indices in variable `®`
æʒ˜®åP} # Get all combinations of umbrellas that cover the entire beach:
æ       #  Get the powerset of this list of lists
 ʒ    } #  Filter it by:
  ˜     #   Flatten the list of lists
   ®åP  #   Check whether it contains all 1-based indices of value `®`
øg      # Output the least amount of umbrellas necessary to cover the beach:
ø       #  Zip/transpose; swapping rows/columns,
        #  discarding any trailing items of unequal length lists
 g      #  Pop and push the length
        # (which is output implicitly as result)
</code></pre>
<p><a href="https://tio.run/##VY6hTgNBEIY9TzE52624FkUgFRU1TVrfIGa3Q2@TvV2yMwtFIHgFNBYSDJKgryh4qOO216ZBjJr/@/4/MGpLbVtM0ZnkUAikIri3a6kg3AChqSDVOpJzeAGF2l5eNZ@Ts2Ia/B1F6QMSoBxqZFpDRL8hBitg0IMJXShjcx5@PzXvgx6ekQA6171rbT2KDZ5z27GIuxEoPb3fQ15sJNC5Let2bz/Pvy/Nx@51@dgrF0luk@zDjpA7fx2Sl/9WT4aYMT7kxSf7Sfu1mbTtaqRKdX64Uo1Vef0H" rel="nofollow noreferrer">Try it step-by-step.</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/266049/">266049</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




