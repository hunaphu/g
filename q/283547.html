<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::283547</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>045</td><td>Jelly</td><td>250907T124601Z</td><td><a href="https://codegolf.stackexchange.com/questions/283547/autocomplete-a-word-at-the-cursor-position/283565#283565">Jonathan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 45 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>RFḟ@ḣ1⁸;
ẹⱮŻç/⁼⁹JŻ¤,LƲʋÐṀ⁹fƇLÐṂfṚȯÆṃ'{ʋ⁸ḣ⁵¤Ḣȯ
</code></pre>
<p>A full program that accepts the existing words, <code>e</code>, the word at the cursor, <code>w</code>, and the zero index of <code>w</code>, <code>i</code>, and prints the result to stdout.</p>
<p><a href="https://tio.run/##AXwAg/9qZWxsef//UkbhuJ9A4bijMeKBuDsK4bq54rGuxbvDpy/igbzigblKxbvCpCxMxrLKi8OQ4bmA4oG5ZsaHTMOQ4bmCZuG5msivw4bhuYMne8qL4oG44bij4oG1wqThuKLIr////1siYWJjZCIsICJhcmNzIl3/ImNhIv8w" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a> Or see the <strong><a href="https://tio.run/##fVJNb9QwEL33V4w2lRDSSqhnqMSJA@qJC0KIg2M7G@8mdrAdlsBlFyQ47IUTEt8SrLSCQyt62lBOWVpV/RfOH1nG3qiCUpHDxO/Nm/Hz2EOeZdV6feeWW3666ZZfdtrp8vqW@1G33/ePj1aLa@30Zzutbx8fNfP@3snh2Wz1ytUTpJKTl3t@/Sxx9dvTg9ULVz@/8vRshg2wT7PfzN3y8@nB2i0Pd9vJh6hZiJ128qb56up3yP2arT56erVw9TdXv97e7mPl3WY@bCfv4cYuYPLqvfX6fs@mHDjRWQWx0AwG3BqwEYyVznv9LegV3HINhShCpKMICBScjkAlAWecIS4wbf6TudiFs9AcN4/gYYkExFqNJSTqMQzLvDCgHqHUm8vIkwqYGoQCJmiaKa2YKFIuq8zqjuA2JZKD8CZoynNBSQZKi4GQBO8AhLRcMnSUKI3AcGoFFYyjXjJfRlWeK4nKkfRGiAHGbBQ2zYmsQJdS@pPgP/SocGgGYo5r7n2iQvrZ5EQTmyoZKg36N/gGDHATASK/jKtwLsMJMlgdlKkaQ17SFAevGIYyY9jMA5pGeKKSjoIuJsjHlPFkACxONgYJfjF@EBO0EAfOS1DXic/pMfEXMSZJiFHHdQhCtuM6dK5NLs9sDISdNMVp0s4SjeAPFsO/9IVS2tmh5NLSv@gNUxaRf2yWE8QPfgM" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a></strong> (employs the register, <code>®</code>, in place of <code>⁵</code> to allow multiple tests.).</p>
<h4>How?</h4>
<pre><code>ẹⱮŻç/⁼⁹JŻ¤,LƲʋÐṀ⁹fƇ... - Main Link: e, w
             ʋÐṀ⁹      - keep those x of e maximal under f(x, w):
ẹⱮ                     -   all 1-indices of each c of w in x
  Ż                    -   prefix this list of lists with a zero
   ç/                  -   reduce by last Link (RFḟ@ḣ1⁸;) as a dyad, see below
                         -&gt; MatchIndices
            Ʋ          -   last four links as a monad - f(MatchIndices)
     ⁼                 -     {MatchIndices} equals...
      ⁹JŻ¤             -     ...indices of w prefixed with a zero? -&gt; StartsWithW
          ,            -     paired with...
           L           -     length -&gt; [StartsWithW, MatchCount]
                 fƇ    - only keep those with any match
                         -&gt; PotentialMatches (ready for tie-breaks)

RFḟ@ḣ1⁸; - Helper Link, get MatchIndices: CurrentMatchIndices, NextIndices = [e.indices_of(c)]
R        - {CurrentMatchIndices} Range -&gt; [[1..v] for v in CurrentMatchIndices]
 F       - flatten
  ḟ@     - filter from {NextIndices}
    ḣ1   - head to 1-index 1 (no-op given an empty list)
      ⁸; - concatenate to {CurrentMatchIndices}

LÐṂfṚȯÆṃ'{ʋ⁸ḣ⁵¤Ḣȯ - ...Main Link continued:PotentialMatches
LÐṂ               - keep those of minimal length -&gt; ShortestMatches
           ⁸ḣ⁵¤   - get WordsLeftOfCursor
          ʋ       - last four links as a monad -&gt; f(ShortestMatches, WordsLeftOfCursor):
   f              -   {ShortestMatches} filter keep {WordsLeftOfCursor}
    Ṛ             -   reverse
     ȯ            -   logical OR... (i.e. if empty)
      Æṃ'{        -   ...mode of {ShortestMatches} -&gt; Most frequent(s), in left-right order
               Ḣ  - head -&gt; WinningMatch or 0 if none found
                ȯ - logical OR {w}
                  - implicit print
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/283547/">283547</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




