<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::278319</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>130</td><td>Charcoal</td><td>250221T102538Z</td><td><a href="https://codegolf.stackexchange.com/questions/278319/9-queens-and-least-obstacles/278326#278326">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 130 bytes</h1>
<pre><code>≔Ｅ⁸Ｅ⁸Ｅ²⁴⟦⁻ι﹪ν⁸⁺λ×﹪ν⁸⊖÷ν⁸⟧θＦ⁷Ｆ⁷«≔⟦υ⟧ηＦ⁸Ｆ⎇⁻λι⟦⁸⟧⟦κ…⊕κ⁸⟧«≔ηζ≔⟦⟧ηＦμ«≔§§θλνεＷ№ε⟦ικ⟧≔⁻ε§§θικεＦζ¿⁼ξ⁻ξε⊞η⁺ξ⟦⟦λν⟧⟧»»Ｆη«ＤＥ⁸⭆⁸§.Q№λ⟦μξ⟧ＪκιKＤ⎚
</code></pre>
<p><a href="https://tio.run/##bZGxbsIwEIZn8hSnTLbkdqgqNVInBB1ohURbNovBIoZYcRxwYppS8ezp2UkIA1Ii23fn7/99t82E3ZZCt@20qtTekKU4kITBzfL0zIAvlXEVURgpU6dLYhgklDJYaQxrBmtVyIrcJhnM5dbKQppapmRh6rk6qVT2NyndUH//SF@jXWmBvFAY1r9o0pvhbsMgw5JJyCV9zVpaI@wv6UyhukIST7CW5wy@hNlLFBzFc@o1UdCjB3bG4OzJV61BqtMquuIhO60XJpXNdT0y0Eg1@MtwafKTKS2BzEpnaiLRCjYr95pDY4NZTNxBef85HVnBwZmC2gF5OzqhK9Jg6wOh8VWIXbkq848IE8Ag59gIs0FFj7hE/gucrHvJ3BUHEnIrq9BiP@HvGk/7/jBYih8/YwbdU5DKCwaNn1fHfkfSuiS59z3y4o84nEadmZbChu0lurRt@3DS/w" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Uses <code>K</code> as the obstacle, as I felt that was appropriate for chess. Explanation:</p>
<pre><code>≔Ｅ⁸Ｅ⁸Ｅ²⁴⟦⁻ι﹪ν⁸⁺λ×﹪ν⁸⊖÷ν⁸⟧θ
</code></pre>
<p>For each square, calculate the squares on higher rows of the board (and also a bunch of squares that aren't on the board) that are attacked. (Since queens are placed starting at the top and working down, and two queens are never placed in the same row unless the obstacle is between then, we only need to check for potential queens attacking existing queens in higher rows.)</p>
<pre><code>Ｆ⁷Ｆ⁷«
</code></pre>
<p>Loop over all possible squares for the obstacle, plus some impossible ones.</p>
<pre><code>≔⟦υ⟧η
</code></pre>
<p>Start with no queens placed so far.</p>
<pre><code>Ｆ⁸Ｆ⎇⁻λι⟦⁸⟧⟦κ…⊕κ⁸⟧«
</code></pre>
<p>Loop through all rows, but split the row with the obstacle so it is looped over twice (since there will be two queens on this row).</p>
<pre><code>≔ηζ≔⟦⟧η
</code></pre>
<p>Save the list of sets of queens placed so far and start a new list.</p>
<pre><code>Ｆμ«
</code></pre>
<p>Loop over the squares of this row or part row.</p>
<pre><code>≔§§θλνεＷ№ε⟦ικ⟧≔⁻ε§§θικε
</code></pre>
<p>Get the squares attacked by this potential queen, but if the obstacle is attacked, remove it and the relevant squares above it.</p>
<pre><code>Ｆζ
</code></pre>
<p>Loop over the sets of queens in the saved list.</p>
<pre><code>¿⁼ξ⁻ξε⊞η⁺ξ⟦⟦λν⟧⟧
</code></pre>
<p>If none of the existing queens are attacked by this potential queen then add the new set to the new list.</p>
<pre><code>»»Ｆη«
</code></pre>
<p>Loop over all of the found sets of queens for this obstacle.</p>
<pre><code>Ｄ
</code></pre>
<p>Leave a blank line between boards.</p>
<pre><code>Ｅ⁸⭆⁸§.Q№λ⟦μξ⟧ＪκιKＤ
</code></pre>
<p>Output the board.</p>
<pre><code>⎚
</code></pre>
<p>Clear the canvas ready for the next board.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/278319/">278319</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




