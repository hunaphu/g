<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::66851</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>037</td><td>TIBASIC TI84 Plus CE Python</td><td>250916T160418Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/283722#283722">madeforl</a></td></tr>
<tr d-ix="1"><td>049</td><td>Maxima</td><td>230912T062310Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/265149#265149">138 Aspe</a></td></tr>
<tr d-ix="2"><td>008</td><td>Nekomata + n</td><td>230912T055213Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/265147#265147">alephalp</a></td></tr>
<tr d-ix="3"><td>013</td><td>MATL</td><td>151217T120726Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66863#66863">Luis Men</a></td></tr>
<tr d-ix="4"><td>052</td><td>Haskell</td><td>180317T200119Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/159471#159471">flawr</a></td></tr>
<tr d-ix="5"><td>012</td><td>Stax</td><td>190517T212604Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/185752#185752">recursiv</a></td></tr>
<tr d-ix="6"><td>090</td><td>BrainFlak</td><td>190517T171940Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/185742#185742">Nitrodon</a></td></tr>
<tr d-ix="7"><td>012</td><td>05AB1E</td><td>190514T150429Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/185574#185574">Grimmy</a></td></tr>
<tr d-ix="8"><td>026</td><td>Pari/GP</td><td>151217T122206Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66866#66866">alephalp</a></td></tr>
<tr d-ix="9"><td>034</td><td>Mathematica</td><td>151217T091133Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66855#66855">alephalp</a></td></tr>
<tr d-ix="10"><td>030</td><td>Mathematica</td><td>151218T000537Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66981#66981">Greg Hur</a></td></tr>
<tr d-ix="11"><td>044</td><td>ES6</td><td>151217T222944Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66961#66961">Neil</a></td></tr>
<tr d-ix="12"><td>013</td><td>Jelly</td><td>151217T134648Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66872#66872">Dennis</a></td></tr>
<tr d-ix="13"><td>050</td><td>Ruby</td><td>151217T145439Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66877#66877">Level Ri</a></td></tr>
<tr d-ix="14"><td>020</td><td>CJam</td><td>151217T085945Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66853#66853">Peter Ta</a></td></tr>
<tr d-ix="15"><td>058</td><td>Retina</td><td>151217T094219Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66857#66857">Martin E</a></td></tr>
<tr d-ix="16"><td>064</td><td>R</td><td>151217T100129Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66860#66860">plannapu</a></td></tr>
<tr d-ix="17"><td>015</td><td>Pyth</td><td>151217T095745Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66859#66859">Jakube</a></td></tr>
<tr d-ix="18"><td>051</td><td>Python 2</td><td>151217T095023Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66858#66858">xnor</a></td></tr>
<tr d-ix="19"><td>021</td><td>Seriously</td><td>151217T082424Z</td><td><a href="https://codegolf.stackexchange.com/questions/66851/motzkin-numbers/66852#66852">user4594</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>TI-BASIC (TI-84 Plus CE Python), 37 bytes</h1>
<pre><code>Input N
N+1
Ans⁻¹Σ(Ans nCr K(Ans-K) nCr (K-1),K,1,int(.9+.5Ans
</code></pre>
<p>uses this equation:
<span class="math-container">$$
a(n)=\frac{\sum_{k=1}^{\left\lceil \frac{n+1}{2} \right\rceil}(\binom{n+1}{k}\binom{n+1-k}{k-1})}{n+1}
$$</span></p>
</div>
<div id="pu1" class="pu"><h1><a href="http://maxima.sourceforge.net/" rel="nofollow noreferrer">Maxima</a>, 49 bytes</h1>
<p>Use the formula</p>
<p><span class="math-container">\$
M_n=\frac{1}{n+1}\cdot[z^{n+2}](1+x+x^2)^n
\$</span></p>
<pre><code>f(n):=coeff(expand((1+x+x^2)^(n+1)),x,n+2)/(n+1);
</code></pre>
<p><a href="https://tio.run/##HcxBCoMwEEbhvaf4ERczJNImy5T2KEJQQ104CcHC3D5V3@7bvD3qtsfWEgmH95zXlGjVEmUhckaNTp4nEuOYrVoxnh@3Xi3lCgkOx7f@4J9YMqjDWambHCQWPcYPeovrzR0P7Q8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a> + <code>-n</code>, 8 bytes</h1>
<pre><code>3$ŧ←∫Ɔž≥
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFNtJJurpKOgpJunlLsgqWlJWm6FhuNVY4uf9Q24VHH6mNtR_c96ly6pDgpuRgqu2CLIZcRlzGXCZcplxmXOZcFlyWXoQFEDgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>3$ŧ←∫Ɔž≥    Let n be the input
3$ŧ         Find an n-tuple of integers in [0, 3)
   ←        Decrement each element
    ∫       Take the cumulative sum
     Ɔž     Check that the last element is 0
       ≥    And that each element is non-negative
</code></pre>
<p><code>-n</code> counts the number of solutions.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://esolangs.org/wiki/MATL" rel="nofollow noreferrer">MATL</a>, 13 <s>14</s> bytes</h1>
<pre><code>i-2/t.5+hH4Zh
</code></pre>
<h3>Example:</h3>
<pre><code>&gt;&gt; matl i-2/t.5+hH4Zh
&gt; 6
51
</code></pre>
<p><em>EDIT (June 16, 2017): you can <a href="https://tio.run/##y00syfn/P1PXSL9Ez1Q7w8MkKuP/fzMA" rel="nofollow noreferrer"><strong>try it online!</strong></a> Note also that in modern versions of the language (that post-date this challenge) the <code>i</code> could be removed.</em></p>
<h3>Explanation</h3>
<p>Pretty straightforward, using <a href="http://mathworld.wolfram.com/MotzkinNumber.html" rel="nofollow noreferrer">the equivalence</a> (see equation (10)) with the <a href="https://en.wikipedia.org/wiki/Hypergeometric_function" rel="nofollow noreferrer">hypergeometric function</a>:</p>
<p><span class="math-container">$$M_n = {}_2F_1 \left( \frac {1-n} 2, -\frac n 2 ; 2 ;4 \right)$$</span></p>
<p>From the definition of the hypergeometric function</p>
<p><span class="math-container">$${}_2F_1(a,b; c; z) = \sum ^ \infty _ {n=0} \frac {(a)_n (b)_n} {(c)_n} \frac {z^n} {n!}$$</span></p>
<p>it's clear that the order of the first two arguments can be interchanged, which saves one byte.</p>
<pre><code>i         % input                                                   
-2/       % divide by -2
t.5+      % duplicate and add 0.5
h         % horizontal concatenation into a vector                               
H         % number 2
4         % number literal                                          
Zh        % hypergeometric function with three inputs (first input is a vector)
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>55</s> 52 bytes</h1>
<p>Straightforward implementation of the recursion. Thanks @Delfad0r for -3 bytes!</p>

<pre class="lang-hs prettyprint-override"><code>a n|n&gt;2=div((2*n+1)*a(n-1)+(3*n-3)*a(n-2))$n+2
a n=n
</code></pre>
<p><a href="https://tio.run/##Jcq9CoAgFAbQvae4Q4M/KKmzvUg0XChI0g@paOrdLWg8cDY@9zXn1pjwYPRxSbcQXkE7qVjAOKlFUDDhp5eyh/bd1yNa4QSKVI@Ei3oqXIlpcta6YW4v" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 12 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>îu¬@Y≤ÅÉÑ(πε
</code></pre>

<p><a href="https://staxlang.xyz/#p=8c75aa4059f38f90a528e3ee&amp;i=1%0A2%0A3%0A4%0A5%0A6%0A7%0A8%0A9%0A10&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>

<p>I don't know how to do fancy math typesetting, but this essentially relies on a dynamic programming construction</p>

<pre><code>M(0) = 1
M(1) = 1
M(n + 1) = M(n) + sum(M(k) * M(n - k - 1) for k in [0..n-1])
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DJMcMayhem/Brain-Flak" rel="nofollow noreferrer">Brain-Flak</a>, 90 bytes</h1>

<pre><code>(([{}]&lt;(())&gt;)&lt;{({}()&lt;{&lt;&gt;([({})]({}[({})]({}&lt;&gt;{}&lt;&gt;)))&lt;&gt;}&lt;&gt;&gt;)}&gt;){({}()&lt;{}&gt;)}{}({}{}[{}{}]&lt;&gt;)
</code></pre>

<p><a href="https://tio.run/##PYoxCoBADAS/s1sI2od85LjiLARRLGxD3h7XQoudnWLWe@zXtJ3jqAJaZDeAdFogEjpzNCm78Iv5O5Lmemc6v16ashDai66uapkf" rel="nofollow noreferrer" title="Brain-Flak – Try It Online">Try it online!</a></p>

<p>Computes <span class="math-container">\${\binom{n}{0}}_2 - {\binom{n}{2}}_2\$</span>, where <span class="math-container">\$\binom{n}{k}_2\$</span> is a <a href="http://mathworld.wolfram.com/TrinomialCoefficient.html" rel="nofollow noreferrer">trinomial coefficient</a>.  I couldn't find this formula anywhere, so I can't reference it, but it can be proved in the same way as the analogous formula <span class="math-container">\$C_n = \binom{2n}{n} - \binom{2n}{n+1}\$</span>.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>13</s> 12 bytes</h1>

<pre><code>ÝI&lt;ãʒ.øDŸQ}g
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f//8FxPm8OLT03SO7zD5eiOwNr0///NAA" rel="nofollow noreferrer">Try it online!</a></p>

<p>While most answers use a formula or recurrence relation, this is a simple counting approach.</p>

<p>Each possible path through the grid is represented by the list of its y coordinates. For n segments, there are a total of (n+1) points, but the first and last one are necessarily 0, so that leaves (n-1) points to specify.</p>

<pre><code>Ý           # range [0..n]
 I&lt;         # n - 1
   ã        # cartesian power
</code></pre>

<p>We now have a list of paths (not yet including the initial and final 0). By construction, none of them ever go below 0. However, some of them have illegal slopes (e.g. jump from 0 to 2), so we need to filter them out.</p>

<pre><code>ʒ      }g   # count how many paths satistfy the following condition
 0.ø        # surround with 0
      Q     # is equal to
    DŸ      # its own fluctuating range
</code></pre>

<p><code>Ÿ</code> is the <a href="https://codegolf.stackexchange.com/questions/74855/fluctuating-ranges/">fluctuating range</a> built-in. If there's any pair of non-adjacent numbers, it will fill in the missing numbers (e.g. [0, 2] becomes [0, 1, 2]). Only legal paths will be left unchanged.</p>

<p>A perhaps more intuitive way to check for illegal slopes would be <code>üαà</code> (assert the maximum of pairwise absolute differences equals 1). However, this misses the flat [0, 0, ... 0] path, which costs one extra byte to fix.</p>

<p>Finally, note that the actual code uses <code>.ø</code> where this explanation uses <code>0.ø</code>. Instead of surrounding the path with 0s, this surrounds the implicit input with two copies of the path. This turns the coordinate system upside-down and inside-out, but is otherwise equivalent.</p>
</div>
<div id="pu8" class="pu"><h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow noreferrer">Pari/GP</a>, <s>38</s> <s>36</s> 26 bytes</h1>

<pre><code>n-&gt;(1+x+x^2)^n++/n\x^n++%x
</code></pre>

<p><a href="https://tio.run/##K0gsytRNL/ifpmD7P0/XTsNQu0K7Is5IMy5PW1s/L6YCRKtW/E/LL9LIU7BVMNRRMDLQUSgoyswrAQooKejaAYk0jTxNTc3/AA" rel="nofollow noreferrer" title="Pari/GP – Try It Online">Try it online!</a></p>

<p>Using equation (11) from <a href="http://mathworld.wolfram.com/MotzkinNumber.html" rel="nofollow noreferrer">MathWorld</a>:</p>

<p>\$ M_n = \dfrac{1}{n + 1} \dbinom{n + 1}{1}_2 \$</p>

<p>where \$ \binom{n}{k}_2 \$ is a <a href="http://mathworld.wolfram.com/TrinomialCoefficient.html" rel="nofollow noreferrer">trinomial coefficient</a>. By definition, \$ \binom{n}{k}_2 \$ is the coefficient of \$ x^{n + k} \$ in the expansion of \$ (1 + x + x^2)^n \$.</p>
</div>
<div id="pu9" class="pu"><h1>Mathematica, <s>44</s> <s>42</s> 34 bytes</h1>

<pre><code>Sum[#!/(i!(i+1)!(#-2i)!),{i,0,#}]&amp;
</code></pre>

<p>A 35 bytes version:</p>

<pre><code>Coefficient[(1+x+1/x)^#,x]/#&amp;[#+1]&amp;
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Mathematica, <s>31</s> 30 bytes</h1>

<pre><code>AppellF1[-#/2,.5,-#/2,2,4,4]&amp;
</code></pre>

<p>For fun, here's a 37 byte version</p>

<pre><code>Hypergeometric2F1[(1-#)/2,-#/2,2,4]&amp;
</code></pre>

<p>and 52 byte version</p>

<pre><code>SeriesCoefficient[1-x-Sqrt[1-2x-3x^2],{x,0,#+2}]/2&amp;
</code></pre>
</div>
<div id="pu11" class="pu"><h2>ES6, 44 bytes</h2>

<pre><code>f=(n,k=0)=&gt;n&lt;1?1:k&lt;n&amp;&amp;f(k)*f(n-2-k)+f(n,k+1)
</code></pre>

<p>Straightforward port of @xnor's recursive Python solution. Needs <code>n&lt;1?1:</code> because <code>n&lt;1||</code> would make <code>f(0)</code> return <code>true</code>.</p>
</div>
<div id="pu12" class="pu"><h1><a href="http://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>17</s> <s>14</s> 13 bytes</h1>

<pre><code>×US;
1;HÇƓ¡1ị
</code></pre>

<p>This uses the recurrence relation from <a href="https://codegolf.stackexchange.com/a/66853">@PeterTaylor's answer</a>. <a href="http://jelly.tryitonline.net/#code=w5dVUzsKMTtIw4fGk8KhMeG7iw&amp;input=MTA" rel="nofollow noreferrer">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>×US;      Define a helper link. Left argument: a (list)

×U        Multiply (×) a by its reverse (U).
  S       Compute the sum of the resulting list.
   ;      Prepend it to a.
          Return the result.

1;HÇƓ¡1ị  Define the main link.

1         Set the left argument to 1.
 ;H       Append the half of 1 to 1. Result: [1, 0.5].
    Ɠ     Read an integer n from STDIN.
   Ç ¡    Call the helper link (Ç) n times.
      1ị  Retrieve the result at index 1.
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Ruby, 50</h1>
<p>straightforward implementation of the recurrence relation.</p>
<pre><code>g=-&gt;n{n&lt;2?1:(3*(n-1)*g[n-2]+(2*n+1)*g[n-1])/(n+2)}
</code></pre>
</div>
<div id="pu14" class="pu"><h2>CJam (20 bytes)</h2>

<pre><code>.5X]{__W%.*:++}qi*W=
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=.5X%5D%7B__W%25.*%3A%2B%2B%7Dqi*W%3D&amp;input=10" rel="nofollow">Online demo</a></p>

<p>As Mego noted in the comments on the question, this is very closely related to the Catalan numbers: change the <code>.5</code> to <code>1</code> and offset the index by one (or simply remove the <code>.5</code> entirely and leave the index unchanged) to get Catalan numbers.</p>

<p>The recurrence used is</p>

<blockquote>
  <p>a(n+2) - a(n+1) = a(0)*a(n) + a(1)*a(n-1) + ... + a(n)*a(0). [Bernhart]</p>
</blockquote>

<p>from the OEIS page. The corresponding recurrence for the <a href="https://oeis.org/A000108" rel="nofollow">Catalan numbers</a> is listed as</p>

<blockquote>
  <p>a(n) = Sum_{k=0..n-1} a(k)a(n-1-k).</p>
</blockquote>
</div>
<div id="pu15" class="pu"><h2><a href="https://github.com/mbuettner/retina" rel="nofollow noreferrer">Retina</a>, <s>59</s> 58 bytes</h2>

<pre><code>+`(\D*)1(1*)
:$1&lt;$2:$1&gt;$2:$1_$2:
:(_|()&lt;|(?&lt;-2&gt;)&gt;)+:(?!\2)
</code></pre>

<p>Takes input in <a href="http://meta.codegolf.stackexchange.com/questions/5343/can-numeric-input-output-be-in-unary">unary</a>. Input 7 (i.e. <code>1111111</code>) takes quite a while but still completes in less than a minute. I wouldn't go much further than that.</p>

<p><a href="http://retina.tryitonline.net/#code=K2AoXEQqKTEoMSopCjokMTwkMjokMT4kMjokMV8kMjoKOihffCgpPHwoPzwtMj4pPikrOig_IVwyKQ&amp;input=MTExMTE" rel="nofollow noreferrer">Try it online.</a></p>

<h3>Explanation</h3>

<p>A different characterisation of the Motzkin numbers is the number of strings of three different characters, where two of them are correctly balanced (hence the close relation to Catalan numbers, which are the same without the third character which is independent of the balancing).</p>

<p>.NET's balancing groups are pretty good at detecting correctly matched strings, so we simply generate <em>all</em> strings of length <code>N</code> (using <code>_</code>, <code>&lt;</code> and <code>&gt;</code> as the three characters) and then we count how many of those are correctly balanced. E.g. for <code>N = 4</code> the valid strings are:</p>

<pre><code>____
__&lt;&gt;
_&lt;_&gt;
_&lt;&gt;_
&lt;__&gt;
&lt;_&gt;_
&lt;&gt;__
&lt;&lt;&gt;&gt;
&lt;&gt;&lt;&gt;
</code></pre>

<p>Compared with the definition in the challenge, <code>_</code> corresponds to a <code>(1,0)</code> step, <code>&lt;</code> to <code>(1,1)</code> and <code>&gt;</code> to <code>(1,-1)</code>.</p>

<p>As for the actual code, the <code>:</code> is used as a separator between the different strings. The second regex is just a golfed form <a href="https://stackoverflow.com/a/17004406/1633117">of the standard .NET regex for balanced strings</a>.</p>

<p>Something to note is that there is only a single <code>:</code> inserted between strings in each step, but the second regex matches a leading <em>and</em> a trailing <code>:</code> (and since matches cannot overlap, this means that adjacent strings generated from one template in the last step cannot both match). However, this is not a problem, because at most one of those three can ever match:</p>

<ul>
<li>If the string ending in <code>_</code> matches, the prefix without that <code>_</code> is already balanced correctly, and <code>&lt;</code> or <code>&gt;</code> would throw off that balance.</li>
<li>If the string ending in <code>&gt;</code> matches, the string is balanced <em>with</em> that <code>&gt;</code>, so <code>_</code> or <code>&lt;</code> would throw off that balance.</li>
<li>Strings ending in <code>&lt;</code> can never be balanced.</li>
</ul>
</div>
<div id="pu16" class="pu"><h1>R, 64 bytes</h1>
<pre><code>f=function(n)ifelse(n&lt;2,1,f(n-1)+sum(rev(s&lt;-sapply(2:n-2,f))*s))
</code></pre>
<p>Uses also the Mathworld formula of <a href="https://codegolf.stackexchange.com/a/66858/6741">@xnor's python answer</a>.
Thanks to rules of precedence, <code>2:n-2</code> is equivalent to <code>0:(n-2)</code>.</p>
<p>Test cases:</p>
<pre><code>&gt; f(0)
[1] 1
&gt; f(1)
[1] 1
&gt; f(5)
[1] 21
&gt; f(10)
[1] 2188
&gt; sapply(0:20,f)
 [1]        1        1        2        4        9       21       51      127
 [9]      323      835     2188     5798    15511    41835   113634   310572
[17]   853467  2356779  6536382 18199284 50852019
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Pyth, 15 bytes</h1>

<pre><code>Ls*V+KyMb1+t_K1
</code></pre>

<p>This defines a function <code>y</code>. Try it online: <a href="https://pyth.herokuapp.com/?code=Ls%2aV%2BKyMb1%2Bt_K1%0Ay1%0Ay2%0Ay3%0Ay10%0Ay100&amp;debug=0">Demonstration</a></p>

<h3>Explanation:</h3>

<p>Let <code>y[n]</code> be the <code>n</code>-th Motzkin Number. I calculate <code>y[n]</code> with the formula </p>

<pre><code>y[n] = dot product of (y[0], ..., y[n-1], 1) and (y[n-2], ..., y[0], 1)
</code></pre>

<p>Notice that the first vector is larger than the second one (except when calculating <code>y[0]</code>). When this is the case, than Pyth automatically ignores the 1 at the end of the first vector, so that both vectors are of equal length. </p>

<pre><code>Ls*V+KyMb1+t_K1
L                 define a function y(b), which returns:
      yMb            compute the list [y[0], y[1], ..., y[b-1]]
     K               assign it to K
  *V                 vectorized multiplication of
    +K   1             * K with a 1 at the end
          +t_K1        * reverse(K), remove the first element, and append 1
 s                   return the sum (dot product)
</code></pre>

<p>This formula is a variation of one of the formulas listed on OEIS. It may be a little bit stupid. Because of the 1 at the end of the first vector (which make the lengths unequal), I don't actually have to give the recursion a base case. And I had hopes, that the two <code>+...1</code>s can be golfed somehow. Turns out I can't. </p>

<p>You can define a similar recursion with a dot product of equal length vectors and define the base case <code>y[0] = 1</code> with with the same byte count. </p>
</div>
<div id="pu18" class="pu"><h2>Python 2, 51 bytes</h2>

<pre class="lang-python prettyprint-override"><code>M=lambda n:n&lt;1or sum(M(k)*M(n-2-k)for k in range(n))
</code></pre>
<p>Uses the formula from Mathworld</p>
<p><a href="https://i.sstatic.net/SmW6i.gif" rel="noreferrer"><img src="https://i.sstatic.net/SmW6i.gif" alt="enter image description here" /></a></p>
<p>Saves chars by putting the <code>M[n-1]</code> term into the summation as <code>k=n-1</code>, which gives <code>M[-1]*M[n-1]</code>, with <code>M[-1]=1</code> as part of the initial condition.</p>
<p>Edit: One char shorter writing the sum recursively:</p>
<pre class="lang-python prettyprint-override"><code>M=lambda n,k=0:n&lt;1or k&lt;n and M(k)*M(n-2-k)+M(n,k+1)
</code></pre>
<p>Other approaches that turned out longer:</p>
<pre class="lang-python prettyprint-override"><code>M=lambda n,i=0:n and(i&gt;0)*M(n-1,i-1)+M(n-1,i)+M(n-1,i+1)or i==0
M=lambda n:+(n&lt;2)or(3*~-n*M(n-2)+(n-~n)*M(n-1))/(n+2)
</code></pre>
</div>
<div id="pu19" class="pu"><h2>Seriously, 21 bytes</h2>
<pre><code>,;╗r`;τ╜█@;u@τ╣║\*`MΣ
</code></pre>
<p>Borrows some code from <a href="https://codegolf.stackexchange.com/a/66150/45941">quintopia's Catalan Numbers solution</a>, specifically the improvement I made in the comments.</p>
<p>I use the following formula:</p>
<p><a href="https://i.sstatic.net/kw3LZ.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/kw3LZ.png" alt="motzkin formula" /></a></p>
<p>Since <code>nCk</code> is 0 for <code>k &gt; n</code>, I sum all the way to <code>n-1</code>, since those values will all be 0 and thus do not affect the sum.</p>
<p><a href="http://seriouslylang.herokuapp.com/link/code=2c3bbb72603be7bddb403b7540e7b9ba5c2a604de4&amp;input=5" rel="nofollow noreferrer">Try it online</a></p>
<p>Explanation:</p>
<pre><code>,;╗r`;τ╜█@;u@τ╣║\*`MΣ
,;╗                    push input, dupe, store one copy in register 0
   r                   push range(0, n) ([0,n-1])
    `             `M   map the function:
     ;τ╜█@               dupe k, push C(n, 2*k), swap with k
          ;u@τ╣║\        push the kth Catalan number
                 *       multiply
                    Σ  sum
   
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/66851/">66851</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




