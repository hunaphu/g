<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::50870</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>013</td><td>Vyxal</td><td>240910T234910Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/275469#275469">emanresu</a></td></tr>
<tr d-ix="1"><td>175</td><td>Java 7</td><td>161019T093104Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/96718#96718">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>135</td><td>Python 3</td><td>150527T210724Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50881#50881">Kade</a></td></tr>
<tr d-ix="3"><td>071</td><td>rs</td><td>150527T193310Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50874#50874">kirbyfan</a></td></tr>
<tr d-ix="4"><td>087</td><td>Julia</td><td>150529T193917Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50988#50988">Alex A.</a></td></tr>
<tr d-ix="5"><td>041</td><td>Perl/Bash 54 40+1 =</td><td>150527T192813Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50872#50872">amon</a></td></tr>
<tr d-ix="6"><td>025</td><td>CJam</td><td>150528T003035Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50888#50888">Dennis</a></td></tr>
<tr d-ix="7"><td>nan</td><td>Pip</td><td>150528T040221Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50892#50892">DLosc</a></td></tr>
<tr d-ix="8"><td>027</td><td>CJam</td><td>150527T193729Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50876#50876">Optimize</a></td></tr>
<tr d-ix="9"><td>083</td><td>Javascript ES6</td><td>150527T194645Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50877#50877">nderscor</a></td></tr>
<tr d-ix="10"><td>098</td><td>Python 2.7</td><td>150528T013439Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50890#50890">recursiv</a></td></tr>
<tr d-ix="11"><td>112</td><td>JavaScript</td><td>150527T215402Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50882#50882">wolfhamm</a></td></tr>
<tr d-ix="12"><td>028</td><td>Pyth</td><td>150527T205518Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50880#50880">Jakube</a></td></tr>
<tr d-ix="13"><td>073</td><td>Ruby</td><td>150527T193703Z</td><td><a href="https://codegolf.stackexchange.com/questions/50870/expand-an-encoded-string/50875#50875">Cristian</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 13 bytes</h1>
<pre><code>`.+?\d`Ẏ⟑ṫ⌊*₴
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCJgLis/XFxkYOG6juKfkeG5q+KMiirigrQiLCIiLCIxM2FhMmExYjEiXQ==" rel="nofollow noreferrer">Try it Online!</a> -1 thanks to lyxal.</p>
<pre><code>       Ẏ      # Find all matches of the regex
`.+?\d`       # &quot;.+?\d&quot; - as few characters as possible, then a digit
        ⟑     # Over each match
         ṫ⌊   # Remove the last character and convert it to an int
           *  # and repeat the rest of the string by that
            ₴ # Print the result
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Java 7, 175 bytes</h1>
<pre><code>String c(String s){String r=&quot;&quot;,a[];for(String x:s.split(&quot;(?&lt;=(\\d)(?!\\d))&quot;)){a=x.split(&quot;&quot;);for(int i=0,j,l=a.length-1;i&lt;l;i++)for(j=0;j++&lt;new Short(a[l]);r+=a[i]);}return r;}
</code></pre>
<p>The challenge is harder than it looks, imo..</p>
<p><strong>Ungolfed &amp; test code:</strong></p>
<p><a href="https://ideone.com/23ghQx" rel="nofollow noreferrer">Try it here.</a></p>
<pre><code>class M{
  static String c(String s){
    String r = &quot;&quot;,
           a[];
    for(String x : s.split(&quot;(?&lt;=(\\d)(?!\\d))&quot;)){
      a = x.split(&quot;&quot;);
      for(int i = 0, j, l = a.length-1; i &lt; l; i++){
        for(j = 0; j++ &lt; new Short(a[l]); r += a[i]);
      }
    }
    return r;
  }

  public static void main(String[] a){
    System.out.println(c(&quot;ab3c5&quot;));
    System.out.println(c(&quot;a0b3&quot;));
    System.out.println(c(&quot;13b1&quot;));
    System.out.println(c(&quot;a13b1&quot;));
    System.out.println(c(&quot;a123b1&quot;));
    System.out.println(c(&quot;aa2a1b1&quot;));
    System.out.println(c(&quot;123&quot;));
  }
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>aaabbbccccc
bbb
111b
aaa111b
aaa111222b
aaaaab
111222
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Python 3, <s>148</s> <s>144</s> <s>136</s> 135 Bytes</h1>



<pre class="lang-py prettyprint-override"><code>w,o,r,d=''.join,'',[],[]
for c in input()+' ':
 if'/'&lt;c&lt;':':d+=[c]
 elif d:o+=w(x*int(w(d))for x in r);r=[c];d=[]
 else:r+=[c]
print(o)
</code></pre>

<p><em>Thanks to Pietu1998 and mbomb007 for the suggestions.</em></p>

<h1>Python 2, <s>161</s> <s>151</s> <s>147</s> <s>139</s> 138 Bytes</h1>

<p>Maybe today's just been a long day at work, but I can't for the life of me figure out how to golf this..</p>

<pre class="lang-py prettyprint-override"><code>w,o,r,d=''.join,'',[],[]
for c in raw_input()+' ':
 if'/'&lt;c&lt;':':d+=[c]
 elif d:o+=w(x*int(w(d))for x in r);r=[c];d=[]
 else:r+=[c]
print o
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/kirbyfan64/rs" rel="nofollow">rs</a>, <strike>43</strike> 71 chars</h1>

<p>Well, this turned long quickly. Stupid numbers...</p>

<pre><code>(\d)(\D)/\1 \2
+(\w)(\w+?)(\d)(?= |$)/\1\3 \2\3
(\w)(\d)/(\1)^^(\2)
 /
</code></pre>

<p><a href="http://kirbyfan64.github.io/rs/index.html?script=(%5Cd)(%5CD)%2F%5C1%20%5C2%0A%2B(%5Cw)(%5Cw%2B%3F)(%5Cd)(%3F%3D%20%7C%24)%2F%5C1%5C3%20%5C2%5C3%0A(%5Cw)(%5Cd)%2F(%5C1)%5E%5E(%5C2)%0A%20%2F%0A&amp;input=a123b1a3b2c5%0A" rel="nofollow">Try it here!</a></p>

<p>Original version (did not work with input like <code>123</code>):</p>

<pre><code>+(\D)(\D+)(\d)/\1\3\2\3
(\D)(\d)/(\1)^^(\2)
</code></pre>

<h2>Explanation</h2>

<p>The first line places spaces between runs containing numbers, e.g. turning <code>a313</code> into <code>a3 13</code>.</p>

<p>The second line continuously expands the compressed encodings like <code>aa5</code> to <code>a5a5</code>.</p>

<p>The third line converts every instance of <code>a5</code> into <code>aaaaa</code> using the <a href="https://github.com/kirbyfan64/rs#repetition" rel="nofollow">repetition operator</a>.</p>

<p>The last line removes the spaces.</p>
</div>
<div id="pu4" class="pu"><h1>Julia, <s>105</s> <s>99</s> <s>95</s> 87 bytes</h1>



<pre class="lang-matlab prettyprint-override"><code>s-&gt;join([join([string(b)^(int(p[end])-48)for b=chop(p)])for p=matchall(r"\D*\d*\d",s)])
</code></pre>

<p>This creates an unnamed function that takes a string as input a returns a string. To call it, give it a name, e.g. <code>f=s-&gt;...</code>.</p>

<p>Two array comprehensions are used here, one nested within the other. The outer comprehension acts on each match of the input string against the regular expression <code>\D*\d*\d</code>. The inner comprehension repeats each character of the match according to the trailing digit. The elements of the inner array are joined into a string, so the outer array is an array of strings. These are joined and returned.</p>

<p>In Julia, strings can be treated like character arrays. However, note that the <code>Char</code> and <code>String</code> types in Julia don't have the same methods defined; in particular, there is no method for repetition using <code>^</code> for characters. This uses a convoluted workaround:</p>

<ul>
<li>Loop over the string omitting the last character, which is removed using <code>chop()</code>.</li>
<li>Convert the current character to a string using <code>string()</code>.</li>
<li>Convert the trailing digit, which is also a character, into an integer. However, note that, for example, <code>int('4')</code> does not return 4. Rather, it returns the codepoint, which in this case is 52. Thus we can subtract 48 to get back the actual integer.</li>
<li>Repeat <code>string(b)</code> according to <code>int(p[end]) - 48</code>.</li>
</ul>

<p>Examples:</p>

<pre class="lang-matlab prettyprint-override"><code>julia&gt; f("ab3c5")
"aaabbbccccc"

julia&gt; f("a0b3")
"bbb"

julia&gt; f("13b1")
"111b"
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Perl/Bash <del>54</del> 40+1 = 41 bytes</h2>

<pre><code>perl -pe's:(\D*\d*)(\d):"\$1=~s/./\$&amp;x$2/egr":ege'
</code></pre>

<p>It's basically a regex within a regex. And a bit of magic.</p>

<h3>Explanation</h3>

<p>The outer regex <code>/(\D*\d*)(\d)/g</code> extracts each run-length encoded group. We capture the stuff to repeat in <code>$1</code> and the number of repetitions in <code>$2</code>. Now we substitute each such group with the expansion of that group. For that, we evaluate the code <code>"\$1=~s/./\$&amp;x$2/egr"</code> <em>two</em> times (as by the <code>/ee</code> flag on the outer substitution).</p>

<p>The first evaluation will only interpolate the number of repetitions into the string – the other variables are protected by a backslash. So assuming the input <code>a14</code>, we would now have the code <code>$1=~s/./$&amp;x4/egr</code>, which will be evaluated again.</p>

<p>This will apply the substitution to the contents of <code>$1</code> (the stuff to repeat <code>a1</code>). The substitution matches each character <code>.</code>. The <code>$&amp;</code> variable holds the whole match, which we repeat <code>x4</code> times. We do this <code>/g</code>lobally for each match and <code>/r</code>eturn the substituted string rather than modifying the <code>$1</code> variable (which is read-only). So the result of the inner substitution is <code>aaaa1111</code>.</p>

<p>The <code>-p</code> flag applies the substitution to each input line and prints out the result.</p>
</div>
<div id="pu6" class="pu"><h1>CJam, <s>27</s> 25 bytes</h1>

<pre><code>r_'A+1&gt;.{64&amp;1$&gt;{])~f*o}&amp;}
</code></pre>

<p>Try it online in the <a href="http://cjam.aditsu.net/#code=r_&#39;A%2B1%3E.%7B64%261%24%3E%7B%5D)~f*o%7D%26%7D&amp;input=a123b1" rel="nofollow">CJam interpreter</a>.</p>

<h3>How it works</h3>

<pre><code>r_                        e# Read a token from STDIN and push a copy.
  'A+                     e# Append the character A to the copy.
     1&gt;                   e# Discard the first character of the copy.
       .{               } e# For each character C of the input string and the
                          e# corresponding character D of the copy:
         64&amp;              e#   Take the bitwise and of D and 64. This pushes @
                          e#   if D is a letter and NUL if it is a digit.
            1$&gt;           e#   Compare the result to a copy of C. This pushes 1
                          e#   if and only if D is a letter and C is a digit.
               {      }&amp;  e#   If the result was 1, do the following:
                ]         e#     Wrap the stack in an array.
                 )~       e#     Pop and evaluate the last character.
                   f*     e#     Repeat each char in the array that many times.
                     o    e#     Print all characters.
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Pip, 22 + 1 = 23 bytes</h1>

<p>Uses <code>-r</code> flag. Note that this requires you to either 1) enter an EOF after the input (Ctrl-D on Linux, Ctrl-Z on Windows) or 2) pipe the input in from somewhere else.</p>

<pre><code>(^_@&lt;v)X_@vMa@`\D*\d+`
</code></pre>

<p>Explanation:</p>

<pre><code>                        a is first line of stdin (from -r flag) and v is -1 (implicit)
              `\D*\d+`  Pattern (regex) object that matches zero or more non-digits
                        followed by at least one digit
            a@          Find all non-overlapping matches in a, returning a list of strings
           M            To that list, map a lambda function:
  _@&lt;v                    Argument sans last character (equivalent to Python a[:-1])
(^    )                   Split into a list of characters
        _@v               Last character of argument
       X                  Repeat each character of the list that many times
                          (String multiplication X, like most operators, works item-wise
                          on lists)
                        Auto-print (implicit)
</code></pre>

<p>The result of the map operation is actually a list of lists, but by default lists are simply concatenated together when printed, so no manual conversion to string is necessary.</p>

<p>Example, with input <code>a13b1</code>:</p>

<pre><code>Var a gets        "a13b1"
After regex match  ["a13" "b1"]
After map          [["aaa" "111"] ["b"]]
Final output       aaa111b
</code></pre>

<p>Pip has basic regex support as of... <a href="https://github.com/dloscutoff/pip/commit/5d2b2bb483e0875ecd33182756e96635934d760f" rel="nofollow">2 days ago</a>. Great timing!</p>
</div>
<div id="pu8" class="pu"><h1>CJam, <s>33 31</s> 27 bytes</h1>

<p>Ughh, lack of regular expressions makes this pretty long...</p>

<pre><code>qN+{:XA,s&amp;L\:L&gt;{])~e*[}&amp;X}%
</code></pre>

<p><strong>How it works</strong></p>

<p>We loop through all characters of the input string and in each iteration, keep track of the last encountered character (starting with an empty character for the first time). Then we check if the current character is non-numeric <em>and</em> the last character is numeric. If so, we repeat each previous character (which has not been repeated already), the number times.</p>

<p>(A bit outdated code expansion)</p>

<pre><code>q{                       }%        e# Read the input (q) and loop through each character
  L                                e# Put variable L (initially empty character) on stack
   A,                              e# Put variable A (equals 10) and create an array 0..9
     s                             e# Convert the array to string "0123456789"
      &amp;                            e# Do a set intersect b/w previous char and 0-9 string
                                   e# If numeric, it gives 1 char string, otherwise 0
       \:LA,s&amp;                     e# Swap to bring current character on top. Store it in L
                                   e# and do the same set intersect with it
              &gt;                    e# Means we are checking that current char is non-numeric
                                   e# and previous numeric
               {      }&amp;           e# Run this block if above is true
                ])~                e# Wrap everything not already repeated in an array and
                                   e# take out the last character and convert it to integer.
                                   e# This is the run length of the preceding string
                   e*              e# Repeat each character in the string, run length times
                     [             e# Start a new array to help when next run length is found
                        L          e# Restore the current character back on stack to be used
                                   e# in next iteration
                           )~e*    e# The last string-run-length pair is not decoded..
                                   e# So we do that now
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=q%7BLA%2Cs%26%5C%3ALA%2Cs%26%3E%7B%5D)~e*%5B%7D%26L%7D%25)~e*&amp;input=a14f2h3b5c1" rel="nofollow">Try it online here</a> </p>
</div>
<div id="pu9" class="pu"><h1>Javascript (<em>ES6</em>), <strike>86</strike> 83 bytes</h1>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>alert(prompt().replace(/(.+?)(\d)(?!\d)/g,(a,b,c)=&gt;b.replace(/./g,y=&gt;y.repeat(c))))</code></pre>
</div>
</div>
</p>

<p><strong>Commented:</strong></p>

<pre class="lang-js prettyprint-override"><code>alert( // output final result
    prompt(). // take input
    replace(/(.+?)(\d)(?!\d)/g, // replace ungreedy capture group of any characters 
                                // followed by a digit (captured)
                                // and not followed by a digit (negative lookahead)
        (a, b, c)=&gt; // replace with a function
            b.replace(/./g, // replace all characters in b
                y=&gt;y.repeat(c) // with that character repeated c times
            )
    )
)
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Python 2.7, 98 bytes</h1>



<pre class="lang-python prettyprint-override"><code>import re
print"".join(c*int(m[-1])for m in 
re.findall(r".+?\d(?!\d)",raw_input())for c in m[:-1])
</code></pre>

<p>This just does a simple regex search for digits that aren't followed by a digit, and then does the string arithmetic on each group and joins them all back together.</p>
</div>
<div id="pu11" class="pu"><h1>JavaScript 112</h1>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>alert(prompt().replace(/.*?\d+/g,function(m){for(i=n=m.length-1,o="";i--;){j=m[n];while(j--)o=m[i]+o}return o}))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu12" class="pu"><h1>Pyth, <s>33</s> <s>32</s> 28 bytes</h1>

<pre><code>ssmm*vedkPdPcz-hMJf&lt;@zT\=UzJ
</code></pre>

<p>Try it online: <a href="https://pyth.herokuapp.com/?code=ssmm*vedkPdPcz-hMJf%3C%40zT%5C%3DUzJ&amp;input=aa2a1b1&amp;debug=0" rel="nofollow">Demonstration</a> or <a href="https://pyth.herokuapp.com/?code=zFz.zp%22+-%3E+%22z%0Assmm*vedkPdPcz-hMJf%3C%40zT%5C%3DUzJ&amp;input=Test-cases%3A%0Aa3b2c5%0Aab3c5%0Aa0b3%0A13b1%0Aa13b1%0Aa123b1%0Aaa2a1b1&amp;debug=0" rel="nofollow">Test harness</a></p>

<h3>Explanation</h3>

<p>I'll explain the code using the example input <code>aa1a23b2</code>. Hopefully this is a bit easier to follow than without. </p>

<pre><code>                               implicit: z = input string = 'aa1a23b2'
                         Uz    the indices of z: [0, 1, 2, 4, 5, 6, 7]
                  f            filter for indices T, which satisfy:
                   &lt;@zT\=        z[T] &lt; "="
                               this gives us the list of indices [2, 4, 5, 7], 
                               which correspond to digits in z. 
                 J             assignment, J = [2, 4, 5, 7]
               hMJ             increment all element in J: [3, 5, 6, 8]
              -            J   and remove the elements of J:
                                 [3, 5, 6, 8] - [2, 4, 5, 7] = [3, 6, 8]
            cz                 split z at these indices: ['aa1', 'a23', 'b2', '']
           P                   remove last element: ['aa1', 'a23', 'b2']
  m                            map each string d to:
   m     Pd                      map each string k of d-without-last-char to:
     ved                           int(last element of d)
    *   k                          * k
                               this creates [['a', 'a'], ['aaa', '222'], ['bb']]
 s                             sum the lists: ['a', 'a', 'aaa', '222', 'bb']
s                              sum the strings: 'aaaaa222bb'
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Ruby 73</h1>

<pre class="lang-rb prettyprint-override"><code>gets.split(/(\d)(?!\d)/).each_slice(2){|s,i|s.chars.map{|c|$&gt;&lt;&lt;c*i.to_i}}
</code></pre>
<p>Tests: <a href="http://ideone.com/L1fssb" rel="nofollow noreferrer">http://ideone.com/L1fssb</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/50870/">50870</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




