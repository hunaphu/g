<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::93127</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>065</td><td>Swift 5.9</td><td>240321T222856Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272023#272023">macOSist</a></td></tr>
<tr d-ix="1"><td>039</td><td>Python 3</td><td>240322T143436Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272036#272036">Jitse</a></td></tr>
<tr d-ix="2"><td>070</td><td>Python</td><td>240322T104524Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272033#272033">Nicola S</a></td></tr>
<tr d-ix="3"><td>026</td><td>Wolfram Language Mathematica</td><td>240322T092703Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272031#272031">att</a></td></tr>
<tr d-ix="4"><td>070</td><td>JavaScript Node.js</td><td>240322T035253Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272029#272029">l4m2</a></td></tr>
<tr d-ix="5"><td>029</td><td>Juby</td><td>240321T193752Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/272020#272020">Jordan</a></td></tr>
<tr d-ix="6"><td>156</td><td>Java 7</td><td>161118T152916Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/100321#100321">Kevin Cr</a></td></tr>
<tr d-ix="7"><td>4728</td><td>R</td><td>160915T064919Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93285#93285">Billywob</a></td></tr>
<tr d-ix="8"><td>028</td><td>Perl 6</td><td>160914T153325Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93205#93205">Brad Gil</a></td></tr>
<tr d-ix="9"><td>034</td><td>Clojure</td><td>160913T191122Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93142#93142">mark</a></td></tr>
<tr d-ix="10"><td>089</td><td>JavaScript ES6</td><td>160914T124932Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93190#93190">Neil</a></td></tr>
<tr d-ix="11"><td>084</td><td>php</td><td>160914T084637Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93168#93168">user5917</a></td></tr>
<tr d-ix="12"><td>035</td><td>Perl</td><td>160914T075655Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93164#93164">Ton Hosp</a></td></tr>
<tr d-ix="13"><td>107</td><td>Python 3</td><td>160913T180530Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93130#93130">Beta Dec</a></td></tr>
<tr d-ix="14"><td>077</td><td>Python 2</td><td>160913T200702Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93148#93148">mbomb007</a></td></tr>
<tr d-ix="15"><td>052</td><td>PowerShell v2+</td><td>160913T194649Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93147#93147">AdmBorkB</a></td></tr>
<tr d-ix="16"><td>005</td><td>Jelly</td><td>160913T182029Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93133#93133">miles</a></td></tr>
<tr d-ix="17"><td>009</td><td>CJam</td><td>160913T180404Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93129#93129">Martin E</a></td></tr>
<tr d-ix="18"><td>012</td><td>Brachylog</td><td>160913T175616Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93128#93128">Fatalize</a></td></tr>
<tr d-ix="19"><td>032</td><td>Mathematica</td><td>160913T181350Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93132#93132">Martin E</a></td></tr>
<tr d-ix="20"><td>005</td><td>05AB1E</td><td>160913T180627Z</td><td><a href="https://codegolf.stackexchange.com/questions/93127/shuffle-a-mapping/93131#93131">Emigna</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Swift 5.9, 65 bytes</h1>
<pre class="lang-swift prettyprint-override"><code>let f={(k:[(Int,Int)])in[]+zip(k.map(\.0),k.map(\.1).shuffled())}
</code></pre>
<p>Takes input as an <code>Array</code> of tuples, because I'd have to convert a native <code>Dictionary</code> into an array of tuples anyway.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 39 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda d:{i:d[s]for i,s in zip(d,{*d})}
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/6fZhvzPycxNyklUSHFqjrTKiW6ODYtv0ghU6dYITNPoSqzQCNFp1orpVaz9n9BUWZeiUaaRrW6gbqVuqGBuo6CuiGcZQpkmarXamr@BwA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>This works because string hashes are randomized in Python.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>73</s> 70 bytes</h1>
<p>-3 thanks to <a href="https://codegolf.stackexchange.com/users/44718/tsh">@tsh</a></p>
<pre class="lang-python prettyprint-override"><code>lambda d:dict(zip(d,sample([*d.values()],len(d))))
from random import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vweI025ilpSVpuhY33XISc5NSEhVSrFIyk0s0qjILNFJ0ihNzC3JSNaK1UvTKEnNKU4s1NGN1clLzNFI0gYArrSg_V6EoMS8FSGXmFuQXlWhBTYsrKMrMK9FI06hWSsvPV7JSMNBRUEpKLAKyDMGsKiDLqBZoBkKhm78_VKGTYxCU5QsWM0RRCORAbFmwAEIDAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Pretty straightforward. I think this is valid Python 3.5 (available at the time of the OP).</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 26 bytes</h1>
<pre><code>RandomSample~SubsetMap~All
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7PygxLyU/NzgxtyAntS64NKk4tcQ3saDOMSfnf0BRZl5JtLKunXN@aV5JsUNIYlJOanSag7KOoQEQxMaq1QUnJ@bVVXPZ1Bjq2hnqKBjp2hnpKBjr2hnX2HHV/gcA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Input an <a href="https://reference.wolfram.com/language/ref/Association.html" rel="nofollow noreferrer"><code>Association</code></a>, Mathematica's built-in mapping type.</p>
<p>Since <a href="https://reference.wolfram.com/language/ref/SubsetMap.html" rel="nofollow noreferrer"><code>SubsetMap</code></a> acts on a <code>List</code> of values of the subset, keys stay in place while values are shuffled. For some reason, it seems like <code>SubsetMap</code> does not consider <code>;;</code> a valid <code>Span</code> of all elements, so we use <code>All</code> instead.</p>
<p><code>SubsetMap</code> was introduced in 2019 (v12.0), postdating this challenge.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 70 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=a=&gt;a[b=1/Math.random()|0]?f(a,t=a[b][1],a[b][1]=a[0][1],a[0][1]=t):a
</code></pre>
<p><a href="https://tio.run/##NYy7EoIwEEV7vmLLZAiYFDRi9AtsbDMpIiQ@BhIGMjaIvx4XB6u7594z@zQvMzXjY4iFD61NyUkjj0ZdpdidTbyXo/Ft6Al9c31yxLAocdRKaLYlMt/4lzLSvUkXO4GEeakzF0YgjY@IvIb1OICwVQ15jkBhzgBiP@DsiFKcCa4ZKMGEWLNiFdeaooMfFXoaxeLzh2zJmuCn0NmyCzeCNU1f" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/cyoce/J-uby" rel="nofollow noreferrer">J-uby</a>, 29 bytes</h1>
<p>Takes a Hash, returns an array of key-value pairs.</p>
<pre class="lang-ruby prettyprint-override"><code>:zip%[:keys,:values|:shuffle]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700K740qXLBIjfbpaUlaboWe62qMgtUo62yUyuLdazKEnNKU4trrIozStPSclJjIWp2Fii4RVcb2NoZGugoGEIoU1s701qo_IIFEBoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2><a href="https://github.com/cyoce/J-uby" rel="nofollow noreferrer">J-uby</a>, 37 bytes</h2>
<p>Takes a Hash, returns a Hash.</p>
<pre class="lang-ruby prettyprint-override"><code>(:zip|:to_h)%[:keys,:values|:shuffle]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700K740qXLBIjfbpaUlaboWN1U1rKoyC2qsSvLjMzRVo62yUyuLdazKEnNKU4trrIozStPSclJjIYp3Fii4RVcb2NoZGugoGEIoU1s701qo_IIFEBoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu6" class="pu"><h1>Java 7, 156 bytes</h1>
<pre><code>import java.util.*;void c(Map m){List t=new ArrayList(m.values());Collections.shuffle(t);Iterator i=t.iterator();for(Object k:m.keySet())m.put(k,i.next());}
</code></pre>
<p><strong>Ungolfed:</strong></p>
<pre><code>void c(Map m){
  List t = new ArrayList(m.values());
  Collections.shuffle(t);
  Iterator i = t.iterator();
  for(Object k : m.keySet()){
    m.put(k, i.next());
  }
}
</code></pre>
<p><strong>Test code:</strong></p>
<p><a href="http://ideone.com/YWlSLH" rel="nofollow noreferrer">Try it here.</a></p>
<pre><code>import java.util.*;
class M{
  static void c(Map m){List t=new ArrayList(m.values());Collections.shuffle(t);Iterator i=t.iterator();for(Object k:m.keySet())m.put(k,i.next());}
  
  public static void main(String[]a){
    for(int i=0;i&lt;10;i++){
      Map m=new HashMap();
      m.put(0, 10);
      m.put(1, 10);
      m.put(5, 5);
      c(m);
      System.out.println(m);
    }
  }
}
</code></pre>
<p><strong>Possible output:</strong></p>
<pre><code>{0=5, 1=10, 5=10}
{0=10, 1=10, 5=5}
{0=10, 1=5, 5=10}
{0=10, 1=10, 5=5}
{0=10, 1=10, 5=5}
{0=10, 1=10, 5=5}
{0=10, 1=10, 5=5}
{0=10, 1=10, 5=5}
{0=10, 1=5, 5=10}
{0=5, 1=10, 5=10}
</code></pre>
</div>
<div id="pu7" class="pu"><h2>R,  47 (28) bytes</h2>
<p>A bit late to the party but though I'd post a solution in R using builtins.</p>
<p>The closest thing R has to an array with key/value mapping is a <code>list</code>. The following function takes a <code>list</code> object as input and outputs a list with its values shuffled.</p>
<pre><code>function(x)return(setNames(sample(x),names(x)))
</code></pre>
<h3>Explained</h3>
<p>The builtin <code>setNames()</code> can assign names to objects by inputting a <code>R-vector</code> of names. Hence, first shuffle the <code>list</code> by <code>sample()</code> which shuffles the pairs, and then assign the names in the original order using <code>names()</code>.</p>
<p>Example:</p>
<pre><code>z  &lt;- list(fish = 1, dog = 2, cat = 3, monkey = 4, harambe = 69)

f=function(x)return(setNames(sample(x),names(x)))
f(z)

$fish
[1] 3

$dog
[1] 1

$cat
[1] 2

$monkey
[1] 69

$harambe
[1] 4
</code></pre>
<hr />
<p>If <code>x</code> is assumed to be defined there's no need for function wrapping and the program reduces to 28 bytes.</p>
<pre><code>setNames(sample(x),names(x))
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://perl6.org" rel="nofollow">Perl 6</a>, 28 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{%(.keys.pick(*)Z=&gt;.values)}
</code></pre>

<p>Input is a <a href="https://docs.perl6.org/type/Hash" rel="nofollow">Hash</a><br>
( Technically any value with a <a href="https://docs.perl6.org/routine/keys" rel="nofollow"><code>.keys</code> method</a> and a <a href="https://docs.perl6.org/routine/values" rel="nofollow"><code>.values</code> method</a> would work, but the output is a <a href="https://docs.perl6.org/type/Hash" rel="nofollow">Hash</a> )</p>

<h2>Explanation:</h2>

<pre class="lang-perl6 prettyprint-override"><code># bare block lambda with implicit parameter ｢$_｣
{

  # turn the list of key =&gt; value Pairs into a Hash
  %(
      # get the keys from ｢$_｣ ( implicit method call on ｢$_｣ )
      .keys

      # get all of the keys in random order
      .pick(*)

    # zip using ｢&amp;infix:« =&gt; »｣ the Pair constructor
    Z[=&gt;]

      # the values from ｢$_｣ ( implicit method call on ｢$_｣ )
      .values
  )
}
</code></pre>

<hr>

<p>A variant that would work for the other built in Hash like object types is:</p>

<pre class="lang-perl6 prettyprint-override"><code>{.WHAT.(.keys.pick(*)Z=&gt;.values)}
</code></pre>

<p><code>.WHAT</code> on an object returns the type.</p>
</div>
<div id="pu9" class="pu"><h2>Clojure, <s>40</s> 34 bytes</h2>

<pre><code>#(zipmap(keys %)(shuffle(vals %)))
</code></pre>

<p>Takes the keys and values from m (a map), shuffles the values and zips them up into a map.</p>
</div>
<div id="pu10" class="pu"><h2>JavaScript (ES6), 89 bytes</h2>

<pre><code>a=&gt;a.map((_,i)=&gt;[i,Math.random()]).sort((a,b)=&gt;a[1]-b[1]).map(([i],j)=&gt;[a[j][0],a[i][1]])
</code></pre>
</div>
<div id="pu11" class="pu"><h1>php, 84 bytes</h1>

<pre><code>&lt;?= serialise(array_combine(array_keys($a=unserialize($argv[1])),shuffle($a)?$a:0));
</code></pre>

<p>Takes input as a serialised array, outputs the same.</p>
</div>
<div id="pu12" class="pu"><h1>Perl, 35 bytes</h1>

<p>Includes +2 for <code>-0p</code></p>

<p>Give each keys/value separated by space on a STDIN line</p>

<pre><code>shuffle.pl
1 5
3 8
9 2
^D
</code></pre>

<p><code>shuffle.pl</code>:</p>

<pre><code>#!/usr/bin/perl -p0
@F=/ .*/g;s//splice@F,rand@F,1/eg
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Python 3, 107 bytes</h1>

<p>Uses Python's native dictionary structure.</p>

<p>Thanks to @mbomb007 for saving a byte.</p>

<pre class="lang-py prettyprint-override"><code>from random import*
def f(d,o={}):
 i=list(d.values());shuffle(i)
 for k in d.keys():o[k]=i.pop()
 return o
</code></pre>

<p><a href="https://ideone.com/edtMdt" rel="nofollow"><strong>Ideone it!</strong></a></p>
</div>
<div id="pu14" class="pu"><h1>Python 2, 77 bytes</h1>
<p>Uses this option: <em>If you input an array or a map, you can modify the original object instead of returning</em>. Input is a dictionary literal like <code>{0: 10, 1: 10, 5: 5}</code>.</p>
<pre class="lang-python prettyprint-override"><code>from random import*
D=input()
k=D.keys()
shuffle(k)
D=dict(zip(k,D.values()))
</code></pre>
<p><a href="https://repl.it/D8xr" rel="nofollow noreferrer"><strong>Try it online</strong></a></p>
<p><em>Inspiration taken from <a href="https://stackoverflow.com/a/17997978/2415524">this SO answer</a>.</em></p>
</div>
<div id="pu15" class="pu"><h2>PowerShell v2+, 52 bytes</h2>

<pre><code>param($a)$a|%{$_[1]}|sort {random}|%{$a[$i++][0],$_}
</code></pre>

<p>Takes input as an array of tuples, which is significantly shorter than using a hash (which would require <code>.GetEnumerator()</code> and whatnot to work).</p>

<p>We loop the input array <code>|%{...}</code>, each iteration pulling out the second element <code>$_[1]</code>. Those are piped into <code>Sort-Object</code> with the <code>{Get-Random}</code> as the sorting key. This will assign a random weight from <code>0</code> to <code>[Int32]::MaxValue</code> to each element for sorting. Those are piped into another loop <code>|%{...}</code>, with each iteration outputting a tuple of the corresponding first element of the tuple and the sorted number.</p>

<h3>Examples</h3>

<p>The examples here have an additional <code>-join','</code> on the tuple output so it's shown better on the console, as the default output for multi-dimensional arrays is hard to read.</p>

<pre><code>PS C:\Tools\Scripts\golfing&gt; .\shuffle-a-mapping.ps1 ((0,10),(1,10),(5,5))
0,10
1,5
5,10

PS C:\Tools\Scripts\golfing&gt; .\shuffle-a-mapping.ps1 ((0,10),(1,10),(5,5))
0,10
1,10
5,5

PS C:\Tools\Scripts\golfing&gt; .\shuffle-a-mapping.ps1 ((1,1),(2,2),(3,3),(4,4),(5,5))
1,2
2,4
3,3
4,5
5,1
</code></pre>

<p>This works for non-integer values as well with no modifications.</p>

<pre><code>PS C:\Tools\Scripts\golfing&gt; .\shuffle-a-mapping.ps1 (('one','one'),('two','two'),('three','three'),('four','four'))
one,four
two,three
three,two
four,one
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="http://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 5 bytes</h1>

<pre><code>Ṫ€Ẋṭ"
</code></pre>

<p><a href="http://jelly.tryitonline.net/#code=4bmq4oKs4bqK4bmtIg&amp;input=&amp;args=W1swLCAxMF0sIFsxLCAxMF0sIFs1LCA1XV0" rel="noreferrer">Try it online!</a></p>

<h2>Explanation</h2>

<pre><code>Ṫ€Ẋṭ"  Input: list of [k, v] pairs
Ṫ€     Pop and return the last element of each k-v pair (modifies each list)
  Ẋ    Shuffle the list of v's
   ṭ"  Append each v back to a k and return
</code></pre>
</div>
<div id="pu17" class="pu"><h2>CJam, 9 bytes</h2>

<pre><code>{z)mra+z}
</code></pre>

<p>Input is a list of key-value pairs.</p>

<p><a href="http://cjam.aditsu.net/#code=%5B%5B0%2010%5D%20%5B1%2010%5D%20%5B5%205%5D%5D%0A%7Bz)mra%2Bz%7D%0A~p" rel="nofollow">Test it here.</a></p>

<h3>Explanation</h3>

<pre><code>z  e# Zip, to separate keys from values.
)  e# Pull off values.
mr e# Shuffle them.
a+ e# Append them to the array again.
z  e# Zip, to restore key-value pairs.
</code></pre>

<p>Alternative solution, same byte count:</p>

<pre><code>{[z~mr]z}
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="http://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, <s>13</s> 12 bytes</h1>
<pre><code>zt@~T,?zh:Tz
</code></pre>
<p><a href="http://brachylog.tryitonline.net/#code=enRAflQsP3poOlR6&amp;input=W1swOjEwXTpbMToxMF06WzU6NV1d&amp;args=Wg" rel="nofollow noreferrer">Try it online!</a></p>
<p>Expects a list of 2-element lists as input.</p>
<h3>Explanation</h3>
<pre><code>z              Zip the input to get a list of keys and a list of values
 t@~T,         Take the list of values, and shuffle it ; call that T
      ?zh      Zip the input to get the list of keys
         :Tz   Zip the list of keys with the list of shuffled values
</code></pre>
</div>
<div id="pu19" class="pu"><h2>Mathematica, 32 bytes</h2>

<pre><code>{#,RandomSample@#2}&amp;@@(#)&amp;
</code></pre>

<p>Input is a list of key-value pairs. <code></code> is Mathematica's transposition operator, and <code>RandomSample</code> can be used to shuffle a list.</p>
</div>
<div id="pu20" class="pu"><h1><a href="http://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, 5 bytes</h1>

<p>Input is a list of key-value pairs.</p>

<pre><code>ø       # zip into a list of keys and one of values
 `      # flatten
  .r    # randomize the values
    ø   # zip back again into a list of key-value pairs.
</code></pre>

<p><a href="http://05ab1e.tryitonline.net/#code=w7hgLnLDuA&amp;input=W1swLDEwXSxbMSwxMF0sWzUsNV1d" rel="noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/93127/">93127</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




