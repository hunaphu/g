<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::279018</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>072</td><td>Wolfram Language Mathematica</td><td>250424T082658Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279294#279294">att</a></td></tr>
<tr d-ix="1"><td>024</td><td>Uiua 0.16.0dev.1</td><td>250424T100607Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279297#279297">harana</a></td></tr>
<tr d-ix="2"><td>131</td><td>Python 3</td><td>250401T133050Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279023#279023">Jitse</a></td></tr>
<tr d-ix="3"><td>144</td><td>JavaScript ES6</td><td>250401T103943Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279020#279020">Arnauld</a></td></tr>
<tr d-ix="4"><td>135</td><td>Maple</td><td>250401T185929Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279026#279026">dharr</a></td></tr>
<tr d-ix="5"><td>205</td><td>Python3</td><td>250401T131455Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279022#279022">Ajax1234</a></td></tr>
<tr d-ix="6"><td>086</td><td>Charcoal</td><td>250401T221403Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279030#279030">Neil</a></td></tr>
<tr d-ix="7"><td>016</td><td>Jelly</td><td>250401T183911Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279025#279025">Jonathan</a></td></tr>
<tr d-ix="8"><td>017</td><td>05AB1E</td><td>250401T081646Z</td><td><a href="https://codegolf.stackexchange.com/questions/279018/all-possible-swaps-for-the-permutation/279019#279019">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 72 bytes</h1>
<pre><code>&lt;|D@@(p##)&amp;@@Cycles@*List/@#-&gt;#&amp;/@Permutations@Subsets[p=#,{2}]|&gt;@{}&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b736bGxcFBo@B9/zxlZU01BwfnyuSc1GIHLZ/M4hJ9B2VdO2U1fYeA1KLc0hKgnvy8Yofg0qTi1JLi6AJbZZ1qo9rYGjuH6lq1/wFFmXkl0UANaQ7KsWp1wcmJeXUo@oIS89JTHYy5iFRo8h8A" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Brute force. <code></code> is <a href="https://reference.wolfram.com/language/ref/PermutationProduct.html" rel="nofollow noreferrer"><code>\[PermutationProduct]</code></a>. Returns <code>Missing[&quot;KeyAbsent&quot;, {}]</code> if impossible.</p>
<p><code>D@@+p##</code> (1 byte shorter than <code>D@@(p##)</code>) seems to be interpreted incorrectly on the version on TIO, as <a href="https://tio.run/##y00syUjNTSzJTE78/z@gKDU5NSU1LzlVQd9BoTokMze1WEchILUot7QEqCQ/L6AoP6U0uaRWQV9fIaAoM6@EK03BwUFBO9Eh6X3/vGSHFDQJDbiEJlzm/38A" rel="nofollow noreferrer"><code>Times</code> should have lower precedence than <code>PermutationProduct</code></a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua 0.16.0-dev.1</a>, 24 bytes (<a href="https://t.ly/aly6S" rel="nofollow noreferrer">SBCS</a>)</h1>
<pre><code>⍣⊢0▽≡⌟(≍⍆⤙⤚∧⍜⊏⇌)⧅≠∞⧅₂&lt;°⊏
</code></pre>
<p>Input permutation as list. Returns a list of pairs or 0 if not possible.</p>
<p><a href="https://uiua.org/pad?src=0_16_0-dev_1__IyBFeHBlcmltZW50YWwhCmYg4oaQIOKNo-KKojDilr3iiaHijJ8o4omN4o2G4qSZ4qSa4oin4o2c4oqP4oeMKeKnheKJoOKInuKnheKCgjzCsOKKjwoKIyBzb21lIGV4YW1wbGVzCmYgWzIgMSAzXQpmIFsxIDIgM10KZiBbNCAzIDIgMV0KZiBbNCAxIDMgMl0KZiBbMSAyIDMgNF0KZiBbMSAyIDQgM10KIyB0ZXN0IGFsbCBjYXNlcyBvZiBuID0gNAorMeKnheKJoOKInuKHoTQK4p-c4o2aZgrijZomcOKNmiQiXyAtPiBfIgo=" rel="nofollow noreferrer">Pad link with tests</a></p>
<p>Explanation:</p>
<pre><code>⍣⊢0▽≡⌟(≍⍆⤙⤚∧⍜⊏⇌)⧅≠∞⧅₂&lt;°⊏
                      °⊏ # Pushes the [0, input length) array to the top of the stack, keeping the input
                ⧅≠∞⧅₂&lt;   # Get all permutations of ordered pairs of indices
    ≡⌟(        )         # For each permutation of pairs:
           ∧⍜⊏⇌          #   Perform each swap on the input
          ⤚              #   Keep the current permutation at the second position of the stack
       ≍⍆⤙               #   Checks if the modified array is sorted and returns a boolean
   ▽                     # Return an array of valid permutations of pairs
⍣                        # Run the first function, if it errors, run the second function
 ⊢                       # Returns the first list of pairs, or errors if there are none
  0                      # Outputs 0
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 131 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda a,*p:max([f(a[:i]+[a[j]]+a[i+1:j]+[a[i]]+a[j+1:],*p,(i,j))for i in a for j in a if((i,j)in p)*j&lt;j&gt;i]or[[p][a&gt;sorted(a):]])
</code></pre>
<p><a href="https://tio.run/##ZZLdboMwDIXv9xS@I2lZtfxcocGLRLnI1KIFUYiASdvTszhJQ6GoQtj@cuwc1/0t3@Mg1rWte3P/uhow5clVd/NLVEuMqqw@K6M6rc9G2TOruhDbEHc@1h4viS07SttxAgt2AAP42cVP25JQ9oGjp@6za6weJ6WcVqaZx2m5XYmhldZ0xVP9gMdGdxvIB63ewEeuhPFngdrXLrPr7UKKuilorEF4alB2WIil7wzyGL56mZfJOlIo0AVNh6n2J92EfEs8Q@mqJAjgwDTUDSghgfufACaB@TfXbx5giETAV8UrwBHZFASKPAEcsMnWguUuCWCAGkmBxRYHQCCSZ2B5jNwCNTYFfgQYNgD5PGTENgWBGrlFBMQGoE3y1ahoRQSwiTwa9Qygl/xo1AZ48bRUD6ShH7dqTT/fohOPJjkl84JSKixkT4Xrp/FzSubFpVTwYK8V/h57rbCMvVa42V4r7PRIiexASP0D" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>-16 bytes thanks to Mukundan314</p>
<p>-1 byte thanks to l4m2</p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES6), 144 bytes</h1>
<p>Expects a 0-indexed input. Returns either a list of pairs <code>&quot;i,j&quot;</code> or <code>0</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(a,p=o=[],q=(n=a.length)*~-n)=&gt;!q^a.some((x,i)=&gt;q?a.some((y,j)=&gt;i&lt;j&amp;!p.includes(k=i+[,j],d=[...a],d[i]=y,d[j]=x)&amp;&amp;f(d,o=[...p,k],q-2)):x-i)&amp;&amp;o
</code></pre>
<p><a href="https://tio.run/##bZNNc5swEIbv@RXKxSMaWdHHKWmVnnLJoT30qKEzGgOOCEXYOB370r/uCmSJxZgLSO@z@65WS23@mn6zt91h3bqiPJ8rhQ3plFM6JzuFW2VoU7bbw3v25d@6zdTL/e63ob37U2J8JNZv7L7H9YnUfm2/1av7jtp203wWZY8/lH3QpM5JoTSl1PgPbXN18q86V8dstapwQdwoduTD265Flj0f19ZL7vxV3yGkWU5Qeh4fkc7HXYJ4EvxuZZq@HAROEIOCZjwFECSCBAO8IFKyEIC4QEzkMR0M08xLAxBVkfxgUjGG8ZsChxGDm095ySdDLQEYVCERl2M5Eo3OEZuqHjDPiJvYVH7MJoaEM8wzMp3jgrHkmzA2YnzKxoLpEhOBnGpjqTxoGhKCbHyJXW7Nk7MjBHiWLXRcTqYBExALvZW32htal7DgKxftvcJkuuZ5eyHGounlpNeDl2ygIOH1zmYbdgMKAh4MChKOwNWAyqWHiEMjl4KEs5kEGdsllgKHgwWF@IOAvyO/o5Xbv5rNOzZIvaCNa3vXlLRxW/z26@cP2h/2tt3a6oRNRjtTvLYFfsoIqvw6y87/AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 135 bytes</h1>
<pre><code>proc(S)seq([(s:=&lt;S&gt;),seq((s[w]:=s[[w[2],w[1]]]),w=q),`if`(seq(s)={S[]}[],RETURN(q),0)],q=(c:=combinat):-permute(c:-choose(S,2)));0;end;
</code></pre>
<p>Input permutation as list. Output is list of lists, e.g., [[1, 2], [1, 3], [1, 4], [2, 4], [2, 3], [3, 4]], or 0 if not possible.</p>
<p>Ungolfed version:</p>
<pre><code>f:=proc(S)                                   # accepts a list
  p:=(c:=combinat):-permute(c:-choose(S,2)); # all permutations of combinations of 2 things from input
  for q in p do                              # for each list of swaps
    s:=&lt;S&gt;;                                  # make a Vector so can use smart indexing
    seq((s[w]:=s[[w[2],w[1]]]),w=q);         # do the swaps
    if seq(s)={S[]}[] then return q fi       # check the entries are 1,2,...,n; if so return list of swaps
  od;
  0                                          # return 0 if it can't be done.
end;
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Python3, 205 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(l):
 q=[(l,{(i,I)for i in range(len(l))for I in range(i+1,len(l))},[])]
 for l,o,p in q:
  if l==sorted(l)and not o:return p
  for i,I in o:L=[*l];A=L[i];L[i]=L[I];L[I]=A;q+=[(L,o-{(i,I)},p+[(i,I)])]
</code></pre>
<p><a href="https://tio.run/##ZZPBTsQgEIbP9ikme1nqogmlB7ObmnjcZOML1B5qSpUEgaX1YIzPvjJQ6bYmDSHD1/@fGQb7Nb4bzR@su1w60UNPVL7P4FzVRNFvIukx740DCVKDa/WbIEpoz4TocY7KHaPTyQ@tm7zJAAlFDbVInb0oyB5UVQ3GjaLzZKs70GYEs3di/HQarGeCGw3KZn@q6lvVHJ6qUy2bAy5@d8TdsameDuedT/NEzV1M9IfaXR123v8iP6w3AieyASrYbDZZXQKHAlgD1SPUvITCfxxYCcyvRYMAQyQC/pT/BwpEZgWOIldAAWgyW7DkMgEMUGNSYNFiBXBEUg4spZEsUGNWKNYAQwMor5OM2KzAUSNZRIDPALap/N@o2IoIoEm5btQ1gL0s1o2agfD/VEXfqkHEyv9EU6hMFzKFwgUsqVDulG4KlemiplCoeakVxmGpFZq/1AqVLLXCHa4pniqOIZy59Hh6qUbhyLPRgsJwP1glR7J90dvcv7eblsKrn1L5F0eRbZ7dWCf1SHpS3360lvg99QN930vdtUr537vdlkKb@4HPL78" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 86 bytes</h1>
<pre><code>ＦＬθＦι⊞υ⟦κι⟧≔⟦⟦θ⟦⟧⟧⟧ηＦη¿¬ⅈ«≔⊟ιζＦ⁻υζ«≔Ｅ⌊ι⎇№κμ§⌊ι⁻Σκμλε≔⁺ζ⟦κ⟧δ¿⬤ε∨⁼λμ⊙⁻υδ№νμ¿⁻υδ⊞η⟦εδ⟧⭆¹δ
</code></pre>
<p><a href="https://tio.run/##VZA/b8MgEMXn@FPceEhUatOxk1V1iNQ0ltKhksVgxcSgYByDqRpX@ezugd1/DCDe/XjvjoOq3KGrzDQdOwf4LG0zKOwZg3TXDIrgFQYO5YmDFuwhy73XjcWy7EkUQnBQpCZcMdBHwJduwDckj89stdBFdyYzDiOhq8RutQ0@Go8z@E1uq3Os6Ta06cWrdLZyF3zsgh2QmmhJzIeNreXHP3A23NPtxCJFm4mbjJE/fRhixjiNoFKdSrHl3BiUHHYOn/pQGY9mCbKX305rEuY2bAqgleb9Ayz/pSiB7Gr6L5DGSyicpmf7gY4mTniXYEq/ZtdpKstbDiStOdwLMd28my8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. <code>0</code>-indexed. Explanation:</p>
<pre><code>ＦＬθＦι⊞υ⟦κι⟧
</code></pre>
<p>Generate a list of all the possible swaps.</p>
<pre><code>≔⟦⟦θ⟦⟧⟧⟧ηＦη¿¬ⅈ«
</code></pre>
<p>Start a breath-first search with the original list and no swaps yet, but stop if a solution is found.</p>
<pre><code>≔⊟ιζＦ⁻υζ«
</code></pre>
<p>Loop over the remaining swaps.</p>
<pre><code>≔Ｅ⌊ι⎇№κμ§⌊ι⁻Σκμλε
</code></pre>
<p>Make a new list of values with the relevant positions swapped.</p>
<pre><code>≔⁺ζ⟦κ⟧δ
</code></pre>
<p>Make an updated list of swaps so far.</p>
<pre><code>¿⬤ε∨⁼λμ⊙⁻υδ№νμ
</code></pre>
<p>If a solution is still potentially possible, then:</p>
<pre><code>¿⁻υδ
</code></pre>
<p>If there are still some swaps left, then...</p>
<pre><code>⊞η⟦εδ⟧
</code></pre>
<p>... save the new values and swaps to the search list, otherwise...</p>
<pre><code>⭆¹δ
</code></pre>
<p>... output the found swaps.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 16 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>Brute force version, I'm unsure if this is the best way to go here though.</p>
<pre><code>ŒcŒ!żU$y@ƒJƑɗƇƊḢ
</code></pre>
<p>A monadic Link that accepts a permutation of <span class="math-container">\$[1,N]\$</span> and yields a list of pairs to swap or <span class="math-container">\$0\$</span> if not possible.</p>
<p><strong><a href="https://tio.run/##AUIAvf9qZWxsef//xZJjxZIhxbxVJHlAxpJKxpHJl8aHxorhuKL/xZIhwrUsw4fFkuG5mOKCrGrigJwgPT4g4oCdKVn//zQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>18</s> 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ā&lt;.Æœ.ΔvDyèRyǝ}āQ
</code></pre>
<p>-1 byte thanks to <em>@l4m2</em></p>
<p>0-indexed. Outputs <code>-1</code> if not result is possible.</p>
<p><a href="https://tio.run/##ASsA1P9vc2FiaWX//8SBPC7DhsWTLs6UdkR5w6hSecedfcSBUf//WzQsMywyLDFd" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeWhlf@PNNroHW47Olnv3JRD64rLXCoPrwiqPD639khj4P9anf/R0SY6xjpGOoaxOkCWIYgNZhmB2ECWkQ5IHiRrqAMSNQazjEFssCxIFCJmBBIFixmDRIEskLkmYL0gESOoGMgWI6gOE7h5EFmwaXCTEeZBTAGbBtYBtgGsDux2uMkIf0BcCnYxVAzshthYAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>ā              # Push a list in the range [1, (implicit) input-length]
 &lt;             # Decrease each by 1 to the range [0,length)
  .Æ           # Get all 2-element combinations of these indices
    œ          # Get all permutations of these index-pairs
     .Δ        # Find the first permutation that's truthy by,
               # or -1 if none is truthy
       v       #  Pop and loop over each pair `y`:
        D      #   Duplicate the current list
               #   (which will be the input-list in the first iteration)
         yè    #   Get the values at index-pair `y`
           R   #   Reverse the values in this pair
            yǝ #   Insert them back at index-pair `y`
       }ā      #  After the inner loop: Push a list in the range [1,length] again
         Q     #  Check that the two lists are equal (aka, the list is sorted)
               # (after which the found result, or -1, is output implicitly)
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/279018/">279018</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




