<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::161770</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>348</td><td>Python3</td><td>250331T172844Z</td><td><a href="https://codegolf.stackexchange.com/questions/161770/paths-wasting-time/279010#279010">Ajax1234</a></td></tr>
<tr d-ix="1"><td>256</td><td>Python 2</td><td>180410T125158Z</td><td><a href="https://codegolf.stackexchange.com/questions/161770/paths-wasting-time/161779#161779">Dead Pos</a></td></tr>
<tr d-ix="2"><td>249</td><td>Python 2</td><td>180410T170143Z</td><td><a href="https://codegolf.stackexchange.com/questions/161770/paths-wasting-time/161819#161819">Chas Bro</a></td></tr>
<tr d-ix="3"><td>171</td><td>JavaScript ES6</td><td>180410T131110Z</td><td><a href="https://codegolf.stackexchange.com/questions/161770/paths-wasting-time/161782#161782">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 348 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b,n):
 d={(x,y):v for x,r in E(b)for y,v in E(r)}
 q=[(*i,[i],n,b)for i in d if'@'==d[i]]
 for x,y,p,n,B in q:
  if'$'==d[(x,y)]:
   if 0==n:return B
   continue
  for X,Y,K in[(1,0,'v'),(0,1,'&gt;'),(-1,0,'^'),(0,-1,'&lt;')]:
   if d.get(N:=(x+X,y+Y))in['$',' ']and n and N not in p:U=eval(str(B));U[N[0]][N[1]]=K;q+=[(*N,p+[N],n-1,U)]
</code></pre>
<p><a href="https://tio.run/##1VDBasJAED03XzGosLtmLAlFWmK3iOBJyE1Qli1os2kD7SZu12Ao/Xa7q4KVVum1l2HmzeO9N1M19qXUN3eV2W7HXOn1mzILq4JM5ZDTJWqWBJDxD7rBhiU15KWBDRooNIzpkvmxwXo/GvYZwIoL2i1QFBI17gmFX2dQ5GRIOM/cSgYHoQYrRxt5wsoZeU5nx9n5SQ85DCLOdWKUXRsNI489ldoWeq1c74VmOMeJExE0xghJTRjSCGMkD77r7cDHPegGck@O0tn1s7I0TTjdhDNswjljTselQAJELnQGGnxNQZfW56ySKVf14pW@W0NHjA2mIhWRlK7GUvLJYBX6F6RYhSJ1T3CGUya3/qGVO8E2NHM/vTo@JqlMoS0tWHDY51SIFrQQTorEAERreAp3DvAZ9k9YYp95I@9IeqTbj36xbV9Qa1/I1f6W61KKP2qe2Um8/f8nxO6G7Rc" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>310</s> 256 bytes</h1>

<p>Thanks @cairdcoinheringaahing for <code>except:0</code> -3 bytes<br>
Thanks @Mnemonic for -8 bytes<br>
Thanks @JonathanAllan for -3 bytes<br>
Thanks @ovs for -5 bytes   </p>



<pre class="lang-python prettyprint-override"><code>G,L=input()
R=[]
def S(x,y,G,c,R):
 try:
&#9;if x&gt;-1&lt;y&lt;G[y][x]in' @':i=0;exec"T=[r[:]for r in G];T[y][x]='&lt;v^&gt;'[i];S(x+~-i/2,y+~-(i^2)/2,T,c-1,R);i+=1;"*4
&#9;R+=[G]*(0==c&lt;'$'==G[y][x])
 except:0
for i,y in enumerate(G):"@"in y&gt;S(y.index("@"),i,G,L,R)
print R[0]
</code></pre>

<p><a href="https://tio.run/##1ZBBa4MwFMfPzad4aCGxTTd1GwU1pTcvPVlvIYVhU/YOiyJ2mMu@uot0g5XVsesuSfi9l//vJY3tXmoTD1V91CCAUjrkfCfQNOeOBaQQUpGjPsGe9dzynFe8CBICXWsTMsMT9JtVlNksl1bJXqGhsKUJijDVva68UshWJupUt9ACGshVWl46Bc3eDhsqUaUuevm@wvuYW7czPMSBO5e8WkVOluJSRKm3eCSzYilkrhYsFKLK6JwK8akNCOi@0k2XhGR0IbejTZvzq26fO83yIPG2nkN2s2f2Ds1R98yRgKN7085pSNOi6aCQoRrcJxAyzg/jryweyCClBx6Hq0VxkC7iis4v9HbvT@rwE/nK9qcv@dNu/5v7F9WfAidKrrb@F1NG6w8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Some explanation:</p>

<p><code>try-except</code> is used to ensure, that both <code>x</code> and <code>y</code> coordinates are in boundaries. Exception will be raised upon access to <code>G[y][x]</code>. Python is too good and negative indices are acceptable, so check <code>x&gt;-1&lt;y</code> is added.</p>

<p><code>T=[r[:]for r in G]</code> used to create copy of <code>G</code> by values</p>

<p><code>~-i/2</code> and <code>~-(i^2)/2</code> are used to generate pairs <code>(-1, 0), (0, 1), (0, -1), (1, 0)</code>, that used to move in grid <em>(there still should be shorter way!)</em></p>

<p><code>R+=[G]*(0==c&lt;'$'==G[y][x])</code> check, that <code>'$'</code> is reached in required number of steps. <code>R</code> is used to get this result from recursive function calls.</p>

<p><code>for i,y in enumerate(G):"@"in y&gt;S(y.index("@"),i,G,L,R)</code> Found <code>x</code> and <code>y</code> of <code>'@'</code> in input and call function <code>S</code>.</p>

<p><code>print R[0]</code> <code>R</code> might contain more that one solution, so output just first</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>264</s> <s>261</s> <s>251</s> 249 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(a,n,r=-1,s=0):
 j=len(a[0]);x=1;z=y=0
 if r&lt;0:s,r=divmod(sum(a,[]).index('@'),j)
 for c in'&gt;v&lt;^':
&#9;u=r+x;v=s+y;x,y=-y,x
&#9;if j&gt;u&gt;-1&lt;v&lt;len(a):b=[e[:]for e in a];b[s][r]=c;w=a[v][u];z=n*(w&lt;'!')and f(b,n-1,u,v)or n==1and w=='$'and b
&#9;if z:return z
</code></pre>

<p><a href="https://tio.run/##rVHLboMwEDzHX7ENkcCNU0GlqiqwUZp8huVKUEAlKgaZRyA/T02SQ1Ab2kMvlj2zOzPrLbrqI5ePfR/FCSRWwCRTuHJYiTZ1CezxM5ZWwG1BvRYd74gd2gTSBJRvu6WujdImyyOrrDPdzAV9SGUUt5a5MSnbUwJJruAdUmmuG//NdMmsRrVsvQbLZee1rMNVx1oy04r7db1eOX7jnyypGyKPuSsGgVgLQCC8kJeCK4Hv3gED3gheCx1J3lsH37wzaSAjPUPIpB6gZg3VnRLRGeADorkwh1t4Mju6Kq5qJeHYJyrPoChUKitIsyJX1eVFSBWX1SsgcAJ8DnMGo0OwAd6M4cUFvlH9HRZnm@3IxpjoNiZyGFc5plz/qHmDu0Te3fyZ/4r8ayzjqmpyVB35vFQrsU5bZU@UkvOaR8SWPf9M7Jjzopn@Cw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES6), 171 bytes</h1>
<p>Takes input in currying syntax <code>(a)(n)</code>. <a href="https://codegolf.meta.stackexchange.com/a/4942/58563">Outputs by modifying</a> the input matrix.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;g=(n,y=a[F='findIndex'](r=&gt;~(i=r[F](v=&gt;v&gt;'?'))),x=i,R=a[y])=&gt;!n--|[-1,0,1,2].every(d=&gt;(R[x]='&lt;^&gt;v'[d+1],(c=(a[Y=y+~-d%2]||0)[X=x+d%2])&lt;1?g(n,Y,X):n|c!='$')&amp;&amp;(R[x]=' '))
</code></pre>
<p><a href="https://tio.run/##1Y5Na8JAEIbv@RXrR90ZMhEjFKE4a70IvXpSli2EfEiKbEqUkEDwr6dJaaHBKr32sjDPzL7v8xYUwSnM0/ezZ7MobhJuAlYHBksVB3rDMklt9GKjuJQGclYXSDnXGwMFq0LJlUREKjmlbXteGWQ1sJ5Xa8@nGfk0N9O4iPMKIlaw1aVhuXxVhdSR6xuCkCHQe67cixc9zE1dz1DvuHS7AZf@6tB67GmHT7YOByzHEieTrxjRNjfn@HQWLGBNwqJgJSCBNYJFEmFmT9kxnh6zQ4v6M6LjdF9BO0LooRiS6D2GPvlzn4@/@a37a@4YEo@/lI3uJYzu6Yx@6Nzt/nPsjWWnvvi/6v4Cmw8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt;                           // a[] = input matrix
g = (                          // g = recursive function taking:
  n,                           //   n = number of remaining moves
                               //   (x, y) = current coordinates, initialized as follows:
  y = a[F = 'findIndex'](r =&gt;  //     y = index of the row containing the starting point,
    ~(i = r[F](v =&gt; v &gt; '?'))  //         found by iterating over all rows r until we
  ),                           //         find some i such that r[i] &gt; '?'
  x = i,                       //     x = index of the column of the starting point
  R = a[y]                     //   R[] = current row
) =&gt;                           //
  !n-- |                       // decrement n; force failure if we're out of moves
  [-1, 0, 1, 2].every(d =&gt;     // for each direction d, where -1 = left, 0 = up,
    (                          // 1 = right and 2 = down:
      R[x] = '&lt;^&gt;v'[d + 1], (  //   update the current cell with the direction symbol
        c = (                  //   c = content of the new cell at (X, Y) with:
          a[Y = y + ~-d % 2]   //     Y = y + dy
          || 0                 //     (use a dummy value if this row does not exist)
        )[X = x + d % 2]       //     X = x + dx
      ) &lt; 1 ?                  //   if c is a space:
        g(n, Y, X)             //     we can go on with a recursive call
      :                        //   else:
        n | c != '$'           //     return false if n = 0 and we've reached the target
    ) &amp;&amp;                       //   unless the above result is falsy,
    (R[x] = ' ')               //   restore the current cell to a space
  )                            // end of every()
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/161770/">161770</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




