<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::156303</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Scala 3</td><td>240916T135728Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/275559#275559">138 Aspe</a></td></tr>
<tr d-ix="1"><td>337</td><td>Go</td><td>240916T164134Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/275561#275561">bigyihsu</a></td></tr>
<tr d-ix="2"><td>047</td><td>Uiua</td><td>240916T132533Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/275558#275558">nyxbird</a></td></tr>
<tr d-ix="3"><td>135</td><td>Python 2</td><td>180226T155121Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156773#156773">TFeld</a></td></tr>
<tr d-ix="4"><td>171</td><td>R</td><td>180220T223120Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156307#156307">Giuseppe</a></td></tr>
<tr d-ix="5"><td>026</td><td>Jelly</td><td>180221T001036Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156319#156319">Jonathan</a></td></tr>
<tr d-ix="6"><td>045</td><td>Pyth</td><td>180221T163413Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156367#156367">user4854</a></td></tr>
<tr d-ix="7"><td>193</td><td>><></td><td>180221T053245Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156328#156328">Jo King</a></td></tr>
<tr d-ix="8"><td>259</td><td>Java 8</td><td>180221T103723Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156345#156345">Kevin Cr</a></td></tr>
<tr d-ix="9"><td>059</td><td>Retina</td><td>180221T100358Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156343#156343">Neil</a></td></tr>
<tr d-ix="10"><td>175</td><td>PowerShell v2 or later</td><td>180221T101639Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156344#156344">user3141</a></td></tr>
<tr d-ix="11"><td>029</td><td>05AB1E</td><td>180221T091841Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156339#156339">Emigna</a></td></tr>
<tr d-ix="12"><td>175</td><td>Python 2</td><td>180220T221824Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156305#156305">ovs</a></td></tr>
<tr d-ix="13"><td>nan</td><td>Ruby</td><td>180220T235227Z</td><td><a href="https://codegolf.stackexchange.com/questions/156303/want-to-see-a-magic-card-trick/156316#156316">Level Ri</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, <del>382</del> 339 bytes</h1>
<p>Saved 43 bytes thanks to @ceilingcat</p>
<hr />
<p><a href="https://ato.pxeger.com/run?1=RZDLasMwEEXp1l-hmiw0NBa06SM1USCkhdJ206pkE7IQtpSIyHKwZJMH-ZJssmk_ql9TOXboRoMOw5zLPfzYhGveOx6_Syej_u8FS4VEGVcGz-NRUfDNlLlCmfkM6K7iGjEaspfxUxjUnwkNb3q3d_cP_cev14-3UUO39HSUlE5p8slNmmeeFyiN35V1Uzxe8KJbPzCjNcEQKIlTYnLznK3cBlZe6LTxKMm1FonbJdwKXHUtKImYp8b5hBZboEMbdmynCvdwcsu4iUuH7VzT4ZbYRSmlFnhNXF4bgTi-FPgaSLZs9lBwlv5vY5kXu2oQTQI7iNh-o4ROkU8q8QSuJGZwSb286tgQ2im0FagNBGcX7Jtu24rPVf8B" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>def main(g:Array[String])={val S=&quot;SHCD&quot;
val V=&quot;23456789TJQKA&quot;
val z=scala.util.Random
var d:List[(Char,Char)]=List()
if(d.nonEmpty)println(d.collect{case(v,s)if S.contains(s)=&gt;s&quot;$s$v&quot;})
val f:String=&gt;String=x=&gt;z.shuffle(x.toList).take(1).mkString 
println(z.shuffle((for{v&lt;-V
s&lt;-S}yield if(f(V)+f(S)!=s&quot;$v$s&quot;)s&quot;$v$s&quot;else s&quot;$s$v&quot;).toList))}
</code></pre>
<p>Ungoled version. <a href="https://ato.pxeger.com/run?1=dVRNb9NAEL1w8q8YrB5s4bqipVAiglQ5iJSPAwROUQ4be5wsWe9au5tKUZVfwiVCKj-KX8PubL7cwsWa_Zj33sy89c_fpmSCXWw290tbn179eXLPm1ZpC7SfLy0X-VcmK9VEkZr-wNLCZ8Yl3EUAFdbQuEXC9Mz04FprthqPrOZyNkl78F1yC326CXB2BqMltwYcFpRMV3DLxBINHboQDJ32IR4Ni0EcEtxy1LIKMxi6cIhM2wwKFxZiOc1g4KIBZ42S1R4moHqc84sXly9fXb3-9uHLx-s42ql417R2BYIbC7XSQUrLuN4p0a6sctGDT-7GOCnmTDtK900nDtRvJuke66YGO0dKAG5AKgvo4TNoXRMsHWq8RW2wOmKCxN9kbSt4yaYCgZkODmHAHDWmxMRrSPxZLpUk-em2qRB4hAzHpRLCD-jOcRmEhHqRUWdTD0ItdrekdUMzSdjvvwUTn_j4hO7HsA6s632ZI9a0TqWSeDQ5GqTf8qmHKaJXgFXh7_UhOCc382VdCwyCTG6V72OaW7bA5HmaN4tgGiILKWIFLXfd6HI-ovGWekwT6vw_y79pOnVoh9qp5VmX00MUqplyl2iVd1IDLChNMJ_lmfPfKD445T1K1My6rgkBJSUyy5U0oOrj50BdJf1ZeCmqaZlGQFbOPZG3yU4I5e0V-4XZSvKt9-beuSQM7M3p8ZsDovGbRBdGDiuOoiLDaXja986gFPJHnD5YAwpns657DqYJw6AqDq-BLO5KvjwPgqNjEz8YY6ei3Ti9N9fROvyttj-tza_xJER_AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>import scala.util.Random

object Main {
  def main(args: Array[String]): Unit = {
    // Suits and card values
    val suits = &quot;SHCD&quot;  // S = Spade, H = Heart, C = Club, D = Diamond
    val values = &quot;23456789TJQKA&quot;

    // Empty list for card pairs
    var deck: List[(Char, Char)] = List()

    // If the deck is not empty, print the reversed card pairs (not applicable as the deck is empty here)
    if (deck.nonEmpty) {
      println(deck.collect { case (value, suit) if suits.contains(suit) =&gt; s&quot;$suit$value&quot; })
    }

    // Sample one card value and one suit
    val selectedCard = Random.shuffle(values.toList).take(1).mkString  // Randomly pick one card value
    val selectedSuit = Random.shuffle(suits.toList).take(1).mkString   // Randomly pick one suit
    val r = selectedCard + selectedSuit  // Combine to form a card (e.g., &quot;2S&quot;)

    // Generate all combinations of card values and suits, and compare each to the selected card
    val cardsCombined = for {
      value &lt;- values
      suit &lt;- suits
    } yield if (r != s&quot;$value$suit&quot;) s&quot;$value$suit&quot; else s&quot;$suit$value&quot;

    // Shuffle and print the deck of 52 cards
    println(Random.shuffle(cardsCombined.toList))
  }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 337 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;strings&quot;)
func f(d*[]string)(o[]string){D,S,V:=[]string{},&quot;SHCD&quot;,&quot;23456789TJQKA&quot;
for i:=range V{for j:=range S{D=append(D,V[i:i+1]+S[j:j+1])}}
n:=Intn(52)
if d==nil{D[n]=D[n][1:2]+D[n][0:1]
for _,i:=range Perm(52){o=append(o,D[i])}}else{for _,c:=range*d{if ContainsAny(c[0:1],S){o=append(o,c[1:2]+c[0:1])}}}
return}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VVBLTsMwFBRbnyLyAtmtKbRQKEZeVM0C6KZVUDdRhKJ8itvGiRx3gaychE2FxCE4CpwGO24qsbHfm3lv5mk-Ptfl4buKk228zrwi5gLwoiqlGsC8UPBrr_KLye_Z0oFoAItYvV3KWKTwYQBrJblY1xCDfC8SL0dpL4wciFF5KrVPArKirAN0Q2DwOPMhgaPrm_Ht3eT-5Xk5n0KQl9LjlBl9c81K23bTtYH2WVxVmUiRT1Yhp7w_jPpBuKEbU-CmAYKyJ6EEGo8w4LmXMib4TvuhiJh9wiEdRf22uqLDqDV7JSe7RSYLu6rLzqYkfsitcrarM-3Gk-N4L9XGYlYKZTKrp-IdJa0qCf4JJM7UcUapATJTeykal-zPvA3O5o6wp0GaJVuPMpOkuRyDhUlL7QSyMAZJLFNHnjugoy2BwVHycHD_Hw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This solution uses <code>SHCD</code> for suits, and <code>23456789TJQKA</code> for values. An &quot;empty&quot; input here is when the function is passed <code>nil</code>.</p>
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 344 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;strings&quot;)
func f(d...[]string)(o[]string){D,S,V:=[]string{},&quot;SHCD&quot;,&quot;23456789TJQKA&quot;
for i:=range V{for j:=range S{D=append(D,V[i:i+1]+S[j:j+1])}}
n:=Intn(52)
if len(d)&lt;1{D[n]=D[n][1:2]+D[n][0:1]
for _,i:=range Perm(52){o=append(o,D[i])}}else{for _,c:=range d[0]{if ContainsAny(c[0:1],S){o=append(o,c[1:2]+c[0:1])}}}
return}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VVDdSsMwGMXbPEXJVcJiXafTGe3FWMG_m0llCKVIadOZbU1Lml1I6JN4UwQfwkfRpzFt7MCb5Dvn-75zkvP-sS7brypJt8maOUXCBeBFVUrlwrxQ8HOv8uPZz9GzJZELi0S9nshEZPDKhbWSXKxriEG-F6mTo8x13Si2NEblodQBCcmK-gOhGwLD20UACZycnk3PL2aXT_ePD3MI8lI6nPrGwbxnpTu4GWCoAz-pKiYyFJBVxCkfefEojDZ0YwrcNEBQ_04ogaYTDHju7JhAGb72dBCJ2O-OyKOTeNRXY-rFvd0LORgumSy6ZV0ORiUJIt5ps13NtB1Ph_EsGsfa-CxKoUx09Vy8obQXJuE_jdT62p4Ra4Bkai9FYwP-vunz6-JH2NEgY-nWob4JFIOlyUvtzD8Mh0GayMx2LB66HY_Bn1zb2vsX" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This solution uses a variadic argument to allow for a truly empty input.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 47 bytes</h1>
<pre><code>⨬(°⍆⍜⊢⇌°⍆☇1⊞⊂⊂+@2⇡8&quot;TJQKA&quot;|⇌⊢▽⊢⍉⊸∈)±⧻,&quot;SDCH&quot;
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_13_0-dev_2__IyBFeHBlcmltZW50YWwhCvCfqoQg4oaQIOKorCjCsOKNhuKNnOKKouKHjMKw4o2G4piHMeKKnuKKguKKgitAMuKHoTgiVEpRS0EifOKHjOKKouKWveKKouKNieKKuOKIiCnCseKnuywiU0RDSCIK8J-qhFtdCvCfqoQuCg==" rel="nofollow noreferrer">Try it!</a></p>
<p>Experimental because of <code>°⍆</code></p>
<pre><code>⨬(°⍆⍜⊢⇌°⍆☇1⊞⊂⊂+@2⇡8&quot;TJQKA&quot;|⇌⊢▽⊢⍉⊸∈)±⧻,&quot;SDCH&quot;
⨬(                                      )±⧻,       # switch on the sign of the length of the input
 (°⍆⍜⊢⇌°⍆☇1⊞⊂⊂+@2⇡8&quot;TJQKA&quot;|                     # 0:
            ☇1⊞⊂⊂+@2⇡8&quot;TJQKA&quot;               &quot;SDCH&quot; #   cartesian product of ranks and suits
         °⍆                                        #   shuffle
     ⍜⊢⇌                                           #  reverse the first 
  °⍆                                               #   shuffle again
                              |⇌⊢▽⊢⍉⊸∈)           # 1:
                                 ⊢▽                 #   get the element for which
                                   ⊢⍉⊸∈    &quot;SDCH&quot;  #   the first character is a member of &quot;SDCH&quot;
                               ⇌                    #   and reverse it
</code></pre>
<p>Funnily enough, if we could use <code>♣♦♥♠</code> instead of letters, we could save a byte with <code>Suits</code></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 135 bytes</h1>



<pre class="lang-python prettyprint-override"><code>from random import*
s=shuffle
d=zip('A23456789TJQK'*4,'SCDH'*13)
s(d)
D=input()
if D:d=list(set(D)-set(d))
d[0]=d[0][::-1]
s(d)
print d
</code></pre>

<p><a href="https://tio.run/##XZE/q4MwFMX3fAq3JGLh1T@1Cg6SDEEnqZs4FFJpoFXRdHjvy/sqOhxckh@Hk3vPvRl/7XPo/WXppuHtTPdefy/zHofJumTO5uen614PorM/MzKa@0EYXeJrUhdVSd3QozchFXXPAScz05zIzPTjxzJOTOfIVGcvM1s2PyyT/LRemnOim582W48mTU/ndns5Tqa3jl6WhtGIeg6VlHsOo@XKYuNq5RvouycBPQYOwJNDnRI8ObAPfAF/ccygNq6Bc@gVgF4Cx1AnAs7B4wMXkCcCvYK3IfQtgOvjLAr8u349@gXoCvpiHQmMexMwI/bCHSr4LwG7EpBBQk38Xwn1JexBQmb8d5xxr69WTiDbN09L/gE" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Cards are tuples of <code>(value,suit)</code></p>

<p>Empty input is <code>[]</code></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>177</s> 171 bytes</h1>



<pre class="lang-r prettyprint-override"><code>function(l=1,F="(.)(.)",R="\\2\\1",S=sample)if(l&gt;1)sub(F,R,grep("^[SDHC]",l,v=T))else{m=S(outer(c(2:9,"T","J","Q","K"),c("S","D","H","C"),paste0))
m[1]=sub(F,R,m[1])
S(m)}
</code></pre>

<p><a href="https://tio.run/##NY7LCsIwEEX3/YoyqxkYxXanGDctIrqy6a5RqDERMa2lDzfit9dUEObAPXdzpx1tuJ6Ndqh1f3/W6ETEWwE4J3/AmQClYqUiYCm6smqcobtFt4moGy645YxvrWkQzoVMd8kJ2PFL5ETGdeZdCYnPoTctaoxXS4YcGPaeo@cAxBpB@ph6dp7EV03Z9WZBFFRFdBL/kUkokFjRZ7wa/fA/hxYp0GWPkzOoGiiwP6HxCw" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>Given empty input, (call <code>f</code> with no input), we default to <code>l=1</code> and thus create a random permutation <code>m</code> of the deck. Assuming <code>sample</code> is truly random, there is an equal probability of any card being the first in this list. So we modify the first one, and then shuffle again, returning the list.</p>

<p>Reversing it, we look for a card starting with one of <code>SDHC</code> and reverse it.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 26 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>9ḊṾ€;“AJKQT”p“CDHS”ḟ⁸ẊU-¦Ẋ
</code></pre>

<p>A monadic link accepting a list of lists of characters (a stub of 0 cards or a full-deck of 52 cards with one card reversed) and returning a list of lists of characters (a stub of the 1 reversed card but forward or a full-deck with one random card reversed).</p>

<p><strong><a href="https://tio.run/##TcytDsIwAEXhV8HNgGG/DaoZIUurGooiSAxBYHEDQ4JEISA4FA@wIRAQHqR7kTIC4qh7xJe7mC@Xa@@Fq/aufjTb26ApT1JpY5vyvGo7HxbjNl11aTaVu@8nvee1HT9q7Wv3Prj66P10GvSDbifIg1m38@8hukCPfx3Ch/AhfAiffzv6dQQfwUfwMf5j@Bg@hk/gE/gEPoFP4VP4FD6Fz@Az@Aw@gxfwAl7AC3gJL@ElvIRX8ApewSt4Da/hNbyGN/AG3sAbeAtv4S28/fvZBw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (footer to make input and output representations match - as a full program Jelly code Python-evals the argument and smashes the characters together for the output)</p>

<h3>How?</h3>

<pre><code>9ḊṾ€;“AJKQT”p“CDHS”ḟ⁸ẊU-¦Ẋ - Link: list of lists of characters, Z
9Ḋ                         - nine dequeued = [2,3,4,5,6,7,8,9]
  Ṿ€                       - unevaluate €ach = ['2','3','4','5','6','7','8','9']
     “AJKQT”               - literal list of characters = ['A','J','K','Q','T']
    ;                      - concatenate = ['2','3','4','5','6','7','8','9','A','J','K','Q','T']
             “CDHS”        - literal list of characters = ['C','D','H','S']
            p              - Cartesian product = [['2','C'],['2','D'],...,['T','S']]
                           -   a full deck of forward cards
                    ⁸      - chain's left argument, Z
                   ḟ       - filter discard
                           -   leaving either that deck or the 1 reversed card in the input
                     Ẋ     - shuffle
                        ¦  - sparse application...
                       -   - ...to index: -1 (which doesn't exist when the length is only 1)
                      U    - ...do: upend (reverses the penultimate card of the deck)
                         Ẋ - shuffle
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Pyth, 45 bytes</h1>

<pre><code>J"CDHS"KO52=NsM.S*+c"AKQJT"1S9J|f}hTJQXNK_@NK
</code></pre>

<p>Takes the empty list for empty input.<br>
<a href="http://pyth.herokuapp.com/?code=J%22CDHS%22KO52%3DNsM.S%2A%2Bc%22AKQJT%221S9J%7Cf%7DhTJQXNK_%40NK&amp;input=%5B%27QH%27%2C%20%273H%27%2C%20%27JD%27%2C%20%279S%27%2C%20%273S%27%2C%20%272H%27%2C%20%27AD%27%2C%20%275S%27%2C%20%273D%27%2C%20%276D%27%2C%20%271C%27%2C%20%275C%27%2C%20%275D%27%2C%20%272D%27%2C%20%27QC%27%2C%20%271D%27%2C%20%27QS%27%2C%20%27JC%27%2C%20%27QD%27%2C%20%278C%27%2C%20%277C%27%2C%20%27AH%27%2C%20%279H%27%2C%20%27TS%27%2C%20%27TH%27%2C%20%276H%27%2C%20%278S%27%2C%20%27JS%27%2C%20%275H%27%2C%20%274C%27%2C%20%27KS%27%2C%20%271H%27%2C%20%279D%27%2C%20%279C%27%2C%20%274S%27%2C%20%272C%27%2C%20%273C%27%2C%20%274D%27%2C%20%278D%27%2C%20%27JH%27%2C%20%274H%27%2C%20%27KH%27%2C%20%27TC%27%2C%20%27AS%27%2C%20%276S%27%2C%20%27KC%27%2C%20%277S%27%2C%20%27C6%27%2C%20%272S%27%2C%20%27KD%27%2C%20%27AC%27%2C%20%277H%27%2C%20%278H%27%2C%20%27TD%27%2C%20%277D%27%2C%20%271S%27%5D&amp;debug=0" rel="nofollow noreferrer">Try it online</a></p>

<h3>Explanation</h3>

<pre><code>J"CDHS"KO52=NsM.S*+c"AKQJT"1S9J|f}hTJQXNK_@NK
J"CDHS"                                        Save the suits as J.
       KO52                                    Save a random index as K.
           =NsM.S*+c"AKQJT"1S9J                Save a shuffled deck as N.
                                f}hTJQ         Find all cards with suit first.
                               |      XNK_@NK  If there aren't any, flip a card.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">>&lt;></a>, <s>215</s> 193 bytes</h1>

<pre><code>i:0)?\~"CHSD":"2"$:"3"$:"4"$:"5"$:"6"$:"7"$:"8"$:"9"$:"T"$:"J"$:"Q"$:"K"$:"A"$&amp;105&amp;"S"=?.~~~{c0.
=+i$?\i$:::"B")$"I"(*$"S"
_oo$~/;
x0
x0
x0
x0
x0
x0
x0
x0
x0
x0
\l&amp;&gt;?!&lt;
&gt;&amp;"3"%:?\~$&gt;o&lt;
\  }}&amp;-1/
</code></pre>

<p><a href="https://tio.run/##fc67CsIwFMbxPU9RD8dgFdtUrZdj2@Bl8DJJHQMOghgQMrgI0rx6zHkB4eM3fcP/Yd/PECypVBsPu0O7B4IJIMGUmTElM2cWzJJZMVfmxFyYM7MBlIUqJbRQ68x7/72rTNQji9pYJCLYQopwhMEQ40fcnEOfr8VH/Zt5yUb3KtHI2NWn2IqNq4RJkq6T4yIP4Qc" rel="nofollow noreferrer" title="&gt;&lt;&gt; – Try It Online">Try it online!</a></p>

<p>Takes input as not separated cards, and output as the same (e.g. <code>KCAC5C6S...</code>)</p>

<p>To make it easier to test, <a href="https://tio.run/##fc5NasMwEAXgvU@RDKpp0tfE8b/VxMaRFqq9MvLSEEqh1FDwoptCia7uji5QGD6Q9GY0H/P357rOMto1kyNlrCZJMQlJiSf1ZJ7cU3hKT@UZPZ1n8PSelkR4irKQLF2ag3Pu9z06BJenWTTTLKSUdKWdoFd63AvOzC64LYtwx5fgJ/qvpq@wbrbnoA55swfJ24qlXt62yzmYNpv7PXw@Hdc1NogVcotUYzDIFUaNUqEwyAxUikSjsCgUeoWBMwodHzVyjdgi43uNRCGxiLnRoOchBq1BadEZjBatRqZRGaQGHU/gv/iJWzijMSq0FiM3clKh4uKxFpX@Aw" rel="nofollow noreferrer">here's a version</a> that takes input as comma separated and outputs as newline separated.</p>

<p>All the <code>x0</code>s are just an attempt to make a semi-uniform random number generator. More of them increases the range of possible values, and the opposite for less. 10 of them is where I judged it to be random enough.</p>

<p>Note that it follows the rules in that:</p>

<ul>
<li>All cards have an equal chance of being selected to be reversed.</li>
<li>All cards have an equal chance of appearing anywhere in the shuffled deck.</li>
</ul>

<p><em>But not all</em> shuffled combinations are possible outputs (and in fact, the vast majority aren't).</p>
</div>
<div id="pu8" class="pu"><h1>Java 8, <s>275</s> <s>274</s> 259 bytes</h1>

<pre class="lang-java prettyprint-override"><code>import java.util.*;s-&gt;{if(s==null){List l=new Stack();char i=52,r=i,x,y;for(r*=Math.random();i--&gt;0;y=&quot;23456789TJQKA&quot;.charAt(i%13),l.add(i==r?x+&quot;&quot;+y:y+&quot;&quot;+x))x=&quot;HSDC&quot;.charAt(i&amp;3);Collections.shuffle(l);return l;}return s.replaceAll(&quot;.*,(.)([^HSDC]).*&quot;,&quot;$2$1&quot;);}
</code></pre>
<p>Input is a String, output is either a String or a <code>java.util.List</code> depending on the input.</p>
<p><strong>Explanation:</strong></p>
<p><a href="https://tio.run/##dVLfb9sgEH7vX4GsboL0Qlc7P2e5U4QfrGTtFpG3qpOIYy@kBEcYt7Gi/O3ZpY20lw0dgrv7vgM@bqNeVbfaFXazejnp7a5ynmwwxhuvDe/EBMftLfmpMF6VxK8Lsmx90c2rxvqrq9youiYPStvDFSHa@sKVKi/I49kl5MdyU@Se5FR6p@1vUrMY40ecaLVXXufkkViSkFPdvT/oktZJYhtj2OG7rj0xiS3eiPQqf6EsztfKEZ30Q3CJhj20cVk56jrJg/Jr7pRdVVuE6W73/kvcJkEY9fqD4Wi8mM5nk4Cf6RNP9ae7iIHharWiOknct/1NENy0X9vzsmdsnwSZTMVf/OeIxaIyBl@iK1vzet2UpSmoYbErfOMsMfHxsqu5K3YGFZgYQwPeAcoZffp1LvjMeCeA4Dq8vgtYfDzFHyrsmqVBFS5ivFZ6RbYo50Wxp2fFPqSUbe2LLa8az3eY8cZSy3MaQJhBKGAgoZfCPIOBgEUKIwHDDPoZiB5EKQwlDAXMBMwRI2CKbgqDFEIJfYynEAmIJIRIzGCGRTKYZDCSMM1gIWGSQj@FcQa9DKZYAc/CFFIQk8JCwETCAomIFDBGw7ISxikE7P3D/3n7/2fO73pvgku3HE9/AA" rel="nofollow noreferrer">Try it online.</a></p>
<pre class="lang-java prettyprint-override"><code>import java.util.*;          // Required import for List, Stack and Collections
s-&gt;{                         // Method with String parameter and Object return-type
  if(s==null){               //  If the input is `null`:
    char i=52,               //   Index-integer
         r=i,                //   Random-integer
         x,y;                //   Temp characters
    List l=new Stack();      //   Create a List
    for(r*=Math.random();    //   Determine the random integer in the range (0;52]
        i--&gt;0                //   Loop `i` 52 times:
        ;                    //     After every iteration:
         y=&quot;23456789TJQKA&quot;.charAt(i%13)
                             //      Set `y` to one of 23456789TJQKA based on `i` modulo-13
         ,l.add(i==r?        //      If the random integer equals the current `i`
                 x+&quot;&quot;+y      //       Add the current card reversed
                :            //      Else:
                 y+&quot;&quot;+x))    //       Add the current card as is
      x=&quot;HSDC&quot;.charAt(i&amp;3);  //    Set `x` to one of HSDC based on `i` bitwise-AND 3
    Collections.shuffle(l);  //   Shuffle the generated Deck
    return l;}               //   And return this Deck as result
                             //  If the input was a Deck instead:
  return s.replaceAll(&quot;.*,(.)([^HSDC]).*&quot;,
                             //   Get the reversed card from the Deck,
            &quot;$2$1&quot;);}        //   and output it non-reversed
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="noreferrer">Retina</a>, <s>61</s> <s>60</s> 59 bytes</h1>

<pre><code>G`[HCDS].
^$
23456789TJQK
/^2/&amp;L$`.
$&amp;H¶$&amp;D¶$&amp;C¶$&amp;S
@V`
O?`
</code></pre>

<p><a href="https://tio.run/##K0otycxLNPz/3z0h2sPZJThWjytOhcvI2MTUzNzCMsQr0JtLP85IX81HJUGPS0XN49A2FTUXEOEMIoK5HMISuPztE/7/BwA" rel="noreferrer" title="Retina – Try It Online">Try it online!</a> Edit: Saved <s>1</s> 2 bytes thanks to @MartinEnder. Explanation:</p>

<pre><code>G`[HCDS].
</code></pre>

<p>Delete all unreversed cards. This should leave one reversed card or no cards.</p>

<pre><code>^$
23456789TJQK
/^2/&amp;L$`.
$&amp;H¶$&amp;D¶$&amp;C¶$&amp;S
</code></pre>

<p>If the input is (now) empty, create a pack of cards.</p>

<pre><code>@V`
</code></pre>

<p>Randomly select one card and reverse it (unreverses the single reversed card).</p>

<pre><code>O?`
</code></pre>

<p>Shuffle the card(s).</p>
</div>
<div id="pu10" class="pu"><h1>PowerShell v2 or later, 175 bytes</h1>

<pre><code>%{$s=[char[]]'SDHC';if($_){$_|?{$s-contains$_[0]}|%{$_[1]+$_[0]}}else{$d=$s|%{$e=$_;[char[]]'23456789TJQKA'|%{$_+$e}}|random -c 52;$r=random 52;$d[$r]=$d[$r][1]+$d[$r][0];$d}}
</code></pre>

<p>Long version:  </p>

<pre><code>ForEach-Object {
    $s = [char[]]'SDHC'                         # Create a character array with the suits
    if ($_) {                                   # If there's pipeline input ...
        $_ |                                    # ... write it to the output pipeline ...
            Where-Object {$s -contains $_[0]} | # ... but let only those input elements pass where the first letter appears in the suits ...
            ForEach-Object {$_[1] + $_[0]}      # ... and swap the two elements
    } else {
        $d = $s | ForEach-Object {              # Assign $d to the output of the suits, processing each element first.
                $e = $_                         # Store the current suit element for use in the inner loop
                [char[]]'23456789TJQKA' | ForEach-Object {$_ + $e}  # Process each of the numbers, joining it with the current suit, ...
            } | Get-Random -Count 52            # ... and the resulting 2-char-strings goes back into the output to be shuffled
        $r = Get-Random -Maximum 52
        $d[$r] = $d[$r][1] + $d[$r][0]          # Swap the two chars of a random array element in $d
        $d                                      # Write $d to the output pipeline
    }
}
</code></pre>

<h2>Usage:</h2>

<p>Create a shuffled deck and store it in a variable:  </p>

<pre><code>$Deck = %{$s=[char[]]'SDHC';if($_){$_|?{$s-contains$_[0]}|%{$_[1]+$_[0]}}else{$d=$s|%{$e=$_;[char[]]'23456789TJQKA'|%{$_+$e}}|random -c 52;$r=random 52;$d[$r]=$d[$r][1]+$d[$r][0];$d}}
</code></pre>

<p>Inspect the variable at will, for example</p>

<pre><code>$Deck -join ','
</code></pre>

<p>Pipe the deck back into the script:</p>

<pre><code>$Deck | %{$s=[char[]]'SDHC';if($_){$_|?{$s-contains$_[0]}|%{$_[1]+$_[0]}}else{$d=$s|%{$e=$_;[char[]]'23456789TJQKA'|%{$_+$e}}|random -c 52;$r=random 52;$d[$r]=$d[$r][1]+$d[$r][0];$d}}
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 29 bytes</h1>

<pre><code>Y9ŸJ.•§®т•«.•öB•âsKDgiëDΩÂ:.r
</code></pre>

<p><a href="https://tio.run/##JY8xDoJAEEWvYreNIYqwsJaGSk9gjAWiUaFCOIDhKDTGkFgaa4itiVfwImv2TfPyefyZgUmY7qYHa9fm/Vp6v2vb3/rHt3Ghc4/Dc@HYVqvkeB665HMfmrl3sXaj6kqNR2qWwZOj3jsWmBqT08nxGp/KFCzwEc1aMt6HGl/CmNmAji978D40MJSd5IhOlmLwKbMl2cAQk9PUmECuyEXehuRAvlk2yJR08LFcZ7aEvvwLNBhDrjO1/QM" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 175 bytes</h1>



<pre class="lang-python prettyprint-override"><code>from random import*
s='SHCD';c='23456789TJQKA'
d=input()
if d:print[b+a for a,b in d if a in s];q
k=sample
r=k(c,1)+k(s,1)
print k([(a+b,b+a)[r==a+b]for a in c for b in s],52)
</code></pre>

<p><a href="https://tio.run/##Jcy9DsIgAATgnadgAyyL1frXMBgdjE5GN9IBio2kFhBw8OmR1ukuudznvvFpTZlS5@0AvTAqhx6c9XEGAkO30@GI6pahcrGsVuvN9n6@XvYIKKaN@0RMgO6g2jmvTeSyELCzHgoqoTZQwbyJsYWmfoOeBTG41wN41uOWzknR45ADTGfYY45FIWlGCPeM5d5M2Ai0kyv/Fq1KkhJvfg" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a> empty input is denoted as <code>[]</code></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 95 (or 100) bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>-&gt;n{s=(0..51).map{|i|"A23456789TJQK"[i/4]+"HCDS"[i%4]}
n[0]?s-n:s[rand 52].reverse!&amp;&amp;s.shuffle}
</code></pre>

<p>Given an empty array as input, returns the deck as an array of strings. Given a nonempty array as input, returns the flipped card as an array containing a single string. If the flipped card is required as a string rather than a single-element array containing a string, the following adds 5 bytes: change <code>s-n</code> to <code>(s-n)[0]</code> </p>

<p><a href="https://tio.run/##KypNqvyfZvtf1y6vuthWw0BPz9RQUy83saC6JrNGydHI2MTUzNzCMsQr0FspOlPfJFZbycPZJRjIVjWJreXKizaItS/WzbMqji5KzEtRMDWK1StKLUstKk5VVFMr1ivOKE1Ly0mt/V@gkG2bFh0dG8tVoJAWnR37HwA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>

<p>The first line generates a standard deck. The second line breaks down as follows</p>

<pre class="lang-ruby prettyprint-override"><code> n[0]?                  #If the input array is not empty (contains a truthy first element)
  s-n:                  #Find the contents of s with the contents of n removed. The only card remaining from the standard deck corresponds to the flipped card in the input.
                        #ELSE 
  s[rand 52].reverse!&amp;&amp; #Flip one card in place in the array s. As the result is truthy, whatever is next will be returned.
 s.shuffle              #shuffle the deck and return the shuffled deck with one element flipped
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/156303/">156303</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




