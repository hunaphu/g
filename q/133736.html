<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::133736</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>241</td><td>Swift 5.9</td><td>240308T183120Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/271639#271639">macOSist</a></td></tr>
<tr d-ix="1"><td>029</td><td>Uiua</td><td>240309T180553Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/271652#271652">jan</a></td></tr>
<tr d-ix="2"><td>049</td><td>J</td><td>171226T215831Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/151809#151809">miles</a></td></tr>
<tr d-ix="3"><td>018</td><td>APL Dyalog Unicode</td><td>171226T200107Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/151797#151797">Ad&#225;</a></td></tr>
<tr d-ix="4"><td>122</td><td>Befunge</td><td>171226T015851Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/151758#151758">James Ho</a></td></tr>
<tr d-ix="5"><td>044</td><td>Charcoal</td><td>171224T004047Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/151654#151654">Neil</a></td></tr>
<tr d-ix="6"><td>136</td><td>Retina</td><td>170724T212107Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/135499#135499">Neil</a></td></tr>
<tr d-ix="7"><td>145</td><td>Haskell</td><td>170724T191945Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/135469#135469">ბიმო</a></td></tr>
<tr d-ix="8"><td>189</td><td>Python 3</td><td>170722T105707Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/135007#135007">James Ho</a></td></tr>
<tr d-ix="9"><td>021</td><td>Jelly</td><td>170722T113646Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/135011#135011">miles</a></td></tr>
<tr d-ix="10"><td>114</td><td>C</td><td>170721T193048Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/133862#133862">orlp</a></td></tr>
<tr d-ix="11"><td>222</td><td>C</td><td>170721T181939Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/133829#133829">Quaerend</a></td></tr>
<tr d-ix="12"><td>nan</td><td>Mathematica</td><td>170721T151909Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/133761#133761">Keyu Gan</a></td></tr>
<tr d-ix="13"><td>3227</td><td>MATL</td><td>170721T145340Z</td><td><a href="https://codegolf.stackexchange.com/questions/133736/n-queens-puzzle/133751#133751">Luis Men</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Swift 5.9, <s>251</s> 241 bytes</h1>
<pre class="lang-swift prettyprint-override"><code>let f={n in var q=[(Int,Int)](),z=0..&lt;n
func d(_ r:Int){for c in z{if q.allSatisfy{(x,y)in !(x==r||y==c||abs(x-r)==abs(y-c))}{q+=[(r,c)]
d(r+1)
if q.count==n{break}
q.removeLast()}}}
d(0)
return z.map{r in z.map{c in q.contains{$0==(r,c)}}}}
</code></pre>
<p>The brute-force approach. I think.</p>
<p>This closure returns a 2D <code>Array</code> of <code>Bool</code>s. <code>true</code> means there's a queen there; <code>false</code> means that there's nothing there.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 29 characters</h1>
<pre class="lang-uiua prettyprint-override"><code>≡(+@@=⇡)⧻.-1∵⟨⌈÷2-|-⌊÷2⟩◿2.⇡.
</code></pre>
<p>Apparently any grid output is enough:</p>
<pre class="lang-uiua prettyprint-override"><code>≡(=⇡)⧻.∵⟨-1⌈÷2-|-⌈÷2⟩◿2.⇡.
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_10_0-dev_1__ZCDihpAg4omhKCtAQD3ih6Ep4qe7LiAgICAgICAgICAgICAgICAgICAgICAgICAjIGRpc3BsYXllcgp2IOKGkCDCrC_Dl-KJoSg94oqDKC8rLyviip49Linip7spW-KKgygt4oeh4qe7Lnwt4oeM4oeh4qe7LikuXSAjIHZlcmlmaWVyCiMgZOKNoijijIrDlyziiLXii4XimoIpdiDiipouNyAjIHByb3BhYm9saXN0aWMgc29sdXRpb24KIyBkIFsyIDAgMyAxXQriiaEoK0BAPeKHoSnip7suLTHiiLXin6jijIjDtzItfC3ijIrDtzLin6nil78yLuKHoS4gNwo=" rel="nofollow noreferrer">Try it here!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 49 bytes</h1>

<pre><code>i.=/0({(1-.@e.,)@(([:(=#\){.|@-}.)\."1)#])!A.&amp;i.]
</code></pre>

<p><a href="https://tio.run/##FcyxDkAwFAXQvV9xkfBewsUmTZrUd2ASDRaDEd9eDGc9ewwnnEWDT9zo6kYuaSv6haV6kcGKy0a9ePvqoY5MW80mTXrmG6eoJiWK8BcFSjwW4TRmmdcDAV18AQ" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>

<p>Brute force by testing all permutations of length <em>n</em>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 18 bytes<sup>SBCS</sup></h1>



<p>Full program prompting for <code>n</code> from stdin. Prints space-separated solution to stdout using <code>·</code> for empty squares and <code>⍟</code> for Queens.</p>

<pre class="lang-apl prettyprint-override"><code>⎕CY'dfns'
⊃queens⎕
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///qKM97f@jvqnOkeopaXnF6lyPupoLS1NT84qBgiDZ/wpgkMZlwgVjmcNZhgYA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p><code>⎕CY'dfns'</code>&emsp;<strong>C</strong>op<strong>y</strong> the "dfns" library</p>

<p><code>⎕</code>&emsp;get input from stdin</p>

<p><code>queens</code>&emsp;find all truly unique Queens' solutions (no reflections or rotations)</p>

<p><code>⊃</code>&emsp;pick the first solution</p>
</div>
<div id="pu4" class="pu"><h1>Befunge, 122 bytes</h1>
<pre><code>&amp;::2%-v&gt;2*00g++00g%00g\-\00g\`*4&gt;8#4*#&lt;,#-:#1_$55+&quot;Q&quot;,,:#v_@
/2p00:&lt;^%g01\+*+1*!!%6g00-2g01\**!!%6g00-g012!:`\g01:::-1&lt;p01
</code></pre>
<p><a href="http://befunge.tryitonline.net/#code=Jjo6MiUtdj4yKjAwZysrMDBnJTAwZ1wtXDAwZ1xgKjQ+OCM0KiM8LCMtOiMxXyQ1NSsiUSIsLDojdl9ACi8ycDAwOjxeJWcwMVwrKisxKiEhJTZnMDAtMmcwMVwqKiEhJTZnMDAtZzAxMiE6YFxnMDE6OjotMTxwMDE&amp;input=OA" rel="nofollow noreferrer">Try it online!</a></p>
<p>This is more or less based on the <a href="/a/133862/62101">C solution</a> by <a href="/users/4162/orlp">orlp</a>.</p>
<p><strong>Explanation</strong></p>
<p><img src="https://i.sstatic.net/kybAI.png" alt="Source code with execution paths highlighted" /></p>
<p><img src="https://i.sstatic.net/jmV4j.png" alt="*" /> Read the number of queens, <em>q</em>, from stdin and calculate two variables for later use: <code>n = q - q%2</code>, and <code>hn = n/2</code><br />
<img src="https://i.sstatic.net/z4eIY.png" alt="*" /> Start the main loop, iterating <em>r</em>, the row number, from <em>q</em> down to 0, decrementing at the start of the loop, so the first <em>r</em> is <em>q</em> minus 1.<br />
<img src="https://i.sstatic.net/RFUim.png" alt="*" /> Calculate the offset of the queen in each row with the following formula:</p>
<pre><code>offset = (n - (
  (hn &lt;= r) * (2 - hn) * !!(n % 6) + 
  (hn &gt; r) * ((hn - 2) * !!(n % 6) + 1) + 
  (y % hn * 2) + n
) % n) * (n &gt; r)
</code></pre>
<p><img src="https://i.sstatic.net/BX1CZ.png" alt="*" /> Output <em>offset</em> space characters to indent the queen's position for the current row, plus one additional space just because it makes the output loop easier.<br />
<img src="https://i.sstatic.net/aZli8.png" alt="*" /> Output the <code>Q</code> for the queen, followed by a newline to move to the next row.<br />
<img src="https://i.sstatic.net/SetfX.png" alt="*" /> Test if <em>r</em> is zero, in which case we've reached the end of the board and can exit, otherwise we repeat the main loop again.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 44 bytes</h1>

<pre><code>Ｎθ≔÷θ²ηＥθ◧Q⊕⎇⁼ι⊗ηι⎇﹪η³﹪⁺⁺⊗ι⊖η×³¬‹ιη⊗η﹪⊕⊗ι⊕⊗η
</code></pre>

<p><a href="https://tio.run/##VY5NCoMwEIX3PUVwNUK6aTcFVwW7ELRY6AWiTmsgJpqfQk@fRquosxiY@Wbee3XLdK2Y8D6TvbN311WoYYiTw9UY/paQSZvyD28QBkpOMSVtYKXm0kLB@nFZsibHl4XoEVGSyVpjh9JiA0/Ukukv3AbHhAFOSapcJQJp4yAU5uWiUI0TClpKzgHMUymc@bfljQeY4mowyTx5hwbOlNyVhRzNZBTIyHZ@s@w24Soc76NvHv@VeH/xx4/4AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Another port of @orlp's excellent C answer.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 136 bytes</h1>

<pre><code>.+
$*&#32;
&#32;
$_;$`Q¶
( +)\1( ?);
:$1;
:( +);\1\1
$1$1
:((   )+);( *)
 $1$1% $3$3
: ( +);( \1)?( *)
 $1 $1%$#2$* $#2$* $#2$* $1$3$3
( +)%\1?

</code></pre>

<p><a href="https://tio.run/##VY0xCkJBDET7nGLALCT/gzD@Rv4Wewb7gFpY2FiIZ/MAXmzNfrAQwkDezDDP2@v@uPa@n0UnCETPVS@nz1sMswcNzausypRBajAoSmX@BsCTGSYXDFigiy6yYssagt5@bl7R3SFn/pRbY@RLsEnvxy8" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Port of @orlp's excellent C answer. Explanation:</p>

<pre><code>.+
$* 
</code></pre>

<p>Convert to unary, using spaces (there is a space after the <code>*</code>).</p>

<pre><code>$_;$`Q¶
</code></pre>

<p>Create <code>N</code> rows with <code>N</code> spaces, a <code>;</code>, then <code>0..N-1</code> spaces, then a <code>Q</code>. The remaining stages apply to all rows.</p>

<pre><code>( +)\1( ?);
:$1;
</code></pre>

<p>Integer divide <code>N</code> by 2. (Also wrap the result in <code>:;</code> to make it easier to anchor patterns.)</p>

<pre><code>:( +);\1\1
$1$1
</code></pre>

<p>If the loop index equals <code>N/2*2</code>, then just leave that many spaces.</p>

<pre><code>:((   )+);( *)
 $1$1% $3$3
</code></pre>

<p>If <code>N/2</code> is a multiple of 3, then take double the loop index plus one, modulo <code>N/2*2+1</code>.</p>

<pre><code>: ( +);( \1)?( *)
 $1 $1%$#2$* $#2$* $#2$* $1$3$3
</code></pre>

<p>Otherwise, take double the loop index plus <code>(N/2-1)</code> plus an extra 3 in the bottom half of the board, modulo <code>N/2*2</code>.</p>

<pre><code>( +)%\1?
</code></pre>

<p>Actually perform the modulo operation.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 145 bytes</h1>



<p>The obvious brute force approach:</p>

<pre class="lang-hs prettyprint-override"><code>b=1&gt;0
t[]=b
t(q:r)=all(/=q)r&amp;&amp;foldr(\(a,b)-&gt;(abs(q-b)/=a&amp;&amp;))b(zip[1..]r)&amp;&amp;t r
q n|y&lt;-[1..n]=(\q-&gt;(' '&lt;$[1..q])++"Q")&lt;$&gt;[x|x&lt;-mapM(\_-&gt;y)y,t x]!!0
</code></pre>

<p><a href="https://tio.run/##TcvRasIwGIbh817FbygxPzVVYQciTa7AHQwP2yAJTizGtEkja4f3XtsNxk6f73uvurt9WjuORmzlJomlEiaJzO8DCm0tWwuPgdJLY8@BVUyvDHLJtOmY5wbXQlOKaNh33ZbbPFcBKY0QEg/uORR8NqcEq/wULWFZpLN4hVlGPggWqSz7Z1/wu27fWXXicsBhFaFXi8VmvOvagYCLrVuYDyco3/J8pyCFygGXcG4SgPYRjzEc3KTE7YFAlkF3bb7ATeNv9u/if/gPCBlf" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h2>Python 3, <s>204</s> 189 bytes</h2>

<pre><code>import itertools as p
n=int(input())
r=range(n)
b='.'*(n-1)+'Q'
for c in p.permutations(r):
 if len(set((x*z+c[x],z)for x in r for z in[1,-1]))==n+n:[print(*(b[x:]+b[:x]))for x in c];break
</code></pre>

<p>Brute force search through all permutations. I could remove the * and print the list comprehensions, but they look awful.</p>

<p>Output:</p>

<pre><code>10
Q . . . . . . . . .
. . Q . . . . . . .
. . . . . Q . . . .
. . . . . . . Q . .
. . . . . . . . . Q
. . . . Q . . . . .
. . . . . . . . Q .
. Q . . . . . . . .
. . . Q . . . . . .
. . . . . . Q . . .
</code></pre>

<p>Slightly ungolfed:</p>

<pre><code>import itertools as p
n=int(input())
r=range(n)
b='.'*(n-1)+'Q'
for c in p.permutations(r):
    if len(set( (x*z+c[x],z) for x in r for z in[1,-1] )) == n+n:
        [print(*(b[x:] + b[:x])) for x in c]
        break
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>24</s> 21 bytes</h1>

<pre><code>,JŒc€IF€An/PC
ẊÇ¿=þRG
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/1/H6@ik5EdNazzdgIRjnn6AM9fDXV2H2w/ttz28L8j9////FgA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Assuming each queen are placed on separate rows, we only need to find the column indices to place each queen at to avoid conflicts, which can be found by generating a random permutation of <code>[1, 2, ..., n]</code> and testing it.</p>

<h2>Explanation</h2>

<pre><code>,JŒc€IF€An/PC  Helper. Input: permutation of [1, 2, ..., n]
 J             Enumerate indices, obtains [1, 2, ..., n]
,              Join
  Œc€          Find all pairs in each
     I         Calculate the difference of each pair
      F€       Flatten each
        A      Absolute value
               (We now have the distance in column between each queen and
                the distance in rows between each queen. If they are unequal,
                the queens do not conflict with each other)
         n/    Reduce using not-equals
           P   Product, returns 1 only if they are all unequal
            C  Complement
               Returns 1 when there is a conflict, else 0

ẊÇ¿=þRG  Main.  Input: n
Ẋ        Shuffle (When given an integer, it will shuffle [1, 2, ..., n])
 Ç¿      While the helper returns 1, continue shuffling
     R   Range, gets [1, 2, ..., n]
   =þ    Equality table (Generates the board as a matrix)
      G  Pretty-print the matrix
</code></pre>
</div>
<div id="pu10" class="pu"><h1>C, 114 bytes</h1>

<pre class="lang-c prettyprint-override"><code>Q(n,o,y){o=n%2;n-=o;for(y=0;y&lt;n+o;++y)printf("%*c\n",y&lt;n?o+n-(n+y%(n/2)*2+(n%6?y&lt;n/2?n/2-1:2-n/2:y&lt;n/2))%n:0,81);}
</code></pre>

<p>Directly prints a solution in O(1) time.</p>
</div>
<div id="pu11" class="pu"><h1>C - 222 bytes</h1>
<pre><code>v,i,j,k,l,s,a[99];main(){for(scanf(&quot;%d&quot;,&amp;s);*a-s;v=a[j*=v]-a[i],k=i&lt;s,j+=(v=j&lt;s&amp;&amp;(!k&amp;&amp;!!printf(2+&quot;\n\n%c&quot;-(!l&lt;&lt;!j),&quot; #Q&quot;[l^v?(l^j)&amp;1:2])&amp;&amp;++l||a[i]&lt;s&amp;&amp;v&amp;&amp;v-i+j&amp;&amp;v+i-j))&amp;&amp;!(l%=s),v||(i==j?a[i+=k]=0:++a[i])&gt;=s*k&amp;&amp;++a[--i]);}
</code></pre>
<p>The code is not mine, but from the <a href="http://www.ioccc.org/1990/baruch/" rel="nofollow noreferrer">IOCCC</a>. I hope I'm not breaking any rules. Also, this displays all solutions for N between 4 and 99. I'll try to get a TIO link later.</p>
</div>
<div id="pu12" class="pu"><h1>Mathematica, 103 <del>108</del> <del>110</del> <del>117</del> bytes</h1>

<p>-5 bytes for <code>DuplicateFreeQ</code> -> <code>E!=##&amp;@@@</code></p>

<p>-7 bytes for <code>ReplacePart[Array[],]</code> -> <code>SparseArray[]</code></p>

<pre><code>SparseArray[Thread@#&amp;@@Select[Permutations@Range@#~Tuples~2,And@@(E!=##&amp;@@@{#-#2,+##})&amp;@@#&amp;]-&gt;1,{#,#}]&amp;
</code></pre>

<p>Return a 2D-array. It takes 2.76s to calculate <code>f[6]</code> and 135s for <code>f[7]</code>. (In the current version, <code>-</code> becomes <code>0</code> and <code>Q</code> to <code>1</code>.</p>

<p><a href="https://i.sstatic.net/kNzgW.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/kNzgW.png" alt="output"></a></p>

<p>The algorithm is similar to MATL answer but here the code is completely brute-force.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, <s>33</s> <s>32</S> 27 bytes</h1>

<pre><code>`x,GZ@]1Z?tt!P!,w&amp;TXds]h1&gt;a
</code></pre>

<p><a href="https://tio.run/##y00syfn/P6FCxz3KIdYwyr6kRDFAUadcLSQipTg2w9Au8f9/QwMA" rel="noreferrer" title="MATL – Try It Online"><strong>Try it online!</strong></a></p>

<p>Semi-brute force, non-determistic approach:</p>

<ol>
<li>Generate a random permutation of row positions</li>
<li>Generate a random permutation of column positions</li>
<li>Check that no queens share a diagonal or anti-diagonal</li>
<li>Repeat if necessary.</li>
</ol>

<p>The obtained solution is random. If you run the code again you may get a different valid configuration. Running time is also random, but the longest test case (<code>n = 10</code>) finishes in about 30 seconds in TIO most of the time.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/133736/">133736</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




