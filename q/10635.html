<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::10635</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Javascript</td><td>130207T002109Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/10640#10640">Shmiddty</a></td></tr>
<tr d-ix="1"><td>113</td><td>Dyalog APL</td><td>171119T172142Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/148572#148572">ngn</a></td></tr>
<tr d-ix="2"><td>1056</td><td>Mathematica</td><td>130208T212642Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/10655#10655">DavidC</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>130213T074412Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/10676#10676">Ray</a></td></tr>
<tr d-ix="4"><td>537</td><td>C</td><td>130208T013006Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/10648#10648">baby-rab</a></td></tr>
<tr d-ix="5"><td>566</td><td>Python</td><td>130206T193645Z</td><td><a href="https://codegolf.stackexchange.com/questions/10635/working-minesweeper/10637#10637">beary605</a></td></tr>
</table>
<div id="pu0" class="pu"><h2>Javascript, 978 bytes (824 without CSS)</h2>
<p><a href="https://jsfiddle.net/8s37mz1j/" rel="nofollow noreferrer">https://jsfiddle.net/8s37mz1j/</a></p>
<p>Checklist:</p>
<pre><code>Randomized mine generation - yes
8x8 field with 10 mines - yes
Mine flags - Yes
&quot;unknown&quot; flags - no
Reveal nearby blank spaces when a blank space has been revealed. - yes
Input and output code: It must be playable. - yes
</code></pre>
<p>JS:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false" data-babel-preset-react="false" data-babel-preset-ts="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>(function(){
    f=Math.floor;r=Math.random;b=8,s=[-1,0,1],o='',m='*',l=0;

    for(g=[i=b];i;)g[--i]=[0,0,0,0,0,0,0,0];
    for(i=10,a=f(r()*64);i--;g[f(a/b)][a%b]=m)while(g[f(a/b)][a%b])a=f(r()*64);
    for(i=64;i--;z.id='b'+(63-i),c.appendChild(z))z=document.createElement('button');
    for(d=b;d--;)
      for(r=b;r--;)
        s.map(function(y){
          s.map(function(x){
            if(g[d][r]!=m&amp;&amp;g[d+y]&amp;&amp;g[d+y][r+x]==m)g[d][r]++;
          });
        });

    c.onclick=function(e){
        var t=e.target,
            i=t.id.slice(1),
            x=i%b,
            y=f(i/b),
            n=t.className=='b';

      if(t.innerHTML||(n&amp;&amp;!e.ctrlKey))return;
      if(e.ctrlKey)return t.className=(n?'':'b')

      if(q(x,y))alert('boom')
      if(l==54)alert('win')
    };
  function q(x,y){
    if(x&lt;0||x&gt;7||y&lt;0||y&gt;7)return;

    var p=y*b+x,
        v=g[y][x],
        t=document.all['b'+p];

    if(v!=m&amp;&amp;!t.innerHTML){
      t.innerHTML=g[y][x];
      t.className='f';
      l++;
      if(!v){t.className='z';s.map(function(d){s.map(function(r){q(x+r,y+d)})})}
    }
    return v==m
  }
})();</code></pre>
<pre class="snippet-code-css lang-css prettyprint-override"><code>#c{
  width:300px;
  height:300px;
}
button{
  width:12.5%;
  height:12.5%;
  line-height:30px;
}
.f,.z{
  background:#fff;
  border:solid 1px #fff;
}
.z{
  color:#fff;
}
.b{background:#f00}</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div id="c"&gt;</code></pre>
</div>
</div>
</p>
<p>MiniJS <strong>812 bytes</strong>:</p>
<pre><code>f=Math.floor;r=Math.random;b=8,s=[-1,0,1],o='',m='*',l=0,h='b';for(g=[i=b];i;)g[--i]=[0,0,0,0,0,0,0,0];for(i=10,a=f(r()*64);i--;g[f(a/b)][a%b]=m)while(g[f(a/b)][a%b])a=f(r()*64);for(i=64;i--;z.id=h+(63-i),c.appendChild(z))z=document.createElement('button');for(d=b;d--;)for(r=b;r--;)s.map(function(y){s.map(function(x){if(g[d][r]!=m&amp;&amp;g[d+y]&amp;&amp;g[d+y][r+x]==m)g[d][r]++})});c.onclick=function(e){var t=e.target,i=t.id.slice(1),n=t.className==h;if(t.innerHTML||(n&amp;&amp;!e.ctrlKey))return;if(e.ctrlKey)return t.className=(n?'':h);if(q(i%b,f(i/b)))alert('boom');if(l==54)alert('win')};function q(x,y){if(x&lt;0||x&gt;7||y&lt;0||y&gt;7)return;var p=y*b+x,v=g[y][x],t=document.all[h+p];if(v!=m&amp;&amp;!t.innerHTML){t.innerHTML=g[y][x];t.className='f';l++;if(!v){t.className='z';s.map(function(d){s.map(function(r){q(x+r,y+d)})})}}return v==m}
</code></pre>
<p>HTML <strong>12 bytes</strong></p>
<pre><code>&lt;div id=&quot;c&quot;&gt;
</code></pre>
<p>The CSS isn't necessary from a functionality standpoint, but is from a usability standpoint:</p>
<pre><code>#c{
  width:300px;
  height:300px;
}
button{
  width:12.5%;
  height:12.5%;
  line-height:30px;
}
.f,.z{
  background:#fff;
  border:solid 1px #fff;
}
.z{
  color:#fff;
}
.b{background:#f00}
</code></pre>
<p>Mini CSS <strong>154 bytes</strong>:</p>
<pre><code>#c{width:300px;height:300px}button{width:12.5%;height:12.5%;line-height:30px}.f,.z{background:#fff;border:solid 1px #fff}.z{color:#fff}.b{background:#f00}
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Dyalog APL, 113 bytes</h1>
<p><code>{⎕←1 0⍕c+○○h⋄10=+/,h:1⋄m⌷⍨i←⎕:0⋄∇{~⍵⌷h:0⋄(⍵⌷h)←0⋄0=⍵⌷c:∇¨(,⍳⍴m)∩⍵∘+¨,2-⍳3 3⋄0}i}h←=⍨c←{⍉3+/0,⍵,0}⍣2⊢m←8 8⍴10≥?⍨64</code></p>
<p>non-competing: no &quot;mine&quot; and &quot;unknown&quot; flags</p>
<p>prints <code>*</code> for unopened cells and digits for opened (including <code>0</code>)</p>
<p>repeatedly asks the user for the 1-based coordinates of a cell to open</p>
<p>ultimately outputs <code>0</code> on failure (mine opened) or <code>1</code> on success (only 10 unopened left)</p>
<p>looks like this:</p>
<pre><code>********
********
********
********
********
********
********
********
⎕:
      1 1
00000000
11012321
*112****
********
********
********
********
********
⎕:
      3 8
00000000
11012321
*112***1
********
********
********
********
********
⎕:
      4 7
00000000
11012321
*112***1
******3*
********
********
********
********
⎕:
</code></pre>
<p>...</p>
</div>
<div id="pu2" class="pu"><h1>Mathematica <strike>566 548</strike> 1056</h1>
<p><strong>Edit</strong>: This is a complete rewrite. I gave up trying to obtain the shortest code and decided instead to build in the features that made most sense.</p>
<p><code>r</code> indicates the number of rows in the grid. <code>c</code> indicates the number of columns in the grid.
<code>m</code>: number of mines.</p>
<p>The game is played by mouse-clicking on the buttons. If the player clicks on a mine, the cell turns black and the program prints &quot;You Lose!&quot;</p>
<p>The checkbox &quot;u&quot; allows the player to peek at the complete solution at any time.
The flags, &quot;?&quot; and &quot;!&quot; can be placed in any cell as desired.</p>
<pre><code>DynamicModule[{s, x, f, l},
Manipulate[
Column[{
Grid[s],
If[u, Grid@f, Null]
}],
Grid[{{Control@{{r, 8}, 4, 16, 1, PopupMenu}, 
 Control@{{c, 8}, 4, 16, 1, PopupMenu},
 Control@{{m, 10}, 1, 50, 1, PopupMenu}},
{Button[&quot;New&quot;, i], 
 Control@{{e, 0}, {0 -&gt; &quot;play&quot;, 1 -&gt; &quot;?&quot;, 2 -&gt; &quot;!&quot;}, SetterBar}, 
 Control@{{u, False}, {True, False}}}}],
 Deployed -&gt; True,

 Initialization :&gt;
 (p = ReplacePart;
  q = ConstantArray;
  z = Yellow;
  w = White;    
  b := Array[Button[&quot;  &quot;, v[{#, #2}], Background -&gt; z] &amp;, {r, c}];
  a := RandomSample[l = Flatten[Array[List, {r, c}], 1], m];
  d[m1_] := 
   p[ListConvolve[BoxMatrix@1, p[q[0, {r, c}], (# -&gt; 1) &amp; /@ m1], 2,
    0], (# -&gt; &quot;*&quot;) &amp; /@ (x)];
  n[y_] := Complement[Select[l, ChessboardDistance[y, #] == 1 &amp;], x];
  d[m1_] := 
  p[ListConvolve[BoxMatrix@1, p[q[0, {r, c}], (# -&gt; 1) &amp; /@ m1], 2,
    0], (# -&gt; &quot;*&quot;) &amp; /@ (x)];

  v[{r_, c_}] :=
   Switch[e,
    1, If[s[[r, c, 3, 2]] == z, 
     s = p[s, {{r, c, 1} -&gt; If[s[[r, c, 1]] == &quot;?&quot;, &quot;  &quot;, &quot;?&quot;]}], 
     Null],
  
    2, If[s[[r, c, 3, 2]] == z, 
    s = p[s, {{r, c, 1} -&gt; If[s[[r, c, 1]] == &quot;!&quot;, &quot;  &quot;, &quot;!&quot;]}], 
    Null],
    3, Null,
  
  
    0, Switch[f[[r, c]],
     &quot;*&quot;, (Print[&quot;You lose!&quot;]; (s = p[s, {r, c, 3, 2} -&gt; Black])),
     0, (s = p[s, {{r, c, 1} -&gt; &quot;  &quot;, {r, c, 3, 2} -&gt; w}]; 
      f = p[f, {{r, c} -&gt; &quot;&quot;}]; v /@ n[{r, c}]),
     &quot;  &quot;, Null,
     _, (s = p[s, {{r, c, 1} -&gt; f[[r, c]], {r, c, 3, 2} -&gt; w}])]];
  
   i :=
   (x = a;s = b;f = d[x]);i) ] ]
</code></pre>
<p><strong>Initial State</strong></p>
<p><img src="https://i.sstatic.net/S8Sy9.png" alt="pic1" /></p>
<p><strong>At a later point...</strong></p>
<p><img src="https://i.sstatic.net/Cfibc.png" alt="pic2" /></p>
</div>
<div id="pu3" class="pu"><h1>Python 2.7 (487C)</h1>

<pre><code>"""
char meaning:
    '?': unknown flag
    '!': mine flag
    'x': default
how to play:
    Input 3 chars each time. The first char is the action
    and the rest form a position. For example, '013' means
    uncover grid (1,3), '110' means flag the grid (1,0).

    The top-left corner is (0, 0), bottom-left (7,0), etc.

    Player will lose after uncover a mine, the program will 
    output "Bom". If the Player uncovers all grid that do 
    not contain a mine, he wins and the program will output 
    "Win".
"""
import random as Z
S=sum
M=map
T=range
P=[(i,j)for i in T(8)for j in T(8)]
C=dict(zip(T(-3,9),'?!x012345678'))
m={p:-1 for p in P}
h=Z.sample(P,10)
def U(p):
 if m[p]&gt;=0:return 0
 n=filter(lambda(c,d):0&lt;max(abs(p[0]-c),abs(p[1]-d))&lt;2,P)
 m[p]=s=S((x in h)for x in n)
 return(1 if s else S(M(U,n))+1,-1)[p in h]
s=u=0
while(s&lt;54)&amp;(u&gt;-1):
 f,i,j=M(int,raw_input(''.join((C[m[x]]+'\n '[x[1]&lt;7])for x in P)))
 p=i,j;c=m[p]
 if f*(c&lt;0):m[p]=-1-(-c)%3
 else:u=U(p);s+=u
print'WBionm'[s&lt;54::2]
</code></pre>

<p>Full game experience:</p>

<pre><code>x x x x x x x x
x x x x x x x x
x x x x x x x x
x x x x x x x x
x x x x x x x x
x x x x x x x x
x x x x x x x x
x x x x x x x x
000
0 0 1 x x x x x
0 0 2 x x x x x
0 0 2 x x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
x 1 0 1 x x x x
070
0 0 1 x x x x x
0 0 2 x x x x x
0 0 2 x x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
123
0 0 1 x x x x x
0 0 2 x x x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
113
0 0 1 x x x x x
0 0 2 ! x x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
003
0 0 1 1 x x x x
0 0 2 ! x x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
004
0 0 1 1 1 x x x
0 0 2 ! x x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
014
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 x x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
154
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 x x x x
1 1 0 2 ! x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
044
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 x x x x
0 0 0 1 1 x x x
1 1 0 2 ! x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
034
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 3 x x x
0 0 0 1 1 x x x
1 1 0 2 ! x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
035
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 3 3 x x
0 0 0 1 1 x x x
1 1 0 2 ! x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
045
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! x x x
x 1 0 2 x x x x
1 1 0 1 x x x x
055
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! x x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 x x x x
1 1 0 1 x x x x
124
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! ! x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 x x x x
1 1 0 1 x x x x
164
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! ! x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 x x x x
174
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! ! x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 ! x x x
074
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! ! x x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
125
0 0 1 1 1 x x x
0 0 2 ! 4 x x x
0 0 2 ! ! ! x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
005
0 0 1 1 1 1 x x
0 0 2 ! 4 x x x
0 0 2 ! ! ! x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
015
0 0 1 1 1 1 x x
0 0 2 ! 4 4 x x
0 0 2 ! ! ! x x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
126
0 0 1 1 1 1 x x
0 0 2 ! 4 4 x x
0 0 2 ! ! ! ! x
0 0 1 2 3 3 x x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
036
0 0 1 1 1 1 x x
0 0 2 ! 4 4 x x
0 0 2 ! ! ! ! x
0 0 1 2 3 3 3 x
0 0 0 1 1 1 x x
1 1 0 2 ! 2 x x
x 1 0 2 ! x x x
1 1 0 1 1 x x x
046
0 0 1 1 1 1 x x
0 0 2 ! 4 4 x x
0 0 2 ! ! ! ! x
0 0 1 2 3 3 3 2
0 0 0 1 1 1 0 0
1 1 0 2 ! 2 0 0
x 1 0 2 ! 2 0 0
1 1 0 1 1 1 0 0
127
0 0 1 1 1 1 x x
0 0 2 ! 4 4 x x
0 0 2 ! ! ! ! !
0 0 1 2 3 3 3 2
0 0 0 1 1 1 0 0
1 1 0 2 ! 2 0 0
x 1 0 2 ! 2 0 0
1 1 0 1 1 1 0 0
007
0 0 1 1 1 1 x 1
0 0 2 ! 4 4 x x
0 0 2 ! ! ! ! !
0 0 1 2 3 3 3 2
0 0 0 1 1 1 0 0
1 1 0 2 ! 2 0 0
x 1 0 2 ! 2 0 0
1 1 0 1 1 1 0 0
017
0 0 1 1 1 1 x 1
0 0 2 ! 4 4 x 3
0 0 2 ! ! ! ! !
0 0 1 2 3 3 3 2
0 0 0 1 1 1 0 0
1 1 0 2 ! 2 0 0
x 1 0 2 ! 2 0 0
1 1 0 1 1 1 0 0
016
Win
</code></pre>

<p>The last step is dangerous, though.</p>
</div>
<div id="pu4" class="pu"><h2>C, <strike>568, 557,</strike> 537</h2>

<pre><code>Checklist:
  Randomized mine generation - yes
  8x8 field with 10 mines - yes
  Mine and "unknown" flags - yes
  Reveal nearby blank spaces when a blank space has been revealed. - yes
  Input and output code: It must be playable. - yes

Further to playable: 
  Win detection (found all mines, or revealed all empties)
  Bang detection (hit a mine)
  Game terminates.

Output format:
  # - unrevealed
  ! - a flagged mine
  * - a mine
  (number) - number of neighbouring mines
  ? - unknown flag

Input format:
  x y f 
  - where x is 0..7, y is 0..7 (origin upper-left)
  - f is 0 to open up, 1 to flag a mine, and 2 to flag a unknown
</code></pre>

<p>example game:</p>

<pre><code>./a.out
5 5 0
# 1 0 0 0 2 # #
# 1 0 0 0 2 # #
# 1 0 0 0 1 1 1
# 1 0 0 0 0 0 0
# # 1 0 0 0 1 1
# # 1 0 0 0 1 #
# # # 1 2 1 # #
# # # # # # # #
6 1 1
# 1 0 0 0 2 # #
# 1 0 0 0 2 ! #
# 1 0 0 0 1 1 1
# 1 0 0 0 0 0 0
# # 1 0 0 0 1 1
# # 1 0 0 0 1 #
# # # 1 2 1 # #
# # # # # # # #
7 5 0
# 1 0 0 0 2 # #
# 1 0 0 0 2 ! #
# 1 0 0 0 1 1 1
# 1 0 0 0 0 0 0
# # 1 0 0 0 1 1
# # 1 0 0 0 1 *
# # # 1 2 1 # 1
# # # # # # # #
bang!
</code></pre>

<p>code:</p>

<pre><code>// 8x8 grid but with padding before first row, after last row, and after last column, i.e. its 9x10
m[99]; // 0=empty,1=mine
u[99]; // 0=revealed,1=unrevealed,2=flag,3=unknown

// count neighbouring mines (8way)
c(i){return m[i-8]+m[i-9]+m[i-10]+m[i+8]+m[i+9]+m[i+10]+m[i-1]+m[i+1];}

// reveal (4way)
r(i){
    if(u[i]){
        u[i]=0;
        if(!c(i))r(i-9),r(i+9),r(i+1),r(i-1);
    }
}

i,x,y,f,e;
main(){
    // place 10 mines
    for(srand(time(0));i&lt;10;){
        x=rand()%64;
        x+=9+x/8;
        if(!m[x]){
            m[x]=1;
            i++;
        }
    }
    for(;y&lt;64;y++)u[y+9+y/8]=1; // mark visible grid as being unrevealed

    while(!e){
        // read input 0..7 0..7 0..2
        scanf("%d%d%d",&amp;x,&amp;y,&amp;f);
        i=x+9+y*9;
        if(f)u[i]=f==1?2:u[i]==3?1:3;else r(i); // flag, toggle unknown/unrevealed, open

        // show grid and calc score
        for(y=f=x=0;x&lt;64;x++){
            i=x+9+x/8;
            putchar(u[i]?" #!?"[u[i]]:m[i]?42:48+c(i)); // 42='*', 48='0'
            putchar(x%8==7?10:32);
            if(!u[i])y+=m[i]?-99:1;   // y = number of correctly open
            if(u[i]==2)f+=m[i]?1:-99; // f = number of correct mines
        }
        if(y&lt;0||y==54||f==10)e=puts(y&lt;0?"bang!":"win!"); // 54 = 64-10
    }
}
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Python (<s>502</s> 566)</h2>

<p>Checklist:</p>

<pre><code>Randomized mine generation - yes
8x8 field with 10 mines - yes
Mine and "unknown" flags - yes
Reveal nearby blank spaces when a blank space has been revealed. - yes
Input and output code: It must be playable. - yes
</code></pre>

<p>It has a win detector as well.</p>

<p>Input is given while the game is running, with <code>(f, x, y)</code>. <code>(x, y)</code> is the coordinates of the grid selection, <code>f</code> is whether you want to flag or not. <code>(0, 0, 0)</code> would open up <code>(0, 0)</code>, and <code>(1, 2, 3)</code> would flag (2, 3). Flagging works in a cycle: flagging a square twice gives a question mark.</p>

<p>(number) - number of mines<br>
(space) - unexplored<br>
. - 0 mines<br>
! - flag<br>
" - question<br></p>

<pre><code>import random
A=[-1,0,1]
R=lambda x:[x+i for i in[-9,-8,-7,-1,1,7,8,9]if(0&lt;x+i&lt;64)&amp;([i,x%8]not in([7,0],[-7,7],[-1,0],[1,7]))]
M=lambda p:sum(G[i]=='*'for i in R(p))
def V(p):
 m=M(p);G[p]=`m`if m else'.'
 if m&gt;0:return
 for c in R(p):
  if' '!=G[c]:continue
  m=M(c);G[c]=`m`
  if m==0:G[c]='.';V(c)
G=[' ']*54+['*']*10
random.shuffle(G)
while' 'in`G`:
 for i in range(8):print[j.replace('*',' ')[0]for j in G[8*i:8*i+8]]
 i=input()[::-1];a=i[0]*8+i[1];b=G[a]
 if i[2]:G[a]=(chr(ord(b[0])+1)if'"'!=b[0]else' ')+b[1:];continue
 if'*'==b:print'L';break
 if'!'!=b:V(a)
</code></pre>

<p>Needs to be improved: function R [get all squares around item p] (101 chars), printing (69 chars), flagging (72 chars)</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/10635/">10635</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




