<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::179441</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>319</td><td>Python3</td><td>240521T203632Z</td><td><a href="https://codegolf.stackexchange.com/questions/179441/a-turtle-finds-a-portal/273228#273228">Ajax1234</a></td></tr>
<tr d-ix="1"><td>341</td><td>Python 2</td><td>190203T194648Z</td><td><a href="https://codegolf.stackexchange.com/questions/179441/a-turtle-finds-a-portal/179443#179443">nedla200</a></td></tr>
<tr d-ix="2"><td>391</td><td>Python 2</td><td>190204T172900Z</td><td><a href="https://codegolf.stackexchange.com/questions/179441/a-turtle-finds-a-portal/179484#179484">mdahmoun</a></td></tr>
<tr d-ix="3"><td>138</td><td>JavaScript ES7</td><td>190203T202355Z</td><td><a href="https://codegolf.stackexchange.com/questions/179441/a-turtle-finds-a-portal/179444#179444">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 319 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
M=[-1,1,0]
def f(b):
 d={3:[]}
 for x,r in E(b):
  for y,v in E(r):d[v]={*d.get(v,[]),(x,y)}
 q=[(1,[*d[0]][0],d)]
 for p,(x,y),d in q:
  for X in M:
   for Y in M:
    U=(x+X,y+Y)
    if U in d[4]:return p
    if U in d[1]:q+=[(p+1,U,d)]
    if U in d[3]:D=eval(str(d));D[3]-={U};q+=[(p+1,*D[3],D)];D[3]=[]
</code></pre>
<p><a href="https://tio.run/##tZA7b4MwFIXn8iu82Q43VSgZKkfekhExpEhEloekhpaoJcQlKAjlt1MeTUteTTN04Mr3Hnw@n5vk6esqth8TXZYTHsSb90DP08BwuOhbYMFAGioIUUgWlBlI8cJmQu4MFK402oJGUYwmrdaMcsjakaZMiUzyoqfuX4KUZCAkBbKFnFa311wQC0RPiYGU1QeKytYzaf8BVdus97Z@3Tl117SznxZ5nGxNH3JzRps@CpFXy0oMJdNButExSo4US7K1WT0hMS3wWvaBbks25kE2fyMfqSaK0tG4mvV54e1G3xd79QzGVDYiF7KsF/W8irNAp81K7r7wQhT4CbMBYB8zC7CD2QNgFzMb8BSz4U4sZZNrWeOj9hzV54U0Eh3FKQnJ3liIygtQZbUv0/YkAYnOtFt@k5CklJ5S0BfGuYxxzmLcMxj3Vozb8XL@PY17W5o/Yqbd@IdL65aLaa4vzb@SxunkOsK4J2nKTw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>441</s> <s>431</s> 341 bytes</h1>



<pre class="lang-python prettyprint-override"><code>from itertools import*
G=input()
W=len(G[0])
H=len(G)
A=[0]*5
E=enumerate
for y,r in E(G):
 for x,C in E(r):A[C]=[x,y]
for L in count():
 for M in product(*[zip('UDLR'*2,'LRDU    ')]*L):
  x,y=A[0]
  for m in M:
    x+='R'in m;x-='L'in m;y+='D'in m;y-='U'in m
    if(x,y)==A[3]:x,y=A[2]
    if 1-(W&gt;x&gt;-1&lt;y&lt;H)or G[y][x]&gt;3:break
  if[x,y]==A[1]:exit(L)
</code></pre>

<p><a href="https://tio.run/##TY8xb8MgEIXn8CvYABdLsdMubogUJVEyOEukqANiSFOsosbGoliC/nn3iKOqLLz7uPfu6KP/tF05jo2zLTZeO2/t7RubtrfOZ2gvTNcPnjL0Jm66o3s5VwwdJs3QWkCdvaCd0N3QanfxGjXW4cgdNh3eQU@FcCKBbybiWLWWGyVk4FHdm@v0cLVDB2Me3ceEemc/hqunmfwxPSXnbX0iWclJfdqeMRzCVFYnB4RHsYZNQCZ3m9zHCs3CkyAnAkX7GnJB6klGoNuHBHq@SzQzDYUcJiBpoaopslSJ4yKnb6uwyotlXB4YTNjLqGRQq0X17vTlC@aa5v6h5C5UpYPxtGbjKOWc42eO84LjIl2KY5mKB8v/4OI/4LhU6hc" rel="nofollow noreferrer">Try it online!</a></p>

<p>Input as lists, but using numbers instead of characters (thanks to Quintec) and a seperate value for the destination of the teleporter. Those large indentations should be tab characters if Stack Exchange removes them. Any tips or ideas especially welcome, as I feel that this could get <s><strong>much</strong></s> somewhat shorter.</p>

<p>The table for characters used in the challenge to the numbers used for my program is below, but you can also use <a href="https://tio.run/##hZBPC4JAEMXv@ykGOujGBmadAm@FeggPCgnLEkFqQq0iRvnpbUdN@wM6h2H3vfk9ZjevyksmzbqegYwekMr8XkKcFbdTSUhSpGewWlGn5OBuA4eBs3NtJ1D6NZI6jnBDUNbfKFFBdktyvlgKmENDYiwcVRoUJ5lEeptDBUG9@tM3BFSh9xy8JqizsNIYmg0qwZ8CLAu0QBtcrG6Z9wQYvRtd/2l/gl6O0rsJ2hylvQl6NUrvJ@g1yYtUlnqn07rmwNVvMURVC7H57UkwZYXfVvhheb8qw7cLEC8" rel="nofollow noreferrer">this program</a>.</p>

<pre class="lang-python prettyprint-override"><code>Challenge | My program
T         | 0
S         | 1
E         | 2
O         | 3
M         | 4
X         | -1
</code></pre>

<p>-10 bytes thanks to Quintec by changing the input from using characters to numbers.</p>

<p>-A lot of bytes thanks to Jonathan Frech, ElPedro, and Jonathan Allan.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 391 <s>397</s> <s>403</s> <s>422</s> bytes</h1>



<pre class="lang-python prettyprint-override"><code>M=input()
from networkx import*
a=b=c=d=0
N,h,w,S=[-1,0,1],len(M),len(M[0]),[]
for i in range(h):
 for j in range(w):
  I,m=(i,j),M[i][j]
  if m&gt;7:c,d=a,b;a,b=I
  if m&lt;0:Z=I
  if m==5:F=I
  S+=[I+I]
S+=[(a,b,c,d),(c,d,a,b)]
print len(shortest_path(from_edgelist([((A+p,B+q),(C,D))for A,B,C,D in S for p,q in[(p,q)for p in N for q in N]if-1&lt;A+p&lt;h and-1&lt;B+q&lt;w and M[C][D]*M[A+p][B+q]]),Z,F))-1
</code></pre>

<p><a href="https://tio.run/##RVBLi8IwEL73VwT2ktgptAvi0m0EHwg91Is3Q5BqWxvXprFm6e6v706quJBkvkdmmBnza@tWvw9DxpU235Yyr@rahujS9m339UNUY9rOTrycH/mJFzz0tlBDDzsugghCiCRcS00z9ggilAyE9Kq2I4ooTbpcn0tas9gjTrv8a73TSAoNpwouDDKhpLhI1FRFmvksPkHBczh@4uXpU07CeP8inE/jzch2Phepn0rPAYoJgMkMKL6AjEnPdEpb4nq81zhQebcHk9uaumkPZXEur@puqaB04RtY@jdMXsGaMdf0ApaAxLW@G6cwcEMiKMbxg3HWdrRuI5SqCqIESyU1yXWBGEsmvcMkEysp1nKSCfSlQEPizvawYSyIhkG4vZIQyBQIgg8JRDyE53kKr/Mh5VsQzMnsDw" rel="nofollow noreferrer" title="Python 2 ‚Äì Try It Online">Try it online!</a></p>

<p>The problem is translated into a graph and the solution is to find the shortest path form the turtle to the strawberry.</p>

<pre class="lang-python prettyprint-override"><code>Challenge | This code
T         | -1
S         |  5
O         |  8
M         |  0
X         |  1
</code></pre>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES7), <s>¬†140 139¬†</s> 138 bytes</h1>
<p>Takes input as a matrix of integers with the following mapping:</p>
<ul>
<li><span class="math-container">\$-1\$</span> = üîµ (any portal)</li>
<li><span class="math-container">\$0\$</span> = <span class="math-container">\$X\$</span> (empty)</li>
<li><span class="math-container">\$1\$</span> = üåÑ (mountain)</li>
<li><span class="math-container">\$2\$</span> = üê¢ (turtle)</li>
<li><span class="math-container">\$3\$</span> = üçì (strawberry)</li>
</ul>

<pre class="lang-javascript prettyprint-override"><code>m=&gt;(R=g=(t,X,Y,i)=&gt;m.map((r,y)=&gt;r.map((v,x)=&gt;r[(u=0,t?v-t:(x-X)**2+(y-Y)**2&lt;3?v-3?~v?v:u--:R=R&lt;i?R:i:1)||g(u,x,y,u-~i,r[x]=1),x]=v)))(2)|R
</code></pre>
<p><a href="https://tio.run/##bY5Bj4IwEIXv/oreOtW2rrDJJsTKzZtpAh40yMEomhopBoFAlvWvswVl3Rjn0MybfvPmnbbF9rpL1SVjOtlHzUE0sZiBJ44CMrqia6qImMU83l4AUloZkd5FQctWBJCLD5q5BcscKNmKDIfWCCq2bpupbea2eyvcwskZczzhTZXrOcqZkLo@Qk5LWtGc3RRNgzIUE0LNWxBCwCK118yRQDESM/SNdom@JueIn5MjxPyUKA14ozFBI4RbApvmAPegaTsIOOdp2GndAXyx9DFXeh@V8gDaHOmWO5OfwWAOAcJLzn2OqYHbejYoJGg8RvaDWvTU4h31@aRk@ynfUtaL1x8l33r5XN4vmuq9ZE99vaSXBnoElP/SN78" rel="noreferrer" title="JavaScript (Node.js) ‚Äì Try It Online">Try it online!</a></p>
<h3>How?</h3>
<p>The main recursive search function <span class="math-container">\$g\$</span> is able to either look for a specific tile <span class="math-container">\$t\$</span> on the board (if it's called with <span class="math-container">\$t\ne 0\$</span>) or for any tile at <span class="math-container">\$(x,y)\$</span> which can be reached from the current position <span class="math-container">\$(X,Y)\$</span>.</p>
<p>It keeps track of the length of the current path in <span class="math-container">\$i\$</span> and updates the best result <span class="math-container">\$R\$</span> to <span class="math-container">\$\min(R,i)\$</span> whenever the turtle finds the strawberry.</p>
<p>It is first called with <span class="math-container">\$t=2\$</span> to find the starting position of the turtle.</p>
<p>It calls itself with <span class="math-container">\$t=-1\$</span> if a portal is reached, so that the turtle is teleported to the other portal. We do not increment <span class="math-container">\$i\$</span> during such an iteration.</p>
<p>Each visited tile is temporarily set to a mountain to prevent the turtle from moving twice on the same tile in the same path. If we get trapped in a dead-end, the recursion simply stops without updating <span class="math-container">\$R\$</span>.</p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>m =&gt; (                        // m[] = input matrix
  R =                         // initialize R to a non-numeric value
  g = (t, X, Y, i) =&gt;         // g = recursive search function taking t = expected tile,
                              //     (X, Y) = current coordinates, i = path length
    m.map((r, y) =&gt;           // for each row r[] at position y in m[]:
      r.map((v, x) =&gt;         //   for each tile v at position x in r[]:
        r[                    //     this statement will eventually restore r[x] to v
          ( u = 0,            //     u = next tile to look for, or 0 if none
            t ?               //     if we're looking for a specific tile:
              v - t           //       test whether we've found it
            :                 //     else:
              (x - X) ** 2 +  //       compute the squared Euclidean distance between
              (y - Y) ** 2    //       (x, y) and (X, Y)
              &lt; 3 ?           //       if it's less than 3 (i.e. reachable from (X, Y)):
                v - 3 ?       //         if v is not equal to 3:
                  ~v ?        //           if v is not equal to -1:
                    v         //             test if v = 0
                  :           //           else (v = -1):
                    u--       //             set u = -1 to find the other portal
                :             //         else (v = 3):
                  R = R &lt; i ? //           we've found the strawberry: set R = min(R, i)
                      R : i   //
              :               //       else (this tile can't be reached):
                1             //         yield 1
          ) ||                //     if the above result is falsy:
          g(                  //       do a recursive call:
            u,                //         t = u
            x, y,             //         move to (x, y)
            u - ~i,           //         unless u is set to -1, increment i
            r[x] = 1          //         set this tile to a mountain
          ),                  //       end of recursive call
          x                   //     restore r[x] ...
        ] = v                 //     ... to v
    ))                        // end of both map() loops
)(2) | R                      // initial call to g with t = 2; return R
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/179441/">179441</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




