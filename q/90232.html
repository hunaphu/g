<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::90232</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>212</td><td>Desmos</td><td>241213T013733Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/277222#277222">CrSb0001</a></td></tr>
<tr d-ix="1"><td>033</td><td>PARI/GP</td><td>221025T170640Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/253762#253762">alephalp</a></td></tr>
<tr d-ix="2"><td>056</td><td>APL Dyalog Unicode</td><td>210108T174807Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/217457#217457">user</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>210108T162015Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/217452#217452">Schlotte</a></td></tr>
<tr d-ix="4"><td>084</td><td>R</td><td>170911T220601Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/142453#142453">Giuseppe</a></td></tr>
<tr d-ix="5"><td>101</td><td>Mathematica</td><td>170216T022645Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/110200#110200">numberma</a></td></tr>
<tr d-ix="6"><td>014</td><td>Jelly</td><td>170215T161340Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/110132#110132">user6213</a></td></tr>
<tr d-ix="7"><td>058</td><td>Haskell</td><td>160818T124606Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90233#90233">ThreeFx</a></td></tr>
<tr d-ix="8"><td>029</td><td>J</td><td>160820T093947Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90425#90425">miles</a></td></tr>
<tr d-ix="9"><td>018</td><td>Actually</td><td>160820T080847Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90420#90420">user4594</a></td></tr>
<tr d-ix="10"><td>079</td><td>C GCC</td><td>160818T132257Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90236#90236">betseg</a></td></tr>
<tr d-ix="11"><td>049</td><td>Ruby</td><td>160820T081839Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90422#90422">Sherlock</a></td></tr>
<tr d-ix="12"><td>081</td><td>Python 2</td><td>160818T134720Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90238#90238">xenia</a></td></tr>
<tr d-ix="13"><td>059</td><td>Python 2</td><td>160820T081300Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90421#90421">user4594</a></td></tr>
<tr d-ix="14"><td>090</td><td>C#</td><td>160819T234903Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90387#90387">milk</a></td></tr>
<tr d-ix="15"><td>090</td><td>Octave</td><td>160819T204205Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90347#90347">dcsohl</a></td></tr>
<tr d-ix="16"><td>nan</td><td>><></td><td>160819T084548Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90302#90302">Sok</a></td></tr>
<tr d-ix="17"><td>066</td><td>Python 2</td><td>160819T003559Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90285#90285">xnor</a></td></tr>
<tr d-ix="18"><td>131</td><td>m4</td><td>160818T194406Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90266#90266">Program </a></td></tr>
<tr d-ix="19"><td>043</td><td>JavaScript ES6</td><td>160818T190946Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90263#90263">Neil</a></td></tr>
<tr d-ix="20"><td>093</td><td>R</td><td>160818T172608Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90259#90259">user5957</a></td></tr>
<tr d-ix="21"><td>016</td><td>Jelly</td><td>160818T145755Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90247#90247">Dennis</a></td></tr>
<tr d-ix="22"><td>020</td><td>CJam</td><td>160818T154728Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90254#90254">Peter Ta</a></td></tr>
<tr d-ix="23"><td>030</td><td>MATL</td><td>160818T134442Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90237#90237">Luis Men</a></td></tr>
<tr d-ix="24"><td>020</td><td>MATL</td><td>160818T144435Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90245#90245">Luis Men</a></td></tr>
<tr d-ix="25"><td>023</td><td>05AB1E</td><td>160818T140136Z</td><td><a href="https://codegolf.stackexchange.com/questions/90232/output-the-nth-rational-number-according-to-the-stern-brocot-sequence/90241#90241">Emigna</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Desmos, 212 bytes</h1>
<p><sup><a href="https://www.desmos.com/calculator/zd4pejhcsq" rel="nofollow noreferrer">Try it online! (link 1)</a> <a href="https://www.desmos.com/calculator/sm6dl89zaf" rel="nofollow noreferrer">Try it online! (link 2)</a></sup> (just please note that due to Desmos' max recursion limit, you'll have to wait quite some time just to get the function to even load values properly)</p>
<pre class="lang-none prettyprint-override"><code>s\left(n\right)=\left\{n=1:1,\operatorname{mod}\left(n,2\right)=0:s\left(\frac{n}{2}\right),s\left(\frac{n-1}{2}\right)+s\left(\frac{n+1}{2}\right)\right\}
r\left(n\right)=\frac{s\left(n\right)}{s\left(n+1\right)}
</code></pre>
<p>Readable version:</p>
<pre><code>s(n)={n=1:1,mod(n,2)=0:s(n/2),s((n-1)/2)+s((n+1)/2)}
r(n)=s(n)/s(n+1)
</code></pre>
<p>How does it work? Well, we can define recursive functions in Desmos:<span class="math-container">$$s(n)=\{n=1:1,\operatorname{mod}(n,2)=0:s(n/2),s((n-1)/2)+s((n+1)/2)\}$$</span>and now all we have to do is create <span class="math-container">\$r(n)=\frac{s(n)}{s(n+1)}\$</span>, and we're done!</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 33 bytes</h1>
<pre><code>f(n)=if(n,(1+f(n\2)^q=n%2*2-1)^q)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMGCpaUlaboWNxXTNPI0bTOBpI6GoTaQijHSjCu0zVM10jLSNQQyNaEKVdLyizTyFGwVDHUUTA10FAqKMvNKgAJKCrp2QAJkjCZULcxwAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 56 bytes (SBCS)</h1>

<pre class="lang-apl prettyprint-override"><code>{1(⍵{s←⍺⊃⍵⋄t←⍵[n←⍺+1]⋄⍺=⍺⍺:,/⍕¨s'/'t⋄n∇⍵,(s+t),t})1 1}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///P@1R24RqQ41HvVuri4HMR727HnU1A3mPultKwPyt0XkQcW3DWKAgkGELUtS7y0pH/1Hv1EMritX11UuAMnmPOtqBynU0irVLNHVKajUNFQxrgRYcWvGod7OCoQEA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>Inner operator:</p>
<pre class="lang-apl prettyprint-override"><code>{                 ⍝ ⍺ is counter, ⍺⍺ is input, ⍵ is sequence
 s ← ⍺ ⊃ ⍵       ⍝ s is the ⍺th element of ⍵ (1-indexed), i.e. s(n)
⋄t ← ⍵[n←⍺+1]     ⍝ t is s(n+1). Also create variable n that holds ⍺+1
⋄⍺ = ⍺⍺:          ⍝ If counter equals the n we want to reach
  s ÷ t           ⍝ Return s(n) / s(n+1)
⋄n ∇ ⍵,(s+t),t   ⍝ Otherwise, call itself again with counter incremented
                 ⍝ and the new terms added to the sequence
                 ⍝ ∇ is self reference and , is concatenate
}
</code></pre>
<p>The outer function just calls the inner one with 1 as the initial value of the counter, <code>1 1</code> as the initial sequence, and its right argument as the left operand of the inner operator (n).</p>
</div>
<div id="pu3" class="pu"><h2>Maple</h2>
<pre><code>0: do 1/(1+floor(%)-frac(%))od;
</code></pre>
<p>Uses % which is the ditto operator reevaluating the last expression.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 84 bytes</h1>



<pre class="lang-r prettyprint-override"><code>function(n,K=c(1,1)){for(i in 1:n)K=c(K,K[i]+K[i+1],K[i+1])
paste0(K[i],"/",K[i+1])}
</code></pre>

<p><a href="https://tio.run/##NY1BCsIwEEX3nqJ0NUNHnQhuSnOCHEEKDbWBgE5DEqEinj22iov/Pry/@LEkXdxDxuxnASGjR1CkEF9ujuArL5VqBTdtyFx836xoVE@/wl2wKU8M20T1sf77d7nabA8u2vsEQwLBQScbwu0JS7dfP9oT05lJ8TeMlJBEL1g@" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>The <a href="https://codegolf.stackexchange.com/a/90259/67312">older R implementation</a> doesn't follow the specs, returning a floating point rather than a string, so here's one that does.</p>
</div>
<div id="pu5" class="pu"><h1>Mathematica, <s>108</s> <s>106</s> 101 bytes</h1>

<pre><code>(s={1,1};n=1;a=AppendTo;t=ToString;Do[a[s,s[[n]]+s[[++n]]];a[s,s[[n]]],#];t@s[[n-1]]&lt;&gt;"/"&lt;&gt;t@s[[n]])&amp;
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 14 bytes</h1>

<pre><code>3ẋḶŒpḄċ
’Ç”/⁸Ç
</code></pre>

<p><a href="https://tio.run/nexus/jelly#@2/8cFf3wx3bjk4qeLij5Ug316OGmYfbHzXM1X/UuONw@39Dg6BDWw@3n1j3cOdsoKjCiXWHtj5qWgPmzQEK/AcA" rel="nofollow noreferrer" title="Jelly – TIO Nexus">Try it online!</a></p>

<p>Ooh, looks like I can beat the accepted answer by @Dennis, and in the same language at that. This works using a formula from OEIS: the number of ways to express (the number minus 1) in hyperbinary (i.e. binary with 0, 1, 2 as digits). Unlike most Jelly programs (which work either as a full program or a function), this one works only as a full program (because it sends part of the output to stdout, and returns the rest; when used as a full program the return value is sent to stdout implicitly, so all the output is in the same place, but this wouldn't work for a function submission).</p>

<p>This version of the program is <em>very</em> inefficient. You can create a much faster program that works for all input up to 2ⁿ via placing <em>n</em> just after the <code>ẋ</code> on the first line; the program has O(<em>n</em> × 3ⁿ) performance, so keeping <em>n</em> small is fairly important here. The program as written sets <em>n</em> equal to the input, which is clearly large enough, but also clearly too large in almost all cases (but hey, it saves bytes).</p>

<h2>Explanation</h2>

<p>As usual in my Jelly explanations, text in braces (e.g. <code>{the input}</code>) shows something that automatically filled in by Jelly due to missing operands in the original program.</p>

<p><strong>Helper function</strong> (calculates the <em>n</em>th denominator, i.e. the <em>n</em>+1th numerator):</p>

<pre><code>3ẋḶŒpḄċ
3ẋ       3, repeated a number of times equal to {the argument}
  Ḷ      Map 3 to [0, 1, 2]
   Œp    Take the cartesian product of that list
     Ḅ   Convert binary (or in this case hyperbinary) to a number
      ċ  Count number of occurrences of {the argument} in the resulting list
</code></pre>

<p>The first five bytes are basically just generating all possible hyperbinary numbers up to a given length, e.g. with input 3, the output of <code>Ḷ</code> is [[0,1,2],[0,1,2],[0,1,2]] so the cartesian product is [[0,0,0],[0,0,1],[0,0,2],[0,1,0],…,[2,2,1],[2,2,2]]. <code>Ḅ</code> basically just multiplies the last entry by 1, the penultimate entry by 2, the antepenultimate entry by 4, etc., and then adds; although this is normally used to convert binary to decimal, it can handle the digit 2 just fine, and thus works for hyperbinary too. Then we count the number of times the input appears in the resulting list, in order to get an appropriate entry in the sequence. (Luckily, the numerator and denominator follow the same sequence).</p>

<p><strong>Main program</strong> (asks for the numerator and denominator, and formats the output):</p>

<pre><code>’Ç”/⁸Ç
’Ç      Helper function (Ç), run on {the input} minus 1 (‘)
  ”/    {Output that to stdout}; start again with the constant '/'
    ⁸Ç  {Output that to stdout}; then run the helper function (Ç) on the input (⁸)
</code></pre>

<p>Somehow I keep writing programs that take almost as many bytes to handle I/O as they do to solve the actual problem…</p>
</div>
<div id="pu7" class="pu"><h2>Haskell, <s>78 77 65</s> 58 bytes</h2>

<p>Shamelessly stealing the optimized approach gives us:</p>

<pre><code>(s#t)0=show s++'/':show t
(s#t)n=t#(s+t-2*mod s t)$n-1
1#1
</code></pre>

<p>Thanks to @nimi for golfing a few bytes using an infix function!</p>

<p>(Still) uses 0-based indexing.</p>

<hr>

<p>The old approach:</p>

<pre><code>s=(!!)(1:1:f 0)
f n=s n+s(n+1):s(n+1):(f$n+1)
r n=show(s n)++'/':(show.s$n+1)
</code></pre>

<p>Damn the output format... And indexing operators. EDIT: And precedence.</p>

<p>Fun fact: if heterogenous lists were a thing, the last line could be:</p>

<pre><code>r n=show&gt;&gt;=[s!!n,'/',s!!(n+1)]
</code></pre>
</div>
<div id="pu8" class="pu"><h1>J, 29 bytes</h1>

<pre><code>([,'/',])&amp;":&amp;([:+/2|]!&amp;i.-)&gt;:
</code></pre>

<h2>Usage</h2>

<p>Large values of <em>n</em> require a suffix of <code>x</code> which denotes the use of extended integers.</p>

<pre><code>   f =: ([,'/',])&amp;":&amp;([:+/2|]!&amp;i.-)&gt;:
   f 1
1/1
   f 10
3/5
   f 50
7/12
   f 100x
7/19
   f 1000x
11/39
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Actually, 18 bytes</h2>
<pre><code>11,`│;a%τ@-+`nk'/j
</code></pre>
<p><a href="http://actually.tryitonline.net/#code=MTEsYOKUgjthJc-EQC0rYG5rJy9q&amp;input=Ng" rel="nofollow noreferrer">Try it online!</a></p>
<p>This solution uses <a href="https://codegolf.stackexchange.com/a/90254/45941">Peter's formula</a> and is likewise 0-indexed. Thanks to Leaky Nun for a byte.</p>
<p>Explanation:</p>
<pre><code>11,`│;a%τ@-+`nk'/j
11                  push 1, 1
  ,`│;a%τ@-+`n      do the following n times (where n is the input):
                      stack: [t s]
    │                 duplicate the entire stack ([t s t s])
     ;                dupe t ([t t s t s])
      a               invert the stack ([s t s t t])
       %              s % t ([s%t s t t])
        τ             multiply by 2 ([2*(s%t) s t t])
         @-           subtract from s ([s-2*(s%t) s t])
           +          add to t ([t+s-2*(s%t) t])
                      in effect, this is s,t = t,s+t-2*(s%t)
              k'/j  push as a list, join with &quot;/&quot;
</code></pre>
</div>
<div id="pu10" class="pu"><h1>C (GCC), 79 bytes</h1>

<p>Uses 0-based indexing.</p>

<pre class="lang-c prettyprint-override"><code>s(n){return!n?:n%2?s(n/2):s(-~n/2)+s(~-n/2);}r(n){printf("%d/%d",s(n),s(n+1));}
</code></pre>

<p><a href="https://ideone.com/ETnVZk" rel="nofollow">Ideone</a></p>
</div>
<div id="pu11" class="pu"><h1>Ruby, 49 bytes</h1>

<p>This is 0-indexed and uses Peter Taylor's formula. Golfing suggestions welcome.</p>

<pre><code>-&gt;n{s=t=1;n.times{s,t=t,s+t-2*(s%t)};"#{s}/#{t}"}
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Python 2, <s>85</s> 81 bytes</h1>

<pre><code>x,s=input(),[1,1]
for i in range(x):s+=s[i]+s[i+1],s[i+1]
print`s[x-1]`+"/"+`s[x]`
</code></pre>

<p>This submission is 1-indexed.</p>

<p>Using a recursive function, 85 bytes:</p>

<pre><code>s=lambda x:int(x&lt;1)or x%2 and s(x/2)or s(-~x/2)+s(~-x/2)
lambda x:`s(x)`+"/"+`s(x+1)`
</code></pre>

<p>If an output like <code>True/2</code> is acceptable, here's one at 81 bytes:</p>

<pre><code>s=lambda x:x&lt;1 or x%2 and s(x/2)or s(-~x/2)+s(~-x/2)
lambda x:`s(x)`+"/"+`s(x+1)`
</code></pre>
</div>
<div id="pu13" class="pu"><h2>Python 2, 59 bytes</h2>
<pre class="lang-py prettyprint-override"><code>s,t=1,1;exec&quot;s,t=t,s+t-2*(s%t);&quot;*input();print'%d/%d'%(s,t)
</code></pre>
<p>Uses <a href="https://codegolf.stackexchange.com/a/90254/45941">Peter's formula</a> and is similarly 0-indexed.</p>
<p><a href="http://ideone.com/fork/o8JVAT" rel="nofollow noreferrer">Try it online</a></p>
</div>
<div id="pu14" class="pu"><h1>C#, <s>91</s> 90 bytes</h1>
<pre><code>n=&gt;{Func&lt;int,int&gt;s=_=&gt;_;s=m=&gt;1==m?m:s(m/2)+(0==m%2?0:s(m/2+1));return$&quot;{s(n)}/{s(n+1)}&quot;;};
</code></pre>
<p>Casts to <code>Func&lt;int, string&gt;</code>.
This is the recursive implementation.</p>
<p>Ungolfed:</p>
<pre><code>n =&gt; 
{
    Func&lt;int,int&gt; s = _ =&gt; _; // s needs to be set to use recursively. _=&gt;_ is the same byte count as null and looks cooler.
    s = m =&gt;
        1 == m ? m               // s(1) = 1
        : s(m/2) + (0 == m%2 ? 0 // s(m) = s(m/2) for even
        : s(m/2+1));             // s(m) = s(m/2) + s(m/2+1) for odd
    return $&quot;{s(n)}/{s(n+1)}&quot;;
};
</code></pre>
<p>Edit: -1 byte. Turns out C# doesn't need a space between <code>return</code> and <code>$</code> for interpolated strings.</p>
</div>
<div id="pu15" class="pu"><h1>Octave, 90 bytes</h1>

<pre><code>function f(i)S=[1 1];for(j=1:i/2)S=[S S(j)+S(j+1) (j+1)];end;printf("%d/%d",S(i),S(i+1));end
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">&gt;&lt;&gt;</a>, 34+2 = 36 bytes</h1>
<p>After seeing Peter Taylor's excellent answer, I re-wrote my test answer (which was an embarrassing 82 bytes, using very clumsy recursion).</p>
<pre><code>&amp;01\$n&quot;/&quot;on;
&amp;?!\:@}:{:@+@%2*-&amp;1-:
</code></pre>
<p>It expects the input to be present on the stack, so +2 bytes for the <code>-v</code> flag. <a href="http://fish.tryitonline.net/#code=JjAxXCRuIi8ib247CiY_IVw6QH06ezpAK0AlMiotJjEtOg&amp;input=&amp;args=LXYgMTE" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h2>Python 2, 66 bytes</h2>



<pre class="lang-python prettyprint-override"><code>f=lambda n:1/n or f(n/2)+n%2*f(-~n/2)
lambda n:`f(n)`+'/'+`f(n+1)`
</code></pre>

<p>Uses the recursive formula.</p>
</div>
<div id="pu18" class="pu"><h1>m4, 131 bytes</h1>

<pre><code>define(s,`ifelse($1,1,1,eval($1%2),0,`s(eval($1/2))',`eval(s(eval(($1-1)/2))+s(eval(($1+1)/2)))')')define(r,`s($1)/s(eval($1+1))')
</code></pre>

<p>Defines a macro <code>r</code> such that <code>r(n)</code> evaluates according to the spec. Not really golfed at all, I just coded the formula.</p>
</div>
<div id="pu19" class="pu"><h2>JavaScript (ES6), 43 bytes</h2>

<pre><code>f=(i,n=0,d=1)=&gt;i?f(i-1,d,n+d-n%d*2):n+'/'+d
</code></pre>

<p>1-indexed; change to <code>n=1</code> for 0-indexed. The linked OEIS page has a useful recurrence relation for each term in terms of the previous two terms; I merely reinterpreted it as a recurrence for each fraction in terms of the previous fraction. Unfortunately we don't have inline TeX so you'll just have to paste it onto another site to find out how this formats:</p>

<p>$$ \frac{a}{b} \Rightarrow \frac{b}{a + b - 2(a \bmod b)} $$</p>
</div>
<div id="pu20" class="pu"><h1>R, 93 bytes</h1>
<pre><code>f=function(n)ifelse(n&lt;3,1,ifelse(n%%2,f(n/2-1/2)+f(n/2+1/2),f(n/2)))
g=function(n)f(n)/f(n+1)
</code></pre>
<p>Literally the simplest implementation. Working on golfing it a bit.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow">Jelly</a>, 16 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow">bytes</a></h1>

<pre><code>L‘Hị⁸Sṭ
1Ç¡ṫ-j”/
</code></pre>

<p><a href="http://jelly.tryitonline.net/#code=TOKAmEjhu4vigbhT4bmtCjHDh8Kh4bmrLWrigJ0v&amp;input=&amp;args=MTAwMA" rel="nofollow">Try it online!</a> or <a href="http://jelly.tryitonline.net/#code=TOKAmEjhu4vigbhT4bmtCjHDh-KBuMKh4bmrLWrigJ0vCjFyMjA7NTA7MTAwOzEwMDDDh-KCrFk&amp;input=" rel="nofollow">verify all test cases</a>.</p>

<h3>How it works</h3>

<pre><code>1Ç¡ṫ-j”/  Main link. Argument: n

1         Set the return value to 1.
 Ç¡       Apply the helper link n times.
   ṫ-     Tail -1; extract the last two items.
     j”/  Join, separating by a slash.


L‘Hị⁸Sṭ   Helper link. Argument: A (array)

L         Get the length of A.
 ‘        Add 1 to compute the next index.
  H       Halve.
   ị⁸     Retrieve the item(s) of A at those indices.
          If the index in non-integer, ị floors and ceils the index, then retrieves
          the items at both indices.
    S     Compute the sum of the retrieved item(s).
     ṭ    Tack; append the result to A.
</code></pre>
</div>
<div id="pu22" class="pu"><h2>CJam (20 bytes)</h2>

<pre><code>1_{_@_2$%2*-+}ri*'/\
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=1_%7B_%40_2%24%252*-%2B%7Dri*&#39;%2F%5C&amp;input=49">Online demo</a>. Note that this is 0-indexed. To make it 1-indexed, replace the initial <code>1_</code> by <code>T1</code>.</p>

<h3>Dissection</h3>

<p>This uses the characterisation due to Moshe Newman that</p>

<blockquote>
  <p>the fraction <code>a(n+1)/a(n+2)</code> can be generated from the previous fraction <code>a(n)/a(n+1) = x</code> by <code>1/(2*floor(x) + 1 - x)</code></p>
</blockquote>

<p>If <code>x = s/t</code> then we get</p>

<pre><code>  1 / (2 * floor(s/t) + 1 - s/t)
= t / (2 * t * floor(s/t) + t - s)
= t / (2 * (s - s%t) + t - s)
= t / (s + t - 2 * (s % t))
</code></pre>

<p>Now, if we assume that <code>s</code> and <code>t</code> are coprime then</p>

<pre><code>  gcd(t, s + t - 2 * (s % t))
= gcd(t, s - 2 * (s % t))
= gcd(t, -(s % t))
= 1
</code></pre>

<p>So <code>a(n+2) = a(n) + a(n+1) - 2 * (a(n) % a(n+1))</code> works perfectly.</p>

<pre><code>1_           e# s=1, t=1
{            e# Loop...
  _@_2$%2*-+ e#   s, t = t, s + t - 2 * (s % t)
}
ri*          e# ...n times
'/\          e# Separate s and t with a /
</code></pre>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>32</s> 30 bytes</h1>
<pre><code>1i:&quot;tt@TF-)sw@)v]tGq)V47bG)Vhh
</code></pre>
<p>This uses a direct approach: generates enough members of the sequence, picks the two desired ones and formats the output.</p>
<p><a href="http://matl.tryitonline.net/#code=MWk6InR0QFRGLSlzd0Apdl10R3EpVjQ3YkcpVmho&amp;input=MTAw" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>
</div>
<div id="pu24" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 20 bytes</h1>
<pre><code>FT+&quot;@:qtPXnosV47]xhh
</code></pre>
<p>This uses the characterization in terms of binomial coefficients given in <a href="https://oeis.org/A002487" rel="nofollow noreferrer">the OEIS page</a>.</p>
<p>The algorithm works in theory for all numbers, but in practice it is limited by MATL's numerical precision, and so it doesn't work for large entries. The result is accurate for inputs up to <code>20</code> at least.</p>
<p><a href="http://matl.tryitonline.net/#code=RlQrIkA6cXRQWG5vc1Y0N114aGg&amp;input=MTA" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>
<h3>Explanation</h3>
<pre><code>FT+      % Implicitly take input n. Add [0 1] element-wise. Gives [n n+1]
&quot;        % For each k in [n n+1]
  @:q    %   Push range [0 1 ... k-1]
  tP     %   Duplicate and flip: push [k-1 ... 1 0]
  Xn     %   Binomial coefficient, element-wise. Gives an array
  os     %   Number of odd entries in that array
  V      %   Convert from number to string
  47     %   Push 47, which is ASCII for '\'
]        % End for each
x        % Remove second 47
hh       % Concatenate horizontally twice. Automatically transforms 47 into '\'
         % Implicitly display
</code></pre>
</div>
<div id="pu25" class="pu"><h2><a href="https://github.com/Adriandmen/05AB1E/" rel="nofollow noreferrer">05AB1E</a>, <s>34</s> <s>33</s> <s>25</s> 23 bytes</h2>
<pre><code>XX‚¹GÂ2£DO¸s¦ìì¨}R2£'/ý
</code></pre>
<p><strong>Explanation</strong></p>
<pre><code>XX‚                        # push [1,1]
   ¹G           }          # input-1 times do
     Â                     # bifurcate
      2£                   # take first 2 elements of reversed list
        DO¸                # duplicate and sum 1st copy, s(n)+s(n+1)
           s¦              # cut away the first element of 2nd copy, s(n)
             ìì            # prepend both to list
               ¨           # remove last item in list
                 R2£       # reverse and take the first 2 elements
                    '/ý    # format output
                           # implicitly print
</code></pre>
<p><a href="http://05ab1e.tryitonline.net/#code=WFjigJrCuUfDgjLCo0RPwrhzwqbDrMOswqh9UjLCoycvw70&amp;input=MTAwMA" rel="nofollow noreferrer">Try it online</a></p>
<p>Saved 2 bytes thanks to Adnan.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/90232/">90232</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




