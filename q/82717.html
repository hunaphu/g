<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::82717</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>015</td><td>Japt x</td><td>180824T152157Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/171141#171141">Shaggy</a></td></tr>
<tr d-ix="1"><td>032</td><td>Brachylog</td><td>180822T223644Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/171081#171081">Kroppeb</a></td></tr>
<tr d-ix="2"><td>015</td><td>05AB1E legacy</td><td>180822T151247Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/171058#171058">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>044</td><td>R</td><td>180719T184445Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/168899#168899">JayCe</a></td></tr>
<tr d-ix="4"><td>025</td><td>Japt</td><td>180822T132434Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/171053#171053">Etheryte</a></td></tr>
<tr d-ix="5"><td>092</td><td>R</td><td>161009T120354Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/95706#95706">rturnbul</a></td></tr>
<tr d-ix="6"><td>030</td><td>Actually</td><td>160816T010957Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/89987#89987">user4594</a></td></tr>
<tr d-ix="7"><td>062</td><td>Javascript ES6</td><td>160612T131034Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82733#82733">Qwertiy</a></td></tr>
<tr d-ix="8"><td>049</td><td>Perl</td><td>160612T121540Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82731#82731">Dom Hast</a></td></tr>
<tr d-ix="9"><td>062</td><td>PowerShell v2+</td><td>160613T154723Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82805#82805">AdmBorkB</a></td></tr>
<tr d-ix="10"><td>063</td><td>Python 2</td><td>160612T043113Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82719#82719">xnor</a></td></tr>
<tr d-ix="11"><td>146</td><td>TIBASIC</td><td>160612T053532Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82722#82722">Conor O&</a></td></tr>
<tr d-ix="12"><td>057</td><td>Julia</td><td>160612T151130Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82742#82742">lynn</a></td></tr>
<tr d-ix="13"><td>103</td><td>PHP</td><td>160612T160611Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82744#82744">insertus</a></td></tr>
<tr d-ix="14"><td>014</td><td>Jelly</td><td>160612T060407Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82723#82723">Dennis</a></td></tr>
<tr d-ix="15"><td>012</td><td>MATL</td><td>160612T132942Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82734#82734">Luis Men</a></td></tr>
<tr d-ix="16"><td>079</td><td>Javascript ES6</td><td>160612T130721Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82732#82732">Qwertiy</a></td></tr>
<tr d-ix="17"><td>015</td><td>Pyth</td><td>160612T042347Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82718#82718">Leaky Nu</a></td></tr>
<tr d-ix="18"><td>054</td><td>JavaScript ES6</td><td>160612T101239Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82728#82728">edc65</a></td></tr>
<tr d-ix="19"><td>384</td><td>Java</td><td>160612T100824Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82727#82727">Khaled.K</a></td></tr>
<tr d-ix="20"><td>020</td><td>CJam</td><td>160612T091634Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82725#82725">aditsu q</a></td></tr>
<tr d-ix="21"><td>020</td><td>Pyth</td><td>160612T044015Z</td><td><a href="https://codegolf.stackexchange.com/questions/82717/turn-an-array-into-a-math-problem/82721#82721">Maltysen</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-x</code></a>, <s>21</s> <s>19</s> 15 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ä!Ìf í*UòÎËÎpDÊ
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LXg&amp;code=5CHMZiDtKlXyzsvOcETK&amp;input=WzEyLDAsNyw3LDI5LDEwLDIsMiwxXQ" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, <s>34</s> 32 bytes</h1>

<pre><code>~b≜ḅ⟨h⟨h≡^⟩l⟩ᵐs₂ᶠ{zh&gt;₁&amp;ttṅ|tt}ᵐ+
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/r/vy7pUeechztaH81fkQHGnQvjHs1fmQPED7dOKH7U1PRw24Lqqgy7R02NaiUlD3e21pSU1AKltP//jzY3MzbXMbawAGJLKG2uY2ikYwCExiY6xqYgZGQORrH/owA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E (legacy)</a>, <s>17</s> <s>16</s> 15 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ü.S…*-+sè‚ζJJ.E
</code></pre>
<p>-2 bytes thanks to <em>@Emigna</em>.</p>
<p><a href="https://tio.run/##MzBNTDJM/f//8B694EcNy7R0tYsPr3jUMOvcNi8vPdf//6MNjXQMdMyB0MhSx9BAxwgIDWMB" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##LY49DsIwDIV3TlF1hEcV54ckUxdAoitj1QEkTsAFOjEjRg6AOAETW3cO0YsEx61sy/b3bMvKnc50SRT2h21dFuPtUZT1cE/DtzqO/Wu5Xl2H99g/f5@mqXYJqSUNBc@mI0hBs1G3aBVHzj4453MPIaLxjBASMvFMyMHCchERRLRyLhO@HNlIT0eEGxjuHGRr7gxrlsPxsMaGs8l1fmRjPEwIHHHOHvK8guF1l1178e4P" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>ü                  # Pair-wise loop over the (implicit) input-list
                   #  i.e. [12,0,7,7] → [[12,0],[0,7],[7,7]]
 .S                # Calculate the signum of the pair (-1 for a&lt;b; 0 for a==b; 1 for a&gt;b)
                   #  i.e. [[12,0],[0,7],[7,7]] → [1,-1,0]
   …*-+sè          # Index over &quot;*-+&quot; (with wrap-around)
                   #  i.e. [1,-1,0] → ['-','+','*']
         ‚ζ        # Zip the two lists together (appending the operands to the numbers)
                   #  i.e. [12,0,7,7] and ['-','+','*','+']
                   #   → [[12,'-'],[0,'+'],[7,'*'],[7,' ']]
           JJ      # Join them together
                   #  [[12,'-'],[0,'+'],[7,'*'],[7,' ']] → '12-0+7*7 '
             .E    # Evaluate as Python code
                   #  i.e. '12-0+7*7' → 61
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>120</s> 44 bytes</h1>

<pre class="lang-r prettyprint-override"><code>r=rle(scan());c(1,sign(diff(r$v)))%*%r$v^r$l
</code></pre>
<p><a href="https://tio.run/##bY7NCsIwEITveYqBbSERD/npug3SVxGkGimUHlLw9eNWr/IxzCzMwNZGIcJDlJgRPKISQBA25EHekF7BkIwsgp8ZYjAGJSlHJ@lmUDGy7i/q6ZspZlOmVqe6Pu0@3zfr3HW24bwvr80@llJs7d7Ouf7Ua7jVbm3/Hmof" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>The algorithm is similar to <a href="https://codegolf.stackexchange.com/a/82725/80010">this answer's</a>, but I only realized it after coding my answer. Much better than my original answer that was using <code>eval(parse)</code>.</p>
<p>Fully leverages R's vectorized operations - does the <code>*</code> operation first using <code>rle(x)$values ^ rle(x)$lenghts</code> and dot-products this vector with <code>sign( diff( rle(x)$values ) )</code> (predended with <code>1</code>).</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 25 bytes</h1>

<p>Would like to cut it shorter, but I couldn't make an eval-less version work.</p>

<pre><code>S+Uä!- ®"*+-"gZÎÃ¬)íU
OxU
</code></pre>

<p><a href="https://tio.run/##y0osKPn/P1g79PASRV2FQ@uUtLR1ldKjDvcdbj60RvPw2lAu/4rQ//@jzc2MzXWMLSyA2BJKm@sYGukYAKGxiY6xKQgZmYNRLAA" rel="nofollow noreferrer" title="Japt – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1>R, 92 bytes</h1>

<p>There's likely still some good golfing that can be done here.</p>

<pre><code>eval(parse(t=paste(i&lt;-scan(),c(ifelse(d&lt;-diff(i),ifelse(d&gt;0,"+","-"),"*"),""),collapse="")))
</code></pre>

<p>Ungolfed:</p>

<pre><code>i = scan()                # Read list from stdin
d = diff(i)               # Calculate difference between each element of list
s = ifelse(d,             # If d!=0
             ifelse(d&gt;0,  # And if d&gt;1
                    "+",  # Return plus
                    "-"), # Else return minus
             "*")         # Else (i.e. d==0) return multiply.
s = c(s,"")               # Pad the list s with an empty string, so it's the same
                          # length as i
p = paste(i,s,collapse="")# Paste the elements of i and s into one long string.
eval(parse(t=p))          # Evaluate the string as a language object.
</code></pre>
</div>
<div id="pu6" class="pu"><h2>Actually, 30 bytes</h2>
<pre><code>;2@VpXdX`i-su&quot;+*-&quot;E`M' @o♀+εj≡
</code></pre>
<p>Unfortunately, because the eval (<code>≡</code>) command only evaluates literals on TIO, this program does not work on TIO.</p>
<p>Explanation:</p>
<pre><code>;2@VpXdX`i-su&quot;+*-&quot;E`M' @o♀+εj≡
;                               duplicate input
 2@V                            overlapping sublists of length &lt;= 2
    pXdX                        discard first and last element (length-1 sublists)
        `i-su&quot;+*-&quot;E`M           map: for each pair of elements
         i-su                     flatten, subtract, sign, increment (results in a 0 if b &lt; a, 1 if b == a, and 2 if b &gt; a)
             &quot;+*-&quot;E               select the correct operation
                     ' @o       put a space at the beginning of the list to pad it properly
                         ♀+     pairwise addition (since addition is not defined for strings and integers, this just zips the lists and flattens the result into a single flat list)
                           εj   join with empty string
                             ≡  eval
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Javascript ES6, <s>64</s> 62 chars</h1>

<pre><code>a=&gt;eval(a.map((x,i)=&gt;x+('*+-'[x&lt;a[++i]|(x&gt;a[i])*2])).join``+1)
</code></pre>
</div>
<div id="pu8" class="pu"><h2>Perl, 49 bytes</h2>

<p><strong>48 bytes code + 1 for <code>-p</code></strong></p>

<pre class="lang-pl prettyprint-override"><code>s/\d+ (?=(\d+))/$&amp;.qw(* - +)[$&amp;&lt;=&gt;$1]/ge;$_=eval
</code></pre>

<h3>Usage</h3>

<pre class="lang-sh prettyprint-override"><code>perl -pe 's/\d+ (?=(\d+))/$&amp;.qw(* - +)[$&amp;&lt;=&gt;$1]/ge;$_=eval' &lt;&lt;&lt; '12 0 7 7 29 10 2 2 1'
75
</code></pre>

<h3>Notes</h3>

<p>I learnt here that you can capture a lookahead in PCRE, although it's a little unintuitive (<code>(?=(\d+))</code> instead of <code>((?=\d+))</code>). It does make sense after reading though as you would be capturing a zero-length match (the lookahead) with the latter, and instead capture the match with the former).</p>

<p>Thanks to <a href="https://codegolf.stackexchange.com/users/267/ninjalj">@ninjalj</a> for saving 8 bytes!</p>
</div>
<div id="pu9" class="pu"><h2>PowerShell v2+, 62 bytes</h2>

<pre><code>-join($args|%{"$o"+'*+-'[($o-lt$_)+2*($o-gt$_)];$o=$_})+$o|iex
</code></pre>

<p>Takes input as space-separated command-line arguments, which gets converted into automatic array <code>$args</code>. We iterate through each element, using helper variable <code>$o</code> each iteration to remember what our previous entry was. We use a indexed-string to pull out the appropriate operator, done by performing math on the implicitly-converted Boolean values (e.g., if the previous entry is smaller, the <code>[]</code> evaluates to <code>1+2*0</code> so <code>'*+-'[1]</code> means the <code>+</code> is selected).</p>

<p>The concatenated strings are left on the pipeline. We collect all of those snippets together (e.g., <code>3-</code>, <code>1+</code>, <code>4-</code>, etc.) with a <code>-join</code> operation, concatenate on the final number (implicitly converted to string), and pipe it to <code>iex</code> (alias for <code>Invoke-Expression</code> and similar to <code>eval</code>).</p>
</div>
<div id="pu10" class="pu"><h2>Python 2, 63 bytes</h2>

<pre class="lang-python prettyprint-override"><code>p=s='print-'
for x in input():s+='*+-'[cmp(x,p)]+`x`;p=x
exec s
</code></pre>
<p>Constructs and <code>eval</code>s the expression string. The arithmetic symbol is chosen by comparing the previous number <code>p</code> to the current one <code>x</code>. The symbol is appended followed by the current number.</p>
<p>The first number is handled with a clever trick from Sp3000. The initial value of <code>p</code> is set to a string, which is bigger than any number and therefore causes a <code>-</code> before the first number. But, <code>s</code> is initialized to <code>print-</code> at the same time that makes the result start with <code>print--</code> (thanks to xsot for saving 2 bytes by initializing with <code>print</code>.)</p>
</div>
<div id="pu11" class="pu"><h1>TI-BASIC, 146 bytes</h1>

<p>I'll format it nicely when not on mobile. Sleep escapes me, so you get this. Enjoy.</p>

<pre><code>Prompt L₁
"(→Str1
For(A,1,dim(L₁
{0,1→L₂
{0,L₁(A→L₃
LinReg(ax+b) L₁,L₃,Y₁
Equ►String(Y₁,Str2
sub(Str2,1,-1+inString(Str2,"X→Str2
If A&gt;1
Then
L₁(A-1
2+(Ans&gt;L₁(A))-(Ans&lt;L₁(A
Str1+sub("+*-",Ans,1→Str1
End
Str1+Str2→Str2
End
expr(Str1
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Julia, <s>76</s> 57 bytes</h1>

<pre><code>!x=[[" ""-*+"[2+sign(diff(x))]...] x]'|&gt;join|&gt;parse|&gt;eval
</code></pre>

<p>My first time golfing Julia, so maybe there are obvious improvements.
<a href="http://julia.tryitonline.net/#code=IXg9W1siICIiLSorIlsyK3NpZ24oZGlmZih4KSldLi4uXSB4XSd8PmpvaW58PnBhcnNlfD5ldmFsCgpwcmludCghWzEyLCAwLCA3LCA3LCAyOSwgMTAsIDIsIDIsIDFdKQ&amp;input=">Try it online!</a></p>

<p>Dennis saved a ton of bytes.</p>
</div>
<div id="pu13" class="pu"><h1>PHP, 103 bytes</h1>
<p>Neat challenge. This got longer than expected. I think using <code>array_map</code> or similar won't improve the byte count, as anonymous functions are <a href="https://wiki.php.net/rfc/arrow_functions" rel="nofollow noreferrer">still</a> expensive in PHP.</p>
<pre><code>foreach(fgetcsv(STDIN)as$v)(0&lt;=$p?$o.=$p.('*-+'[($p&gt;$v)+2*($p&lt;$v)]):_)&amp;&amp;$p=$v;echo eval(&quot;return$o$v;&quot;);
</code></pre>
<p>Runs from command line, will prompt for a comma separated list, like:</p>
<pre><code>php array_to_math.php
12, 0, 7, 7, 29, 10, 2, 2, 1
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="http://github.com/DennisMitchell/jelly">Jelly</a>, <s>18</s> <s>16</s> <s>15</s> 14 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page">bytes</a></h1>

<pre><code>I0;ð1g×⁹⁸œṗP€S
</code></pre>

<p>Uses no built-in eval. <a href="http://jelly.tryitonline.net/#code=STA7w7AxZ8OX4oG54oG4xZPhuZdQ4oKsUw&amp;input=&amp;args=Wzc2MzcsMzg4LDM4OSwzODgsMzg3LDEyLDAsMCwzNCwzNSwzNSwyNywyNywyXQ">Try it online!</a> or <a href="http://jelly.tryitonline.net/#code=STA7w7AxZ8OX4oG54oG4xZPhuZdQ4oKsUwrDh-KCrEc&amp;input=&amp;args=WzBdLCBbMV0sIFs3ODU1N10sIFswLDBdLCBbMSwxXSwgWzIsMl0sIFswLDFdLCBbMSwwXSwgWzEsMl0sIFsyLDFdLCBbMTUsNCw0XSwgWzksOCwxXSwgWzQsMiwyLDRdLCBbMTAsOSw5LDEyXSwgWzEsMSwyLDIsMywzXSwgWzUsNSw0LDQsMywzXSwgWzMsMSw0LDEsNSw5LDIsNiw1LDMsNSw5XSwgWzc2MzcsMzg4LDM4OSwzODgsMzg3LDEyLDAsMCwzNCwzNSwzNSwyNywyNywyXQ">verify all test cases</a>.</p>

<h3>How it works</h3>

<pre><code>I0;ð1g×⁹⁸œṗP€S  Main link. Input: A (list)

I               Increments; compute the deltas of all adjacent items of A.
 0;             Prepend a 0.
   ð            Begin a new, dyadic chain.
                Left argument: D (0 plus deltas). Right argument: A
    1g          Compute the GCD of 1 and each item in D.
                This yields 1 for non-negative items, -1 for negative ones.
      ×⁹        Multiply each 1 or -1 with the corresponding item of A.
                This negates every item in A that follows a - sign.
        ⁸œṗ     Partition the result by D. This splits at occurrences of non-zero
                values of D, grouping items with identical absolute value.
           P€   Take the product of each group.
             S  Sum; add the results.
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, 12 bytes</h1>
<pre><code>Y'^l6MdZSh*s
</code></pre>
<p>This uses <a href="https://codegolf.stackexchange.com/a/82725/36398">@aditsu's very nice idea</a> of run-length encoding.</p>
<p><a href="http://matl.tryitonline.net/#code=WSdebDZNZFpTaCpz&amp;input=Wzc2MzcsMzg4LDM4OSwzODgsMzg3LDEyLDAsMCwzNCwzNSwzNSwyNywyNywyXQ" rel="noreferrer"><strong>Try it online!</strong></a></p>
<h3>Explanation</h3>
<pre><code>       % Take input vector implicitly
Y'     % RLE. Produces two vectors: values and lengths
^      % Rise each value to the number of consecutive times it appears. This
       % realizes the product of consecutive equal values
l      % Push 1
6M     % Push vector of values again
d      % Consecutive differences
ZS     % Sign function. Gives 1 or -1 (no 0 in this case)
h      % Concatenate horizontally with previous 1
*      % Multiply. This gives plus or minus depending on increasing character
s      % Sum of vector. This realizes the additions or subtractions
       % Display implicitly
</code></pre>
</div>
<div id="pu16" class="pu"><h1>Javascript ES6, 79 chars</h1>

<pre><code>a=&gt;eval(`${a}`.replace(/(\d+),(?=(\d+))/g,(m,a,b)=&gt;a+('*+-'[+a&lt;+b|(+a&gt;+b)*2])))
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Pyth, <s>31</s> <s>26</s> <s>19</s> <s>17</s> <s>16</s> 15 bytes</h1>
<p>Expressions with <code>*</code> won't evaluate online, but they would theoretically work.</p>
<p>2 bytes thanks to Maltysen.</p>
<pre><code>vsm+@&quot;*-+&quot;._-~k
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=vsm%2B%40%22%2a-%2B%22._-%7Ek&amp;test_suite=1&amp;test_suite_input=%5B0%5D%0A%5B1%5D%0A%5B78557%5D%0A%5B0%2C1%5D%0A%5B1%2C0%5D%0A%5B1%2C2%5D%0A%5B2%2C1%5D%0A%5B9%2C8%2C1%5D%0A%5B3%2C1%2C4%2C1%2C5%2C9%2C2%2C6%2C5%2C3%2C5%2C9%5D&amp;debug=0" rel="noreferrer">Test suite (with evaluation).</a></p>
<p><a href="http://pyth.herokuapp.com/?code=sm%2B%40%22%2a-%2B%22._-%7Ek&amp;test_suite=1&amp;test_suite_input=%5B0%2C0%5D%0A%5B1%2C1%5D%0A%5B2%2C2%5D%0A%5B15%2C4%2C4%5D%0A%5B4%2C2%2C2%2C4%5D%0A%5B10%2C9%2C9%2C12%5D%0A%5B1%2C1%2C2%2C2%2C3%2C3%5D%0A%5B5%2C5%2C4%2C4%2C3%2C3%5D%0A%5B7637%2C388%2C389%2C388%2C387%2C12%2C0%2C0%2C34%2C35%2C35%2C27%2C27%2C2%5D&amp;debug=0" rel="noreferrer">The other cases (without evaluation).</a></p>
<h2>History</h2>
<ul>
<li>31 bytes: <code>M+G@&quot;*-+&quot;-&gt;GH&lt;GHv+sgMC,JsMQtJ\x60e</code></li>
<li>26 bytes: <code>M+G@&quot;*-+&quot;-&gt;GH&lt;GHv+sgVQtQ\x60e</code></li>
<li>19 bytes: <code>vtssVm@&quot;*-+&quot;-&gt;Zd&lt;~Z</code></li>
<li>17 bytes: <code>vtssVm@&quot;*-+&quot;._-~Z</code></li>
<li>16 bytes: <code>vssVm@&quot;*-+&quot;._-~k</code></li>
<li>15 bytes: <code>vsm+@&quot;*-+&quot;._-~k</code></li>
</ul>
</div>
<div id="pu18" class="pu"><h1>JavaScript (ES6), 54</h1>

<pre class="lang-js prettyprint-override"><code>p=&gt;eval(0+p.map(v=&gt;x+='*-+'[(p&gt;v)+2*(p&lt;v)]+(p=v),x=1))
</code></pre>

<p><code>eval</code> receives a comma separated list of expressions and returns the value of the last one.</p>

<p><strong>Test</strong></p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=p=&gt;eval(0+p.map(v=&gt;x+='*-+'[(p&gt;v)+2*(p&lt;v)]+(p=v),x=1))

t=p=&gt;(0+p.map(v=&gt;x+='*-+'[(p&gt;v)+2*(p&lt;v)]+(p=v),x=1))

function Test() {
  var a=I.value.match(/\d+/g).map(x=&gt;+x) // convert input to a numeric array
  
  var x=f(a),y=t(a)
  O.textContent='Value '+x+'\n(no eval '+y+')'
}  

Test()</code></pre>
<pre class="snippet-code-css lang-css prettyprint-override"><code>#I { width:80%}</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input value='12, 0, 7, 7, 29, 10, 2, 2, 1' id=I&gt;
&lt;button onclick='Test()'&gt;Test&lt;/button&gt;
&lt;pre id=O&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu19" class="pu"><h1>Java, 384 bytes</h1>



<pre class="lang-Java prettyprint-override"><code>int s(int[]l){int n=l[0],m;for(int i=0;i&lt;l.length-1;i++)if(l[i]&lt;l[i+1])if(i&lt;l.length-2&amp;&amp;l[i+1]!=l[i+2])n+=l[i+1];else{m=l[i+1];while(i&lt;l.length-2&amp;&amp;l[i+1]==l[i+2])m*=l[(i++)+1];n+=m;}else if(l[i]&gt;l[i+1])if(i&lt;l.length-2&amp;&amp;l[i+1]!=l[i+2])n-=l[i+1];else{m=l[i+1];while(i&lt;l.length-2&amp;&amp;l[i+1]==l[i+2])m*=l[(i++)+1];n-=m;}else{m=l[i];while(i&lt;l.length-1&amp;&amp;l[i]==l[i+1])m*=l[i++];n+=m;}return n;}
</code></pre>

<p><strong>Ungolfed</strong> <a href="http://ideone.com/tw9Gkw" rel="nofollow">try online</a></p>

<pre class="lang-Java prettyprint-override"><code>int s(int[] l)
{
    int n=l[0], m;

    for(int i=0; i&lt;l.length-1; i++)
    {
        if(l[i] &lt; l[i+1])
        {
            if (i&lt;l.length-2 &amp;&amp; l[i+1]!=l[i+2])
            {
                n += l[i+1];
            }
            else
            {
                m = l[i+1];
                while(i&lt;l.length-2 &amp;&amp; l[i+1]==l[i+2]) m *= l[(i++)+1];
                n += m;
            }
        }
        else if(l[i] &gt; l[i+1])
        {
            if (i&lt;l.length-2 &amp;&amp; l[i+1]!=l[i+2])
            {
                n -= l[i+1];
            }
            else
            {
                m = l[i+1];
                while(i&lt;l.length-2 &amp;&amp; l[i+1]==l[i+2]) m *= l[(i++)+1];
                n -= m;
            }
        }
        else
        {
            m = l[i];
            while(i&lt;l.length-1 &amp;&amp; l[i]==l[i+1]) m *= l[i++];
            n += m;
        }
    }

    return n;
}
</code></pre>
</div>
<div id="pu20" class="pu"><h1>CJam, 20</h1>
<pre><code>q~e`{~_W-g\:W@#*}%:+
</code></pre>
<p><a href="http://cjam.aditsu.net/#code=q%7Ee%60%7B%7E_W-g%5C%3AW%40%23*%7D%25%3A%2B&amp;input=%5B7637%20388%20389%20388%20387%2012%200%200%2034%2035%2035%2027%2027%202%5D" rel="noreferrer">Try it online</a></p>
<p><strong>Explanation:</strong></p>
<pre><code>q~       read and evaluate the input (array of numbers)
e`       RLE encode, obtaining [count number] pairs
{…}%     map each pair
  ~_     dump the count and number on the stack, and duplicate the number
  W-     subtract the previous number (W is initially -1 by default)
  g      get the sign of the result
  \      swap with the other copy of the number
  :W     store it in W (for next iteration)
  @#     bring the count to the top, and raise the number to that power
  *      multiply with the sign
:+       add all the results together
</code></pre>
</div>
<div id="pu21" class="pu"><h1>Pyth - <s>23</s> <s>22</s> 20 bytes</h1>
<p>As with Kenny's, multiplication doesn't work online.</p>
<pre><code>vs.i+\+@L&quot;*+-&quot;._M-Vt
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=s.i%2B%5C%2B%40L%22%2a%2B-%22._M-Vt&amp;test_suite=1&amp;test_suite_input=%5B0%5D%0A%5B1%5D%0A%5B78557%5D+%0A%5B0%2C0%5D%0A%5B1%2C1%5D%0A%5B2%2C2%5D%0A%5B0%2C1%5D%0A%5B1%2C0%5D%0A%5B1%2C2%5D%0A%5B2%2C1%5D%0A%5B15%2C4%2C4%5D%0A%5B9%2C8%2C1%5D%0A%5B4%2C2%2C2%2C4%5D%0A%5B10%2C9%2C9%2C12%5D%0A%5B1%2C1%2C2%2C2%2C3%2C3%5D%0A%5B5%2C5%2C4%2C4%2C3%2C3%5D%0A%5B3%2C1%2C4%2C1%2C5%2C9%2C2%2C6%2C5%2C3%2C5%2C9%5D%0A%5B7637%2C388%2C389%2C388%2C387%2C12%2C0%2C0%2C34%2C35%2C35%2C27%2C27%2C2%5D&amp;debug=0" rel="nofollow noreferrer">Test Suite without doing eval</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/82717/">82717</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




