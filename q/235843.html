<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::235843</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>044</td><td>APLNARS</td><td>251003T090658Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/283990#283990">Rosario</a></td></tr>
<tr d-ix="1"><td>057</td><td>Ruby</td><td>210930T084223Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/235856#235856">G B</a></td></tr>
<tr d-ix="2"><td>038</td><td>Mathematica</td><td>210930T063842Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/235854#235854">Bhoris D</a></td></tr>
<tr d-ix="3"><td>066</td><td>Factor + math.continuedfractions math.unicode</td><td>210930T030848Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/235851#235851">chunes</a></td></tr>
<tr d-ix="4"><td>014</td><td>Husk</td><td>210929T234021Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/235847#235847">Dominic </a></td></tr>
<tr d-ix="5"><td>047</td><td>JavaScript ES7</td><td>210929T220253Z</td><td><a href="https://codegolf.stackexchange.com/questions/235843/khinchins-constant-bad-estimate/235844#235844">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 44 chars</h1>
<pre><code>{(≢k)√∣×/k←⍺{(⍺≤0)∨∞≤∣⍵:⍬⋄m,(⍺-1)∇÷⍵-m←⌊⍵}⍵}
</code></pre>
<p>Input of the function one float number ⍵, and one positive integer ⍺ and as output
one float.</p>
<p>test:</p>
<pre><code>  K←{(≢k)√∣×/k←⍺{(⍺≤0)∨∞≤∣⍵:⍬⋄m,(⍺-1)∇÷⍵-m←⌊⍵}⍵}
  1 K ○1
3
  2 K ○1
4.582575695
  3 K ○1
6.804092116
  7 K ○1
5.11798558
  7 K -○1
5.216552971
  15 K *1
1.815616335
  15 K -*1
1.91647393
  p←1.61803398874989
  20 K p
1
  20 K -p
1.071773463
</code></pre>
<p>We define the functions:</p>
<pre><code>  cf←{(⍺≤0)∨∞≤∣⍵:⍬⋄m,(⍺-1)∇÷⍵-m←⌊⍵}
  I←{1=≢⍵:↑⍵⋄+∘÷/⍵}
</code></pre>
<p>'cf' is the function that has Input ⍺ (positive integer) and a  float ⍵,
and output one array of integers of lenght ⍺ that would be the
continue fraction expansion of ⍵.</p>
<p>The 'I' function has as input one array of integers numbers (one continue fraction)
and as output the number float that contiune fraction represent. Do you note that here</p>
<pre><code>  1÷0
∞
  9999&gt;∞
0
</code></pre>
<p>so the division of a number by zero is ∞, and ∞ it is one number that is &gt;= of
all other numbers, and cf can terminate before reach the number term ⍺, for example</p>
<pre><code>  10 cf 1.125
1 8 
  I 1 8
1.125
</code></pre>
<p>because is found one ∞ as cf ⍵ argument. Note cf terminate when ⍺≤0 or when argument ⍵, is ∞
(not when is 0).</p>
<p>I for expansion ⍺ terms of ⍵ float, I suppose that ⍵ has at last ⍺ significative
digits, because it seems to me that the ⍵-⌊⍵ means 1 digit lost, so repeated that
operation ⍺ times it means ⍺ digits lost. So because here normal Apl float are 64 bits, has to be</p>
<pre><code> (⍺d⍵)≤64
</code></pre>
<p>Where the function d is:</p>
<pre><code>d←{3.322×⍺+1+⌊10⍟1⌈∣⍵}
</code></pre>
<p>that has one input one float point as ⍵, and as ⍺ the digits of precision of the number ⍵ in base 10.
And as output the necessary digits in base 2 of that number ⍵ of precision ⍺ for store that number in memory (that
is the lenght in bit of that number in memory). All example numbers of the question seems ok but the last 2 I would say not.</p>
<pre><code>  20 d 1.61803398874989
69.762
</code></pre>
<p>so the last 2 cases for me have continue fraction expansions that has need at last 70 bits, 64 bits are not enought.</p>
<p>But result even in that case seems ok using float 128 bit vtype we can check</p>
<pre><code>  20 K 1.61803398874989v
1 
  20 K ¯1.61803398874989v
1.071773463 
</code></pre>
<p>One pheraps better function would be KK function, has as input ⍺ the number of expansion and as input ⍵ one vtype float.
As output return ∅ in the error case, it is &quot;not a number&quot; (I see ∅ type, as number type), or a float vtype number.</p>
<p>⎕fpc is the float point bits lenght of vtype float.</p>
<pre><code>  KK←{⎕fpc&lt;⍺d⍵:∅⋄⍺{(≢k)√∣×/k←⍺{(⍺≤0)∨∞≤∣⍵:⍬⋄(⌊⍵),(⍺-1)∇÷⍵-⌊⍵}⍵}⍵}
  ⎕fpc
128
  ⎕fpc÷3.322
38.53100542
  50⍕39 KK ○1v
∅
  50⍕38 KK ○1v
∅
  50⍕37 KK ○1v
3.165275511414812818221962911542966002409
</code></pre>
<p>○1v is π approssimate in a float of vtype ⎕fpc bits.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 57 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n,l,r=1{n=n.abs;l.times{r*=n.to_i**(1.0/l);n=1/n%=1};r}
</code></pre>
<p><a href="https://tio.run/##bY3RCoIwGIXve4puArd@535DBGXdddkTyIgJWcJcMhcY02dfol0G5xz4vptj3/UnNCLEZwMarEBvhGGqHkrNXNvdB2/pItzr1lIaIeOJJqURmJiDwLm0c6gQUjhBDsiXrN3mt1yyTvV@Gqd@31QxMmUfMMp5t2K0CQK5XMVVuWdRXACzjaOMUs6yI5JkeeF/JKZchi8" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.wolfram.com/mathematica/" rel="nofollow noreferrer">Mathematica</a>, <strike>42</strike> 38 bytes</h1>
<pre><code>N@1##&amp;@@ContinuedFraction[#2,#]^(1/#)&amp;
</code></pre>
<p>Corrected formatting and size reduced by @theorist.</p>
<p>Inputting n=100 and variable as Pi we get the output as</p>
<pre><code>2.69405
</code></pre>
<p>You can save 2 bytes by removing N@ but this will give an exact expression and not numeric.</p>
<p>The code also passes all the tests giving the exact value for each number except for -Pi for which it returns a complex number. However the magnitude of this complex number is exactly the same as that given in the expected value.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a> + <code>math.continued-fractions math.unicode</code>, 66 bytes</h1>
<pre><code>[ 1vector over [ dup next-approx ] times 1 head* Π abs nth-root ]
</code></pre>
<p><a href="https://tio.run/##ZZBBS8NAEIXv@RXv4ElIMYoICl6ll17EU@lh3UzMYjK7zs6WSsh/6S/qX4pbUqnFuX3z3jx40xirXqa31@Xq5REmRm8jPkmYOmzpqEX0Rlt0TklMN9PCeo5qWM@ojhPVZSM50GUVkb4SsaWTpUl8EoKQ6ncQxzpLiZ31NeGpKIYCea4GVAgO4y/dXtDdBT38J6aP86a6B/1JukFoj/5inNao5orwWxKsUaeQb3damhDE77CBuj4XqNCSqa9x2MO8R7C2pXiv2EwDxvlpz70JWEw/" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<p>It's a quotation (anonymous function) that takes an integer signifying the number of terms to use and a real number and returns a real number. Assuming <code>3 3.141592653589793</code> is on the data stack when this quotation is called...</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th>Snippet</th>
<th>Comment</th>
<th>Data stack (top on right)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1vector</code></td>
<td>Make a vector out of the object on top of the data stack. This is how <code>next-approx</code> expects to take its input.</td>
<td><code>3 V{ 3.141592653589793 }</code></td>
</tr>
<tr>
<td><code>over</code></td>
<td>Put a copy of the object second from the top on top of the data stack.</td>
<td><code>3 V{ 3.141592653589793 } 3</code></td>
</tr>
<tr>
<td><code>[ dup next-approx ]</code></td>
<td>Push a quotation to the data stack for <code>times</code> to use later.</td>
<td><code>3 V{ 3.141592653589793 } 3 [ dup next-approx ]</code></td>
</tr>
<tr>
<td><code>times</code></td>
<td>Take an integer and a quotation and call the quotation that many times. In this case, equivalent to <code>dup next-approx dup next-approx dup next-approx</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>Inside the quotation now...</td>
<td><code>3 V{ 3.141592653589793 }</code></td>
</tr>
<tr>
<td><code>dup</code></td>
<td>Copy the top data stack object</td>
<td><code>3 V{ 3.141592653589793 } V{ 3.141592653589793 }</code></td>
</tr>
<tr>
<td><code>next-approx</code></td>
<td>Add the next term in the continued fraction to our vector. <code>next-approx</code> has stack effect <code>( seq -- )</code> so we made a copy so we don't lose it</td>
<td><code>3 V{ 3 7.062513305931052 }</code></td>
</tr>
<tr>
<td><code>dup next-approx</code></td>
<td>Iteration 2</td>
<td><code>3 V{ 3 7 15.9965944066841 }</code></td>
</tr>
<tr>
<td><code>dup next-approx</code></td>
<td>Iteration 3</td>
<td><code>3 V{ 3 7 15 1.003417231015 }</code></td>
</tr>
<tr>
<td><code>1 head*</code></td>
<td>Remove last element</td>
<td><code>3 V{ 3 7 15 }</code></td>
</tr>
<tr>
<td><code>Π</code></td>
<td>Take the product</td>
<td><code>3 315</code></td>
</tr>
<tr>
<td><code>abs</code></td>
<td>Take the absolute value</td>
<td><code>3 315</code></td>
</tr>
<tr>
<td><code>nth-root</code></td>
<td>Take the nth root of a number. In this case, take the cube root of 315</td>
<td><code>6.804092115953367</code></td>
</tr>
</tbody>
</table>
</div></div>
<div id="pu4" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 14 bytes</h1>
<pre><code>^\¹Π↑¡§,o\%1⌊²
</code></pre>
<p><a href="https://tio.run/##vY27CUJREESrMRPcz9z99PIwFgwMxBYMxMQONDI3M70FWISNrFuFw4GBw8DsTsd91XaZ78/9e77Nx3yuD8uKv9fLfFUVGwepZoQjIxEIIYywUKgN02B2F1JK9gwabhImrAPoFqchRmjJkSRAOvW8QQtNZnVsmP6Q6pcf" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a> for the last test case (or <a href="https://tio.run/##vcutDQJREEbRanAkzP/M18sGvQkCQWgBQTB0AAqPw74CKGIbGbYKrjnqzufToXs/jc/3sVzu4zle2@O04eV2He/uVjZ2SLh6IaGiZSFhqqWScJIqYyQHFNB0Ji8hpMFsHZWyOIxCKoQKWClSK3E1YU6KxI7pD3X@AA" rel="nofollow noreferrer">try it here</a> for n=7, number=pi).</p>
<pre><code>     ¡          # Apply function repeatedly to first results, 
                # collecting second results into infinite list:
      §,     ²  #  combine pair of results of functions applied to arg 2:
            ⌊   #   floor
        o\%1    #   reciprocal of fractional part
    ↑           # Now take arg1 elements from list,
   Π            # calculate the product,
^               # and raise to the power of
 \¹             # reciprocal of arg1
</code></pre>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES7), 47 bytes</h1>
<p>Expects <code>(n)(real)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;v=&gt;(g=n=&gt;n?~~v*g(n-1,v=1/(v%1)):1)(n)**(1/n)
</code></pre>
<p><a href="https://tio.run/##bYzNCsIwEITveYq9CLvR/mylCJbUU6E9CHmFUm1VSiK25NhXj/HgRXub@eZjHq1rp@51f86RsZer75U3qnSqxEGFYE7L4uSAJuKdU5yg2zDRkQkNSYmcGPK6AQXndr7FuilE9S1VIXT9mZBhCzlICWmcEySQFUJ01kx2vMajHbDH8Kcboh@ardL9Kj2sUs4Jq/@HNMh1sP0b" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Note: With 40+ terms, the last test case will diverge from 1 because of cumulated floating point errors.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/235843/">235843</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




