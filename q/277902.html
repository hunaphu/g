<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277902</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>126</td><td>JavaScript ES7</td><td>250126T153238Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277916#277916">Arnauld</a></td></tr>
<tr d-ix="1"><td>106</td><td>APLNARS</td><td>250223T093054Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/278345#278345">Rosario</a></td></tr>
<tr d-ix="2"><td>232</td><td>Python 3.8 prerelease</td><td>250129T215939Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277988#277988">BeardedO</a></td></tr>
<tr d-ix="3"><td>137</td><td>APL+WIN</td><td>250127T170252Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277949#277949">Graham</a></td></tr>
<tr d-ix="4"><td>218</td><td>Maple</td><td>250127T010022Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277929#277929">dharr</a></td></tr>
<tr d-ix="5"><td>031</td><td>Jelly</td><td>250126T091358Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277905#277905">Jonathan</a></td></tr>
<tr d-ix="6"><td>066</td><td>Charcoal</td><td>250126T112602Z</td><td><a href="https://codegolf.stackexchange.com/questions/277902/malfatti-circle-radii/277908#277908">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES7), 126 bytes</h1>
<p><em>-2 thanks to @l4m2</em></p>
<p>Expects <code>(a,b,c)</code> and returns an array of 3 floats.</p>

<pre class="lang-none prettyprint-override"><code>(a,b,c)=&gt;[m=Math,g=r=&gt;1+m.tan(m.acos((r?[a,b,c]=[c,a,b]:x=a+b+c,x/=c+a-b,a*a+b*b-c*c)/2/a/b)/4),0].map(_=&gt;g()*g``/g``/x**.5/4)
</code></pre>
<p><a href="https://tio.run/##jZNNbttADIX3PoWWkj2R@DczZAO5qy57AkNoZTVxWsRx4ARFgKJndzlKUCSNFxUswHhjfvP4SP8Yf44P0/H7/ePF3eHb1em6P9Vj2Iap6debff95fLwJu/7Yr3G1bx/Hu3rfjtPhoa6PHzfz74Z@MwX/Nnx46sfVdjWFp66fVuPFNoxLF5bbi2k5NR11Y7dtOmkCDO1@vK@/9Otd3Sx3X7925X1aLtvox6fLzaKqNhiq8hlC9erpugpaVAakDKhGROE/lBeen9AZHoOJGFk0U8FSTagkUTnFiBrfK4VHM4/P8ARROCvlnBLO1e8VyoyKOQFJ5tkfh0pCFc/wckQz48isFLVUpyRqgqqZ7VmJkI3ZEnEkSYXn1zgyn@ElAe@DAMFbnqszaQSQjF5MUBSO6AEiKngwz/m5jmUi8grpPGoJUszAEZIw@J3UImRxr8hqQK6gO47g4QIRGtvMcz2Fyt4YfPbnI0NNErN4XqWazdDQe07eshbFg8iqmozd8F8e0j8JOg9bXwTPymcAokyl2j0AKWeJxensL3sqCRIly1HmeWT35/1aftsv@24ZJvIBRBUoMbcePjgaQZPKnKhl3z70vVJ3qPO@KFvZGQTwJIt/GmaeJfPRW1GFY1oMi/b6cPw0Tjd17f@wahuqaWiqfl39cs50uHs43F61t4ddfV2/HDfN5eJ3c3n6Aw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Method</h3>
<p>For each Malfatti circle radius, the same method <code>g</code> is invoked 3 times to:</p>
<ul>
<li><p>compute and return successively <span class="math-container">\$1+\tan A/4\$</span>, <span class="math-container">\$1+\tan B/4\$</span>, <span class="math-container">\$1+\tan C/4\$</span> in the relevant order</p>
</li>
<li><p>simultaneously compute the expression:</p>
<p><span class="math-container">$$x=\frac{a+b+c}{(b+c-a)(c+a-b)(a+b-c)}$$</span></p>
<p>which allows to compute:</p>
<p><span class="math-container">$$\frac{r}{2}=\frac{1}{4\sqrt x}$$</span></p>
</li>
</ul>
<p>The behavior of <code>g</code> is solely determined by the order of the triplet <span class="math-container">\$(a,b,c)\$</span> which is rotated 2 times out of 3.</p>
<h3>Commented</h3>
<p><em>Edit: the definition of <code>g</code> has been moved in the array in the last revision.</em></p>
<pre class="lang-none prettyprint-override"><code>(a, b, c) =&gt;               // (a, b, c) = input
[ m = Math, 0, 0 ]         // m = alias for Math
.map(_ =&gt;                  // repeat 3 times:
  ( g = r =&gt;               //   g is a helper function taking a flag r:
    1 + m.tan(             //     compute 1 + the tangent of ...
      m.acos(              //       the inverse cosine of ...
        (                  //     
          r ?              //         if r is set:
            [a, b, c] =    //           rotate (a, b, c)
            [c, a, b]      //           to (c, a, b)
          :                //         else:
            x = a + b + c, //           initialize x to a + b + c
          x /= c + a - b,  //         divide x by c + a - b
          a * a +          //         the actual argument for the
          b * b -          //         inverse cosine is:
          c * c            //         a² + b² - c² ...
        ) / 2 / a / b      //         ... divided by 2ab
      ) / 4                //       end of Math.acos(); divide by 4
    )                      //     end of Math.tan()
  )()                      //   first call to g (r not set)
  * g``                    //   multiply by a 2nd call to g (r set)
  / g``                    //   divide by a 3rd call to g (r set)
  / x ** .5 / 4            //   divide by 4√x
)                          // end of map()
</code></pre>
</div>
<div id="pu1" class="pu"><h1>APL(NARS), 106 chars</h1>
<pre><code>{A←M×M←⊃3⍴⊂⍵⋄I←=/¨⍳⍴M⋄C←≠/¨⍳⍴M⋄(4÷⍨√(+/⍵)÷⍨×/+/M×←C-I)××/A×C+I×÷A×A←⊃3⍴⊂1+3○4÷⍨¯2○(2×(¯1⌽⍵)×1⌽⍵)÷⍨+/A×C-I}
</code></pre>
<p>It use <code>I</code>=(identity on <code>⍴M</code>), and <code>C</code>=(<code>⍴M</code> matrix of 1)-<code>I</code>. Test:</p>
<pre><code>  f←{A←M×M←⊃3⍴⊂⍵⋄I←=/¨⍳⍴M⋄C←≠/¨⍳⍴M⋄(4÷⍨√(+/⍵)÷⍨×/+/M×←C-I)××/A×C+I×÷A×A←⊃3⍴⊂1+3○4÷⍨¯2○(2×(¯1⌽⍵)×1⌽⍵)÷⍨+/A×C-I}
  f 28392 21000 25872
3969 4900 4356 
  f 1 1 1
0.1830127019 0.1830127019 0.1830127019 
  f 1 2 2
0.309449296 0.2182458366 0.2182458366 
  f 2 2 3
0.4114378278 0.4114378278 0.2731817602 
  
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, <s>233</s> 232 bytes</h1>

<pre class="lang-none prettyprint-override"><code>from math import*
R=lambda a:(a,a[1:]+a[:1],a[2:]+a[:2])
def D(a):B,C,A=[1+tan(q/4)for q in[acos((x*x+y*y-z*z)/(2*x*y))for x,y,z in R(a)]];return(prod(map(lambda i,j,k:i+j-k,*R(a)))/sum(a))**.5/4*A*B/C
f=lambda x:print(*map(D,R(x)))
</code></pre>
<p><a href="https://tio.run/##NY7LboMwEEX3fMUsbTMp2EBJqFjk8QXZIhbTEhSS8ojjSJCfpzZNpFkcj@8Z3WEy576L1oOe51r3LbRkztC0Q6@N8I75L7XfFQFljJAKmZU@FZksLat/ViX3qlMNB0Y82@Eet3khfUMduwUxr3sNN2i6gn76O2OjGP1JTKunePKAKTGKiS@ZESd82hwc7Zmy/NIn89AdG3RfsZYG9qrR4AWvWeNfVlcULsp5cH@0DoT4SIJYbMUu2Hv1u/eYDbrpDBPuyAGPbLTKXJEhyKFgEsENR3Co7DhUC0YOI4QYIXGY2BVCumRDKzkxXl52/YmwebNULyNK7YeNbRZJraONuyzD0OoqWaeKl95SrEbXiOP8Bw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<h2>How</h2>

<pre class="lang-none prettyprint-override"><code>R=lambda a:(a,a[1:]+a[:1],a[2:]+a[:2])
</code></pre>
<p>Rotates through the three variables to produce (a,b,c), (b,c,a), (c,a,b). It seems like this could be shorter.</p>

<pre class="lang-none prettyprint-override"><code>[1+tan(q/4)for q in[acos((x*x+y*y-z*z)/(2*x*y))for x,y,z in R(a)]]
</code></pre>
<p>The nested list comprehension produces the three acos values A, B, and C with the loop in the right and then feeds them into the left hand side to get the three tangents.</p>

<pre class="lang-none prettyprint-override"><code>prod(map(lambda i,j,k:i+j-k,*R(a)))
</code></pre>
<p>Finally we get to use <code>prod</code> for free since we have the <code>from math import*</code>. This save one char when creating the numerator under the r's sqrt.</p>
</div>
<div id="pu3" class="pu"><h1>APL+WIN, 137 bytes</h1>
<p>Prompts for a vector of side lengths</p>
<pre><code>m←0 1 2⌽3 3⍴⎕⋄r←0 1 2⌽3 3⍴1+3○.25×¯2○((m[;2]*2)+(m[;3]*2)-m[;1]*2)÷2××/m[;2 3]⋄(.25×((×/(+/m[;2 3])-m[;1])÷+/m[1;])*.5)×(×/r[;2 3])÷r[;1]
</code></pre>
<p><a href="https://tio.run/##ZY4xTsNAEEX7PcWU61hOPDNxHCsnQAJxAOTCCgqK5AjkVPQRIAUQDfIxaJBS0bA32YuYPyFUbLHz9Pf91TR3bXZ937S3N9mybbbb9XKIr@8X5/HhTR3o7BLELj49roYNMCcmic9fShpfPiHE/a77l3Oqsd@PpQj994cAvd9cLaQeSZIaqVEGYINwkNCHfmIKaY0f/bHqPUKf/uWnAnSLeFEno3GRQIPVnZRw6MwZsK8bVo6xFTubQoKJmxRTaUqF5VgbxtRQaUbVL7AcX7WkGVNVWnGuFcqc5zlJMS/F4fwA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 218 bytes</h1>
<pre><code>proc()s:=x-&gt;subs({a=b,b=c,c=a,A=B,B=C,C=A},x);q:=d[A]=r[A]*sqrt((a+b+c)*(b+c-a)/(a+b-c)/(a-b+c));4*r[A]*r[B]=(d[A]+d[B]-c)^2;t:=subs(q,s(q),%);e=subs((a,b,c)=~args,{t,s(t),s(s(t))});eval([r[A],r[B],r[C]],fsolve(e))end;
</code></pre>
<pre><code>proc()
s:=x-&gt;subs({a=b,b=c,c=a,A=B,B=C,C=A},x);  # makes cyclic substitutions
q:=d[A]=r[A]*sqrt((a+b+c)*(b+c-a)/(a+b-c)/(a-b+c)); # Mathworld Eq (12)
4*r[A]*r[B]=(d[A]+d[B]-c)^2;     # Mathworld Eq (9)
t:=subs(q,s(q),%);               # substitute d[A] and d[B] in Eq (9) 
e:=subs((a,b,c)=~args,           # substitute numerical values into        
    {t,s(t),s(s(t))});           # the 3 equations to solve.  
eval([r[A],r[B],r[C]],fsolve(e)) # solve and output
end;
</code></pre>
<p>Since the <code>arccos</code> and other trig functions in Maple are verbose, I looked for equations that don't use them. The six equations 9-14 on <a href="https://mathworld.wolfram.com/MalfattiCircles.html" rel="nofollow noreferrer">MathWorld</a> are two equations (9 and 12) with the others found from cyclic permutations of the variables. Solving all six equations directly gave too many invalid solutions, e.g., negative d or r values. But substituting d values found from eqns 12-14 into eqns 9-11 and solving these three equations works without additional conditions required. Subscripts 1,2,3 were replaced by A,B,C for golfing purposes.</p>
<p>The default output from fsolve is {r[A]=number, r[B]=number, r[C]=number} and if that were acceptable then the last line could just be <code>fsolve(e)</code>, saving 23 bytes.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 31 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>S_Ḥ
²Ç×÷PHÆA÷4ÆT‘P÷²ƊɓÇP÷SƊ½÷4×
</code></pre>
<p>A monadic Link that accepts the three side lengths as a list and yields the three radii.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/z84/uGOJVyHNh1uPzz98PYAj8Ntjoe3mxxuC3nUMCPg8PZDm451nZx8uB3IDD7WdWgvSG76////o40sjC2NdBSMDA0MDICUqYW5USwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/z84/uGOJVyHNh1uPzz98PYAj8Ntjoe3mxxuC3nUMCPg8PZDm451nZx8uB3IDD7WdWgvSG76f53D7UcnPdw541HTmqxHDXMUbO0UHjXM1Yz8/1/DUEcBhDR1FEBMIyACMY3ATGMQ01hHwURHwRTENAUK6SiYg9UaADWBNJqAeUBhMx0FSxjb0Aiqw9gcKAFUZgnWZGRhbAky2dDAAKjdyNTC3EgTAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<p>Just a golfed implementation of the given method.</p>
<pre><code>S_Ḥ - Helper Link: list of integers, L=[x, y, z]
S   - sum {L}            -&gt; Sum = x+y+z
  Ḥ - double {L}     -&gt; Doubles = [2x, 2y, 2z]
 _  - {Sum} subtract {Doubles} -&gt; [y+z-x, x+z-y, x+y-z]

²Ç×÷PHÆA÷4ÆT‘P÷²ƊɓÇP÷SƊ½÷4× - Main Link: list of integers, T=[a, b, c]
²                           - square {T} -&gt; [a², b², c²]
 Ç                          - call the Helper Link with {that} -&gt; [b²+c²-a², a²+c²-b², a²+b²-c²]
  ×                         - multiply by {T} -&gt; [a(b²+c²-a²), b(a²+c²-b²), c(a²+b²-c²))
    P                       - product {T} -&gt; abc
   ÷                        - divide {these} -&gt; [(b²+c²-a²)÷bc, (a²+c²-b²)÷ac, (a²+b²-c²)÷ab]
     H                      - halve {that} -&gt; [(b²+c²-a²)÷2bc, (a²+c²-b²)÷2ac, (a²+b²-c²)÷2ab]
      ÆA                    - arc-cosine {that} -&gt; [A, B, C]
        ÷4                  - divide {that} by four -&gt; [A÷4, B÷4, C÷4]
          ÆT                - tangent {that} -&gt; [tan(A÷4), tan(B÷4), tan(C÷4)]
            ‘               - increment {that} -&gt; [1+tan(A÷4), 1+tan(B÷4), 1+tan(C÷4)]
                Ɗ           - last three links as a dyad - f(X=that):
             P              -   product {X} -&gt; (1+tan(A÷4))(1+tan(B÷4))(1+tan(C÷4)]
               ²            -   square {X} -&gt; [(1+tan(A÷4))², (1+tan(B÷4))², (1+tan(C÷4))²]
              ÷             -   divide {these}
                              -&gt; Z = [(1+tan(B÷4))(1+tan(C÷4))÷(1+tan(A÷4)),
                                      (1+tan(A÷4))(1+tan(C÷4))÷(1+tan(B÷4)),
                                      (1+tan(A÷4))(1+tan(B÷4))÷(1+tan(C÷4)),
                                     ]
                 ɓ          - start a new dyadic chain - f(T, Z)
                  Ç         - call the Helper Link with {T} -&gt; [b+c-a, a+c-b, a+b-c]
                      Ɗ     - last three links as a monad - f(X=that):
                   P        -   product {X} -&gt; (b+c-a)×(a+c-b)×(a+b-c)
                     S      -   sum {X} -&gt; b+c-a+a+c-b+a+b-c = a+b+c
                    ÷       -   divide {those} -&gt; 4r²
                       ½    - square-root {that} -&gt; 2r
                        ÷4  - divide {that} by four -&gt; r÷2
                          × - multiply {that} by {Z} -&gt; [r(GA), r(GB), r(GC)]
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 66 bytes</h1>
<pre><code>Ｆ³⊞υＮ≔Ｅ∕×υ⁻ΣＸυ²⊗Ｘυ²⊗Πυ∕₂⁻¹Ｘι²ιθＦ²ＵＭθ∕⊖₂⊕Ｘκ²κＩ×∕Π⊕θＸ⊕θ²∕₂∕Π⁻Συ⊗υΣυ⁴
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZG9TsMwFIXFylNYna6lVEpdEEGdULN0KKooG2LIj0utxnZj-5aHYakQCFZeh6chxmmbwGJZx9efzzl--SzWmSl0Vu337-hWw-T77HWlDYExJQu0a8CIzNQW3S3KnBugdHJ-Y614UjDPtpCKnSg53AvJrR-dC4UWlihhoZ-b8UZilEYk1ZhXvOypPd3oEgsHGNRAXdaYGX6ntYPAHUUkAEQARET4pW48_XpmlDSmplrKTJVQH0EpLwyXXLnmpQ50pk5y4G6OxjY-6MII5WCaWdcmbHkHt11A7W8FSl8-NPAv0x_YqTrsFBMKCarfXXh7kzebF7b9sI-HwXBXDR6_WDK-ZoSN4jgm7DK5YuH8Bw" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｆ³⊞υＮ
</code></pre>
<p>Input <span class="math-container">\$ a \$</span>, <span class="math-container">\$ b \$</span> and <span class="math-container">\$ c \$</span>.</p>
<pre><code>∕×υ⁻ΣＸυ²⊗Ｘυ²⊗Πυ
</code></pre>
<p>Calculate <span class="math-container">\$ \cos A \$</span>, <span class="math-container">\$ \cos B \$</span> and <span class="math-container">\$ \cos C \$</span> using the cosine rule for triangles...</p>
<pre><code>≔Ｅ...∕₂⁻¹Ｘι²ιθ
</code></pre>
<p>... and from those, calculate <span class="math-container">\$ \tan A \$</span>, <span class="math-container">\$ \tan B \$</span> and <span class="math-container">\$ \tan C \$</span> using this formula:</p>
<p><span class="math-container">$$ \tan \theta = \frac { \sqrt { 1 - \cos^2 \theta } } { \cos \theta } $$</span></p>
<pre><code>Ｆ²ＵＭθ∕⊖₂⊕Ｘκ²κ
</code></pre>
<p>Calculate <span class="math-container">\$ \tan \frac A 4 \$</span>, <span class="math-container">\$ \tan \frac B 4 \$</span> and <span class="math-container">\$ \tan \frac C 4 \$</span> using this formula twice:</p>
<p><span class="math-container">$$ \tan \frac \theta 2 = \frac { \sqrt { 1 + \tan^2 \theta } - 1 } { \tan \theta } $$</span></p>
<pre><code>∕₂∕Π⁻Συ⊗υΣυ⁴
</code></pre>
<p>Calculate <span class="math-container">\$ \frac r 2 \$</span> ...</p>
<pre><code>Ｉ×∕Π⊕θＸ⊕θ²...
</code></pre>
<p>... and use that to calculate the desired radii.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277902/">277902</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




