<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::265480</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>122</td><td>Charcoal</td><td>230925T115524Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265482#265482">Neil</a></td></tr>
<tr d-ix="1"><td>121</td><td>Raku</td><td>230925T195007Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265489#265489">Sean</a></td></tr>
<tr d-ix="2"><td>050</td><td>Jelly</td><td>230925T195356Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265490#265490">Nick Ken</a></td></tr>
<tr d-ix="3"><td>122</td><td>JavaScript Node.js</td><td>230925T192448Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265488#265488">l4m2</a></td></tr>
<tr d-ix="4"><td>143</td><td>JavaScript ES6</td><td>230925T135320Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265485#265485">Arnauld</a></td></tr>
<tr d-ix="5"><td>041</td><td>05AB1E</td><td>230925T115608Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265483#265483">Command </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>128</s> <s>125</s> 122 bytes</h1>
<pre><code>Â¿â¼Â²ï¹ªï¼¬Î¸Â³Â«â‰”âŸ¦âŸ§Î·â‰”âŸ¦âŸ§Î¶ï¼·âŒŠâ»Î¸Î·Â«âŠÎ·Î¹âŠÎ¶âŸ¦Î¹â„–Î¸Î¹âŸ§Â»âŠÏ…Î¶ï¼¦Ï…Â¿â¼Â¹ï¼¬Î¦Î¹ï¹ªÂ§ÎºÂ¹â†”Â³ï¼°Â¹ï¼¦Î·Â¿â¼Â³ï¼¬Î¦Î¹Ã—Â§Î»Â¹â€ºÂ²â†”â»ÎºÂ§Î»â°âŠÏ…ï¼¥Î¹âŸ¦Â§Î»â°â»Â§Î»Â¹â€ºÂ²â†”â»ÎºÂ§Î»â°âŸ§Â»ï¼·â€ºÎ·Î·Â«âŠâŠâŒŠâŒŠâ„–â„–â‰”Î¦ï¹ªÃ—Ã—â»â»Â¹ï¼¥ï¼¥ï¼¦ï¼°ï¼°ï¼·âˆ•Â»
</code></pre>
<p><a href="https://tio.run/##fY/BagIxEIZfpQ/gpdrah1n2IF56KBR8AhdUXOlx697qyQjag7hgNpuAMHuP7zAvkEfY/hMrvRU@SJh8M/Nn/DqajN9Hb11HF84cnYLZB/fta6rowHnBG8Wbndd/13Nwmj9WnFlfew1p9eW1N3KcoeA2W@PFwCWL6nUuLeo6vy0wMh0W9tDON2R4UVAV3FFeFAZGq/q12hKShTRt6ARTtjZS4uwYZwe3lVXqXsvsPw2SSNJPGyS@RRfwGTBbC3nhFaK1ZVuiVcYh1jaiEDKieflJtuuS5LH30I8MIk93niPDyAtI0x8" rel="nofollow noreferrer" title="Charcoal â€“ Try It Online">Try it online!</a> Uses the Charcoal code page. Explanation:</p>
<pre><code>Â¿â¼Â²ï¹ªï¼¬Î¸Â³Â«
</code></pre>
<p>Check that the length is satisfactory.</p>
<pre><code>â‰”âŸ¦âŸ§Î·â‰”âŸ¦âŸ§Î¶ï¼·âŒŠâ»Î¸Î·Â«âŠÎ·Î¹âŠÎ¶âŸ¦Î¹â„–Î¸Î¹âŸ§Â»
</code></pre>
<p>Count the number of times each number appears in the array.</p>
<pre><code>âŠÏ…Î¶ï¼¦Ï…
</code></pre>
<p>Start a breadth first search with the original list of counts.</p>
<pre><code>Â¿â¼Â¹ï¼¬Î¦Î¹ï¹ªÂ§ÎºÂ¹â†”Â³ï¼°Â¹
</code></pre>
<p>If this hand is all sets of <code>3</code> identical numbers except one, then it is a winning hand. Otherwise:</p>
<pre><code>ï¼¦Î·
</code></pre>
<p>Loop over all numbers that appeared.</p>
<pre><code>Â¿â¼Â³ï¼¬Î¦Î¹Ã—Â§Î»Â¹â€ºÂ²â†”â»ÎºÂ§Î»â°
</code></pre>
<p>Check to see whether this number might be the middle of a run of three.</p>
<pre><code>âŠÏ…ï¼¥Î¹âŸ¦Â§Î»â°â»Â§Î»Â¹â€ºÂ²â†”â»ÎºÂ§Î»â°âŸ§Â»
</code></pre>
<p>If so then remove that run and add the result to the list of hands to check.</p>
<pre><code>ï¼·â€ºÎ·Î·Â«âŠâŠâŒŠâŒŠâ„–â„–â‰”Î¦ï¹ªÃ—Ã—â»â»Â¹ï¼¥ï¼¥ï¼¦ï¼°ï¼°ï¼·âˆ•Â»
</code></pre>
<p>Filler bytes to satisfy the source layout, wrapped in a <code>while</code> loop whose condition (value greater than itself) can never be true.</p>
<p>128 bytes for an optimised version that's just about fast enough to verify its own bytes:</p>
<pre><code>Â¿â¼Â²ï¹ªï¼¬Î¸Â³Â«â‰”âŸ¦âŸ§Î·â‰”âŸ¦âŸ§Î¶ï¼·âŒŠâ»Î¸Î·Â«âŠÎ·Î¹âŠÎ¶âŸ¦Î¹â„–Î¸Î¹âŸ§Â»âŠÏ…Î¶ï¼¦Ï…Â¿â¼Â¹ï¼¬Î¦Î¹ï¹ªÂ§ÎºÂ¹â†”Â³ï¼°Â¹ï¼¦â»ï¼¥Î¦Î·â¼Â³ï¼¬Î¦Î¹Ã—Â§Î¼Â¹â€ºÂ²â†”â»ÎºÂ§Î¼â°ï¼¥Î¹âŸ¦Â§Î¼â°â»Â§Î¼Â¹â€ºÂ²â†”â»ÎºÂ§Î¼â°âŸ§Ï…âŠÏ…ÎºÂ»Â¿â€ºÎ·Î·Â«âŠâŠâŒŠâŒŠâ„–â„–â‰”ï¹ªÃ—Ã—â»Â¹ï¼¥ï¼¦ï¼°ï¼°ï¼·ï¼·âˆ•ÎºÎºÏ…Ï…Â»
</code></pre>
<p><a href="https://tio.run/##pVLBasJAEP2VfkAPWhtNvkU8bGJCD4VCTz0qaKnSo9VbPRmh7UEUjImBwnrf/MP@QD4hndkNzNjiqbA819k3b97MJLgTj8GDuK8q@a2HudyW6UeZf6mD3MlPPZnpZayXa5XQdV/miX6d6uFRHVQCpOm7SlSKP3ugwG00h5cUuPII0WKMKXExtgVSVAcW1JFrlclUP8/krsw3@BKDapmv4D1B7q7mnhZAhVQ9yOQW@Fg7w5AebpAOteL6Lzxd5oKlYmwtZfIIfgYZWLc94IGu4IzmeCYzcHhanBaoCNZW4A5cmpPgCF7eVKayYgyNHauq2208@dH1FWDf4A2icBCDADFqmnjLxF1E18T7vkGTFV6IR8LcO4hNzyj0SdNmWc2GQ5HQo0it4FPcdZmCR7UEz2K5QZsiZ502qUfRIjXbu7g1EZ@YXpvm0G8whTb1FThMzWW1WhdqCVaLufJD2oXH9K2fM36D6tbTuMCxCv@vVW/W@T3tmu@xOYdsp392bdF@FU22WZd9S/UuBEO@O4fmbzdSY4dhQN4sRsyz8Hq9Hw" rel="nofollow noreferrer" title="Charcoal â€“ Try It Online">Try it online!</a> Add the <code>-x</code> argument to show the hex dump which you can compare against the input.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://raku.org/" rel="nofollow noreferrer">Raku</a>, 121 bytes</h1>
<pre><code>{sub k(\u){u{*}~~[.2/.1]||?(u{*}:k).grep:{?grep {u (&gt;)$_&amp;&amp;k u (-)$_},^3+$_,[$_,$_,$_]}}(bag |$_)}###:~%')+//&gt;&gt;?\]cbbetprr
</code></pre>
<p><a href="https://tio.run/##ZY5NboMwEIX3PcUoUGo3LgSbQqAKHIRQFCrIgkRFpCwiA1en/oEkVaXv2da88ZtpyvbkT@crWBXsJn7pCqjRvsO846/DOKY2dWw36/sEyUJUY/vYlk3EE3kB755QjM3csmroAL2J50A@2drMSSqkyIYBFYcj9GaOB8MwovH5Ba8dJ46TffZVFOVP07bTB1wOV1iZud2IjRCGXQy8ApG3guq7hXRDYJMRSMMwJHA/XMo8fUrTJUAX2FwQdqAK7wtbYRLwRcKfP0zhLeheXyECgrn3Bn2cpZEtcs//SEcFzClMhQf3FW6BevhW4fpajGr5nlQ2/QI" rel="nofollow noreferrer" title="Perl 6 â€“ Try It Online">Try it online!</a></p>
<p>The inner subroutine name <code>k</code> and its argument <code>u</code> were somewhat haphazardly chosen to try to produce more triples and runs.</p>
<ul>
<li><code>bag |$_</code> converts the argument list into a <code>Bag</code> (a set with multiplicity) which is then given to the inner recursive subroutine <code>k</code>.</li>
<li>The subroutine returns true if <code>u{*} ~~ [.2/.1]</code>, that is, if the bag contains a single element with multiplicity 2.  This is the pair that a winning mah jong hand must contain.</li>
<li>Otherwise, for the keys ğ‘¥ in the bag (<code>u{*}:k</code>), return true if the bag is a superset (<code>u (&gt;) $_</code>) of either the run ğ‘¥, ğ‘¥ + 1, ğ‘¥ + 2 (<code>^3 + $_</code>) or the triple ğ‘¥, ğ‘¥, ğ‘¥ (<code>[$_, $_, $_]</code>), and the bag minus those elements (<code>u (-) $_</code>) produces a true result when passed to the inner recursive function <code>k</code>.  (Normally I prefer using the Unicode characters for superset (<code>âŠƒ</code>) and set minus (<code>âˆ–</code>), which are the same number of bytes as the equivalent plain ASCII operators (<code>(&gt;)</code> and <code>(-)</code> respectively), but then I'd have to repeat both of them twice in the trailing comment for a substantial byte penalty.)</li>
</ul>
<p>Of course, the trailing comment <code>###:~%')+//&gt;&gt;?\]cbbetprr</code> makes the overall code snippet into a winning numerical mah jong hand.  The function takes an infeasibly long time to validate itself; I constructed the comment by visual inspection of the function's character distribution.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 50 bytes</h1>
<pre><code>Â°Ã¾Ã¾&amp;&amp;,@Æ‘Æ’WÃŸÂ»È¤
WÃW+Ã¾@3â€™Å“&amp;Æ‘Æ‡Å“-@â‚¬Æ²â‚¬áº$Æ¬áºÅ’É %Â¹Æ‡É—â‚¬3â€˜Å“&amp;Æ‘Æ‡3
</code></pre>
<p><a href="https://tio.run/##pVA9S8RAEO3zK5agaczBJRvzwYGmE2zsDBJSWpwcWNsFm4CCcLnCE/xCvE5ERcRcJMUuWbyfsfkjcTZr4oF2wpsHszPz5u0c7I9GR3VNnmhBC03TfTZmaUBvSP55rwT0OlijhY@r@KKcaFBKyknPr44f2AsQn5@tMMFlurhdJRlLFufwDN3T725ck4xOt4fV8yNIsJMdNt6kCZ@/KzwrSCbSQRVfot4GquKrAU0Unr@W6S6o0ARorx6KbSBxaJguSPDsrvwAfZ6fkhmZQWGrVlU17OuoHymh53k6@iHDxJZkqBk6MltgmUPRafL1Fi7UdGTD/PIEbmC1kK12A5h3ZGsHc3mRBHQIh78RKeqfpydv/7@9qoTCmXSHG89O97HOp/yS28CwZWBThm2JiODAXw" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">Try it online!</a></p>
<p>The main part is a monadic link that takes a list of integers and returns an empty list for false and a list containing one or more items for truthy. To meet the challenge rules, the program includes another link above the main one which is just filler.</p>
<p>Completes all test cases including itself in about 17 seconds on TIO. Full explanation to follow. Note the footer turns the falsy and truthy outcomes to 0 and 1 for more compact printing.</p>
<p>General explanation:</p>
<ul>
<li>Remove every possible combination of runs of three (including removing none)</li>
<li>Check the remaining integers are in groups of length 0 mod 3, except for one that is of length 2 mod 3</li>
</ul>
</div>
<div id="pu3" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 122 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(A,e,k,n)=&gt;1/n&amp;&amp;!{'1,1':1,'0,0':'B\():'|1}[[e-k,k-n]]?!!0:A+A?A.some((C,j)=&gt;f(A.filter(B=&gt;j--),C,...1/n?[]:[e,k])):e==+k
</code></pre>
<p><a href="https://tio.run/##jZBRT4MwEMff@RTdHkabHZXChA3TLWxxn8C3rg9kFjdAMDBNjPrZsaMOUV9Mfndp7q53/7sseUmafX18Ojllda/aLW9TjmNQkENJ@JJdlZPJ6M1mwOyIge2Ca0f2eodJZL@zDyGUk0PulFKuRiM3iqfxKqZN9agw3kCmG6Q4pumxOKkar/kycxwCG6CU6sYrISOhB0lCIsX5NG/3VdlUhaJF9YDH4q5@Ph1e5ZjcWMJCSLiAXAnn12KxAPTtmOfPjDdpBsi74PchXRJ2oesLc50GFOguv/75HbMLpjro0C3CvrrHG040mKKz5r/onLRoWtW3yf6AE8SXaLj6FieE6K2tH/fYlWKbFM3gIF86ejl@pzMc7tNrM5vMO1hgzPeMBbOzyf9oaj8B" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<p>Besides tuplets: <code>&amp;&amp; ++,,-- --..// AABBCC [\] ijjkkl mno rst {|}</code></p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (ES6), 143 bytes</h1>
<p>An early attempt. This can probably be significantly improved.</p>
<p>Expects an <code>Uint32Array</code>. Returns a Boolean value.</p>

<pre class="lang-javascript prettyprint-override"><code>f=&gt;(q=([v,...f],e=0)=&gt;1/v?[2,4,5].some(t=&gt;(n=1,o=f.filter(i=&gt;n*2&gt;t|i-v-t%2*n||!++n),n*2&gt;t&amp;&amp;q(o,e+(t&lt;3)))):e==1)(f.sort())////!%%&amp;55::&gt;??[]efqpt
</code></pre>
<p><a href="https://tio.run/##nZBdT8MgFIbv@yuYyRa6sW6lH/uSLl64X6BX2ItmgqupsFGsWbL/Xmlxteqd5DmEHF4O7zmvWZWVe5Uf9VTIZ1bvSM1JAk8E0gp5nsdTxMjcJYk/q7YUoxBFqVfKNwa1kQniI0m4x/NCMwVzkogxTvQln1ZTPcRjcbkMJhPhojY9Gp2gRGwC9W3gmrVmhPgu5Kae0tB1Z2YNhsNRFK3XyXZLU8ZPR13vpShlwbxCvsAb@qDe9eGc3rgbhzoA0DkC8xQ1p9VqhcD35uMgtLu99hHAV4IuZSSLNhVdWZprBGJT5de7oCW8YtVxiymx6NQduP@jxYoaz39JndTxuFT32f4AM0AS0O98BwX7AI@50AG@Uyo7w6yZ4cZxfsznSdBdVpS9AX356uwFre9Fv7/Oq@1s2eLHNgJsIw6b@J/J@hM" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<p>The original function is too slow to validate itself on TIO, so we have to use a slightly optimized version:</p>
<p><a href="https://tio.run/##xY6xboMwFEX3fAWJhPUcjFNIWUgeqB3yB50QA6LPlStiB@NQVeLfqdO9c@94dXXu@ezmbuqdvvnU2HdaL7gqrGBEaGYhpVStIHziWGWHuaZzzliTi2dRtHKyVwIftgYzYVFJpQdPDjRWZp9XftHpnPo435tl2SaJ4eK3ZmwEKygBfz7ykJIQMw4q8JwHzg8h2zhmRVGWVV03Lanx5teBfNQHwQij3d@C/@K2O202vTWTHUgO9gMuYOgretPGH/MX57pveL0rFd4f/g/saf0B" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, <s>47</s> <s>47</s> <s>44</s> 41 bytes</h1>
<pre><code>Å“Ê’3Ã´DÊ’Â¥J&gt;}gsÊ’Â¥T&gt;SQ}g+3*Ig&gt;Q}Ä‡Q,DÂ¥3â€ºDHUssÃ´
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//6ORTk4wPb3E5NenQUi@72vRiECPELjiwNl3bWMsz3S6w9kh7oI7LoaXGjxp2uXiEFhcf3vL/f7ShjoKRjoKxjoKJjoJpLAA" rel="noreferrer" title="05AB1E â€“ Try It Online">Try it online!</a>, or <a href="https://tio.run/##yy9OTMpM/V9Waa@koGunoGRfeWjl/6OTT00yPrzF5dSkQ0u97GrTi0GMELvgwNp0bWOtQ@vS7QJrj7QH6rgcWmr8qGGXi0docfHhLf//R0fH6ihEG4IIAx0FAzBHR8FYR8FUR8FcR8ESKmAEQ8YgAUtLS6AUnDA0MjaBkAjVQBOAYqaxsQA" rel="noreferrer">try all test cases (this code can handle in under a minute)</a>.</p>
<p><a href="https://tio.run/##yy9OTMpM/a/0/@jkU5OMD29xOTXp0FIvu9r0YhAjxC44sDZd21jLM90usPZIe6COy6Glxo8adrl4hBYXH97yX@nQtgt7zm09uu9IW3F2bXVZpb2Sgq6dgpI9SKTy8Aqd2v8A" rel="noreferrer">See the codepoints</a></p>
<p>Returns <code>0</code> for true and <code>[]</code> for false.</p>
<h2>Explanation</h2>
<p>The general approach is this: Test for the existence of a permutation such that if we split it to parts of length 3, and then keep all the valid ones and count them, and multiply by 3, we should get 1 plus the length of the original input.</p>
<pre><code>Å“       # all permutations
Ê’       # keep those such that:
 3Ã´      # split to parts of length 3
 D       # duplicate
 Ê’       # keep parts where:
  Â¥       # their differences
  J       # joined to a string
  &gt;       # plus one
 }       # (is equal to 1)
 g       # find the length
 s       # swap, so the parts are on top
 Ê’       # keep parts such that:
  Â¥      # their differences
  T&gt;     # 11
  S      # [1, 1]
  Q      # [1, 1] is equal to the differences
 }
 g       # take their lengths
 +       # sum the lengths of the two types of parts
 3*      # times 3
 I       # input
 g       # length
 &gt;       # plus one
 Q       # is equal to the number of valid parts times 3
}
Ä‡Q      # test whether the array is empty, by comparing arr[0] == arr[1:]
,        # output - this suppresses implicit output, so the rest of the code doesn't matter
DÂ¥3â€ºDHUssÃ´  # filler to satisfy the self validation requirement
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/265480/">265480</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




