<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::155670</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>013</td><td>Japt</td><td>180213T175108Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155699#155699">Shaggy</a></td></tr>
<tr d-ix="1"><td>012</td><td>05AB1E</td><td>180213T154239Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155679#155679">user2956</a></td></tr>
<tr d-ix="2"><td>120</td><td>Ruby</td><td>180214T003952Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155718#155718">benj2240</a></td></tr>
<tr d-ix="3"><td>013</td><td>Stax</td><td>180213T223030Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155715#155715">recursiv</a></td></tr>
<tr d-ix="4"><td>053</td><td>J</td><td>180214T100320Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155730#155730">Galen Iv</a></td></tr>
<tr d-ix="5"><td>012</td><td>Husk</td><td>180214T072252Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155726#155726">Zgarb</a></td></tr>
<tr d-ix="6"><td>193</td><td>JavaScript ES6</td><td>180213T163652Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155691#155691">Arnauld</a></td></tr>
<tr d-ix="7"><td>167</td><td>Python 3</td><td>180213T154143Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155678#155678">hyperneu</a></td></tr>
<tr d-ix="8"><td>013</td><td>Pyth</td><td>180213T154728Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155680#155680">hyperneu</a></td></tr>
<tr d-ix="9"><td>140</td><td>Coconut</td><td>180213T163321Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155690#155690">ovs</a></td></tr>
<tr d-ix="10"><td>013</td><td>Jelly</td><td>180213T153221Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155675#155675">hyperneu</a></td></tr>
<tr d-ix="11"><td>010</td><td>Brachylog</td><td>180213T153940Z</td><td><a href="https://codegolf.stackexchange.com/questions/155670/stitch-together-a-palindrome-from-palindromic-substrings/155676#155676">Fatalize</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>19</s> 13 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p><em>No longer</em> hampered by Japt not being able to get all substrings of a string (<em>nor</em>, too much, by my current levels of exhaustion!).</p>
<p>Outputs <code>undefined</code> if there's no solution.</p>
<pre><code>ã fêQ á m¬æêQ
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=4yBm6lEg4SBtrObqUQ&amp;input=ImFuYWEi" rel="nofollow noreferrer">Try it</a></p>
<pre><code>ã fêQ á m¬æêQ     :Implicit input of string
ã                 :Substrings
  f               :Filter by
   êQ             :  Is palindrome
      á           :Permutations
        m         :Map
         ¬        :  Join
          æ       :First element that
           êQ     :  Is palindrome
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>13</s> 12 bytes</h1>
<pre><code>ŒʒÂQ}œJʒÂQ}¤
</code></pre>
<p><a href="https://tio.run/##MzBNTDJM/f//6KRTkw43BdYenewFYRxa8v9/YlJiIgA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p>-1 byte thanks to Magic Octopus Urn and Emigna.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>131</s> <s>123</s> 120 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>-&gt;s{m=-&gt;t{t==t.reverse}
(1..z=s.size).flat_map{|l|(0..z-l).map{|i|s[i,l]}}.select(&amp;m).permutation.map(&amp;:join).detect &amp;m}
</code></pre>

<p><a href="https://tio.run/##XVL9bpswEP@fp7CQEoGUWAOara1E9iAIVYftqGbGibDptoY8e@azgdAhYd/vy@aw@6H5ez@V9/3RXLtyf7RXW5aW9uJD9EbcoiSj9LM01MhPkdKTAvvWweU6qjH55pS9SqnHcjSV3Kn6dqNGKMFssu1SehF9N1iw8qzRlmxf27PUKeXCOgvZdrd7FRFSxaAB4h3xT0Du0UjF4FHQY18hjut655NZnhV5cfDhBbnXVRgI1SHwS6gHJhj0U2hCOC6FF2cFB6xWCjykhxA@8YFXcVRWxlV8UuBrBsdHj1leFNPvQVS4Xoos9OfmHJnFDE3DGOdTbwEA54w1DQaaBmtANhAoeAdaA4E1BCMSQYJgDATW80bLxvMBhjNcnVDxdPj@4/nF6ZWWaubf2/aXmrta8X/arm2/8FFNBbB3ws9klPoy2B35ACX5G2jz293T0eV6YQZlSUlOlbfUjnOTIfHmxZDySDb5kyHJxqQx2ZBqWiakqNTm4i7kf8s6mqmBi59JsKV1JDSP7v8A" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>

<p>A lambda accepting a string and returning a string. Returns <code>nil</code> when no solution exists.</p>

<p>-5 bytes: Replace <code>select{|t|l[t]}</code> with <code>select(&amp;l)</code></p>

<p>-3 bytes: Replace <code>map{..}.flatten</code> with <code>flat_map{...}</code></p>

<p>-1 bytes: Loop over substring length and substring start, instead of over substring start and substring end</p>

<p>-2 bytes: Declare <code>z</code> at first use instead of beforehand</p>



<pre class="lang-ruby prettyprint-override"><code>-&gt;s{
  l=-&gt;t{t==t.reverse}        # Lambda to test for palindromes
  (1..z=s.size).flat_map{|l| # For each substring length
    (0..z-l).map{|i|         # For each substring start index
      s[i,l]                 # Take the substring
    }
  }                          # flat_map flattens the list of lists of substrings
  .select(&amp;l)                # Filter to include only palindromic substrings
  .permutation               # Take all orderings of substrings
  .map(&amp;:join)               # Flatten each substring ordering into a string
  .detect &amp;l                 # Find the first palindrome
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://staxlang.xyz/#c=%C3%A7%C2%BB%C2%AC%E2%96%BA%C3%96%E2%88%9Ej%E2%88%9E%3A%C3%86%E2%95%98%CF%84%CE%B4&amp;i=%22a%22%0A%0A%22anaa%22%0A%0A%221213235%22%0A%0A%22abbccdd%22%0A%0A%22racecar%22%0A%0A%2211233%22&amp;a=1&amp;m=1" rel="nofollow noreferrer">Stax</a>, 13 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>ç»¬►Ö∞j∞:Æ╘τδ
</code></pre>

<p><a href="https://staxlang.xyz/#c=%C3%A7%C2%BB%C2%AC%E2%96%BA%C3%96%E2%88%9Ej%E2%88%9E%3A%C3%86%E2%95%98%CF%84%CE%B4&amp;i=%22a%22%0A%0A%22anaa%22%0A%0A%221213235%22%0A%0A%22abbccdd%22%0A%0A%22racecar%22%0A%0A%2211233%22&amp;a=1&amp;m=1" rel="nofollow noreferrer">Run test cases</a> (It takes about 10 seconds on my current machine)</p>

<p>This is the corresponding ascii representation of the same program.</p>

<pre><code>:e{cr=fw|Nc$cr=!
</code></pre>

<p>It's not quite <em>pure</em> brute-force, but it's just as small as the brute-force implementation I wrote.  That one crashed my browser after about 10 minutes.  Anyway, here's how it works.</p>

<pre><code>:e                  Get all contiguous substrings
  {cr=f             Keep only those that are palindromes
       w            Run the rest of the program repeatedly while a truth value is produced.
        |N          Get the next permutation.
          c$        Copy and flatten the permutation.
            cr=!    Test if it's palindrome.  If not, repeat.
                    The last permutation produced will be implicitly printed.
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 53 bytes</h1>

<pre><code>[:{:@(#~b"1)@(i.@!@#;@A.])@(#~(0&lt;#*b=.]-:|.)&amp;&gt;)@,&lt;\\.
</code></pre>

<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/o62qrRw0lOuSlAw1HTQy9RwUHZStHRz1YjVBohoGNspaSbZ6sbpWNXqaanaaDjo2MTF6/zW5FLhSkzPyFdIU1BPzEhPV4byixOTU5MQihEBGVlZ2DoJraGhkbKzO9R8A" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 12 bytes</h1>

<pre><code>ḟS=↔mΣPfS=↔Q
</code></pre>

<p><a href="https://tio.run/##yygtzv7//@GO@cG2j9qm5J5bHJAGZgX@//9fqSgxOTU5sUgJAA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>

<h2>Explanation</h2>

<pre><code>ḟS=↔mΣPfS=↔Q  Implicit input, a string.
           Q  List of substrings.
       f      Keep those
        S=↔   that are palindromic (equal to their reversal).
      P       Permutations of this list.
    mΣ        Flatten each.
ḟ             Find an element
 S=↔          that is palindromic.
</code></pre>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 193 bytes</h1>

<p><em>"Look Ma, no permutation built-in!"</em> (So yes ... it's long ...)</p>

<p>Returns an empty array if there's no solution.</p>



<pre class="lang-js prettyprint-override"><code>f=(s,a=[].concat(...[...s].map((_,i,a)=&gt;a.map((_,j)=&gt;s.slice(i,j+1)))).filter(P=s=&gt;[...s].reverse().join``==s&amp;&amp;s),m=S=[])=&gt;S=a.map((_,i)=&gt;f(s,b=[...a],[...m,b.splice(i,1)]))&gt;''?S:P(m.join``)||S
</code></pre>

<h3>Demo</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(s,a=[].concat(...[...s].map((_,i,a)=&gt;a.map((_,j)=&gt;s.slice(i,j+1)))).filter(P=s=&gt;[...s].reverse().join``==s&amp;&amp;s),m=S=[])=&gt;S=a.map((_,i)=&gt;f(s,b=[...a],[...m,b.splice(i,1)]))&gt;''?S:P(m.join``)||S

console.log(f('anaa'))
console.log(f('1213235'))
console.log(f('hjjkl'))
console.log(f('a'))</code></pre>
</div>
</div>
</p>

<h3>How?</h3>

<p>Let's split the code into smaller parts.</p>

<p>We define <strong>P()</strong>, a function that returns <strong>s</strong> if <strong>s</strong> is a palindrome, or <strong>false</strong> otherwise.</p>

<pre class="lang-js prettyprint-override"><code>P = s =&gt; [...s].reverse().join`` == s &amp;&amp; s
</code></pre>

<p>We compute all substrings of the input string <strong>s</strong>. Using <strong>P()</strong>, we isolate the non-empty palindromes and store them in the array <strong>a</strong>.</p>

<pre class="lang-js prettyprint-override"><code>a = [].concat(...[...s].map((_, i, a) =&gt; a.map((_, j) =&gt; s.slice(i, j + 1)))).filter(P)
</code></pre>

<p>The main recursive function <strong>f()</strong> takes <strong>a</strong> as input and compute all its permutations. It updates <strong>S</strong> whenever the permutation itself is a palindrome (once joined), and eventually returns the final value of <strong>S</strong>.</p>

<pre class="lang-js prettyprint-override"><code>f = (                        // given:
  a,                         //   a[] = input array
  m = S = []                 //   m[] = current permutation of a[]
) =&gt;                         //   and S initialized to []
  S = a.map((_, i) =&gt;        // for each element at position i in a[]:
    f(                       //   do a recursive call with:
      b = [...a],            //     b[] = copy of a[] without the i-th element
      [...m, b.splice(i, 1)] //     the element extracted from a[] added to m[]
    )                        //   end of recursive call
  ) &gt; '' ?                   // if a[] was not empty:
    S                        //   let S unchanged
  :                          // else:
    P(m.join``) || S         //   update S to m.join('') if it's a palindrome
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 167 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda a:g(sum(k,[])for k in permutations(g(a[i:j+1]for i in range(len(a))for j in range(i,len(a)))))[0]
g=lambda k:[e for e in k if e==e[::-1]]
from itertools import*
</code></pre>

<p><a href="https://tio.run/##RU1LDsIgFNz3FG8JWhOrOxJOgiwwPvC15RNKF54ewTRxMpnFfDLpU94x3KuVj7oa/3wZMMKxbfdsGZXmNmZYgAIkzH4vplAMG3PMKBLzedI9p55nExyyFQMz/Lea/y6Nh9@grnpw8rhahELoZezl9mMBpUQlxGXSerA5eqCCucS4bkA@xVxONWUKhVmmphEab0015/UL" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-2 bytes thanks to Mr. Xcoder</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 13 bytes</h1>

<pre><code>h_I#sM.p_I#.:
</code></pre>

<p><a href="https://tio.run/##K6gsyfj/PyPeU7nYV68ASOlZ/f8fbaijAERGQDIWAA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>

<p>-1 byte thanks to Mr. Xcoder</p>
</div>
<div id="pu9" class="pu"><h1><a href="http://coconut-lang.org/" rel="nofollow noreferrer">Coconut</a>, 140 bytes</h1>

<pre><code>s-&gt;p(map(''.join,permutations(p(v for k in n(s)for v in n(k[::-1])))))[0]
from itertools import*
n=scan$((+))
p=list..filter$(x-&gt;x==x[::-1])
</code></pre>

<p><a href="https://tio.run/##LYxBCoMwEADvviKHQjZtlfYqxI9YDyGobNXdsInioX9PlXZuA8N49kxryqN95Vg2ARYXQOvqzUj30MuyJpeQKUKATQ0salJIiiCaU7afTG1dl8/OnLSPrhiEF4Wpl8Q8R4VLYEnXgmz0ji4AN2OKYGeMqaoGnI/wAnvZ7Nbu/1PW4nzvnWj1aVQQpCMdc9t9AQ" rel="nofollow noreferrer" title="Coconut – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 13 bytes</h1>

<pre><code>ŒḂÐf
ẆÇŒ!F€ÇḢ
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///opIc7mg5PSON6uKvtcPvRSYpuj5rWHG5/uGPR////ow11FIDICEjGAgA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Prints <code>0</code> in the invalid case.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="noreferrer">Brachylog</a>, 10 bytes</h1>
<pre><code>{s.↔}ᶠpc.↔
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7pY71HblNqH2xYUJINY//8rAWVTkxOLlP5HAQA" rel="noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
<p>Fails (i.e. prints <code>false.</code>) if not possible.</p>
<h3>Explanation</h3>
<pre><code>{   }ᶠ         Find all…
 s.              …substrings of the input…
  .↔             …which are their own reverse
      p        Take a permutation of this list of palindromes
       c.      The output is the concatenation of this permutation
        .↔     The output is its own reverse
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/155670/">155670</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




