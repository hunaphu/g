<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::32254</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>082</td><td>Tcl</td><td>180410T140321Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/161791#161791">sergiol</a></td></tr>
<tr d-ix="1"><td>001</td><td>Pascal</td><td>230904T220000Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/264898#264898">Kai Burg</a></td></tr>
<tr d-ix="2"><td>006</td><td>Ruby</td><td>140623T220952Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32371#32371">Not that</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>140623T200548Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32357#32357">AndoDaan</a></td></tr>
<tr d-ix="4"><td>nan</td><td></td><td>140623T171428Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32340#32340">Tyilo</a></td></tr>
<tr d-ix="5"><td>002</td><td>Python</td><td>140623T040016Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32256#32256">Greg Hew</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>140623T081517Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32281#32281">ɐɔıʇǝɥʇu</a></td></tr>
<tr d-ix="7"><td>nan</td><td></td><td>140623T073148Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32273#32273">aditsu q</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>140623T065018Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32265#32265">aditsu q</a></td></tr>
<tr d-ix="9"><td>nan</td><td></td><td>140623T065220Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32266#32266">n̴̖̋h̷͉̃</a></td></tr>
<tr d-ix="10"><td>nan</td><td></td><td>140623T041315Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32258#32258">n̴̖̋h̷͉̃</a></td></tr>
<tr d-ix="11"><td>nan</td><td></td><td>140623T040030Z</td><td><a href="https://codegolf.stackexchange.com/questions/32254/determine-if-an-integer-is-divisible-by-3/32257#32257">qwr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://tcl.tk/" rel="nofollow noreferrer">Tcl</a>, 82 bytes</h1>
<pre><code>proc T n {while \$n&gt;9 {set n [expr [join [split $n &quot;&quot;] +]]};expr {$n in{0 3 6 9}}}
</code></pre>
<p><a href="https://tio.run/##JYxBCsIwFET3nmIo2YmgFQvV4im6S7MKAb@ENCQRC59/9hh1NcN7zBTra41ptZgRwO8HeYdFhfsIzq40pt0WE/RzpdZz9FSgArrOYG@M3H6WG6HAR5wxYBSR@t0SDqfd/5E1BZtAZuovg4Djq2Qoui7Qc0sj9QM" rel="nofollow noreferrer" title="Tcl – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h2>Pascal, 1 token</h2>
<p>Pascal does not have bitwise operators.
(Some <em>dialects</em> do and some <em>implementations</em> use under the hood bitwise operators for operations on the <code>set</code> data type nevertheless.)
Since the <code>in</code> set membership operator is not listed among the allowed operators, another relational operator is used:</p>
<pre class="lang-pascal prettyprint-override"><code>    type
        wholeNumberLessThan256 = 0..255;
    
    function divisibleByThree(n: wholeNumberLessThan256): Boolean;
        const
            wholeNumbersLessThan256divisibleByThree = [
                      0,   3,   6,   9,  12,  15,  18,  21,  24,  27,
                     30,  33,  36,  39,  42,  45,  48,  51,  54,  57,
                     60,  63,  66,  69,  72,  75,  78,  81,  84,  87,
                     90,  93,  96,  99, 102, 105, 108, 111, 114, 117,
                    120, 123, 126, 129, 132, 135, 138, 141, 144, 147,
                    150, 153, 156, 159, 162, 165, 168, 171, 174, 177,
                    180, 183, 186, 189, 192, 195, 198, 201, 204, 207,
                    210, 213, 216, 219, 222, 225, 228, 231, 234, 237,
                    240, 243, 246, 249, 252, 255];
        begin
            { In Pascal `&lt;=` denotes the `⊆` operator with sets. }
            divisibleByThree := [n] &lt;= wholeNumbersLessThan256divisibleByThree;
        end;
</code></pre>
<h2>Extended Pascal, 0 token</h2>
<p>NB:
A lookup table could be written in Standard Pascal (ISO standard 7185), too.</p>
<pre class="lang-pascal prettyprint-override"><code>    type
        wholeNumberLessThan256 = 0‥255;
    
    { The reserved word `protected` is defined by Extended Pascal.
      It just means the value of `n` may not be altered in the definition. }
    function divisibleByThree(protected n: wholeNumberLessThan256): Boolean;
        type
            tableFormat = array[type of n] of Boolean;
        const
            lookupTable = tableFormat[
                      0,   3,   6,   9,  12,  15,  18,  21,  24,  27,
                     30,  33,  36,  39,  42,  45,  48,  51,  54,  57,
                     60,  63,  66,  69,  72,  75,  78,  81,  84,  87,
                     90,  93,  96,  99, 102, 105, 108, 111, 114, 117,
                    120, 123, 126, 129, 132, 135, 138, 141, 144, 147,
                    150, 153, 156, 159, 162, 165, 168, 171, 174, 177,
                    180, 183, 186, 189, 192, 195, 198, 201, 204, 207,
                    210, 213, 216, 219, 222, 225, 228, 231, 234, 237,
                    240, 243, 246, 249, 252, 255: true;
                    otherwise false
                ];
        begin
            divisibleByThree ≔ lookupTable[n];
        end;
</code></pre>
</div>
<div id="pu2" class="pu"><h2>Ruby, 6(?) tokens</h2>
<p>I'm really not sure how to count tokens.  OP, can you score me?</p>
<p>I think it's 6... <code>1</code>, <code>0</code>, <code>0</code>, <code>*</code>, <code>255</code>, <code>x</code></p>
<p>Note that the <code>*</code> is not integer multiplication.</p>
<pre class="lang-ruby prettyprint-override"><code>def div3(x)
  ([1,0,0]*255)[x]
end
</code></pre>
</div>
<div id="pu3" class="pu"><h1><strong>Befunge 93 - 5 tokens</strong></h1>
<p><strong>Fixed - division removed.</strong></p>
<pre><code>v      @._1.@
         \   
         0   
         +   
         3   
&gt;&amp;&gt;3-:0\`|   
  ^      &lt;   
</code></pre>
<p>Gets input, keeps subtracting 3 until it's smaller than 0, direct the pointer up ('|'), then adds 3. If the value is 0 then the pointer moves right (&quot;<em>1.@&quot; outputs '1') else moves left (&quot;@.</em>&quot; outputs '0'). '@' terminates the program.</p>
</div>
<div id="pu4" class="pu"><h1>JavaScript - 3 tokens</h1>

<pre><code>function div3(n) {
    var a = n * 0.3333333333333333;
    return (a | 0) == a;
}
</code></pre>

<p>This abuses the fact that using bitwise operators on a number truncates it to an integer in JavaScript.</p>
</div>
<div id="pu5" class="pu"><h1>Python, <strike>3</strike> 2 tokens</h1>

<p>Brute force solution, but it works.</p>

<pre class="lang-python prettyprint-override"><code>0x9249249249249249249249249249249249249249249249249249249249249249&gt;&gt;x&amp;1
</code></pre>

<p>Thanks to Howard for the 1 token reduction.</p>
</div>
<div id="pu6" class="pu"><h1>Python (2 tokens?)</h1>

<pre><code>1&amp;66166908135609254527754848576393090201868562666080322308261476575950359794249L&gt;&gt;x
</code></pre>

<p>Or</p>

<pre><code>1&amp;0x9249249249249249249249249249249249249249249249249249249249249249L&gt;&gt;x
</code></pre>

<p>Or</p>

<pre><code>1&amp;0b1001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001001&gt;&gt;x
</code></pre>
</div>
<div id="pu7" class="pu"><h1>C - 2 tokens</h1>

<pre><code>int div3(int x) {
    return x * 0xAAAAAAAB &lt;= x;
}
</code></pre>

<p>Seems to work up to 2<sup>31</sup>-1.</p>

<p>Credits to <code>zalgo("nhahtdh")</code> for the multiplicative inverse idea.</p>
</div>
<div id="pu8" class="pu"><h1>C - 4 tokens</h1>

<pre><code>int div3(int x) {
    return ((x * 43) &gt;&gt; 7) * 3 == x;
}
</code></pre>

<p>Works up to 383.</p>

<p>Previous version (bigger constants):</p>

<pre><code>int div3(int x) {
    return ((x * 171) &gt;&gt; 9) * 3 == x;
}
</code></pre>

<p>Works up to 1535</p>
</div>
<div id="pu9" class="pu"><h2>C - <s>5</s> 4 (?) tokens</h2>

<pre><code>int div3_m2(uint32_t n) {
    return n == 3 * (n * 0xAAAAAAABull &gt;&gt; 33);
}
</code></pre>

<p>Works for <strong>any unsigned 32-bit number</strong>.</p>

<p>This code makes use of multiplicative inverse modulo 2<sup>32</sup> of a divisor to convert division operation into multiplication operation.</p>

<p><strong>Edit</strong></p>

<p>My solution (posted 2 minutes after) has the same spirit as aditsu's solution. Credit to him for the use of <code>==</code> that improves my solution by 1 token.</p>

<h3>Reference</h3>

<ul>
<li><a href="http://ridiculousfish.com/blog/posts/labor-of-division-episode-i.html">Labor of Division - ridiculousfish.com</a></li>
<li><a href="http://www.hackersdelight.org/magic.htm">Hacker's Delight - Magic Number</a></li>
<li><a href="http://en.wikipedia.org/wiki/Modular_multiplicative_inverse">Wikipedia - Modular multiplicative inverse</a></li>
</ul>
</div>
<div id="pu10" class="pu"><h1>C - 15 (?) tokens</h1>

<pre><code>int div3_m1(unsigned int n) {
    n = (n &amp; 0xf) + (n &gt;&gt; 4);
    n = (n &amp; 0x3) + (n &gt;&gt; 2);
    n = (n &amp; 0x3) + (n &gt;&gt; 2);
    return n == 0 || n == 3;
}
</code></pre>

<p>Since 4 ≡ 1 (mod 3), we have 4<sup>n</sup> ≡ 1 (mod 3). The digit summing rule is not limited to summing the digits, but also allows us to arbitrarily break the number into sequences of digits and sum all of them up while maintaining the congruency.</p>

<p>An example in base 10, divisor = 9:</p>

<p>1234 ≡ 12 + 34 ≡ 1 + 2 + 3 + 4 ≡ 123 + 4 ≡ 1 (mod 9)</p>

<p>All statements in the program makes use of this property. It can actually be simplified to a loop that runs the statement <code>n = (n &amp; 0x3) + (n &gt;&gt; 2);</code> until <code>n &lt; 4</code>, since the statement simply breaks the number in base-4 at the least significant digit and add the 2 parts up.</p>
</div>
<div id="pu11" class="pu"><h1>Python - 25 tokens</h1>

<p>To get things started, I have a lengthy solution that is a implementation of one of the answers in the link in my first post. <code>n</code> is input.</p>

<pre><code>a = (n&gt;&gt;7)-((n&amp;64)&gt;&gt;6)+((n&amp;32)&gt;&gt;5)-((n&amp;16)&gt;&gt;4)+((n&amp;8)&gt;&gt;3)-((n&amp;4)&gt;&gt;2)+((n&amp;2)&gt;&gt;1)-(n&amp;1)
print(a==0 or a==3)
</code></pre>

<p><code>or</code> is equivalent to <code>||</code>. </p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/32254/">32254</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




