<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::260804</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>054</td><td>APLNARS</td><td>251007T185939Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/284021#284021">Rosario</a></td></tr>
<tr d-ix="1"><td>nan</td><td>Scala 3</td><td>230517T020225Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/261018#261018">138 Aspe</a></td></tr>
<tr d-ix="2"><td>046</td><td>Pyth</td><td>230510T151117Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260854#260854">CursorCo</a></td></tr>
<tr d-ix="3"><td>028</td><td>Jelly</td><td>230510T150540Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260853#260853">Jonathan</a></td></tr>
<tr d-ix="4"><td>111</td><td>julia</td><td>230510T073104Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260830#260830">Damian P</a></td></tr>
<tr d-ix="5"><td>067</td><td>PARI/GP</td><td>230510T054135Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260824#260824">alephalp</a></td></tr>
<tr d-ix="6"><td>088</td><td>JavaScript ES6</td><td>230510T011042Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260819#260819">Arnauld</a></td></tr>
<tr d-ix="7"><td>095</td><td>Python</td><td>230510T002541Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260818#260818">loopy wa</a></td></tr>
<tr d-ix="8"><td>095</td><td>Python 3.8</td><td>230509T230059Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260814#260814">Anders K</a></td></tr>
<tr d-ix="9"><td>154</td><td>Factor + koszul math.continuedfractions</td><td>230509T223056Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260812#260812">chunes</a></td></tr>
<tr d-ix="10"><td>063</td><td>Charcoal</td><td>230509T220040Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260810#260810">Neil</a></td></tr>
<tr d-ix="11"><td>217</td><td>Python3</td><td>230509T215154Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260809#260809">Ajax1234</a></td></tr>
<tr d-ix="12"><td>nan</td><td>Wolfram Language Mathematica</td><td>230509T201921Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260807#260807">lesobrod</a></td></tr>
<tr d-ix="13"><td>186</td><td>Haskell</td><td>230509T202807Z</td><td><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260808#260808">Roman Cz</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 54 chars</h1>
<pre><code>{(1∧⍵),2⍟÷1∨⍵}∘{⍵=0:0⋄(⍵&gt;0)∧⍵≤.5:2÷⍨∇⍵÷1-⍵⋄k-∇⍵-⍨k←⌈⍵}
</code></pre>
<p>I copied the algoritm from Anders Kaseorg answer to this question.</p>
<p>Test:</p>
<pre><code>  f←{(1∧⍵),2⍟÷1∨⍵}∘{⍵=0:0⋄(⍵&gt;0)∧⍵≤.5:2÷⍨∇⍵÷1-⍵⋄k-∇⍵-⍨k←⌈⍵}
  f ¯1r2
¯1 1 
  f 0r1
0 0 
  f 1r1
1 0 
  f 1r2
1 1 
  f 1r1
1 0 
  f ¯1r2
¯1 1 
  f 2r1
2 0 
  f 1r3
1 2 
  f 1r8
1 7 
  f 2r5
3 3 
  f 8r5
13 3 
  f 58r27
1033 9 
  f 30r73
399 10 
  f 144r89
853 9 
  f ¯17r77
¯767 13 
  f ¯17r99
¯133 12 
  f 355r113
12648447 22 
  f 16000r1
16000 0 
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, <del>238</del> 186 bytes</h1>
<p>Modified from <a href="https://codegolf.stackexchange.com/a/260818/110802">@loopy walt's answer</a>.</p>
<hr />
<p><span class="math-container">\$ \color{black}{\text{In scala, it's weird to mimic `%` `//` of python}} \$</span></p>
<pre><code>/*
Python's % operator returns a result with the same sign as the divisor, and // rounds towards negative infinity.

In Scala, % and / don't behave the same way. The % operator returns a result with the same sign as the dividend, and / performs truncating division, rounding towards zero.
*/


def pythonMod(a: Int, b: Int): Int = ((a % b) + b) % b

def pythonDiv(a: Int, b: Int): Int = {
  if ((a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0)) a / b
  else if (a % b == 0) a / b
  else a / b - 1
}

</code></pre>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=PVDNjtowEL7nKVzKSnZxHJsAoQGjVuJSiXLYpadVVaU4idwmdmR7V1pRnqSXvew-RN-EJ-hr1DFQySPNjL-fmfn9avdFU6TPp7ey7bRxINREanKnH8y-jPT3H-Xegc-FVIeXB1fF89Mf99SVYMc_KbcQZQUqqPIdFvkO8cOHQintCie1Iq6QjSn3oMfUVwy2PrY-1h6fwx32LFlB8YZTVEOB1Y3AscVwu1yqRKCRxetRn5SNLeEWr9HisWiA4dADRwLdiIVnxQYbzLDXUe_Eiv7yf9zreR7oecAnMcMUHS8b_A0ztX4nWJja5h-NKZ7u75yRqv6K8i9KOn6IAOitNvx8CWKdkIrUpdtIVVqIiNMbaZ2HVdrAZhlvUM8JpCAIJdaIN8R2jXRwEK8G6PrfcnltJwNE2qKD34i3b72oP-t_3C2vYAspwi1kKHQ7P6NrFLSD4aEl7c_z0EHmiIe3eKiDyzHy77Lu8-meJgzEK0AxoNF0noyzvmI0TTF4H8UsS7LQibNZhgFLo3Q6TRhLA2o8m8wnE98fjyM2o_SiFVKvd_b4Bw" rel="nofollow noreferrer">Attempt this online!</a></p>
<p>Saved 52 bytes thanks to the comment of @ceilingcat</p>
<pre class="lang-scala prettyprint-override"><code>type T=Int;def f(n:T,d:T)={@annotation.tailrec def g(n:T,d:T,s:T,N:T,D:T):(T,T)=if(d!=0)g(d,n%d,-s,(N&lt;&lt;n/d)+s,D+n/d)else(N,D);val r=(n%d+d)%d;g(d-r,r,1,if(n*d&gt;0|n%d==0)n/d else n/d-1,0)}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=dVPNjtMwED5wy1MMVVjZIv9pm2RpV6zUC9JuLytOCCG3SYshdbqJu9Kq7ZNw6QXeCV6DF2D8025ZhFTV48_ffPONPfn2o5uzmqWHw_eNXPj5rxc7vlo3rQSNB7wJ7ppNO6-cZvalmku4ZVzA1gEoqwUsiLiEd0J6UOqVwlifAbxlQjSSSd6IQDJet9Vc4ypr-SzLg86uU7tOjNolEL39SxkgDGHdciFrQbqeK8Atwe3AnYI76VHL4QsgJbwcQ0SxXumBgFeAi995QKYwGgEREEJJKbwGxCa4nJCq7ipkIUrfaL39yfv6UX5uxG1TEma9zo5e8R9NEsKw0kzJ4h9GzrPcCX_4X-72zDzKXEEEFxcwUwGF3Q4QGx0xDNApQ8czm6Vdq1RtAMa6938IGgAfYtuYXh5YDfdo4MmhwMexzavD9nSoWj87xLtFsdZTv9iDew-LOlZX9bzCcSGsXeILX7cte_xwJ_Hplh-x5_eCPzWtitRcVB0iZuCCTpZcBMtK3iic0EA2N7yTxvGiaYGoBBj5JpGerk9p6WKEe9CoyVGEoFvXXJKef3UaEkUUm5WqyY_HYY8GK7YmnwI0usKa6oHO-G3VbWrlG2cfU0lEPa1BYnqknQ3nVh0Fq6-ma62-98A1Ihg01ste39neMR-h_RYPP39HYQw-Pj9eqxObODZxYuPY8e3G17vEsBLDSi0rwTi3cYacgYpTD1InN3GsN4M8TDK9jVIECieNwkxrpEWB6ijZ74d5oZB8oBl-nIWZzvGzYYacVENFYSwpmThx0sEgjGPjJhn2834fqQm6GkaR7VGH6Nr0_gc" rel="nofollow noreferrer">Attempt this online!</a></p>
<pre class="lang-scala prettyprint-override"><code>import scala.io.Source
object Main {
  def f(n: Int, d: Int) = {
    @annotation.tailrec
    def g(n: Int, d: Int, s: Int, N: Int, D: Int): (Int, Int) = {
      // println(s&quot;$n $d $s $N $D&quot;)
      if (d != 0) g(d, n % d, -s, (N &lt;&lt; (n / d)) + s, D + (n / d)) else (N, D);
    }
    def pythonMod(a: Int, b: Int): Int = ((a % b) + b) % b

    def pythonDiv(a: Int, b: Int): Int = {
      if ((a &gt; 0 &amp;&amp; b &gt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0)) a / b
      else if (a % b == 0) a / b
      else a / b - 1
    }

    val q = pythonDiv(n, d);
    val r = pythonMod(n, d);
    g(d - r, r, 1, q, 0)
  }

  def main(args: Array[String]): Unit = {
    val lines = Source.stdin.getLines().toList

    for (line &lt;- lines) {
      val Array(i, o) = line.split(&quot;-&gt;&quot;)
      val nums = i.split(&quot;/&quot;).map(_.trim.toInt)
      val result = f(nums(0), nums(1))
      println(s&quot;${nums.mkString(&quot;/&quot;)}, $result, $o&quot;)
    }
  }
}

</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 46 bytes</h1>
<pre><code>M?tH+/GHgH%GH]GJtstKgEE+*hK^2JaF_m^2-Jtsd._tKJ
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/39e@xENb390j3UPV3SPW3aukuMQ73dVVWyvDO87IK9EtPjfOSBcomqIXX@Lt9f@/qQWXkTkA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>First we define <code>g(G,H)</code> to find the continued fraction of its input.</p>
<pre><code>M                  # define g(G,H)
 ?tH               # if (H != 1):
    +/GH           #   prepend floor(G/H) to
        gH%GH      #   recurse on g(H, G%H)
                   # else:
             ]G    #   return [G]
</code></pre>
<p>Then we compute the function</p>
<pre><code>    KgEE                           # assign K to g applied to two inputs
Jtst                               # assign J to sum(K[:-1]) - 1
                          ._tK     # all prefixes of K[:-1]
                  m                # map on lambda d
                   ^2              #   2 to the power of
                     -J            #   J minus
                       tsd         #   sum(d) - 1
               aF_                 # take the alternating sum
        +                          # add to this
            ^2J                    # 2 ^ j
         *hK                       # times K[0]
                              J    # print(J)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 28 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ḋ;%/ƊẠÐ¿Ṗ:/€ḢW+Ṭ€NÐeFƊƲL’ṭḄƲ
</code></pre>
<p>A monadic Link that accepts a pair of integers, <code>[numerator, denominator]</code>, and yields a pair of integers, <code>[numerator, denominator's exponent]</code>.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hji5rVf1jXQ93LTg84dD@hzunWek/alrzcMeicO2HO9cAmX6HJ6S6Hes6tsnnUcPMhzvXPtzRcmzT/6xHDXP1dQ63H530cOcMFSBvjoKunQJQUDPy///oaAMdBcNYHYVoQwRtBKJ1YQwjhIQxlLaAipuCaAsobQpkGJmDWMZAM80hak1MgKotIeaZA0XN4UxLsKixqSnQeEOIYjMDA7BrYgE" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>Ḋ;%/ƊẠÐ¿Ṗ:/€ḢW+Ṭ€NÐeFƊƲL’ṭḄƲ - Link: pair of integers = [N, D]
      Ð¿                     - collect while...
     Ạ                       - ...condition: all truthy - i.e. while no zero present
    Ɗ                        - ...do: last three links as a monad - f(current=[n, d]):
Ḋ                            -          dequeue -&gt; [d]
   /                         -          reduce ([n, d]) by:
  %                          -            modulo -&gt; n%d
 ;                           -          concatenate -&gt; [d, n%d]
        Ṗ                    - pop - remove the final result (with a zero in)
          /€                 - reduce each by:
         :                   -   integer division -&gt; continued fraction part list
                      Ʋ      - last four links as a monad - f(Parts=that):
            Ḣ                -   head -&gt; remove and yield the integer part
             W               -   wrap (the integer part) in a list
                     Ɗ       -   last three links as a monad - f(remaining parts):
               Ṭ€            -     untruth each (e.g. 4 -&gt; [0,0,0,1])
                 NÐe         -     negate those at even indices (the 2nd, 4th, ...)
                    F        -     flatten
              +              -   ([integer part]) add (that) (vectorises) - adds the integer
                                     part to the first one. If none just gets [integer part]
                           Ʋ - last four links as a monad - f(A=that):
                       L     -   length (A)
                        ’    -   decrement -&gt; the denominator's exponent
                          Ḅ  -   convert (A) from base two -&gt; the numerator
                         ṭ   -   tack -&gt; [numerator, denominator's exponent]
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://julialang.org/" rel="nofollow noreferrer">julia</a>, 111 bytes</h1>
<p>Expects a single argument of type <code>Rational{Int64}</code></p>
<p>This approach traverses the Stern-Brocot tree for <span class="math-container">\$\mathrm{mod}(p,1)\$</span>, adding <span class="math-container">\$1/2^k\$</span> at the <span class="math-container">\$k\$</span>-th recursion whenever we take a right branch in the tree.</p>
<p>The case where <span class="math-container">\$p \notin (0, 1]\$</span> is handled in the default arguments.</p>
<pre><code>m(p,L=[0,1],U=[1,0],q=mod1(p,1),r=p-q,s=0,M=//(L+U...),g=q&gt;=M,l=r+g)=q==M ? (l,s) : m(0,L+g*U,U+L-g*L,q,2l,s+1)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bZE9DsIwDIXFyikyJsRtk_7QguQysaVjJ8SAhKiKWmgKbNyEpQuHgtMQgViSrp-f_fzsx_N4a-rdMDxv14OXvc4t7UDhRoDcQokbCWILGtvzXpqCZNBj52m4oIACg4AqXvq-z6BCnWMBDfa8YqgRC7IitIELI0vSUgGKV7MSSq68aqZAQ2hqXLKf7XuyNpogkIzcc9L19enanKYtlaMotJA3wsLRzshFmduYWChzUWJYmFowMglSxyKOjcnCWTk1WnvAly5sbZQkJox0Bs-FsE_2u-b_mR8" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 67 bytes</h1>
<pre><code>x-&gt;s=0;[(x\1+2*sum(i=2,#r=contfrac(x),(-1)^i/2^s+=r[i]))&lt;&lt;s-=!!s,s]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5NCsIwEIWvMuom0YT81JqIxo3HqFWKUAn4E5IK9QbewU1BxDN5Gxvj5nvzmJk383i7ytvdwXXPGszr2tRUf9YtXQXDFwVqN2Iix-F6QtZIMvJmfzk3ta_2qMUEUYG3lsltmBhf2BLj5TJQMxgEEsp_1L1y7nhDLdAVOG_PTV8OoxlC3WdgAgVngoBIkATojzL5LEJHmxPQEblmUhHIOFOxOZ0yPY9LiimVdN77LM-ZEHFgxnl_oMTpn65L-gU" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 88 bytes</h1>
<p>Expects <code>(p)(q)</code> for <span class="math-container">\$x=p/q\$</span>. Returns <code>[a,b]</code>.</p>
<p>This is heavily based on <a href="https://codegolf.stackexchange.com/a/260818/58563">loopy walt's answer</a>.</p>

<pre class="lang-javascript prettyprint-override"><code>p=&gt;g=(q,s=p&lt;(b=0)?p/(p=-p):1,a=p/q,d=p%=q,n=q-p)=&gt;d?g(b+=n/d|0,-s,s+=a&lt;&lt;n/d,n%d,d):[a,b]
</code></pre>
<p><a href="https://tio.run/##bdLdboMgFAfw@z2FN00ghcmHiDae9kGWXWhpzZZGcS672ru7w9KmQeEO8sv/HA58tj/tfP768N98GN1lucLi4dgDmdgMviEdCHryOfHAPT1I1oLPJ@bA72BiA0x4Ckd36km3hyF3v4Lxmc17aJsGt2zYOebo4a1l3ftyHod5vF1eb2NPrkRQIinNwsrzTLBMvMRARkAmgYqAXAH@FAh4QqiohkrW0FENtQVVBOy2hHkCzTK9AlUEZEIYJMr@myCERlOvjMZ5Wv0wuq7xspvLFAV2WweEpjKJGC4t5tg74ba0mKNTqH7kcBn6kevBaGNwuDK0FJpWZVEVBaapzQRLIe6fIcCww3dY/gA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.python.org" rel="noreferrer">Python</a>, 95 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda n,d:g(d-n%d,n%d,1,n//d,0)
g=lambda n,d,s,N,D:d and g(d,n%d,-s,(N&lt;&lt;n//d)+s,D+n//d)or(N,D)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=RY9LasMwFEXnXoUIFOTmqfrZkRySjDLOCgrFxXEqcCQTu4WupZNAafeUdXQD1a90ILj33aP3-fge3-cXZ6-f_fbx63Xuib49De35uWuRhW59wh2xdx2Ex8FS2gEri9P2H4EJDrBfd6i1HfJ4RMkE-LDZBL5cTrBfRuUu2KNlHjP07oIGY4_IWOTGo8WsXBcIGXBoG4OHaRzMjBdktyh9cG_AB-d2xMbOYP5SuihDGj4d39oBu-DGi2ewgR7fmxJcnnm9_TDKEdkhBogVPGmetMiaFyQbEp1IlEiUzJTwWmetPFMHLQHJQifNo6k1FSpaJn2hKSSjKvaQTeO7-5ZVRXUTKrqOBOGKqviHqJXyjIylpkkrhTZcFLKuKedpG7GqdFV5VPitVozlG6P0W6fbfwE" rel="noreferrer">Attempt This Online!</a></p>
<p>Rather verbose implementation. Essentially calculates the cf (by Euclidean algo) and converts the terms on the fly.</p>
</div>
<div id="pu8" class="pu"><h1>Python 3.8, 95 bytes</h1>

<pre class="lang-python prettyprint-override"><code>q=lambda x,y,k=0:y&gt;=2*x&gt;0and q(x,y-x,k+1)or(x and-(-x//y&lt;&lt;(r:=q(-x%y,y))[1])-r[0],x and r[1]+k)
</code></pre>
<p><a href="https://tio.run/##VZDLDoIwEEX3fsXExKTVNrQ8BInwI4QFxhgNyqNx0Qnh23F8INDVuXfuzLRt8HmtKy9qzDC0yb14nM4FWIGiTFSMaeJubaqK6gwtI1daUe40rw2zQKZk0joOHo/MxElLYoMCOc90zqXJVC4@KTBk7Eo@XGpDowHhVkG2AjpMCdBcfFkv2R1ZzoW7DHkzjmaZYORoxgEJNxyVR7vDqd/3acJh2hlSNVzIw7/qBQFdQ0/Ne6V@L8njj9WYW/Vkl3Vne6fDHmQK3fsHAXm/5qvhBQ" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<h3>How it works</h3>
<p>Uses the recurrence</p>
<p><span class="math-container">\begin{align*}
?(0) &amp;= 0, \\
?(x) &amp;= \frac{?{\left(\frac{x}{1 - x}\right)}}{2} \quad\text{if }0 &lt; x ≤ \frac12, \\
?(x) &amp;= ⌈x⌉ - {?(⌈x⌉ - x)}.
\end{align*}</span></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a> + <code>koszul math.continued-fractions</code>, <s>156</s> 154 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ dup sgn swap abs 1vector [ dup last ratio? ] [ dup next-approx ] while
unclip -rot cum-sum vneg [ -1^ 2 rot 1 + ^ * ] map-index sum * + &gt;fraction log2 ]
</code></pre>
<p><a href="https://tio.run/##TZJPb5wwEMXvfIpppL2k64ANLNBKyTHKJZcqp/yRXDC7qGA7tklWqfLZNwMYbzhY8u/Ne@OxaXntlDk9/Lm7v/0FrTIDd66Te7DidRSyFhb@CSNFDygc5uWqVhJLRtGQ1qC9U9IugnXcddZ1td@/iSkcE5T9GJeEq3aU3rKqv6PofwT4JTGFH0CuIdlCMhO6EnomLBA6ExIQCYytPnb2pcHHPCkDKbwrX0i6hXQm5UpoQHkZs8LDJEVczThN4sJ3SKsKz@HbZllcVgsv81BNaBEXPoUUuwLr0yBU1TrOFE@X06Z5HlO6zsB2WZllaGN@ll2ShNubN9Pcn9HpEZpRg91LsO9cA/9rgS73DovUc@vA4LOpG3j2TIqjI1xro47I3g9dLyJ8tb7TQIxyUI8DseMAb1Ls0ULoCzCYBAo/4QUu0TRwTTrZiCNMhZfIr9d/BXq1Z/Dsj3bGF5sm3jTTABegTSddiznaCK2swC4ob2HTPMlvaq2GWRW8Ppy@AA" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<pre><code>                      ! -17/99
dup                   ! -17/99 -17/99
sgn                   ! -17/99 -1
swap                  ! -1 -17/99
abs                   ! -1 17/99
1vector               ! -1 V{ 17/99 }
[ dup last ratio? ]   ! -1 V{ 17/99 } [ dup last ratio? ]
[ dup next-approx ]   ! -1 V{ 17/99 } [ dup last ratio? ] [ dup next-approx ]
while                 ! -1 V{ 0 5 1 4 1 2 }
unclip                ! -1 V{ 5 1 4 1 2 } 0
-rot                  ! 0 -1 V{ 5 1 4 1 2 }
cum-sum               ! 0 -1 V{ 5 6 10 11 13 }
vneg                  ! 0 -1 V{ -5 -6 -10 -11 -13 }
[ -1^ 2 rot 1 + ^ * ] ! 0 -1 V{ -5 -6 -10 -11 -13 } [ -1^ 2 rot 1 + ^ * ]
map-index             ! 0 -1 { 1/16 -1/32 1/512 -1/1024 1/4096 }
sum                   ! 0 -1 133/4096
*                     ! 0 -133/4096
+                     ! -133/4096
&gt;fraction             ! -133 4096
log2                  ! -133 12
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 63 bytes</h1>
<pre><code>ＮθＮη≔÷θηζＷ﹪θη«≔ηθ≔ιη⊞υ⁻÷θη¬υ»Ｆ﹪Ｌυ²⊞⊞Ｏυ⊖⊟υ¹Ｉ⟦⁺×ζＸ²Συ⍘⭆υ×Ｉ﹪κ²ι²Συ
</code></pre>
<p><a href="https://tio.run/##ZY9LT8MwEITP5FfscS2ZQ1r1xAnopRIpkcoNcTDJNrZI7NSPVirit4fNA4TExfZodr4dV1r5yql2GHa2T3GfunfyeBJ32V@tWd@HYBqLOxu35mxqwpMELSRc2bto0xJg4erUutkQ8JndLBktYST@SDP6LMsUNCYJhbEp/AfvXcQkBE9@ZUfnf/FPZJvIQR5Z8ZqJMh7PPXkVnR@RW6o8dWQj1Vi6fuJIyJlVemMjPqoQ8bVsee@L6SjgVULpLvzVlYRD6pbAgwp0iJxocL4K1Y/4OTNBllIfUxkJRojlNVPeuP8wrDcbyPP1cHtuvwE" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the numerator and denominator.</p>
<pre><code>≔÷θηζ
</code></pre>
<p>Calculate the integer part of the fraction.</p>
<pre><code>Ｗ﹪θη«≔ηθ≔ιη⊞υ⁻÷θη¬υ»
</code></pre>
<p>Calculate the rest of the continued fraction, except decrement the first value.</p>
<pre><code>Ｆ﹪Ｌυ²⊞⊞Ｏυ⊖⊟υ¹
</code></pre>
<p>If the fraction has odd length then decrement the last value and append a <code>1</code>.</p>
<pre><code>Ｉ⟦⁺×ζＸ²Συ⍘⭆υ×Ｉ﹪κ²ι²Συ
</code></pre>
<p>Transform the fraction into run-length-encoded binary and convert from binary to decimal, adding on the original integer part with an appropriate shift, which is also the second output value.</p>
</div>
<div id="pu11" class="pu"><h1>Python3, 217 bytes:</h1>
<pre><code>C=lambda n,d:[n//d]+C(d,n-d*(n//d))if d else[]
def f(N,d):n=abs(N);c=C(n,d);k=[(c[0],0)]+[(pow(-1,i+1),sum(c[1:i+1])-1)for i in range(1,len(c))];b=max(B for _,B in k);return([1,-1][N&lt;0]*sum(2**(b-B)*N for N,B in k),b)
</code></pre>
<p><a href="https://tio.run/##PZFNspswEITX0SmmvEGDpSDxY8AOWdh7LkCoFBg5oR6WKcCV5PSOJPDbdbc@tWZK47/l90NH2Ti9XpdiaO5t14Bm3bHSQdDV@wvtmOadT61F7G/QgRpmVdWkUze40ZJ1eNRF0860xNO1uFBzG08fRUWvlaiZwHpf0fHxh3LJ@r1ENj/v5kgejamRS7w9Juih1zA1@peikg1K0ytifWqLe/OXnsESP9nZMh94mtTynDStJOOyrspvovZtZej7tOVn9EvHl2@etfj6fGK324lAAv8OgoEgctVy1eGmJeGb4c6FKxWuVLRRodHZplPDJFZHDCKSrVo6k2RBmDorIhPkJBJB6jqiPDftpjKOgyy3SZY4gss0SN0dnh5Sw0QuyvN1JFsjQxIlSSDlOk14iLM4NmhopjoIse3opJnabP11Hod@od4P7eGRfGkYtFBA/44t7aHJ51lNi/lW/96MtNcLg@bNBB4iQlHA8hwHRT@B9g0wsAQh42Ry6i1qXmYYbWXn4es/" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 77 or 124 bytes</h1>
<pre><code>(s=Sign@#;{s Numerator@#,Log[2,Denominator@#]}&amp;@MinkowskiQuestionMark@Abs@#)&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7X6PYNjgzPc9B2bq6WMGvNDe1KLEkv8hBWccnPz3aSMclNS8/NzMPIhZbq@bgm5mXnV9enJ0ZWJpaXJKZn@ebWJTt4JhU7KCsqfY/oCgzr8QhLVrX0Fzf3DyWC8Y3NjXVNzQ0jv0PAA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Or without overkill builtin:</p>
<pre><code>(s=Sign@#;c=ContinuedFraction@Abs@#;{s Numerator@#, Log[2,Denominator@#]}&amp;@(r=c[[1]];t=-1;Do[t=-t/2^e;r+=2t,{e,Rest@c}];r))&amp;
</code></pre>
<p><a href="https://tio.run/##NYlBC8IgGEDv/YrBYCxyDDfGDiIYjU4RUUcxMHPLgwr67TT2220QnR7vPSvho60Eo2QaaSojfZjJsZwoevIOjJv1@xykAuMdO77idpaYXWergwQfWI6yi594gwbtvDXuF8VasDJQxTkWggCtMBk83wh189QkHGgDaNHoriMwtQoS9vsi3YJxwEZe4b7ue7H7e9t1NcatSF8" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) [Dash] Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 186 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>import Data.Ratio
c r=let f=floor r;d=r-f%1 in if d==0 then[f]else f:c(1/d)
m(a:b)=a%1-2*sum[(-1)^i/2^sum(take i b)|i&lt;-[1..length b]]
p x=(numerator x,until((denominator x==).(2^))(1+)0)
</code></pre>
<p><a href="https://tio.run/##Jc3PaoQwEIDxu08xhxWStmY3QmnZdm59gl5FIeqkDps/EkfYQ9/dLvT4/S7f4rYbhXAcHNdcBL6cOPPthHM1QcFAAh59yLlA@ZixNL62wAnYw4x4AVkodb6nsBH466TsedZVVO46anS1bdqnbY@daqwe@NwOj1DibgQMo/7lz6azxgRKP7LA2PfVCndUaY9UnDyW95c9CQelZko5cvpHRG1UO2it7LO@6CM6TrgWTnJaTTTT6fW9bt@OPw" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/260804/">260804</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




