<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::213805</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>040</td><td>K ngn/k</td><td>201022T200026Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213971#213971">coltim</a></td></tr>
<tr d-ix="1"><td>068</td><td>Python 2</td><td>201022T101413Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213947#213947">Arnauld</a></td></tr>
<tr d-ix="2"><td>089</td><td>Java 8</td><td>201019T075222Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213817#213817">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>060</td><td>JavaScript ES6</td><td>201018T215430Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213807#213807">Arnauld</a></td></tr>
<tr d-ix="4"><td>197</td><td>TSQL</td><td>201019T125927Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213827#213827">t-clause</a></td></tr>
<tr d-ix="5"><td>108</td><td>Wolfram Language</td><td>201021T034302Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213915#213915">DanTheMa</a></td></tr>
<tr d-ix="6"><td>083</td><td>Python 2</td><td>201019T214629Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213840#213840">xnor</a></td></tr>
<tr d-ix="7"><td>088</td><td>Python 3</td><td>201019T094831Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213820#213820">Jitse</a></td></tr>
<tr d-ix="8"><td>028</td><td>Jelly</td><td>201019T030508Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213812#213812">Jonathan</a></td></tr>
<tr d-ix="9"><td>031</td><td>Charcoal</td><td>201018T215321Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213806#213806">Neil</a></td></tr>
<tr d-ix="10"><td>022</td><td>05AB1E</td><td>201019T072638Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213816#213816">Kevin Cr</a></td></tr>
<tr d-ix="11"><td>063</td><td>Perl 5</td><td>201019T060623Z</td><td><a href="https://codegolf.stackexchange.com/questions/213805/the-knights-dialer/213815#213815">Nahuel F</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>60</s> <s>53</s> <s>52</s> <s>49</s> 40 bytes</h1>
<p>-9 bytes from @doug</p>
<pre><code>#,//(-1+11\'256!0x3e566240af0097281a26)/
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxdj91OhDAQhe/7FDWaCBHoD7QifQ3vVpJt2BYISFfajRCjz26L2WB2rs535pxJRlf3CUJRSp4IeXukjN/hJVeMc1pgqTF+eaYlkZTHCIDX6uvhsP7MlYYZXMTRDCI6atmPYhGrmOP622cOGHJBai+IF3kQ1Au+OWFXcFzWAHl7S5Yk55gXNUR2NJ9bn137TOAaAAQ65862QqgxJ9WaUWfWyWZQS9PJqVVZY97Rx0VZ15vJIkryEjPkOpUOU992zqanXo5qBiAa1Jp05mxjCOGs7GV03uQJDvw3JDDZOQ9Md+bbfi+Eb7bIbl1fAhG7ucz+X8a/oStaZA==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Takes input as two separate arguments; <code>hops</code> as the first, <code>keys</code> as the second.</p>
<p>Uses a list to map keys to each other key a &quot;hop&quot; away. When combined with <code>/</code>, this functions as a <a href="https://code.kx.com/q/basics/glossary/#finite-state-machine" rel="nofollow noreferrer">finite-state machine</a>, seeded with <code>key</code> and run for <code>hops</code>  iterations. <code>,//</code> flattens the result into a one dimensional array and <code>#</code> takes its count.</p>
<p>Note that <code>-1+11\'256!0x3e566240af0097281a26</code> is a compressed version of <code>(4 6;6 8;7 9;4 8;0 3 9;!0;0 1 7;2 6;1 3;2 4)</code>, i.e. a list mapping indices to other digits a knight's move away.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 68 bytes</h1>
<p><em>Saved 1 byte thanks to @Sisyphus</em><br />
<em>Saved 5 more bytes thanks to @xnor</em></p>
<p>This is based on the logic used in <a href="https://codegolf.stackexchange.com/a/213807/58563">my 62-byte JS version</a>, with a different implementation to make it easier to golf in Python. I've since ported this back to JS, as it turned out to be shorter as well.</p>
<pre class="lang-python prettyprint-override"><code>f=lambda n,k:n&lt;1or k-5and(2-k%2)*f(n-1,4-k%-9%2)+9%~k%2*f(n-1,k%2*2)
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/r/P802JzE3KSVRIU8n2yrPxjC/SCFb1zQxL0XDSDdb1UhTK00jT9dQxwTI0bUE8rUtVeuA4lBhEMtI838aUFexQmaeQlFiXnqqhqGBphWXQkFRZl6JQrGOQrQ2ULFOsaYCSFkeirLY/wA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Below is a summary of the results returned by each expression, split by key groups:</p>
<pre><code> expression | 1 3 7 9 | 2 8 | 4 6 | 0 | description
------------+---------+-----+-----+---+---------------------------------------
 2-k%2      | 1 1 1 1 | 2 2 | 2 2 | 2 | weight for the 1st recursive call
 4-k%-9%2   | 4 4 4 4 | 3 3 | 3 3 | 4 | target key for the 1st recursive call
 9%~k%2     | 1 1 1 1 | 1 1 | 0 0 | 0 | weight for the 2nd recursive call
 k%2*2      | 2 2 2 2 | 0 0 | - - | - | target key for the 2nd recursive call
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Java 8, <s>137</s> <s>129</s> <s>91</s> 89 bytes</h1>

<pre class="lang-java prettyprint-override"><code>int f(int n,int k){return--n&lt;0?1:k%2&gt;0?k==5?0:f(n,2)+f(n,4):2*f(n,k&gt;0?1:4)+k/4%2*f(n,0);}
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/213807/52210"><em>@Arnauld</em>'s JavaScript answer</a>, provided by <em>@OlivierGrégoire</em>.<br />
-2 byte thanks to <em>@ceilingcat</em>.</p>
<p><a href="https://tio.run/##XZBBboMwEEX3nGJkKZJdICWIZOE04QRdsWy7cIEEx8QgPESqIs5O7YCqhs3YzzP2/98XcRPhpVBjXgtj4F1IffcADAqU@Sg1wom6qgNXFbt3JfadDkP9FqUbrlbxMUrV4bBNI36iOoiZ75aE8fjFbdTRjSXMV6/JajqK2H4YPSvS9t@1zGctuDWygKvVpxl2Up8/vkAw5wUAS4N05y7@x80zxovuYjp@4m2wwOmxwfvLPvl5dF1y88hfzYayH4Pldd30uG6tV6w1JRmKDq1vKORZIgfiG5/soWpa46DyCf9EYn@nCgyb1YbxFw" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Old <s>137</s> 129 bytes answer:</strong></p>
<pre class="lang-java prettyprint-override"><code>(s,h)-&gt;{for(;h--&gt;0;){var t=&quot;&quot;;for(var c:s.getBytes())t+=&quot;46,68,79,48,309,,107,26,13,24&quot;.split(&quot;,&quot;)[c-48];s=t;}return s.length();}
</code></pre>
<p>Starting digit as a String input, amount of hops as an integer.</p>
<p><a href="https://tio.run/##ZZBPj4IwEMXvfopJT20oBJTFPw0e9r5ePLoeuoBQFwuho4kxfHa2RXcT3cskv3mTzHvvKC/SP@bfQ1ZLY@BDKn2bACiNRXeQWQEbh@MCMrrFTukSDHdYMWGlfmKHQYkqgw1oSAdqeMX89e3QdFRUvr8OBbtdZAeYEiLc1kG2MkFZ4PsVC0MZQy8lccKTBZ8vebzgs3DJeRTO@TTh0YxPYxKYtlZICSdsl/nxYi9MiqLvCjx3GkxQF7rEijLRD8J5as9ftfX0sHZpVA4nm@6RYbcHye7RrAGkCQ/HOH8YPeP0RX26fuMvGP2rZvw/qq663wLvBrZXg8UpaM4YtNYb1pqSLcoOXde5KhWugHjGIwKqpjUOKo@sPpF4OsioFYht/PGyH34A" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>(s,h)-&gt;{                    // Method with String &amp; integer parameter &amp; integer return
  for(;h--&gt;0;){             //  Loop the integer amount of times:
    var t=&quot;&quot;;               //   Temp-String, starting empty
    for(var c:s.getBytes()) //   Inner loop over the digit-codepoint of the String:
      t+=                   //    Append to the temp-String:
         &quot;46,68,79,48,309,,107,26,13,24&quot;.split(&quot;,&quot;)[c-48]);
                            //     The keys the current digit can knight-jump to
    s=t;}                   //   After the inner loop, replace `s` with the temp-String
  return s.length();}       //  Return the length of the String as result
</code></pre>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES6), <s> 62 61 </s> 60 bytes</h1>
<p><a href="https://codegolf.stackexchange.com/a/213947/58563">My Python port</a>, ported back to JS. :-p</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,k,o=k%2)=&gt;n--?k-5&amp;&amp;(2-o)*f(n,!k*3-~o)+(k&amp;5&amp;&amp;f(n,o*4)):1
</code></pre>
<p><a href="https://tio.run/##dc5NCsIwFATgfU8RF4a8mtj8tKEI0bOU2oqm5IkVl149VhCDAbfzMcNcukc397fz9S4CHocYR8cC9xydX2tw@yDEwYuGUqYFQjkuuPKlEU@EDfN0gXeEZQ2wU7HHMOM0bCc8sZFJbgEIIVVFVPFLKpHJSCeyeeuzuFBtZZsXk6pWGSttXeSHmv@HviTjCw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Below is my original 62-byte version, which is easier to understand:</p>
<pre class="lang-javascript prettyprint-override"><code>f=(n,k)=&gt;n--?k&amp;1?k-5&amp;&amp;f(n,2)+f(n,4):2*f(n,k?1:4)+(k&amp;4&amp;&amp;f(n)):1
</code></pre>
<p><a href="https://tio.run/##dc7BCoMwDAbgu0/RU2mmnU2tRQTXZxGnY6u0Msdev9MxVlbYKSFfEv5b/@zX4X5dHtz58xjC1DFXWOhOjnNjKRrLa0qnbSgh34uCVh72xhpsFeTMUvVeAGgxDN6tfh6Ps7@wiYlCAxBCypJg9ksYqUpIRtLp1efjRkqLJj2Mig1WWmiVpYHq/4G@JMIL" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>How?</h3>
<p>There are 4 groups of keys which are really connected together. All keys within a group have the exact same behavior.</p>
<ul>
<li>Corners <kbd>1</kbd>, <kbd>3</kbd>, <kbd>7</kbd>, <kbd>9</kbd> (in green). Characterization: odd keys that are not equal to <span class="math-container">\$5\$</span>.</li>
<li>Left/right sides <kbd>4</kbd>, <kbd>6</kbd> (in blue). Characterization: even keys for which we have <span class="math-container">\$k \operatorname{and}4 = 4\$</span>.</li>
<li>Top/bottom sides <kbd>2</kbd>, <kbd>8</kbd> (in yellow). Characterization: non-zero even keys for which we have <span class="math-container">\$k \operatorname{and}4 = 0\$</span>.</li>
<li>The <kbd>0</kbd> key (in red).</li>
</ul>
<p>The <kbd>5</kbd> key is secluded and processed separately.</p>
<p>The figure on the right is a weighted directed graph showing which target groups can be reached from a given source group, and how many distinct keys are valid targets within each target group.</p>
<p><a href="https://i.sstatic.net/HbxLz.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/HbxLz.png" alt="keypad and graph" /></a></p>
<p>This algorithm does one recursive call per target group from the current group, multiplies each result by the corresponding weight and sums them all.</p>
<p>Only the first iteration is expecting <span class="math-container">\$k\in[0..9]\$</span>. For the next ones, we just set <span class="math-container">\$k\$</span> to the leading key of each group (<span class="math-container">\$1\$</span>, <span class="math-container">\$4\$</span>, <span class="math-container">\$2\$</span> and <span class="math-container">\$0\$</span> respectively).</p>
<hr />
<h1>JavaScript (ES6), <s> 86 74 </s> 72 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(p,n,k=10)=&gt;n?k--&amp;&amp;(306&gt;&gt;(p*2149^k*2149)%71%35&amp;1&amp;&amp;f(k,n-1))+f(p,n,k):1
</code></pre>
<p><a href="https://tio.run/##dc7RCoIwFAbg@55iN46d2nLHzWWB9iaBmJOabJLR668wJFC6Ohff@X/@e/2qx@ZxG57Ch2sboy3ZwD13JUooK392QlDKlDRVxYZthvp4cdOB5ICJyilSapnjXiDAzn7DcMLYBD@Gvt33oWOWGS4BCCFpSnCzJJxJrSibyaxTU@OHtJHFOjgrFqiMNHrxkf8flP8GyfgG" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>71 bytes</h3>
<p>Much, much slower.</p>
<pre class="lang-javascript prettyprint-override"><code>f=(p,n,k=10)=&gt;n?k--&amp;&amp;(306&gt;&gt;(p*2149^k*2149)%71%35&amp;1)*f(k,n-1)+f(p,n,k):1
</code></pre>
<p><a href="https://tio.run/##dczRCsIgGIbh867Ck4n/0uY/0yjQ7iQYa0Y5VFp0@wbFCBYdfQcP33vrnt3U36/5IWI6D6V4yzKPPFiUYF08BiEoZUoa51iuW9zuT@E9UO2wUpoi1J4FHgXC2n@@cMDSpzilcdiM6cI8M1wCEEKahuBqSTiT@qF2JrMg/T@ov0FZXg" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Finding a hash function</h3>
<p>We are looking for a function <span class="math-container">\$h(p,k)\$</span> telling whether <span class="math-container">\$p\$</span> and <span class="math-container">\$k\$</span> are connected by a knight hop. Because this function is commutative and because the result is always the same when <span class="math-container">\$p=k\$</span>, a bitwise XOR looks like a good candidate.</p>
<p>We can't directly do <span class="math-container">\$p \operatorname{XOR} k\$</span> because, for instance, <span class="math-container">\$0 \operatorname{XOR} 4\$</span> and <span class="math-container">\$3 \operatorname{XOR} 7\$</span> are both equal to <span class="math-container">\$4\$</span> although <span class="math-container">\$(0,4)\$</span> are connected and <span class="math-container">\$(3,7)\$</span> are not.</p>
<p>We need to get more entropy by applying some multiplier <span class="math-container">\$M\$</span> such that <span class="math-container">\$(M\times p)\operatorname{XOR}\:(M\times k)\$</span> is collision-free. The first few <a href="https://tio.run/##TZFLT4NAFIX3/IqznKFjC/RBK1a3bojuCRpSBoMQIBRITMNvxwsXsRvmznfOfQ3fURddL3VaNQ9FGethuJTFtcHr2zvOCAxgY8KCuUGAncIBoQKY2kwPCsc76jB1FU53dLtUuPfumFoKW7Yz3k/473ZYTLaCu5hcxg7PxOzIjHzbhZ0W3w6hEXqGkZS1yHUDnxa0PTqe4FgWBauVxI2yRrEl8dZ7dEsTEXBzZ5qTdtircWta8Uhjh2vd6fpHiErhUyGSOD9PZYBaN21dIJod2b/CTVJqInyYqCQ@OMqkQkeY3j@ownVaXPI21leRSW9OnIuKNkhDMvJxpqCIdZIWOsYLVXicBDkpHaf20hg/ch5h/M9lrtd5@SX8qXpv9MPwCw" rel="nofollow noreferrer">valid multipliers</a> are <span class="math-container">\$75\$</span>, <span class="math-container">\$77\$</span>, <span class="math-container">\$83\$</span>, ... (We <em>could</em> apply two distinct multipliers to <span class="math-container">\$p\$</span> and <span class="math-container">\$k\$</span>, but we would lose the benefit of the function being commutative. So it's unlikely to lead to a smaller expression.)</p>
<p>For each valid multiplier, we then look for some modulo chain to reduce the size of the lookup table.</p>
<p>By running a brute-force search with <span class="math-container">\$M&lt;10000\$</span> and two modulos <span class="math-container">\$1&lt;m_0&lt;m_1&lt;100\$</span> followed by a modulo <span class="math-container">\$32\$</span>, the following expression arises:</p>
<blockquote>
<p><span class="math-container">$$h(p,k)=((((p\times 2149)\operatorname{XOR}\:(k\times 2149))\bmod 71)\bmod 35)\bmod 32$$</span></p>
</blockquote>
<p>We have a valid hop iff <span class="math-container">\$h(p,k)\in\{1,4,5,8\}\$</span>, which can be represented as the small bit-mask <span class="math-container">\$100110010_2=306_{10}\$</span>.</p>
<p>Hence the JS implementation:</p>
<pre class="lang-javascript prettyprint-override"><code>306 &gt;&gt; (p * 2149 ^ k * 2149) % 71 % 35 &amp; 1
</code></pre>
<p>Note that the final modulo <span class="math-container">\$32\$</span> is implicitly provided by the right-shift.</p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (                       // f is a recursive function taking:
  p,                        //   p = current position
  n,                        //   n = number of remaining hops
  k = 10                    //   k = key counter
) =&gt;                        //
  n ?                       // if n is not equal to 0:
    k-- &amp;&amp; (                //   decrement k; if it was not 0:
      306 &gt;&gt;                //     right-shifted lookup bit-mask
      (p * 2149 ^ k * 2149) //     apply the XOR
      % 71 % 35             //     apply the modulo chain
      &amp; 1 &amp;&amp;                //     if the least significant bit is set:
        f(k, n - 1)         //       do a recursive call with p = k and n - 1
    ) +                     //
    f(p, n, k)              //     add the result of a recursive call
                            //     with the updated k
  :                         // else:
    1                       //   stop the recursion
                            //   and increment the final result
</code></pre>
</div>
<div id="pu4" class="pu"><h1>T-SQL, 197 bytes</h1>
<p>Returns null for no solutions</p>
<p>This can handle 25 hops in 10 seconds</p>
<pre class="lang-sql prettyprint-override"><code>WITH C as(SELECT 0i,1*translate(@n,'37986','11124')x,1q
UNION ALL
SELECT-~i,y,q*(2+1/~(y*~-a))FROM(values(1,4),(1,2),(4,0),(2,1),(4,1),(0,4))x(a,y),c
WHERE a=x AND i&lt;@)
SELECT
sum(q)FROM C
WHERE i=@
</code></pre>
<p><strong><a href="https://data.stackexchange.com/stackoverflow/query/1312728/the-knights-dialer" rel="nofollow noreferrer">Try it online</a></strong></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.wolfram.com/language/" rel="nofollow noreferrer">Wolfram Language</a>, 108 bytes</h1>
<pre><code>Tr@MatrixPower[AdjacencyMatrix[4~KnightTourGraph~3~VertexDelete~{10,12}],#2,SparseArray[Mod[#,10,1]-&gt;1,10]]&amp;
</code></pre>
<p><a href="https://tio.run/##JYnBCoJAFAA/Juj0BNeiW5IQdAhBULose3itz9zQVV4bKeL@uhmdZphp0dXUojMal@q4FHxK0bEZsu5DLJPyiZqsHv9R7v3Vmkftiu7NF8a@9jt/I3Y0nKkhR34SIYhoVrCJIO@RX5Qw4yjTrpQb@E0VxGIVpbZLrtHKjI11UOC9ITkdwM5BXMmVCiYLAqJwVmr5Ag" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>You know, there's probably a shorter solution for this, but I enjoy the mathematics of this one. This gets the <a href="https://en.wikipedia.org/wiki/Adjacency_matrix" rel="nofollow noreferrer">adjacency matrix</a> for the graph, raises it to the power of the number of jumps, and multiplies it by a vector representing which key it starts from. The elements of the resulting vector give the number of paths to each key, so the total gives the total number of paths of a given length.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 83 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda s,n:n&lt;1or sum(f(i,n-1)for i in range(10)if`i`+`s`in`0x20cb0e9fd6fe45133e`)
</code></pre>
<p><a href="https://tio.run/##VY1BCoMwEADvfcUeE7SQqC1U2pcUYaNm24W6SmKhfX2MR48DM8zyX9@zVCnR4@OmfnQQS2nlbucA8TspUlzK2WrKzMACwcnLK2s0EzIWGJEFza8yQ2/8jcYr@eZi69qjTnsUD1F7giWwrPkCz4JUnmnYNTloXdoA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>A recursive solution. Checks for pairs of digits that are a knight's move away by them being consecutive in the hardcoded string <code>604927618343816729406</code>, written one byte shorter in hex. This string is a palindrome because the adjacency relationship being symmetric, but I didn't see a shorter way to take advantage of that and remove the redundancy.</p>
<p><strong>83 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>f=lambda s,n:n&lt;1or sum(f(i,n-1)for i in range(10)if 6030408&gt;&gt;(s*353^i*353)%62%29&amp;1)
</code></pre>
<p><a href="https://tio.run/##VY3LCsIwEEX3fsVsKhOtkIcWLdofEYWITh2w05LUhV8fk2U3Fy6cw5l@83sUmxJdPn54PD3EWlo5mzFA/A5IyLXsjKL8GVggeOlfaLRigkY7vdfHrsO4cQd357KqamxlT2ujUpHiQmpXMAWWOVfguiXMMQUFkwV2S38" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p><strong>85 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>def f(s,n):a=b=c=d=1;exec&quot;a,b=b+c,2*a;c,d=b+d,2*c;&quot;*n;print[d,a,b,a,c,n&lt;1,c,a,b,a][s]
</code></pre>
<p><a href="https://tio.run/##VY07DsMgEET7nGLlyp8tjEsTToIoYIHEzdoCLCWnJ8SpUszojfSkOd7lufNSqw8RYp@Rh9Uqp0h5JWR4BeosOuUmwmW0ktA39o1JdiPLFMqZWHtsUgsh30XraxmdTY17ggwbQ7L8CL2Yh/UGR9q4QEbQ0@8Svhr/aaZ@AA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>A different idea giving a fast, iterative solution. We take advantage of the knight-move adjacency graph of the phone keypad being symmetric:</p>
<pre class="lang-python prettyprint-override"><code>3--8--1
|     |
4--0--6
|     |
9--2--7 
</code></pre>
<p>Note that 0 doesn't break the top-bottom symmetry of the keypad because it connects just to 4 and 6 on the centerline. The number 5 is isn't drawn; it doesn't connect to anything.</p>
<p>We use the symmetry to collapse down to four types of locations:</p>
<pre class="lang-python prettyprint-override"><code>a--b--a
|     |
c--d--c
|     |
a--b--a 

a: 1379
b: 28
c: 46
d: 5
</code></pre>
<p>We now have the transitions (some appearing multiple times):</p>
<pre class="lang-python prettyprint-override"><code>a -&gt; b, c
b -&gt; a, a
c -&gt; a, a, d
d -&gt; c, c    
</code></pre>
<p>This corresponds to the update of counts at each step of <code>a,b,c,d=b+c,2*a,2*a+d,2*c</code>. This can be written shorter as <code>a,b=b+c,2*a;c,d=b+d,2*c</code>, as pointed out by ovs saving 2 bytes.</p>
<p>So, we iterate <code>n</code> steps to produce the correspond values of <code>a,b,c,d</code>, and now we need to select the one corresponding to the start digit <code>s</code>. We need a mapping of each digit <code>0-9</code> to the corresponding entry <code>a,b,c,d</code>, with <code>5</code> going to <code>n&lt;0</code>. The code just uses a direct array selector: <code>[d,a,b,a,c,n&lt;1,c,a,b,a][s]</code>.</p>
<p>There's probably a shorter way using the symmetry that <code>s</code> and <code>10-s</code> are in the same category, and so we can do something like <code>s*s%10</code> to collapse these, or even <code>s*s%10%8</code> to get a distinct fingerprint for each type. With optimizations, this method might take the lead.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 88 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda s,n:n&lt;1or sum(map(f,'46740 021268983 1634    9 7'[int(s)::10].strip(),[n-1]*3))
</code></pre>
<p><a href="https://tio.run/##VcxBDsIgFATQvaf4u4Khhg9IW6InabrAGGIToQRw4emxrpTZvcxk4rs8tiBrdden9be7hcyCCRfcEuSXJ95G4lin9KA4cIFCj9MoAbVUsGeCoZvXUEimxiBfTrmkNRLK5tDjcpSU1pi@vSOacUoPP2Ej0XbtVPzzzFrtP/UD" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>-15 bytes thanks to <a href="https://codegolf.stackexchange.com/users/64121/ovs">ovs</a></p>
<p>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/53748/jonathan-allan">Jonathan Allan</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 29 </s> 28 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>⁵ṗ’;;Ṣe“¡¿Ṅ\ȷḳ€°ị’Ds2¤ʋƝPɗ€S
</code></pre>
<p>A dyadic Link accepting the number of hops on the left and the key on the right which yields the number of paths.</p>
<p><strong><a href="https://tio.run/##AUgAt/9qZWxsef//4oG14bmX4oCZO0A74bmiZeKAnMKhwr/huYRcyLfhuLPigqzCsOG7i@KAmURzMsKkyovGnVDJl@KCrFP///8y/zY" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<p>Forms all length <code>hops</code> decimal numbers, prepends <code>key</code> to each and counts how many have all valid neighbours by lookup in a compressed list. (Note: when <code>hops</code> is zero the fact that the empty product is one means the Link yields 1, as desired.)</p>
<hr />
<h3><a href="https://tio.run/##AUEAvv9qZWxsef//4oG14bmX4oCZwrU74oG0KzMhUMadJeKBvVfigbYlMzFmxpHigJzCpMKu4oKsw5figJgpU////zL/Ng" rel="nofollow noreferrer">Here</a> is another 28</h3>
<pre><code>⁵ṗ’µ;⁴+3!PƝ%⁽W⁶%31fƑ“¤®€×‘)S
</code></pre>
<p>This one uses some funky arithmetic to decide whether each move is valid by adding three to each of the two digits, taking their factorials, multiplying these together, getting the remainder after division by <span class="math-container">\$22885\$</span>, getting the remainder after division by <span class="math-container">\$31\$</span>, and checking if the result is one of <span class="math-container">\$\{3,8,12,17\}\$</span>.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 31 bytes</h1>
<pre><code>ＦＮ≔⭆η§⪪”)‴↘Ｓ‴Ｐeυ!&amp;q]3⁰4”¶ＩκηＩＬη
</code></pre>
<p><a href="https://tio.run/##HYzBCoMwEAXvfkXIaQMWtIpWPElPQlsKXnNJrSZSu0pcS/8@XXqa4Q283hnfL2YOYVy8gBbXnW77@zF4UEo02zZZhI78hPZqVnCxaKjF5/CFbp0nApkXGouTxrLSmDOzKtGoMS0ZR25pxsxlLKRGqWJxNhvBSylWp@rozs8E//EyoCUHjlsdQppERTh85h8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes the number of hops as the first input. Too slow for large numbers of hops. Explanation:</p>
<pre><code>ＦＮ
</code></pre>
<p>Input the number of hops and repeat that many times.</p>
<pre><code>≔⭆η§⪪”)‴↘Ｓ‴Ｐeυ!&amp;q]3⁰4”¶Ｉκη
</code></pre>
<p>Map over every character in the string and list its possible next hops. Example: <code>6</code> → <code>170</code> → <code>682646</code> → <code>1701379170390170</code> → ...</p>
<pre><code>ＩＬη
</code></pre>
<p>Count the total number of hops found.</p>
<p>Faster 44-byte version:</p>
<pre><code>≔Ｅχ⁼ιＩηηＦＮ≔Ｅ⪪”)∧↑mG@⁰EBü)‽₂≕↖”χΣＥκ×Ｉμ§ηνηΣＩη
</code></pre>
<p><a href="https://tio.run/##XU/LDsIgELz3K0hPS4IJePDSU2M89KAxqT@AtQoRaOVh/HvERmrj7GX2MbuzneC2G7iKsXZO3gzs@QiMErR7BK4cSIK23HkQGGOCBK6K62ARNGYM/hD0ubeAMVpo21FJDyVNYCkyFvxLWaaM5jQPLCrsR/4X0JIgRpOrNujp9J2gk9S9g8mxTp3aN@bSv0AQZDCeXzhaaTx8ZPNvVYxrWmzi6qne" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Works by repeatedly multiplying a next hop transition matrix.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>24</s> 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>F•žNjεEÿ¶^²è+%•5¡sèS}g
</code></pre>
<p>Amount of hops as first input, and the starting digit as second input.</p>
<p><a href="https://tio.run/##yy9OTMpM/f/f7VHDoqP7/LLObXU9vP/QtrhDmw6v0FYFCpoeWlh8eEVwbfr//4YGXGYA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVC8X@3Rw2Lju7zyzq31fXw/kPb4g5tOrxCWxUoaHpoYfHhFcG16f91/kdHG@iYxepEG4JJIwgbImSgYwqWMI2NBQA" rel="nofollow noreferrer">verify all test cases</a> (except for the one with 20 hops, which times out).</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>F               # Loop the first (implicit) input amount of times:
 •žNjεEÿ¶^²è+%• #  Push compressed integer 46568579548530955107526513524
   5¡           #  Split it on 5: [46,68,79,48,309,&quot;&quot;,107,26,13,24]
     s          #  Swap to take the current list of digits,
                #  or the second (implicit) input in the first iteration
      è         #  (0-based) index those into this list
       S        #  Convert it to a flattened list of digits
                #  (&quot;&quot; becomes an empty list [])
}g              # After the loop: pop the list of digits, and take its length
                # (after which the result is output implicitly)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (sections <em>How to compress large integers?</em>)</a> to understand why <code>•žNjεEÿ¶^²è+%•</code> is <code>46568579548530955107526513524</code>.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, (<code>-p</code>) 63 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>eval's/./(46,68,79,48,390,&quot;&quot;,170,26,13,24)[$&amp;]/ge;'x&lt;&gt;;$_=y///c
</code></pre>
<p><a href="https://tio.run/##NYvtCoIwFIb/7yqGShYc29nX2YbljUREiEQgKRlRN99ySX8eHt6Psbv3NuZcKs1ybizNdD7M5Bi757kvJ7EVa0NAHlwA40EHhCwD6RAUgdSgzOZQrI7i0tXla9fUxWn/FkK0MRJDXjVcMmIyiZ5FJaGU/DpD6FO6DL3UhGSY/R/tcsTPMD6uw22KVT9@AQ" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/213805/">213805</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




