<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::17907</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>057</td><td>Ruby nl</td><td>251007T205746Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/284023#284023">Value In</a></td></tr>
<tr d-ix="1"><td>127</td><td>APLNARS</td><td>251007T084954Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/284020#284020">Rosario</a></td></tr>
<tr d-ix="2"><td>175</td><td>JavaScript ECMASCript 6</td><td>140318T094859Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24451#24451">Eliseo D</a></td></tr>
<tr d-ix="3"><td>068</td><td>Dyalog APL</td><td>140316T175248Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24331#24331">Thomas B</a></td></tr>
<tr d-ix="4"><td>203</td><td>Javascript</td><td>140315T155845Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24276#24276">tomsmedi</a></td></tr>
<tr d-ix="5"><td>066</td><td>Perl 6 93 101 100 80 68</td><td>140107T192229Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/17909#17909">null</a></td></tr>
<tr d-ix="6"><td>420</td><td>C</td><td>140323T153753Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24762#24762">celtschk</a></td></tr>
<tr d-ix="7"><td>067</td><td>GolfScript</td><td>140318T220925Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24483#24483">Peter Ta</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>140315T212550Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24287#24287">Christop</a></td></tr>
<tr d-ix="9"><td>189</td><td>JavaScript</td><td>140318T201711Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24477#24477">kitcar20</a></td></tr>
<tr d-ix="10"><td>089</td><td>J</td><td>140314T141300Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24168#24168">Omar</a></td></tr>
<tr d-ix="11"><td>162</td><td>Two python answers using no libraries. First handles the optional input without a digit before the first . and is</td><td>140317T122251Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24381#24381">staircas</a></td></tr>
<tr d-ix="12"><td>nan</td><td></td><td>140316T132415Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24321#24321">Thomas B</a></td></tr>
<tr d-ix="13"><td>nan</td><td></td><td>140316T113147Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24318#24318">Thomas B</a></td></tr>
<tr d-ix="14"><td>076</td><td>DC not fully general</td><td>140315T234220Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24293#24293">Thomas B</a></td></tr>
<tr d-ix="15"><td>096</td><td>J</td><td>140315T205233Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24285#24285">Thomas B</a></td></tr>
<tr d-ix="16"><td>164</td><td>C</td><td>140316T000915Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24295#24295">Florian </a></td></tr>
<tr d-ix="17"><td>112</td><td>Ruby</td><td>140314T144634Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24178#24178">mniip</a></td></tr>
<tr d-ix="18"><td>175</td><td>Mathematica</td><td>140314T212937Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24220#24220">DavidC</a></td></tr>
<tr d-ix="19"><td>143</td><td>Mathematica</td><td>140314T200000Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24214#24214">Jonathan</a></td></tr>
<tr d-ix="20"><td>171</td><td>C</td><td>140314T182335Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24201#24201">orion</a></td></tr>
<tr d-ix="21"><td>nan</td><td></td><td>140314T181146Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24199#24199">Oberon</a></td></tr>
<tr d-ix="22"><td>081</td><td>GTB</td><td>140314T153612Z</td><td><a href="https://codegolf.stackexchange.com/questions/17907/convert-a-repeated-decimal-to-a-fraction/24181#24181">Timtech</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a> <code>-nl</code>, 57 bytes</h1>
<p>Ruby outputs raw fractions within parentheses (e.g. <span class="math-container">\$\frac{1}{2}\$</span> is <code>(1/2)</code>). Parens can be removed by switching to the flags <code>-pl</code> and adding 2 bytes by replacing <code>p</code> with <code>$_=</code>.</p>
<p>There's <a href="https://codegolf.stackexchange.com/a/24178/52194">another Ruby answer</a> on here but its poster has been inactive for years and this seemed distinct enough that I felt ok to post as its own answer.</p>
<pre class="lang-ruby prettyprint-override"><code>~/\.\d*./
p$_.to_r+&quot;#$'00/#{?9*$'.size}&quot;.to_r/10**$&amp;.size
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5NCsIwEIX3OUYNFip9naRNm6w8iJWCqCCISm0XKnoDT-CmC8Uz9Tbmx1m8x7zHfMzr3fary3cRpYd9tBw-fbdN9WgeWY16nSBjJ96gOzbtLJrwmCib3OYm4THOu-vmHvkqE5QkfOqjAPhzhvGpkENXjIDcCgUNVupKgQloMAkwBZCxsUDpdlFIrdwhCSpcRpCQOjeKSuFzPxCObTzbqSysQVqwB3mmhQtlex2--gE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<p>Ruby's <code>String#to_r</code> function is delightfully lenient. If there's more than one period, it ignores everything after the second one, and if it ends in a <code>/</code>, it assumes you want a Rational with denominator <code>1</code>.</p>
<pre class="lang-ruby prettyprint-override"><code>#! ruby -nl                  # Implicit input to $_ w/o trailing newline
~/\.\d*./                    # Capture non-repeating decimal portion to $&amp;
                             #   (Also saves repeating portion to $')
p                            # Print
 $_.to_r                     #   Input parsed as a Rational
                             #     (Everything past second decimal is ignored)
        +                    #   Plus
 &quot;                   &quot;.to_r  #     The following string parsed as a Rational
  #$'                        #       Repeating portion
     00                      #       x100 to offset the 2 periods in $&amp;
       /                     #       Divided by
        #{?9*$'.size}        #       String of 9's as long as the repeating portion
                             #         (If no repeating portion, interpreted as /1)
   /                         #     Divided by
    10**$&amp;.size              #     10 ^ length of $&amp; (non-repeating portion + 2 periods)
</code></pre>
</div>
<div id="pu1" class="pu"><h1>APL(NARS), 127 chars</h1>
<pre><code>{(a b c)←{⍵≡⍬:0⋄⍎⍵,'x'}¨⍵⋄(m n)←≢¨1↓⍵⋄a+{n=0:0⋄c÷(10x*m)-⍨10x*m+n}+b÷10x*m}∘{{⍵≡,0:⍬⋄⍵}¨{⍵⊂⍨∼⍵∊'. '}∊2{'..'≡⍺⍵:⍺0⋄⍺}/'.',⍵,'.'}
</code></pre>
<p>The function input is one string 'a.b.c' with a,b,c string of numbers or a b c they can be void too.
Output one rational.</p>
<pre><code>{{⍵≡,0:⍬⋄⍵}¨{⍵⊂⍨∼⍵∊'. '}∊2{'..'≡⍺⍵:⍺0⋄⍺}/'.',⍵,'.'}
</code></pre>
<p>this above is used for convert the input string as above 'a.b.c' in one array of array of string that has the void set or zilde
if the a b or c are void.</p>
<p>It is based on the formula find in one book</p>
<pre><code> a.b_1b_2..b_m(c_1c_2..c_n)=a+(b_1b_2..b_m/10^m)+(c_1c_2..c_n/(10^(n+m)-10^m))
</code></pre>
<p>where (c_1c_2..c_n) is the period.</p>
<p>Test:</p>
<pre><code>  g←{(a b c)←{⍵≡⍬:0⋄⍎⍵,'x'}¨⍵⋄(m n)←≢¨1↓⍵⋄a+{n=0:0⋄c÷(10x*m)-⍨10x*m+n}+b÷10x*m}∘{{⍵≡,0:⍬⋄⍵}¨{⍵⊂⍨∼⍵∊'. '}∊2{'..'≡⍺⍵:⍺0⋄⍺}/'.',⍵,'.'} 
  g '0..3'
1r3 
  g '0.0.3'
1r30 
  g '0.00.3'
1r300 
  g '0.6875.'
11r16 
  g '1.8.'
9r5 
  g '2..'
2 
  g '5..09'
56r11 
  g '2..142857'
15r7 
  g '0.1.6'
1r6 
  g '2..142857'
15r7 
  g '0.01041.6'
1r96 
  g '0.000000.1'
1r9000000 
  g '0.0.9'
1r10 
  g '0.24.9'
1r4 
  g  '321.12345678901234567890.789465416547846155489464131548484'
5352057613150205761315131577569419288968301760482830099r16666666666666666666666666666666650000000000000000000 
  ⎕fpc←1024
  1000⍕5352057613150205761315131577569419288968301760482830099r16666666666666666666666666666666650000000000000000000 
321.123456789012345678907894654165478461554894641315484847894654165478461554894641315484847894654165478461554894641315
  48484789465416547846155489464131548484789465416547846155489464131548484789465416547846155489464131548484789465416
  54784615548946413154848478946541654784615548946413154848478946541654784615548945__
</code></pre>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ECMASCript 6) <s>180</s> 175</h1>

<pre><code>G=(a,d)=&gt;d?G(d,a%d):a;P=a=&gt;+("1e"+a);L=a=&gt;a.length;f=prompt().split(".");B=P(L(b=f[1]));D=P(L(b)+L(c=f[2]))-P(L(b))||1;alert((m=(f[0]+b||0)*D+B*(c||0))/(g=G(m,n=B*D))+"/"+n/g)
</code></pre>

<p>While it isn't a clear winner for the 300 bounty... this is the shortest I can come up with:</p>

<ul>
<li><em>Changes from previous version:</em> some slight alteration to logic, and changes to the Power <code>P</code> function by altering it to <code>+("1e"+a)</code> instead of <code>Math.pow(10,a)</code> thereby saving a few more characters...</li>
</ul>
</div>
<div id="pu3" class="pu"><h1>Dyalog APL (<s>75</s> <s>73</s> <s>69</s> 68 characters)</h1>

<p>Here is another and fifth attempt (most probably my last one); I spent the day trying to write some piece of code shorter than 80 characters and being fully consistent with the rules. This challenge made my day!</p>

<p>I finally got a line of APL made of 75 characters, working with Dyalog APL (but not on the online interpreter page because using the <code>⍎</code> <em>execute</em> function), which is the following one:</p>

<pre><code>(N,D)÷D∨N←(⍎'0',1↓I/⍨2=+\P)+(⍎'0',I/⍨2&gt;+\P)×D←D+0=D←⍎'0',⌽2↓⍕¯1+10⊥P←'.'=I← '1.2.3'
</code></pre>

<p>Of course I could make it a little shorter, but the special cases where one, two or three fields are missing. My code can even handle the <code>..</code> input case.</p>

<p>I know that APL is difficult to read, and since people enjoy understanding how a piece of code actually works, here are some explanation. Basically, I compute the final denominator in the variable D and the final numerator in the variable N.</p>

<p>APL is parsed from right to left.</p>

<ul>
<li>First, the string is stored in variable I (<code>I←</code>).</li>
<li>Then it is mapped to a vector of booleans indicating where a dot is, and this vector is called P (<code>P←'.'=</code>). For instance '1.2.3' will be mapped to 0 1 0 1 0.</li>
<li>This vector is digits in base 10 (<code>10⊥</code>); now '1.2.3' is 1010.</li>
<li>Then 1 is substracted from this number (either with <code>1-⍨</code> or with <code>¯1+</code>, here I chose the second). Now '1.2.3' is 1009.</li>
<li>Then this number is converted to a string (<code>⍕</code>), two initial digits are removed (<code>2↓</code>), which makes 09 from our initial '1.2.3' example; the string is reversed (<code>⌽</code>).</li>
<li>Here, as a special case, I add an initial 0 character in front of the string; it makes me sad to use the four characters <code>'0',</code> but I did it for avoiding an error when the second and thirds fields are both empty. The string is converted back to a number (<code>⍎</code>) and it is stored in D, which is the denominator except when both last fields are empty, because in such case D is equal to 0.</li>
<li>The <code>D←D+0=</code> piece of code set D to 1 if it is currently null, and now D contains the denominator (before GCD division however).</li>
<li>This denominator is multiplied (<code>×</code>) with the content of the initial string I up to the second dot with <code>(⍎'0',I/⍨2&gt;+\P)</code> which starts from P again (0 1 0 1 0 in my example), adds the successive numbers by cumulating them (which makes 0 1 1 2 2 in my example), check which values are smaller than 2 (making the boolean vector 1 1 1 0 0), and taking corresponding characters in I; another 0 is added in front of the string for preventing another trap (if the two initial fields are empty) and the whole is converted to a number.</li>
<li>The last part of the input string is added to the previous product with <code>(⍎'0',1↓I/⍨2=+\P)</code>, which takes P again, adds by cumulating again, check which values are equal to 2 (see previous explanation), takes the characers, removes the first one which is a dot, adds a preventing initial 0 character and converts to a number.</li>
<li>This product followed with a sum is stored in N which is the numerator.</li>
<li>Finally the GCD is computed with D∨N and both numbers are divided by this GCD.</li>
</ul>

<p><em>edit:</em> Here is a fix for 73 characters:</p>

<pre><code>(N,D)÷D∨N←(⍎'0',1↓P/I)+(⍎'0',I/⍨~P←2=+\P)×D←D+0=D←⍎'0',⌽2↓⍕¯1+10⊥P←'.'=I←
</code></pre>

<p>The idea of this hack is computing first the case where cumulative addition has values equal to 2, storing them for later and inverting this bitwise mask for getting the first case; thus computing the next case needs less characters.</p>

<p><em>edit:</em> Here is another fix for 69 characters:</p>

<pre><code>(N,D)÷D∨N←(⍎'0',1↓P/I)+(⍎'0',I/⍨~P←2=+\P)×D←⍎'1⌈0',⌽2↓⍕¯1+10⊥P←'.'=I←
</code></pre>

<p>The idea of this hack is to embed the most complicated special case as APL code in the string to be evaluated (at string to number conversion stage).</p>

<p><em>edit:</em> Here is another fix for 68 characters:</p>

<pre><code>(N,D)÷D∨N←(⍎'0',1↓P/I)+(⍎'0',I/⍨~P←2=+\P)×D←⍎'1⌈0',⌽3↓⍕1-10⊥P←'.'=I←
</code></pre>

<p>The idea of this hack is to replace <em>adding -1 to the value</em> for substracting 1 to that value by the operation <em>substracting that value to 1</em> then remove later one character more at the beginning (which will be the minus sign).</p>

<p><em>edit:</em> Cosmetic change:</p>

<pre><code>(N,D)÷D∨N←(⍎'0',1↓P/I)+(⍎'0',I/⍨~P←2=+\P)×D←1⌈⍎'0',⌽3↓⍕1-10⊥P←'.'=I←
</code></pre>

<p>No improvement in size, but more satisfied to get the <em>maximum</em> function out of the code to be evaluated.</p>
</div>
<div id="pu4" class="pu"><h2>Javascript, 203</h2>
<p>Way too long, but still fun. Newlines because semicolons are unreadable.</p>
<pre><code>s=prompt(b=1).split(&quot;.&quot;)
P=Math.pow
a=s[0]
c=s[1]
d=P(10,l=c.length)
f=(P(10,s[2].length)-1)*P(10,l)||1
e=s[2]=+s[2]
a=d*a+b*c;b*=d
a=f*a+b*e;b*=f
function g(a,b){return b?g(b,a%b):a}g=g(a,b);a/g+&quot;/&quot;+b/g
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Perl 6 (<del>93</del> <del>101</del> <del>100</del> <del>80</del> <del>68</del> 66 bytes)</h1>

<pre><code>$/=split ".",get;say ($0+($1+$2/(9 x$2.comb||1))/10**$1.comb).nude
</code></pre>

<p>The size was increased to handle nothing, instead of just failing. Mouq proposed to use <code>$/</code>, so it's now being used, and the code is 20 bytes shorter. Ayiko proposed replacing <code>/</code> with <code></code>, so the code is even shorter (by 12 bytes). Then Mouq proposed replacing <code>chars</code> with <code>comb</code> (in numeric context, they are identical, because list of characters after conversion to number is number of characters).</p>

<p>Sample output:</p>

<pre><code>$ perl6 script.p6
5.3.87
889 165
$ perl6 script.p6
2.0.0
2 1
$ perl6 script.p6
0..3
1 3
$ perl6 script.p6
0.0.3
1 30
$ perl6 script.p6
0.0.0
0 1
$ perl6 script.p6
0.1.6
1 6
$ perl6 script.p6
0.01041.6
1 96
$ perl6 script.p6
0.2.283950617
37 162
$ perl6 script.p6
123.456.789
41111111 333000
</code></pre>
</div>
<div id="pu6" class="pu"><h1>C (420 characters as written; less after removing unnecessary whitespace)</h1>

<p>Note that this assumes 64-bit <code>long</code> (e.g. 64 bit Linux); it will fail for the test case <code>0.2.283950617</code> on systems using 32-bit <code>long</code>. This can be fixed at the cost of some characters by changing the type to <code>long long</code> and changing the <code>printf</code> format string accordingly.</p>

<pre><code>#include &lt;stdio.h&gt;

long d[3], n[3], i;

int main(int c, char** v)
{
  while (c = *v[1]++)
    switch(c)
    {
    case '.':
      n[++i] = 1;
      break;
    default:
      d[i] = 10 * d[i] + c - '0';
      n[i] *= 10;
    }

  n[2] -= n[2] != 1;

  while (i--)
    d[2] += d[i] * n[i+1], n[i]*=n[i+1];

  i = d[2];
  *n = n[1];

  while (i)
    *d = i, i = *n%i, *n = *d;
  printf("%ld/%ld\n", d[2]/ *n, n[1]/ *n);
}
</code></pre>
</div>
<div id="pu7" class="pu"><h2>GolfScript (67 chars)</h2>

<pre><code>`{'.'/1$=.10\,?@-).!+0@+~}+3,/1$4$*]-1%~;*+*+].~{.@\%.}do;{/}+/'/'@
</code></pre>

<p>NB This supports empty integer parts.</p>

<p>If the string is of the form <code>'n.p.q'</code> then the value is <code>n + p/E + q/(DE) = ((nD + p)E + q)/DE</code> where <code>D = 10^(len p)</code> and <code>E = 10^(len q) - 1</code>, <em>except</em> when <code>len q = 0</code>, in which case <code>E = 1</code> (to avoid division by 0).</p>

<p>Dissection:</p>

<pre><code>           # Stack: 'n.p.q'
`{         # Combined with the }+ below this pulls the value into the block
           # Stack: idx 'n.p.q'
    '.'/   # Stack: idx ['n' 'p' 'q']
    1$=    # Stack: idx str   (where str is the indexed element of ['n' 'p' 'q'])
    .10\,? # Stack: idx str 10^(len str)
    @-)    # Stack: str 10^(len str)-idx+1
           #   If idx = 0 we don't care about the top value on the stack
           #   If idx = 1 we compute D = 10^(len 'p')
           #   If idx = 2 we compute E' = 10^(len 'q') - 1
    .!+    # Handle the special case E'=0; note that D is never 0
    0@+~   # Stack: 10^(len str)-idx+1 eval('0'+str) (GolfScript doesn't treat 011 as octal)
}+         # See above
3,/        # Run the block for idx = 0, 1, 2
           # Stack: _ n D p E q
1$4$*      # Stack: _ n D p E q D*E
]-1%~;     # Stack: D*E q E p D n
*+*+       # Stack: D*E q+E*(p+D*n)
].~        # Stack: [denom' num'] denom' num'
{.@\%.}do; # Stack: [denom' num'] gcd
{/}+/      # Stack: denom num
'/'@       # Stack: num '/' denom
</code></pre>

<p><a href="http://golfscript.apphb.com/?c=OycwLi4zCjAuMC4zCjAuMDAuMwowLjY4NzUuCjEuOC4KMi4uCjUuLjA5CjAuMS42CjIuLjE0Mjg1NwowLjAxMDQxLjYKMC4yLjI4Mzk1MDYxNwowLjAwMDAwMC4xCjAuLjknbi97CgpgeycuJy8xJD0uMTBcLD9ALSkuISswQCt%2BfSszLC8xJDQkKl0tMSV%2BOyorKitdLn57LkBcJS59ZG87ey99Ky8nLydACgpdcHV0c30v" rel="nofollow">Online demo</a> which simulates running the program with each of the test inputs, one at a time.</p>
</div>
<div id="pu8" class="pu"><h2>Haskell</h2>

<pre><code>import Data.Ratio
f n=case s '.' n of
    [x,y,z]-&gt;(r x)%1+(r y)%(10^(length y))+(r z)%((10^t-1)*(10^(length y)))
        where
            r ""=0
            r n=read n
            t = if length z==0 then 9 else length z
s _ []=[[]]
s n (x:xs) | x==n = []:(s n xs)
           | otherwise = let (l:ls)=s n xs in (x:l):ls
</code></pre>
</div>
<div id="pu9" class="pu"><h1>JavaScript (189)</h1>

<pre><code>i=prompt().split(".");a=i[0];b=i[1];c=i[2];B=b.length;p=Math.pow;n=a+b+c-(a+b);d=p(10,B+c.length)-p(10,B);f=1;while(f){f=0;for(i=2;i&lt;=n;i++)if(n%i==0&amp;&amp;d%i==0){n/=i;d/=i;f=1}};alert(n+"/"+d)
</code></pre>

<h3>Example:</h3>

<p>Input:</p>

<pre><code>5.3.87
</code></pre>

<p>Output:</p>

<pre><code>889/165
</code></pre>
</div>
<div id="pu10" class="pu"><h1>J (<s>85</s> <s>90</s> 89 chars)</h1>

<p>My original function, which was 5 characters shorter than the second, had a couple of bugs: it didn't output integers as "n/1" and it gave the wrong answer on numbers with more than a dozen or so digits. Here's a corrected function in J that also incorporates Eelvex's suggestion to save a character:</p>

<pre><code>f=:3 :0
'a t'=.|:(".@('0','x',~]),10x^#);._1'.',y
(,'/'&amp;,)&amp;":/(,%+.)&amp;1+/a%*/\1,0 1-~}.t
)
</code></pre>

<p>It receives a string and returns a string. Here's a sample session:</p>

<pre><code>   f '..'
0/1
   f '0.0.0'
0/1
   f '3..'
3/1
   f '..052631578947368421'
1/19
   f '0.2.283950617'
37/162
   f '.0.103092783505154639175257731958762886597938144329896907216494845360824742268041237113402061855670'
1/97
</code></pre>
</div>
<div id="pu11" class="pu"><p>Two python answers using no libraries. First handles the optional input without a digit before the first . and is 162 chars</p>

<pre><code>_=lambda a,b:b and _(b,a%b)or a;i,t,r=raw_input().split(".");b=r!="";d=(10**len(r)-b)*10**len(t);n=int((i+t+r)or 0)-b*int((i+t)or 0);f=_(d,n);print "%i/%i"%(n,d)
</code></pre>

<p>Second doesn't handle nothing before the first digit but does handle all required inputs correctly and is 150 chars</p>

<pre><code>_=lambda a,b:b and _(b,a%b)or a;i,t,r=raw_input().split(".");b=r!="";d=(10**len(r)-b)*10**len(t);n=int(i+t+r)-b*int(i+t);f=_(d,n);print "%i/%i"%(n,d)
</code></pre>
</div>
<div id="pu12" class="pu"><h1>J (different method)</h1>

<p>Another solution based on a very different method; this time it is fully general; only missing is the 1-denominator when an integer is submitted:</p>

<pre><code>   ".((({.~(i.&amp;1)),'+'"_,((":@(10&amp;^)@#,'%~',])@}.@#~~:/\),'+%',((,~(##'9'"_),'%x:0'"_)@}.@#~2:=+/\@]))(=&amp;'.')) '.1.3'
2r15
   ".((({.~(i.&amp;1)),'+'"_,((":@(10&amp;^)@#,'%~',])@}.@#~~:/\),'+%',((,~(##'9'"_),'%x:0'"_)@}.@#~2:=+/\@]))(=&amp;'.')) '.1.'
1r10
   ".((({.~(i.&amp;1)),'+'"_,((":@(10&amp;^)@#,'%~',])@}.@#~~:/\),'+%',((,~(##'9'"_),'%x:0'"_)@}.@#~2:=+/\@]))(=&amp;'.')) '1..'
1
   ".((({.~(i.&amp;1)),'+'"_,((":@(10&amp;^)@#,'%~',])@}.@#~~:/\),'+%',((,~(##'9'"_),'%x:0'"_)@}.@#~2:=+/\@]))(=&amp;'.')) '1..3'
4r3
</code></pre>
</div>
<div id="pu13" class="pu"><h1>APL (not fully general)</h1>

<p>Not fully general (like my solution for dc); works with Dyalog APL (but not on the online version of Dyalog APL, not sure why):</p>

<pre><code>(R,F)÷(F←D×N)∨R←(⍎C)+D×(⍎I/⍨2&gt;+\P)×N←10*¯1++/≠\P⊣D←¯1+10*⍴C←1↓I/⍨2=+\P←'.'=I← '123.456.789'
</code></pre>

<p>The first field is optional, but at least one digit is required for both other fields.</p>
</div>
<div id="pu14" class="pu"><h1>DC (not fully general, shortened to 76 characters)</h1>

<p>Not fully general, but please, consider I did it with one of the oldest things in the world:</p>

<pre><code>5.3.87 dsaX10r^d1-rla*sasbdscX10r^dlc*rlb*rlb*la+snsdlnld[dSarLa%d0&lt;a]dsax+dldr/rlnr/f
</code></pre>

<p><strong>Edit:</strong> I edit my solution; it isn't more general, but a little shorter:</p>

<pre><code>sadsbX10r^sclaX10r^dd1-dsdlblc**rla*+dsnrld*dsd[dSarLa%d0&lt;a]dsax+dldr/rlnr/f
</code></pre>

<p>Use it as:</p>

<pre><code>5.3.87 sadsbX10r^sclaX10r^dd1-dsdlblc**rla*+dsnrld*dsd[dSarLa%d0&lt;a]dsax+dldr/rlnr/f
</code></pre>

<ul>
<li><p>First field isn't required:</p>

<pre><code>.1.3 sadsbX10r^sclaX10r^dd1-dsdlblc**rla*+dsnrld*dsd[dSarLa%d0&lt;a]dsax+dldr/rlnr/f
</code></pre>

<p>is OK.</p></li>
<li><p>Second and thirst field require at least one digit</p></li>
</ul>
</div>
<div id="pu15" class="pu"><h1>J (96 characters)</h1>

<p>I don't use the slash symbol as a separator (but solution in Mathematica doesn't either since it uses a graphical representation which is better anyway); in J language the fraction is displayed with <code>r</code> instead as <code>/</code>:</p>

<pre><code>   (((-.@]#[)((".@[%#@[(10x&amp;^)@-{.@])+({.@](10x&amp;^)@-#@[)*&lt;:@{:@](".%&lt;:@(10x&amp;^)@#)@}.[)I.@])(=&amp;'.')) '1..3'
4r3
   (((-.@]#[)((".@[%#@[(10x&amp;^)@-{.@])+({.@](10x&amp;^)@-#@[)*&lt;:@{:@](".%&lt;:@(10x&amp;^)@#)@}.[)I.@])(=&amp;'.')) '123.456.789'
41111111r333000
</code></pre>
</div>
<div id="pu16" class="pu"><h2>C, 164</h2>

<p>This is similar to orion's C solution, even though I did it from scratch.
I confess however stealing a number of his optimizations.
It is not much shorter, but it handles .25. = 1/4 and 0.000000.1 = 1/9000000.</p>

<pre><code>long a,b,c,d,e;main(){while((c=getchar()-48)&gt;-3)c+2?a=a*10+c,b*=10:b?e=a,d=b:(b=1);
b&gt;d?a-=e,b-=d:0;for(d=2;d&lt;=a;)a%d+b%d?d++:(a/=d,b/=d);printf("%ld/%ld\n",a,b);}
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Ruby - 112</h1>

<pre><code>x,y,z=gets.chop.split".";y||='0';z||='0';puts((y.to_i+Rational(z.to_i,10**z.length-1))/10**y.length+x.to_i).to_s
</code></pre>

<p>This is my first experiment with ruby, so feel free to suggest improvements.</p>

<pre><code>$ ruby20 % &lt;&lt;&lt; '5.3.87'
889/165
$ ruby20 % &lt;&lt;&lt; '0..3'
1/3
$ ruby20 % &lt;&lt;&lt; '0.0.3'
1/30
$ ruby20 % &lt;&lt;&lt; '0.00.3'
1/300
$ ruby20 % &lt;&lt;&lt; '0.6875.0'
11/16
$ ruby20 % &lt;&lt;&lt; '1.8.0'
9/5
$ ruby20 % &lt;&lt;&lt; '2..'
2/1
$ ruby20 % &lt;&lt;&lt; '..'
0/1
</code></pre>
</div>
<div id="pu18" class="pu"><h1>Mathematica 175</h1>
<pre><code>f@i_:=
If[IntegerQ[g=FromDigits[Map[IntegerDigits@ToExpression@#&amp;,StringSplit[i,&quot;.&quot;]/.&quot;&quot;-&gt; {}]
/.{a_,b_,c_}:&gt; {{Sequence@@Join[a,b],c},Length@a}]],HoldForm[Evaluate@g]/HoldForm@1,g]
</code></pre>
<p>Most of the routine goes to massaging the input.  Approximately 50 chars went to handling integers.</p>
<hr />
<h2>Examples</h2>
<pre><code>f[&quot;7801.098.765&quot;]
</code></pre>
<p><img src="https://i.sstatic.net/Rp5oB.png" alt="frac1" /></p>
<p>More examples:</p>
<pre><code>TableForm[
 Partition[{#, f[#]} &amp; /@ {&quot;19..87&quot;, &quot;19.3.87&quot;, &quot;5.3.87&quot;, &quot;0.0.3&quot;, &quot;0..3&quot;, &quot;0.2.283950617&quot;, 
&quot;123.456.789&quot;, &quot;6666.7777.8888&quot;, &quot;2.0.0&quot;,&quot;0.0.0&quot;}, 5], TableSpacing -&gt; {5, 5}]
</code></pre>
<p><img src="https://i.sstatic.net/X03UA.png" alt="frac2" /></p>
<hr />
<h2>How it would normally be accomplished in Mathematica</h2>
<p><code>FromDigits</code> can obtain a fraction directly from a recurring repeating decimal, provided that the input is of a particular form.  Integers are displayed as  integers.</p>
<pre><code>z={{{1, 9, {8, 7}}, 2}, {{1, 9, 3, {8, 7}}, 2}, {{5, 3, {8, 7}}, 1}, {{{3}}, -1}, {{{3}}, 0}, 
{{2, {2, 8, 3, 9, 5, 0, 6, 1, 7}}, 0}, {{1, 2, 3, 4, 5, 6, {7, 8, 9}}, 3}, 
{{6, 6, 6, 6, 7, 7, 7, 7, {8}}, 4}, {{2}, 1}, {{0}, 1}}

FromDigits/@z
</code></pre>
<p><img src="https://i.sstatic.net/8bMSA.png" alt="z" /></p>
</div>
<div id="pu19" class="pu"><h2>Mathematica, 143</h2>
<p>As usual, Mathematica offers many high-level functions to do the job, but gives them verbose names.</p>

<pre><code>x=StringTake;c=ToExpression;p=s~StringPosition~&quot;.&quot;;{o,t}=First/@p;u=StringLength@s-t;d=t-o-1;Rationalize@(c@x[s,t-1]+c@x[s,-u]/((10^u)-1)/10^d)
</code></pre>
<p>Sample output to be added later when I have time.</p>
</div>
<div id="pu20" class="pu"><h1>C, 171</h1>

<p>Quite long. Could be further reduced. No <code>scanf</code>, which really can't handle it if there aren't any numbers between the dots. No <code>strtol</code>. Just number crunching:</p>

<pre><code>a,b,c,d,q;main(){while((q=getchar()-48)&gt;-3)q&lt;0?(d=b&gt;0,b+=!b):d?(c=c*10+q,d*=10):(a=a*10+q,b*=10);for(a=a*--d+c,q=b*=d;q&gt;1;a%q+b%q?--q:(a/=q,b/=q));printf("%d/%d\n",a,b);}
</code></pre>

<p>Test: </p>

<pre><code>rfc &lt;&lt;&lt; "2..142857"
15/7
</code></pre>
</div>
<div id="pu21" class="pu"><h1>Python</h1>

<h2>No libraries - 156 characters</h2>

<pre class="lang-python prettyprint-override"><code>_=lambda a,b:b and _(b,a%b)or a;a,b,c=raw_input().split('.');d,e=int(a+b+c)-bool(c)*int(a+b),
(10**len(c)-bool(c))*10**len(b);f=_(d,e);print'%i/%i'%(d/f,e/f)
</code></pre>

<h2>Using <code>fractions</code> - 127 characters</h2>

<pre class="lang-python prettyprint-override"><code>from fractions import*;a,b,c=raw_input().split('.');print Fraction(int(a+b+c)-bool(c)*int(a+b
),(10**len(c)-bool(c))*10**len(b))
</code></pre>
</div>
<div id="pu22" class="pu"><h2><a href="http://timtechsoftware.com/gtb" rel="nofollow" title="GTB">GTB</a>, 81</h2>

<pre><code>`_:s;_,1,l?_)-S;_,"."
s;A;,1,S;_,".")-1
s;_,1+S;_,"."),l?_)-S;_,"."))→_
x?A;+_)►Frac
</code></pre>

<p><strong>Example</strong></p>

<pre><code>?3.25.
            13/4
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/17907/">17907</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




