<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::17239</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>134</td><td>Racket</td><td>230718T135932Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/262971#262971">Ed The &</a></td></tr>
<tr d-ix="1"><td>425</td><td>Vyxal</td><td>230718T102742Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/262965#262965">I am kin</a></td></tr>
<tr d-ix="2"><td>034</td><td>Pyth</td><td>210422T151517Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/224197#224197">Citty</a></td></tr>
<tr d-ix="3"><td>019</td><td>Vyxal</td><td>210421T232331Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/224123#224123">lyxal</a></td></tr>
<tr d-ix="4"><td>nan</td><td></td><td>140107T183638Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17905#17905">swish</a></td></tr>
<tr d-ix="5"><td>nan</td><td>R</td><td>140107T174608Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17900#17900">popojan</a></td></tr>
<tr d-ix="6"><td>040</td><td>GolfScript</td><td>140104T053606Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17426#17426">aditsu q</a></td></tr>
<tr d-ix="7"><td>043</td><td>Ruby</td><td>140103T165919Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17340#17340">Ibrahim </a></td></tr>
<tr d-ix="8"><td>084</td><td>python 3</td><td>140103T064643Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17273#17273">Wasi</a></td></tr>
<tr d-ix="9"><td>053</td><td>Perl 6</td><td>140103T070805Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17274#17274">Konrad B</a></td></tr>
<tr d-ix="10"><td>028</td><td>GTB</td><td>140103T001259Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17252#17252">Timtech</a></td></tr>
<tr d-ix="11"><td>073</td><td>Mathematica</td><td>140102T235959Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17249#17249">DavidC</a></td></tr>
<tr d-ix="12"><td>032</td><td>GolfBasic 84</td><td>140102T222542Z</td><td><a href="https://codegolf.stackexchange.com/questions/17239/convert-a-decimal-to-a-fraction/17242#17242">Timtech</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://racket-lang.org/" rel="nofollow noreferrer">Racket</a>, 134 bytes</h1>
<pre class="lang-rkt prettyprint-override"><code>((λ(f[d(denominator f)][n(numerator f)])(printf&quot;~a + (~a)&quot;(quotient n d)(rationalize(/(modulo n d)d)(/ 1 d))))(inexact-&gt;exact(read)))
</code></pre>
<p><a href="https://tio.run/##NYpBCsIwFESv8qmbCaK1iAs3XqS4@DS/Ekx/NCQgLnox7@CVYqw4m5k3M5GHq6Sy8qwXij8A3i@MvYUVDZNTTiHSaM69QvMk8c8Gt@g0jc3MtCbMbBrcc0hONJGSNahXF5S9ewpaTMFmH5albi11NVTBqTx4SJvTYojC376U3fbY7Q8f" rel="nofollow noreferrer" title="Racket – Try It Online">Try it online!</a></p>
<hr />
<h2>Explanation</h2>
<p>Racket natively supports fractions. Fractions are referred to as &quot;exact number&quot; as the values of fraction aren't affected by IEEE floating-point conversion.</p>
<p>Racket also has support for <code>float</code>s, similar to what is present in other languages. These floats are called inexact numbers because their accuracy is limited to what can be stored in a certain number of bytes (IEEE standards).</p>
<blockquote>
<p><a href="https://docs.racket-lang.org/guide/numbers.html" rel="nofollow noreferrer">Read more about Racket Numbers.</a></p>
</blockquote>
<p>Since the user inputs a float with a decimal point, we need to convert the number into a fraction using <code>inexact-&gt;exact</code>. Once our input is converted, we can extract the denominator and the numerator of the fraction.</p>
<pre class="lang-rkt prettyprint-override"><code>((λ (frac [den (denominator frac)] [num (numerator frac)])
   ...)
 (inexact-&gt;exact (read)))
</code></pre>
<p>After that, We create a format string that will printed with the following format parameters:</p>
<ol>
<li>The whole part of the fraction.
<ol>
<li>Calculated by dividing the numerator <code>num</code> by the denominator <code>den</code>.</li>
</ol>
</li>
<li>A simplified version of the remaining fraction.
<ol>
<li>Modulo the numerator <code>num</code> by the denominator <code>den</code>.</li>
<li>Create a new fraction with the previous step as the numerator and the denominator as <code>den</code>.</li>
<li>Rationalize the new fraction with a tolerance of <span class="math-container">\$\frac{1}{\text{den}}\$</span>.</li>
</ol>
</li>
</ol>
<pre class="lang-rkt prettyprint-override"><code>((λ (frac [den (denominator frac)] [num (numerator frac)])
   (printf &quot;~a + (~a)&quot;
           (quotient n d)
           (rationalize (/ (modulo n d) d)
                        (/ 1 d))))
 (inexact-&gt;exact (read)))
</code></pre>
<hr />
<p><em>Have a great week further!</em></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 34 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 4.25 bytes</h1>
<pre><code>1ḋ\+j
</code></pre>
<p>Does divmod with 1 and then joins on <code>+</code>. Outputs <code>a+b/c</code>.</p>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyI9IiwiIiwiMeG4i1xcK2oiLCIiLCIyLjcxIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<h2>If the IO format was a bit looser</h2>
<h3>2 bytes</h3>
<pre><code>1ḋ
</code></pre>
<p>Does divmod with 1. Outputs <code>⟨ a | b/c ⟩</code></p>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyIiLCIiLCIx4biLIiwiIiwiMi43MSJd" rel="nofollow noreferrer">Try it Online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 34 bytes</h1>
<pre><code>phAcQ\.s[&quot; + (&quot;/sHKisHJ*TlH\//JK\)
</code></pre>
<p>Not that proud of this but that output format was getting to my head</p>
<p><a href="https://tio.run/##K6gsyfj/vyDDMTkwRq84WklBW0FDSb/Ywzuz2MNLKyTHI0Zf38s7RvP/fyVDPSOlf/kFJZn5ecX/dVMA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Lyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, <s>20</s> 19 bytes</h1>
<pre><code>I₌I-ƒJ`% + (%/%)`$%
</code></pre>
<p><a href="http://lyxal.pythonanywhere.com?flags=&amp;code=I%E2%82%8CI-%C6%92J%60%25%20%2B%20%28%25%2F%25%29%60%24%25&amp;inputs=420.240&amp;header=&amp;footer=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>It's convoluted because of the handling of the output format</p>
<h2>Explained (old)</h2>
<pre><code>:I₌₴-ƒ\/j`...`$%,
:I                # int(input)
  ₌₴-             # print(top, end=&quot;&quot;), input - int(input) [gets the fractional part] 
     ƒ            # Turn the decimal into a simplified fraction
      \/j         # Join that on &quot;/&quot;
         `...`    # The string &quot; + (%)&quot; -&gt; this will be used for formatting the output
              $%, # perform string formatting and output the fraction part
</code></pre>
</div>
<div id="pu4" class="pu"><h1> Haskell </h1>

<p>Isn't pretty, but whatever</p>

<pre><code>import Data.Ratio
main=let r '%'='/';r c=c in interact$(\(x,y)-&gt;show x++" + "++map r(show$approxRational y 1e-9)).properFraction.read
</code></pre>
</div>
<div id="pu5" class="pu"><h1>R, several lines</h1>
<p>How about the way they tought us at grammar school?</p>
<pre><code>f=function(s){
  gcd=function(a,b)if(!b)a else gcd(b,a%%b)
  a=strsplit(s,'\\.')[[1]]
  p=10^nchar(a[2])
  x=strtoi(a[2])
  d=gcd(x,p);
  cat(a[1],&quot; + (&quot;,x/d,&quot;/&quot;,p/d,&quot;)&quot;,sep=&quot;&quot;);
}
</code></pre>
<p>Vaguely: works for positive decimals with finite decimal fraction.</p>
<pre><code>&gt; f(&quot;23.872&quot;)
23 + (109/125)
</code></pre>
<p>Input must be a string matching &quot;[0-9]+\.[0-9]+&quot; regular expression.</p>
</div>
<div id="pu6" class="pu"><h1>GolfScript, 40</h1>

<pre><code>'.'/~'+'\.~.@,10\?.@{.@\%.}do;:d/\d/'/'@
</code></pre>

<p>Requires no line terminator in the input. Can probably be golfed further.</p>
</div>
<div id="pu7" class="pu"><h1>Ruby, 43</h1>
<pre><code>y=gets.to_r;puts&quot;#{y.to_i} + (#{y-y.to_i})&quot;
</code></pre>
<p>Pretty straightforward.</p>
</div>
<div id="pu8" class="pu"><h2>python 3, 84</h2>
<pre><code>from fractions import*
a,b=input().split(&quot;.&quot;)
print(&quot;%s + (%s)&quot;%(a,Fraction(&quot;.&quot;+b)))
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Perl 6 (53 bytes)</h1>

<p>Does the output in right, expected format. Would be way shorter if output in invalid format would be allowed. This gets a number, converts it to rational. <code>nude</code> method returns denominator and numerator (there are separate <code>denominator</code> and <code>numerator</code> methods, but they are crazily long.</p>

<p><code>[]</code> is a reduce operator which takes operator between square brackets, and in this case, I use it to shorten the code (so I wouldn't have to specify both array elements, because they are already in correct order (but if they wouldn't, there are <code>R</code> operators (like <code>R/</code>, <code>R%</code>, <code>Rdiv</code>, and <code>Rmod</code>) that reverse the order of arguments for operator)). <code>{}</code> in double quotes puts the result of code in string (like <code>#{}</code> in Ruby).</p>

<p><code>my \</code> is declaration of sigilless variable. In this case it doesn't save characters, but it doesn't waste them either, so why not use it. I could have used <code>my@</code>, and it would use identical number of characters.</p>

<pre><code>my \n=get.Rat.nude;say "{[div] n} + ({[%] n}/{n[1]})"
</code></pre>

<p>Sample output (just to show the correct format):</p>

<pre><code>~ $ perl6 -e 'my \n=get.Rat.nude;say "{[div] n} + ({[%] n}/{n[1]})"'
42.42
42 + (21/50)
</code></pre>

<p>If negative number support is needed, this would work (2 bytes more).</p>

<pre><code>~ $ perl6 -e 'my \n=get.Rat.nude;say "{[div] n} + ({[mod] n}/{n[1]})"'
-42.42
-42 + (-21/50)
</code></pre>
</div>
<div id="pu10" class="pu"><h2><a href="http://timtechsoftware.com/gtb" rel="nofollow">GTB</a>, 28</h2>

<pre><code>`A:floor(A)→B:A-B→A~B~A►Frac
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Mathematica 73</h1>
<p>No cigar this time. <code>Numerator</code>, <code>Denominator</code> and <code>Rationalize</code> are big words.</p>
<pre><code>f@x_:=(Row@{⌊#⌋,&quot;+&quot;,Numerator@#~Mod~(d=Denominator@#)/d})&amp;[Rationalize@x]
</code></pre>
<p>Example</p>
<pre><code>f[23.872]
</code></pre>
<p><img src="https://i.stack.imgur.com/Q6SYn.png" alt="mixed" /></p>
</div>
<div id="pu12" class="pu"><h2>Golf-Basic 84, 32 characters</h2>

<p>Executed from a TI-84 calculator</p>

<pre><code>i`A:floor(A)→B:A-B→A:d`Bd`A►Frac
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/17239/">17239</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




