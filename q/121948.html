<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::121948</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>062</td><td>AWK</td><td>251001T155600Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/283974#283974">xrs</a></td></tr>
<tr d-ix="1"><td>033</td><td>APL</td><td>220715T141506Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/249983#249983">Vadim Tu</a></td></tr>
<tr d-ix="2"><td>048</td><td>JavaScript REPL</td><td>171227T030208Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/151833#151833">l4m2</a></td></tr>
<tr d-ix="3"><td>050</td><td>JavaScript ES6</td><td>171227T025420Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/151829#151829">l4m2</a></td></tr>
<tr d-ix="4"><td>100</td><td>Clojure</td><td>170526T094533Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/122927#122927">clismiqu</a></td></tr>
<tr d-ix="5"><td>114</td><td>Clojure</td><td>170522T193157Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/122084#122084">NikoNyrh</a></td></tr>
<tr d-ix="6"><td>056</td><td>Haskell</td><td>170522T184543Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/122075#122075">nimi</a></td></tr>
<tr d-ix="7"><td>136</td><td>Java 8</td><td>170526T115049Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/122936#122936">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>023</td><td>Bash</td><td>170522T184221Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/122074#122074">marcosm</a></td></tr>
<tr d-ix="9"><td>087</td><td>Python 2</td><td>170521T210839Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121952#121952">Jonathan</a></td></tr>
<tr d-ix="10"><td>021</td><td>Aceto</td><td>170521T220006Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121960#121960">L3viatha</a></td></tr>
<tr d-ix="11"><td>083</td><td>Mathematica</td><td>170521T213955Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121956#121956">ZaMoC</a></td></tr>
<tr d-ix="12"><td>010</td><td>MATL</td><td>170521T211728Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121953#121953">Luis Men</a></td></tr>
<tr d-ix="13"><td>098</td><td>Python 3</td><td>170521T205805Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121950#121950">L3viatha</a></td></tr>
<tr d-ix="14"><td>062</td><td>JavaScript</td><td>170521T220000Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121959#121959">Arnauld</a></td></tr>
<tr d-ix="15"><td>017</td><td>Japt</td><td>170521T213230Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121955#121955">Luke</a></td></tr>
<tr d-ix="16"><td>039</td><td>Python 2</td><td>170521T212037Z</td><td><a href="https://codegolf.stackexchange.com/questions/121948/infinite-sequence-of-unique-random-integers/121954#121954">xnor</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/" rel="nofollow noreferrer">AWK</a>, 62 bytes</h1>
<pre><code>{for(;x=rand()*$1;printf!b[a=int(x)]++?a&quot;\n&quot;:X)gsub(/\./,X,x)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m704sTx7wYKlpSVpuhY37arT8os0rCtsixLzUjQ0tVQMrQuKMvNK0hSTohNtgQyNCs1YbW37RKWYPCWrCM304tIkDf0YPX2dCJ0KzVqIKVDDFqw0NDI2MTUzt7CECAAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>{for(;x=rand()  # infinite loop
*$1;            # seed from input
printf          # format print
!b[a=int(x)     # remove leading zeros
]++             # have we seen it before
?a&quot;\n&quot;:X)       # output
gsub(/\./,X,x)} # strips dot
</code></pre>
</div>
<div id="pu1" class="pu"><h1>APL, 33 bytes</h1>
<pre><code>∇P
S←⍬
→2/⍨S∊⍨X←⌊÷1-?0
S,←⎕←X
→2∇
</code></pre>
</div>
<div id="pu2" class="pu"><h1>JavaScript REPL, 48 bytes</h1>

<pre><code>for(o=[];;)o[n=1/Math.random()|0]||alert(o[n]=n)
</code></pre>
</div>
<div id="pu3" class="pu"><h1>JavaScript ES6, repeating call, 50 Bytes</h1>

<pre><code>c={0:9};f=_=&gt;c[~~_]|Math.random()&lt;.9?f(-~_):c[_]=_
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Clojure, 100 bytes</h1>

<pre><code>(fn[](let[a(atom[])](filter #(if-not(some #{%}@a)(swap! a conj %))(repeatedly #(bigint(/(rand)))))))
</code></pre>

<p>This function returns an infinite sequence of integers. To get the <code>n</code>th number of this series:</p>

<pre><code>(nth (fn[]...) n)
</code></pre>

<p>To get the first <code>n</code> terms of this series:</p>

<pre><code>(take n (fn[]...))
</code></pre>

<p><strong><em>EDIT:</strong> Golfed 11 bytes (Thanks @NikoNyrh!) and added 3 bytes (changed <code>int</code> to <code>bigint</code>, to improve accuracy).</em></p>
</div>
<div id="pu5" class="pu"><h2>Clojure, <s>112 (or 119)</s> 114 bytes</h2>

<p>Update, uses <code>1 / (rand)</code> to get an "infinite" range of <a href="https://clojuredocs.org/clojure.core/bigint" rel="nofollow noreferrer">bigints</a>:</p>

<pre><code>#(filter pos?(map first(reductions(fn[[v p]r](if(p r)[0 p][r(conj p r)]))[0#{}](for[i(range)](bigint(/(rand)))))))
</code></pre>

<p>Original:</p>

<pre><code>#(filter pos?(map first(reductions(fn[[v p]r](if(p r)[0 p][r(conj p r)]))[0 #{}](for[i(range)](rand-int 2e9)))))
</code></pre>

<p>I'm hoping to see an alternative approach. Anyway, this will generate integers between 1 and 2e9, Java's integers are signed to the "real" maximum is 2147483647, which is 7 bytes longer expression (<code>Integer/MAX_VALUE</code> is even longer). <code>0</code> is used as an indication of a duplicate values and are filtered from the output sequence.</p>
</div>
<div id="pu6" class="pu"><h2>Haskell, <s>60</s> <s>59</s> 56 bytes</h2>

<pre><code>((a:b)#h)(n:r)|n=a:((h++b)#[])r|q&lt;-a:h=(b#q)r
[1..]#[]
</code></pre>

<p>Takes the seed as an infinite list of <code>Bool</code>. </p>

<p>Usage example: <code>([1..]#[]) [True,False,False,True,True,False,True,True,False,True,False,True,True,False,False,False,False,False,False,True....]</code> -> <code>[1,4,3,5,2,7,8,6,15,...]</code>.</p>

<p><a href="https://tio.run/nexus/haskell#HYyxCoMwGIR3n@LADn@Qii24hGZx6V5HcYgkomgSjVkKvnuauh3ffXez2ZwPaL9H0Kb8SKuciUSSDyyfGFnu2WmF5ERTUSTW9cyf@@su@SRoyHfms1F0j7LsUxWNnC0ElMsArDrg0Fol4K/fA2SWNqi3tqhrBs7RNc6t/d/e/GwDbghy0XhWVYrjNY8/" rel="nofollow noreferrer" title="Haskell – TIO Nexus">Try it online!</a> </p>

<p>Start with the list <code>[1..]</code>. If the next element from the seed is <code>False</code>, skip the next element of the list. If it's a <code>True</code>, output the current element, remove it from the list and start from the beginning. <code>h</code> keeps track of the skipped elements and is prepended (-> <code>h++b</code>) to the list of available numbers in the <code>True</code> case.</p>
</div>
<div id="pu7" class="pu"><h1>Java 8, 136 bytes</h1>

<pre class="lang-java prettyprint-override"><code>import java.util.*;()-&gt;{Set s=new HashSet();for(int n;;s.add(n))System.out.print(!s.contains(n=new Random().nextInt(-1&gt;&gt;&gt;1))?n+&quot;;&quot;:&quot;&quot;);}
</code></pre>
<p><strong>Explanation:</strong></p>
<p><a href="https://tio.run/nexus/java-openjdk#PY@xTsNADIb3PIXJdAZ6UldODWs70IGMiMFcru1ViS/KOaVVlWcPbkEsln751@fPsevTIHCkE9lRYmsfXeFbyhneKPK1AIgsYdiRD7C9RYBTig14g07TVOjIQhI9bIFhBbPBRXWtg0BecfiGNeWDJq3v0mAUBuxcttQ0hhHrS5bQ2TSK7QddmodsfWLR29nwHfBO3KTOoOVwlo1WFsuqqpaIr/xUPpcvZYlumt1NpB@/WhX587l7dkoytSh7//EJhL8vsP33n@Yf" rel="nofollow noreferrer">Try it here.</a> (Wait 60 seconds for the TIO to time-out to see the result.)</p>
<pre class="lang-java prettyprint-override"><code>import java.util.*;     // Required import for the Set, HashSet, and Random

()-&gt;{                   // Method without parameters nor return-type
  Set s=new HashSet();  //  Set to keep track of numbers we've already outputted
 for(int n;;            //  Loop infinitely
     s.add(n))          //   And every time we output a random number, add it to the Set
   System.out.print(    //   Output:
    !s.contains(        //    If we haven't outputted it yet:
     n=new Random().nextInt(-1&gt;&gt;&gt;1))?n+&quot;;&quot;
                        //     A random number (range of int: 0 - 2³²)
    :                   //    Else:
     &quot;&quot;);               //     Output nothing
}                       // End of method
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash</a>, 23 bytes</h1>



<pre class="lang-bash prettyprint-override"><code>yes \ |nl|xargs shuf -e
</code></pre>

<p><a href="https://tio.run/nexus/bash#@1@ZWqwQo1CTl1NTkViUXqxQnFGapqCb@v//17x83eTE5IxUAA" rel="nofollow noreferrer" title="Bash – TIO Nexus">Try it online!</a></p>

<p><code>yes \</code> prints infinite spaces, <code>nl</code> numbers lines, <code>suff -e</code> shuffless lines without repetition.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>93</s> 87 bytes</h1>

<p>-3 bytes thanks to Uriel (move <code>r=1</code> to beginning of the loop to avoid initialisation)</p>



<pre class="lang-python prettyprint-override"><code>from random import*
a=[]
while 1:
 r=1
 while r in a or.5&lt;random():r+=1
 a+=[r];print r
</code></pre>

<p><strong><a href="https://tio.run/nexus/python2#JY4xDoJAFET7PcUkNirRgIkNul7CklB8cQkfYXczrPHk1ohaTSZ5bzKrq0sQ3OjkgUFHTWgDkagyID4Zw@Qm09t8bhlGUPx9CR1jYNoasVVtXp0ODkVpQFsY/CuhftkN3B/Pf2m9KZl9AclsxfoUqT6BM7RFfznk5e@DQb9A89uHXSNN5z4" rel="nofollow noreferrer">Try it online!</a></strong></p>

<p>Keeps adding one while the number is either unavailable or a coin flip comes up heads.<br>
Low numbers have much more probabilistic weight than high numbers.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/aceto/aceto" rel="nofollow noreferrer">Aceto</a>, <s>29</s> 21 bytes</h1>
<blockquote>
<p>Writing to STDOUT, with a consistent, unambiguous separator between integers (such as a newline), with output prior to termination of the program</p>
</blockquote>
<pre><code>p&lt;LL
 v`O
I?&lt;\
0MLCnO
</code></pre>
<ol>
<li>Push a zero, increment it and go in a random direction. Two of the directions lead back to the random direction field, one leads back to incrementation (so it is incremented a random amount of times).</li>
<li>When the fourth choice is made, we memorize and immediately load the value, then check whether it's contained in the stack already. If so, we jump to the origin and try again.</li>
<li>Otherwise, we load the value twice (once for printing, once for storage), print it and a newline and go back to the origin.</li>
</ol>
<p>Massively favours low numbers, but there is a small chance for it to print any number at any point.</p>
</div>
<div id="pu11" class="pu"><h2>Mathematica, 83 bytes</h2>
<pre><code>s=5;l={};t=1;While[t&lt;30,If[l~FreeQ~s,Print@s];l~AppendTo~s;s=RandomInteger@100;t++]
</code></pre>
<p>starting with 5</p>
<p><a href="https://tio.run/nexus/mathics#@19sa2qdY1tda11ia2gdnpGZkxpdYmNsoOOZFp1T51aUmhpYV6wTUJSZV@JQHGudU@dYUJCalxKSX1dsXWwblJiXkp/rmVeSmp5a5GBoYGBdoq0d@///17x83eTE5IxUAA" rel="nofollow noreferrer" title="Mathics – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 10 bytes</h1>
<pre><code>`x1r/XktGm
</code></pre>
<p><a href="https://tio.run/nexus/matl#@59QYVikH5Fd4p77/3@0sYKJgpmCoUHs17x83eTE5IxUAA" rel="nofollow noreferrer" title="MATL – TIO Nexus">Try it online!</a></p>
<h3>Explanation</h3>
<p>A candidate output, say <strong>n</strong>, is generated as <code>ceil(1/r)</code>, where <code>r</code> is uniformly distributed on the interval (0,1). This ensures that every positive integer has a positive probability of being chosen as <strong>n</strong> (assuming infinite precision for <code>r</code>).</p>
<p>If <strong>n</strong> coincides with any of the previous numbers (taken as input) the process is repeated.</p>
<pre><code>`       % Do...while
  x     %   Delete. This deletes the candidate number from the preceding iteration.
        %   In the first iteration it takes input implicitly and deletes it.
  1     %   Push 1
  r     %   Push random number uniformly distributed on (0,1)
  /     %   Divide
  Xk    %   Round up (ceil). This is the candidate output. It will only be valid
        %   if it's not present in the input
  t     %   Duplicate
  G     %   Push input: forbidden numbers
  m     %   Ismember. This will be used as loop condition
        % End (implicit). If condition is true, next iteration
        % Display (implicit)
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Python 3, <s>137</s> <s>127</s> <s>123</s> <s>138</s> <s>117</s> <s>99</s> 98 bytes</h1>

<blockquote>
  <p>A named or unnamed function which returns an infinite iterable (such as a Python generator)</p>
</blockquote>

<pre><code>from random import*
def f(x=[],y=1):
 while y in x or.5&lt;random():y+=1
 yield y;yield from f(x+[y])
</code></pre>

<ul>
<li>-10 bytes by putting the conditional in one line (Thanks, @Dennis)</li>
<li>-4 bytes by initializing <code>r</code> at the beginning of the loop</li>
<li>+15 bytes by remembering numbers can contain zeroes...</li>
<li>-21 bytes by renaming <code>randint</code>, and moving the condition in the head of the inner loop</li>
<li>-18 bytes by switching to a functional paradigm</li>
<li>-1 bytes by moving from <code>or ...&gt;.5</code> to <code>.5&lt;random()</code> (thanks, @JonathanAllan)</li>
</ul>
</div>
<div id="pu14" class="pu"><h2>JavaScript, 62 bytes</h2>

<p>A full program that picks a single random value in <strong>[0 .. 1]</strong> and expressed it as a <a href="https://en.wikipedia.org/wiki/Continued_fraction" rel="nofollow noreferrer">continued fraction</a>, omitting elements that have been encountered before. This would produce a really infinite sequence if the initial value had an infinite precision. In practice, we are limited to what can be expressed in IEEE-854 format.</p>

<pre class="lang-js prettyprint-override"><code>for(x=Math.random(),o=[];;)o[n=1/x|0,x=1/x-n,n]||alert(o[n]=n)
</code></pre>

<h3>Demo</h3>

<p>Here is a demo limited to 50 values and writing to the console instead.</p>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>for(x=Math.random(),o=[],i=0;i&lt;50;)o[n=1/x|0,x=1/x-n,n]||console.log(o[i++,n]=n)</code></pre>
</div>
</div>
</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 17 bytes</h1>

<pre><code>aA=(1/Mr)c)&lt;0?A:ß
</code></pre>

<p><a href="https://tio.run/nexus/japt#@5/oaKthqO9bpJmsaWNg72h1eP7//9GWOgrGOgpGOgqGsV/z8nWTE5MzUgE" rel="nofollow noreferrer" title="Japt – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 39 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda l,s:sum({1/s//1}-l)or f(l,s/2)
</code></pre>

<p><a href="https://tio.run/nexus/python2#JYwxDsMgEAR7XnElSHGIXVq6t0TEhgQJDovDleNnpyZYVLs7Gm11GEx8rQbCjWfeozxGzVqP5xBUyuBk43pS1cct5QLZ0JqiCMi2SCVcU57g6eJvK6eHmgUAY9fuPZoHQID97Bpb9lSAWgtfPOisP0rDYpaP/QM" rel="nofollow noreferrer" title="Python 2 – TIO Nexus">Try it online!</a></p>

<p>Takes a list <code>l</code> of previous outputs (as a set) and a seed <code>s</code> that's a random real from 0 to 1.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/121948/">121948</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




