<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::279564</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>053</td><td>Ruby</td><td>250514T112009Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279704#279704">G B</a></td></tr>
<tr d-ix="1"><td>041</td><td>R</td><td>250508T144725Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279607#279607">Robin Ry</a></td></tr>
<tr d-ix="2"><td>020</td><td>J</td><td>250514T080025Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279703#279703">Galen Iv</a></td></tr>
<tr d-ix="3"><td>061</td><td>JavaScript ES7</td><td>250507T122226Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279566#279566">Arnauld</a></td></tr>
<tr d-ix="4"><td>030</td><td>APLNARS</td><td>250514T050913Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279702#279702">RosLuP</a></td></tr>
<tr d-ix="5"><td>038</td><td>Octave</td><td>250509T211203Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279637#279637">Albert.L</a></td></tr>
<tr d-ix="6"><td>022</td><td>APLDyalog Unicode</td><td>250509T152351Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279628#279628">Mat_rdv</a></td></tr>
<tr d-ix="7"><td>025</td><td>q/kdb+</td><td>250509T133023Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279624#279624">mkst</a></td></tr>
<tr d-ix="8"><td>060</td><td>Python</td><td>250507T145027Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279575#279575">Albert.L</a></td></tr>
<tr d-ix="9"><td>022</td><td>Charcoal</td><td>250509T002838Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279616#279616">Neil</a></td></tr>
<tr d-ix="10"><td>013</td><td>Jelly</td><td>250507T123831Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279568#279568">Jonathan</a></td></tr>
<tr d-ix="11"><td>013</td><td>05AB1E</td><td>250507T131847Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279571#279571">Kevin Cr</a></td></tr>
<tr d-ix="12"><td>117</td><td>Python</td><td>250507T234556Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279593#279593">ALvl1Sli</a></td></tr>
<tr d-ix="13"><td>018</td><td>MATL</td><td>250507T220814Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279592#279592">Luis Men</a></td></tr>
<tr d-ix="14"><td>060</td><td>R</td><td>250507T190603Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279583#279583">pajonk</a></td></tr>
<tr d-ix="15"><td>067</td><td>APL+WIN</td><td>250507T121122Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279565#279565">Graham</a></td></tr>
<tr d-ix="16"><td>068</td><td>CASIO BASIC CASIO fx9750GIII</td><td>250507T122802Z</td><td><a href="https://codegolf.stackexchange.com/questions/279564/noise-cancelling-headphones/279567#279567">madeforl</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 53 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;l{l.map{|x|(5-x*5.0*~-l.size/(l.sum-x))**2&gt;1?-x:x}}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1y6nOkcvN7GguqaiRsNUt0LLVM9Aq043R684sypVXwNIl@bqVmhqamkZ2Rna61ZYVdTW/i9QSIuONtABw9hYLjDXUAcMYVwjHRBE4xrDFQNVGupYwLkGOpY6ZkBsqQNmWqJIGBqhyPwHAA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Ported from Arnauld's Javascript answer, using Luis Mendo's formula.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>46</s> <s>42</s> 41 bytes</h1>
<p>-4 bytes thanks to pajonk</p>
<pre class="lang-r prettyprint-override"><code>\(L,`+`=sum)L-2*L*(5*abs(L*+L^0-+L)&gt;+L-L)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3NWM0fHQStBNsi0tzNX10jbR8tDRMtRKTijV8tLR94gx0tX007bR9dH00oRqOpmkkaxjogKGmprKCrp1CNJQbywWSM9QBQ5gclAuRM9IBQbgchKuLImmMJmkMNRVohqGOBdxUMFfXAippoGOpYwbEljpAJphnCVcJ4umiScZCPLNgAYQGAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><s>14</s> 19 bytes shorter than the <a href="https://codegolf.stackexchange.com/a/279583/86301">previous R answer</a>. This is equivalent to the more readable</p>
<pre class="lang-r prettyprint-override"><code>\(L,n=length(L),S=sum(L))L*(-1)^(5*abs(L*n-S)&gt;S-L)
</code></pre>
<h3>How it works</h3>
<p>Element <span class="math-container">\$X_i\$</span> needs to be replaced by <span class="math-container">\$-X_i\$</span> if the following condition is met, with <span class="math-container">\$n\$</span> the length of the vector and <span class="math-container">\$S\$</span> the sum of <em>all</em> elements:</p>
<p><span class="math-container">$$
5\left|nX_i - S\right|&gt;S-X_i.
$$</span></p>
</div>
<div id="pu2" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 20 bytes</h1>
<pre><code>*_1+2*0.2&gt;1|@-]%+/%#
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/teINtY20DPSM7AxrHHRjVbX1VZX/a3IpcKUmZ@QraOhYpWmq6dkBNYChtYIhBForGIEhnGEMlDIEIQsgw0DBUsEMiC1BTDDPkus/AA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Essentially a port of @mkst <a href="https://codegolf.stackexchange.com/a/279624/75681">q/kdb+ solution</a></p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES7), 61 bytes</h1>
<p>This is using <a href="https://codegolf.stackexchange.com/a/279592/58563">Luis Mendo's formula</a>, which doesn't require an extra variable.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(v=&gt;(~-a.length*v/(eval(a.join`+`)-v)-1)**2&gt;.04?-v:v)
</code></pre>
<p><a href="https://tio.run/##fY7RCoIwFIbvewovN9um0wgNtAeJwGHTlLVJyi579aWLipy2n8E5fHw/p2Wa9eW96QYs1YWbKjMsyxm5sQ7oLAcPzIjgsh6uvg4A10wARlrVyGJbQKwhptD3o5yEuyPWBw1NqWSvBCdC1aACpxDZnCH0fl8QeB@4mUkU2SxLbziXIjRlRXpBvGbFf63YPXA8gKJk5UALceJaIUrRfvwpGke7pbbCWtOK53SxgkZux7fCoeYJ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 64 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(v=&gt;(q=(eval(a.join`+`)-v)/~-a.length)*.96/v+v/q&gt;2?-v:v)
</code></pre>
<p><a href="https://tio.run/##fY5dC4IwFIbv@xVebrkPP0A00H5IBA5TU8xpyrnsry9dVOS0vQzO4eF5ObUAMWT3qhtpKy@5KmIl4kSwm@gQxAnqY5SDaJBgtaza1E4xBcwfVLAmb8vxivcsCjjYwPvEO1I4AFaZbAfZ5KyRJSrQySE6Z4yt38e59YG7heQSnXXpDZeSR@ZsSC9Ityz/r@WbB04HuCTcOFBDGpqWQyISTD8i06i3SFdoa17pkq5WuJ7Z8a0wqHoC" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>Given the current value <span class="math-container">\$v\$</span> and the mean <span class="math-container">\$q\$</span> of all other values, the straightforward test is:</p>
<p><span class="math-container">$$|q-v|&gt;q/5$$</span></p>
<p>which can also be done as:</p>
<p><span class="math-container">$$(q-v)^2&gt;(q/5)^2$$</span></p>
<p>which gives:</p>
<p><span class="math-container">$$q^2+v^2-2qv&gt;q^2/25$$</span>
<span class="math-container">$$24/25\times q^2+v^2&gt;2qv$$</span></p>
<p>and for <span class="math-container">\$q\neq0, v\neq0\$</span>:</p>
<p><span class="math-container">$$24/25\times q/v+v/q&gt;2$$</span></p>
<p>Using IEEE 754 JS numbers, this test actually works for <span class="math-container">\$v=0,q\neq0\$</span> and <span class="math-container">\$v=0,q=0\$</span> as well.</p>
</div>
<div id="pu4" class="pu"><h1>APL(NARS), 30 chars</h1>
<pre><code>{⍵×¯1*0.2&lt;∣1-⍵÷(⍵-⍨+/⍵)÷¯1+≢⍵}
</code></pre>
<p>If I have an array <code>⍵</code> and one element of that array <code>y</code>, the mean without that element that we call <code>m</code>
will be in APL notation</p>
<pre><code>(y-⍨+/⍵)÷¯1+≢⍵ 
</code></pre>
<p>So the question it seems to me want in math notation</p>
<pre><code>m-0.2*m≤y≤m+0.2*m
     
</code></pre>
<p>or equivalentement <code>|y-m|≤0.2*m</code>
or because <code>m&gt;0</code> <code>|(y/m)-1|≤0.2</code> or <code>|1-(y/m)|≤0.2</code> or in APL notation</p>
<pre><code>0.2≥∣1-y÷(y-⍨+/⍵)÷¯1+≢⍵
</code></pre>
<p>So if a value has <code>0.2&lt;∣1-y÷(y-⍨+/⍵)÷¯1+≢⍵</code> I multiply that value for -1.
Test:</p>
<pre><code>  f←{⍵×¯1*0.2&lt;∣1-⍵÷(⍵-⍨+/⍵)÷¯1+≢⍵}
  f 0 0 0 0
0 0 0 0 
  f 1 1 1 1
1 1 1 1 
  f 2 2 2 1
2 2 2 ¯1 
  f 2 2 2 3
2 2 2 ¯3 
  f 11 11 8
11 11 ¯8 
  f 10 9 6 9 9 10 10 9 9
10 9 ¯6 9 9 10 10 9 9 
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 38 bytes</h1>

<pre class="lang-matlab prettyprint-override"><code>@(x)x-(abs(5*sum(x-x'))&gt;sum(x)-x)*2.*x
</code></pre>
<p><a href="https://tio.run/##y08uSSxL/Z9mq6en999Bo0KzQlcjMalYw1SruDRXo0K3Ql1T0w7M1NSt0NQy0tOq@J@mEW2gA4axmgqoQFUBLsUFVGaoA4bYlMGkQMqMdEAQqzKIlC6yOmM86owh1gINNtSxwGotWErXAqLOQMdSxwyILXWATDDPEqQJpA7E0UWXg2syNMLQBdeEIfcfAA" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
<p>Port of my Python+NumPy solution.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>22 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>⊢×¯1*(+/-⊢)&lt;5×∘|+/-≢×⊢
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=e9S16PD0Q@sNtTS09XUfdS3StDE9PP1Rx4waELcTKAcUAwA&amp;f=S1MwgECuNAUjMDSEs4yBLENDELIAsQwULBXMgNgSxATzLAE&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=train&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<h2>Explanation</h2>
<pre><code>                     ⊢   the values
                    ×    times
                   ≢     tally, the number of values
                  -      
                 /       reduce
                +/       the sum of the values
               |         absolute value
              ∘          preprocess with
             ×           times
            5×∘|         5 multiplied by absolute value of...
           &lt;             
     (+/-⊢)             the sum of values minus these values
     (+/-⊢)&lt;5×∘|+/-≢×⊢  the outlie condition
    *                    power                  
  ¯1                    -1                   
⊢×¯1*                   negate only those values that fails a condition...
⊢×¯1*(+/-⊢)&lt;5×∘|+/-≢×⊢ solution
</code></pre>
<p>The outlie condition is essentially the same as <a href="https://codegolf.stackexchange.com/a/279607">presented by Robin Ryder</a>:</p>
<p><span class="math-container">$$S - X_i &lt; 5\left|S - nX_i\right|$$</span></p>
</div>
<div id="pu7" class="pu"><h1>q/kdb+, 25 bytes</h1>
<p><strong>Solution:</strong></p>
<pre class="lang-none prettyprint-override"><code>{x*-1 1@.2&gt;abs 1-x%avg x}
</code></pre>
<p><strong>Tests:</strong></p>
<pre><code>f:{x*-1 1@.2&gt;abs 1-x%avg x}
f each (0 0 0 0; 1 1 1 1; 2 2 2 1; 2 2 2 3; 11 11 8; 10 9 6 9 9 10 10 9 9)
0 0 0 0
1 1 1 1
2 2 2 -1
2 2 2 -3
11 11 -8
10 9 -6 9 9 10 10 9 9
</code></pre>
<p><strong>Explanation:</strong></p>
<pre><code>{x*-1 1@.2&gt;abs 1-x%avg x} / the solution
{                       } / lambda taking implicit x
                   avg x  / calculate the mean
                 x%       / divide input by mean
               1-         / subtract from 1
           abs            / take the absolute value
        .2&gt;               / is less than 0.2
       @                  / index into
   -1 1                   / the list (-1 ; 1)
 x*                       / multiply x by this
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 60 bytes</h1>
<h3>-1 thanks to @tata.</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[[x,-x][5*abs(sum(l)-len(l)*x)&gt;sum(l)-x]for x in l]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5BCsIwEEX3PUVwlchEqqJYsd16iNhF1BYD06bUVuJZ3BRE7-RtTNqqKMhnJvPfDJ9c7sW5Oui8uabh5lZXKV88Viiz7V4SXAphgJtYzIZye6THOqPIOCa5fYaGRT0wcapLYojKCcZ9xtohdEgX9t5nS48o0GFykkhxVCYFyl1CBzwagBVjHilKlVdUQUoVa1sYatbFNY-7GEOrmPCIvI0nfGjV4Zfx_l1PwKnHneEfPv3iUxfjQwBzWwHYsXVBn-lm_rvqvvsE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 61 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[[-x,x][5*abs(sum(l)-len(l)*x)&lt;=sum(l)-x]for x in l]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5NCsIwEIX3PUVwlchEqqJYMW49ROwiaouBsSn9kXgWN4LonbyNSVsVBXlMMu-bzCPne36q9ia7XFOxvtVVymcPgeqw2SmCcym5BRvLSV9tSlrWB4qMY5K5q2_ZQnTExqkpiCU6Ixh3ISuP0COTu4WQzQOiwYjkqJDioEhyVNuE9viyB06MBSQvdFZRDSnVrDmEMKyNuzzucgiNYsKX5G0CGUKjFr9M8O_1CLw63Br-4eMvPvYxIUQwdRWBaxsXdZm-57-j9rtP" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 63 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[[-x,x][sum(4*l)+x&lt;=len(5*l)*x&lt;=sum(6*l)-x]for x in l]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5NCsIwEIX3PUVwlehE6l-xYnTpIWIXVVsMjE2pVeJZ3Aiid_I2Jm1VFOQx4b0vyWPO9_xUbnV2uaZieTuUKR8_5hjvVpuY4ERKbsBEcn_Y0WEbWcdMBSYZHVnftt7xwHpuolQXxBCVEYyamoVD6JDO7R-fTTyiQIvkGCPFbpHkGK8T2uKzFlgx5pG8UFlJFaRUseoQQrO67vK4yx5UigifkXfwpA-VavwK3r_XfXBqcB34hw---MDV-BBCYCcEa6sUNp3O89-ret0n" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Older <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 65 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[[-x,x][-~(n:=len(5*l))*x/6&lt;=sum(l)&lt;=~-n*x/4]for x in l]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY7NisIwFIX3fYrgKpGbsf6VaTEFVz5E7KKjLRO4JqXTSt34Im4E0XfybUzaOoMDckg458u9h5xuxaH6Nvp8ycX6Wlc5_7wvMd19bVOCkZS8gSaR_Eh1JDDTdD5ExobNKFiIn3pHkS3EkWsLZkluStIQpQkmfdHKIXTIFHbXZ5FHFBiR7VOk-FFmBaabjA54PAArxjxSlEpXVEFOFWsvIQzr6s73mxxDq4TwmPwGT_rQqsPP4L2bnoBTj7vA__j0hU9djQ8hBPaEYG2bwr7Tef7_qfvuAw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 48 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda l:l-2*l*(5*abs(sum(l-l[1&gt;0].T))&gt;sum(l)-l)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5NasMwEIX3PsWQ1YwZGSehJQ7Yp-jOyUJpbSoYWUKxCz5LN4GS3Cm3qf_a0kJ5aJj3zdNI7zfft6-uuXzU-eHatbXa3VPR9vSiQfaiNrHE-BDr0xnPnUVRUq6L9Jg8ERUTICW03At1cBaazvoejPUutKBD0H1UuwACpgHnqwZT2kdg2OVWe5wCXL1pQUlC5UU_V7hSxYoHEVEEPpimRcM1GmIca547SrQI0vLy5X4r1zzpCKqAbxOVKU-a8ZeJ_ktveNSCZ6N--PYX345rUs74cTgZD-3ksmXn2Ku_o_m7nw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 53 bytes</h3>
<h3>-1 thanks to @tata.</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:l-2*l*(abs(5*(l-l[:,1&gt;0]).sum(0))&gt;l.sum()-l)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dU5LasNADN37FCIryWiMk5ASG-yLuFlMWpsOaDzDxC74LN0ESnOn3Kb-taWF8pB47-n7dvND9-La63tTPH70XaOO94Noe37WILmoXSwx6vMFDzGKkirnbZmeKLn0FlOiUmZGSmgdDk1wFtre-gGM9S50oEPQQ9S4AAKmBefrdpzNIzDsCqs9zg1cv2pBSULtRT_VuFHlhkcQUQQ-mLZDww0aYpxyUThKtAjSevl6v1VbnnECVcK3iKqUZyz2l4j-697xhNVehPrx97_8_bQm5Ywfxsh4pLPK1p0TV39Ly7uf" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 54 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:2*l*(abs(5*(l-l[:,1&gt;0]).sum(0))&lt;=l.sum()-l)-l
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dU5basMwEPz3KZZ87ZqVcRIaalP7Im4-lNamgpUlFLvgs_QnUJo75Tb1qy0tlNGKmdHsat-ufuheXHt5b4rHj75r1P3tINqenjVIvoslRn06412MoqTKeVumR0rOvcWU6KGQmZKS8azdoQnOQttbP4Cx3oUOdAh6iBoXQMC04Hzdju15BIZdYbXHOcD1qxaUJNRe9FONG1VueAQRReCDaTs03KAhxukuCkeJFkGi5efL7VptecYRVAnfIqpSnrHYXyL6L73jCau9CPXj73_5-2lMyhkfxsp4pLPK1pkTV3-flnU_AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>These all assume that outliers are determined against the mean of all <em>other</em> numbers in the list.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 22 bytes</h1>
<pre><code>ＩＥθ⎇›×⁵↔⁻×ＬθιΣθ⁻Σθι±ιι
</code></pre>
<p><a href="https://tio.run/##LUw9C8IwEP0rGa9wgg4KwUkcXKwIdisdYjnaQJq2l0Tw18fTePCO98XrR8P9bFzOd7Y@wtmECLVZYEXVEHvDb7gwmUgMjZ0owB7V6RlmlyJBbX0Kf/9KfogjrBUqK3ikSbgcqtIqxjeUd6NBJsEWXVXHnNt2t0WNB4FGoT@luy5vXu4D" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Uses the same formula as @RobinRyder, but I didn't get around to writing my answer until now.</p>
<pre><code>  θ                     Input array
 Ｅ                      Map over elements
           θ            Input array
          Ｌ             Take the length
         ×              Multiplied by
            ι           Current element
       ↔⁻               Absolute difference with
              θ         Input array
             Σ          Take the sum
     ×                  Multiplied by
      ⁵                 Literal integer `5`
    ›                   Is greater than
                 θ      Input array
                Σ       Take the sum
               ⁻        Subtract
                  ι     Current element
   ⎇                    If true then
                    ι   Current element
                   ±    Negated
                     ι  Else current element
Ｉ                       Cast to string
                        Implicitly print
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 16 </s> 13 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>-3 taking inspiration from <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">Kevin Cruijssen</a>'s <a href="https://codegolf.stackexchange.com/a/279571/53748">05AB1E answer</a></p>
<pre><code>L×,ạS÷/&gt;.2N×o
</code></pre>
<p>A monadic Link that accepts a list of non-negative integers and yields a list of integers with (all) outliers negated.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/n8HSdh7sWBh/erm@nZ@R3eHr@////ow0NdQwNdCx1LGIB" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/9/n8HSdh7sWBh/erm@nZ@R3eHr@f53D7UcnPdw541HTmqxHDXMUbO0UHjXM1Yz8/z862kAHDGN1uBSiDXXAEMw20gFBZLYxRA1QgaGOBYRtoGOpYwbEljpAJphnCVcE4oGUxQIA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<pre><code>L×,ạS÷/&gt;.2N×o - Link: list of non-negative integers, V
L             - length of {V}
 ×            - multiply {that} by {V}
  ,           - pair {that} with {V}
    S         - sum {V}
   ạ          - {[V, V×Length(V)]} absolute difference {Sum(V)}
     ÷/       - reduce {that} by division
       &gt;.2    - greater than 0.2?
          N   - negate
           ×  - multiply {that} by {V}
            o - logical OR {that} with {V}
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 13 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>g*‚IOα`5*‹ÅÏ(
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/XetRwyxP/3MbE0yBrJ2HWw/3a/z/H21oqGNooGOpYxELAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeXhCS7/07UeNcyq9D@3McEUyNp5uPVwv8b/Wp3/0dGGOmAYqxNtoAOGQJaRDggawlnGQJahgY6ljhkQW@oAmWCeJUzYEIs40ExDHQsoCyRqERsLAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>
<p>With <span class="math-container">\$I\$</span> being the input-list and <span class="math-container">\$v\$</span> being each value within that list, I use the following formula check for which values <span class="math-container">\$v\$</span> need to be negated in the output:</p>
<p><span class="math-container">$$\left\vert v-\sum(I)\right\vert &lt; \left\vert len(I)\times v-\sum(I)\right\vert\times 5$$</span></p>

<pre class="lang-python prettyprint-override"><code>g             # Get the length of the (implicit) input-list
 *            # Multiply it to each value in the (implicit) input-list
  ‚           # Pair this list with the (implicit) input-list
   IO         # Push the sum of the input-list
     α        # Get its absolute difference with each value in the pair of lists
      `       # Pop and push both lists separated to the stack
       5*     # Multiply all values in the top one by 5
         ‹    # Then check if the values in the first list are smaller than
              # those in the second
          ÅÏ  # For every position this is truthy in the (implicit) input-list:
            ( #  Negate that value
              # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 117 Bytes (but more robust)</h1>
<p>==============================</p>
<pre class="lang-python prettyprint-override"><code>lambda l:(lambda a,y:[[-x,x][b != max(a) or b&lt;=0] for b,x in zip(a,y)])([5*abs(sum(l)-len(l)*x)-sum(l) for x in l],l)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY9NTsMwEIX3OcXQlV2NkdsKRCLcLYcwXjiQCEvOj9IEuVyFTSUEd-oNOAa24xZRCY1sv_d53lh-_-r340vXHj5q8fg5jTW7O05WN-WzBluQpDTuCymZQ6dkCVcCGu2IptANUN4LrqAOCh2YFt5MT3w_VZTIm6Uud2Q3NcRSZqvWH0tH2QxiKEasQkvT4w-B2kC73gc4LTIw2InqVVtir4eqt_qpIgu2XaAvSjPoB9OOxGBNDI2bEF0adzh-yxXGUsC2cDaZ5BhrxieT_de9xlAJz4b98s0fvgljOOZ461eOXkaXp5lBs8urlFitOT_zixTkCCw2BBXAaXmbq_nDPw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>So the test case I think people missed is: [10,9,1200,9,10,10,10,9,9]</p>
<p>Try the other code with that and you get all negative numbers. The solution I am posting builds off of Albert lang's solution but only checks the most significant outlier. I am 100% sure there are shorter ways to do this. Happy hunting :)</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, <s>19</s> 18 bytes</h1>
<pre><code>nqGsG/q/q|.2&gt;_EQG*
</code></pre>
<p><a href="https://tio.run/##y00syfn/P6/Qvdhdv1C/sEbPyC7eNdBd6///aEMDHUsdMyC21AEywTzLWAA" rel="noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8D@v0L3YXb9Qv7BGz8gu3jXQXeu/S1RFyP9oAx0wjOWKNtQBQyDLSAcEESxjkCxQylDHAsQy0LHUMQNiSx0gE8yzjAUA" rel="noreferrer">verify all test cases</a>.</p>
<h3>How it works</h3>
<p>An element <span class="math-container">\$x\$</span> of the input needs to be negated if and only if the following condition is satisfied, where <span class="math-container">\$n\$</span> is the size of the input and <span class="math-container">\$S\$</span> is the sum of the input:</p>
<p><span class="math-container">$$
\left| \frac{n-1}{S/x-1} - 1 \right| &gt; 0.2.
$$</span></p>
<pre><code>n    % Implicit input: number of elements
q    % Minus 1
G    % Push input again
s    % Sum
G    % Push input again
/    % Divide
q    % Minus 1
/    % Divide
q    % Minus 1
|    % Absolute value
.2   % Push 0.2
&gt;    % Greater than? Gives 1 if true, 0 if false
_    % Negate: 1 becomes -1
E    % Times 2: -1 becomes -2
Q    % Minus 1: 0,-2 become 1,-1
G    % Push input again
*    % Multiply. Implicit display
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 60 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(L)L*(-1)^sapply(seq(L),\(i,m=mean(L[-i]))abs(L[i]-m)&gt;.2*m)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3bWI0fDR9tDR0DTXjihMLCnIqNYpTC4FiOjEamTq5trmpiXkaPtG6mbGamolJxUBmZqxurqadnpFWribUjCNpGskaBjpgqKmprKBrpxAN5cZygeQMdcAQJgflQuSMdEAQLgfh6qJIGqNJGkNNBZphqGMBNxXChcoZ6FjqmAGxpQ6QCeZZwhWCeLpokrEQvyxYAKEB" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Iterating on indexes of the input vector.</p>
<hr />
<h3><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 61 bytes</h3>
<pre class="lang-r prettyprint-override"><code>\(L)Map(\(x,m=sum(L,-x)/sum(L|1,-1))x*(-1)^(abs(x-m)&gt;.2*m),L)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3bWM0fDR9Ews0YjQqdHJti0tzNXx0dCs09cGsGkMdXUNNzQotDSAVp5GYVKxRoZuraadnpJWrqeOjCTXkS2leTmZxiUaaRrKGgQ4YampqKivo2ilEQ_mxXEhqDHXAEK4GykdRY6QDggg1EL4uNkXG6IqMUW0DGm2oY4GwDcJHVWOgY6ljBsSWOkAmmGeJ0ADi6qLJxkL8vmABhAYA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Iterating on elements of the input vector. Returns a list.</p>
</div>
<div id="pu15" class="pu"><h1>APL+WIN, <s>32</s> 67 bytes</h1>
<p>Prompts for vector of integers. Compares each element to the mean of the remainder.</p>
<pre><code>v×(0=r)+r←¯1×.2&lt;|¯1+(,(n,1)↑r)÷(+/0 1↓r←(⍳n)⌽m←((2⍴n)⍴v))÷¯1+n←⍴v←⎕
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlwPWooz3tf9nh6RoGtkWa2kVAsUPrDQ9P1zOyqQEytDV0NPJ0DDUftU0s0jy8XUNb30DB8FHbZJA6jUe9m/M0H/XszQVxNIwe9W4Bcnu3lGkCVYL05gHFQXwQ1Tf1P9Amrv9pXAYKYMiVxmWoAIZAlpECCCJYxiBZoJShggWIZaBgqWAGxJYKQCaYZ8kFAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu16" class="pu"><h1>CASIO BASIC (CASIO fx-9750GIII), 68 bytes</h1>
<p>thanks arnauld for pointing out a mistake</p>
<pre><code>?→List1
For 1→I To Dim List1
List1[I→E
Abs (Sum Abs List1-E)÷(Dim List1-1
.2Ans&lt;Abs (Ans-E⇒-E→List1[I
Next
List1
</code></pre>
<p><a href="https://basic.crevola.org/?src=N4RgDANAnBIGzUeRUC+gkwgDIEsDOAXEAKADEB7AJwAIR0BJKgFTKoBFsBbKnA4nwgNp10AUSIBBAEa4qACgDKAVy64ApgEdZUmfxACA0gF0I+2BHZddsAJQBaEdYDvsi9zyFbxAHQAmcQDtcAB5tOQDce0Alwnssdz06IgA5VQAPfCJdIA" rel="nofollow noreferrer">try it online* at basic.crevola.org</a></p>
<p>* due to limitations in the interpreter, the code is different, but it should work the same. You have to type the list into the code in the interpreter.</p>
<p>cool!!</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/279564/">279564</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




