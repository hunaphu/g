<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::211805</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>087</td><td>Wolfram Language Mathematica</td><td>200930T072510Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211825#211825">att</a></td></tr>
<tr d-ix="1"><td>135</td><td>Awk</td><td>200930T113804Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211838#211838">Noodle9</a></td></tr>
<tr d-ix="2"><td>146</td><td>PHP</td><td>201009T125008Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/212219#212219">Neil</a></td></tr>
<tr d-ix="3"><td>024</td><td>Japt</td><td>200930T155203Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211867#211867">Shaggy</a></td></tr>
<tr d-ix="4"><td>076</td><td>JavaScript</td><td>200929T211735Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211809#211809">Shaggy</a></td></tr>
<tr d-ix="5"><td>nan</td><td>SNOBOL4 CSNOBOL4</td><td>200930T160001Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211868#211868">Giuseppe</a></td></tr>
<tr d-ix="6"><td>229</td><td>Factor</td><td>201001T183714Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211916#211916">Galen Iv</a></td></tr>
<tr d-ix="7"><td>023</td><td>05AB1E</td><td>201001T133458Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211909#211909">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>151</td><td>R</td><td>200930T190749Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211874#211874">Giuseppe</a></td></tr>
<tr d-ix="9"><td>166</td><td>R</td><td>200930T092642Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211830#211830">Dominic </a></td></tr>
<tr d-ix="10"><td>086</td><td>Wolfram Language Mathematica</td><td>201001T130246Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211908#211908">LegionMa</a></td></tr>
<tr d-ix="11"><td>057</td><td>Perl 5</td><td>200929T220317Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211814#211814">Chris</a></td></tr>
<tr d-ix="12"><td>304</td><td>C gcc</td><td>200930T053621Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211822#211822">ErikF</a></td></tr>
<tr d-ix="13"><td>042</td><td>Charcoal</td><td>200930T191812Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211875#211875">Neil</a></td></tr>
<tr d-ix="14"><td>079</td><td>JavaScript</td><td>200929T224120Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211817#211817">Neil</a></td></tr>
<tr d-ix="15"><td>162</td><td>Lua</td><td>200930T181529Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211873#211873">val - di</a></td></tr>
<tr d-ix="16"><td>051</td><td>05AB1E</td><td>200929T221343Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211816#211816">SomoKRoc</a></td></tr>
<tr d-ix="17"><td>195</td><td>R</td><td>200930T134837Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211856#211856">Cong Che</a></td></tr>
<tr d-ix="18"><td>045</td><td>Retina 0.8.2</td><td>200930T152341Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211866#211866">Neil</a></td></tr>
<tr d-ix="19"><td>nan</td><td>Ruby</td><td>200929T221122Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211815#211815">Jonah</a></td></tr>
<tr d-ix="20"><td>221</td><td>Red</td><td>200930T113441Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211837#211837">Galen Iv</a></td></tr>
<tr d-ix="21"><td>028</td><td>Jelly</td><td>200929T215442Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211813#211813">Jonathan</a></td></tr>
<tr d-ix="22"><td>086</td><td>JavaScript ES6</td><td>200929T213217Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211811#211811">Arnauld</a></td></tr>
<tr d-ix="23"><td>094</td><td>Python 3</td><td>200930T013832Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211820#211820">Sisyphus</a></td></tr>
<tr d-ix="24"><td>116</td><td>Python 3.8 prerelease</td><td>200929T205928Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211808#211808">hyper-ne</a></td></tr>
<tr d-ix="25"><td>106</td><td>Julia 1.0</td><td>200929T214649Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211812#211812">Moritz S</a></td></tr>
<tr d-ix="26"><td>161</td><td>JavaScript</td><td>200929T204327Z</td><td><a href="https://codegolf.stackexchange.com/questions/211805/compactify-the-query-string/211807#211807">lucasret</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>90</s> <s>88</s> 87 bytes</h1>
<pre><code>StringRiffle[List@@@Normal@Merge[Rule@@@S[#~S~&quot;&amp;&quot;,&quot;=&quot;,2],D],&quot;&amp;&quot;,&quot;=&quot;,&quot;,&quot;]&amp;
S=StringSplit
</code></pre>
<p><a href="https://tio.run/##NYwxC8IwFIT3/owU3hQH6/wkg6MWacaQ4bUkbSBtJUYQxPz1GC1ycNx9HDdTnMxM0Q2ULWYZg1vGzlnrjTq7exRCtGuYyYuLCaNR3cObwqSqk0wMGGfIeKP5SfN/K9JQSdy@5M27mK8lRlXvjlbUGpIcaEmvitl1xT18HXpPE9IvH6CngM8N9VAW2LDqnT8" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>-2 thanks to LegionMammal978</p>
<pre><code>S=StringSplit
Rule@@@S[#~S~&quot;&amp;&quot;,&quot;=&quot;,2]         Convert to a list of Rules
Merge[ % ,D]                    Combine rules into an Association, with values unchanged
Normal@ %                       Convert Association back into a list of Rules,
List@@@ %                       and turn Rules into Lists
StringRiffle[ % ,&quot;&amp;&quot;,&quot;=&quot;,&quot;,&quot;]   Concatenate, using &quot;&amp;&quot;, &quot;=&quot;, and &quot;,&quot; as separators
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">Awk</a>, <sup><s>144</s> <span class="math-container">\$\cdots\$</span><s>138</s></sup> 135 bytes</h1>
<pre><code>BEGIN{RS=&quot;&amp;&quot;}{a[$1][j=i[$1]++]=$2;j||(n[m++]=$1)}END{for(l in n){k=n[l];o=k&quot;=&quot;;for(j in a[k])o=o (j&gt;0?&quot;,&quot;:&quot;&quot;)a[k][j];printf z o;z=&quot;&amp;&quot;}}
</code></pre>
<p><em>Added 6 bytes to fix a bug</em><br />
<em>Added 4 bytes to fix a bug kindly pointed out and solved by <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">Dominic van Essen</a>!!!</em><br />
<em>Saved 6 bytes thanks to <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">Dominic van Essen</a>!!!</em><br />
<em>Saved 3 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</em></p>
<p><a href="https://tio.run/##JU27CsIwFP2VECQ0VMHWzXAVxCouHXQMGdKh2KTmllpQ@vh1o6nLecPRL@v9ITtf8uF6A8roNGi5SJQ0UAWOYwWLVJhxjJx8zC7hU5YfhxLbqCaVI44PFpyslUCwFKgIjQmNllZxBCSR2a33dEm3lPIQSqNE01auK0lPUPTz8eR9iQgJC8iKWt9Bz3rDCt3C@x8V7LeA9INNV6F7@tUJvg" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 146 bytes</h1>
<pre class="lang-php prettyprint-override"><code>&lt;?=parse_str(str_replace('=','_[]=',$argv[1]),$a)??join('&amp;',array_map(function($b,$c){return rtrim($b,'_').'='.join(',',$c);},array_keys($a),$a));
</code></pre>
<p><a href="https://tio.run/##LYzNCoMwEIRfpQfJDwTB9miDDyISNhKrrSZhjaVS@uxpUnuYnWGY/fzoY7w20gOuRq0BWZJC42foDaOSCqraLlkBeHu2VcdT4k1zd5NllFABiLCrBTwbNtuHyVlWaFH0/I0mbGhPGHBackcV5WUilsevoHlVf/6Eh9lXltAZz@sY4@CcrEi@RM8wSvjlC9GA8nVUmqSFPH8B" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a> Explanation: <code>parse_str</code> wasn't designed to handle repeated values, but you can persuade it to by naming each value with a trailing <code>[]</code>. It also wasn't designed to handle empty names, but since I'm appending <code>[]</code> anyway I can also add a <code>_</code> to satisfy that case. Having parsed the query string it then remains to join everything back together.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>29</s> <s>28</s> <s>27</s> <s>26</s> 24 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>q&amp; móÈk¶
ü@bøXÎÃ®ÕvÎqÃq&amp;
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=cSYgbfPIa6UK/EBi%2bFjOw67Vds5xw3Em&amp;input=ImZvbz0xJmZvbz0mYmxhaD1hJmZvbz0zJmJhcj14JmJsYWg9YiY9MSY9MiI" rel="nofollow noreferrer">Try it</a></p>
<p>Saved 2 bytes thanks to some inspiration from <a href="https://codegolf.stackexchange.com/a/211909/58974">Kevin</a>.</p>
<p>(Oh, if only Japt had a method just for grouping, rather than also sorting, this could be <a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=cSYgbfPIa6UK/M6u1XbOccNxJg&amp;input=ImZvbz0xJmZvbz0mYmxhaD1hJmZvbz0zJmJhcj14JmJsYWg9YiY9MSY9MiI" rel="nofollow noreferrer">19 bytes</a>.)</p>
<h2>Explnataion</h2>
<pre><code>q&amp; móÈk¥\nü@bøXÎÃ®ÕvÎqÃq&amp;     :Implicit input of string U
q&amp;                            :Split on &quot;&amp;&quot;
   m                          :Map
    ó                         :  Partition after each character that returns falsey (i.e., an empty string)
     È                        :  When passed through the following function
      k                       :    Remove all characters that appear in
       ¥                      :    Literal &quot;==&quot;
        \n                    :Reassign to U
          ü                   :Group &amp; sort by
           @                  :Passing each X through the following function
            b                 :  First index in U
             ø                :  That contains
              XÎ              :    First element of X
                Ã             :End grouping
                 ®            :Map each Z
                  Õ           :  Transpose
                   v          :  Map first element to
                    Î         :    Get first element
                     q        :  Join resulting array
                      Ã       :End map
                       q&amp;     :Join with &quot;&amp;&quot;
</code></pre>
<p>Or, to provide a step-by-step walkthrough:</p>
<h3>Input</h3>
<pre><code>&quot;foo=1&amp;foo=&amp;blah=a&amp;foo=3&amp;bar=x&amp;blah=b&amp;=1&amp;=2&quot;
</code></pre>
<h3>Split</h3>
<pre><code>[&quot;foo=1&quot;,&quot;foo=&quot;,&quot;blah=a&quot;,&quot;foo=3&quot;,&quot;bar=x&quot;,&quot;blah=b&quot;,&quot;=1&quot;,&quot;=2&quot;]
</code></pre>
<h3>Map &amp; Partition</h3>
<pre><code>[[&quot;foo=&quot;,&quot;1&quot;],[&quot;foo=&quot;],[&quot;blah=&quot;,&quot;a&quot;],[&quot;foo=&quot;,&quot;3&quot;],[&quot;bar=&quot;,&quot;x&quot;],[&quot;blah=&quot;,&quot;b&quot;],[&quot;=&quot;,&quot;1&quot;],[&quot;=&quot;,&quot;2&quot;]]
</code></pre>
<h3>Group &amp; sort</h3>
<pre><code>[[[&quot;foo=&quot;,&quot;1&quot;],[&quot;foo=&quot;],[&quot;foo=&quot;,&quot;3&quot;]],[[&quot;blah=&quot;,&quot;a&quot;],[&quot;blah=&quot;,&quot;b&quot;]],[[&quot;bar=&quot;,&quot;x&quot;]],[[&quot;=&quot;,&quot;1&quot;],[&quot;=&quot;,&quot;2&quot;]]]
</code></pre>
<h3>Map and ...</h3>
<p><strong>Transpose</strong></p>
<pre><code>[[[&quot;foo=&quot;,&quot;foo=&quot;,&quot;foo=&quot;],[&quot;1&quot;,null,&quot;3&quot;]],[[&quot;blah=&quot;,&quot;blah=&quot;],[&quot;a&quot;,&quot;b&quot;]],[[&quot;bar=&quot;],[&quot;x&quot;]],[[&quot;=&quot;,&quot;=&quot;],[&quot;1&quot;,&quot;2&quot;]]]
</code></pre>
<p><strong>Map first element to its first element</strong></p>
<pre><code>[[&quot;foo=&quot;,[&quot;1&quot;,null,&quot;3&quot;]],[&quot;blah=&quot;,[&quot;a&quot;,&quot;b&quot;]],[&quot;bar=&quot;,[&quot;x&quot;]],[&quot;=&quot;,[&quot;1&quot;,&quot;2&quot;]]]
</code></pre>
<p><strong>Join</strong></p>
<pre><code>[&quot;foo=1,,3&quot;,&quot;blah=a,b&quot;,&quot;bar=x&quot;,&quot;=1,2&quot;]
</code></pre>
<h3>Join</h3>
<pre><code>&quot;foo=1,,3&amp;blah=a,b&amp;bar=x&amp;=1,2&quot;
</code></pre>
</div>
<div id="pu4" class="pu"><h1>JavaScript, <s>106</s> <s>104</s> 76 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/211866/58974">Neil's Retina solution</a>, posted with permission.</p>

<pre class="lang-javascript prettyprint-override"><code>f=q=&gt;q==(q=q.replace(/(?&lt;=^|&amp;)((\w*=)[^&amp;]*)(.*?)&amp;\2(\w*)/,`$1,$4$3`))?q:f(q)
</code></pre>
<p><a href="https://tio.run/##JYpBDoIwEAD/QprNboMQwJNx5SEiodRWNA2lYNSDf6@il8lkMjf1UIuer9N9M/qzidFy4ENgxsAhm83klDaYY73n9g2E2Dwl07GFkyTMZE3QlGujPO1EkYqtqDqiOuwsBoraj4t3JnP@ghYT6z0XsBJ6pwZWP6@gVzO//qmH78FlQhQ/" rel="nofollow noreferrer">Try it online!</a></p>
<h2>Original</h2>
<p>A little bit of drunk golfing that I came back to work on sober but in the process spotted Arnauld's solution and realised I was on the path to something almost identical so I left this as-was.</p>
<pre class="lang-javascript prettyprint-override"><code>q=&gt;Object.keys(o={},q.split`&amp;`.map(p=&gt;o[[k,v]=p.split`=`,k]=[...o[k]||[],v])).map(x=&gt;x+`=`+o[x]).join`&amp;`
</code></pre>
<p><a href="https://tio.run/##LYzRDoIgGIXfxQsG09iq699X6AEYm2BYCvmjOEfLnp3Iujk7O9@3M6hVhXbu/XIY8WpSB2mC@qIH0y7cmmegCK93NfHgXb80pOEP5amHGoWw1SrB/wk0lZUgOOcorNw2ITNlbNcj1LHMRokiSsYH7Mf8lFocAzrDHd5oR4sOEY7km0Q7dQe19zPRaob4mzTJBpwKxtIH" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="http://www.snobol4.org/csnobol4/" rel="nofollow noreferrer">SNOBOL4 (CSNOBOL4)</a>, <S>243</S> <S>221</S> 212 bytes</h1>
<pre><code>&#9;Q =INPUT
&#9;T =TABLE()
N&#9;Q (ARB '=') . L ARB . V ('&amp;' | RPOS(0)) REM . Q&#9;:F(O)
&#9;T&lt;L&gt; =T&lt;L&gt; ',' V &#9;:(N)
O&#9;R =CONVERT(T,'ARRAY')
I&#9;X =X + 1
&#9;R&lt;X,2&gt; ',' REM . V &#9;:F(P)
&#9;O =O '&amp;' R&lt;X,1&gt; V&#9;:(I)
P&#9;O '&amp;' REM . OUTPUT
END
</code></pre>
<p><a href="https://tio.run/##LY@9asNAEITru6eY6n6IMJaSSmgNsi2DQL6TL2ehlFIRUpgI7MZF3l25k9wMu8PMt@zjdxqn28c8swuoNu3Vc@ZBvtw3ldLcBFuVbg9JUmODBnHZoIOSQuIPrrWfaqs1XHUO/oXlJ2V1YBTNLmCiykSGPMuV0dwyBzpY01XOK5/I0rnyS2pesx7U4w0pZ67ok2ytrdBYPqk2UC3IIh6OmXSHLlBrzVv2cpe4vfr4RmWO8/w9TZSKqGK8DT80LPO7GIc7PVdrFCFB2T8" rel="nofollow noreferrer" title="SNOBOL4 (CSNOBOL4) – Try It Online">Try it online!</a></p>
<p><code>TABLE</code> in SNOBOL is weird. It's perfectly fine accepting a <code>PATTERN</code> like <code>ARB</code> as a key, but not the empty string <code>''</code>. However, using <code>&lt;label&gt;=</code> as the label instead of <code>&lt;label&gt;</code> neatly solves this problem.</p>
<p>Explanation for a previous iteration:</p>
<pre><code>&#9;E =RPOS(0)&#9;&#9;&#9;&#9;&#9;;* alias for end of string&#32;
&#9;A =ARB&#9;&#9;&#9;&#9;&#9;&#9;;* alias for ARBitrary match (as short as possible)
&#9;Q =INPUT&#9;&#9;&#9;&#9;&#9;;* read input
&#9;T =TABLE()&#9;&#9;&#9;&#9;&#9;;* create a TABLE (a dictionary)
N&#9;Q A . L '=' A . V ('&amp;' | E) REM . Q&#9;:F(O)&#9;;* in regex land, this is something like
&#9;;* '(.*=)(.*)(&amp;|$)' where you save \1 and \2 as L and V, respectively. If there's no match, goto O
&#9;T&lt;L&gt; =T&lt;L&gt; V ','&#9;:(N)&#9;&#9;;* update the values list, then goto N
O&#9;R =CONVERT(T,'ARRAY')&#9;&#9;&#9;&#9;;* convert T to a 2D array of [Label,Value]
I&#9;X =X + 1&#9;&#9;&#9;&#9;&#9;;* increment array index
&#9;R&lt;X,2&gt; A . V ',' E&#9;:F(P)&#9;&#9;&#9;;* remove the trailing ',' from the value list. If X is out of bounds, goto P
&#9;O =O R&lt;X,1&gt; V '&amp;'&#9;:(I)&#9;&#9;&#9;;* Append L and V to O with an '=' and '&amp;', then goto I
P&#9;O A . OUTPUT '&amp;' E&#9;&#9;&#9;&#9;;* Print everything except for the trailing '&amp;'
END
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a>, 229 bytes</h1>
<pre><code>: c ( s -- s s ) 1 &lt;hashtable&gt; swap &quot;&amp;&quot;split [ &quot;=&quot;split ] map
[ [ dup [ last ] dip first pick push-at ] each ]
[ [ first ] map dup union ] bi dup [ [ over at &quot;,&quot;join ] map ] dip
[ &quot;=&quot;append ] map swap zip [ concat ] map &quot;&amp;&quot;join ;
</code></pre>
<p><a href="https://tio.run/##RVCxTsMwEN3zFScPEUgEqbClhIUBdemCmKIOF8dpTFP78DlA@PlwcQMMfjq/e@/5yR3q6MP8@rLbP5eAzF4z9Mh9xGYwDCcTnBmAzftonBaCTRSgwcZo3REomBgnCtZF2Ga7fQlP/kwSarupiL0pxBemgqMojnMJGq6AoSgEGK5hAw9/jz0CfyKBylWKhxpUtY4HOCNltVDtSIID8kK2lqCzQWay@gQ0cl/gsjCoezgkw2WfApJ5dNY7uTd2zarBf5gA4lM36s1bt4pTfJZKIJFx7cqnkt92sWrvNP6GS@/k3s6q877a5AvmzYB9hWm@zxsM1deFanJRVHdKPuQW2uApSy5RJK2c/9X8Aw" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>It's long but I'm somewhat content with it :)</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 23 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>'&amp;¡'=δ¡.¡н}εø€Ù}…,=&amp;vyý
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fXe3QQnXbc1sOLdQ7tPDC3tpzWw/veNS05vDM2kcNy3Rs1coqD@/9/z8tP9/WUA1EqiXlJGbYJoLZxmpJiUW2FRChJDWgClsjAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9TpuSZV1BaYqWgoGRfqcOl5F9aAuYCef/V1Q4tVLc9t@XQQr1DCy/srT239fCOR01rDs@sfdSwTMdWrazy8N7/tTqHttn/T8vPtzVUA5FqSTmJGbaJYLaxWlJikW0FRChJDajC1ogLodQIpgiiA6IKLA/UBpYDYgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>'&amp;¡                     '# Split the (implicit) input-string on &quot;&amp;&quot;
     δ                   # For each inner string:
   '= ¡                 '#  Split it on &quot;=&quot;
       .¡ }              # Group all pairs by:
         н               #  Their first value
           ε             # Map over each group of pairs:
            ø            #  Zip/transpose, swapping rows/columns
             €           #  For both inner lists:
              Ù          #   Uniquify it
               }…,=&amp;     # After the map: push string &quot;,=&amp;&quot;
                    v    # Pop and loop over each character `y`:
                     yý  #  Join the inner-most list of strings with `y` as delimiter
                         # (after the loop, the result is output implicitly)
</code></pre>
<p><a href="https://tio.run/##TZGxTsMwFEX3fsVThqRIhQrYkKyOqBJiARY2J3Wah1zb2E5LhkqIv2DswsSIEEtVqdkR39AfCc@JQFks@/nec69s7XiKommiqTKlv4BoxPafk0F0YyR60AqSOAnTJN5v@jeCZwWgUsKC8xbVvNWyTsu@P/7Ul1aXBnwhwHC0DtIqHNBCTicPSy5LETwn@83Pdt157tGMveXKGe0EDN2KGxMSrF65caZluVDuCHTelZiHhIA4vLzXXx3hTuFjiXnVrymR8gxt@obgee08V1ob0EsShLZZwS3PvKDKFJSMWJwAVzN40Kh61OOFJmqLJln3Eg5KF@r6gnvgDmZC4gIJFTIHh@c3gi2r62hKI@6R3q3ewTCpd8kRKSZVvWXrttEt9ZCc0PivRKpTevqpALbClbL9s1HT5Fqz0ziscSp5wXi7P49TbtlTN0pjUrCzXw" rel="nofollow noreferrer">Try it online with a step-by-step output.</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>162</s> <s>157</s> 151 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(s,S=substring)paste0(z&lt;-unique(k&lt;-S(x&lt;-el(strsplit(s,&quot;&amp;&quot;)),1,y&lt;-regexpr('=',x))),sapply(split(S(x,y+1),k),paste,collapse=',')[z],collapse='&amp;')
</code></pre>
<p><a href="https://tio.run/##TYzLCsMgFER/JWThg16habf6FVmWLjRoKhVjfYDJz6c22XQzDIczE3fTcdbtpvgp28WTBKNIRaUcrZ9pkCnrK9k4K95@iiZvzkZSOdOONCUFZ3Ob9KinFAZYOYt61jVEggWGShtNMgS3klNtW1gvA4U3heMbpsU5GZJuOqaP7fkHEKa7IdgsixjQL5Fy8iXk0e9IySjqiRRqhrg1/ws" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p><em>-6 bytes thanks to Dominic van Essen</em></p>
<p>A nice single line function. Ungolfed:</p>
<pre class="lang-r prettyprint-override"><code>function(s,S=substr){
pairs &lt;- el(strsplit(s,"&amp;"))&#9;&#9;&#9;&#9;&#9;# split on '&amp;' getting list of pairs
loc &lt;- regexpr('=',pairs)&#9;&#9;&#9;&#9;&#9;# find location of each '=' in each pair&#32;
keys &lt;- substr(pairs,1,loc)&#9;&#9;&#9;&#9;&#9;# get the key, including the '='
values &lt;- substr(pairs,loc + 1,nchar(pairs))&#9;&#9;&#9;# get the values (everything after '=')
unq_keys &lt;- unique(keys)&#9;&#9;&#9;&#9;&#9;# uniquify the keys. This retains the order.
split_vals &lt;- split(values,keys)&#9;&#9;&#9;&#9;# group the values into sublists by which key they are associated with
collapsed_values &lt;- sapply(split_vals,paste,collapse=',')&#9;# join each subgroup of values by ','
collapsed_values &lt;- collapsed_values[unq_keys]&#9;&#9;&#9;# and reorder them to match the order of the keys
paste0(unq_keys,collapsed_values,collapse='&amp;')&#9;&#9;&#9;# concatenate keys and values and join by '&amp;'
}
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>174</s> 166 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(s,S=strsplit,A=sapply,P=paste,e=A(S(P(el(S(s,'&amp;')),'=',sep=''),'='),c),n=unique(m&lt;-e[1,]))P(n,A(n,function(x)P(e[2,m==x],collapse=',')),sep='=',collapse='&amp;')
</code></pre>
<p><a href="https://tio.run/##TY5NCoNADIVvMz@QLrTbZuENBJfiYhwiFcaZqVHQ09tooe0iyccjeS/z4dOUnV/GYcdjWKNQioahQV5mzmFcoEJ2OYcdasyOFwLCyjSmNhRkMGilrQWNGpgyan2xBW8h4hrH10pmetyoLaCztjYRKqlv1CYStSVMiFsHPoXgMpOYnaaXofBPlqy/l40eUsJCnV31wT3RXXxXvZtx@0i9kg0s5fAN" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>For some inexplicable reason I thought that this challenge wouldn't suffer from <a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>'s awfully-verbose string handling.<br />
This didn't turn out to be the case, at least based on my attempt so far...</p>
<p>Commented before golfing:</p>
<pre class="lang-r prettyprint-override"><code>compactify=
function(s,                         # s = string to compactify
S=strsplit,                         # S = alias to strsplit() function
A=sapply,                           # A = alias to sapply() function
P=paste,                            # P = alias to paste() function
a=el(                               # a = the first element of ...
  S(s,'&amp;'))                         #  ...s split on '&amp;'
b=S(a,,'=')                         # b = each element of a, split on '='
                                    # Now, unfortunately if there's nothing after the '=',
                                    # the strsplit() function fails to add an empty string ''
                                    # so we need to do this ourselves:
e=A(b,function(x)c(x,'')            # e = for each element of b, add a '' ...  
                        [1:2])      #  ...and then take the first two elements
                                    # This gives us a 2-row matrix, with the names in row 1,
                                    # and the values in row 2
n=unique(m&lt;-e[1,]))                 # n = unique names, m = all names of name-value pairs
m=A(n,function(x)                   # m = for each element of n...
      P(e[2,m==x],collapse=','))    #  ...paste together the values for this name, using ',' as separator
P(n,m,sep='=',collapse='&amp;')         # Finally, paste together the pairs of elements in m, using '=' as separator...
                                    #  ...and collapse them all into one string using '&amp;' as separator
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 86 bytes</h1>
<pre><code>StringRiffle[Last@Reap[Sow@@@StringExtract[#,&quot;&amp;&quot;-&gt;;;,&quot;=&quot;-&gt;{2,1}],_,List],&quot;&amp;&quot;,&quot;=&quot;,&quot;,&quot;]&amp;
</code></pre>
<p><a href="https://tio.run/##JYs9C4MwEIb/Skkhg1wH7SgpWdwcio4hlDOYGlAjelBB/O1pVI774H2eG5C6dkByBoMVoabZjd/KWdu3qsSFZNXipGr/k1JesFhpRkPqDoyzxyvPgYm4twzSXcMHSreQPtiRQyzNQ21wVO/4TTKxMilM57XcmPVepPyYvOmxE3jeT97gLNYrang0RMbgdtqRnE5stufhDw" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a> Pure function, takes a string as input and returns another string as output. This is inspired by and very similar to <a href="https://codegolf.stackexchange.com/a/211825">att's answer</a>, but it uses an algorithm similar to the one in the blog post (here utilizing <code>Sow</code>/<code>Reap</code>). Here's an example of how the subexpressions evaluate on an input of <code>&quot;foo=1&amp;bar=a&amp;foo=&quot;</code>:</p>
<pre><code>StringExtract[#,&quot;&amp;&quot;-&gt;;;,&quot;=&quot;-&gt;{2,1}] == {{&quot;1&quot;, &quot;foo&quot;}, {&quot;a&quot;, &quot;bar&quot;}, {&quot;&quot;, &quot;foo&quot;}}
Sow@@@...                           == {&quot;1&quot;, &quot;a&quot;, &quot;&quot;}; {&quot;1&quot;, &quot;&quot;} sown w/ tag &quot;foo&quot;; {&quot;a&quot;} sown w/ tag &quot;bar&quot;
Reap[...,_,List]                    == {{&quot;1&quot;, &quot;a&quot;, &quot;&quot;}, {{&quot;foo&quot;, {&quot;1&quot;, &quot;&quot;}}, {&quot;bar&quot;, {&quot;a&quot;}}}}
Last@...                            == {{&quot;foo&quot;, {&quot;1&quot;, &quot;&quot;}}, {&quot;bar&quot;, {&quot;a&quot;}}}
StringRiffle[...,&quot;&amp;&quot;,&quot;=&quot;,&quot;,&quot;]       == &quot;foo=1,&amp;bar=a&quot;
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, <code>-pF\&amp;</code> flags, <s>73</s> 57 bytes</h1>
<p>Uses <code>-pF\&amp;</code> to loop over inputs and autosplit on <code>&amp;</code>.</p>
<p>Unordered results, in parallel competition.</p>

<pre class="lang-perl prettyprint-override"><code>/=/,$z{$`}.=$z{$`}?&quot;,$'&quot;:&quot;$`=$'&quot;for@F;$_=join'&amp;',values%z
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/1/fVl9HpapaJaFWzxZC2yvpqKgrWSmpJNgC6bT8Igc3a5V426z8zDx1NXWdssSc0tRi1ar//9Py820N1UCkWlJOYoZtIphtrJaUWGRbARFKUgOqsDX6l19QkpmfV/xft8AtRg0A" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Uses a hash <code>%z</code> to keep track of values for individual names, and then prints them all out at the end. -16 bytes thanks to NahuelFouilleul.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>319</s> 304 bytes</h1>
<p>Thanks to ceilingcat for the suggestions.</p>
<p>This function scans each tokenized (name,value) pair and adds a list entry for each new name encountered, then appends a list entry for each value. After constructing the lists, it then iterates through each list and prints the values. To save space, I flattened the structures into arrays of <code>void *</code>.</p>

<pre class="lang-c prettyprint-override"><code>f(s,t,v,i)char*s,*t;{void*d[3]={t=0},**f,**w;for(;t=strtok(t?0:s,&quot;&amp;&quot;);*w=calloc(8,2),w[1]=v){t[i=strcspn(t,&quot;=&quot;)]=0;v=t-~i;for(f=&amp;d;strcmp(f[1]?:t,t);f=*f);for(w=f[2]=f[1]?f[2]:(f[1]=t,*f=calloc(8,5))+24;w[1];w=*w);}for(f=&amp;d;i=*f&amp;&amp;printf(&quot;&amp;%s=&quot;+!!s,f[1]);f=*f)for(w=f[2];s=*w;w=s)i=!printf(&quot;,%s&quot;+i,w[1]);}
</code></pre>
<p><a href="https://tio.run/##VVDtbsIgFP3fp0AWCSAufmzJIrv6IMYflYqS1bbpxXaJcY@@DtiH2Q/I4dzzEa6ZHo0ZBstRedUpJ8wpbyUq6fW1q10hi@1yB1cPs5uS0obTa1u3XHtA3/r6jfvNbIWKMiq07MHkZVkb/qIWQvXb@Q46cfVbF8UGm4p7RYGKHcx0B3764VKYBVboqDg33AbTZuWVF9qCtCIJerDbxQ7SLKJVkoFX0t4bn4WYLJ50bNU9yF7o21@4C1GMNa2rvOWUjRHoZDRCFWN@iu49GoM7RKBwMPr1qDHSiUt/CsHDg6tMeSkO5BV94erH0zr7R5VuH7ksmMk5dxWPyxTkmhESN0wk6izgtEqCJq9CxfiMVBGGYj3TxLaHA0fxbQnCgHVCzcUjpzS9btltsHUNcxZvti/zE@QJL9k@b@H9m9qzoIBFFgaRnX8aW@ZHHKb9Fw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Non-golfed version of original submission:</p>

<pre class="lang-c prettyprint-override"><code>struct list {
  struct list *next;
  char *name;
  struct list *value;
};

void f(char *s) {
  char *tok=NULL, *value;
  struct list d={}, *e, *v;
  int i;

  for(; tok=strtok(tok?NULL:s, &quot;&amp;&quot;); ) {
    tok[i=strcspn(tok, &quot;=&quot;)]=0;
    value=tok+i+1;
    for(e=&amp;d; e-&gt;name &amp;&amp; strcmp(e-&gt;name, tok); e=e-&gt;next);
    if(!e-&gt;name) {
      e-&gt;next=calloc(sizeof(struct list), 2);
      e-&gt;name=tok;
      e-&gt;value=e-&gt;next+1;
    }
    for(v=e-&gt;value; v-&gt;name; v=v-&gt;next);
    v-&gt;next=calloc(sizeof(struct list), 1);
    v-&gt;name=value;
  }
  for(e=&amp;d; e-&gt;next; e=e-&gt;next, s=0) {
    printf(&quot;&amp;%s=&quot;+!!s, e-&gt;name);
    for(v=e-&gt;value, i=1; v-&gt;next; v=v-&gt;next, i=0)
      printf(&quot;,%s&quot;+i, v-&gt;name);
  }
}
</code></pre>
<p><a href="https://tio.run/##jVLBjtsgEL37KyZUQdCwVby9lZL@wKq3nqoeCMYbVMeOjGOtuvK3pzPBpN5oDz3Yhvcebx7jcQ/Pzl0@hNY158rD1zhUoft02BVLqA/t8z1WNWGP2AXZsxugCXGA1wJguf/Y@pdBI@gOtsedPXp9Lxltc0Z00kUxdqGCWiRxlFe7tBm63@b7j6cnddO/danM64ScJ5640A4Q0BGg7nqhgc6jHj8Cn29k9SUqYJxJDakQkOhnIJmLp5Z0KDBM/jJbfeWvlQ3im7ApE0Tu3vBKg3/Y0fWAcwrmjicxI4p8sYo3BGA/ZDoaarGaJTkAwCwxzjZN50QMf3xXi8VNpYLH2QByTYq0gFLM2SkHnW5xR5M1GsZkgAszvgk3/keOcqGlFLcfMxX3jaEp@NcABdFs851POFtDLRhfR8M2qxX@ldwV/U5mBcGUOudbBCdiK@cuZFO1jmwTVI4oU7rpQuNxtKEVNHHLOYuLmYnOtuixPkamgEe522qoe@9FlDk8tmROeToPUTB2q1B3nSk5vfm@sQdjr@vPfG9785KgPUeFeSyQILT8Cw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 42 bytes</h1>
<pre><code>≔Ｅ⪪Ｓ&amp;⪪ι=θＷ⁻Ｅθ§κ⁰υ⊞υ§ι⁰⪫Ｅυ⁺⁺ι=⪫ＥΦθ¬⌕λι⊟λ,¦&amp;
</code></pre>
<p><a href="https://tio.run/##RY7NCsIwEITvPkXIIWwggj/HkoMXQaFS8AlSrXZxSWqbaN8@Jq3oZdjJzObbS2v6izMU424Y8G6hNB2cO0IPB9sFf/Y92jtIxbjgSecIk9VcJv@UxeLdIjUMSrRhmPafiu38wV6bER6KrXIvSMmqMLQQ/hlOWbGoEsLD0eFMT42K0k@TfEmK/eI9km/6zDg5n5y9AimGMlMq1wHlgSv@PVkWMd6c02uRVdRkWm2meStq0@txfqpFauhNXL7oAw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔Ｅ⪪Ｓ&amp;⪪ι=θ
</code></pre>
<p>Split the input on <code>&amp;</code>s and split each token on <code>=</code>s.</p>
<pre><code>Ｗ⁻Ｅθ§κ⁰υ⊞υ§ι⁰
</code></pre>
<p>Create a list of unique keys in order of their first appearance.</p>
<pre><code>⪫Ｅυ⁺⁺ι=⪫ＥΦθ¬⌕λι⊟λ,¦&amp;
</code></pre>
<p>For each key, extract and join the values with <code>,</code>, concatenate with the key and separator, and join the overall result with <code>&amp;</code>.</p>
</div>
<div id="pu14" class="pu"><h2>JavaScript, 79 bytes</h2>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
s=&gt;(s=new URLSearchParams(s)).forEach((v,k)=&gt;s.set(k,s.getAll(k)))||unescape(s)</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input oninput=o.textContent=f(this.value)&gt;&lt;pre id=o&gt;</code></pre>
</div>
</div>
</p>
<p>If I/O could be actual query strings according to the WHATWG spec, rather than invalid strings that looks like query strings but aren't correctly URLencoded, then 7 bytes could be saved by stringifying the result instead of unescaping it.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.lua.org/" rel="nofollow noreferrer">Lua</a>, 162 bytes</h1>

<pre class="lang-lua prettyprint-override"><code>l,t={},{}(...):gsub('(%w-)=(%w-)',load&quot;k,v=...o=t[k]l[#l+1]=not o and k or _ t[k]=o and o..','..v or v&quot;)for i=1,#l do io.write(i&gt;1 and'&amp;'or'',l[i],'=',t[l[i]])end
</code></pre>
<p><a href="https://tio.run/##JY1RCoMwEESvEizNJjQN2P4VthcRKZFoGwwupFEL4tlToz8zw8yD8aNJyauIy6qWVWit5eP9HRsB4jxfJe4KypOxRa8m3ADCWPW1r07@UtY4UGTEzGBZzyiwF8sjHg1pDQq0nvIyFbLbzGGpTp5ZYo70HFxshXuWGQcOFGD7qlytAEHFKsdatoNNKXVEWPKsvPHmg2bPd96YgL@javhG4O0P" rel="nofollow noreferrer" title="Lua – Try It Online">Try it online!</a></p>
<p>This is a long one, huh. It could have been made much shorter if not for ordering requiment.</p>
<p>Explanation:</p>
<pre class="lang-lua prettyprint-override"><code>l,t={},{} -- list (by first inclusion), table (keys to string)
-- (ab)use string replacement function to callback over matches in input string
(...):gsub(
    -- Match key-value pairs
    '(%w-)=(%w-)',
    -- For each pair, run callback (braces are replaced for multiline)
    load[[
        k,v=... -- Assign key, value
        o=t[k] -- Look for already stored string if any
        l[#l+1]=not o and k or _ -- If key is new, store it in list
        t[k]=o and o..','..v or v -- Append to string if it is not new, store it if it is
    ]]
)
-- For every record in list
for i=1,#l do
    -- Write with no newlines
    io.write(
        i&gt;1 and'&amp;'or'', -- Output &amp; before all values but first
        l[i],'=',t[l[i]] -- Print key-value pair
    )
end
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>62</s> 51 bytes</h1>
<p>(-11 from @kevin)</p>
<pre><code>'&amp;¡'=δ¡D€нÙÐV_UsvYyнk©Xsèyθ',««Xs®ǝU}Xε¦¨}Yζí'=ý'&amp;ý
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fXe3QQnXbc1sOLXR51LTmwt7DMw9PCIsPLS6LrLywN/vQyojiwysqz@1Q1zm0@tDqiOJD647PDa2NOLf10LJDK2ojz207vFbd9vBedbXDe///T8vPtzVUA5FqSTmJGbaJYLaxWlJikW0FRChJDajC1ggA" rel="nofollow noreferrer">Try it online!</a>
<br>
<br>
<br></p>
<p>My 62 approach:</p>
<pre><code>'&amp;¡ε'=¡}D€нÙ©DgÅ0Usvy¬®skDVXsèyθ',««XsYǝU}Xε¦¨}®ζεć'=s««˜}˜'&amp;ý
</code></pre>
<p>Explanation:</p>
<pre><code>'&amp;¡ε'=¡}D€нÙ©DgÅ0Usvy¬®skDVXsèyθ',««XsYǝU}Xε¦¨}®ζεć'=s««˜}˜'&amp;ý
'&amp;¡                                                              split by &amp;
   ε'=¡}                                                         foreach: split by =
        D                                                        duplicate
         €н                                                      foreach: push header (get the keys list)
           Ù                                                     uniquify
            ©                                                    save in register c
             Dg                                                  suplicate and get the length of that list of keys
               Å0                                                create a list of 0's with the length above
                 U                                               save in variable X
                  svy                    }                       for each set of key-value
                     ¬®sk                                        find the index of that key in the keys list
                         DV                                      save the index in variable y
                           Xsè                                   get the current value of the element of X at index Y (in X we are keeping the concatenation of the values for key i)
                              yθ                                 extract the tail of the element in this iteration (a value to concatenate)
                                ',««                             concatenate with , in between
                                    XsYǝU                        update X with the new value of the element representing the key
                                          Xε¦¨}                  remove tail and head from each element of X (removing the trailing , and leading 0)
                                               ®                 push back the list of keys
                                                ζ                zip (list of keys and list of merged values)
                                                 εć'=s««˜}       foreach element in the zipped list, join with = in between such that the result is &quot;key=values&quot;
                                                          ˜      flat
                                                           '&amp;ý   join with &amp;
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fXe3QwnNb1W0PLax1edS05sLewzMPrXRJP9xqEFpcVnlozaF1xdkuYRHFh1dUntuhrnNo9aHVEcWRx@eG1kac23po2aEVtYfWndt2buuRdnXbYpDs6Tm1p@eoqx3e@/9/Wn6@raEaiFRLyknMsE0Es43VkhKLbCsgQklqQBW2RgA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 195 bytes</h1>

<pre class="lang-r prettyprint-override"><code>{Z=pryr::f
`/`=Z(a,b,el(regmatches(a,gregexpr(b,a))))
`-`=Z(a,b,paste(a,collapse=b))
Z(S,{L=S/'\\w*='
L=factor(L,unique(L))
U=tapply(S/'=\\w*',L,Z(a,trimws(a,,'=')-','))
paste0(names(U),U)-'&amp;'})}
</code></pre>
<p><a href="https://tio.run/##jVLJTsMwEL3nKyyDYhtcynKr8JEDUiQk2lxKQHUip7GUDcdVE1X99jJ2WrYDwgd7ljdv3oxsDmco1z1aPD4ha3S17VC@qTOrmzoYfXHyEe052hY6K5BAGcVpYwvMES5Vbt1r9LqwmHmMVV0rMwVA/IISm5ikfsUs2AUIzshxP0GVtFlxJc2a@hDz2WroNqnLnvpSozjqGYKwNzE0AyWtMiXwL57jh7Gw22qgG6k4cqog7dloKzurril@w9/VAdUl6PXF7vSg3Q/xu@5nybmb0WHdAv6AfvIeS/4hBWgZC/ZBkDUVhK3OB3HYLUVrBjOb5cFquhJLKnnKVQm7WPsFqg4ia/BU3xqacskcyWpygvqOYGVNWcq2UyKF9JLO@S4S8ylJku2FIEEkcmjYGBrxTa3fN4pGAIuFlW1bDhSAwiEJj7ijHf8GGJwIwiaEE0AfZ6tlBZpixmNIhGTP9oeveSjJm0bchO4O01IWQnr7LkylEf0YSkNAiFvCDh8" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 45 bytes</h1>
<pre><code>+1`(?&lt;=^|&amp;)((\w*=)[^&amp;]*)(.*?)&amp;\2(\w*)
$1,$4$3
</code></pre>
<p><a href="https://tio.run/##K0otycxL/P9f2zBBw97GNq5GTVNDI6Zcy1YzOk4tVktTQ0/LXlMtxggkpsmlYqijYqJi/P9/Wn6@raEaiFRLyknMsE0Es43VkhKLbCsgQklqQBW2RgA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Explanation: Repeatedly matches the first duplicate key and its first duplicate and joins the value to that of the original key.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <sup>88</sup> <sup>80</sup> <sup>76</sup> 64 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;s{s.scan(/(\w*=)(\w*)/).group_by(&amp;:shift).map{|k,v|k+v*?,}*?&amp;}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1664ulivODkxT0NfI6Zcy1YTRGrqa@qlF@WXFsQnVWqoWRVnZKaVaOrlJhZU12TrlNVka5dp2evUatmr1f4vKC0pVkiLVk/Lz7c1VAORakk5iRm2iWC2sVpSYpFtBUQoSQ2owtZIPfY/AA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p><em>-8 bytes thanks to ovs for pointing I could assign a lambda to a variable</em></p>
<p><em>-12 bytes thanks to Dingus!</em></p>
</div>
<div id="pu20" class="pu"><h1><a href="http://www.red-lang.org" rel="nofollow noreferrer">Red</a>, 221 bytes</h1>
<pre><code>func[s][m: copy #()s: split s&quot;&amp;&quot;forall s[s/1: split s/1&quot;=&quot;append s/1/1&quot;=&quot;put m s/1/1
copy&quot;&quot;]foreach v s[m/(v/1): append m/(v/1) rejoin[v/2&quot;,&quot;]]t: copy&quot;&quot;foreach k keys-of
m[take/last m/:k repend t[k m/:k&quot;&amp;&quot;]]take/last t t]
</code></pre>
<p><a href="https://tio.run/##PY7BisMgEIbveYphCtLCFkn3JvgSvYoHkyjNaqKoDdunz06SbhmQ@Yb5fifbYb3bQenGCVjdc@5V0WoS0Mf0gtP5UgSUFMYKBRm6mE0IUFTh7WfOW5RoUrLzsMGO6VlhOqjZkhA1udb0D1hIn/h54e1FwFt7M2T7E8dZLfyGX6h1Pc5A/Hc9ePsq1@iaSVXjLQ@m0EdceFL3pKr8znQs@Z8VKr2mPM4VHFBclC3bXtYF85Bm779ZZ7L8PUYdow15w/UP" rel="nofollow noreferrer" title="Red – Try It Online">Try it online!</a></p>
<p>This is awfully long and I'll try to golf it at least a bit. Too bad <a href="http://www.red-lang.org" rel="nofollow noreferrer">Red</a> doesn't have a handy <code>join</code> function...</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 28 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>
<p>-2 Thanks to Zgarb!</p>
<pre><code>ṣ”&amp;ṣ€”=Ṗ€ĠṢịƲµZQ€j€”,j”=)j”&amp;
</code></pre>
<p>A monadic Link accepting and yielding a list of characters.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hzsWPGuaqgaimNUCW7cOd04CsIwse7lz0cHf3sU2HtkYFAgWyINI6WSA1miBS7f///2n5@baGaiBSLSknMcM2Ecw2VktKLLKtgAglqQFV2BoBAA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>ṣ”&amp;ṣ€”=Ṗ€ĠṢịƲµZQ€j€”,j”=)j”&amp; - Link: list of characters, S
ṣ”&amp;                          - split at '&amp;'s
   ṣ€”=                      - split each at '='s
                               call that A
            Ʋ                - last four links as a monad - f(A):
       Ṗ€                    -   all but last of each
         Ġ                   -   group indices by their values
          Ṣ                  -   sort (since Ġ orders by the values, not the indices)
           ị                 -   index into (A) (vectorises)
             µ          )    - for each:
              Z              -   transpose
               Q€            -   deduplicate each
                 j€”,        -   join each with ','s
                     j”=     -   join with '='s
                         j”&amp; - join with '&amp;'s
</code></pre>
</div>
<div id="pu22" class="pu"><h1>JavaScript (ES6), <s> 103 99 87 </s> 86 bytes</h1>
<p><em>Saved 1 byte thanks to @MatthewJensen</em></p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;Object.values(o=/(\w*=)(\w*)/g,s.replace(o,(s,k,v)=&gt;o[k]=o[k]?o[k]+[,v]:s)).join`&amp;`
</code></pre>
<p><a href="https://tio.run/##JcpRDoIwEEXR3ZSO1hL1z2RwCS4ASZjWgkLDEIrV3VerPyc3L2@gSMEuj3ndTXxzqcMUsLqYwdlVR/JPFyRjKa@vDUIWyl4FvbjZk3WSlQxqVBGw4npsMHPObGsVm1MA0AM/pla0yfIU2DvtuZedLDpm3IusMJ7uSL8@CkMLvv@TEd8HHgqA9AE" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>s =&gt;                  // s = query string
  Object.values(      // get the values of ...
    o =               //   ... the object of this regular expression, which is
      /(\w*=)(\w*)/g, //   re-used to store the keys and values of the query
    s.replace(        //   match each key with the '=' sign and the corresponding
      o,              //   value, using the regular expression defined above
      (s, k, v) =&gt;    //   for each matched string s, key k and value v:
        o[k] =        //     update o[k]:
          o[k] ?      //       if it's already defined:
            o[k] +    //         get the current value
            [, v]     //         append a comma, followed by v
          :           //       else:
            s         //         set it to the entire matched string
                      //         (key, '=', first value)
    )                 //   end of replace()
  ).join`&amp;`           // end of Object.values(); join with '&amp;'
</code></pre>
</div>
<div id="pu23" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 94 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:'&amp;'.join(k+'='+&quot;,&quot;.join(v)for k,v in parse_qs(s,1).items())
from urllib.parse import*
</code></pre>
<p><a href="https://tio.run/##JYrLCsMgFAX3/QrJwkcjQppdwT8pFKWR2KjXXG1ov962yWY4c5j8qTOksTl9a8FE@zCkXBll6gk@8aVnmvWd7A7dhAMki9yITyQbLNN9LbzIQShfp1i4ECeHEMkLQ/BW7QnxMQPWc8voU@WOMwegB/ontcHM2ux7pNagfh@Xpb9CX5gQ7Qs" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>A few things:</p>
<ul>
<li>This only works because Python 3.6+ maintains dictionary order based upon time of insertion. We would love to use Python 2 for a shorter import (<code>urlparse</code> vs <code>urllib.parse</code>) but dictionaries are not ordered properly.</li>
<li>As much as I love f-strings, <code>k+'='+&quot;,&quot;.join(v)</code> is shorter than <code>f'{k}={&quot;,&quot;.join(v)}'</code>.</li>
<li>The double <code>.join</code> feels like golf smell, but I can't find a shorter way.</li>
</ul>
<hr />
<h3><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 95 Bytes</h3>
<pre class="lang-python prettyprint-override"><code>from urllib.parse import*
d=parse_qs(input(),1)
print('&amp;'.join(k+'='+','.join(d[k])for k in d))
</code></pre>
<p><a href="https://tio.run/##LY3NCsIwEITvfYqc8mNLofa8TyIiCbF0TZqN2xT06WOtXob5PgYmv8tMaax1YlrExjGi67Pl9S5wycTl1Hg4@PZcNaa8FW26wTSZMRWtpOofhEmHVoFqVfdHfwlXMxGLIDAJb8x@QASD/KZ00c5gjz5KZxleP@XkvoBz/QA" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu24" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 116 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:(a:=[k.split(&quot;=&quot;)for k in s.split(&quot;&amp;&quot;)])and&quot;&amp;&quot;.join(b+&quot;=&quot;+&quot;,&quot;.join(d for c,d in a if c==b)for b in dict(a))
</code></pre>
<p><a href="https://tio.run/##NYzBCsIwEER/ZckhJLQUtAelsF@iHjYNwbU1CUkE/fqaFL0MM29nNn7KPfjxHNPmAOG6rfQ0liBPiia8LEOOKxclUGgXEizAHvIfSqFvmrytZngE9sp0tdiJ/hcttM3c27YiYAczotkfmYYsz0WR1ltM7Ityin18FaUrcSHgQTaVJ6TdjNJQwnfNRtYbHr8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>-46 bytes thanks to ovs</p>
<p>-1 byte thanks to Jonathan Allan (in Py 3.8 PR, with walrus)</p>
</div>
<div id="pu25" class="pu"><h1><a href="http://julialang.org/" rel="noreferrer">Julia 1.0</a>, 106 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>f(a,z=split.(split(a,'&amp;'),'='),u=first.(z))=join((i*'='*join(last.(z)[u.==i],',') for i in unique(u)),&quot;&amp;&quot;)
</code></pre>
<p><a href="https://tio.run/##JYrBCsMgEER/RTysu0ECac/7JaUHhUo3iKYmQsjPG5tcZob3Zq5R3LS3FtDZg9clyjbiVR0YMGQN96gcpKxdHUQ8Z0mIMnQzXDu6W73qyCxva6whFXJRoiSpmuRXP1iJrAZNbSmSNgyoQ848wT/BR/dld@0neFd4v5GH/uCHJmon" rel="noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
</div>
<div id="pu26" class="pu"><h1>JavaScript, <s>263</s> <s>201</s> <s>196</s> <s>194</s> <s>190</s> <s>189</s> <s>188</s> <s>173</s> 161 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>q=&gt;{w={};q.split`&amp;`.map(x=&gt;{y=x.split`=`;if(!w[y[0]])w[y[0]]=[];w[y[0]].push(y[1])});z=`${Object.entries(w).map(a=&gt;a=[a[0]+'='+a[1].join`,`]).join`&amp;`}`;return z}
</code></pre>
<p><a href="https://tio.run/##LYxbDoIwEEW3ookpbdTGx49JM27BBTRNOpAqJUixrQIS1o6o/Nw5OZl7C3xhyLyt4/Z1GnMYH3DuG@gH8eChLm3URPM71rSdfAftLEELe6XLRnZypxSbL0glZuT1M@S0k3vFBibeoFf9JS1MFrmporcm0Ib9dhHOCBKnzjqBZI1TgxfOVnqjFfsT0YMW3sSnrxbvYcxcFVxpeOluNKfJ1TnYk2@StMQc8MdHkqKH9q9SMn3AIWFs/AA" rel="noreferrer">Try it online</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/211805/">211805</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




