<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::32568</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>053</td><td>Perl 5 pl</td><td>241121T211222Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/276783#276783">Xcali</a></td></tr>
<tr d-ix="1"><td>088</td><td>JavaScript Node.js</td><td>241121T025112Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/276769#276769">l4m2</a></td></tr>
<tr d-ix="2"><td>046</td><td>CJam</td><td>140702T163739Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32839#32839">Dennis</a></td></tr>
<tr d-ix="3"><td>066</td><td>Bash</td><td>140626T152459Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32633#32633">jimmy230</a></td></tr>
<tr d-ix="4"><td>089</td><td>Ruby</td><td>140626T051556Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32581#32581">Jwosty</a></td></tr>
<tr d-ix="5"><td>144</td><td>Groovy</td><td>140628T012954Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32700#32700">Michael </a></td></tr>
<tr d-ix="6"><td>063</td><td>J</td><td>140627T182121Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32680#32680">algorith</a></td></tr>
<tr d-ix="7"><td>120</td><td>Python 3</td><td>140626T072603Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32589#32589">grc</a></td></tr>
<tr d-ix="8"><td>106</td><td>C</td><td>140627T110126Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32663#32663">kwokkie</a></td></tr>
<tr d-ix="9"><td>8994</td><td>Ruby >= 1.9</td><td>140626T090200Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32598#32598">Ventero</a></td></tr>
<tr d-ix="10"><td>104</td><td>Javascript</td><td>140626T100401Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32602#32602">edc65</a></td></tr>
<tr d-ix="11"><td>151</td><td>PHP</td><td>140626T091219Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32599#32599">Martijn</a></td></tr>
<tr d-ix="12"><td>155</td><td>JavaScript</td><td>140626T062152Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32584#32584">Matt</a></td></tr>
<tr d-ix="13"><td>116</td><td>Bash + coreutils</td><td>140626T005441Z</td><td><a href="https://codegolf.stackexchange.com/questions/32568/print-the-relative-path/32575#32575">Digital </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-pl</code>, 53 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$_.=$&quot;.&lt;&gt;;y,\\,/,;s!^(.*)(/.*?) \1/!&quot;../&quot;x$2=~y,/,,!e
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/18lXs9WRUnPxs66UicmRkdfx7pYMU5DT0tTQ19Py15TIcZQX1FJT09fqULFyLauEqhARzH1/3/90uIi/eKMxKJU/fTUxLxK/eT8nPyi4uSM1NzUYi4k2bLMXBA2N9ZPKynIKU3PzPuXX1CSmZ9X/F/X11TPwNDgv25BDgA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 88 bytes</h1>

<pre class="lang-none prettyprint-override"><code>s=&gt;d=&gt;s.split(x=/\/|\\/).map(a=&gt;a==d[0]?d.shift():d.unshift`..`,d=d.split(x))&amp;&amp;d.join`/`
</code></pre>
<p><a href="https://tio.run/##pY3BasMwEETv/ZDEglabNodCQM6hP1DIoYduwcJaWwqyZLS2E0P/3cUmhlLaU1kWdod5M2c9aC6Ta7uHEA1NlZpY5UblLLn1rsuuChA@EUHIRreZVrlWyrzvPo5GsnVVl4mDkX1Y7kLK4t4os7JCbDZGnqMLBRRTGQNHT9LHOquyLdjYEIxwXWcrVvH2irsfyMsB8c0FEy@MeBq5o2b/hGiSGyjxzP/huEmv8ULpZMl7xOFR7n6pgJ4TsNWJoCYdRiijj4lLSw0tDd8Mg2vmfd5D1bW@r134Z@BimDOmLw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>from edc65's and fixed some problem</p>
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 98 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=(x,y,[[X,a,b],[Y,c,d]]=[x,y].map(e=&gt;/(.*?)[\/\\](.*)|/.exec(e)))=&gt;x?a==c?f(b,d):'../'+f(b,y):[y]
</code></pre>
<p><a href="https://tio.run/##pU3LSsQwFN37I0k0JuoshEKmC39AmIVKbhaZ9PYhaVKSTqcF/71OxYUIrlwcOC/OebeTzS51w3gbYoXrWis684Vr/cotPxqu37jjlTFKX2wjejtQVHtJxXXJNEgAc6HsQwqc0VFkjKn9XFqlXFnTI69YQYSQ5GYTCyv0YlYXQ44ehY8NrSl5KgBeulDFcwY4LHnEfvcAUKVuwpQJ/6vwbT3HM6ZDi94DTPfijjB29etBnnKSubUJZYM2LNJFH1N2Lfa4HfzIp67f8LiT9Tj4U9OF/@195dvE@gk" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Extra <code>/</code> at last when output is <code>../../</code></p>
</div>
<div id="pu2" class="pu"><h1>CJam, 46 bytes</h1>

<pre><code>ll]{'\/'/f/:~}/W{)__3$=4$@==}g@,1$-"../"*o&gt;'/*
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow">Try it online.</a></p>

<h3>Examples</h3>

<pre><code>$ echo '/usr/share/geany/colorschemes
&gt; /usr/share/vim/vim73/ftplugin' | cjam path.cjam; echo
../../vim/vim73/ftplugin
$ echo 'C:\Windows\System32\drivers
&gt; C:\Windows\System32\WindowsPowerShell\v1.0' | cjam path.cjam; echo
../WindowsPowerShell/v1.0
</code></pre>

<h3>How it works</h3>

<pre><code>ll]         " Read two lines from STDIN and wrap them in an array.                       ";
{           " For each line:                                                             ";
  '\/       " Split by “\”.                                                              ";
  '/f/      " Split each chunk by “/”.                                                   ";
  :~        " Flatten the array of chunks.                                               ";
}/          "                                                                            ";
W           " Push -1 (accumulator).                                                     ";
{           "                                                                            ";
  )__       " Increment and duplicate twice.                                             ";
  3$=       " Extract the corresponding chunk from the first line.                       ";
  4$@=      " Extract the corresponding chunk from the second line.                      ";
  =         " If the are equal,                                                          ";
}g          " repeat the loop.                                                           ";
@,          " Rotate the array of chunks of the first line on top and get its length.    ";
1$-         " Subtract the value of the accumulator.                                     ";
"../"*o     " Print the string “../” repeated that many times.                           ";
&gt;           " Remove all chunks with index less than the accumulator of the second line. ";
'/*         " Join the chunks with “/”.                                                  ";
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Bash, <strike>69</strike> 66</h1>

<p>I didn't post this one because I thought someone must be able to do it much better. But apparently it is not that easy.</p>

<pre><code>sed -r 'N;s/(.*[/\])(.*)\n\1/\2\n/'|sed '1s/[^/\]*/../g;N;s!\n!/!'
</code></pre>

<p><code>N</code> makes <code>sed</code> match two lines together. The first expression removes the common prefix ending with <code>/</code> or <code>\</code>. The second expression replaces directory names with <code>..</code> in the first line. Finally it concatenates the two lines with the separator.</p>

<p>Thanks to Hasturkun for 3 characters.</p>
</div>
<div id="pu4" class="pu"><h1>Ruby - 89</h1>

<pre><code>r=/\/|\\/
s = ARGV[0].split r
d = ARGV[1].split r
puts ("../"*(s-d).size)+((d-s).join"/")
</code></pre>

<p>Usage:</p>

<pre><code>ruby relative.rb working/directory destination/directory
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Groovy - 144 chars</h2>

<p>One solution:</p>

<pre><code>x=args[0][1]!=':'?'/':'\\'
f={args[it].tokenize x}
s=f 0
d=f 1
n=0
while(s[n]==d[n++]);
u="..$x"*(s.size-(--n))
println "$u${d.drop(n).join x}"
</code></pre>

<p>example output:</p>

<pre><code>bash$ groovy P.groovy C:\\Windows\\System32\\drivers C:\\Windows\\System32\\WindowsPowerShell\\v1.0
..\WindowsPowerShell\v1.0

bash$ groovy P.groovy /usr/share/geany/colorschemes /usr/share/vim/vim73/ftplugin
../../vim/vim73/ftplugin

bash$ groovy P.groovy /foo/bar/foo/bar /foo/qux/foo/bar
../../../qux/foo/bar
</code></pre>

<p>ungolfed:</p>

<pre><code>// fs = file seperator, / or \
fs = args[0][1]!=':'?'/':'\\'

s = args[0].tokenize fs
d = args[1].tokenize fs

// n = # of matching dirs from root + 1
n = 0
while (s[n] == d[n++]) ;

// up = the up-prefix. e.g. "../../..", for instance 
n--
up = "..${fs}" * (s.size-n)

println "$up${d.drop(n).join fs}"
</code></pre>
</div>
<div id="pu6" class="pu"><h1>J - 63 char</h1>

<p>A function taking the old path on the left and the new path on the right.</p>

<pre><code>}.@;@(c=.c&amp;}.`(,~(&lt;'/..')"0)@.(~:&amp;{.))&amp;('/'&lt;;.1@,'\/'&amp;charsub)~
</code></pre>

<p>This solution comes in three parts, looking like <code>post@loop&amp;pre~</code>. Explained by explosion:</p>

<pre><code>post @ loop &amp; pre ~   NB. the full golf
                  ~   NB. swap the arguments: new on left, old on right
            &amp; pre     NB. apply pre to each argument
       loop           NB. run the recursive loop on both
post @                NB. apply post to the final result

'/'&lt;;.1@,'\/'&amp;charsub  NB. pre
         '\/'&amp;charsub  NB. replace every \ char with /
'/'     ,              NB. prepend a / char
   &lt;;.1@               NB. split string on the first char (/)

c=.c&amp;}.`(,~(&lt;'/..')"0)@.(~:&amp;{.)  NB. loop
                      @.(~:&amp;{.)  NB. if the top folders match:
    &amp;}.                          NB.   chop off the top folders
   c                             NB.   recurse
       `                         NB. else:
           (&lt;'/..')"0            NB.   change remaining old folders to /..
         ,~                      NB.   append to front of remaining new folders
c=.                              NB. call this loop c to recurse later

}.@;  NB. post
   ;  NB. turn the list of folders into a string
}.@   NB. chop off the / in the front
</code></pre>

<p>Note that we add a leading <code>/</code> to each path before splitting, so that we handle Windows-style paths by making <code>C:</code> into a "folder". This results in an empty folder at the start of Unix-style paths, but that always gets removed by the loop.</p>

<p>See it in action:</p>

<pre><code>   NB. you can use it without a name if you want, we will for brevity
   relpath =. }.@;@(c=.c&amp;}.`(,~(&lt;'/..')"0)@.(~:&amp;{.))&amp;('/'&lt;;.1@,'\/'&amp;charsub)~
   '/usr/share/geany/colorschemes' relpath '/usr/share/vim/vim73/ftplugin'
../../vim/vim73/ftplugin
   'C:\Windows\System32\drivers' relpath 'C:\Windows\System32\WindowsPowerShell\v1.0'
../WindowsPowerShell/v1.0
</code></pre>

<p>You can also try it yourself at <a href="https://a296a8f7c5110b2ece73921ddc2abbaaa3c90d10.googledrive.com/host/0B3cbLoy-_9Dbb0NaSk9MRGE5UEU/index.html#code=%27%2Ffoo%2Fbar%2Ffoo%2Fbar%27%20%28relpath%20%3D%3A%20%7D.%40%3B%40%28c%3D.c%26%7D.%60%28%2C~%28%3C%27%2F..%27%29%220%29%40.%28~%3A%26%7B.%29%29%26%28%27%2F%27%3C%3B.1%40%2C%27%5C%2F%27%26charsub%29~%29%20%27%2Ffoo%2Fqux%2Ffoo%2Fbar%27" rel="nofollow">tryj.tk</a>.</p>
</div>
<div id="pu7" class="pu"><h2>Python 3, 120</h2>
<pre class="lang-py prettyprint-override"><code>a,b=(i.split('\\/'['/'in i])for i in map(input,'  '))
while[]&lt;a[:1]==b[:1]:del a[0],b[0]
print('../'*len(a)+'/'.join(b))
</code></pre>
<p>Example:</p>
<pre><code>$ python3 path.py
 /usr/share/geany/colorschemes
/usr/share/vim/vim73/ftplugin 
../../vim/vim73/ftplugin
</code></pre>
</div>
<div id="pu8" class="pu"><h1>C, <strike>119</strike> 106</h1>

<pre><code>void p(char*s,char* d){while(*s==*d){s++;d++;}s--;while(*s){if(*s==47||*s==92)printf("../");s++;}puts(d);}
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Ruby >= 1.9, 89 <del>94</del> characters</h2>

<pre><code>$;=/\\|\//
a,b=$*.map &amp;:split
puts"../"*(a.size-r=a.index{a[$.+=1]!=b[$.]}+1)+b[r..-1]*?/
</code></pre>

<p>Input via command line arguments. Works for both UNIX- and Windows-style paths, including paths with repeated folder names:</p>

<pre><code>$ ruby relpath.rb /usr/share/geany/colorschemes /usr/share/vim/vim73/ftplugin
../../vim/vim73/ftplugin
$ ruby relpath.rb 'C:\Windows\System32\drivers' 'C:\Windows\System32\WindowsPowerShell\v1.0'
../WindowsPowerShell/v1.0
$ ruby relpath.rb /foo/bar/foo/bar /foo/qux/foo/bar
../../../qux/foo/bar
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Javascript (E6) 104</h1>
<p><em>Edit</em> Added alert for output</p>
<pre><code>R=(s,d)=&gt;alert(s.split(x=/\/|\\/).map(a=&gt;a==d[0]?d.shift()&amp;&amp;'':'../',d=d.split(x)).join('')+d.join('/'))
</code></pre>
<p><strong>Ungolfed</strong></p>
<pre><code>R (s,d) =&gt; // a single espression is returned, no {} or () needed
  s.split(x=/\/|\\/) // split string at / or \, save regexp in X for later
  .map( // create a new array from s
     a =&gt; a == d[0] // check if current of s and d equals
          ? d.shift() &amp;&amp; '' // map to '' and cut 1 element of d
          : '../', // else map to '../'
     d=d.split(x)) // second param of map is useless, so split d here
  .join('')+d.join('/') // join map and concat to rest of d adding separators
</code></pre>
<p><strong>Test</strong></p>
<pre><code>R('C:\\Windows\\System32\\drivers','C:\\Windows\\System32\\WindowsPowerShell\\v1.0')
</code></pre>
<blockquote>
<p>../WindowsPowerShell/v1.0</p>
</blockquote>
<pre><code>R('/usr/share/geany/colorschemes','/usr/share/vim/vim73/ftplugin')
</code></pre>
<blockquote>
<p>../../vim/vim73/ftplugin</p>
</blockquote>
</div>
<div id="pu11" class="pu"><h1>PHP, <strike>158</strike> 151</h1>

<pre><code>function r($a,$b){$a=explode('/',$a);$b=explode('/',$b);foreach($a as $k=&gt;$v){if($v==$b[$k])$b[$k]='..';else break;}unset($b[0]);echo implode('/',$b);}
</code></pre>

<p>Ungolfed:</p>

<pre><code>function r($a,$b){
    $a=explode('/',$a);
    $b=explode('/',$b);
    foreach($a as $k=&gt;$v){
        if($v==$b[$k])$b[$k]='..';
        else break; 
    }
    unset($b[0]);
    echo implode('/',$b);
}
// these lines are not included in count:
r('/test/test2/abc','/test/test3/abcd'); // ../test3/abcd
r('/test/test2/abc','/test/test2/abcd'); // ../../abcd
</code></pre>
</div>
<div id="pu12" class="pu"><h1>JavaScript - 155</h1>

<pre><code>function p(s,d){s=s.split(/\\|\//g);d=d.split(/\\|\//g);o=[];for(i=0;s[i]==d[i];i++);for(j=s.length-i;j--;)o[j]="..";return o.concat(d.slice(i)).join("/")}
</code></pre>

<p>Parses either path format but outputs with <code>/</code> separator.</p>

<pre><code>console.log(p("/usr/share/geany/colorschemes","/usr/share/vim/vim73/ftplugin"));
../../vim/vim73/ftplugin
console.log(p("/usr/share/geany/colorschemes/test/this","/usr/share/vim/vim73/ftplugin/this/is/a/test"));
../../../../vim/vim73/ftplugin/this/is/a/test
console.log(p("c:\\windows\\system32\\drivers\\etc\\host","c:\\windows\\system\\drivers\\etc\host"));
../../../../system/drivers/etchost
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Bash + coreutils, 116</h1>
<p>Here's a shell script to get the ball rolling.  Pretty sure there'll be shorter answers:</p>
<pre><code>n=`cmp &lt;(echo $1) &lt;(echo $2)|grep -Po &quot;\d+(?=,)&quot;`
printf -vs %`grep -o /&lt;&lt;&lt;${1:n-1}|wc -l`s
echo ${s// /../}${2:n-1}
</code></pre>
<p>Output:</p>
<pre><code>$ ./rel.sh /usr/share/geany/colorschemes /usr/share/vim/vim73/ftplugin
../vim/vim73/ftplugin
$ ./rel.sh /usr/share/geany/colorschemes/ /usr/share/vim/vim73/ftplugin/
../../vim/vim73/ftplugin/
$ ./rel.sh /usr/share/vim/vim73/ftplugin /usr/share/geany/colorschemes
../../geany/colorschemes
$ 
</code></pre>
<p>Note there is no way for the script to tell if the string <code>ftplugin</code> is a file or a directory.  You may explicitly provide a directory by appending it with an <code>/</code> as in the example above.</p>
<p>Won't handle paths containing whitespace or other funny characters.  Not sure if that is a requirement or not.  Just a few extra quotes would be needed.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/32568/">32568</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




