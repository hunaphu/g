<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::253206</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>156</td><td>Microsoft Excel</td><td>241030T164949Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/276405#276405">General </a></td></tr>
<tr d-ix="1"><td>100</td><td>Nim</td><td>221025T080134Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253735#253735">Kirill L</a></td></tr>
<tr d-ix="2"><td>067</td><td>PHP</td><td>221018T180146Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253407#253407">Titus</a></td></tr>
<tr d-ix="3"><td>nan</td><td>C# .NET Core  107</td><td>221016T130454Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253293#253293">rene</a></td></tr>
<tr d-ix="4"><td>043</td><td>C clang</td><td>221015T140133Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253263#253263">jdt</a></td></tr>
<tr d-ix="5"><td>064</td><td>C++ clang</td><td>221015T175806Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253271#253271">c--</a></td></tr>
<tr d-ix="6"><td>042</td><td>Dart</td><td>221015T201409Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253275#253275">lrn</a></td></tr>
<tr d-ix="7"><td>040</td><td>Rust</td><td>221015T102955Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253256#253256">corvus_1</a></td></tr>
<tr d-ix="8"><td>010</td><td>Husk</td><td>221015T114215Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253258#253258">Dominic </a></td></tr>
<tr d-ix="9"><td>076</td><td>Python</td><td>221014T143802Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253207#253207">solid.py</a></td></tr>
<tr d-ix="10"><td>101</td><td>C++ clang</td><td>221015T094108Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253254#253254">AZTECCO</a></td></tr>
<tr d-ix="11"><td>011</td><td>Pyth</td><td>221015T085933Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253251#253251">CursorCo</a></td></tr>
<tr d-ix="12"><td>054</td><td>R</td><td>221014T214450Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253230#253230">Dominic </a></td></tr>
<tr d-ix="13"><td>013</td><td>Japt</td><td>221014T173815Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253215#253215">Kamil Dr</a></td></tr>
<tr d-ix="14"><td>033</td><td>Factor</td><td>221014T173929Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253216#253216">chunes</a></td></tr>
<tr d-ix="15"><td>018</td><td>Raku</td><td>221014T184423Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253224#253224">Sean</a></td></tr>
<tr d-ix="16"><td>nan</td><td></td><td>221014T174815Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253217#253217">bigyihsu</a></td></tr>
<tr d-ix="17"><td>026</td><td>JavaScript ES6</td><td>221014T144941Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253208#253208">Arnauld</a></td></tr>
<tr d-ix="18"><td>059</td><td>Python</td><td>221014T153513Z</td><td><a href="https://codegolf.stackexchange.com/questions/253206/implement-the-flip-floperator/253212#253212">loopy wa</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Microsoft Excel, 156</h1>
<p>Phew... this is quite difficult in a language that doesn't let you alter variables have objects.</p>
<p>It doesn't <em>quite</em> meet the requirements, but I think it fits the spirit of the challenge. In this implementation, the flip flop function has to encode its output in a LAMBDA that returns the actual value. Unfortunately, that was the best I could figure out. I felt this was a better compromise than just letting myself add a parameter to the flip-flop function. Fortunately, it's easy to decode.</p>
<p>Golfed:</p>
<pre><code>LAMBDA(a,b,LET(f,LAMBDA(g,o,d,e,LAMBDA([v],IF(ISOMITTED(v),o,IF(g(v),d(d),e(e))))),p,LAMBDA(s,f(a,0=1,LAMBDA(u,f(b,1=1,LAMBDA(_,f(a,1=1,u,s)),u)),s)),p(p)))
</code></pre>
<p>Ungolfed:</p>
<pre><code>LAMBDA(a,b,
  LET(
   f,LAMBDA(g,o,d,e,LAMBDA([v],IF(ISOMITTED(v),o,IF(g(v),d(d),e(e))))),
   p,LAMBDA(s,
    f(a,0=1,LAMBDA(u,
     f(b,1=1,LAMBDA(_,
      f(a,1=1,u,s)
     ),u)
    ),s)
   ),
   p(p)
  )
 )
</code></pre>
<p>Usage example:</p>
<pre><code>=LET(
 makeFF,LAMBDA(a,b,LET(f,LAMBDA(g,o,d,e,LAMBDA([v],IF(ISOMITTED(v),o,IF(g(v),d(d),e(e))))),p,LAMBDA(s,f(a,0=1,LAMBDA(u,f(b,1=1,LAMBDA(_,f(a,1=1,u,s)),u)),s)),p(p))),
 MAP(
  SCAN(
   makeFF(LAMBDA(x,x=3),LAMBDA(x,x=7)),
   SEQUENCE(10),
   LAMBDA(x,y,x(y))
  ),
  LAMBDA(x,x())
 )
)
</code></pre>
<h2>How does it work?</h2>
<ul>
<li>We take advantage of the fact that <code>SCAN</code> can hold intermediate values by storing a <code>LAMBDA</code>.</li>
<li>This lambda returns:
<ul>
<li>The value of the flip-flip if called with no arguments</li>
<li>Another lambda that returns the value of the flip-flop if called with the value</li>
</ul>
</li>
<li>We unpack the value using <code>MAP</code> and simply invoke the argument.</li>
</ul>
<h3>How does track the state of the flip-flop?</h3>
<ul>
<li>The flip-flop generator returns a state machine. Each state is also a <code>LAMBDA</code>.
<ul>
<li>Input <code>v</code></li>
<li>State 1: Value is <code>FALSE</code>, goes to 2 if a(v), else goes to 1</li>
<li>State 2: Value is <code>TRUE</code>, goes to 3 if b(v), else goes to 2</li>
<li>State 3: Value is <code>TRUE</code>, goes to 2 if a(v), else goes to 1</li>
<li>If <code>v</code> is omitted, output the state.</li>
</ul>
</li>
</ul>
<h2>Why can't you...</h2>
<ul>
<li>Just use <code>SCAN</code> to track the state directly? Because this would require passing the state to the flip-flop. The flip-flop only takes the one value argument according to the challenge rules. Otherwise, you'd have to call the flip-flop generator on every iteration of <code>SCAN</code>, which is also not valid.</li>
<li>Use recursion instead of <code>MAP</code>+<code>SCAN</code>? I probably could have, but I'd still have to unpack the value. This was just easier to think about. You'd have to do that for Google Sheets, though, because you're not currently allowed to call LAMBDA's stored in arrays.</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://nim-lang.org/" rel="nofollow noreferrer">Nim</a>, 100 bytes</h1>
<pre><code>import sugar
var s,t=off
proc f(x,y:int-&gt;bool):proc=(z:int)=&gt;(s=s or z.x;t=s;s=s and not z.y;s or t)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=nVBBDoIwELz3FRtONAGCJiYEsv0LgtUm0iVtMcBXvJAY_-E3_I0U5eTFeJrMTGZnd683rZppundOxtmzVk1LxoHtjqVhl9KAjRySlKw1VIEM-2jIlXax2BOdee5VDEcvcRShRQtkYEz6wqEtPC11DZrcrA3FYjr-6XrImSlQGtIk2aQ5A1DSV6DoEbfRgGKYkYeKew_gUJ0IFFsgCNhP8eyfODRUww4xXYas7GuT9x3r714" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Works with <code>int</code>-typed inputs, uses a couple of globals to store the current and previous states.</p>
<p>Unfortunately, Nim doesn't let us omit type annotations, unless we are supplying the lambda directly as an argument to a higher-order function (as in test cases in the footer), so this ends up rather verbose. Importing syntax sugar macros <code>-&gt;</code> and <code>=&gt;</code> allows getting rid of some repetitive annotations and thus, pays off by a few bytes.</p>
<p>As a bonus, Nim also allows defining operators, so that we can mimick Ruby's behavior precisely:</p>
<p><a href="https://ato.pxeger.com/run?1=m704LzN3wYKlpSVpuhY3PcoSixSKdUps89PSuAqK8pMVEvT0EjQqdCqtkvLzczTBpK1GsW2xQn6RQoV1iW2xNYiTmJeikJdfolBpDZYo0YSatzoNyMtUyMxTMNDTMzSw4lJQyExT0Mi0tTXS1NOD0CBBBYXU5Ix8hUwuMKWkxEVQnwVJ-hRy81MUTG1tDcC6YTxUuyFOhgUFAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu2" class="pu"><h1>PHP 67 bytes</h1>

<pre class="lang-php prettyprint-override"><code>function f($i,$a,$b){static$k=0;$r=$k;return$r|$k^=($k?$b:$a)($i);}
</code></pre>
<p>$k must be copied to a temp variable because the <code>^=</code> is executed before the <code>|</code>,<br />
although both operators are LTR.</p>
<p>Just define your two functions and give them to <code>f</code> as parameters within the loop.<br />
The functions may be anonymous or named, or even predefined.</p>
<p>e.g.</p>
<pre class="lang-php prettyprint-override"><code># example 1
$a=function($i){return$i==2;}    $b=function($i){return$i==8;}
for($i=0;$i&lt;=10;$i++) f($i,$a,$b) &amp;&amp; print &quot;$i &quot;;
</code></pre>
<p>or</p>
<pre class="lang-php prettyprint-override"><code># example 2
function a($i){return$i%5==0;}    function b($i){return$i%5==2;}
for($i=0;$i&lt;=10;$i++) f($i,'a','b') &amp;&amp; print &quot;$i &quot;;
# important: function names must be quoted to avoid &quot;undefined constant&quot; error (in PHP 8)
</code></pre>
<p>or</p>
<pre class="lang-php prettyprint-override"><code># other example
for($i=0;$i&lt;=10;$i++) f($i,'intval',function($i){return$i&lt;5;) &amp;&amp; print &quot;$i &quot;;
# prints 1 2 3 4 5 6 7 8 9 10
# ('$i&lt;5' is irrelevant because testing 'intval' immediately resumes the printing)
</code></pre>
<p><a href="https://onlinephp.io/c/29cb0" rel="nofollow noreferrer">Try it online</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a> <s>120</s> <s>117</s> 107  bytes</h1>
<p>Here is a C# version based of the Dart and Go examples.</p>
<pre class="lang-cs prettyprint-override"><code>Func&lt;Func&lt;int,bool&gt;,Func&lt;int,bool&gt;,Func&lt;int,bool&gt;&gt;f=(l,r)=&gt;{var s=1&lt;0;return v=&gt;l(v)?s=!s:r(v)?!(s=!s):s;};
</code></pre>
<ul>
<li><p>Shaved off 3 bytes by replacing <code>false</code> with <code>1&lt;0</code> and a non needed space. Hat tip to <a href="https://codegolf.stackexchange.com/users/41374/jdt">jdt</a></p>
</li>
<li><p>Shaved off 10 bytes by not doing boolean wizardry</p>
</li>
</ul>
<p>Ungolfed main version:</p>
<pre class="lang-cs prettyprint-override"><code>var flipflop = new Func&lt;Func&lt;int,bool&gt;, Func&lt;int, bool&gt;, Func&lt;int,bool&gt;&gt; ( (condition1,condition2) =&gt; {
    var flipflop = false;
    return new Func&lt;int,bool&gt;(value =&gt; {
        if (condition1(value))
        { 
            flipflop = !flipflop;
        } else if (condition2(value)) {
            flipflop = !flipflop;
            return true;
        }
        return flipflop;
    });
});

</code></pre>
<p>How you use it:</p>
<pre class="lang-cs prettyprint-override"><code>var flop = f(v =&gt; v == 2, v =&gt; v == 8);
for(var x = 0; x&lt; 11; x++) 
{
      if (flop(x)) {
        Console.WriteLine(x);
      }
}
</code></pre>
<p><a href="https://tio.run/##fY1BS8QwEIXP9lfM3hK2ytaTbJp4EDwpCB48iIdY0xLIJjKThkrpb6@JF7cgvsPMe8x8Mx1ddgHNOpL1Azx/UTQnUXVOE8EThgH1CebqgqKOtoMU7Ac8ausZRczA6xtoHIjDvN6Pvmt/ivWxfg/BqfrfqHrJXI1cqjlpBJJNexBo4ogeklSOJX5LckdHLG7HiudHEotY4UyF7V34BAk9SyAV5CLhuobfcMNFdc70Id/M3JShg4CphabJbb/nsNmbN6nI9sDKNzZx/se46C54Cs5cvaCN5sF6k3e375dq65ZqWb8B" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>
<h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, 91 bytes</h1>
<p>Using a delegate as proposed by <a href="https://codegolf.stackexchange.com/users/41374/jdt">jdt</a></p>

<pre class="lang-cs prettyprint-override"><code>delegate bool d(int i);Func&lt;d,d,d&gt;f=(l,r)=&gt;{var s=1&lt;0;return v=&gt;l(v)?s=!s:r(v)?!(s=!s):s;};
</code></pre>
<p><a href="https://tio.run/##bU7BSsQwEL3nK2ZvCVuXrSfZNPUgCIKCoOBBPMQ2LYFsIpm0rpR@e00K3bXgG5iZ5L2ZNxVeVc6rqUNtW3j5waCOnJDKSER49q718kiGqVZGtTIo@HTOQE21DaAZv@9sVdRZjLIR1GSeiXLopQcUebHnXoXOW@hFaWjPblFs8OBTt6GpZwfkI58IRGCQQVfQO13Dk9SWYvDxovcPkL5FNmuGOScki6AwgACrvpc7KeNnRWJ3rzE9hOV7JHOZLRbmn72NcV9xb0N7ECXEJOA6g8vj5o9L4zzQNHSKE3seSwF5Hut2y86iy/oE3QBNFvTE2IpYyxLunEVn1O7N66AetVVxhq9UI1l3IxmnXw" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 43 bytes</h1>
<p>Reusable form as proposed by <a href="https://codegolf.stackexchange.com/users/84844/aztecco">AZTECCO</a></p>

<pre class="lang-c prettyprint-override"><code>#define f(x,a,b)static m;m|(m^=m?x b:x a)&amp;&amp;
</code></pre>
<p><a href="https://tio.run/##tY1RCsIwEET/e4olYtnQFCz@iDF4EyFNm7LQxNJGLGivbowFvYEDy8CbHcaUpte@i3HTtJZ8CxZnoUXNp6ADGXDSPdFdlDvPUB9n0DzPI/kATpNHDo8Mkux1xA8ktZNAJ1VVEoqCvvH6giSU2qc78B9MGsZUtMi2DTABxOUaLtlqwy1MyFiC/5pZ4svYXndTLO9v" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, <s>41</s> 40 bytes</h1>
<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!</p>

<pre class="lang-c prettyprint-override"><code>t;f(a(),b(),i,*r){*r=t|(t^=(t?b:a)(i));}
</code></pre>
<p><a href="https://tio.run/##dY/BCsIwDIbve4o4UNKtg4EHxVp8E6Wr6yjMKl2Hh7lXt3YU68kfAiH5kvyRleyF6bx3TKFAQpsQmhaWTIXl7oXuzNGdmoMgqAlhs9fGgRqNvAhcUk1gyiDItm60BjRwDluWzVmWyOY/uU/kTWiDX0TdbZzhNQN95DsGZZkWLFq6th3G3rFUUxiN0Xg1/LGJCPkxWgHGIqw41CQ1gh42bFWYr6@Q0@A3Ts3BoX9L1Ytu8NXzAw" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C++ (clang)</a>, 64 bytes</h1>

<pre class="lang-cpp prettyprint-override"><code>[t=0](auto p){return[=](auto x)mutable{return t|(t^=p[t](x));};}
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/253208/112488">@Arnauld's JavaScript answer</a>.</p>
<p>Instead of <code>t</code> being a default parameter, it's captured and initialized to 0. The function returns a mutable lambda which captures this <code>t</code> by value along with the predicates container.</p>
<p>This other lambda (the closure) does the heavy lifting, it's declared mutable because it's member <code>t</code> will alternate between the values 0 and 1.</p>
<p>We could save a byte by making the predicates take an <code>int x</code> but it would no longer be generic.</p>
<p><a href="https://tio.run/##rZDBboMwDIbveQqr09Rk7SRWadJUEo59CcamFMIUDZIIzETFeHYWEGWreuhlPiSR/9/2F6fOPaaFNB@DbNBCKT/Ve15o5w/rQAwxiiChk@ZYVylsKhOLOdOyskF5LNQsAH5TfBMuxoS2jIV92A8hudMmLZpMAde2xkrJMvqTk1UlTxEhqEpXSFQcT04ZWSo4ROTL6swrNdIDLFSMdAR85Lai2iBoEBCE/uICnvxjs9FsMoyhc6BLJdXsVxmjxmy/T22DwPnYgMMKViHpCfGNSSm1oedpE8XleuhUPn2AH60t6AMbgdgWdlG3zImTibI9bw9aEAJ2Yb@9YXk5W3q/SkKueNevZj3n/xPuHp7H6cENwNm2u4Dshx8" rel="nofollow noreferrer" title="C++ (clang) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>Dart, 42 bytes</h1>
<pre class="lang-dart prettyprint-override"><code>f(f,s,[b=1&lt;0])=&gt;(i)=&gt;b?b|(b=!s(i)):b=f(i);
</code></pre>
<p>You use it as:</p>
<pre><code>void main() {
  var flipflop = f((i)=&gt;i % 3 == 0, (i) =&gt; i % 7 == 0);
  for (var i = 1; i &lt; 15; i++) {
    if (flipflop(i)) print(i);
  }
}
</code></pre>
<p>Which prints 3,4,5,6,7,9,10,11,12,13,14.</p>
<p>It even allows you to pass in an extra Boolean to make it the active state.</p>
<p>In a less horribly mangled and more typed version, it would be:</p>
<pre class="lang-dart prettyprint-override"><code>bool Function(T) flipflop&lt;T&gt;(bool Function(T) from, bool Function(T) until) {
  bool b = false;
  return (T value) {
    if (b) {
      b = !until(value);
      return true;
    }
    b = from(value);
    return b;
  }
}
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.rust-lang.org/" rel="nofollow noreferrer">Rust</a>, 40 bytes</h1>

<pre class="lang-rust prettyprint-override"><code>|f|{let mut t=0;move|x|t|{t^=f[t](x);t}}
</code></pre>
<p><a href="https://tio.run/##RY7daoQwEIXvfYrZu0xJZdf@idn4GL0RKyITCHVdaibLUuOz2yh0PTAwczh8Z0bveDEDXFo7CIQpgaieOBrf1BhTgBlEFcfn@Fx6Z39JQVbHvQG9BBOmLewZWB/V5XqjcA8cJv7SpuJa3FHxPC9q58aoMaD/C0QVbABhQWvIEFoHW4mE3c53u0aVbKjWORq5oZ@D2O5V4pimpxOmxvZMo1gBkf9kUWvBo6cHBTHtrn1PHRfF@ZO6c1OWAuUDdKPuUGUSXiS8SniT8C7hQ0Jeb4n1hTlZ/gA" rel="nofollow noreferrer" title="Rust – Try It Online">Try it online!</a></p>
<p>An expression compatible with <code>fn([fn(T)-&gt;usize; 2])-&gt;impl Fn(T)-&gt;usize</code> for any <code>T</code>. (Yes I know <code>impl Trait</code> can't be used as a return type for <code>fn</code> pointers)</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>12</s> 10 bytes</h1>
<pre><code>%2ṁ§≠²o⁰←ḣ
</code></pre>
<p><a href="https://tio.run/##yygtzv6f9qip8VFT06Om5oc7FhsZ/Fc1eriz8dDyR50LDm3Kf9S44VHbBKDEf1sjLluL/wA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<pre><code>%2ṁ§≠²o⁰←ḣ      # 2-argument function, 
                # which yields a partially-applied function
                # requiring 1 further argument:
         ḣ      # 1..further argument   
  ṁ             # map over this and return sum
   §≠           # absolute differences between
     ²          # function arg2 applied to each element, and
      o⁰        # function arg1 applied to 
        ←       # each element plus 1;
%2              # modulo 2.
</code></pre>
<p>Example usage <code>f₁₂₃ḣ20</code></p>
<pre><code>f               # filter
    ḣ20         # 1..20
                # keeping only truthy results of 
 ₁              # function returned by function on line 1
                # called with arguments:    
  ₂₃            # functions on line 2 and line 3
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 76 bytes</h1>
<p><em><code>-1 byte</code> thanks to <code>py3_and_c_programmer</code></em></p>
<p>Takes as input an element <code>i</code>, two lambda functions <code>a</code> and <code>b</code> while using a global variable <code>t</code> to toggle between the <code>true</code> &amp; <code>false</code> cycles.</p>
<pre class="lang-python prettyprint-override"><code>def f(i,a,b):
 global t
 if~t&amp;a(i):t=1
 if t&amp;b(i):t=0;return 1
 return t
t=0
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZBBCoMwFET3OcVsKgoWVCiIJTfoJRI0NmCjhC_ophfpxo29U2_TpLGLli66mxk-bz5zuw8znXuzLOtIal8-TnWjoGKdilQmFUPb9VJ0IAatrhSJWCcV8dxbUCSDzY62odEauHxTxFy8MVfVW2hoAytM28R57sme4Is6cZG1wFRNnBcfrnydAYPVhlwTY0E58ScROxzAObIfWfFFD8--h3gC" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C++ (clang)</a>, <s>123</s> 101 bytes</h1>

<pre class="lang-cpp prettyprint-override"><code>struct F{int r=0;template&lt;class A,class B&gt;int operator()(A a,B b,int t){return r|(r^=r?b(t):a(t));}};
</code></pre>
<p><a href="https://tio.run/##fY8xT8MwEIV3/4ojDLXVEIFYUJ0UtUPFwM5QiuQ6l9ZSYkfORS0q@e3BptAJWO6ke3fv3qfb9kbXyu7GsSPfa4LVyVgCX9xKwqatFWEeFroOFum5L@dxwbXoFTnPBV@ASpewTeOYxMkj9d6C/@D@rfCPW05ipkIRchjkeG2srvsSc@PCQ1TNnPWdsTuwqsGuVRqhoxIki26NMpaLE4MVVJJBFd7FsQnhwOR3oU6nJupgKuAVXxebr4XjJcWxKO7lkP4qPATBCKFdT3lu8jyBJDwZGGNwnqEtazi3oD4jTTog/w4qRPQhc5bxJ6xrBy/O1@UVOItABwe094hZJmCJdEC0MHGTVxvMg3NkcZJFFL1XHvQs@c8jiXSm4o6vN98HFwRdFME40v0t6R8@LVkgG9j4CQ" rel="nofollow noreferrer" title="C++ (clang) – Try It Online">Try it online!</a></p>
<ul>
<li>actually we can go to 92 Bytes if we just implemented a class function <a href="https://tio.run/##fY8xT8MwEIV3/4ojDHXUEIFYUO0UtUPFwM4ARXKdS2MpsSPnohaV/PZgU2ACljv53vnd@3TXXelG2f009eQHTbA5GUvgi2tB2HaNIpRhoe9hlZ37ehkXar4Cla1hl8UXpSePNHgL/p3718Lf7zilCxVKKsZRTJfG6mYoURoX7qBql2zojd2DVS32ndIIPZUgWHRrlbE8PTHYQCUYVM7zODYhExh5E@p8bqIOpgJe5TV/LrafK8efHMeiuBVj9qtwFwSTptoNJKWRMoEknBkZY3CeoS0bOLegPiLNeiD/BiqE9CF1nvMHbBoHT8435QU4i0AHB1R7xDxPYY10QLQwc7MXG8yDc6RxgkUYXSsPepH855FEPlNxF@m2X19@IHRRBOvI97ekvwm1YIFtZNMH" rel="nofollow noreferrer" title="C++ (clang) – Try It Online"> <em>h</em> for example</a> but it's no more exactly a closure.</li>
</ul>
<p>Assumes predicates take int type, generalize also predicates will cost a few Bytes.<br />
Due to implicit type conconversion can work with strings.</p>
<p>Struct <em>F</em> is a closure with operator () defined to behave flipFlop.</p>
<p>Saved 22 Bytes by templatizing operator () instead of the entire class.</p>
<p>Approach stolen from @Arnauld <a href="https://codegolf.stackexchange.com/a/253208/84844">answer</a> where <em>r</em> keeps the state of flipFlop.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 11 bytes</h1>
<pre><code>L+Z=?Z!PbOb
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/38U/JagwxcjaJQBEW1j7aEfZ2kcpBiT5J4UFVvr9/29oCAA" rel="nofollow noreferrer">Try it online!</a></p>
<p>Pyth doesn't have any way to take functions as arguments, nor any way to return a function. So here we do the next best thing, which is to define a function which will implement the required behavior on the two functions <code>O</code> and <code>P</code>. That is to say that when we call <code>y</code> it will flip-flop on  whatever <code>O</code> and <code>P</code> are defined as. The try it online link above links to a full working example which is the same as the first example in the question, I'll explain below.</p>
<pre><code>DOdRqd2;                           define O(d): (d==2)
        DPdRqd8;                   define P(d): (d==8)
                L+Z=?Z!PbOb        implement y as the flip-floperator
                           VQyN    loop N over range(0,input()) and print the output of y(N)
</code></pre>
<p>And the actual flip-floperator</p>
<pre><code>L              define y(b)
 +Z            sum of previous output and
    ?Z         ternary on previous output
      !Pb          not P(b) if Z currently True
         Ob        O(b) if Z currently False
   =           assign result of ternary to Z
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 54 bytes</h1>

<pre class="lang-r prettyprint-override"><code>{x=F;function(f,g)function(y){x&lt;&lt;-(z=x|f(y))&amp;!g(y);z}}
</code></pre>
<p><a href="https://tio.run/##hY5NC4JAEIbP7a/YFGIHFFIoJN1rv6KLbI5txK7YSpsfv93Wg5FeYg7vPLwwz9Qj8rGz/Jxio4SRWjEMSvjCGzqbZSFrue3REey2pYu0HYbRp/fmaahWBcWHrEKtaK6uP4xIUNdMUqlodIr30JGNROZmPm/Bch4HS06ASYCqlsq4hQyEiNww76I8IMRfuCYHNS8pClrk4vZfxyYf9P2U0QGCVZXM1RHWT4wf" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>(or <a href="https://tio.run/##hY7LCsIwEEXX5itiC5KBFmxBKdps/Qo3JXZqRJJSU4x9fHtMFxXrRmZx7@EuzjQOucNWCSO1YhhV8IEX9DbPY9ZxO6An2KwrH8duJJafXEhv7cNQrUqKd1nHWtFCXb4YkaBumKRS0eSQbqEnK4nM32ywYDlPoyVnwCRA3UhlfCEjIaIwLDirAAgJF67JQc1TipKWhbj@17HJB8MwZbKD6GfK5mkPv0@4Nw" rel="nofollow noreferrer">52 bytes</a> using a global variable to save the current state)</p>
<hr />
<h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 37 bytes (non-competing)</h1>

<pre class="lang-r prettyprint-override"><code>{x=F;function(f,g){x&lt;&lt;-(z=x|f)&amp;!g;z}}
</code></pre>
<p><a href="https://tio.run/##bY3LCoJAFIbXzVNMijEHUkooIp1tT9FCmRw7EWfERhIvzz4htkho9V8W31e7LIiiIJOub@Ul0Q0pi4aE3pbQt2kaik62g4bNuky6cXQ@fzQvyw0VXD@xCg3xnG4/W2umTS2QI/H9Od5Bz1aohUApY5hUUzsBVDWSFQhsZEzlVnhX8oAxf4GdcNy@URW8yNX9P3lGD8OU@wPMktnyPY@w8LkP" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Doesn't fit the written spec of the challenge (the function <code>%..%</code> returns truthy/falsy, rather than a function), but it seems to very well mimic the described behaviour of Ruby's <code>..</code>.</p>
<p>Usage example (to mimic the Ruby example in the challenge):</p>
<pre class="lang-r prettyprint-override"><code>for(i in 1:20){
    if((i==2)%..%(i==8))print(i)
}
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>29</s> 13 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ï{T|(T^=YgXgT
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=z3tUfChUXj1ZZ1hnVA&amp;footer=W1h7WD09Mn1Ye1g9PTh9XWdVCjExb0BbWFhnVl0g&amp;input=LVI" rel="nofollow noreferrer">Try it</a></p>
<p>Defines a function which accepts an array of predicates as its input, and returns the flip-flop function. Theoretically should work on strings, numbers, or arrays as the input for the predicate, but I've only tested with numbers.</p>
<pre><code>Ï{T|(T^=YgXgT
              # Initialize T = 0
Ï             # Define a function with argument X (an array of predicates):
 {            #  Return a function with argument Y:
  T           #   Current value of T
   |          #   Bitwise OR
    (T^=      #   T XOR-equals the following:
          XgT #    Get the function in X at index T
        Yg    #    Apply it to Y
</code></pre>
<p>A <a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=zz0wQXtZfChZXj1BZ1hnWQ&amp;footer=W1h7WD09Mn1Ye1g9PTh9XWdVCjExb0BbWFhnVl0g&amp;input=LVI" rel="nofollow noreferrer">16 byte</a> alternative doesn't use a global variable, so could be used to define multiple flip flops.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a>, 33 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ '[ _ _ bi on t get swap off ] ]
</code></pre>
<p><a href="https://tio.run/##jY9BSwNBDIXv8yvezXrYQ4WCbFGP0ksv4mlZynQ3sx2anRlnUqT@@TXtKqInE0gI4XvJc7aTmKfXl832uYbLZxwpB2KMVg4IdqSSbEcFHDvLBSmTyDllHwQ@Ym022xpDZGdMDaEilWOftMSEBd5OUVBVuDXQWC5R3m3CTYP@lLCDKjIapFluz2h16rOiLbzTQrY7VLqjgTLW8IF9IGMaJjFTcxHaae49YoBgIJkPRHeB26l@VBtH@nlJUdzj4Xrn7tp/7@eP/tgIrNQKY@y/mO/pg3J8@peGMa2ZPgE" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>Expects the false-making predicate first and the true-making predicate second.</p>
<ul>
<li><code>[ ... ]</code> A quotation (anonymous function)...</li>
<li><code>'[ ... ]</code> ...that creates a quotation (anonymous function).</li>
<li><code>_ _</code> Slot the predicates into the holes.</li>
<li><code>bi</code> Call both predicates on the inner quotation's input value (integer).</li>
<li><code>on</code> Here's where it gets tricky. In Factor, you can use any value as a variable (key) to store something. So what I am doing here is using the result of the true-making predicate to store the value <code>t</code>. It's a little strange to use a canonical boolean value to store a possibly different boolean value, but this is code golf. It's not supposed to make sense, it's just supposed to be short.</li>
<li><code>t get</code> Get the value that is stored in <code>t</code>. This is the result that will be returned from the quotation. This must be done after storing the result of the true-making predicate but before storing the result of the false-making predicate in order to get the 'inclusive' behavior we are looking for.</li>
<li><code>swap</code> Bring the result of the false-making predicate to the top of the stack.</li>
<li><code>off</code> Store <code>f</code> in the result of the false-making predicate.</li>
</ul>
</div>
<div id="pu15" class="pu"><h1><a href="https://raku.org/" rel="noreferrer">Raku</a>, 18 bytes</h1>
<pre><code>-&gt;\f,\g{&amp;{f ff g}}
</code></pre>
<p><a href="https://tio.run/##K0gtyjH7n1upoJamYPtf1y4mTScmvVqtOk0hLU0hvbb2f3FipUJ6UWqBQppGjUq8po6CgZ6eoYFCWn6RgoaWgq2tgpGOApi2AMoBRVQVTEE8A5AolG2k@R8A" rel="noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<p>Raku has a built-in operator <code>ff</code> that does exactly what's asked for.  My answer is mostly just setting up the functional plumbing around it.</p>
<ul>
<li><code>-&gt; \f, \g { ... }</code> is an anonymous subroutine taking two arguments.</li>
<li><code>&amp;{ ... }</code> is the anonymous subroutine the top-level subroutine returns.  Not having an explicit signature, it takes its argument in the topic variable <code>$_</code>, which the flip-flop operator implicitly checks against.</li>
<li><code>f ff g</code> returns false until the topic variable smartmatches against <code>f</code>, that is, <code>$_ ~~ f</code>, then keeps returning true until <code>$_ ~~ g</code>.  Since <code>f</code> and <code>g</code> are functions, those smartmatches are equivalent to <code>f($_)</code> and <code>g($_)</code>.</li>
</ul>
</div>
<div id="pu16" class="pu">
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 131 bytes, <code>int</code>s only</h1>
<pre class="lang-go prettyprint-override"><code>func m(l,r func(int)bool)func(int)bool{f:=1&lt;0
return func(t int)bool{if!f&amp;&amp;l(t){f=!f;return f}
if f&amp;&amp;r(t){f=!f;return!f}
return f}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5NDoIwEIXX9BQDiaaNaDBuCNg7eAX8GdMIlDRlRbryDK7cEBMP4VG8jUNAjCauZjrv9b3vejvq9lFlu1N2PECRqZKpotLGLgIsbHCvLc7j5xnrcgcFz0MD3cpVacVW61x8vRpM5HIdMXOwtSl7p4VRVejjdJpzKxqUPqZvm2MKgRTzo_ikjB43oFx6FALlomEe5rqCRBJbT_JpG34qKVcuhP9q7ATFaAOqy4lSmmsJy26ZzYAqvI6OargS0MDGUAbyYLKHIKSLY55jA1zb9vMF" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 132 bytes, generic</h1>
<pre class="lang-go prettyprint-override"><code>func m[T any](l,r func(T)bool)func(T)bool{f:=1&lt;0
return func(t T)bool{if!f&amp;&amp;l(t){f=!f;return f}
if f&amp;&amp;r(t){f=!f;return!f}
return f}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dY5NasMwEIXX1inGhgSJuCGhm5BEd8giu9KF8zNhqCUZIS-C0a5X6KobE8ghepTeJuPYLaWQ1QzzvXnvfV5Orv2qiv1bcTqCKcgKMpXzYZqhCdm1Dvi0-H7H2u7BvGyhsOdXWeYeuovcqp1zpfqzN7jU8_VM-GOove1VAQZGmOJ4XMqgGtQprn5EURACE_-PpEx-NXHo8tF34aZSNSLB0lWw1GDkPYuAbOjThk_S-jnm8JguomIb54E6n9mK51rDvFsmE-CIpGvHMZIUNLDx7IEyGx0gy_kSRRLFUK5t-3kD" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This solution is fully generic for any type <code>T</code>.</p>
<h3>Ungolfed</h3>
<pre class="lang-go prettyprint-override"><code>func makeFlipFlop[T any](l,r func(T)bool) func(T)bool {
&#9;flipped := false
&#9;return func(t T)bool {
&#9;&#9;if !flipped &amp;&amp; l(t) {flipped = true; return true}
&#9;&#9;if flipped &amp;&amp; r(t) {flipped = false; return true}
&#9;&#9;return flipped
&#9;}
}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dU87TgMxFKzXp3hZichWFgRUEYnb1BTpEIVJ7OgpXtsy3gKtfBKaFRKH4ChUXAV7P2IFonq_mXkzr28n2304cTiLk4RaoCFYO-vDVanqUL43QV2uP79UYw7pepY7jW6nrXvYgzAvj1RXHvKR7tmTtZrNB2hJoRLeySPccVBCP0tSeBkabwZcgB9kgQoWE3y5BE0Dg3ZacAi-kRsY2XmIA2dG8b8o_cc_nMnAACNFJHGM2Y0x0VDWe7cuG5_npr1vBDShd96Oasj5bazg_-s6sqRoPWCWvN6kuuVwk5vVasqfP1JMGeDeJw1Fy4sjlFXaxJnPrhvqNw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu17" class="pu"><h1>JavaScript (ES6), 26 bytes</h1>
<p>Expects <code>[ first_predicate, second_predicate ]</code>, where both predicates are functions taking a single parameter.</p>
<p>Returns a flip-flop function which itself returns either 0 or 1.</p>

<pre class="lang-javascript prettyprint-override"><code>(p,k=0)=&gt;v=&gt;k|(k^=p[k](v))
</code></pre>
<p><a href="https://tio.run/##rY7BCsIwEETv@Yq9CBtapRYEoW6P/YlSodRUYmIT2tKL9ttjoijFixcvuzuPnWEu9VQPTS/tuO7MSbhrrUShpS20sUAObawo4ZRPlKs7qiPZUlU4ce60GKH9fMLSiCVIoDwMgjReiD1UPGOsNT0Gv2eQZH4dCLbhiCIONwYgW3xno@QvBtCYbjBabLQ5e5p5NrOZLekz/FepFexClyT@Aun/y7kH" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>(                  // flip-flop generator taking:
  p,               //   p[] = pair of predicate functions
  k = 0            //   k   = flip-flop status, initialized to 0
) =&gt;               //
  v =&gt;             // anonymous function taking a parameter v
    k | (          //   always return 1 if k is already set
                   //   (because we must still return 1 when the 2nd
                   //   predicate is triggered)
      k ^= p[k](v) //   toggle k if the result of p[k](v) is true
    )              //
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://www.python.org" rel="noreferrer">Python</a>, 59 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda a,b:lambda x,t={0}:t.add((o:=t.pop()|a(x))&gt;b(x))or o
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vweI025ilpSVpuhY3rXMSc5NSEhUSdZKsoMwKnRLbaoNaqxK9xJQUDY18K9sSvYL8Ag3NmkSNCk1NuyQQmV-kkA81YmJBUWZeiYZWbmKBBpChA6LTNDRgpllV2Noaaeqg8C00NXWKEvPSUzUMDTWBgIuQEQqqCqYKtrYKBigGwUSN0IyDOGzBAggNAA" rel="noreferrer">Attempt This Online!</a></p>
<p>Anonymous function returning an anonymous function that keeps state in a mutable initialiser.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/253206/">253206</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




