<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::51323</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td></td><td>210907T153358Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/235144#235144">user4180</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>240409T123151Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/272424#272424">guest430</a></td></tr>
<tr d-ix="2"><td>nan</td><td>\L</td><td>240528T104808Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/273332#273332">user4180</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>240420T231633Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/272693#272693">guest430</a></td></tr>
<tr d-ix="4"><td>nan</td><td>Okay</td><td>210914T140407Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/235308#235308">user4180</a></td></tr>
<tr d-ix="5"><td>nan</td><td></td><td>231122T185825Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/266986#266986">Philippo</a></td></tr>
<tr d-ix="6"><td>nan</td><td>i</td><td>210915T104630Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/235336#235336">user4180</a></td></tr>
<tr d-ix="7"><td>nan</td><td></td><td>210914T135617Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/235307#235307">user4180</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>210123T104813Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/217929#217929">user4180</a></td></tr>
<tr d-ix="9"><td>nan</td><td></td><td>210321T025903Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/220975#220975">user1004</a></td></tr>
<tr d-ix="10"><td>nan</td><td></td><td>210320T092455Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/220951#220951">user4180</a></td></tr>
<tr d-ix="11"><td>nan</td><td></td><td>150915T190254Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/58014#58014">F. Hauri</a></td></tr>
<tr d-ix="12"><td>nan</td><td></td><td>180622T105342Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/167295#167295">user4180</a></td></tr>
<tr d-ix="13"><td>nan</td><td>Append a newline in one byte</td><td>171209T035809Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/150226#150226">Jordan</a></td></tr>
<tr d-ix="14"><td>nan</td><td></td><td>171109T000109Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/147499#147499">Jordan</a></td></tr>
<tr d-ix="15"><td>nan</td><td>I know this is an old thread</td><td>170726T064230Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/135820#135820">Philippo</a></td></tr>
<tr d-ix="16"><td>nan</td><td>Expanding upon this tip answer</td><td>170406T201232Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/115617#115617">seshouma</a></td></tr>
<tr d-ix="17"><td>000</td><td>There's no builtin arithmetic</td><td>150605T121220Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51329#51329">Toby Spe</a></td></tr>
<tr d-ix="18"><td>086</td><td>If not explicitly banned by the question</td><td>150611T160700Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51587#51587">Digital </a></td></tr>
<tr d-ix="19"><td>nan</td><td>In sed</td><td>160913T103958Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/93097#93097">seshouma</a></td></tr>
<tr d-ix="20"><td>nan</td><td>Let's talk about the t and T commands</td><td>160829T172101Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/91555#91555">seshouma</a></td></tr>
<tr d-ix="21"><td>nan</td><td>Instead of clearing the pattern space with s/.*//</td><td>160829T152424Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/91547#91547">seshouma</a></td></tr>
<tr d-ix="22"><td>nan</td><td></td><td>150605T112010Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51324#51324">Toby Spe</a></td></tr>
<tr d-ix="23"><td>nan</td><td>As mentioned in man sed GNU</td><td>150722T174517Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/53571#53571">Dennis</a></td></tr>
<tr d-ix="24"><td>nan</td><td>If you need to use labels then for sure you'll want your label names to be as short as possible.  In fact taken to the extreme</td><td>150605T174237Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51352#51352">Digital </a></td></tr>
<tr d-ix="25"><td>nan</td><td>The GNU sed documentation describes the s command as "sed's Swiss Army Knife".  But if all you want to do is replace all instances of one character with another</td><td>150605T173901Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51351#51351">Digital </a></td></tr>
<tr d-ix="26"><td>nan</td><td>Consider using extended regex syntax in GNU sed.  The r option costs one byte in scoring</td><td>150605T112301Z</td><td><a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51327#51327">Toby Spe</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Unary-UCD-Decimal conversions</h1>
<p>The programs below are adapted from solutions in <a href="http://golf.shinh.org/" rel="nofollow noreferrer">anarchy golf</a>. The solutions below work on GNU sed 4.2.2, where empty labels are allowed. It is possible I've missed better solutions on anarchy golf.</p>
<h2>Unary to Decimal, <code>sed -r</code> at 47 bytes</h2>
<p>From solutions by <a href="http://golf.shinh.org/reveal.rb?Collatz+Problem/%2520_1480130793&amp;sed" rel="nofollow noreferrer">%20</a> and <a href="http://golf.shinh.org/reveal.rb?Bijective+base+10+add/tails_1536134169&amp;sed" rel="nofollow noreferrer">tails</a>. Works only for integers other than 0. The chosen unary digit (<code>a</code> in the below program) occurs 3 times in the program.</p>
<pre><code>:
s/a/&lt;&lt;123456789a01&gt;/
s/(.)&lt;.*\1(a?.).*&gt;/\2/
t
</code></pre>
<p><a href="https://tio.run/##K05N@f/fiqtYX1ffxsbQyNjE1MzcwlLXwNBOHyiooadpo6cVY6ihq6Wnqadlpx9jpM9V8v@/LtHgX35BSWZ@XvF/3SIA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a> and <a href="https://tio.run/##FcgxCoQwEEDR3lNMsaAGJuPEddeV4EnSKAloo2LSCLn7uFb/8ecpLnKFmJcwecAX53QCenBue3QBZtqPRDF4mtftKeAJpQxFJCRr2bTv7vPtf9jwSP9Z6dpq5bhCpWutRnKGiiSlSNsYvgE" rel="nofollow noreferrer" title="Bash – Try It Online">(bash wrapper for easier testing)</a></p>
<p>If you have a prefix (<code>&lt;</code> here, occurs 4 times) before your number, you can make 0 show up with just 2 more bytes:</p>
<pre><code>:
s/&lt;|a/&lt;&lt;123456789&amp;01&gt;/
s/(.)&lt;.*\1(a?.).*&gt;/\2/
t
</code></pre>
<p><a href="https://tio.run/##jVLLdtpADN3zFUoWMQTH2Ia0AQxd9xuSLgYswzRmxh3NHOCcfnupNA5JTlf18UMa63HvlQjry2WxpEn1W02qqiins8cvX5/md3mxngxoMsxGVXb/UgzVt2yU3a8nL@Vk6S@XvT2C9glBQqHrLGGdgLewQQhsL@C5Ukql8CAfpZZQpdCb/3PFvB8w/PccyOu2haN1rwR@b8Nun8LZBrCmPYNBrKESFCTo8iWQjU1X/IwGA7IHBNtwoibgm4E2oV3A7GlcjKer2VMPuSjHj@NyVZSVXHIy5b9TtsUqxVYqencgeUXktwke5uMp3KxgzkkwFG81F9A90CUkVQI/A3moLZJJPGizdXhA48FogwSdsx269jxiqKAFKIIJhw06wJMmTyxvYx32wrtgWNM3MWLdVr@iyOHAcqqDWu@0h8HgSvgGFMcY5MLKw14R3K5vGQXXg2GNLXoG0Th7iJ0b7bhmouJc5aBV4q8TyRCfvNNmx8IyVO6aMLBtcNoGSqViD2yzjbEOd3jiuejG02deXIobsgK2p9s5bPTp2pHChvBXiAr18UfNZPr21ZpgKPEoMKAJLpLea0@jTEbPGK6kLJNmJqkkmg/dP0NZsJYb3PKOEBQplO/ONIX5u6PyFPKPuAy@99J3PH5pYvAY68Qx5bxiAu3uqlgvqYxgGaN54FusJSTJE14LWQpsGtz6N/qHBeS8QStZY34rlf2xndfW0OXB/QU" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online! (test cases show off how it functions)</a></p>
<h2>Decimal to UCD, <code>sed</code> at 39 bytes</h2>
<p>From a solution by <a href="http://golf.shinh.org/reveal.rb?Collatz+Problem/%2520_1480130793&amp;sed" rel="nofollow noreferrer">%20</a>. Works on all integers, including negative ones.</p>
<pre><code>:
s/[1-9]/&amp;;/g
y/123456789/012345678/
t
</code></pre>
<p><a href="https://tio.run/##K05N@f/fiqtYP9pQ1zJWX81aP52rUt/QyNjE1MzcwlLfAMbU5yr5/9/QwNLsX35BSWZ@XvF/3SIA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<h2>Decimal to Unary (via UCD), <code>sed</code> 55 bytes</h2>
<p>From a solution by <a href="http://golf.shinh.org/reveal.rb?Boxception/tails_1626672646&amp;sed" rel="nofollow noreferrer">tails</a>. Works on all integers, including negative ones.</p>
<pre><code>:
s/[1-9]/&amp;;/g
y/123456789/012345678/
s/;0/9;/
t
s/0//g
</code></pre>
<p><a href="https://tio.run/##K05N@f/fiqtYP9pQ1zJWX81aP52rUt/QyNjE1MzcwlLfAMbUB6qxNtC3tNbnKgEyDfT10///NzKwBAA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a> and <a href="https://tio.run/##S0oszvivn19Qol@cmqKflJkHohXU/1txFetHG@paxuqrWeunc1XqGxoZm5iamVtY6hvAmPpANdYG@pbW@lwlQKaBvn76f/WatPycFAVdw5rSvMxCBd3k/7pGBpYA" rel="nofollow noreferrer" title="Bash – Try It Online">(bash wrapper)</a></p>
<p>If you don't care about 0, you can golf a byte off of this:</p>
<pre><code>:
s/\w/&amp;#/g
y/0123456789/!!12345678/
s/#!/9#/
t
s/!//g
</code></pre>
<p><a href="https://tio.run/##K05N@f/fiqtYP6ZcX01ZP52rUt/A0MjYxNTM3MJSX1ERxtYHKlFW1LdU1ucqATIV9fXT//83MrAEAA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>use the e flag on s for simplifying things</h1>
<p>your output may depend on which shell sed is using. I'll only include things that work on TIO at time of writing.</p>
<p>I know there are lots of decimal to unary and back solutions on here, but they are all unreasonably long. here's some that are much shorter:</p>
<h3>decimal to unary:</h3>
<pre><code>s/.*/echo {0..&amp;}/e
s/\w//g
</code></pre>
<p>this sends <code>echo {0..#}</code> to the shell which usually expands it into a list from 0 to #, with spaces inbetween each number. remove the numbers and you have the right number of spaces. works for any positive integer</p>
<h3>unary to decimal:</h3>
<pre><code>s/.*/wc -L&lt;&lt;&lt;&amp;/e
s/.*/wc -L&lt;&lt;&lt;'&amp;'/e         #the above if you're using spaces as your unary char
s/.*/echo &amp;|wc -L/e        #shells that don't support &lt;&lt;&lt; redirects
s/.*/echo '&amp;'|wc -L/e      # + using spaces
</code></pre>
<p>these send all the chars to <code>wc</code> which returns the longest line with <code>-L</code> (the <code>&lt;&lt;&lt;</code> redirect and <code>echo</code> add a newline to the end). the unary must consist of the entire line; as it runs the text of the full line after the swap, so if you leave something out you end up trying to run <code>loremipsumwc -L&lt;&lt;&lt;'   '</code></p>
<h3>basic math (-E)</h3>
<pre><code>s/(.*) (.*)/echo $[\1+\2]/e   #two numbers seperated by a space
s/(.*) (.*)/echo $[\1*\2]/e   #there's at least + - * / %
</code></pre>
<p><a href="https://tio.run/##K05N0U3PK/3/v1hfQ09LUwFE6KcmZ@QrqETHGGrHGMXqp/7/b6xgwmVioGDEZWRkbGGgYG5pYWzyL7@gJDM/r/i/risA" rel="nofollow noreferrer" title="sed – Try It Online">Try it online!</a></p>
<h3>idk, go have fun</h3>
<pre><code>s/.*/for i in {1..&amp;};{ echo $[&amp;%$i];}/e
</code></pre>
<p>basically if a shell solution is a lot shorter than a sed solution it doesn't need to be that way</p>
</div>
<div id="pu2" class="pu"><h1><code>\L</code>, <code>\U</code>, <code>\E</code> for fractals in GNU sed</h1>
<p>The case switching special sequences help in &quot;toggling&quot; a line. An example is the following challenge to produce a fractal X on <a href="http://golf.shinh.org/p.rb?Fractal+X" rel="nofollow noreferrer">anagol</a>, whose shortest sed solution by mitchs et al is reproduced here.</p>
<pre><code>s/^/X\n/
:
s/^.\{,27\}\n/&amp;\L&amp;\U&amp;/mg
//s/[ X]/&amp; &amp;/g
s/x/ X /g
t
</code></pre>
<p><a href="https://tio.run/##K05N@f@/WD9OPyImT5/LigvI1Iup1jEyj6kFCqjF@KjFhKrp56Zz6esX60crRMTqqymo6acD1VXoK0QoAFkl//8DAA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>If the fractal uses another character to fill it, then at the end you can add a transliterate.</p>
</div>
<div id="pu3" class="pu"><h2>Store more in your hold space</h2>
<p>To preform a loop without losing the number you used as your counter, you can use <code>h;H</code> to add your number to the hold space twice, and then only decrement after the newline <code>x;s/\n./\n/;x</code>. This essentially gives you two holdspaces instead of just one. Now when the loop finishes you still have your number and can even copy it again to use as many times as you need like <code>x;s/.*/&amp;&amp;/;x</code> (note this will copy the newline as well)</p>
</div>
<div id="pu4" class="pu"><p>Okay, here's a weird functioning of (GNU) sed's regex. For example, if the pattern space is only <code>qqq</code>, then the extended regex <code>s/^|q|$/&lt;&amp;&gt;/g</code> gives <code>&lt;q&gt;&lt;q&gt;&lt;q&gt;</code>. <a href="https://tio.run/##K05N@f@/WD@uprBGRd9GzU4//f//wsLCf/kFJZn5ecX/dYsA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>I'm not sure, but I think it is because if a character matches, then do the empty strings surrounding it. So because the terminal <code>q</code> matches, the match also includes the end of the pattern space, so <code>$</code> by itself doesn't get matched because otherwise it would overlap with the previous match (and likewise for <code>^</code> and even I think for word boundaries and the like).</p>
<p>An example where this is useful is in the following (rather contrived) task:</p>
<ul>
<li>an input of <code>a</code> should give <code>ab</code>,</li>
<li>and inputs matching <code>/a(c+)/</code> should give <code>ab\1b</code>, for example, an input of <code>accc</code> should give <code>abcccb</code></li>
</ul>
<p>Without the trick I can get 11 bytes (with the <code>-E</code> flag)</p>
<pre><code>s/a|c+/&amp;b/g
</code></pre>
<p>but using it gives 10 bytes</p>
<pre><code>s/a|$/&amp;b/g
</code></pre>
<p><a href="https://tio.run/##K05N@f@/WD@xRkVfLUk//f//RK7EZCACYwiR/C@/oCQzP6/4v24RAA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>(Do let me know if there is a better example that uses this behaviour).</p>
</div>
<div id="pu5" class="pu"><h1>Use back references</h1>
<p>Most people know that you can mark some parts of your regex with <code>\(\)</code> and later refer to it as <code>\1</code> (or <code>\2</code> for the second and so on) in your substitution.</p>
<p>But you hardly ever see <em>back references</em>, using <code>\1</code> in the regex itself. For extended regular expressions (option <code>-E</code> to <code>sed</code>), this has been removed from the standard, but GNU <code>sed</code> supports it anyhow, so it works at tio.run, for example.</p>
<p>For example, this ERE <code>(.)\1</code> matches a double character or this one <code>(.).*\1</code> appearing twice in the pattern space. <a href="https://codegolf.stackexchange.com/a/266985/72726">See here</a> for an example, how this makes things easier (and much shorter!).</p>
<p>Complicated task like <a href="https://codegolf.stackexchange.com/questions/266951/get-the-bible-verse/266969#266969">this one</a> looking for matches in a file or <a href="https://codegolf.stackexchange.com/questions/266223/find-the-conflict-free-sitting-arrangement/266251#266251">this one</a> or <a href="https://codegolf.stackexchange.com/questions/265307/play-a-game-of-memory/265363#265363">this one</a> would almost be impossible without this feature.</p>
<h1>Math with back references</h1>
<p>And it's great for teaching <code>sed</code> to count. I know you can solve some of those problems using <code>y</code>, but as soon as you have more than one thing to increment or decrement, this is the way to go. See examples <a href="https://codegolf.stackexchange.com/questions/264903/order-by-earliest-lower-digit/265011#265011">here</a> or <a href="https://codegolf.stackexchange.com/questions/38325/minimum-excluded-number/265157#265157">here</a> or <a href="https://tio.run/##XcyxDsIgFIXhnae4Boe2CT1woRbs7FsQpxrj0jYBX1@UbjY505ecPz1m9VzepSTcobRh64bL6IOEuBqR0DR9@1vftdEqRBM54J9ZVra6MkmQ0ZhyvUoNWbHvJAHbBMJpPiRpT9Ixed6TENmUYskJp4kFs/WaxuCt@6xbfq1LKur2BQ" rel="nofollow noreferrer" title="sed – Try It Online">try the 151-byte decimal add online</a> to examine how it works.</p>
</div>
<div id="pu6" class="pu"><h1><code>i</code>, <code>a</code>, and <code>c</code></h1>
<p>(The answer focuses on GNU sed because GNU sed's invocation of these commands is slightly shorter than that of POSIX, but otherwise I think the functionality should be the same).</p>
<p>These insert to, append to, and change the pattern space respectively. The lines they add are printed and so are not edited into the pattern space, meaning that the program will not be able to manipulate these lines. But they are shorter than <code>s</code>, if you want to insert some unchanging lines. Compare the following two lines:</p>
<pre><code>s/^/text\n/ # 11 bytes
itext       #  5 bytes
</code></pre>
<p>Now I want to focus on <code>c</code>. <code>c text</code> replaces the pattern space with <code>text</code>. This text will be printed immediately, since the <code>c</code> makes sed move on to the next line. This means that the commands follows a call to <code>c</code> are effectively ignored. This behaviour of <code>c</code> can be useful in challenges where there are only few possible outputs, particularly when combined with the conditional <code>/.../</code>.</p>
<p>An example is the <a href="https://codegolf.stackexchange.com/q/55422">'Hello, World!'</a> challenge, where <code>c</code> is shorter than <code>s</code>:</p>
<pre><code>s/^/Hello, World!/ # 18 bytes
cHello, World!     # 14 bytes
</code></pre>
<p>Another example is <a href="https://codegolf.stackexchange.com/q/187816">this challenge</a> (<a href="https://codegolf.stackexchange.com/a/190946">sed answer</a>) to swap the strings <code>Good</code> and <code>Bad</code>. The outputs are restricted to being <code>Good</code> (when the input is <code>Bad</code>) or <code>Bad</code> (when the input is <code>Good</code>).</p>
<p><code>s</code> gives 21 bytes:</p>
<pre><code>s/Goo/Ba/;t;s/Ba/Goo/
</code></pre>
<p>Using <code>c</code> (in combination with <code>/.../</code>) gives 13 instead:</p>
<pre><code>/B/cGood
cBad
</code></pre>
<p>If the input matches <code>/B/</code>, i.e. it the input is <code>Bad</code>, <code>Good</code> is printed and the program skips processing this input line. So the program only ever reaches the second line if the input doesn't match <code>B</code>, i.e. if the input is <code>Good</code>. Then in this case the output is set to <code>Bad</code>.</p>
</div>
<div id="pu7" class="pu"><h1>Combine <code>s</code> substitutions</h1>
<p>The <code>s</code> command takes many bytes (4 + 1 for the statement separator), so combining them can save bytes.</p>
<p><a href="https://codegolf.stackexchange.com/a/221378">An example</a>: the following is at 17 bytes</p>
<pre><code>s/\S+ //
s/\S+$//
</code></pre>
<p>while combining the two substitutions gives 15 bytes</p>
<pre><code>s/^\S+ |\S+$//g
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Make use of sed's line-handling ability</h1>
<p>With flexible challenge I/O, it can pay to have input/output separated by newlines instead of any other character by taking advantage of sed's commands for handling lines (like <code>D</code>, <code>N</code>, <code>n</code>, <code>G</code>, <code>H</code>, <code>P</code>, <code>s</code>'s <code>m</code> flag) instead of only being limited to <code>s</code> substitutions.</p>
<p>This can also open the opportunity for using <code>D</code> for looping instead of labels and goto, especially in sed versions that don't permit empty labels.</p>
</div>
<div id="pu9" class="pu"><h1><code>#n</code> at first to imply <code>-n</code></h1>
<blockquote>
<p>The &quot;#&quot; and the remainder of the line are ignored (treated as a comment), with the single exception that if the first two characters in the file are #n, the default output is suppressed; this is the equivalent of specifying -n on the command line.</p>
</blockquote>
<p><a href="https://pubs.opengroup.org/onlinepubs/7908799/xcu/sed.html" rel="nofollow noreferrer">Source: sed (from SUSv2)</a></p>
<p>This is useful if you prefer NOT to output something by default.</p>
<p>...But is it really useful? <code>-n</code> adds either 1 or 2 bytes but <code>#n</code> and LF adds 3.</p>
</div>
<div id="pu10" class="pu"><h1>The <code>L</code> command in old GNU sed versions</h1>
<p>Used, for example, in the second solution in <a href="https://codegolf.stackexchange.com/a/220633/">https://codegolf.stackexchange.com/a/220633/</a>. Older versions of GNU sed like GNU sed 4.2.2 have the <code>L</code> command, which was later removed in newer versions. From <a href="https://web.archive.org/web/20161224125356/https://www.gnu.org/software/sed/manual/sed.html#Extended-Commands" rel="nofollow noreferrer">the archived docs</a>,</p>
<blockquote>
<p><code>L</code> <em>n</em></p>
<p>This GNU <code>sed</code> extension fills and joins lines in pattern space to produce output lines of (at most) <em>n</em> characters, like <code>fmt</code> does; if <em>n</em> is omitted, the default as specified on the command line is used. This command is considered a failed experiment and unless there is enough request (which seems unlikely) will be removed in future versions.</p>
</blockquote>
</div>
<div id="pu11" class="pu"><p>Mostly useless step:</p>
<pre><code>y|A-y|B-z|
</code></pre>
<p>This will only translate <code>A</code> to <code>B</code> and <code>y</code> to <code>z</code> (... and <code>-</code> to <code>-</code> ;), but nothing else,
so</p>
<pre><code>sed -e 'y|A-y|B-z|' &lt;&lt;&lt;'Hello world!'
</code></pre>
<p>will just return:</p>
<pre><code>Hello world!
</code></pre>
<p>You could ensure this will be useless, for sample by using this on lower-case hexadecimal values (containing only <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code>, <code>8</code>, <code>9</code>, <code>a</code>, <code>b</code>, <code>c</code>, <code>d</code>, <code>e</code> or <code>f</code>.)</p>
<p>A little worst:</p>
<pre><code>sed '; ;/s/b;y|A-y|B-z|;s ;s/ //; ; ;' &lt;&lt;&lt;'Hello world'
Hello world
</code></pre>
<p>Why did this <strong>not</strong> suppress the space?</p>
</div>
<div id="pu12" class="pu"><h2>Empty regexes are equivalent to the previously encountered regex</h2>

<p><sup>(thanks to <a href="https://codegolf.stackexchange.com/users/57100/riley">Riley</a> for discovering this from an <a href="http://golf.shinh.org/reveal.rb?ASCII+Pylon/mitchs+%28tails%29_1524733941&amp;sed" rel="nofollow noreferrer">anagol submission</a>)</sup></p>

<p>Here is an example where we are tasked with creating 100 <code>@</code>s in an empty buffer.</p>

<pre><code>s/$/@@@@@@@@@@/;s/.*/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/ # 31 bytes
s/.*/@@@@@@@@@@/;s//&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/  # 30 bytes
</code></pre>

<p>The second solution is 1 byte shorter and uses the fact that empty regexes are filled in with the last encountered regex. Here, for the second substitution, the last regex was <code>.*</code>, so the empty regex here will be filled with <code>.*</code>. This also works with regexes in <code>/conditionals/</code>.</p>

<p>Note that it is the previously <em>encountered</em> regex, so the following would also work.</p>

<pre><code>s/.*/@@@@@@@@@@/;/@*/!s/$/@/;s//&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/
</code></pre>

<p>The empty regex gets filled with <code>@*</code> instead of <code>$</code> because <code>s/$/@/</code> is never reached.</p>
</div>
<div id="pu13" class="pu"><h1>Append a newline in one byte</h1>

<p>The <code>G</code> command appends a newline and the contents of the hold space to the pattern space, so if your hold space is empty, instead of this:</p>

<pre><code>s/$/\n/
</code></pre>

<p>You can do this:</p>

<pre><code>G
</code></pre>

<h1>Prepend a newline in three bytes</h1>

<p>The <code>H</code> command appends a newline and the contents of the pattern space to the hold space, and <code>x</code> swaps the two, so if your hold space is empty, instead of this:</p>

<pre><code>s/^/\n/
</code></pre>

<p>You can do this:</p>

<pre><code>H;x
</code></pre>

<p>This will pollute your hold space, so it only works once. For two more bytes, though, you could clear your pattern space before swapping, which is still a savings of two bytes:</p>

<pre><code>H;z;x
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Read the whole input at once with <code>-z</code></h1>

<p>Often you need to operate on the whole input at once instead of one line at a time. The <code>N</code> command is useful for that:</p>

<pre><code>:
$!{N;b}
</code></pre>

<p>...but usually you can skip it and use the <code>-z</code> flag instead.</p>

<p>The <code>-z</code> flag makes sed use NUL (<code>\0</code>) as its input line separator instead of <code>\n</code>, so if you know your input won’t contain <code>\0</code>, it will read all of the input at once as a single “line”:</p>

<pre><code>$ echo 'foo
&gt; bar
&gt; baz' | sed -z '1y/ao/eu/'
fuu
ber
bez
</code></pre>

<p><a href="https://tio.run/##S0oszvj/PzU5I19BPS0/nyspsQiIq9QVahSKU1MUdKsU1A0r9RPz9VNL9dX//wcA" rel="noreferrer" title="Bash – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><p>I know this is an old thread, but I just found those clumsy decimal to UCD converters, with almost a hundred bytes, some even messing the hold space or requiring special faulty <code>sed</code> versions.</p>

<p>For <strong>decimal to UCD</strong> I use (68 bytes; former best posted here 87 bytes)</p>

<pre><code>s/$/\n9876543210/
:a
s/\([1-9]\)\(.*\n.*\)\1\(.\)/\3x\2\1\3/
ta
P;d
</code></pre>

<p><strong>UCD to decimal</strong> is (also 66 bytes; former best posted here 96)</p>

<pre><code>s/$/\n0123456789/
:a      
s/\([0-8]\)x\(.*\n.*\)\1\(.\)/\3\2\1\3/
ta      
P;d
</code></pre>

<ul>
<li><code>\n</code> in the replacement is not portable. You can use a different character instead and save two bytes, but you'll need more bytes to remove the appendix instead of <code>P;d</code>; see next remark. Or, if your hold space is empty, do <code>G;s/$/9876543210/</code> without byte penalty.</li>
<li>If you need further processing, you'll need some more bytes for <code>s/\n.*//</code> instead of <code>P;d</code>.</li>
<li>You could save two bytes each for those buggy old GNU <code>sed</code> versions</li>
<li>No, you can't save those six backslashes as extended regular expressions don't do backreferences</li>
</ul>
</div>
<div id="pu16" class="pu"><p>Expanding upon this <a href="https://codegolf.stackexchange.com/a/51329/59010">tip answer</a>, regarding the conversions between decimal and plain unary number formats, I present the following alternative methods, with their advantages and disadvantages.</p>

<p><strong>Decimal to plain unary:</strong> 102 + 1(r flag) = 103 bytes. I counted <code>\t</code> as a literal tab, as 1 byte.</p>

<pre class="lang-sed prettyprint-override"><code>h
:
s:\w::2g
y:9876543210:87654321\t :
/ /!s:$:@:
/\s/!t
x;s:-?.::;x
G;s:\s::g
/\w/{s:@:&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;:g;t}
</code></pre>

<p><a href="https://tio.run/nexus/sed#@5/BZcVVbBVTbmVllM5VaWVpYW5mamJsZGhgBWPFlChYcekr6CsWW6lYOQCZMcX6iiVcFdbFVrr2elZW1hVc7kB2TLGVVTpQsly/uhioTA0OrNKtS2r//zc0@pdfUJKZn1f8X7cIAA" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>

<p>Advantage: it is 22 bytes shorter and as extra, it works with negative integers as input</p>

<p>Disadvantage: it overwrites the hold space. However, since it's more likely that you'd need to convert the input integer right at the start of the program, this limitation is rarely felt.</p>

<p><strong>Plain unary to decimal:</strong>  102 + 1(r flag) = 103 bytes</p>

<pre class="lang-sed prettyprint-override"><code>s:-?:&amp;0:
/@/{:
s:\b9+:0&amp;:
s:.9*@:/&amp;:
h;s:.*/::
y:0123456789:1234567890:
x;s:/.*::
G;s:\n::
s:@::
/@/t}
</code></pre>

<p><a href="https://tio.run/nexus/sed#PYy7EkAwFET7fIgihhtvWYV0fkKlosGIgjF@XdwobHV25uw6i6hFoCDI0AVh0Q86hAo8xloaEOPYcJEEiBMqSbO8KKta4yeeH6xQLFnpmPoZ/sDg@91v54zPs6z7tMzWRdsL" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>

<p>Advantage: it is 14 bytes shorter. This time both tip versions work for negative integers as input.</p>

<p>Disadvantage: it overwrites the hold space</p>

<p>For a complicated challenge, you'll have to adapt these snippets to work with other information that may exist in the pattern space or hold space, besides the number to convert. The code can be golfed more, if you know you only work with positive numbers or that zero alone is not going to be a valid input / output.</p>

<p>An example of such challenge answer, where I created and used these snippets, is the <a href="https://codegolf.stackexchange.com/a/115528/59010">Reciprocal of a number (1/x)</a>.</p>
</div>
<div id="pu17" class="pu"><p>There's no built-in arithmetic, but calculations can be done in unary or in unary-coded decimal.  The following code converts decimal to UCD, with x as the unit and 0 as the digits separator:</p>

<pre><code>s/[1-9]/0&amp;/g
s/[5-9]/4&amp;/g
y/8/4/
s/9/4&amp;/g
s/4/22/g
s/[37]/2x/g
s/[26]/xx/g
s/[1-9]/x/g
</code></pre>

<p>and here's the conversion back to decimal:</p>

<pre><code>s/0x/-x/g
s/xx/2/g
y/x/1/
s/22/4/g
s/44/8/g
s/81/9/g
s/42/6/g
s/21/3/g
s/61/7/g
s/41/5/g
s/-//g
</code></pre>

<p>These are both taken from <a href="/a/49442">an answer to "Multiply two numbers without using any numbers"</a>.</p>

<p>Plain old unary can be converted using this pair of loops from <a href="/a/58007">this answer to "{Curly Numbers};"</a>, where the unit is <code>;</code>.  I've used <code>v</code> and <code>x</code> to match Roman for <code>5</code> and <code>10</code>; <code>b</code> comes from "bis".</p>

<pre><code># unary to decimal
:d
/;/{
s/;;;;;/v/g
s/vv/x/g
/[;v]/!s/x\+/&amp;0/
s/;;/b/g
s/bb/4/
s/b;/3/
s/v;/6/
s/vb/7/
s/v3/8/
s/v4/9/
y/;bvx/125;/
td
}

# Decimal to unary
:u
s/\b9/;8/
s/\b8/;7/
s/\b7/;6/
s/\b6/;5/
s/\b5/;4/
s/\b4/;3/
s/\b3/;2/
s/\b2/;1/
s/\b1/;0/
s/\b0//
/[^;]/s/;/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/g
tu
</code></pre>
</div>
<div id="pu18" class="pu"><p>If not explicitly banned by the question, the consensus for <a href="http://meta.codegolf.stackexchange.com/questions/5343/can-numeric-input-output-be-in-unary">this meta question</a> is that numerical input may be in unary.  This saves you the 86 bytes of decimal to unary as per <a href="https://codegolf.stackexchange.com/a/51329/11259">this answer</a>.</p>
</div>
<div id="pu19" class="pu"><p>In sed, the closest thing to a function that you can have is a label. A function is useful because you can execute its code multiple times, thus saving a lot of bytes. In sed however you would need to specify the return label and as such you can't simply call this "function" multiple times throughout your code the way you would do it in other languages.</p>

<p>The workaround I use is to add in one of the two memories a flag, which is used to select the return label. This works best when the function code only needs a single memory space (the other one).</p>

<p><strong>Example showing what I mean:</strong> taken from a project of mine to write a small game in sed</p>

<pre class="lang-sed prettyprint-override"><code># after applying the player's move, I overwrite the pattern space with the flag "P"
s/.*/P/
b check_game_status
:continue_turn_from_player
#code
</code></pre>

<hr>

<pre class="lang-sed prettyprint-override"><code>b calculate_bot_move
:return_bot_move
# here I call the same function 'check_game_status', but with a different flag: "B"
s/.*/B/
b check_game_status
:continue_turn_from_bot
#code (like say 'b update_screen')
</code></pre>

<hr>

<pre class="lang-sed prettyprint-override"><code>:check_game_status   # this needs just the hold space to run
#code
/^P$/b continue_turn_from_player
/^B$/b continue_turn_from_bot
</code></pre>

<p>The labels should be golfed of course to just one letter, I used full names for a better explanation.</p>
</div>
<div id="pu20" class="pu"><p>Let's talk about the <code>t</code> and <code>T</code> commands, that although they are explained in the man page, it's easy to forget about it and introduce bugs accidently, especially when the code gets complicated.</p>

<p><strong>Man page statement for <code>t</code>:</strong></p>

<blockquote>
  <p>If  a <code>s///</code> has done a successful substitution since the last input line was read and since the last t or T command, then branch to label.</p>
</blockquote>

<p><strong>Example showing what I mean:</strong> Let's say you have a list of numbers and you want to count how many negatives there are. Partial code below:</p>

<pre class="lang-sed prettyprint-override"><code>1{x;s/.*/0/;x}                   # initialize the counter to 0 in hold space
s/-/&amp;/                           # check if number is negative
t increment_counter              # if so, jump to 'increment_counter' code block
b                                # else, do nothing (start a next cycle)

:increment_counter
#function code here
</code></pre>

<p>Looks ok, but it's not. If the first number is positive, that code will still think it was negative, because the jump done via <code>t</code> for the first line of input is performed regardless, since there was a successful <code>s</code> substitution when we initialized the counter! Correct is: <code>/-/b increment_counter</code>.</p>

<p>If this seemed easy, you could still be fooled when doing multiple jumps back and forth to simulate functions. In our example the <code>increment_counter</code> block of code for sure would use a lot of <code>s</code> commands. Returning back with <code>b main</code> might cause another check in "main" to fall in the same trap. That is why I usually return from code blocks with <code>s/.*/&amp;/;t label</code>. It's ugly, but useful.</p>
</div>
<div id="pu21" class="pu"><p>Instead of clearing the pattern space with <code>s/.*//</code>, use the <code>z</code> command (lowercase) if you go with GNU sed. Besides the lower bytes count, it has the advantage that it won't start the next cycle as the command <code>d</code> does, which can be useful in certain situations.</p>
</div>
<div id="pu22" class="pu"><p>When repeatedly replacing in a loop:</p>

<pre><code>loop:
s/foo/bar/g
tloop
</code></pre>

<p>it's usually unnecessary to replace globally, as the loop will eventually replace all occurrences:</p>

<pre><code># GNU sed
:
s/foo/bar/
t
</code></pre>

<p>Note also the GNU extension above: a label can have an empty name, saving more precious bytes.  In other implementations, a label cannot be empty, and jumping without a label transfers flow to the end of script (i.e. same as <code>n</code>).</p>
</div>
<div id="pu23" class="pu"><p>As mentioned in <code>man sed</code> (GNU), you can use any character as a delimiter for regular expressions by using the syntax</p>

<pre><code>\%regexp%
</code></pre>

<p>where <code>%</code> is a placeholder for any character.</p>

<p>This is useful for commands like</p>

<pre><code>/^http:\/\//
</code></pre>

<p>which are shorter as</p>

<pre><code>\%^http://%
</code></pre>

<p>What is mentioned in the <a href="https://www.gnu.org/software/sed/manual/sed.html#Regular-Expressions" rel="noreferrer">GNU sed manual</a> but <strong>not</strong> in <code>man sed</code> is that you can change the delimiters of <code>s///</code> and <code>y///</code> as well.</p>

<p>For example, the command</p>

<pre><code>ss/ssg
</code></pre>

<p>removes all slashes from the pattern space.</p>
</div>
<div id="pu24" class="pu"><p>If you need to use <a href="https://www.gnu.org/software/sed/manual/sed.html#Programming-Commands">labels</a> then for sure you'll want your label names to be as short as possible.  In fact taken to the extreme, you may even use the empty string as a label name:</p>

<pre><code>:    # define label ""
p    # print pattern space
b    # infinite loop! - branch to label ""
</code></pre>
</div>
<div id="pu25" class="pu"><p>The <a href="https://www.gnu.org/software/sed/manual/sed.html">GNU sed documentation</a> describes the <code>s</code> command as <em>"sed's Swiss Army Knife"</em>.  But if all you want to do is replace all instances of one character with another, then the <code>y</code> command is what you need:</p>

<pre><code>y/a/b/
</code></pre>

<p>is one char shorter than:</p>

<pre><code>s/a/b/g
</code></pre>
</div>
<div id="pu26" class="pu"><p>Consider using extended regex syntax (in GNU sed).  The <code>-r</code> option costs one byte in scoring, but using it just once to eliminate the backslashes from a pair of <code>\(...\)</code> has already paid for itself.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/51323/">51323</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




