<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::204700</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>048</td><td>APLNARS</td><td>250403T061928Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/279041#279041">Rosario</a></td></tr>
<tr d-ix="1"><td>114</td><td>C gcc lm m32</td><td>200514T000727Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204717#204717">Mitchell</a></td></tr>
<tr d-ix="2"><td>070</td><td>SageMath</td><td>200514T121755Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204741#204741">Noodle9</a></td></tr>
<tr d-ix="3"><td>023</td><td>05AB1E</td><td>200514T090144Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204732#204732">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>060</td><td>Python 3</td><td>200514T114437Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204739#204739">xnor</a></td></tr>
<tr d-ix="5"><td>071</td><td>Python 3</td><td>200514T003718Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204719#204719">svavil</a></td></tr>
<tr d-ix="6"><td>066</td><td>J</td><td>200513T214336Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204711#204711">Jonah</a></td></tr>
<tr d-ix="7"><td>083</td><td>Python 3</td><td>200513T230023Z</td><td><a href="https://codegolf.stackexchange.com/questions/204700/who-took-my-toilet-paper/204715#204715">Surculos</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 48 chars</h1>
<pre><code>{(i r g)←⍵⋄(a b)←(○2)×r,i÷g⋄1⍕(g÷○2)×b{4○⍵}∫a+b}
</code></pre>
<p>It calculate the integral <code>(g÷○2)×b{4○⍵}∫a+b</code>, where <code>○2</code> is <code>2π</code>, <code>a</code> is <code>2πr</code>, <code>b</code> is <code>2πi÷g</code>, and
<code>{4○⍵}</code> is the function <code>{√1+⍵*2}</code>.  Test:</p>
<pre><code>  f←{(i r g)←⍵⋄(a b)←(○2)×r,i÷g⋄1⍕(g÷○2)×b{4○⍵}∫a+b}
  f 5 3 4
207.7
  f 0 1 1
3.4
  f 12 9 2
1187.7
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a> -lm -m32, <sup><s>129</s> <s>120</s> <s>117</s></sup> 114 bytes</h1>



<pre class="lang-c prettyprint-override"><code>#define F float
F i(F u,F g){F s=hypot(u,g/=6.2832);return(u*s/g+g*log(s+u))/2;}
#define f(I,R,G)i(I+G*R,G)-i(I,G)
</code></pre>

<p><a href="https://tio.run/##dYzBisIwFEX3@YqgDCTta2tTFYeOs4y4de2mpE0MpIk0yYCIv26mLmY3ru7hHjiiUEKktOwHqe2AOZbGdQFxrAnHEThW9M6x319uVxdIBFXttyXbNYy20xDiZEnMfKVylRmniM8jpRVrH@gvKMkRTnCgmhzzQ/aiYsZ50lJbYWI/4C8feu3KyzdC2gY8dtqSH6d7iu7oOs2XJIuPspZnu4C5t4Iaakrb/9wGGli/cTWDT2Av@UhPIU2nfCrMmIqxYb8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p><em>5 bytes off thanks to ceilingcat (by using the hypot library function).</em></p>

<p><em>4 bytes off thanks to dingledooper (who suggested using a typedef to shorten the float declarations -- I ended up using a macro instead to implement the same idea).</em></p>

<p><em>3 bytes off by using an approximation to <span class="math-container">\$2\pi\$</span> that's sufficient for the accuracy required by the challenge.</em></p>

<p><em>3 more bytes thanks to ceilingcat (turning f from a function into a macro).</em></p>

<p>The auxiliary function <code>i</code> computes the appropriate indefinite integral, and then <code>f</code> computes the desired definite integral by evaluating the indefinite integral at the two endpoints and subtracting.</p>
</div>
<div id="pu2" class="pu"><h1><a href="http://doc.sagemath.org/html/en/index.html" rel="nofollow noreferrer">SageMath</a>, 70 bytes</h1>



<pre><code>lambda I,R,G:N(G/2/pi*(sqrt(1+x^2)).integral(x,2*pi*I/G,2*pi*(I/G+R)))
</code></pre>

<p><a href="https://sagecell.sagemath.org/?z=eJwljMEKgkAYhO8-xeLp_3XadbeWSqireOngAwhGrSyYydJBEN-9zebyzTDMuMvQve6PTtRoUJU3qpRRk8-IdD63hltpWfrx8-xDN9AMk8WyVtXfUHR5w8yJewfhEdALPwoii6O0KORJM6iAxo8WexwitcEZhrlMRNQU4j25dNnmq9hdxeJoC7ym_AVlsSkn&amp;lang=sage&amp;interacts=eJyLjgUAARUAuQ==" rel="nofollow noreferrer">Try it online!</a>  </p>

<p><strong>How</strong></p>

<p>Uses the formula for the length of the spiral:
<span class="math-container">$$ L=\frac{G}{2\pi} \int_{\frac{2\pi I}{G}}^{\frac{2\pi(I+GR)}{G}}\sqrt{1+\theta^2}d\theta $$</span></p>

<p>from <a href="https://codegolf.stackexchange.com/users/92237/surculose-sputum">Surculose Sputum</a>'s <a href="https://codegolf.stackexchange.com/a/204715/9481">Python answer</a>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 23 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>4°©*Ý*®/+nŽ›Ñ₄/*²n+tO®/
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/204719/52210"><em>@svavil</em>'s Python answer</a> (their revision without complex number), so make sure to upvote them!</p>
<p>Input-order as <code>r,g,i</code>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f/f5NCGQyu1Ds/VOrROXzvv6N5HDbsOT3zU1KKvdWhTnnaJP1D4/39jLhMuUwA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXL4dbi0KCE/yaHNhxaqXV4rtahdfraeUf3PmrYdXjio6YWfa2IPO0Sf6Dof53/0dGGOoY6BrE60cY6JjqmQNpSx0jH0Cg2FgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>4°                      # Push 10**4: 10000
  ©                     # Store it in variable `®` (without popping)
   *                    # Multiply it by the first (implicit) input `r`
    Ý                   # Push a list in the range [0, 10000r]
     *                  # Multiply each value by the second (implicit) input `g`
      ®/                # Divide each by `®`
        +               # Add the third (implicit) input `i` to each value
         n              # Take the square of that
          Ž›Ñ           # Push compressed integer 39478
             ₄/         # Divide it by 1000: 39.478
               *        # Multiply it by each value
                ²       # Push the second input `g` again
                 n      # Square it
                  +     # And add it to each value as well
                   t    # Take the square-root of each value
                    O   # Sum everything together
                     ®/ # And divide it by `®`
                        # (after which the result is output implicitly)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (section <em>How to compress large integers?</em>)</a> to understand why <code>Ž›Ñ</code> is <code>39478</code>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 60 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda I,R,G:6.2831*R*(I+R*G/2)+G*8*((1+R/(I/G+.05))**.01-1)
</code></pre>

<p><a href="https://tio.run/##XZHLbtswEEX3/IqBCwNDavSg5DSuAC@6KAQvstE2LQIm0YOA9QBFA8nXOxQtpU64Ie@d4ZkZcny37dBnl/rw93JS3fOrgiOVVOQ/o3SfSVEKPAalKOKUB4XYC0QZlDEe4yKIkjvOhYgSGUp@qc3QQadsC7obB2Nh1ATt@zhYAjXpvmWsOSwVNBlq8ibexaMW2GIq5l3HTWA4DxftJOesXe/Y3AqPQ0uSBx6JljNmq8lOcIBHhglJFyP4AVm0Y3hHGe28TJP76J6hTOkXpdwZUu5n5x9j9WCuE4PuwbNyBm6ZaobW6GPcW@rFntXJuc2tWxnjEAd/IVxyfGA0ure4pNKmrKbzyeawjbKa4LfPW9WfmXEVmy06El055OHuGdgV5g6dentaSyZL@3PrRvVNhTLhrv3ZLL@b4O3ixqY18DnDOm74ZcLbku6Mn9r97POE33rcPKi3BTgXdP/UnKrwVTfautrj2T2wHxQ22/9kfvkA" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>An approximate method. Approximates <code>log</code> without an import using <a href="https://codegolf.stackexchange.com/a/204715/20260.">Surculose Sputum's nifty approximation</a></p>

<p>This approximation is quite accurate, achieving within 0.02 on all the test cases and within 0.1 on all single-digit inputs. It's possible to use looser approximations that work for all the test cases, but I'm not sure at what point this is overfitting. In the extreme, hardcoding the outputs would be very short. So, I'd like to exclude this answer from <a href="https://codegolf.meta.stackexchange.com/a/18334/20260">my bounty on outgolfing me</a> since I'm not clear what golfs what be valid.</p>

<p>The first summand <span class="math-container">\$2\pi(I+RG/2)R\$</span> is what we get if we approximate the toilet paper spiral as instead being concentric circles with the same inner radius, thickness, and number of turns. The average of the circumferences of these <span class="math-container">\$R\$</span> circles is <span class="math-container">\$2\pi(I+RG/2)\$</span>. This is <span class="math-container">\$2\pi\$</span> times the average of their radii of <span class="math-container">\$I+RG/2\$</span>, or equivalently the average of the inner and outer radius.</p>

<p>The above approximation is already pretty good for the test cases, with error within 0.4. The second term approximates the additional circumference due to the spiral moving radially, rather than just tangentially as circles do. I got this from looking at the integral for arc length suggested by <a href="https://codegolf.stackexchange.com/a/204719/20260">svavil</a>. We then get rid of approximate <code>log</code> without an import using <a href="https://codegolf.stackexchange.com/a/204715/20260.">Surculose Sputum's approximation</a> The constant of 8 is an approximation for <span class="math-container">\$100/(4\pi)\$</span>, with 100 being inverse of the exponent 0.01 chosen for the log approximation. The <code>+0.05</code> fixes an approximation failing near <span class="math-container">\$I/G=0\$</span>, which would otherwise cause a divide-by-zero. I originally calculated the desired values as <span class="math-container">\$1/(4\pi)=0.08\$</span>, but heuristically 0.05 does better.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>93</s> <s>83</s> <s>76</s> 71 bytes</h1>

<p><em>-9 bytes if we don't explicitly round the results</em><br>
<em>-1 byte after changing n to 9999</em><br>
<em>-7 bytes thanks to dingledooper who rearranged the operations</em><br>
<em>-5 bytes thanks to xnor who changed the square root calculations to taking an absolute value of a complex number</em></p>



<pre class="lang-python prettyprint-override"><code>lambda i,r,g:sum(abs(1j+6.283*(t/n+i/g))for t in range(n*r))/n*g
n=9999
</code></pre>

<p><a href="https://tio.run/##TcexDsIgEADQvV/BeEcvIqCNbdI/caFREGOvzZUOfj26mPi2t77LY2Ff43itrzBPt6AyCaVh22cI0wb22XYHd/EaiuE2m4QYF1FFZVYSON2BtSAa1qnhsf@qq2QuEOFIlixi8/uZPJ3@bh315BDrBw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>This is a straightforward numerical integration of a spiral length, without using any imports. <code>n</code> is chosen so that the results are sufficiently precise.</p>

<p>The length of a spiral is a sum <span class="math-container">$$L = \sum_{t=1}^n L_t,$$</span> where L<sub>t</sub> is calculated as a hypothenuse in a <em>roughly</em> right triangle with sides <span class="math-container">$$\frac{2\pi}{n} r_t = \frac{2\pi}{n}\left(i+\frac{gt}{n}\right)$$</span> and <span class="math-container">$$r_{t+1}-r_t = \frac{g}{n}$$</span>.</p>
</div>
<div id="pu6" class="pu"><h1><a href="http://jsoftware.com/" rel="noreferrer">J</a>, 66 bytes</h1>

<pre><code>1#.2|@-/\1e3&amp;((-:@[%:_1:)^[:i.1+[*0{])((*{:)+[*(1{])*1e3%~i.@#@[)]
</code></pre>

<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/DZX1jGocdPVjDFON1TQ0dK0colWt4g2tNOOirTL1DLWjtQyqYzU1NLSqrTSBHA1DIE8LqFa1LlPPQdkhWjP2vyZXanJGvkKagiEQGsA4xgomCqYwjqWCkYKh0X8A" rel="noreferrer" title="J – Try It Online">Try it online!</a></p>

<p>This could be golfed more, but I'm putting it away for now.</p>

<p>Instead of taking an analytic approach I am using complex number arithmetic to break the spiral down into 1000 straight line segments per rotation, and then summing those segments.</p>

<p>I find the 500th root of -1, and keep multiplying it by itself to rotate it and get an approximation to the next spiral point.  </p>

<p>Because the spiral also moves outward, we need to take the new vector, normalize it, multiply the normal vector by 1/1000 of the thickness, and then add that little correction to the new vector.</p>

<p>Conceptually, we're doing something similar to approximating a circle's circumference with the short sides of many triangles.</p>

<p><a href="https://i.sstatic.net/4LsI0.png" rel="noreferrer"><img src="https://i.sstatic.net/4LsI0.png" alt="enter image description here"></a></p>

<p>The idea is simple, but the golf part of it boils down to boring bookkeeping and argument parsing which isn't worth going into.  In theory the realization of this method could be a lot shorter.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 83 bytes</h1>

<p><em>Thanks @xnor for finding some important approximation, notably <code>h(t)=t*t+log(2*t+.5)</code></em></p>



<pre class="lang-python prettyprint-override"><code>lambda i,r,g:g/2/T*(h(T*(i/g+r))-h(T*i/g))
h=lambda t:t*t+99*(2*t+.5)**.01
T=6.2832
</code></pre>

<p><a href="https://tio.run/##PcrBDoIwDAbgO0@xhMs66sY6EEayt@DoBWOAJYpk2cWnn9OIPfx/m6/7K67PzaTZXdJ9elxvE/MYcBkWRWoUfOU5vFqqAHD6HHkHKFb3e45DFLGyVnDKLVsQQta6GN1ZUm8o7cFvkc@8Ro0agOUpmZFNcUCLBpsDqO5k9ydNaJG@VjKt@2zpDQ" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>The same solution as below, but uses several approximations:</p>

<ul>
<li><span class="math-container">\$2\pi \approx 6.2832\$</span></li>
<li><span class="math-container">\$ \theta\sqrt{1+\theta^2}+\sinh^{-1}\theta + C \$</span><br>
<span class="math-container">\$ \approx \theta^2 + \ln(2\theta+0.5) +C \$</span><br>
<span class="math-container">\$ \approx \theta^2 + 99(2\theta+0.5)^{0.01} + C\$</span></li>
</ul>

<hr>

<p>"Exact" solution</p>

<h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, <s>104</s> 100 bytes</h1>

<p><em>-3 bytes thanks to @mathjunkie!</em><br>
<em>-1 byte thanks to @xnor!</em></p>



<pre class="lang-python prettyprint-override"><code>lambda i,r,g:g/4/pi*(h(2*pi*(i/g+r))-h(2*pi*i/g))
from math import*
h=lambda t:t*hypot(t,1)+asinh(t)
</code></pre>

<p><a href="https://tio.run/##PcxBCoMwEAXQvacIuMnEqZqo2ArepJuUogk0JqSz8fRpWrR/M/x58MNOxm9dWuZ7emn3eGpmMeI6rU3fBCu44Up8r23WKgJcjp4rQLFE75jTZJh1wUcShZmPFZpImD144oQSKv22m@EEKUS7EV94izL/geWUrKv74oQBO@xPUO1Yj3@SCm@oflYyKa/Z0gc" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>This uses the exact formula. Maybe a good Taylor series approximation can be shorter.</p>

<p>The formula for the length of the spiral is:
<span class="math-container">$$ L=\frac{G}{2\pi} \int_{\frac{2\pi I}{G}}^{\frac{2\pi(I+GR)}{G}}\sqrt{1+\theta^2}d\theta $$</span>
and the formula for the integral is:
<span class="math-container">$$ \int \sqrt{1+\theta^2}d\theta=\frac{1}{2}\left(\theta\sqrt{1+\theta^2}+\sinh^{-1}\theta \right) $$</span></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/204700/">204700</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




