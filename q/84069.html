<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::84069</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>640</td><td>Retina 0.8.2</td><td>200416T020645Z</td><td><a href="https://codegolf.stackexchange.com/questions/84069/starbucks-to-english/203574#203574">math jun</a></td></tr>
<tr d-ix="1"><td>870</td><td>Ruby plaF</td><td>160704T014546Z</td><td><a href="https://codegolf.stackexchange.com/questions/84069/starbucks-to-english/84399#84399">Value In</a></td></tr>
<tr d-ix="2"><td>805</td><td>Python</td><td>160702T000116Z</td><td><a href="https://codegolf.stackexchange.com/questions/84069/starbucks-to-english/84259#84259">Chuck Mo</a></td></tr>
<tr d-ix="3"><td>900</td><td>Javascript ES6</td><td>160630T204127Z</td><td><a href="https://codegolf.stackexchange.com/questions/84069/starbucks-to-english/84155#84155">Dendrobi</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 640 bytes</h1>

<p>Performs a series of substitutions to transform the input into the expected output.</p>

<pre><code>-
no&#32;
x
extra&#32;
Wh
whole-milk
%
2-percent
N
skim
B
breve
X
deJ
1/2
half-J
1/3
1Q-J
2/3
2Qs-J
Q
-third
J
caf&#32;
^,
 ,
 ,1(?=\D.*E)
,soloZ
 ,2(?=\D.*E)
,doppioZ
Z,,,,E$
Z
 ,(\d+)
,$1UleZ
,1U
,sing
,2U
,doub
,3U
,trip
\d+(?!\d*U)
$&amp;Y&#32;
U
-tup
,4-.
,quadr
,5-
,quin
 ,
Z
S
short
T
tall
G
grande
ZV
 venti
M(?=[^,]*,\w*$)
MR
E
espresso
M$
 macchiato
CP
 con panna
A
americano
L
latte
C$
cappuccino
F
foam
WC
whip
R
 drizzle
4Y
fourY
6Y
sixY
7Y
sevenY
9Y
nineY
10Y
ten
11Y
eleven
12Y
twelve
13Y
thirK
15Y
fifK
18Y
eighK
20Y
twenty
1Y
one
2Y
two
3Y
three
5Y
five
8Y
eight
1(\w*)Y
$1K
K
teen
V
vanilla
C
caramel
M
mocha
H
hazelnut
 -
-
Z,*| ?,+
&#32;
^ |Y

</code></pre>

<p><a href="https://tio.run/##TVPvT9swEP3@/gpPKlNbLqxOW9g@TGhkpYgSNH40JV2HZhJDLFInS1LoEP97d64mRNSoz@/du7N9l0o3xqrNTnv8e@PBFgJr6HVTKYFZhuesyLW3NPkjduB7pa4SbRuco340SxzhrtJPGjdI9SnkJx@Zyu89B/uQFwx8Bv5FzegCXpOZKsUpEnUvcEsQ7ifbh18X3/e6ow6oLvJizpz/jkuLsjTMzomfUQtOby/SXZZacprrOUhO2WrsA8ifOsPqDtRn1FSmBIe2Dz8s0u60g9bHWGDKG1mVoIG3B/qzUmkFGnoOGuu2NMcV6qyoGlyjUXmOMR4qZVONeQTxxMc3CHmDP2/pV5cWz91WB@ElRtB1Wem6LhC2IJYqSTKjmgLBD4iksKJU1ip8g1rqyiTKFjhDrppGI2jxlZTlKkkMs8e4L9QSs4Avn/d/CZFW5uUl1xjELK2qGPsxarOOccD/fP82xpcY1lgdQ/ZiNNpCyhg6dyKkz9SzzrlRss@QuzCBHHIyc8/gMweah2wCv7eNs81fsLmwGltjga2p0hpbD6f5b2kg23z@ToyWnGDCdblahCdlTZ4rBHyqik@bI8SySDKFE56PF53bVQPhweOedl/FIe2Cx0G8xthsbkjuR3QQ0SyjYxrhhobRlnpbD3g9fLd2ohy8EdQfUyD8SITixHE0CjnIvyY6JzpzM0qRm6QgdLNJfTbze0SzgFUas7IOLp3Kla5J9kLh9wLW17NAeMdiHQon86SRdDaXnuR2NLnPzDrEzBvocRLOEXD5rZXj@eMg/4oiEYiQdoizejMHOcM/" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a></p>

<p>Most of it is pretty straightforward replacements. A few interesting parts are:</p>

<pre><code> ,1(?=\D.*E)
,soloZ
 ,2(?=\D.*E)
,doppioZ
</code></pre>

<p>Handles the special cases for drinks containing the word "espresso". It transforms the 1 and 2 into "solo" and "doppio" before we get to the stage where we transform those numbers into latin tuple form.</p>

<pre><code>Z,,,,E$
Z
</code></pre>

<p>Removes the word "espresso" if "solo" or "doppio" is the only other modifier.</p>

<pre><code>M(?=[^,]*,\w*$)
MR
</code></pre>

<p>Appends an <code>R</code> to any <code>M</code> with only one comma between it and the end of the string. This allows us to transform all <code>R</code>s into "drizzle" later on.</p>

<pre><code>1(\w*)Y
$1K
K
teen
</code></pre>

<p>Allows us to transform 14,16,17, and 19 into their word forms all at once, since we replace 4,6,7, and 9 beforehand.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a> <code>-plaF,</code>, <s>975</s> 870 bytes</h1>

<p>I got a random upvote on my old, almost-four-year-old answer to this question, and because of my comments on how horribly it went (you can check the post history if you want to see what I wrote before) I was inspired to make it better (aka: rewrite most of it from the ground up) and managed to golf over a hundred bytes off it. Still longer than the Python answer, but I'm much happier with how things turned out now.</p>

<p>About 20 bytes were saved by switching from trying to run regex patterns to affect specific parts of the comma structure to using the <code>-aF,</code> flag to autosplit a line of input on commas and save it to <code>$F</code>, allowing me to modify some elements before stitching it back together and finally modifying the output variable with the last few <code>sub</code>/<code>gsub</code> commands.</p>

<p>Honestly, the number of regex replacements made here means most of this could be a Retina program, but I don't know Retina well enough for that.</p>



<pre class="lang-ruby prettyprint-override"><code>g=-&gt;n,c{n.grep(/^ ?#{c}/i)[0]}
n=%w"0 one two three four five six seven eight nine ten eleven twelve thir four fif";n+=n[6,4]&lt;&lt;'twenty'
$F[1].sub!(/(\d*)(\w)?/){i=eval$1;"#{i&amp;&amp;(%w"0 sing doub trip quadrup quintup"[i]||$1+"-tup")+"le"} #{g[%w"short tall grande venti",$2]if$2}"}
$F[2].gsub!(/(\d*)(\w)/){i=eval$1;"#{i&amp;&amp;n[i]}#{'teen'if(13..19)===i} #{g[%w"vanilla caramel mocha hazelnut",$2]}"}
$F[3].sub!(/.+/){%w"skim whole-milk breve two-percent"[$&amp;.sum%26%4]}
$F[4].gsub!(/(x|-)?(\w+)/){"#{%w"extra no"[$1.ord%2]if$1} #{g[%w"caramelD mochaD whip foam",$2[0]].sub ?D,' drizzle'}"}
$_=$F*' '
sub(/^\S+/){%w"de - half- one-third- two-thirds-"[$&amp;.sum%8]+"caf"}
sub'CP',' con pana'
sub'CM','caramel'+m=' macchiato'
e='espresso'
gsub(/[A-Z]/){g[%w"americano latte cappuccino"+[m,e],$&amp;]}
gsub(/ +/,' ')
$_.strip!
sub(/[sd]...le/){g[%w"doppio solo",$&amp;[0]]}if$_[e]
sub'o '+e,?o
</code></pre>

<p><a href="https://tio.run/##ZZJhb9MwEIa/91ccWVe3xElJOiEQhAo6Bh8oQoAYIgvIS9zGmmMHx2nLuv51yjndhgRRJNt3vnufO59pL3/t98skeKFovlXh0vB6OP4O06NtvhuLUfoo2/VUcrz2HoFWHOxagy0N57DQrYGFWHFoxAYavuIKuFiWFpRwF91Rdla75hKv2VKYu6iF90z5iUof05Ps@XOCN5T9RXr9szTKwqa9fDAcDy@Kh6PhxXo0HY@2IuErJvvRM@9oKwaDYcfTCLWEQreXYI2o4WfLCtO6VSjb1l4qspubfuR7gTuNfE9ybwdH22WK0U2pjQXLpISlYarggKRWeLQfZ2LRj3feztHEWbj8B@d/GoVKu6MtsZwrIhbDaBKG0dNRkiTiXm/FlJCSQc4Mq7iESuclg5Jdc6la28neSk7uGhD6KOVQr0QF61JLHlRCXsGl4avuIYKamxypvbQ/wJjqOH58fJJ1SU7@cm9ugtEUwX1HjsCYkW@sYaA0BkahNsVxV3N0D3sLeXqgPEVxbO9Cs8px4kR0hDA9pQQKI66vJScd/I@kf/aQAOmhG4fo4tNtBdjdAGuVi8DNUOAGoQi6CrptE9xX8CTzUX2ByTAFmX0gKJFrBTVTjBxsc7TdAhK/SghULM9LwawmPZ4Q3tSGNw0elh1F@jL4liFGVxgGGZEzpUEyazm@Rl23eS6wFX5aUZ7R/gAbeIgEf4zqZIR1hY2bsAeHutKmyMIwlPwua6HrWmhotNTYoIFr0A77@SPlWYesgficTvV@Tydv6Bd6XlL6rveVxp8pfe@20ThGM36zeS8eT@jki/tf0fMZOukbdGxmH53zKz35TN9CPIdoMsMLm/MZBGewmYPz92hMIxdHX897NHIJXzvbYZ10629dW6FVsw9qyc7oHw" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>Python, <s>824</s> <s>815</s> <s>807</s> 805 bytes</h1>
<pre><code>f=lambda s,a=0:a==0and&quot; &quot;.join(&quot; &quot;.join(f(&quot; &quot;+s.split(&quot;,&quot;)[i],([&quot;X,deC,1/2,half-C,1/3,oneT-C,2/3,twoTs-C,C,caf,T,-third&quot;,&quot;&quot;.join(&quot; %i&quot;%i+f(&quot;,%i-tupL,&quot;%i,[&quot;1&quot;,&quot;x&quot;,&quot;2&quot;,&quot;y&quot;])for i in range(6,21))+&quot;1,solo,2,doppio,&quot;*('E'in s)+&quot;1,singL,2,doubL, 3,tripL, 4,quadrupL, 5,quintupL,x,1,y,2,S,short,T,tall,G,grande,V,Vnti&quot;,&quot;V, vanilla,H, hazelnut,10,ten,11,eleVn,12,twelV,13,thirT,14,4T,15,fifT,16,6T,17,7T,18,8een,19,9T,20,twenty,1,one,2,two,3,three,4,four,5,fiV,6,six,7,seVn,8,eight,9,nine,T,teen&quot;,&quot;Wh,whole-milk,%,two-percent,N,skim,B,breV&quot;,&quot;x,extra ,-,no ,F,foam,WC,whip,M,MR,R, drizzL&quot;,&quot;CM,xM,E,espresso,M, macchiato,CP, con panna,A,americano,L,latte,C,cappuccino,x,C&quot;][i]+&quot;,C, caramel,M, mocha,L,le ,V,ve&quot;).split(&quot;,&quot;))for i in range(6-(s in&quot;,1,,,,E,2,,,,E&quot;))).split())or a and f(s.replace(a[0],a[1]),a[2:])or s
</code></pre>
<p>Slightly more readable:</p>
<pre><code>def f(s,a=0):
 if a==0:
  a=[&quot;X,deC,1/2,half-C,1/3,oneT-C,2/3,twoTs-C,C,caf,T,-third&quot;]
  a+=[&quot;&quot;.join(&quot; %i&quot;%i+f(&quot;,%i-tupL,&quot;%i,[&quot;1&quot;,&quot;x&quot;,&quot;2&quot;,&quot;y&quot;])for i in range(6,21))+&quot;1,solo,2,doppio,&quot;*('E'in s)+&quot;1,singL,2,doubL, 3,tripL, 4,quadrupL, 5,quintupL,x,1,y,2,S,short,T,tall,G,grande,V,Vnti&quot;]
  a+=[&quot;V, vanilla,H, hazelnut,10,ten,11,eleVn,12,twelV,13,thirT,14,4T,15,fifT,16,6T,17,7T,18,8een,19,9T,20,twenty,1,one,2,two,3,three,4,four,5,fiV,6,six,7,seVn,8,eight,9,nine,T,teen&quot;]
  a+=[&quot;Wh,whole-milk,%,two-percent,N,skim,B,breV&quot;]
  a+=[&quot;x,extra ,-,no ,F,foam,WC,whip,M,MR,R, drizzL&quot;]
  a+=[&quot;CM,xM,E,espresso,M, macchiato,CP, con panna,A,americano,L,latte,C,cappuccino,x,C&quot;]
  return&quot; &quot;.join(&quot; &quot;.join(f(&quot; &quot;+s.split(&quot;,&quot;)[i],(a[i]+&quot;,C, caramel,M, mocha,L,le ,V,ve&quot;).split(&quot;,&quot;))for i in range(6-(s in&quot;,1,,,,E,2,,,,E&quot;))).split())
 elif a:
  return f(s.replace(a[0],a[1]),a[2:])
 else:
  return s
</code></pre>
<p>Demo at <a href="https://repl.it/C8Hz/3" rel="nofollow noreferrer">https://repl.it/C8Hz/3</a></p>
</div>
<div id="pu3" class="pu"><h1>Javascript ES6, <s>902</s> 900 bytes</h1>

<pre><code>s=&gt;(R=(l,r)=&gt;(l.split`.`.map((e,i,l)=&gt;!(i%2)&amp;&amp;(r=r.split(e).join(l[i+1]+" "))),r),R("-.no.!.-tuple.1/2.half-caf.1/3.one-third-caf.2/3.two-thirds-caf.ECP.Econ panna.CM.RY.CR.RZ.EM.EY.WC.whip.Wh.whole-milk.A.americano.B.breve.C.cappuccino.D.extra.E.espresso.F.foam.G.grande.H.hazelnut.I.venti.L.latte.M.OZ.N.skim.O.mocha.R.caramel.S.short.T.tall.V.vanilla.X.decaf.Y.macchiato.Z.drizzle.%.two-percent",R(",1,,,,E.solo.,2,,,,E.doppio",s).split`,`.map((e,i)=&gt;(`1VI.2MO.2CR.4xD`.split`.`.map(k=&gt;k[0]==i&amp;&amp;(e=e.split(k[1]).join(k[2]))),i==1?(e=R("1!.single.2!.double.3!.triple.4!.quadruple.5!.quintuple",e.replace(/(\d+)/,"$1!"))):i==2?(e=R("10.ten.20.twenty.11.eleven.12.twelve.13.thir0.14.four0.15.fif0.16.six0.17.seven0.18.eigh0.19.nine0.0.teen.1.one.2.two.3.three.4.four.5.five.6.six.7.seven.8.eight.9.nine",e)):s.includes`E`&amp;&amp;(e=R("single.solo.double.doppio",e)),e)).join` `).replace(/\s+/g," ").trim())
</code></pre>

<p>"Ungolfed":</p>

<pre><code>s=&gt;(
  R=(l,r)=&gt;(l.split`.`.map((e,i,l)=&gt;!(i%2)&amp;&amp;(r=r.split(e).join(l[i+1]+" "))),r),                                   // consecutive string replacement function
  R("-.no.!.-tuple.1/2.half-caf.1/3.one-third-caf.2/3.two-thirds-caf.ECP.Econ panna.CM.RY.CR.RZ.EM.EY.WC.whip.     // replace all symbols with appropriate values
     Wh.whole-milk.A.americano.B.breve.C.cappuccino.D.extra.E.espresso.F.foam.G.grande.H.hazelnut.I.venti.L.latte.
     M.OZ.N.skim.O.mocha.R.caramel.S.short.T.tall.V.vanilla.X.decaf.Y.macchiato.Z.drizzle.%.two-percent",
    R(",1,,,,E.solo.,2,,,,E.doppio",s)                                                                             // if special espresso cases, directly replace entire string
    .split`,`.map((e,i)=&gt;(                                                                                         // split input at commas
      `1VI.2MO.2CR.4xD`.split`.`.map(k=&gt;k[0]==i&amp;&amp;(e=e.split(k[1]).join(k[2]))),                                    // substitute duplicate symbols with unique symbols
      i==1?(e=R("1!.single.2!.double.3!.triple.4!.quadruple.5!.quintuple",e.replace(/(\d+)/,"$1!"))):              // if in shots section, expand all numbers
      i==2?(e=R("10.ten.20.twenty.11.eleven.12.twelve.13.thir0.14.four0.15.fif0.16.six0.17.seven0.18.eigh0.        // if in syrup section, expand all numbers
                  19.nine0.0.teen.1.one.2.two.3.three.4.four.5.five.6.six.7.seven.8.eight.9.nine",e)):
      s.includes`E`&amp;&amp;(e=R("single.solo.double.doppio",e)),                                                         // replace single,double with solo,doppio if espresso is in the string
    e)).join` `).replace(/\s+/g," ").trim())                                                                       // join sections, cleanup whitespaces
</code></pre>

<p>Example runs:</p>

<pre><code>f(",3G,V,Wh,,L")              -&gt; triple grande vanilla whole-milk latte
f("X,2T,,N,,L")               -&gt; decaf double tall skim latte
f("1/2,V,,,,CM")              -&gt; half-caf venti caramel macchiato
f("2/3,3V,3V,B,WC,L")         -&gt; two-thirds-caf triple venti three vanilla breve whip latte
f(",G,,,xCR,CM")              -&gt; grande extra caramel drizzle caramel macchiato
f("X,4T,2M 2C,B,xWC -F xM,C") -&gt; decaf quadruple tall two mocha two caramel breve extra whip no foam extra mocha drizzle cappuccino
f(",2,1V,B,,EM")              -&gt; doppio one vanilla breve espresso macchiato
f(",1,,,,E")                  -&gt; solo
f(",2,,,,E")                  -&gt; doppio
f(",3,,,,E")                  -&gt; triple espresso
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/84069/">84069</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




