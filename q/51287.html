<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::51287</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>181</td><td>Java</td><td>250929T090021Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/283922#283922">Mark</a></td></tr>
<tr d-ix="1"><td>040</td><td>JavaScript</td><td>180214T184140Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/155777#155777">Shaggy</a></td></tr>
<tr d-ix="2"><td>123</td><td>C</td><td>150709T175654Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/52862#52862">openaddr</a></td></tr>
<tr d-ix="3"><td>024</td><td>K</td><td>150709T110227Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/52839#52839">tmartin</a></td></tr>
<tr d-ix="4"><td>022</td><td>CJam</td><td>150605T021421Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51300#51300">Dennis</a></td></tr>
<tr d-ix="5"><td>038</td><td>Gema</td><td>150708T154411Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/52802#52802">manatwor</a></td></tr>
<tr d-ix="6"><td>190</td><td>Javascript</td><td>150604T223544Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51288#51288">SuperJed</a></td></tr>
<tr d-ix="7"><td>064</td><td>JavaScript ES6</td><td>150605T103832Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51321#51321">edc65</a></td></tr>
<tr d-ix="8"><td>097</td><td>Rebol</td><td>150605T155613Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51348#51348">draegtun</a></td></tr>
<tr d-ix="9"><td>018</td><td>Pyth</td><td>150605T012845Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51298#51298">Maltysen</a></td></tr>
<tr d-ix="10"><td>4336</td><td>PHP 4.1</td><td>150605T120641Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51328#51328">Ismael M</a></td></tr>
<tr d-ix="11"><td>025</td><td>Perl</td><td>150605T143105Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51341#51341">Dennis</a></td></tr>
<tr d-ix="12"><td>087</td><td>Python</td><td>150605T141413Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51339#51339">shaunakd</a></td></tr>
<tr d-ix="13"><td>037</td><td>Bash</td><td>150605T123356Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51330#51330">Toby Spe</a></td></tr>
<tr d-ix="14"><td>053</td><td>Bash</td><td>150605T012533Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51297#51297">Daniel W</a></td></tr>
<tr d-ix="15"><td>025</td><td>Pyth</td><td>150605T002148Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51295#51295">Ypnypn</a></td></tr>
<tr d-ix="16"><td>027</td><td>Retina</td><td>150604T224550Z</td><td><a href="https://codegolf.stackexchange.com/questions/51287/parse-query-parameters/51289#51289">Martin E</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Java, 181</h1>
<pre class="lang-java prettyprint-override"><code>String p(String k){String[]ps=url.split(&quot;\\?&quot;)[1].split(&quot;&amp;&quot;);for(String p:ps){String[]kv=p.split(&quot;=&quot;,2);if(kv[0].equals(k))return kv.length&gt;1?kv[1].replace(&quot;%20&quot;,&quot; &quot;):&quot;&quot;;}return&quot;&quot;;}
</code></pre>
<pre class="lang-java prettyprint-override"><code>String p(String k) {
    String[] ps = url.split(&quot;\\?&quot;)[1].split(&quot;&amp;&quot;);
    for (String p : ps) {
        String[] kv = p.split(&quot;=&quot;, 2);
        if (kv[0].equals(k))
            return kv.length &gt; 1 ? kv[1].replace(&quot;%20&quot;, &quot; &quot;) : &quot;&quot;;
    }
    return &quot;&quot;;
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1>JavaScript, 40 bytes</h1>
<pre><code>u=&gt;q=&gt;new URL(u).searchParams.get(q)||``
</code></pre>
<p><a href="https://codepen.io/anon/pen/NyaraR" rel="nofollow noreferrer">Test it</a></p>
</div>
<div id="pu2" class="pu"><h1>C, 123 bytes</h1>

<pre><code>char*f(char*s,char*n){for(char*x=n;*s&amp;&amp;(*x||*s!='=');x=*x++==*s++?x:n);return *s=='='?(n=strstr(s++,"&amp;"))?(*n=0)?s:s:s:"";}
</code></pre>

<p>Note: this function assumes you aren't passing a constant char to it.</p>
</div>
<div id="pu3" class="pu"><h1>K, 24</h1>

<pre><code>{((!)."S=&amp;"0:*|"?"\:x)y}
</code></pre>

<p>.</p>

<pre><code>{((!)."S=&amp;"0:*|"?"\:x)y}["https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2";`genre]
"action"
</code></pre>

<h3>Explanation:</h3>

<p>The function takes two parameters, the url <code>x</code> and the key <code>y</code></p>

<p>First we split the url on the <code>?</code> character.</p>

<pre><code>k)"?"\:"https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2"
"https://example.com/index.php"
"genre=action&amp;reaction=1&amp;action=2"
</code></pre>

<p>Then we take the last element using <code>*|</code> (first reverse)</p>

<pre><code>k)*|"?"\:"https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2"
"genre=action&amp;reaction=1&amp;action=2"
</code></pre>

<p>Process the string using <code>0:</code>. The LHS of <code>0:</code> is a three character string, where the first is the datatype of the key (<code>S</code> for symbol, <code>I</code> for int etc), the second is the key-value delimiter (<code>=</code> in this case) and the third is the record delimiter (<code>&amp;</code> here).</p>

<pre><code>k)"S=&amp;"0:*|"?"\:"https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2"
genre    reaction action
"action" ,"1"     ,"2"
</code></pre>

<p>Turn this into a dictionary using <code>!</code></p>

<pre><code>k)(!)."S=&amp;"0:*|"?"\:"https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2"
genre   | "action"
reaction| ,"1"
action  | ,"2"
</code></pre>

<p>Then do a lookup on this dictionary for whichever key you're looking for.</p>

<pre><code>k)((!)."S=&amp;"0:*|"?"\:"https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2")`genre
"action"
</code></pre>

<p>Turn it into a function using <code>{}</code> and replace the url string with <code>x</code> and the lookup key with <code>y</code>, then pass the url and key in as paramters (<code>func[param1;param2;...;paramN]</code>)</p>

<pre><code>k){((!)."S=&amp;"0:*|"?"\:x)y}["https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2";`genre]
"action"
</code></pre>
</div>
<div id="pu4" class="pu"><h1>CJam, 22 bytes</h1>

<pre><code>l'?'&amp;er"&amp;="l*/1&gt;s'&amp;/0=
</code></pre>

<p>Try it online in the <a href="http://cjam.aditsu.net/#code=l&#39;%3F&#39;%26er%22%26%3D%22l*%2F1%3Es&#39;%26%2F0%3D&amp;input=http%3A%2F%2Fsub.example.com%2Fsome%2Fdir%2Ffile.php%3Faction%3Ddelete%26file%3Dtest.foo%26strict%3Dtrue%0Aaction" rel="nofollow">CJam interpreter</a>.</p>

<h3>How it works</h3>

<pre><code>l      e# Read a line from STDIN.
'?'&amp;er e# Replace question marks with ampersands.
"&amp;="l* e# Place the second line from STDIN between '&amp;' and '='.
/      e# Split the first string at occurrences of the second.
1&gt;s    e# Discard the first chunk.
'&amp;/0=  e# Discard everything following an ampersand.
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Gema: <s>44</s> 38 characters</h1>

<p>Expects first the parameter name then the URL on separate lines.</p>

<pre><code>\B\L*\n=@set{p;$1}
\I$p\=/[^&amp;]+/=$1
?=
</code></pre>

<p>Sample run:</p>

<pre><code>bash-4.3$ gema -p '\B\L*\n=@set{p;$1};\I$p\=/[^&amp;]+/=$1;?=' &lt;&lt;&lt; $'action\nhttps://example.com/index.php?genre=action&amp;reaction=1&amp;action=2'
2
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Javascript, <s>235</s> <s>228</s> <s>203</s> 190 bytes</h1>

<p>Takes the URL as the first input and the key as the second.</p>

<pre><code>b=document.createElement('a'),b.href=prompt(u={}),a=b.search;if(a!=""){t=a.substring(1).split("&amp;");for(i=t.length;i--;){p=t[i].split("=");u[p[0]]=p[1]}}c=u[prompt()];alert(c==undefined?"":c)
</code></pre>
</div>
<div id="pu7" class="pu"><h1>JavaScript (<em>ES6</em>) 64</h1>

<p><strong>Edit</strong> Saved 1 byte thx @ismael-miguel</p>

<p>A function with url and key as parameters.</p>

<p>Test running the snippet in Firefox.</p>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(u,k,e='')=&gt;u.replace(RegExp(`[?&amp;]${k}=([^&amp;]*)`),(m,g)=&gt;e=g)&amp;&amp;e

// TEST
out=x=&gt;O.innerHTML += x+'\n';

test=[
   'https://example.com/index.php?action=delete',
   'https://this.example.com/cat/index.php?action=delete',
   'http://example.com', 
   'https://action.example.com/actionscript/action.jpg',
   'https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2'
]

test.forEach(u=&gt;out('Url '+u+'\nValue ['+f(u,'action')+']'))</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;pre id=O&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu8" class="pu"><h1>Rebol - 97</h1>
<pre><code>e:[&quot;&amp;&quot;| end]p: func[u a][parse u[thru&quot;?&quot;any[copy k to&quot;=&quot;&quot;=&quot;copy v to e e(if k = a[return v])]]{}]
</code></pre>
<p>Ungolfed:</p>
<pre><code>e: [&quot;&amp;&quot; | end]

p: func [u a] [
    parse u [
        thru &quot;?&quot;
        any [
            copy k to &quot;=&quot; &quot;=&quot; copy v to e e
            (if k = a [return v])
        ]
    ]
    {}
]
</code></pre>
<p>Example usage (in Rebol console):</p>
<pre><code>&gt;&gt; p &quot;http://sub.example.com/some/dir/file.php?action=delete&amp;file=test.foo&amp;strict=true&quot; &quot;action&quot;
== &quot;delete&quot;

&gt;&gt; p &quot;https://example.com/index.php?action=delete&quot; &quot;action&quot;
== &quot;delete&quot;

&gt;&gt; p &quot;https://this.example.com/cat/index.php?action=delete&quot; &quot;action&quot;
== &quot;delete&quot;

&gt;&gt; p &quot;http://example.com, https://action.example.com/actionscript/action.jpg&quot; &quot;action&quot;
== &quot;&quot;

&gt;&gt; p &quot;https://action.example.com/actionscript/action.jpg&quot; &quot;action&quot;                     
== &quot;&quot;

&gt;&gt; p &quot;http://example.com&quot; &quot;action&quot;                                                     
== &quot;&quot;

&gt;&gt; p &quot;https://example.com/index.php?genre=action&amp;reaction=1&amp;action=2&quot; &quot;action&quot;
== &quot;2&quot;
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Pyth - <strike>22</strike> <strike>21</strike> 18 bytes</h1>
<p>Uses the obvious method of constructing a dictionary <strike>and using <code>}</code> to check existence.</strike> Thanks to @FryAmTheEggman for the error handling trick.</p>
<pre><code>#@.dcR\=cecw\?\&amp;zq
</code></pre>
<p>Can probably be golfed a little more. <strike>Doing explanation now.</strike> Added explanation:</p>
<pre><code>#                 Error handling loop
 @                Implicitly print dict lookup
  .d              Dictionary constructor, takes list of pairs
   cR\=           Map split with &quot;=&quot; as the second arg
    c    \&amp;       Split by &quot;&amp;&quot;
     e            Last in sequence of
      c           Split
       w          Second input
       \?         By &quot;?&quot;
 q                Quit loop
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=%23%40.dcR%5C%3Dcecw%5C%3F%5C%26zq&amp;input=action%0Ahttp%3A%2F%2Fsub.example.com%2Fsome%2Fdir%2Ffile.php%3Faction%3Ddelete%26file%3Dtest.foo%26strict%3Dtrue&amp;debug=1" rel="nofollow noreferrer">Try it online here</a>.</p>
</div>
<div id="pu10" class="pu"><h1>PHP 4.1, <del>43</del>36 bytes</h1>
<p>There's no mention to do not use built-in function, so, here is my go:</p>
<pre><code>&lt;?=parse_str(parse_url($U,6))?0:$$P;
</code></pre>
<p>This restricts the use of the keys <code>U</code> and <code>P</code> on your URL.<br>
You can pass the data as you please (POST, GET, COOKIE, ...), being the key <code>U</code> the url and <code>P</code> the parameter.</p>
<p>Thank you, <a href="https://codegolf.stackexchange.com/users/4198/manatwork">@manatwork</a> for this shorter version!</p>
<p>Also, an alternative, without the previous restrictions:</p>
<pre><code>&lt;?=parse_str(parse_url($U,6),$A)?0:$A[$P];
</code></pre>
<hr>
<p>Old versions:</p>
<pre><code>&lt;?parse_str(parse_url($U,6),$A);echo$A[$P];
</code></pre>
<p>If you are fine with not being able to use the keys <code>U</code> and <code>P</code>:</p>
<pre><code>&lt;?parse_str(parse_url($U,6));echo$$P;
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Perl, 25 bytes</h1>

<pre><code>/[?&amp;]$^I=([^&amp;]*)/;$_=$1
</code></pre>

<p>This reads the URL from STDIN and the key as an argument to <code>-i</code>. It also requires the <code>-p</code> switch. I've added two bytes to the count to account for <code>i</code> and <code>p</code>.</p>

<h3>Example</h3>

<pre><code>$ perl 2&gt;&amp;- -e'/[?&amp;]$^I=([^&amp;]*)/;$_=$1' -piaction &lt;&lt;&lt; 'http://example.com/?action=delete'
delete
</code></pre>
</div>
<div id="pu12" class="pu"><h2>Python, 87 bytes</h2>
<p>The script takes the first url as the first argument and the key as the second.</p>
<pre><code> import re,sys;print re.search(r'[?|&amp;]'+sys.argv[2]+'+=([a-z.]+)',sys.argv[1]).group(1);
</code></pre>
<p>Sample output:</p>
<pre><code>&gt;&gt; runfile('test.py', args='http://sub.example.com/some/dir/file.php?action=delete&amp;file=test.foo&amp;strict=true file')
&gt;&gt; test.foo 
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Bash, 37</h1>

<pre><code>a=${2#*\?};eval "${a//&amp;/;};echo \$$1"
</code></pre>

<p>Pass the key in the first argument and the URL in the second.</p>

<p>Strips everything off up to and including the first <code>?</code>, then treats the remainder as a series of assignments (RFC 1738 URLs can't contain spaces or any of the shell metacharacters, so this works).  Finally, print the requested result; by default, strings not found are assumed empty.</p>

<p>Limitation - any key that already exists in the environment may be 'found' when not present in the input.</p>
</div>
<div id="pu14" class="pu"><h2>Bash - <strike>55</strike> 53</h2>

<p><em>2 bytes saved thanks to izabera</em></p>

<pre><code>[[ $1 =~ [?\&amp;]$2=([^&amp;]*) ]]
echo ${BASH_REMATCH[1]}
</code></pre>

<p>Takes the URL as the first arg and the key to find as the second.</p>

<pre><code>bash url.sh "https://this.example.com/cat/index.php?action=delete&amp;foo=bar&amp;spam=eggs" spam  
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Pyth, 25 bytes</h1>

<pre><code>|smecd\=fqhcT\=zcecw\?\&amp;"
</code></pre>

<p>Expects the input on two lines, the key followed by the URL.</p>

<h2>Explanation</h2>

<pre><code>                   cw\?     Split the second input (the URL) by "?"
                  e         The end (the parameter list)
                 c     \&amp;   Split the parameter list by "&amp;"
        f                   Filter each parameter T
            cT\=            Split by "="
           h                The first part (the key)
          q     z           Equals the first input (the search key)
  m                         Map each valid parameter d
    cd\=                    Split d by "="
   e                        The value
 s                          Print as a string
|                        "  Otherwise, if the key isn't found, print nothing
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=|smecd%5C%3DfqhcT%5C%3Dzcecw%5C%3F%5C%26%22&amp;input=foo%0Ahttps%3A%2F%2Fexample.com%2Findex.php%3Faction%3Ddel%26foo%3Dbar%26a%3Db" rel="nofollow">Try it here</a></p>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/mbuettner/retina">Retina</a>, <s>30</s> 27 bytes</h1>

<pre><code>!`(?&lt;=^\1 .*[?&amp;](.*)=)[^&amp;]+
</code></pre>

<p>This is a full program that expects the key and the URL to be space-separated on STDIN, e.g.</p>

<pre><code>action http://sub.example.com/some/dir/file.php?action=delete&amp;file=test.foo&amp;strict=true
</code></pre>

<p>This is essentially just a (.NET-flavoured) regex, which matches the correct value by checking that the preceding key is equal to the first string in the input (using a backreference). The only thing that's a bit odd about the regex is that .NET matches lookbehinds from right to left, which is why the "backreference" actually references a group that appears later in the pattern. The <code>!`</code> instructs Retina to print the actual match (if there is one) instead of the number of matches.</p>

<p>For those who don't regex, here is an annotated version. Read the lookbehind from the bottom up, because that's how it's processed:</p>

<pre><code>(?&lt;=        # A lookbehind. Everything we match in here will not be returned as part of
            # actual match. Start reading this from the corresponding parenthesis.
  ^         # Ensure we're at the beginning of the input, so that we've checked
            # against the entire input key.
  \1        # Backreference to the key to check that it's the one we've asked for.
  [ ]       # Match a space.
  .*        # Consume the rest of the URL.
  [?&amp;]      # Match a ? or a &amp; to ensure we've actually captured the entire key.
  (         # End of group 1.
    .+      # Match the key.
  )         # Capturing group 1. Use this to keep track of the key.
  =         # Make sure we start right after a '='
)           # Start reading the lookbehind here.
[^&amp;]+       # Match the value, i.e. as many non-&amp; characters as possible.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/51287/">51287</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




