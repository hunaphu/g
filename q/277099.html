<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277099</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>089</td><td>05AB1E</td><td>241206T165808Z</td><td><a href="https://codegolf.stackexchange.com/questions/277099/the-graphing-calculator-3-revenge-of-the-i-o/277102#277102">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 89 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Lβ©Zs[ÐïQ#T*¼}ï¿¾°/DU/₄z+ÝXz/'|«Déθgj®¾.òR'O¹·ú¹L·._ø'|ýDéθgjR®Xz*ǝR`¨©'+«„- ¹×«¹L®gð×š)»
</code></pre>
<p>Two loose inputs in the order and format <span class="math-container">\$V\$</span> and <span class="math-container">\$[M,N,C]\$</span>, where <span class="math-container">\$[M,N,C]\$</span> are floats.<br />
y-axis of the output will also always be floats.</p>
<p><a href="https://tio.run/##yy9OTMpM/f/f59ymQyujiqMPTzi8PlA5ROvQntrD6w/tP7Tv0AZ9l1D9R00tVdqH50ZU6avXHFrtcnjluR3pWYfWHdqnd3hTkLr/oZ2Hth/edWinz6HtevGHd6jXHN4LVRN0aF1EldbxuUEJh1YcWqmufWj1o4Z5ugqHdh6efmg1SMO69MMbDk8/ulDz0O7//025og30zE11FHQN9ICkgZ6RaSwA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9WmRCUoOSZV1BaUmyl4Gt7eL@Ogh@YdAaTYUBSSYdLyb@0BKjESkmnMqHYJey/z7lNh1ZGFUcfnnB4faByiNahPbWH1x/af2jfoQ36LqH6j5paqrQPz42o0levObTa5fDKczvSsw6tO7RP7/CmIHX/yEPbD@@K9Dm0XS/@8A71msN7oSqCDq2LqNI6Pjco4dCKQyvVtQ@tftQwT1ch8vD0Q6uBytelH95wePrRhZqHdv/XObTNXu/Q1v/R0aY60QZ6BjqGQAykY2N1FGBCBnqmyELGQCEjiEqEKnNTHV2IOiNTsKiJTjTEKCMgNgYLGUP0Ao0CiRnGxsYCAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Same as the previous two challenges:</p>
<pre class="lang-none prettyprint-override"><code>L                        # Push a list in the range [1, first (implicit) input V]
 β                       # Convert the second (implicit) input-triplet [M,N,C] from a
                         # base-v list to base-10 a integer for each v in the
                         # [1,V]-ranged list
  ©                      # Store this list in variable `®`
</code></pre>
<p>Step 2: Calculate the step-size of the y-axis:</p>
<pre class="lang-none prettyprint-override"><code>Z                        # Push the maximum of the list (without popping)
 s                       # Swap so the list is at the top again
  [                      # Loop indefinitely:
   Ð                     #  Triplicate the current list
    ï                    #  Truncate/floor the current values to integers
     Q                   #  Check if the top two lists are the same
      #                  #  If they are: stop the infinite list
       T*                #  Else: multiply each value by 10
         ¼               #  Increase the counter variable `¾` by 1 (0 by default)
  }                      # After the infinite loop
   ï¿                    # (Cast to integers) and take the GCD (Greatest Common Divisor)
     ¾°                  # Push 10 to the power the counter variable `¾`
       /                 # Divide the GCD by this 10**¾
        DU               # Store a copy in variable `X`
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f/f59ymQyujiqMPTzi8PlA5ROvQntrD6w/tP7Tv0AZ9l9D//025og30zE11FHQN9ICkgZ6RaSwA" rel="nofollow noreferrer">Try just the first two steps online.</a></p>
<p>Step 3a: Create the generic y-axis rows:</p>
<pre class="lang-none prettyprint-override"><code>/                        # Divide the values in the list by this
 ₄z+                     #†Add 1/1000 to each
    Ý                    # Pop and push a list in [0,int(^)]
     Xz/                 #†Multiply each by value `X`
        '|«             '# Append &quot;|&quot; to each
           Déθg          # Push its longest value (without popping)
           D             #  Duplicate the list
            é            #  Sort by length (shortest to longest)
             θ           #  Pop and push the last/longest
              g          #  Pop and push its length
               j         # Add leading spaces to make all strings that length
</code></pre>
<p><a href="https://tio.run/##AVIArf9vc2FiaWX//0zOssKpWnNbw5DDr1EjVCrCvH3Dr8K/wr7CsC9EVS/igoR6K8OdWHovJ3zCq0TDqc64Z2r//zUKWzAuNzUsIC0wLjUsIDAuMjVd" rel="nofollow noreferrer">Try it up to this point.</a></p>
<p>Step 3b: Create the rows containing the <code>O</code>s:</p>
<pre class="lang-none prettyprint-override"><code>®                        # Push list `®`
 ¾.ò                     #†Round each to `¾` amount of floating points
    R                    # Reverse the list from highest to lowest
     'O                 '# Push &quot;O&quot;
       ¹                 # Push the first input V
        ·                # Double it
         ú               # Add that many leading spaces to the &quot;O&quot;
          ¹L             # Push a list in the range [1,V]
            ·            # Double each value in that ranged list as well
             ._          # Rotate the space-padded &quot;O&quot; that many times left
               ø         # Pair the values in the lists together
                '|ý     '# Join each inner pair by &quot;|&quot;
                   Déθgj # Add leading spaces again if necessary
</code></pre>
<p><a href="https://tio.run/##AW8AkP9vc2FiaWX//0zOssKpWnNbw5DDr1EjVCrCvH3Dr8K/wr7CsC9EVS/igoR6K8OdWHovJ3zCq0TDqc64Z2rCrsK@LsOyUidPwrnCt8O6wrlMwrcuX8O4J3zDvf//NQpbMC43NSwgLTAuNSwgMC4yNV0" rel="nofollow noreferrer">Try it up to this point.</a></p>
<p>Step 3c: Insert those <code>O</code>-rows:</p>
<pre class="lang-none prettyprint-override"><code>R                        # Reverse the list
 ®                       # Push list `®` again
  Xz*                    #†Divide each by `X` to convert them to 1-based indices
     ǝ                   # Insert them into the big list at those 0-based indices
      R                  # Reverse this entire list
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f/f59ymQyujiqMPTzi8PlA5ROvQntrD6w/tP7Tv0AZ9l1D9R00tVdqH50ZU6avXHFrtcnjluR3pWYfWHdqnd3hTkLr/oZ2Hth/edWinz6HtevGHd6jXHN4LVRN0aF1EldbxuUH//5tyRRvomZvqKOga6AFJAz0j01gA" rel="nofollow noreferrer">Try just the first three steps online.</a></p>
<p>Step 4: Add the bottom two rows, join by newlines, and output the result:</p>
<pre class="lang-none prettyprint-override"><code>`                        # Pop and push all rows separately to the stack
 ¨                       # Remove the last character of the last string (the &quot;|&quot; of
                         # row 0.0)
  ©                      # Store this space-padded &quot;0.0&quot; in variable `®` (without
                         # popping)
   '+«                  '# Append a &quot;+&quot; instead
      „-                 # Push string &quot;- &quot;
         ¹×              # Repeat it the first input V amount of times
           «             # Append that to the space-padded &quot;0.0+&quot;
¹L                       # Push a list in the range [1,input V]
  ®g                     # Push the length of the space-padded &quot;0.0&quot; from variable `®`
    ð×                   # Pop and push a string of that many spaces
      š                  # Prepend it to the [1,V]-ranged list
)                        # Wrap all items on the stack into a list again
 »                       # Join the [1,V]-ranged list with prepended string by spaces,
                         # and then join each line by newlines
                         # (after which the result is output implicitly)
</code></pre>
<p>† These are all to account for floating-point inaccuracies..</p>
<ol>
<li><code>₄z+</code>: Add <span class="math-container">\$\frac{1}{1000}\$</span> (aka 0.001) before truncating it to an integer for the [0,value]-ranged list <code>Ý</code>.</li>
<li><code>Xz/</code> (divide by <span class="math-container">\$\frac{1}{X}\$</span>) instead of <code>X*</code> (multiply by <span class="math-container">\$X\$</span>) and <code>Xz*</code> (multiply by <span class="math-container">\$\frac{1}{X}\$</span>) instead of <code>X/</code> (divide by <span class="math-container">\$X\$</span>) seem to help to prevent floating-point inaccuracies at those steps.</li>
<li><code>¾.ò</code>: Even though all values should already be at that decimal point, the additional round is to fix any floating point inaccuracies from the very first step.</li>
</ol>
<p><a href="https://tio.run/##yy9OTMpM/f/f59ymQyujiqMPTzi8PlA5ROvQntrD6w/tP7Tv0AZ9l1D9w3MjtNRrDq12Obzy3I70rEPrgtT9D@08tP3wrkM7fQ5t14s/vEO95vBeqHTQoXUR@sfnBiUcWnFopbr2odWPGubpKhzaeXj6odUg9evSD284PP3oQs1Du///N@GKNtQz0FEw0DMCEcaxAA" rel="nofollow noreferrer">Try it online.</a> without these counter-measures for floating-point inaccuracies to see what goes wrong.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277099/">277099</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




