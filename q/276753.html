<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276753</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>111</td><td>Haskell</td><td>241120T174135Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276760#276760">colossus</a></td></tr>
<tr d-ix="1"><td>087</td><td>Python 3.8</td><td>241122T043555Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276786#276786">Jonathan</a></td></tr>
<tr d-ix="2"><td>1420</td><td>Jelly</td><td>241121T012337Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276765#276765">Jonathan</a></td></tr>
<tr d-ix="3"><td>117</td><td>Python 3</td><td>241121T055050Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276770#276770">tsh</a></td></tr>
<tr d-ix="4"><td>022</td><td>05AB1E</td><td>241120T164730Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276758#276758">Kevin Cr</a></td></tr>
<tr d-ix="5"><td>118</td><td>JavaScript Node.js</td><td>241121T063237Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276771#276771">l4m2</a></td></tr>
<tr d-ix="6"><td>140</td><td>Python</td><td>241121T015123Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276767#276767">Albert.L</a></td></tr>
<tr d-ix="7"><td>121</td><td>JavaScript V8</td><td>241120T171419Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276759#276759">Arnauld</a></td></tr>
<tr d-ix="8"><td>060</td><td>Charcoal</td><td>241121T013552Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276766#276766">Neil</a></td></tr>
<tr d-ix="9"><td>302</td><td>Python3</td><td>241120T161119Z</td><td><a href="https://codegolf.stackexchange.com/questions/276753/girls-and-boys-parades/276756#276756">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>120</s> <s>112</s> 111 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>f=filter
[]#_=[[]]
c#p=[o:r|o&lt;-c,odd(o+p)||o&gt;p,r&lt;-f(/=o)c#o]
n!k=f(odd.last)$([2,4..2*n]++[1,3..2*k-1])#(2*k+1)
</code></pre>
<p><a href="https://tio.run/##FcoxDoMgFADQnVsYHKCADbRT4@9FCGmMSkpEPkFH7k7t9ob3nY5tjbE1Dz7Ecy3EOvoBa50jM81g8VUqjmqWuCwMRea14jvLMirP7oB8puhI6jbw7BpDnI6T98wa@RwGc0tOCKvl4@9NaccpuyA0b/sUEuQS0tmbzrQf" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>Uses even numbers for girls and odd numbers for boys.</p>
<p><code>c#p</code> takes a list of children <code>c</code>, and a previous child <code>p</code> and generates a list of all parades of those children that can follow after <code>p</code>. It iterates over each child <code>o</code> in turn and skips over anyone with the same parity as <code>p</code> unless they're bigger than <code>p</code> was and prepends that child to each parade generated by the recursive call. The recursive call has the same list of children but with <code>o</code> removed and setting <code>p</code> to <code>o</code>.</p>
<p>We initialize <code>p</code> to be an odd number bigger than all the other boys to ensure we choose a girl to lead the parade and then all we have to do is use <code>filter</code> to only get parades that end with an odd value.</p>
<p>EDIT: -8 bytes thanks to @xnor's idea to use <code>odd(o+p)</code> to check if the parities are different.</p>
<p>EDIT: -1 byte thanks to @Wheat Wizard's idea to make an alias for <code>filter</code>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, 87 bytes</h1>

<pre class="lang-none prettyprint-override"><code>def f(C,p=[1]):{*p*(r:=p[0])}&gt;C!=print(p[:-1]);[f(C-{c},[c]+p)for c in C if(c&gt;r)*c*r&lt;1]
</code></pre>
<p>A function that accepts a set of children represented as the first <span class="math-container">\$n\$</span> positive even integers (girls) and the first <span class="math-container">\$k\$</span> negative even integers (boys), where greater-than means is-older, and prints the restricted parades that employ all these children.</p>
<p><strong><a href="https://tio.run/##dZDLboQgFIb3PsXprECx8dJFY8tsfAxrjKUwNTFIGJxkYnh2i2jqtJ2y4dz@74ejruZzkPmz0vP8wQUIVBJFq7TGxRSqEOmCqiqpsT2WD1TpThqkqiJ2/ZfKzcYTs6RidaSwGDQw6CSU0AnEjhqHLNSvaT1r3vaN1wIFfwfB4rXiLrgIwJ19ypV8xSePrO37hg2jU0cU0lVq@NmgTqrRNJe2H/lfhjhMN31qi8M/UAqJb4gfvDu430pq36SDBsvHT53eqgTeh@uGdstAHoQyAhkma/x0E@cEchffff7OpJbA9I2ldvuKX8KZG6RbeeIoziDczZ2JS3cGRJAuxjieEovnLw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></strong></p>
<h2>Stricter I/O version, 113 bytes</h2>

<pre class="lang-none prettyprint-override"><code>def f(n,k,p=[0]):(r:=p[0])&gt;0&lt;len(p)-n-k!=print(p[:-1]);[f(n,k,[c]+p)for c in{*range(-k,n+1)}-{*p}if(c&gt;r)*c*-~r&lt;1]
</code></pre>
<p>A function that accepts the number of girls, <span class="math-container">\$n\$</span>, and the number of boys <span class="math-container">\$k\$</span> and prints the restricted parades where girls are positive integers and boys are negative integers, with greater-than meaning older.</p>
<p><strong><a href="https://tio.run/##fVDdboMgFL73Kc56BQqL1l0srPRFnGkcg85okFC7pDHs1R1Csy5bW274OOf74RxzGj8GXT4bO8/vUoFCmnTE8CqvMUOWcbOgbb7ppUYGU027B25sq0dkKkaLGr9UUVOJOjNYDRYEtHpKbaP3EtGO6KzAjk6pca1CYmtxKlL6ZTdFPVvZ9LvgBhzCnSTLL2LAJ2YJ@HNh@VKohMejaPp@J4ajV2cciigd5WFE@9aeOwTehlOE/93UarowuSMw/ZC5Y6sbWRzy0FA3Yq6k/PXg7lV7@2TZ1lUTv0FAwQitCawxifjpFy4JlB6fp7oz9vwN" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></strong></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, (14?) 20 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p><sup>14 if we may accept a list of boys and girls in the defined output specification (drop the leading <code>RḤN0¦F</code>).</sup></p>
<pre><code>RḤN0¦FŒ!Ø-j_«×ɗƝṠƲÐṂ
</code></pre>
<p>A monadic Link that accepts a pair of positive integers, <span class="math-container">\$(n, k)\$</span>, and yields a list of lists of parades where the girls are the first <span class="math-container">\$n\$</span> positive even* integers and the boys are the first <span class="math-container">\$k\$</span> negative even* integers, and amongst each greater means older.</p>
<p><strong><a href="https://tio.run/##ATMAzP9qZWxsef//UuG4pE4wwqZGxZIhw5gtal/Cq8OXyZfGneG5oMayw5DhuYL///8oNCwgMik" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<p><sup>* I only used even numbers to save a byte by moving the Double (<code>Ḥ</code>) atom outside of the filter as <code>Ʋ</code> is the longest monadic chaining quick.</sup></p>
<h4>How?</h4>
<pre><code>RḤN0¦FŒ!Ø-j_«×ɗƝṠƲÐṂ - Link: positive integers [#Girls, #Boys]
R                    - range -&gt; [[1..#Girls],[1..#Boys]]
 Ḥ                   - double
  N0¦                - negate the boys
     F               - flatten
      Œ!             - all permutations
                  ÐṂ - keep those minimal under:
                 Ʋ   -   last four links as a monad - f(Permutation):
        Ø-           -     [-1, 1]
          j          -     join with {Permutation}
               Ɲ     -     for neighbouring pairs:
              ɗ      -       last three links as a dyad - f(L, R):
           _         -         {L} minus {R} (negative if L &lt; R)
             ×       -         {L} times {R} (negative if sign(L) != sign(R))
            «        -         {L-R} minimum {L×R} (negative if either of the above)
                Ṡ    -     signs -&gt; list of -1s and 1s
                           (A list of only -1s identifies a restricted parade)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 117 bytes</h1>

<pre class="lang-none prettyprint-override"><code>def f(y,o,r=&quot;&quot;,b=0,e=&quot;&quot;,p=&quot;&quot;):
 o+e==y[-b:]&lt;y==print(r+y)
 for v in y:y=y[1:];f(p,o,r+v,b,y+e);f(o,p+y+e,r+v,~b);p+=v
</code></pre>
<p><a href="https://tio.run/##TY6xDsIwDET3fEWUqSFGasWW4F@IuqMODW2gEmqiUFWYgV8vDVlYrPPd@cmRlnuYT9s2jJ77iiBAQiHAYQ1jFnEfUjMe1IhIl6PT3ZkQY5rmpUqKJOM@JL7yaeakaa80ujO@ipmkVnBAapS7ESCqXf7Mj5MmKly3toCMxZrlDwr28JT69giuf3Br2rwaq7BhvhK9uw4CuHiRkKy0rWT5vIQle/@F2xc" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 128 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=lambda y,o,b=0,e=&quot;&quot;:o+e==y[1:]and-b*[*y]or[v+t for i,v in enumerate(y)for t in f(y[:i],o,b,y[i+1:]+e)+f(o,y[:i]+y[i+1:]+e,~b)]
</code></pre>
<p><a href="https://tio.run/##dYzNCgIhFEb3PYW40vEGRbsBn0RcaCoJMxpmQ7dFr25NQz@bWX1wzsc5Yz3ldGgtyMGM1hmCkMHKHXhJaZ@FlxLVvtcmua3tVIc6FzWJSkIuJMJEYiI@XUdfTPUM@YzrDAND1Uc91wBVFK@G8FwEluEtxBfCw3LdziWmygafWGDU2KOjQOgNKed8s7hLLtW7Vf3ZX2K53NcSf7o9AQ" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>23</s> 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>L`(«œʒ.γd}€ü‹˜P}ʒÁ2£dJ
</code></pre>
<p>Input as a pair <span class="math-container">\$[g,b]\$</span>. Output as a list of lists, using positive integers in the range <span class="math-container">\$[1,g]\$</span> for girls and negative integers in the range <span class="math-container">\$[-b,-1]\$</span> for boys.</p>
<p><a href="https://tio.run/##ATIAzf9vc2FiaWX//0xgKMKrxZPKki7Os2R94oKsw7zigLnLnFB9ypLDgTLCo2RK//9bMiwyXQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/nwSNQ6uPTj41Se/c5pTaR01rDu951LDz9JyA2lOTDjcaHVqc4vW/1sU@XUlBIyc1L70kw/bwfk0lnUPb7P9HRxvpGMXqRJuASWMd49hYAA" rel="nofollow noreferrer">verify all test cases (and their sizes)</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>L             # Convert both values in the (implicit) input to a [1,v]-ranged list
 `            # Pop and push both lists to the stack
  (           # Negate the second list (of boys)
   «          # Merge the two lists together to a single flattened list
    œ         # Take all permutations of this list
     ʒ        # Filter it by:
      .γ      #  Adjacent group by:
        d     #   Non-negative (&gt;=0) check
       }      #  Close the adjacent group by
              #  (the alternating groups each contain the same gender)
        €     #  Map over each group
         ü    #   Map over each overlapping pair in this group:
          ‹   #    Check that the first value is smaller/younger than the second
           ˜  #  Flatten this list of lists of checks
            P #  Verify that all checks were truthy by taking the product
     }ʒ       # After the filter: filter further:
       Á      #  Rotate the valid parade-list once clockwise
        2£    #  Pop and keep the first two values: [last,first]
          d   #  Non-negative check on both: [last&gt;=0,first&gt;=0]
           J  #  Join the checks together
              #  (only 1 is truthy in 05AB1E, so this will only be truthy for
              #  &quot;01&quot;, aka `last&lt;0 &amp;&amp; first&gt;=0`)
              # (after which the filtered list of lists is output implicitly)
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 118 bytes</h1>

<pre class="lang-none prettyprint-override"><code>g=&gt;q=(b,i=0,e=b,...z)=&gt;g+b?[...1/z[i]?q(b,i+1,...z,e):[],...q(--b,0,b,...z,e)]:z.every(t=&gt;t&gt;0^b&gt;0|b&gt;(b=t))&amp;b&lt;=0?[z]:[]
</code></pre>
<p><a href="https://tio.run/##TYxBDoIwEEX3nsKVdEKpRV0RpyRu3HgDgglTC2IQRBuDxLtjJWqc/MXLm/lzyu7ZTV/Liw3q5mCGHIcCVYuMeImSGyQuhOgBVeFTnDgO531SpnH7vvDDccsNREn6xpYFAXHJ6evTqBfmbq4PZlFZJfek5JMUI7QAM1qjjJM@de1hhx0q3dS3pjKiagrWicrUhT3C899OO3HOLuO3EbQrKRl7W8/XkbfxfBYGGtxMdixnC3D54eqDS3D52RBgeAE" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p><a href="https://tio.run/##XY9BasMwEEX3OcUsQjLCihqSLAq2DF30CtmoKlGN7bpyZSEJgbF9dldNuyhdzTD/fZj3oaLyletsOMTH1brOBG54OVWD8UNfs35o0ZC8MiHL8mXT8DWlLUdNFReMsSfn1Igm04TpevRIJE1XS3ip2KeyGHkZC/NqxVEWZo7F97LbtRipYk3Xh9rhNSGHK6Hxp0kyNc86wfP9G7RkzQWIE4WTpCAuv/NM4SxBsmZwz6p6RxSGgpYEeAnTBuCvwG07mQXazvUeHmA76QXehtHf7l7A4ZinQpM8UZP8X3f/EvZAE5eShaxf" rel="nofollow noreferrer">114 from Arnauld's</a>. Not sure which is actually shorter since different output method</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 140 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda w,m,p=1:[G+R for G in s(w)[1:-1]for R in f(m,sorted({*w}-{*G}),-p)]+p*[w+m]
s=lambda p:p and(X:=s(p[1:]))+[p[:1]+i for i in X]or[p]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZG_TsMwEMbFwpCnsDLZiVMpTChSBmDo3qmS5SFpGjCq7VPsKo2qvgFvwNIF3gmehnNMWNjOv_vuuz9-_4TJv1hzvX4cfV_cf7319aHRbdeQkWsOdVmJdb4hvR3ImihDHB2ZKKuilAFtAuqp5s4Oft_RczZeinO2vjBeAJM5ZGLMtUzcYgoVkMZ0dFvVjgIaScZyAaIqZa7mLipYbqUdBMg40_fNrdKADYjy-8Fbe3BJUD7zFrVCZGnT7lLJMXh4fEolRpF1C0RWJcQePalxWqxjCYFBGU8Pe0ORMwQu5s-ZboCm6erVKsND7rKIsyD5V1rXIXK_LjFnrMc1Jzrlp7BOSqJdVM1rQuDzKPPzxKcA_hZc7axulWm8sgYPxe8YmsdzLF_1Aw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>History:</p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 147 bytes</h3>
<pre class="lang-python prettyprint-override"><code>f=lambda w,m,p=1:[G+R for G in s(w)[1:-1]for R in f(m,sorted({*w}-{*G}),-p)]+p*[w+m]
s=lambda p:[p][p&gt;[]:]or sum([[i,i+p[:1]]for i in s(p[1:])],[])
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZG_TsMwEMbFwpCnsDzZjlMpTChSkIChe1fLQ9I2xSi2T7GrNKr6FIwsXeCd4GmwY8LCdv7dfd_98fsnTP7Fmuv14-i74v7rrav7Rre7Bo1cc6jLSqzzDersgNZIGeTISEVZFaWMaBNRRzR3dvD7HTmz8VKc2fpCeQFU5sDEmGuZucUUKgFSwIOQlQx6d9RECMVVDqIq5eypUhsIXSSVXEiaRvu-uVUaQh-k_H7w1vYui_UH3gaFEAw37RYHAcOPT89Yhiix3QIDqzJkjx7VYeigoxmCQRlP-r0hgdMAXMqfmW6AYLx6tcrwmLssxSyW_JPWdYzcr0vKGetRYyYy5ae4FEbJLlXNN4XI51Hm54lPEfwtuNpa3SrTeGVNOAm_o8E8nWP5sR8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 154 bytes</h3>
<pre class="lang-python prettyprint-override"><code>f=lambda w,m,p=1:[G+R for G,g in s(w)[1:-1]for R in f(m,g,-p)]+p*[w+m]
s=lambda p:[x for i,o in(p and s(p[1:]))for x in[(i,p[:1]+o),(p[:1]+i,o)]]or[(p,p)]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZGxTsMwEEDFwpCvsDLZybVSmFCkDMDQvavlIWmbYlTbp8RVEiF-BJYu8E_wNZxjwtLt_O7u6e788YWTf3b2cvk8-3Z1__3eVqfaNPuaDWAAq6KUm3zLWtexDRyZtqzng5BFuSpUgNuAWm7gCCsUKsdMDrlRSb9osJTj3K7BUS1HVts9SZAcSoiQGYlLrgFlWajcCeAxog6hlOskRyB3nPDn5lYbdJ1n2h8679ypT4LkCE3QyCytm12qgIKHx6dUURTZfoHEyoS5s2cVTU59ImHYaev56WA5cUGgj_nXzNTI03T94rSFkHtbirNQctVaVSHq_ywxZ52npSc-5WFTlrKoi1XzbTDweZT5OcIUwP-C650zjba1187S5eBOkDyeY_m4Xw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 168 bytes</h3>
<pre class="lang-python prettyprint-override"><code>f=lambda w,m:[G+B+R for G,g in s(w)[1:-1]for B,b in s(m)[1:-1]for R in f(g,b)]+[w+m]
s=lambda p:[x for i,o in(p and s(p[1:]))for x in[(i,p[:1]+o),(p[:1]+i,o)]]or[(p,p)]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZGxTsMwEIbFwpCnsDLZiVspTChSBsLQvavlIWmaYhT7rMRVEiGehKULiFeCp-EcNwiJ7fzd_b_-O7992Nk9gblc3s-u3dx_fbZFV-m6qcjIdS52aZnuSQs92fETUYYMdGQiyzeZ9LDkdYD6D9x71NITr5lMxZhqGQ2rqc3FtNgpDjhGLalMg3qLcsmY70zIBVXcijyTKTBOQ4UKJiX0glpumQx5v29ulbbQO6LcsXcA3RB5k9MSTIgkrupDLDkWD-VjLLEKrFkhsjwicHakuIaOiO2VcbQ7GoqcIRhC_yXRlaVxvH0GZbjvva7DiR_5Jy0KXw1Xl9Az4HDpmc6p35TEJNiFqeU21vMlyvKc-OzB74LbA-hamcopMHg5fsfQPJxj_cYf" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This feels terribly clumsy ...</p>
<p>Takes girls and boys as lists of identifiers assuming their order is by age.</p>
<h3>How?</h3>
<p>Note that every stretch of girls or boys is completely determined once the set of girls or boys as been picked, IOW their order is forced. We therefore are looking for all ordered partitions of girls and boys into the same number of nonempty sets.</p>
<p>This code implements the obvious recursion to enumerate such partitions. At each depth the leftover girls and boys are split into 2 and 2 nonempty sets (&quot;fixed&quot; and &quot;leftover&quot;) in all ways possible (function s), the fixed are fixed and the leftover are recursed over.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, 121 bytes</h1>
<p>Expects <code>(n)(k)</code>. In the output, girls are numbered from <span class="math-container">\$0\$</span> to <span class="math-container">\$n-1\$</span> and boys are numbered from <span class="math-container">\$n\$</span> to <span class="math-container">\$n+k-1\$</span>.</p>

<pre class="lang-none prettyprint-override"><code>n=&gt;g=(k,a=[...Array(n+k).keys()],...p)=&gt;a.map(v=&gt;(x=v&lt;n,p+p?x/a?0:k&lt;n^x|v&gt;k:x)&amp;&amp;g(v,a.filter(V=&gt;v-V),...p,v))+a||print(p)
</code></pre>
<p><a href="https://tio.run/##TYzBasMwEETv/Yo9hLCLFaUkPZQkUuihv5CLUIlqbNeVKwnZCBvb3@6a0ENPMzzezLdJps1jHbpdel1KsTghK4GWGaE4528xmgFdZonbYmiRNFtpICEN/zEBk5DYi3RxLGTh2u/N9flkL@6jn5K0p5622woTM7ysm66IeBMy7W70@GCJKDPTFGLtOgy0nBWoA4ODZqBe/vLI4KhB89LHd5N/ISrHwGoCIWF8Asi9a31T8MZXeN@Mboaqjk0Le9iMdoZPP7R3Oq9iiY7QPur/zQpmWn4B" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<p><a href="https://tio.run/##VY/BbsIwEETvfMUqQtGu7BgEPVSAjXroL3BJU@EikqZOHcuOrCDCt6cB9dCeRhq9Gc186ajDydeuy@Lz6HxtO5AQQCpgrIM0hVNrQ9ucRdNWGGhWytFKVUk0XMtcCPHivb6gZYaEOV8CUsEn15FUWnxrh1Eq7GXcWe6Y2/cLvV9uzM6@90NUZtNTmlYYuRZl3XRnjwepYnagRwePREwPw2MWOhq3OeQrDquCQ/70q2sO6wIKUbb@VZ8@EXPLwRR0v3Cdwb/9x/nV3qCqfRNgAfOrucFHewlH2k7g/fhyCyVaQvNw/kaTTEECbKIYJG82mYAbjT8" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Hacked version to print the number of permutations</a></p>
<h3>Commented</h3>
<pre class="lang-none prettyprint-override"><code>n =&gt;                // outer function taking n = number of girls
g = (               // g = inner recursive function taking:
  k,                //   k = initial call: number of boys
                    //       then: last inserted value in the permutation
  a = [             //   a[] = array of integers
    ...Array(n + k) //         from 0 to n+k-1
    .keys()         //
  ],                //
  ...p              //   p[] = current permutation, initially empty
) =&gt;                //
a.map(v =&gt;          // for each value v in a[]:
  (                 //
    x = v &lt; n,      //   x = flag set if v is a girl
    p + p ?         //   if p[] is not empty:
      x / a ?       //     x / a is truthy if x = 1 and a[] is a singleton
                    //     i.e. v is a girl and the last item to be inserted:
        0           //       which is invalid
      :             //     otherwise this is valid if:
        k &lt; n ^ x   //       either the neighbors have different genders
        | v &gt; k     //       or the new one is older than the previous one
    :               //   else (first insertion):
      x             //     it must be a girl
  ) &amp;&amp;              //   if truthy:
    g(              //     do a recursive call:
      v,            //       set n = v
      a.filter(     //       pass a copy of a[] ...
        V =&gt; v - V  //       ... where v is removed
      ),            //
      ...p, v       //       append v to p[]
    )               //     end of recursive call
) + a               // end of map()
|| print(p)         // if a[] is empty, print the final permutation
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>69</s> 60 bytes</h1>
<pre><code>≔⁺…·¹Ｎ±…·¹Ｎθ⊞υ⟦⟧ＦυＦ⁻θιＦ∨›⁰×↨ι⁰κ›↨ι⁰κ⊞υ⁺ι⟦κ⟧ＥΦυ∧⁼ＬιＬθ‹⁰↨ι⁰⭆¹ι
</code></pre>
<p><a href="https://tio.run/##hY@9bkIxDIX3PoVHW0olECMTldoKqfyIdkMM6a2baxECN054/TS5AlXq0smOffKd4663sTtbX8pCVVzArc@Ky9DVIlfe2eAYpwaW4ZLTOp8@OSKRgTU7m/hfYZMONH/YZu0xG9gf6uP7HAEzwVhXEqrhYEDoNtlEfI1c6REnBj7kxIpPVhnFwKTyjg16V/xZENydxjvqYn88UAsQJSRc2Qu@iG8fq2QRvvB5yNYrvnFwqUeplFs70NirthC/Lm36nirMNdZ0jE3zUmYwK49X/wM" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Uses negative integers for girls and positive integers for boys where older children have larger absolute value. Explanation:</p>
<pre><code>≔⁺…·¹Ｎ±…·¹Ｎθ
</code></pre>
<p>Make a list of all of the boys and girls.</p>
<pre><code>⊞υ⟦⟧Ｆυ
</code></pre>
<p>Start by considering only sequences starting with a girl. This works because an empty polynomial evaluates to zero, which the code sees as a newborn boy, thus only allowing a girl as the first element.</p>
<pre><code>Ｆ⁻θι
</code></pre>
<p>For each sequence, consider all remaining girls and boys.</p>
<pre><code>Ｆ∨›⁰×↨ι⁰κ›↨ι⁰κ
</code></pre>
<p>If the next child has the opposite sex, or is younger, then...</p>
<pre><code>⊞υ⁺ι⟦κ⟧
</code></pre>
<p>... add the sequence with that child to the sequences under consideration.</p>
<pre><code>ＥΦυ∧⁼ＬιＬθ‹⁰↨ι⁰⭆¹ι
</code></pre>
<p>Output the sequences that ended with a boy.</p>
</div>
<div id="pu9" class="pu"><h1>Python3, 302 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(g,b):
 u,c=[[],[]],0
 while any([t:=len(u[0])&lt;g,T:=len(u[1])&lt;b]):
  if t and c%2:u[0]+=[c]
  if T and not c%2:u[1]+=[c]
  c+=1
 q=[({*u[0]+u[1]},[])]
 for P,t in q:
  if not P:
   if not t[0]%2 and t[-1]%2:yield t
   continue
  for i in P:
   if[]==t or t[-1]%2!=i%2 or t[-1]&lt;i:q+=[(P-{i},t+[i])]
</code></pre>
<p><a href="https://tio.run/##PY7NasMwEITvfortISDHCsTupYjoHXzIbdGhUeRkwcg/rCkm5NndlWv3tqNvZjT9zM8ufn7147LcQwONeuhbbjKYtLeITqNz@pzBz5PaAN9xVsjGtiGqCc8uvzz0dZelyJtLWaAGWMx38IfKJGNh0bs/cF1B7HiD5T/0hS0zGCyq13ENJfiWBbnQphuh1gwUYdi@SB11unfBEjpUaz/jqZTbzBRaUcnku8gUpyB3KqNUtcfRWcsgr1vuw5IU7fpCZpCRqj696K25QJJJSz9SZIXHRlW6yl2@/AI" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276753/">276753</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




