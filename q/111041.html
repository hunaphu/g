<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::111041</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>062</td><td>AWK</td><td>250410T154024Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/279135#279135">xrs</a></td></tr>
<tr d-ix="1"><td>023</td><td>MATL</td><td>170223T140807Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111043#111043">Suever</a></td></tr>
<tr d-ix="2"><td>051</td><td>Haskell</td><td>170223T210138Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111099#111099">colossus</a></td></tr>
<tr d-ix="3"><td>063</td><td>Python 3</td><td>170224T194955Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111215#111215">hyperneu</a></td></tr>
<tr d-ix="4"><td>074</td><td>Clojure</td><td>170228T210518Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111723#111723">Carcigen</a></td></tr>
<tr d-ix="5"><td>144</td><td>Perl 6</td><td>170228T152031Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111664#111664">H&#229;v</a></td></tr>
<tr d-ix="6"><td>085</td><td>Powershell</td><td>170228T112440Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111629#111629">Bjorn Mo</a></td></tr>
<tr d-ix="7"><td>065</td><td>Retina</td><td>170224T180234Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111197#111197">Business</a></td></tr>
<tr d-ix="8"><td>120</td><td>Javascript ES6 nonstrict</td><td>170224T144927Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111152#111152">Qwertiy</a></td></tr>
<tr d-ix="9"><td>035</td><td>><></td><td>170224T141139Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111144#111144">Aaron</a></td></tr>
<tr d-ix="10"><td>103</td><td>Java 7</td><td>170223T150819Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111053#111053">Kevin Cr</a></td></tr>
<tr d-ix="11"><td>093</td><td>Rebol</td><td>170223T160455Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111060#111060">draegtun</a></td></tr>
<tr d-ix="12"><td>014</td><td>Jelly</td><td>170223T181322Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111075#111075">Dennis</a></td></tr>
<tr d-ix="13"><td>015</td><td>V</td><td>170223T174132Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111071#111071">DJMcMayh</a></td></tr>
<tr d-ix="14"><td>144</td><td>Batch</td><td>170223T205820Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111098#111098">Neil</a></td></tr>
<tr d-ix="15"><td>046</td><td>JavaScript ES6</td><td>170223T143821Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111050#111050">Arnauld</a></td></tr>
<tr d-ix="16"><td>073</td><td>GNU sed</td><td>170223T181610Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111076#111076">Riley</a></td></tr>
<tr d-ix="17"><td>071</td><td>PHP 7.1</td><td>170223T180639Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111074#111074">Titus</a></td></tr>
<tr d-ix="18"><td>nan</td><td>GNU sed</td><td>170223T170932Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111070#111070">seshouma</a></td></tr>
<tr d-ix="19"><td>025</td><td>k</td><td>170223T170146Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111068#111068">zgrep</a></td></tr>
<tr d-ix="20"><td>121</td><td>Processing JS modified</td><td>170223T163122Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111064#111064">user6318</a></td></tr>
<tr d-ix="21"><td>022</td><td>CJam</td><td>170223T142741Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111048#111048">Business</a></td></tr>
<tr d-ix="22"><td>058</td><td>Ruby</td><td>170223T154509Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111057#111057">G B</a></td></tr>
<tr d-ix="23"><td>032</td><td>Pyth</td><td>170223T160056Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111058#111058">user4854</a></td></tr>
<tr d-ix="24"><td>102</td><td>SpecBAS</td><td>170223T154441Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111056#111056">Brian</a></td></tr>
<tr d-ix="25"><td>058</td><td>JavaScript ES6</td><td>170223T142446Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111047#111047">Luke</a></td></tr>
<tr d-ix="26"><td>020</td><td>05AB1E</td><td>170223T140946Z</td><td><a href="https://codegolf.stackexchange.com/questions/111041/motorcycle-gear-checker/111044#111044">Emigna</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/" rel="nofollow noreferrer">AWK</a>, 62 bytes</h1>
<pre><code>{for(d=2;i++&lt;NF;)($i~/V/&amp;&amp;d-=d&gt;1)||d+=d&lt;7}$0=d~1?1:d~2?&quot;N&quot;:d-1
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m704sTx7wWonV3dPv2q3YNuI2qWlJWm6FjftqtPyizRSbI2sM7W1bfzcrDU1VDLr9MP01dRSdG1T7Aw1a2pStG1TbMxrVQxsU-oM7Q2tUuqM7JX8lKxSdA0hpiyAUovD4uIgTAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1>MATL, <s>32</s> <s>28</s> 23 bytes</h1>
<p><em>5 bytes saved thanks to @Luis</em></p>
<pre><code>'234561N'j!Uq[aA]&amp;Ys0))
</code></pre>
<p>This solution uses <code>'2'</code> for up-shift and <code>'0'</code> for down-shift.</p>
<p>Try it at <a href="https://matl.io/?code=%27234561N%27j%21UqlFq5K%24Ys0%29%29&amp;inputs=00002222&amp;version=19.8.0" rel="nofollow noreferrer"><strong>MATL Online</strong></a></p>
<p><strong>Explanation</strong></p>
<pre><code>'234561N'   % Push the string literal to the stack
j           % Grab the input as a string
!U          % Convert the input to a numeric array based on the characters.
q           % Subtract 1 to turn '2' into 1 and '0' into -1
[aA]        % Push the array [-1 5] to the stack
&amp;Ys         % Compute the cumulative sum using the array [-1, 5] as
            % the upper and lower limits at each point
0)          % Get the last value from the cumulative sum
)           % Use this to index into the initial string literal.
            % Implicitly display the result
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Haskell, <s>59</s> <s>53</s> 51 Bytes</h1>
<pre><code>(&quot;1N23456&quot;!!).foldl(\l c-&gt;max 0$min 6$l+read[c]-1)1
</code></pre>
<p>Uses <code>0</code> for down and <code>2</code> for up. Usage example:</p>
<pre><code>((&quot;1N23456&quot;!!).foldl(\l c-&gt;max 0$min 6$l+read[c]-1)1) &quot;0002&quot;
</code></pre>
<p>Thanks to @xnor for taking off 6 bytes! Also, turns out I don't need a function name or parentheses so that's another 2 bytes.</p>
</div>
<div id="pu3" class="pu"><h1>Python 3, <s>67</s> 63 bytes</h1>

<pre><code>k=1
for i in input():k+=[k&lt;6,-(k&gt;0)][i&lt;'1']
print('1N23456'[k])
</code></pre>

<p>Pretty straightforward solution.</p>

<p>-4 bytes thanks to @ovs!</p>
</div>
<div id="pu4" class="pu"><h1>Clojure, 74 bytes</h1>

<pre class="lang-clj prettyprint-override"><code>#((vec &quot;1N23456&quot;)(reduce(fn[c s](max 0(min 6((if(= s \^)inc dec)c))))1 %))
</code></pre>
<p>Folds over the shift string, maintaining an index as the accumulator. Each iteration it either increases or decreases the index, then clamps it to the range 0-6. Finally, a string holding the gears is indexed and returned.</p>
<p>Returns a Clojure character representing the current gear. Gear 1 is returned as <code>\1</code>, and gear 'N' is returned as <code>\N</code>.</p>
<p>Pre-golfed explanation. Follow the numbers, since it doesn't read well top-down.</p>
<pre class="lang-clj prettyprint-override"><code>; Expects ^ for shift-up, and V (or anything else) for shift down
; Returns a character representing the current gear
(defn shift [shift-str]
  ((vec &quot;1N23456&quot;) ; 4. Then index the gear list with the calculated index, and return
   (reduce (fn [current-gear s] ; 1. Fold over the shift symbols
             (max 0 (min 6 ; 3. Clamp it to the range 0-6 so we don't overflow
                      ((if (= s \^) inc dec) ; 2. If the shift is up, increase, else decrease
                       current-gear))))
           1
           shift-str)))
</code></pre>
</div>
<div id="pu5" class="pu"><p><strong>Perl 6, 144 bytes</strong></p>

<pre><code>my enum C &lt;1 N 2 3 4 5 6&gt;;my $n=prompt("");my $p=1;for split("",$n) -&gt;$l {$l eq "u" &amp;&amp; $p &lt; 6 ?? ++$p !! 0;$l eq"d"&amp;&amp;$p&gt;0 ?? --$p!!0};say C($p);
</code></pre>

<p>Works as it should, i believe. Improvements are welcome. First time using Perl for anything, but i loved the thought of the language, so i had to try.</p>
</div>
<div id="pu6" class="pu"><h1>Powershell, <s>112</s> <s>87</s> 85 bytes</h1>

<p><code>$i=1;switch([char[]]$args[0]){'^'{if(5-gt$i){$i++}}'v'{if(1-le$i){$i--}}}'1N2345'[$i]</code></p>

<p>ungolfed</p>

<pre><code>$i=1;                                # index which gear we are in
switch([char[]]$args[0]){            # loop over all elements using a switch
  '^'{if(5-gt$i){$i++}}             # if there is a ^ and we are not in sixth yet, shift up
  'v'{if(1-le$i){$i--}}             # if there is a v and we are not in first, shift down
}
'1N2345'[$i]                         # print the output
</code></pre>

<p>saved 25 bytes by reading the <a href="https://codegolf.stackexchange.com/questions/191/tips-for-golfing-in-windows-powershell/">powershell codegolf tips</a></p>

<p>saved 2 bytes by flipping the gt/le operators</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 65 bytes</h1>

<pre><code>^
1 N23456
+(` (.)?(\w*6)u
$1 $2
)`(.)? (\w*6)d
 $1$2
.* (.).*
$1
</code></pre>

<p>Uses <code>u</code> and <code>d</code> for up and down.</p>

<p><a href="https://tio.run/nexus/retina#@x/HZajgZ2RsYmrGpa2RoKChp2mvEVOuZaZZyqViqKBixKWZABJTgAimcCmoGAIF9bRAKvW0gGr@/08BgtJSAA" rel="nofollow noreferrer" title="Retina – TIO Nexus">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<p>This program works by keeping <code>1N23456</code> behind the sequence of instructions. It keeps track of the current gear by having a space behind it. Then it takes one instruction at a time until there's no more.</p>

<pre><code>^
1 N23456
</code></pre>

<p>Start by putting <code>1 N23456</code> before the input. The space before <code>N</code> indicates that <code>N</code> is the current gear.</p>

<p><br></p>

<pre><code>+(` (.)?(\w*6)u
$1 $2
)`(.)? (\w*6)d
 $1$2
</code></pre>

<p>These are two replacement stages, grouped together, and run until they stop changing the string:</p>

<pre><code> (.)?(\w*6)u
$1 $2
</code></pre>

<p>The first one handles shifting the gear up. It will look for any number of gears after the space, followed by a <code>6</code>, then followed by <code>u</code> (<code>u</code> indicates the instruction to gear shift up). If there were characters before the 6, it swaps the space with the character immediately after it, deletes the <code>u</code>, and leaves the rest of the string intact. Since the <code>6</code> is mandatory in the match, it will only swap the space with any character before the <code>6</code>. It will never swap with the <code>6</code>.</p>

<pre><code>(.)? (\w*6)d
 $1$2
</code></pre>

<p>The second stage handles gear shifting down, and works similarly. It looks optionally for a character before the space, then some other gears after ending in <code>6</code>, followed by <code>d</code>. It swaps the space with the character before it, deletes the <code>d</code>, and leaves the rest intact. If the space was at the start of the string, there was no match for a character before the space, so no swap occurs.</p>

<p><br></p>

<pre><code>.* (.).*
$1
</code></pre>

<p>After neither of the above replacements can be done anymore, all gear shifts have been completed. The line is cleared of everything except the gear immediately after the space. This is the final gear.</p>
</div>
<div id="pu8" class="pu"><h1>Javascript ES6 nonstrict, <s>136</s> 120 chars</h1>

<h2>136 chars for <code>V^</code></h2>

<pre><code>with({get x(){return Math.max(0,Math.min(y,6))},set x(v){y=v}})f=s=&gt;eval(s.replace(/(V)|./g,(m,v)=&gt;`x${"-+"[+!v]}=1,`,y=1)+'"1N"[x]||x')
</code></pre>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>with({get x(){return Math.max(0,Math.min(y,6))},set x(v){y=v}})
f=s=&gt;eval(s.replace(/(V)|./g,(m,v)=&gt;`x${"-+"[+!v]}=1,`,y=1)+'"1N"[x]||x')
console.log(f("V^^"))</code></pre>
</div>
</div>
</p>

<h2>120 chars for <code>-+</code></h2>

<pre><code>with({get x(){return Math.max(0,Math.min(y,6))},set x(v){y=v}})f=s=&gt;eval(s.replace(/./g,m=&gt;`x${m}=1,`,y=1)+'"1N"[x]||x')
</code></pre>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>with({get x(){return Math.max(0,Math.min(y,6))},set x(v){y=v}})
f=s=&gt;eval(s.replace(/./g,m=&gt;`x${m}=1,`,y=1)+'"1N"[x]||x')
console.log(f("-++"))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu9" class="pu"><h1><a href="http://esolangs.org/wiki/Fish" rel="nofollow noreferrer">&gt;&lt;&gt;</a>, 35 bytes</h1>
<p>An enthusiastic piece of code that encourages you to drive above the speed limit.</p>
<p>Accepts any two inputs whose code modulo 3 are 0 and 2, for example <kbd>0</kbd> and <kbd>2</kbd>.<br />
For extra fishiness, I recommend the use of <kbd>&lt;</kbd> and <kbd>&gt;</kbd>.</p>
<pre><code>1i:0(?;3%1-+:0(?0:6)?6:1go!
1N23456
</code></pre>
<p>Explanation :</p>
<pre><code>1i:0(?;3%1-+:0(?0:6)?6:1go!
1                             # initial position
 i                            # read the next char
  :0(?;                       # copies it, test copy against 0, if lower stops (EOF detection)
       3%1-                   # map the char to -1 or 1
           +                  # add it to the position
            :0(?0             # if the new position is lower than 0, set to 0
                 :6)?6        # if the new position is greater than 6, set to 6
                      :1go    # output a character from line 1 at the position
                          !   # loops and skip the position initialisation
</code></pre>
<p>You can <a href="https://fishlanguage.com/" rel="nofollow noreferrer">try it here</a> !</p>
</div>
<div id="pu10" class="pu"><h1>Java 7, <s>106</s> <s>105</s> 103 bytes</h1>
<pre><code>char c(String s){int r=1;for(int c:s.toCharArray())r+=c&lt;99?1:-1;return&quot;1N23456&quot;.charAt(r&lt;0?0:r&gt;6?6:r);}
</code></pre>
<p><strong>Explanation:</strong></p>
<pre><code>char c(String s){                // Method with String input and character return-type
  int r = 1;                     // Result-index (0-indexed and starting at 1)
  for(int c : s.toCharArray()){  // Loop over all characters in the input String
    r += c &lt; 99 ?                //  If the current character is '^':
           1                     //   Raise the result-index by 1
         :                       //  If it is 'v' instead:
           -1;                   //   Decrease the result-index by 1
  }
  return &quot;1N23456&quot;.charAt(       // Return the character based on the return-index:
           r &lt; 0 ?               //  If the result-index is below 0
                  0              //   Use 0 instead
                 : r &gt; 6 ?       //  Else-if the result-index is above 6
                          6      //   Use 6 instead
                         :       //  Else
                          r);    //   Use the result-index
}
</code></pre>
<p><strong>Test code:</strong></p>
<p><a href="https://ideone.com/hRoYsq" rel="nofollow noreferrer">Try it here.</a></p>
<pre><code>class M{
  static char c(String s){int r=1;for(int c:s.toCharArray())r+=c&lt;99?1:-1;return&quot;1N23456&quot;.charAt(r&lt;0?0:r&gt;6?6:r);}

  public static void main(String[] a){
    System.out.println(c(&quot;v^^&quot;));
    System.out.println(c(&quot;^^^^^^^^&quot;));
    System.out.println(c(&quot;vvvv^^^vvvv&quot;));
    System.out.println(c(&quot;^v^v^v^v&quot;));
  }
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>2
6
1
N
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Rebol, <strike>96</strike> 93 bytes</h1>
<pre><code>f: func[s][g: next&quot;1N23456&quot;parse s[any[&quot;D&quot;(g: back g)|&quot;U&quot;(unless tail? x: next g[g: x])]]g/1]
</code></pre>
<p>Ungolfed:</p>
<pre><code>f: func [s] [
    g: next &quot;1N23456&quot;
    parse s [
        any [
              &quot;D&quot; (g: back g)
            | &quot;U&quot; (unless tail? x: next g [g: x])
        ]
    ]
    g/1
]
</code></pre>
<p>Example usage (in Rebol console):</p>
<pre><code>&gt;&gt; print f &quot;DUU&quot;         
2

&gt;&gt; print f &quot;DDDUU&quot;
2

&gt;&gt; print f &quot;UUUUUUUUU&quot;  
6

&gt;&gt; print f &quot;UUUUUUUUUD&quot;
5
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>17</s> 14 bytes</h1>

<pre><code>1;r2ị$¥/CỊ¡o”N
</code></pre>

<p>Uses <code>6</code> for up and<code>0</code> for down.</p>

<p><a href="https://tio.run/nexus/jelly#@29oXWT0cHe3yqGl@s4Pd3cdWpj/qGGu3////9UNzMzUAQ" rel="nofollow noreferrer" title="Jelly – TIO Nexus">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>1;r2ị$¥/CỊ¡o”N  Main link. Argument: s (string of 6's and 0's)

1;              Prepend a 1 (integer) to the string/character array s.
       /        Reduce the result by the following dyadic link.
                Let's call the arguments x and y.
      ¥           Create a dyadic chain of 2 links:
  r                 Construct the range [x, ..., y] (increasing or decreasing).
                    y will be a character, but 'r' casts both argument to int.
                    This is intended for use with floats, but it works just as well
                    when the argument is a digit.
     $              Create a monadic chain of two links:
   2ị                 Take the second element of the constructed range.
                  When y = 6 &gt; x, this gives x + 1.
                  When y = 0 &lt; x, this gives x - 1.
                  When y = x, the range is a singleton array, so this gives x.
          ¡     Conditional application:
         Ị        If the previous result is insignificant (0 or 1):
        C           Subtract it from 1.
                This swaps 0 and 1 without affecting the other potential outcomes.
           o”N  Logical OR with 'N', replacing 0 with that character.
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DJMcMayhem/V" rel="nofollow noreferrer">V</a>, <s>20</s>, 15 bytes</h1>

<pre><code>:sil!î¬61énÀxVp
</code></pre>

<p><a href="https://tio.run/nexus/v#@29VnJmjeHjdoTVmhodX5h1uqAgr@P//f05ORkYGAA" rel="nofollow noreferrer" title="V – TIO Nexus">Try it online!</a></p>

<p>Input is a string of <code>h</code> (up) and <code>l</code> (down) characters.</p>

<p><em>Thanks to @nmjcman for saving 5 bytes and teaching me about a vim feature I never knew about!</em></p>

<p>If we could assume the input never goes out of bounds, it would simply be 9 bytes:</p>

<pre><code>¬61énÀxVp
</code></pre>

<p>But unfortunately that isn't allowed.</p>

<p>Explanation:</p>

<pre><code>:sil!           " If the cursor goes out of bounds, ignore it and continue
     î          " Run the following keystrokes as V code, rather than vimscript:
      ¬61       "   Insert the string "654321". This will leave the cursor on the '1'
         én     "   Insert an 'n'
           À    "   Run the first arg as V code. This will move left and right a bunch of times
            x   "   Delete whatever character we ended up on
             V  "   Select this whole line,
              p "   And replace it with the character we just deleted
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Batch, 144 bytes</h2>

<pre><code>@set/ps=
@set g=1
:l
@if %g% neq %s:~,1% set/ag+=%s:~,1%/3-1
@set s=%s:~1%
@if not "%s%"=="" goto l
@if %g%==1 (echo N)else cmd/cset/ag+!g
</code></pre>

<p>Takes input on STDIN, using <code>0</code> to go to a lower gear and <code>6</code> to go to a higher gear. These numbers were chosen to make it easy to ignore the current gear. Finally if the gear is <code>1</code> then <code>N</code> is printed otherwise <code>0</code> is converted to <code>1</code> and the gear is printed.</p>
</div>
<div id="pu15" class="pu"><h2>JavaScript (ES6), <s>49</s> <s>48</s> <s>47</s> 46 bytes</h2>

<p>Expects:</p>

<ul>
<li><code>1</code> for down</li>
<li><code>7</code> for up</li>
</ul>

<pre class="lang-js prettyprint-override"><code>f=([c,...s],g=2)=&gt;c?f(s,g-c&amp;7||g):'1N'[--g]||g
</code></pre>

<h3>Formatted and commented</h3>

<pre class="lang-js prettyprint-override"><code>f = (                   // f is a recursive function which takes:
  [c,                   // - c = next character in input string
      ...s],            // - s = remaining characters
  g = 2                 // - g = current gear, with default = neutral = 2
) =&gt;                    //
  c ?                   // if there's still a character to process:
    f(                  //   do a recursive call with:
      s,                //     - the remaining characters
      g - c &amp; 7 ||      //     - the updated gear if it is valid
      g                 //       or the previous gear if not
    )                   //
  :                     // else:
    '1N'[--g] ||        //   decrement g and output '1' for g = 0, 'N' for g = 1,
    g                   //   or simply the corresponding digit for other values
</code></pre>

<p>Gears are mapped as follows:</p>

<pre><code>g MOD 8 = 0 1 2 3 4 5 6 7
          ---------------
gear    = X 1 N 2 3 4 5 6       (where 'X' is an invalid state)
</code></pre>

<p>Which allows us to easily check the validity of the current gear with:</p>

<pre class="lang-js prettyprint-override"><code>(g &amp; 7) != 0
</code></pre>

<h3>Demo</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=([c,...s],g=2)=&gt;c?f(s,g-c&amp;7||g):'1N'[--g]||g

console.log(f(''))
console.log(f('1'))
console.log(f('11'))
console.log(f('17777'))
console.log(f('1777777771'))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">GNU sed</a>, <s>76</s>  73 bytes</h1>

<p>Includes +1 for <code>-r</code></p>

<pre><code>s/$/1/
:
/1{6}/!s/^U(.*)/\11/
s/^D(.*)1/\1/
t
s/U|D//
t
s/^1$/N/
s/^$/1/
</code></pre>

<p>Output is in unary except neutral, which is still <code>N</code> (see <a href="http://meta.codegolf.stackexchange.com/questions/5343/can-numeric-input-output-be-in-unary?answertab=votes#tab-top">this consensus</a>). </p>

<p><a href="https://tio.run/nexus/bash#K05NUdAtUlD/X6yvom@oz2XFpW9YbVarr1isHxeqoaelqR9jCBQG8lxAPEMgV5@rBMgPrXHRh7DiDFX0/cBKQCb8V/8fCgYuAA" rel="nofollow noreferrer">Try it online!</a></p>

<p>This basically counts up and down in unary then converts 1 to N and 0 to 1.</p>

<pre><code>s/$/1/               # add 1 to the end (the starting value)
:                    # loop start
/1{6}/!s/^U(.*)/\11/ # If the string starts with 'U' and doesn't have 6 ones, increment
s/^D(.*)1/\1/        # If the string starts with 'D' decrement (but not past 0)
t                    # if something changed loop back
s/U|D//              # if the U or D couldn't be applied, remove it.
t                    # if something changed loop back
s/^1$/N/             # replace 1 with N
s/^$/1/              # if "0", replace with 1
</code></pre>
</div>
<div id="pu17" class="pu"><h1>PHP 7.1, 71 bytes</h1>
<pre class="lang-php prettyprint-override"><code>for(;$c=$argv[1][$i++];))$g=max(-1,min($g+=$c&lt;=&gt;X,5));echo N234561[$g];
</code></pre>
<p>shifts <code>$g</code> from -1 to 5, uses negative string offset for first gear.<br />
Run with <code>-nr</code>, provide shifting string as command line argument.</p>
</div>
<div id="pu18" class="pu"><h2><a href="https://en.wikipedia.org/wiki/Sed" rel="nofollow noreferrer">GNU sed</a>, <s>89</s> 87 + 1(r flag) = 88 bytes</h2>

<p>Because sed has no integer types or arithmetic operations, the solution is arrived at by using regular expressions only.</p>

<pre class="lang-sed prettyprint-override"><code>s:$:65432Nx1:
:
/6x/!s:^U(.*)(.)x:\1x\2:
s:^D(.*)x(.):\1\2x:
t
s:U|D::
t
s:.*(.)x.*:\1:
</code></pre>

<p>It works by sliding the pointer <code>x</code> based on each input shift, left (for <code>U</code>p) or right (for <code>D</code>own), along a non-wrapping tape that contains only the cells <code>65432N1</code>. The answer at the end is the value in the cell left of the pointer.</p>

<p><strong>Example run:</strong> or <a href="https://tio.run/nexus/bash#K05NUdAtUlD/X2ylYmVmamJs5FdhaMVlxaVvVqGvWGwVF6qhp6WpoadZYRVjWBFjZMUFFHMBiVUABYFiMUYVVlwlQNHQGhcrCEtPC6ReTwsoa/Vf/X8oGLgAAA" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>

<pre class="lang-sh prettyprint-override"><code>sed -rf gear.sed &lt;&lt;&lt; "UUUUUUD"
5
</code></pre>

<p><strong>Explanation:</strong></p>

<pre class="lang-sed prettyprint-override"><code>s:$:65432Nx1:              # assign initial tape and pointer
:                          # start loop
/6x/!s:^U(.*)(.)x:\1x\2:   # if shift 'U', slide `x` to left, but not past the edge
s:^D(.*)x(.):\1\2x:        # if shift 'D', slide `x` to right, -||-
t                          # repeat
s:U|D::                    # if a shift couldn't be applied, delete it "manually",
t                          # and jump to the start of the loop again
s:.*(.)x.*:\1:             # print value left of pointer `x` (answer)
</code></pre>
</div>
<div id="pu19" class="pu"><h1>k, 25 bytes</h1>

<pre><code>"1N23456"@{6&amp;0|x+y-92}/1,
</code></pre>

<p>It takes input as a string, and uses <code>[</code> for downshift, and <code>]</code> for upshift, because they're conveniently situated.</p>

<pre><code>"1N23456"@                / the numbers 0 to 6 are used for the gears,
                          / this turns them into the correct number/letter
                       1, / prepend 1 because this is our initial gear
          {          }/   / fold the function through the list
                          / x is before, y is the next character
                 y-92     / subtract 92, which is between "[" and "]"
                          / "[" becomes -1 and "]" becomes 1
               x+         / add it to what we had before
           6&amp;0|           / use max and min to set boundaries 6 and 0
</code></pre>

<p>Examples:</p>

<pre><code> shift:"1N23456"@{6&amp;0|x+y-92}/1,
 shift"[]]"
"2"
 shift"]]]]]]]]"
"6"
 shift"[[[[]]][[[["
"1"
 shift"[][][][]"
"N"
 shift"[[[[[[[[]"
"N"
 shift"]]]]]]]]["
"5"
</code></pre>
</div>
<div id="pu20" class="pu"><h1>Processing JS (modified) 121 bytes</h1>
<pre><code>var g=&quot;1N23456&quot;,a=&quot;&quot;,c=0; for(var i=0;i&lt;a.length;i++){if(a[i]===&quot;d&quot;&amp;&amp;c&gt;0){c--;}else if(c&lt;6&amp;&amp;a[i]===&quot;u&quot;){c++;}}println(g[c]);
</code></pre>
<p>Ungolfed</p>
<pre><code>var g=[1,&quot;N&quot;,2,3,4,5,6],a=&quot;&quot;,c=0;
for(var i=0;i&lt;a.length;i++)
{if(a[i]===&quot;d&quot;&amp;&amp;c&gt;0)
{
    c--;

}else if(c&lt;6&amp;&amp;a[i]===&quot;u&quot;)
{
    c++;
    
}

}
println(g[c]);
</code></pre>
<p><a href="https://www.khanacademy.org/computer-programming/new-program/5820138749755392" rel="nofollow noreferrer">Try it online!</a></p>
<p>I went with PJs since I know it well. The only problem is the version I use is <em>very</em> strictly typed. I can't leave out brackets and lots of other tricks. It is pretty simple. The input should go into the variable <code>a</code> and it takes lowercase <code>u d</code>. The program loops until it hits the end of the string and every iteration it checks to see if it is a u or a d. If it is and it won't try and &quot;shift&quot; past where you can it shifts. At the end I print the results!</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://sourceforge.net/p/cjam" rel="nofollow noreferrer">CJam</a>, <s>24</s> 22 bytes</h1>

<pre><code>"1N23456"1q{~0e&gt;6e&lt;}/=
</code></pre>

<p>Uses <code>(</code> for down and <code>)</code> for up.</p>

<p><a href="https://tio.run/nexus/cjam#@69k6GdkbGJqpmRYWF1nkGpnlmpTq2/7/78mEGgggKYmAA" rel="nofollow noreferrer" title="CJam – TIO Nexus">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>"1N23456"               e# Push the string containing all gears
         1              e# Push 1, the initial index
          q             e# Push the input
           {            e# For each character in the input
            ~           e#   Eval that character. ( is decrement and ) is increment.
             0e&gt;        e#   Take the maximum of (0, index)
                6e&lt;     e#   Take the minimum of (6, index)
                   }/   e# (end of block)
                     =  e# Take that index of the string
</code></pre>
</div>
<div id="pu22" class="pu"><h2>Ruby, 58 bytes</h2>
<pre><code>-&gt;s{a=1;s.chars{|b|a-=[a&lt;=&gt;0,a&lt;=&gt;6][b&lt;=&gt;?v]};&quot;1N23456&quot;[a]}
</code></pre>
<p>Expected input is 'v' for a downshift and '^' for upshift</p>
</div>
<div id="pu23" class="pu"><h1>Pyth, 32 bytes</h1>
<pre><code>J1VQ=JhtS[06+J-qNbqNd;?qJ1\N?JJ1
</code></pre>
<p>Uses space and newline for down and up.</p>
<p>Explanation</p>
<pre><code>J1VQ=JhtS[06+J-qNbqNd;?qJ1\N?JJ1
J1                                 Initialize J to 1
  VQ                 ;             For each character in the input
            +J-qNbqNd              Increment or decrement J
      htS[06                       Get the middle sorted value of [0,6,J]
    =J                             Assign it to J
                      ?qJ1\N?JJ1   Change 1 to 'N' and 0 to 1
</code></pre>
<p>There's almost certainly a better way to do the incrementing and the output.</p>
</div>
<div id="pu24" class="pu"><h1>SpecBAS - 102</h1>

<pre><code>1 g=2: INPUT s$
2 FOR i=1 TO LEN s$
3 g+=(s$(i)="^" AND g&lt;7)-(s$(i)="v" AND g&gt;1)
4 NEXT i
5  ?"1N23456"(g)
</code></pre>

<p>Moves the index of the string depending on input and prints the relevant character.</p>
</div>
<div id="pu25" class="pu"><h1>JavaScript (ES6), <s>48</s> 58 bytes</h1>

<pre><code>s=&gt;"1N23456"[[1,...s].reduce((a,b)=&gt;a?a&lt;6?+b?a+1:a-1:6:0)]
</code></pre>

<h1>Usage</h1>

<p>Assign it to a function, and then call it. Input is a string containing a <code>1</code> for an upshift, and a <code>0</code> for a downshift.</p>

<pre><code>f=s=&gt;"1N23456"[[1,...s].reduce((a,b)=&gt;a?a&lt;6?+b?++a:a--:6:0)]
f("011")
-&gt; "2"
f("0")
-&gt; "1"
f("01")
-&gt; "N"
</code></pre>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, <s>22</s> 20 bytes</h1>

<pre><code>Îvy&lt;+®‚Z5‚W}6LÀ'N¸ìè
</code></pre>

<p><a href="https://tio.run/nexus/05ab1e#@3@4r6zSRvvQukcNs6JMgUR4rZnP4QZ1v0M7Dq85vOL/fyMDMDBCADAfAA" rel="noreferrer" title="05AB1E – TIO Nexus">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>Î                      # push 0 (accumulator) and input
 v         }           # for each in input
  y&lt;+                  # decrement current element and add to accumulator
     ®‚Z               # take maximum of current value and -1
        5‚W            # take minimum of current value and 5
            6L         # push the range [1 ... 6]
              À        # rotate left
               'N¸ì    # prepend the letter "N" producing the list [N, 2, 3, 4, 5, 6, 1]
                   è   # index into this list with the value produced by the loop
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/111041/">111041</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




