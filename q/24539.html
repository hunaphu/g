<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::24539</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>AWK</td><td>250402T191546Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/279036#279036">xrs</a></td></tr>
<tr d-ix="1"><td>nan</td><td>JavaScript Node.js</td><td>250402T114326Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/279034#279034">Fhuvi</a></td></tr>
<tr d-ix="2"><td>nan</td><td>Bash</td><td>140324T033703Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24789#24789">Glenn Ra</a></td></tr>
<tr d-ix="3"><td>391</td><td>JavaScript</td><td>140324T103626Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24799#24799">Eliseo D</a></td></tr>
<tr d-ix="4"><td>050</td><td>Javascript 391 441</td><td>140320T142940Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24615#24615">TrungDQ</a></td></tr>
<tr d-ix="5"><td>nan</td><td></td><td>140320T063632Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24593#24593">couchand</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>140319T201908Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24567#24567">kitcar20</a></td></tr>
<tr d-ix="7"><td>212</td><td>TeX</td><td>140319T170704Z</td><td><a href="https://codegolf.stackexchange.com/questions/24539/hidden-stereogram-message/24550#24550">Bruno Le</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/" rel="nofollow noreferrer">AWK</a>, 221 bytes - 50 = 171</h1>
<pre><code>func J(){gsub(/ $/,&quot;&quot;,a);if(1~d)a=sprintf(&quot;%*s&quot;,$1,a);else for(k=1;length(a)&lt;$1;)a=gensub(/ /,&quot;  &quot;,k++%d+1,a);s=s a&quot;\t&quot;a&quot;\n&quot;;a=X}{for(j=1;j++&lt;NF;){if(length(a)+length($j)&gt;$1){j--;J();d=0}else{d++;a=a $j&quot; &quot;}j~NF&amp;&amp;J()}}$0=s
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=RY-xbsIwEIZf5WQZFNcJkKWqZNIRiQ7MHboYcgk2iV3FDqiKwot0Qar6UAx9lzolKsvppLvvu_8-v-TpcLl8t75Inq4_RWt28BKxrnTtNpoDnceExJIJVUTpOWcyc--NMr6IyOTBkZimwxArh1DYJjpkqajQlH4fSbakqQhAiebmCioAEh84n-T8j3OZA0nePAnFECGz174bNDpoNOfLzUqwLlz-V_Kxo5o905R1OklESCvybNEPIbqc86CRQDUB0uvzZjWdhoW-p4vM3Z4cf71c-_QR1qDMEY3HHI5YopeNkka5egaw9qBCPMgV-mHLVkdlSjAWapQ-Bt06P0LbCt2dqJyFna1rawIWupODBPweP0A2CPKEztY4u6X4BQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>func J(){                # J does formatting
gsub(/ $/,&quot;&quot;,a);         # strip trailing space
if(1~d)                  # if only one word
a=sprintf(&quot;%*s&quot;,$1,a);   # pad spaces in front
else for(k=1;            # else round robin
length(a)&lt;$1;)           # shorter than columns
a=gensub(/ /,&quot;  &quot;,       # turn space into two
k++%d+1,a);              # word mod num words
s=s a&quot;\t&quot;a&quot;\n&quot;;          # concat string for stereo
a=X}{                    # reset string
for(j=1;j++&lt;NF;)         # for each word        
{if(length(a)+length($j) # if too long &gt;
&gt;$1)                     # our column input
{j--;                    # back up a word
J();                     # output string 
d=0}                     # reset word count
else{d++;                # if it's shorter we add word
a=a $j&quot; &quot;}               # concat new word with a space
j~NF&amp;&amp;J()                # print last line
}}$0=s                   # print the whole string
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, score=123 (193 bytes -70 bonus)</h1>
<p>The challenge didn't specify anything regarding the &quot;justified text&quot;, so i did a text wrapping instead like in the Bash answer, while still putting the necessary spaces for stereogram.</p>
<p>Note : the text given in example also contains some weird spacing after each punctuation, which have been kept as is.</p>

<pre class="lang-javascript prettyprint-override"><code>(s,k,c,m,a=[&quot; $1&quot;,&quot;$1 &quot;])=&gt;k.split` `.map(w=&gt;s=(r=(x,z,y=/0(\S+)/g)=&gt;x.replace(y,z))(s+&quot; &quot;,0+w+&quot; &quot;,w+&quot; &quot;))&amp;&amp;s.match(RegExp(`.{0,${c}}\\s`,'g')).map(l=&gt;r(l,a[m]).padEnd(c+4)+r(l,a[1-m])).join`
`
</code></pre>
<p><a href="https://tio.run/##1VKxbtswEN39FQfCSEiIViwn7VCA7pQhazuGAcTKjCJHIgmRtZ0EGbv1E9qfy4@4lFRblO1m7w0S9e6O9@49LcVK2KwujJsovZDbe7bFlj7SjFZUsFsE4wRRNE4A3RE2f4ytKQuXQhpXwuA1m1uGa4Y39Jk@sYsp5l8jcpH7yk1cS1OKTOIn@kwIthECRKfRun23T0LOzqy/x2UP@IvMrzcGp/HLlI5fstdXzm1Kz/NzQtpJJZvXuKTitrojsRGLa7XAWXRFog5NJh4n8VIXKh2lW2GtrB3DJqFmRs0lNVdUboynlWlldSnjUucY41padh9WEcKYL/yM3n79QJ/Q2@@faD/OXEazyJc0i0nh8IxEiCsU@UvaAxmNurkY3UChVlI5uYCVzKUTdSFUYasY4MZBYUHAopCuqdLlqlA5KA2Vv5TC8rt1f5u@ldL2HaXVkOmq0sq3@dPawgTcg3wCUUsQa2l1JWNER@hgZNPcZ5MPFKa@KKC4iwDi6og4HCG@yHML1uluaenuIK4GO3YxgLgKFt9FAHF1qMaeSg/5MUOJ2jFDqKEy0K2jMoC4asTc69WRCfVtvv8Tp2cfKSRDp489DU0/THf@Bmb2S@ytPrkiV@8s6eOdLFf/FqH/u05luTohEvQRZMM0Its/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<p><strong>s</strong> is the text, <strong>k</strong> is the hidden message, <strong>c</strong> is the column size, and <strong>m</strong> is the stereo mode : <strong>0</strong> for parallel and <strong>1</strong> for crossed.</p>
<p>First, we append a <code>zero</code> (assumed to never appear in the text parameter) before each of the first occurrence of words that are contained in the hidden message. Words are recognized by the space following them, so we added a space at the end of the full text to protect the last word.</p>
<p>Then using a regex we &quot;text wrap&quot; the text parameter with a maximum column width, and still using spaces to identify the end of words.</p>
<p>After that, we parse each line and add a padding to the left column. We then use replace again (which have been stored) to identify the words beginning with a <code>zero</code>, we remove the <code>zero</code> and put a space before or after the word, depending whether it's the left or right column, and depending of the vision mode.</p>
<p>It might be possible to beat this JS solution by not using all these regex and replace, and appending the words one by one while keeping track of the number of characters added in each line.</p>
</div>
<div id="pu2" class="pu"><h2>Bash, sed:    <del>228</del> <del>223</del> <del>197</del> (242 - 70) = 172</h2>
<pre><code>c=${5:-=};R=$c;L=;for f in r l;do
e=&quot;sed -e &quot;;$e&quot;$ d;s/$\|  */ \n/g&quot; $1&gt;m
o=1;for w in `$e&quot;$ p;d&quot; $1`;do
$e&quot;$o,/^$w /s/^$w /$L$w$R /&quot; m&gt;n;o=&quot;/$c/&quot;
cp n m;done;tr -d \\n&lt;n|fold -sw${2:-35}|$e&quot;s/$c/ /g&quot;&gt;$f
L=$c;R=;done;pr -tmw${3:-80} ${4:-l r}
</code></pre>
<p>If the script is in an executable file called &quot;stereo&quot;, then type</p>
<pre><code>stereo file.in [column_width [page_width [&quot;r l&quot;]]]
</code></pre>
<p>column_width is a number; 25-45 will work, default is 35.</p>
<p>page_width is a number, should be about twice the column_width, default is 80</p>
<p>For cross-eyed viewing, use &quot;r l&quot; as the 4th argument.  Default is &quot;l r&quot; which
sets up for parallel viewing.</p>
<p>EDIT: Rewrote to split the file into one word per line, then reassemble at the end.  Note: reserves the &quot;=&quot; sign for its own use.  Any &quot;=&quot; signs in the input file will become blanks.</p>
<p>EDIT: If your message has &quot;=&quot; signs in it, you can choose another symbol for the script to use, by supplying it as the 5th parameter.</p>
<p><strong>Example</strong></p>
<p>Input: vegetarianism.txt:</p>
<pre><code>I invented vegetarianism.  It is a diet involving no meat, just
vegetables.  It is also common in cows - they are awesome.

vegetarianism. is awesome.
</code></pre>
<p><strong>Result</strong></p>
<p>./stereo vegetarianism.txt 32 72 &quot;l r&quot; : | expand
(using the colon for its internal working symbol)</p>
<pre><code>I invented  vegetarianism. It       I invented vegetarianism.  It
 is a diet involving no meat,       is  a diet involving no meat,
just vegetables. It is also         just vegetables. It is also
common in cows - they are           common in cows - they are
 awesome.                           awesome.
</code></pre>
<p>./stereo washington.txt 35 75 &quot;l r&quot; |expand</p>
<pre><code>In a little district west of          In a little district west of
 Washington Square the streets        Washington  Square the streets
have run crazy and broken             have run crazy and broken
themselves into small strips          themselves into small strips
called 'places'. These 'places'       called 'places'. These 'places'
make strange angles and curves.       make strange angles and curves.
One Street crosses itself a time      One Street crosses itself a time
or two. An artist once discovered     or two. An artist once discovered
a valuable possibility in this        a valuable possibility in this
street. Suppose a collector with a    street. Suppose a collector with a
bill for  paints, paper and canvas    bill for paints,  paper and canvas
should, in traversing this route,     should, in traversing this route,
suddenly meet  himself coming         suddenly meet himself  coming
back, without a cent having been      back, without a cent having been
paid on account!                      paid on account!
</code></pre>
<p>The &quot;|expand&quot; isn't necessary but when shifting the output by 4 places the TABs get handled incorrectly.  It could be put into the script at a cost of 7 bytes.</p>
<h2>ImageMagick variation</h2>
<p>Replacing the last line with a text-to-image ImageMagick command:</p>
<pre><code>c=${6:-=};R=$c;L=;for f in r l;do
e=&quot;sed -e &quot;;$e&quot;$ d;s/$\|  */ \n/g&quot; $1&gt;m
o=1;for w in `$e&quot;$ p;d&quot; $1`;do
$e&quot;$o,/^$w /s/^$w /$L$w$R /&quot; m&gt;n;o=&quot;/$c/&quot;
cp n m;done;tr -d \\n&lt;n|fold -sw${2:-35}|$e&quot;s/$c/ /g&quot;&gt;$f
L=$c;R=;done;
convert -border 10x30 label:@${4:-l} label:@${5:-r} +append show:
</code></pre>
<p>In this one, the &quot;r&quot; and &quot;l&quot; for cross-eyed versus parallel viewing
are separate arguments:</p>
<p>./im_stereo vegetarianism.txt 40 80 l r =</p>
<p><a href="https://i.sstatic.net/iczCJ.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/iczCJ.png" alt="" /></a><br />
<sub>(source: <a href="http://www.simplesystems.org/users/glennrp/StackOverflow/stereo_text.png" rel="nofollow noreferrer">simplesystems.org</a>)</sub></p>
<p>EDIT 3: Added ImageMagick variation.</p>
</div>
<div id="pu3" class="pu"><h1>JavaScript 391</h1>

<pre><code>_='L=b=&gt;b.length;c=console.log;p=prompt;r=(l*=" ")3m*),s=(f=[]3n=w=a52i=0;i&lt;67i++)l/==m@&amp;&amp;(m!,l/=g+r/,r/8g),?&gt;w&amp;&amp;(w=?72;67){9$]5‌​2:]56)&amp;&amp;%#)+64)&lt;w;)#8l4+g,:-1]8r@+g,l!,r!;#8g.repeat(w-%#))}2c(f,s7%f7)a8$f4+s4+"‌​\\n",f!,s!;c(a)!.shift()#9-1]$??%L(*=p().split(g/[i]2for(3).slice(),4[0]5="";6%l7)‌​;8+=9f[%f):s[%s)?6/)+1@[$0]';for(Y in $='@?:98765432/*%$#!')with(_.split($[Y]))_=join(pop());eval(_)
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Javascript 391 (441 - 50)</h1>

<p>(My first code golf)</p>

<pre><code>k=' ';Q='length';A=prompt().split(k);S=prompt().split(k);i=-1;M=25;L=[[]];j=0;R='';while(i++&lt;A[Q]-1){if((j+A[i][Q])&lt;M){if(S.indexOf(A[i])&gt;-1){A[i]=(j?k+k:k)+A[i]}L[L[Q]-1].push(A[i]);j+=A[i][Q]+1}else{j=0;i--;L.push([])}}for(i=0;i&lt;L[Q]-1;P(L[i++].join(C))){C=k;while(L[i].join(C+k)[Q]&lt;M){C+=k}}P(L[i].join(k)+k);function P(a){while(a[Q]&lt;M){a=a.replace(k,k+k)}R+=a;for(c in S){a=a.split(k+k+S[c]).join(k+S[c]+k)}R+=k+k+a+'\n'}console.log(R);
</code></pre>

<h2>Result</h2>

<pre><code>In    a  little  district   In    a  little  district
west    of     Washington   west    of    Washington 
Square   the streets have   Square   the streets have
run    crazy  and  broken   run    crazy  and  broken
themselves    into  small   themselves    into  small
strips   called 'places'.   strips   called 'places'.
These     'places'   make   These     'places'   make
strange     angles    and   strange     angles    and
curves.     One    Street   curves.     One    Street
crosses  itself a time or   crosses  itself a time or
two.     An  artist  once   two.     An  artist  once
discovered    a  valuable   discovered    a  valuable
possibility     in   this   possibility     in   this
street.      Suppose    a   street.      Suppose    a
collector   with  a  bill   collector   with  a  bill
for   paints,  paper  and   for  paints ,  paper  and
canvas      should,    in   canvas      should,    in
traversing   this  route,   traversing   this  route,
suddenly   meet   himself   suddenly   meet  himself 
coming    back, without a   coming    back, without a
cent  having been paid on   cent  having been paid on
account!                    account! 
</code></pre>

<h2>Long code:</h2>

<pre><code>var arr = "In a little district west of Washington Square the streets have run crazy and broken themselves into small strips called 'places'. These 'places' make strange angles and curves. One Street crosses itself a time or two. An artist once discovered a valuable possibility in this street. Suppose a collector with a bill for paints, paper and canvas should, in traversing this route, suddenly meet himself coming back, without a cent having been paid on account!".split(' ');
var secret = "Washington paints himself".split(' ');
var i = -1;
var MAX_WIDTH = 25;
var lines = [[]];
var _l = 0;

var result = '';

while (i++ &lt; arr.length - 1) {
    if ((_l + arr[i].length) &lt; MAX_WIDTH) {
        if (secret.indexOf(arr[i]) &gt; -1) {arr[i] = (_l?'  ':' ') + arr[i]}
        lines[lines.length - 1].push(arr[i]);
        _l += arr[i].length + 1;

    } else {
        _l = 0;
        i--;
        lines.push([]);
    }
}

for (var i = 0; i &lt; lines.length - 1; putText(lines[i++].join(chars))) {
  // Align text
  var chars = ' ';
  while (lines[i].join(chars + ' ').length &lt; MAX_WIDTH) {
    chars += ' ';
  }
}
putText(lines[i].join(' ') + ' ');
function putText(line) {
  while (line.length &lt; MAX_WIDTH) {
    line = line.replace(' ', '  ');
  }
  // Make the illusion
  result += line;
  for (var val in secret) {
    line = line.split('  '+secret[val]).join(' ' + secret[val] + ' ');
  }
  result += ('   ' + line) + '\n';
}
console.log(result);
</code></pre>
</div>
<div id="pu5" class="pu"><h1>GolfScript 209 (279 -50 -20)</h1>

<p>This is my first big GolfScript program.  I wouldn't be surprised if there are optimizations to be had.  Both the bonuses are supported; they are expected to be found after the message inputs, like:</p>

<pre><code>"I invented vegetarianism.  It is a diet involving no meat, just vegetables.  It is also common in cows - they are awesome."

"vegetarianism. is awesome."

16  # column width
0   # view type, 1 for cross eyed (?)
</code></pre>

<p>If you've saved that file to <code>input</code> (and downloaded <a href="http://www.golfscript.com/golfscript/tutorial.html" rel="nofollow">GolfScript</a>) you can invoke the script with:</p>

<pre><code>&gt; cat input | ruby golfscript.rb
</code></pre>

<h3>Golfed</h3>

<pre><code>~{{\}}{{}}if:v;:w;n%~' '%\' '%[.]zip 0:c;{' '*}:s;{[.;]}:r;\{:x;{.c=0=x=}{1c+:c;}until.c&lt;\1c+&gt;[[x' 'v+' 'x v+]]\++}/zip{0:c;[[]]\{.,.c+w&lt;{1c++:c;\)@r+r+}{:c;[r]+}if}/{.{,}%{+}*w\- 1$,1-.{1$1$/@@%@0:g;{3$3$g&gt;+s\++1g+:g;}*\;\;}{[;.2/\2%1$s@@+s@)\;\]{+}*}if}%}%zip{{4s\++}*}%n*puts
</code></pre>

<h3>Ungolfed</h3>

<pre><code>~
#The program:

# Parameters, in reverse natural order

{{\}}{{}}if:v;   # view - truthy for parallel, falsey for cross-eyed
:w;         # col width

n%~         # split input on newlines

' '%\       # split secret message tokens
' '%        # split public message

[.]zip      # left and right

0:c;        # word count

{' '*}:s;   # spaces
{[.;]}:r;   # array of top

# for each secret word
\{

  :x;       # word

  {.c=0=x=}
  {1c+:c;} until
  # next public word is this private word

  # splice edits
  .c&lt; \1c+&gt; [[x' 'v+  ' 'x v+]]\ ++

}/
zip

# layout both messages
{

  0:c;    # char count

  [[]]\   # line accumulator

  # split lines
  {

    .,.c+w&lt;
    # if enough room on line

    #append to current line
    {1c++:c;
    \)@r+r+
    }

    #append as new line
    {:c;
    [r]+
    }if

  }/

  # set lines
  {

    .{,}%{+}* # line chars
    w\-       # space chars
    1$,1-     # gaps between words

    # if multi word
    .{

      1$1$      # duplicate params

      /@@       # chars per space
      %         # extra space gaps

      @         # load line
      0:g;      # current gap

      # join row
      {
        3$3$    # params

        g&gt;+     # extra space
        s       # space chars

        \++     # append

        1g+:g;  # update gap
      }*

      \;\;      # drop params

    }
    # else one word
    {
      [
        ;         # drop gap count
        .         # num spaces needed

        2/\       # spaces per side
        2%        # extra space

        1$s       # left space
        @@+s      # right space

        @)\;\     # word

      ]{+}*     # join

    }if

  }% # end line layout

}% # end message layout

zip

{{4s\++}*}%

n*

puts
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Javascript 493 (minimum expectations)</h1>
<pre><code>g=&quot; &quot;;l=prompt().split(g);r=l.slice();m=prompt().split(g);f=[];s=f.slice();w=0;n=0;a=&quot;&quot;;for(i=0;i&lt;l.length;i++){if(l[i]==m[0]){m.shift();l[i]=g+r[i];r[i]+=g;}if(l[i].length+1&gt;w)w=l[i].length+1;}while(l.length){f[f.length]=&quot;&quot;;s[s.length]=&quot;&quot;;while(l.length&amp;&amp;f[f.length-1].length+l[0].length&lt;w){f[f.length-1]+=l[0]+g;s[s.length-1]+=r[0]+g;l.shift();r.shift();}f[f.length-1]+=g.repeat(w-f[f.length-1].length);}console.log(f,s);while(f.length){a+=f[0]+s[0]+&quot;\n&quot;;f.shift();s.shift();}console.log(a);
</code></pre>
<p>This code sets up two arrays of lines (left and right), arranges them in a string and prints to <code>f12</code> console.</p>
<p><sub>This is just a minimum answer, not intended to win.</sub></p>
</div>
<div id="pu7" class="pu"><h1>TeX 212</h1>

<p>I am using a typesetting system, not ASCII.  The column width can be changed by changing <code>90pt</code> in the fourth line, but I don't know if that's enough to qualify for the 50 bytes discount.  The distance between the two copies of the text can be changed by changing the <code>9pt</code>, also in the fourth line.  The code can probably be made shorter.  One can replace each newline by a single space, but not remove them completely.</p>

<pre><code>\let\e\expandafter\read5to\t\read5to\.\def\a#1
{\def\~##1#1##2\a{\def\t{##1\hbox{\
#1\~{}}##2}\a}\e\~\t\a}\e\a\.{}\shipout\hbox
spread9pt{\hsize90pt\fontdimen3\font\hsize\vbox{\t}\
\let\~\ \def\ {}\vbox{\t}}\end.
</code></pre>

<p>After calling <code>tex filename.tex</code> in the terminal, the user is prompted to give the main text, then prompted again for a list of words to shift.  No empty line in between.  The (space-separated) list of words given in the second line should appear exactly as it is in the main text (punctuation is treated just like a letter would be, only spaces delimit words).</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/24539/">24539</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




