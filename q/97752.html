<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::97752</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>045</td><td>Wolfram Language</td><td>170927T232858Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/143930#143930">Vitaliy </a></td></tr>
<tr d-ix="1"><td>186</td><td>Python 3 + Requests + PIL</td><td>170630T232742Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/129255#129255">LyricLy</a></td></tr>
<tr d-ix="2"><td>nan</td><td>JavaScript + HTML</td><td>170701T002346Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/129262#129262">Justin M</a></td></tr>
<tr d-ix="3"><td>042</td><td>PHP</td><td>170630T231224Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/129252#129252">Jared Me</a></td></tr>
<tr d-ix="4"><td>095</td><td>PHP</td><td>170630T170519Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/129203#129203">Евгений </a></td></tr>
<tr d-ix="5"><td>093</td><td>Powershell</td><td>161028T095738Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97823#97823">colsw</a></td></tr>
<tr d-ix="6"><td>075</td><td>Perl + curl + feh</td><td>161027T171927Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97759#97759">a spaghe</a></td></tr>
<tr d-ix="7"><td>274</td><td>Python 2.7</td><td>161027T230409Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97803#97803">Ioannes</a></td></tr>
<tr d-ix="8"><td>298</td><td>R</td><td>161028T081420Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97820#97820">plannapu</a></td></tr>
<tr d-ix="9"><td>3103</td><td>PowerShell v3+  103 Bytes</td><td>161027T165143Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97754#97754">Matt</a></td></tr>
<tr d-ix="10"><td>440</td><td>AutoIt</td><td>161027T192642Z</td><td><a href="https://codegolf.stackexchange.com/questions/97752/display-an-xkcd/97775#97775">user4264</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://reference.wolfram.com/language/" rel="nofollow noreferrer">Wolfram Language</a> 45 bytes ( Mathematica )</h1>

<pre><code>Import["https://xkcd.com/"&lt;&gt;#,"Images"][[2]]&amp;
</code></pre>

<p>Usage with number:</p>

<pre><code>%@"1500"
</code></pre>

<p>Usage without number:</p>

<pre><code>%@""
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Python 3 + Requests + PIL, <s>192</s> 186 bytes</h1>

<pre><code>from requests import*
import PIL.Image as f
from io import*
r=get("https://xkcd.com/%s/info.0.json"%input()).json()
f.open(BytesIO(get(r["img"],stream=1).content)).show()
print(r["alt"])
</code></pre>

<p>Opens up an image viewer (whichever is default on the system it's being run on) containing the comic, and posts the title text to the console. </p>
</div>
<div id="pu2" class="pu"><h1>JavaScript + HTML, 124 + 18 = 142 bytes</h1>

<pre><code>i=&gt;fetch(`//crossorigin.me/http://xkcd.com/${i||""}/info.0.json`).then(r=&gt;r.json()).then(d=&gt;(A.innerHTML=d.alt,B.src=d.img))
</code></pre>

<pre class="lang-html prettyprint-override"><code>&lt;img id=B&gt;&lt;p id=A&gt;
</code></pre>

<p>Cross-origin solution thanks to <a href="https://codegolf.stackexchange.com/questions/125715/lazy-click-and-drag/125759#125759">Kaiido's answer here</a>.</p>

<p>17 bytes (<code>//crossorigin.me/</code>) can be saved if the proxy required to connect to xkcd.com can be subtracted (<a href="https://codegolf.meta.stackexchange.com/questions/12846/should-proxy-usage-be-included-in-byte-counts/">meta post about this</a>).</p>

<h2>Test Snippet</h2>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
i=&gt;fetch(`//crossorigin.me/http://xkcd.com/${i||""}/info.0.json`).then(r=&gt;r.json()).then(d=&gt;(A.innerHTML=d.alt,B.src=d.img))</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;style&gt;img{width:50%}&lt;/style&gt;&lt;input id=I&gt; &lt;button onclick="f(I.value)"&gt;Run&lt;/button&gt;&lt;br&gt;
&lt;img id=B&gt;&lt;p id=A&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu3" class="pu"><h1>PHP, 42 bytes</h1>

<pre><code>&lt;?=@file('http://xkcd.com/'.$_GET[i])[59];
</code></pre>

<p>Save to a file and fire it up in your web server of choice</p>
</div>
<div id="pu4" class="pu"><h2>PHP, 95 bytes</h2>

<pre class="lang-php prettyprint-override"><code>&lt;?php echo str_replace("title=\"","/&gt;",file_get_contents("https://xkcd.com/".$_GET["id"])); ?&gt;
</code></pre>



<p>Save as main.php, run server </p>

<pre class="lang-bash prettyprint-override"><code>php -S localhost:8123
</code></pre>



<p>Open <a href="http://localhost:8123/main.php?id=1500" rel="nofollow noreferrer">http://localhost:8123/main.php?id=1500</a></p>
</div>
<div id="pu5" class="pu"><h2>Powershell, 93 Bytes</h2>

<p>93 Byte version to use local image viewer.</p>

<pre><code>$n=(iwr xkcd.com/$args).images|?{$_.title};$n.title;iwr ("http:"+$n.src) -OutF x.jpg;ii x.*
</code></pre>

<p>Saved 2 bytes by removing needless doublequotes, then another lot by using <code>("http:"+$n.src)</code> instead of <code>"https://"+$n.src.trim("/")</code> - since the <code>img</code> src comes with <code>//</code> already on it, and xkcd doesn't require https.</p>

<pre><code>$n=(iwr xkcd.com/$args).images|?{$_.title};$n.title;saps ("http:"+$n.src)
</code></pre>

<p><strike><code>$n=(iwr "xkcd.com/$args").images|?{$_.title};$n.title;saps ("https://"+$n.src.trim("/"))</code></strike></p>

<p>extremely similar to Matts powershell answer, (should probably be a comment but low reputation)</p>

<p>Instead this opens a new tab/window in the default browser, and other things, saving some bytes.</p>

<p><code>iwr</code> is an alias for <code>Invoke-WebRequest</code></p>

<p><code>saps</code> is an alias for <code>Start-Process</code> which opens 'it' in the default context.</p>
</div>
<div id="pu6" class="pu"><h1>Perl + curl + feh, <s>86</s> <s>84</s> 75 bytes</h1>

<pre><code>`curl xkcd.com/$_/`=~/&lt;img src="(.*)" title="(.*?)"/;$_=$2;`feh "http:$1"`
</code></pre>

<p>Requires the <code>-p</code> switch. I have accounted for this in the byte count.</p>
</div>
<div id="pu7" class="pu"><h2>Python 2.7, <s>309</s> <s>299</s> <s>295</s> 274 bytes</h2>
<p>Full program. Definitely more golfable, but having read xkcd comics for so long I couldn't let this pass (who knows if this will be helpful in a future for easily browsing xkcd).</p>
<p>If no input is passed, gets current comic. If a valid comic number is passed as input then gets that comic. If an invalid input (not a number comic in the valid range) is passed, throws an error.</p>
<p>Any suggestions on how to reduce byte count are welcome! Will revisit (and add explanation) when I have more time.</p>
<p>-10 bytes thanks to @Dopapp</p>
<p>-21 bytes thanks to @Shebang</p>
<pre><code>import urllib as u,re
from PIL import Image
h='http://';x='xkcd.com/'
o=u.URLopener()
t=u.urlopen(h+x+raw_input()).read()
c=sum([re.findall(r,t)for r in[h+'imgs.'+x+'c.*s/.*\.\w{1,3}','\.\w{1,3}&quot; t.*e=&quot;(.*)&quot; a']],[])
Image.open(o.retrieve(c[0],'1.png')[0]).show();print c[1]
</code></pre>
</div>
<div id="pu8" class="pu"><h1>R, <s>358</s> <s>328</s> <s>310</s> 298 bytes</h1>
<pre><code>f=function(x){H=&quot;http:&quot;;p=paste0;library(XML);a=xpathSApply(htmlParse(p(H,'//xkcd.com/',x)),'//div/img',xmlAttrs)[[1]];download.file(p(H,a[1]),'a');I=`if`(grepl('png',a[1]),png::readPNG,jpeg::readJPEG)('a');d=dim(I)/100;quartz(,d[2],d[1]);par(mar=rep(0,4));frame();rasterImage(I,0,0,1,1);cat(a[2])}
</code></pre>
<p>With new lines and comments:</p>
<pre class="lang-r prettyprint-override"><code>f=function(x){
H=&quot;http:&quot;
p=paste0
library(XML) #Needed for xpathSApply, htmlParse and xmlAttrs
# The following line find the first img element and extract its attributes
a=xpathSApply(htmlParse(p(H,'//xkcd.com/',x)),'//div/img',xmlAttrs)[[1]]
download.file(p(H,a[1]),'a') #Download to a file called 'a'
I=`if`(grepl('png',a[1]),png::readPNG,jpeg::readJPEG)('a') #Check if png or jpeg and load the file accordingly
d=dim(I)/100 #convert dimension from pixel to inches (100 ppi).
quartz(,d[2],d[1]) #open a window of the correct dimension
par(mar=rep(0,4)) #Get rid of margins
frame() #Create empty plot
rasterImage(I,0,0,1,1) #Add png/jpeg to the plot
cat(a[2]) #Print title text to stdout
}
</code></pre>
<p>Screenshots of test cases:</p>
<p>for x=1500:
<a href="https://i.sstatic.net/FK5Qj.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/FK5Qj.png" alt="for x=1500 (png)" /></a></p>
<p>for x empty:<br />
<a href="https://i.sstatic.net/JXYwL.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/JXYwL.png" alt="for x=''" /></a></p>
<p>case when picture is a jpeg:<br />
<a href="https://i.sstatic.net/XjgcE.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/XjgcE.png" alt="for x=10 (jpeg)" /></a></p>
<p>x=859:<br />
<a href="https://i.sstatic.net/f6V2Z.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/f6V2Z.png" alt="x=859" /></a></p>
</div>
<div id="pu9" class="pu"><h2>PowerShell v3+ <s>110</s> <s>99</s> <s>107</s> 103 Bytes</h2>

<pre class="lang-cs prettyprint-override"><code>iwr($x=((iwr &quot;xkcd.com/$args&quot;).images|?{$_.title})).src.Trim(&quot;/&quot;) -outf x.jpg;if($x){ii x.jpg;$x.title}
</code></pre>
<p>Thanks to Timmy for helping save some bytes by using inline assignments.</p>
<p>If no arguments are passed then <code>$args</code> is null and it will just get the current comic. Download the picture, by matching the one with alt text, into a file in the current running directory of the script. Then display it with the default viewer of jpg's. The alt text is then displayed to console. <code>iwr</code> is an alias for <code>Invoke-WebRequest</code></p>
<p>If the number passed (or any invalid input for that matter) does not match the process fails with at least a 404 error.</p>
<pre class="lang-cs prettyprint-override"><code>iwr(                                  # Request the comic image from XKCD
  $x=((iwr &quot;xkcd.com/$args&quot;).images|  # Primary search to locate either the current image
                                      # or one matching an argument passed
     ?{$_.title}))                    # Find the image with alt text
        .src.Trim(&quot;/&quot;)                # Using the images associated link and strip the leading slashes
  -outf x.jpg                         # Output the image to the directory local to where the script was run
if($x){                               # Test if the image acquisition was successful
    ii x.jpg                          # Open the picture in with the default jpg viewer
    $x.title                          # Display alt text to console
}                                     # I'm a closing bracket.
</code></pre>
</div>
<div id="pu10" class="pu"><h2><a href="http://autoitscript.com" rel="nofollow noreferrer">AutoIt</a>, 440 bytes</h2>

<p>Yes, it's long, but it's stable.</p>

<pre><code>#include&lt;IE.au3&gt;
#include&lt;GDIPlus.au3&gt;
Func _($0='')
_GDIPlus_Startup()
$1=_IECreate('xkcd.com/'&amp;$0)
For $3 In $1.document.images
ExitLoop $3.title&lt;&gt;''
Next
$4=_GDIPlus_BitmapCreateFromMemory(InetRead($3.src),1)
$6=_GDIPlus_ImageGetDimension(_GDIPlus_BitmapCreateFromHBITMAP($4))
GUICreate(ToolTip($3.title),$6[0],$6[1])
GUICtrlSendMsg(GUICtrlCreatePic('',0,0,$6[0],$6[1]),370,0,$4)
_IEQuit($1)
GUISetState()
Do
Until GUIGetMsg()=-3
EndFunc
</code></pre>

<p>First of all, this doesn't use RegEx to scrape the site (because I have no time to test this on all comics), but rather uses the Internet Explorer API to iterate through the DOM's <code>img</code> tags until it finds one with a title text.</p>

<p>The binary stream is read from the image URL and rendered into a bitmap using GDIPlus. This is then displayed in a nice, auto-sized GUI with an actual tooltip to make it behave almost exactly like the website.</p>

<p>Here's a test case (<code>_(859)</code>):</p>

<p><img src="https://i.sstatic.net/IRgTc.png" alt=""></p>

<p>)</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/97752/">97752</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




