<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::70802</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>020</td><td>TIBASIC TI84 Plus CE Python</td><td>250916T151805Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/283717#283717">madeforl</a></td></tr>
<tr d-ix="1"><td>014</td><td>APL Dyalog Extended</td><td>200824T081305Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/210032#210032">Razetime</a></td></tr>
<tr d-ix="2"><td>013</td><td>MATL</td><td>160202T230043Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70834#70834">Luis Men</a></td></tr>
<tr d-ix="3"><td>020</td><td>Brachylog</td><td>160203T145442Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70928#70928">Fatalize</a></td></tr>
<tr d-ix="4"><td>026</td><td>ES7</td><td>160202T235523Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70840#70840">Neil</a></td></tr>
<tr d-ix="5"><td>021</td><td>Pyth</td><td>160202T202529Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70810#70810">Denker</a></td></tr>
<tr d-ix="6"><td>010</td><td>Jelly</td><td>160202T201927Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70808#70808">lirtosia</a></td></tr>
<tr d-ix="7"><td>016</td><td>Japt</td><td>160202T200232Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70804#70804">ETHprodu</a></td></tr>
<tr d-ix="8"><td>014</td><td>CJam</td><td>160202T200839Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70805#70805">lynn</a></td></tr>
<tr d-ix="9"><td>028</td><td>Julia</td><td>160202T203315Z</td><td><a href="https://codegolf.stackexchange.com/questions/70802/spiral-permutation-sequence/70813#70813">Alex A.</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>TI-BASIC (TI-84 Plus CE Python), 20 bytes</h1>
<pre><code>Input L
int(√(Ans-1
2Ans(Ans+1)-L+2
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, <s>25</s> <s>19</s> 14 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{2⊥⍨3⍴⌊√⍵-1}-⊢
</code></pre>
<p>-6 bytes from Adám.</p>
<p>-5 bytes from Bubbler.</p>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/qHeuQqJGnqatkZZGWk5@fpFGcWFRiUaerqGmprahpha6mG6ettH/aqNHXUsf9a4wftS75VFP16OOWY96t@oa1uo@6lr0P@1R24RHvX2Pupof9a4BKji03vhR28RHfVODg5yBZIiHZ/D/NAVDrjQFIyA2BmITIDYFYjMQbWBgAKQsLQxAsoZAngEA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>A direct implementation of the last function mentioned on the OEIS page:</p>
<p><span class="math-container">\$a(n)=2×\Big(\big\lfloor\sqrt{n-1}\big\rfloor+1\Big)×\big\lfloor\sqrt{n-1}\big\rfloor-n+2\$</span></p>
<h2>Explanation:</h2>
<pre class="lang-apl prettyprint-override"><code>{(2-⍵)+2×(1+⌊√⍵-1)×⌊√⍵-1} ⍵ → n
                   ⌊√⍵-1  floor of root of n-1
         (1+⌊√⍵-1)×       times 1 + floor of root of n-1
       2×                 times 2
 (2-⍵)                    plus 2-n
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/qHeuQqJGnqatkZZGWk5@fpFGcWFRiUaerqGmprahpha6mG6ettH/ag0j3Ue9WzW1jQ5P1zDUftTT9ahjFlAAqODwdCRe7f@0R20THvX2PepqftS75lHvlkPrjR@1TXzUNzU4yBlIhnh4Bv9PUzDkSlMwAmJjIDYBYlMgNgNiQwMgAAA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://esolangs.org/wiki/MATL" rel="nofollow noreferrer">MATL</a>, <s>16</s> 13 bytes</h1>
<pre><code>qX^Y[tQ*Q2*G-
</code></pre>
<p>Based on <a href="https://codegolf.stackexchange.com/a/70805/36398">Lynn's CJam answer</a>.</p>
<p><a href="http://matl.tryitonline.net/#code=cVhea3RRKlEyKkct&amp;input=MTAw" rel="nofollow noreferrer"><strong>Try it online!</strong></a> (<code>Y[</code> has been replaced by <code>k</code> according to changes in the language)</p>
<pre><code>q       % input n. Subtract 1
X^      % square root
Y[      % floor
tQ      % duplicate and add 1
*       % multiply
Q       % add 1
2*      % multiply by 2
G-      % subtract n
</code></pre>
<hr />
<p>This uses a different approach than other answers (<strong>16 bytes</strong>):</p>
<pre><code>6Y3iQG2\+YLt!G=)
</code></pre>
<p>It explicitly generates the two spiral matrices (actually, vertically flipped versions of them, but that doesn't affect the output). The first one is</p>
<pre><code>17    16    15    14    13
18     5     4     3    12
19     6     1     2    11
20     7     8     9    10
21    22    23    24    25
</code></pre>
<p>and the second one traces the modified path:</p>
<pre><code>25    10    11    12    13
24     9     2     3    14
23     8     1     4    15
22     7     6     5    16
21    20    19    18    17
</code></pre>
<p>To find the <code>n</code>-th number of the sequence it suffices to find <code>n</code> in the second matrix and pick the corresponding number in the first. The matrices need to be big enough so that <code>n</code> appears, and should have <em>odd</em> size so that the origin (number <code>1</code>) is in the same position in both.</p>
<p><strong><a href="http://matl.tryitonline.net/#code=UUcyXCsgNlkzWUx0IUc9KQ&amp;input=MTAw" rel="nofollow noreferrer">Try it online</a></strong> too! (<code>6Y3</code> has been moved according to changes in the language)</p>
<pre><code>6Y3      % 'spiral' string
i        % input n
QG2\+    % round up to an odd number large enough
YL       % generate spiral matrix of that size: first matrix
t!       % duplicate and transpose: second matrix
G=       % logical index that locates n in the second matrix
)        % use that index into first matrix
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 20 bytes</h1>
<pre><code>-1$r$[I*I+I+1=*2-?=.
</code></pre>
<p>This uses the same technique as pretty much all other answers.</p>
<h3>Explanation</h3>
<pre><code>-1                   § Build the expression Input - 1
  $r                 § Square root of Input - 1
    $[I              § Unify I with the floor of this square root
       *I+I+1        § Build the expression I * I + I + 1
             =*2-?   § Evaluate the previous expression (say, M) and build the expression
                     § M * 2 - Input
                  =. § Unify the output with the evaluation of M * 2 - Input
</code></pre>
<p>A midly interesting fact about this answer is that it is easier and shorter to use <code>=</code> rather than parentheses.</p>
</div>
<div id="pu4" class="pu"><h2>ES7, <s>31</s> <s>28</s> 26 bytes</h2>

<pre><code>n=&gt;(m=--n**.5|0)*++m*2-~-n
</code></pre>

<p>I had independently discovered Alex's formula but I can't prove it because I wasn't near a computer at the time.</p>

<p>Edit: Saved 3 bytes partly thanks to @ETHproductions. Saved a further 2 bytes.</p>
</div>
<div id="pu5" class="pu"><h1>Pyth, 21 bytes</h1>
<pre><code>K2-h+^.E@QKK^t.E@QKKQ
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=K2-h%2B%5E.E%40QKK%5Et.E%40QKKQ&amp;input=8&amp;test_suite=1&amp;test_suite_input=1%0A2%0A3%0A4%0A5%0A6%0A7%0A8%0A9%0A100%0A111%0A633%0A1000%0A5000%0A9802%0A10000&amp;debug=0" rel="nofollow noreferrer">Try it online!</a></p>
<p>Nothing fancy going on. Same method as in the JAPT answer.</p>
</div>
<div id="pu6" class="pu"><h1>Jelly, <s>11</s> 10 bytes</h1>
<pre><code>’Æ½ð²+ḷ‘Ḥ_
</code></pre>
<p>Another Jelly answer on my phone.</p>
<pre><code>’Æ½ð²+ḷ‘Ḥ_   A monadic hook:
’Æ½          Helper link. Input: n
’             n-1
 Æ½            Atop integer square root. Call this m.
   ð         Start a new dyadic link. Inputs: m, n
    ²+ḷ‘Ḥ_    Main link:
    ²+ḷ       Square m, add it to itself,
       ‘      and add one.
        Ḥ     Double the result
         _    and subtract n.
</code></pre>
<p>Try it <a href="http://jelly.tryitonline.net/#code=4oCZw4bCvcOwwrIr4bi34bikKzJf&amp;input=&amp;args=MTAw" rel="noreferrer">here</a>.</p>
</div>
<div id="pu7" class="pu"><h1>Japt, <s>20</s> <s>19</s> 16 bytes</h1>
<pre><code>V=U¬c)²-V *2-U+2
</code></pre>
<p><a href="http://ethproductions.github.io/japt?v=master&amp;code=MStVrGMgsi0oVS0oVawtMSBjILI=&amp;input=MTAwMDA=" rel="noreferrer">Test it online!</a></p>
<p>Based on the observation that</p>
<blockquote class="spoiler">
<p> F(N) = ceil(N^.5) * (ceil(N^.5)-1) - N + 2</p>
</blockquote>
<p>Or, rather, that</p>
<blockquote class="spoiler">
<p> F(N) = the first square greater than or equal to N, minus its square root, minus N, plus 2.</p>
</blockquote>
<p>I don't know if this explanation is on the OEIS page, as I haven't looked at it yet.</p>
</div>
<div id="pu8" class="pu"><h1>CJam, 14 bytes</h1>

<pre><code>qi_(mQ7Ybb2*\-
</code></pre>

<p>Using Alex's approach: <code>2*(m^2+m+1)-n</code> where <code>m = isqrt(n-1)</code>.</p>
</div>
<div id="pu9" class="pu"><h1>Julia, 28 bytes</h1>



<pre class="lang-default prettyprint-override"><code>n-&gt;2((m=isqrt(n-1))^2+m+1)-n
</code></pre>

<p>This is a lambda function that accepts an integer and returns an integer. To call it, assign it to a variable.</p>

<p>We define <em>m</em> to be the largest integer such that <em>m</em><sup>2</sup> ≤ <em>n</em>-1, i.e. the integer square root of <em>n</em>-1 (<code>isqrt</code>). We can then simplify the OEIS expression 2 (<em>m</em> + 1) <em>m</em> - <em>n</em> + 2 down to simply 2 (<em>m</em><sup>2</sup> + <em>m</em> + 1) - <em>n</em>.</p>

<p><a href="http://www.tutorialspoint.com/viewproject.php?URL=execute_julia_online.php&PID=0Bw_CjBb95KQMMnNwa2lVd1pudzg" rel="noreferrer">Try it online</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/70802/">70802</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




