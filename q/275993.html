<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::275993</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td></td><td>241015T214758Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276142#276142">General </a></td></tr>
<tr d-ix="1"><td>738</td><td>Python</td><td>241016T112517Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276152#276152">alephalp</a></td></tr>
<tr d-ix="2"><td>nan</td><td></td><td>241011T172746Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276069#276069">ayreguit</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>241009T223609Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276002#276002">Greg Mar</a></td></tr>
<tr d-ix="4"><td>nan</td><td></td><td>241010T140202Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276013#276013">madeforl</a></td></tr>
<tr d-ix="5"><td>nan</td><td></td><td>241010T015259Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276006#276006">south</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>241010T004245Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/276004#276004">Neil</a></td></tr>
<tr d-ix="7"><td>nan</td><td></td><td>241009T124041Z</td><td><a href="https://codegolf.stackexchange.com/questions/275993/mexican-hat-challenge-%e3%83%a1%e3%82%ad%e3%82%b7%e3%82%ab%e3%83%b3%e3%83%8f%e3%83%83%e3%83%88%e3%83%81%e3%83%a3%e3%83%ac%e3%83%b3%e3%82%b8/275994#275994">Luis Men</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Microsoft Excel</h1>
<p>This is not at all optimized for character count, but that's not really a criterion for this one anyway.</p>
<p>Speed Optimizations:</p>
<ul>
<li>Originally, I had a plot function that plotted a single point at a time. This required copying the entire &quot;canvas&quot; every time I wanted to plot a point, which was O(n<sup>2</sup>m<sup>2</sup>), where n and m are canvas and sample area widths respectively.</li>
<li>Then I realized I could just make a sorted lookup table for the points (sort is both for depth buffer and lookup efficiency). Now it's O(n<sup>2</sup> log(m) + m<sup>2</sup>), assuming the sort is sub-O(m<sup>2</sup>) and sorted lookups is O(log m).</li>
<li>Sorting by numeric values is way faster than sorting by text values, which is why I'm multiplying by 1000. Using a comma takes over twice as long. (Personal benchmarks are 7s vs 15s).</li>
</ul>
<pre><code>=LET(
 tableWidth,80,
 resX,0.0625,resY,0.0625,
 width,8,
 dimX,width/resX,
 dimY,width/resY,
 indexes,SEQUENCE(tableWidth-10,tableWidth,0),
 thX,RADIANS(30),
 thZ,RADIANS(60),
 scale,8,
 sX,SIN(thX),cX,COS(thX),
 sZ,SIN(thZ),cZ,COS(thZ),
 rotMatrix,VSTACK(
  HSTACK(cX,-sX*cZ,sX*sZ),
  HSTACK(sX,cX*cZ,-cX*sZ),
  HSTACK(0,sZ,cZ)
 ),
 z,LAMBDA(i,j,SIN(SQRT(i*i+j*j))),
 plotAll,LAMBDA(pts,
  LET(
   zBufs,MAP(pts,LAMBDA(pt,0+INDEX(TEXTSPLIT(pt,&quot;|&quot;),1))),
   coords,MAP(pts,LAMBDA(pt,0+INDEX(TEXTSPLIT(pt,&quot;|&quot;),2))),
   vals,MAP(pts,LAMBDA(pt,0+INDEX(TEXTSPLIT(pt,&quot;|&quot;),3))),
   sorted,SORTBY(HSTACK(coords,zBufs,vals),coords,1,zBufs,1),
   MAP(indexes,LAMBDA(cPtNo,
    LET(
     cX,MOD(cPtNo,tableWidth),
     cY,INT(cPtNo/tableWidth),
     id,1000*cX+cY,
     IF(IFNA(VLOOKUP(id,sorted,1,1),&quot;&quot;)=id,VLOOKUP(id,sorted,3,1),&quot;&quot;)
    )
   ))
  )
 ),
 plotAll(
  MAP(SEQUENCE(dimX*dimY,1,0,1),LAMBDA(ptNo,
   LET(
    i,MOD(ptNo,dimX)*resX-width/2,
    j,INT(ptNo/dimX)*resY-width/2,
    k,z(i,j),
    newPt,MAP(MMULT(rotMatrix,VSTACK(i,j,k)),LAMBDA(x,x*scale)),
    INDEX(newPt,3)&amp;&quot;|&quot;
     &amp;(1000*ROUND(40+INDEX(newPt,1),0)
      +ROUND(30+INDEX(newPt,2),0))&amp;&quot;|&quot;
     &amp;k
   )
  ))
 )
)
</code></pre>
<p>Screenshot for amusement:
<a href="https://i.sstatic.net/oTmaq53A.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/oTmaq53A.png" alt="enter image description here" /></a></p>
<p>I added a Color Scale formatter for ease of viewing.</p>
<h2>Google Sheets port</h2>
<pre><code>=LET(
 tableWidth,80,
 resX,0.0625,resY,0.0625,
 width,8,
 dimX,width/resX,
 dimY,width/resY,
 indexes,SEQUENCE(tableWidth-10,tableWidth,0),
 thX,RADIANS(30),
 thZ,RADIANS(60),
 scale,8,
 sX,SIN(thX),cX,COS(thX),
 sZ,SIN(thZ),cZ,COS(thZ),
 rotMatrix,VSTACK(
  HSTACK(cX,-sX*cZ,sX*sZ),
  HSTACK(sX,cX*cZ,-cX*sZ),
  HSTACK(0,sZ,cZ)
 ),
 z,LAMBDA(i,j,SIN(SQRT(i*i+j*j))),
 plotAll,LAMBDA(pts,
  LET(
   zBufs,MAP(pts,LAMBDA(pt,0+INDEX(SPLIT(pt,&quot;|&quot;),1))),
   coords,MAP(pts,LAMBDA(pt,0+INDEX(SPLIT(pt,&quot;|&quot;),2))),
   vals,MAP(pts,LAMBDA(pt,0+INDEX(SPLIT(pt,&quot;|&quot;),3))),
   sorted,SORT(HSTACK(coords,zBufs,vals),coords,1,zBufs,1),
   MAP(indexes,LAMBDA(cPtNo,
    LET(
     cX,MOD(cPtNo,tableWidth),
     cY,INT(cPtNo/tableWidth),
     id,1000*cX+cY,
     IF(IFNA(VLOOKUP(id,sorted,1,1),&quot;&quot;)=id,VLOOKUP(id,sorted,3,1),&quot;&quot;)
    )
   ))
  )
 ),
 plotAll(
  MAP(SEQUENCE(dimX*dimY,1,0,1),LAMBDA(ptNo,
   LET(
    i,MOD(ptNo,dimX)*resX-width/2,
    j,INT(ptNo/dimX)*resY-width/2,
    k,z(i,j),
    newPt,MAP(MMULT(rotMatrix,VSTACK(i,j,k)),LAMBDA(x,x*scale)),
    INDEX(newPt,3)&amp;&quot;|&quot;
     &amp;(1000*ROUND(40+INDEX(newPt,1),0)
      +ROUND(30+INDEX(newPt,2),0))&amp;&quot;|&quot;
     &amp;k
   )
  ))
 )
)
</code></pre>
<p>Port notes:</p>
<ul>
<li>Google Sheets does not have <code>SORTBY</code>, but <code>SORT</code> is capable of multi-column sort.</li>
<li><code>TEXTJOIN</code> becomes just <code>JOIN</code></li>
<li>I'm surprised that this actually runs faster than my on my Desktop Excel. I'll have to try on Excel Online later.</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 738 bytes</h1>
<pre class="lang-python prettyprint-override"><code>import math

data = [[' '] * 100 for _ in range(30)]

for i in range(81):
    for j in range(81):
        x = -4 + i * 0.1
        y = -4 + j * 0.1
        r = math.sqrt(x**2 + y**2)
        z = math.sin(r)

        # normal vector
        length = math.sqrt(1 + math.cos(r)**2)
        nx = -x * math.cos(r) / r / length if r else 0
        ny = -y * math.cos(r) / r / length if r else 0
        nz = 1 / length

        # light intensity
        light = (ny + nz) / math.sqrt(2)
        char = &quot; .-:=+*#%@&quot;[int(light * 10)]

        # project to screen
        screen_x = 50 - round(x * 6 - y * 6)
        screen_y = 12 - round(z * 5 - x * 1.5 - y * 1.5)
        data[screen_y][screen_x] = char

for row in data:
    print(''.join(row))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lVLNboJAEE565CkmmoYfA4KtxpiY9D0IMYSuAsFduqwVfJVevLQP1WOfpDMgi5peuheYmW--nW_2-_gqG5UKfj5_HtTWXX4__GT7UkgF-1ilhvEaqxjWEIYmmBE4EPg-bIWEDWQcZMx3zHry7cgwKJkNyWVgrwzAQ_n8jzydGpndZ5hgowO-F-hC0xfyu4LEAg3mVW9SWbXjzBDU4MfWkJOGZNyStqELY-BC7uMC3lmihNT5gvGdSm-IA2Rto0RUyHHDz9upaxzsCgFTHG3aU2VbjFhRMfCHtlZT8-82khNozLWaItulCjerGK8y1Qx62vwaLLxyggR0yyDtSkmSxrTPEXjuaj1xxo8voxDprI6A3poedriwlCLH1YESUCWSMa5rXbihzcx9cEGKA3-1aEcLjEj0wr4H0z6CmQafEDTHiJoCb35pw7-hkbwY9t1R_1dHSERSOg9KcSS3EbYzWilJk2l6uSBDiKNtd1a_OL53_i8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>ASCII art with simple lighting.</p>
<pre><code>                                                                                                    
                                                                                                    
                                                                                                    
                                            ==++*******++                                           
                                      :+**###%%%%%###########**                                     
                                  -:+**##%%@%@@@%%%%%####****#####*                                 
                               .-:=+*##%%@@@@@@@@@%%##***++++**######*                              
                              .::=+**###%%%@@@@@@@%%#**+=====+**##%%%%#                             
                            .--:==++**#####%@@@@@@%##*=::::=+**#%%%%%%%%%*                          
                           .--::==+++***###**+@@@@%#++-:=+**##%%@@@@@@@%%%##                        
                         ..--::===+++****#########*######%%%%%@@@@@@@@@@@%%%#                       
                     .  ..--:::===+++***#######%%%%%%%%%%@@@@@@@@@@@@@@@@@%%%###                    
                  :......---:::===+++****#####%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@%%%%###                 
               =:--....----:::===++++****#####%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@%%%%####              
            *+=:----.-----::::====+++****######%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%####           
  %%%%%%%##**==:--------::::=====++++****######%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%###*+==::-- 
   %%%%%%#**+==::::---:::::====+++++*****######%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%##*+==:--  
    %%%%###*++==::::::::::=====+++++*****######%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%#**++:::   
      %%###**+++==:::::=======++++++****#######%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%###*+==     
         ###**+++==========+++++++******#######%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%##**        
            ***++++++++=+++++++++*******#######%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%#           
                   +++++++++++*********#######%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  
                         ++**********#########%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@                        
                             ****###########%%%%%%%%%%%@@@@@@@@@@@@@@@@@                            
                                ###########%%%%%%%%%%%%@@@@@@@@@@@@@@                               
                                  #########%%%%%%%%%%%%%%%%%%%%%%@@                                 
                                     ###########%%%%%%%%%%####%%                                    
                                        ##*++==::----::=++*##                                       
                                                                                                    
                                                                                                    
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Thumby MicroPython</h1>
<pre><code>import thumby
import math
while 1:
    m=[-100]*72
    thumby.display.fill(0)
    ry=(y/4 for y in range(-16, 17))
    for y in ry:
        a=2*y
        rx=(x/4 for x in range(-16, 17))
        for x in rx:
            z=12*math.sin(math.sqrt(x*x+y*y))
            x1=int(x*4+a)
            y1=int(z+a)
            if y1&gt;m[x1]:
                m[x1]=y1
                thumby.display.setPixel(x1+36,18-y1,1)
    thumby.display.update()
</code></pre>
<p>Thumby is a tiny device the size of your thumb, programmed in Micropython with 72x40 pixel black &amp; white screen.
Try the above code by copy/pasting into the emulator <a href="https://code.thumby.us/" rel="noreferrer">here</a> and clicking RESTART (assuming your browser can cope - works with most Chrome based browsers)</p>
<p><a href="https://i.sstatic.net/6pc1PhBM.png" rel="noreferrer"><img src="https://i.sstatic.net/6pc1PhBM.png" alt="Code running on Thumby emulator" /></a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a></h1>
<pre><code>Plot3D[Sin@Norm@{,y},{,-4,4},{y,-4,4}]
</code></pre>
<p>Mostly the obvious implementation, although <code>Norm</code> is a short way to access the square root of the sum of squares, and I did remember to save 2 bytes by letting one of the variables be the invisible <code>Null</code>s before the commas (not that this is code-golf, but habits die hard) :p</p>
<p><a href="https://i.sstatic.net/8Mi6U8dTm.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/8Mi6U8dTm.png" alt="Mexican hat picture" /></a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/madeforlosers/YASEPL-esolang" rel="noreferrer">YASEPL</a></h1>
<p><em>this is a translation of <a href="https://codegolf.stackexchange.com/a/276004/121035">Neil's answer</a> in ZX Spectrum BASIC. really cool dude!</em></p>
<pre><code>=i£1`1!1©0!+}2,255$-5`2=j-4`3!o$j^!z$i^+o&amp;≈0,z!o$j*4!x$i*16+128-o!o$j*8!l$z*32!y$i*2+96+o+l!q$x(!r$y(!t¥q,1}5,y,4!1¤x,y!p$27›$91›!r/3(!n$50-r~!p$59›!q/2(~#&quot;H&quot;&gt;&quot;o&quot;`4!h$/4!j+h}2,4,3!h$/16!i+h}2,4,2
</code></pre>
<p>how it works:</p>
<pre><code>=i£1`1!1©0!+}2,255                           - create list1 with 255 0s
$-5                                          - set I to -4
`2                                           - do {
=j-4                                         -     set J to -4
`3                                           -     do {
!o$j^!z$i^+o&amp;≈0,z                            -         set Z to sin(sqrt(I^2+J^2))
!o$j*4!x$i*16+128-o                          -         set X to (I*16)+128-(J*4)
!o$j*8!l$z*32!y$i*2+96+o+l                   -         set Y to (I*2)+96+(J*8)+(Z*32)
!q$x(!r$y(                                   -         set Q &amp; R to integer versions of X and Y
!t¥q,1}5,y,4                                 -         if list1(Q) &lt; Y {
!1¤x,y                                       -             set list1(X) to Y
!p$27›$91›!r/3(!n$50-r~!p$59›!q/2(~#&quot;H&quot;&gt;&quot;o&quot;  -             plot Q and R on places on the screen
`4                                           -         }
!h$/4!j+h                                    -         J += 0.25
}2,4,3                                       -     } while J &lt; 4
!h$/16!i+h                                   -     I += 0.0625
}2,4,2                                       - } while I &gt; 4
</code></pre>
<p><a href="https://i.sstatic.net/pBJY9jZf.png" rel="noreferrer"><img src="https://i.sstatic.net/pBJY9jZf.png" alt="a picture demonstrating the mexican hat challenge done in yasepl" /></a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.jsoftware.com" rel="noreferrer">J</a> <code>plot</code></h1>
<pre><code>plot _4 4([;;)'1 o.|@j.'
</code></pre>
<p>For more information on how function plots work, see <a href="https://code.jsoftware.com/wiki/Plot/Function" rel="noreferrer">wiki/Plot/Function</a>. <s>For the golfers, this is 24 bytes.</s></p>
<pre><code>plot _4 4([;;)'1 o.|@j.'
              '1 o.|@j.'   NB. string repr of a dyadic fork used by plot
                   |@j.    NB. magnitude of the complex number xjy
               1 o.        NB. sin
     _4 4                  NB. plot range
         ([;;)             NB. dyadic fork
            ;              NB. build a boxed list of _4 4 and the function string
          [                NB. _4 4
           ;               NB. box again
plot                       NB. plot
</code></pre>
<p><a href="https://i.sstatic.net/fTCCuO6t.png" rel="noreferrer"><img src="https://i.sstatic.net/fTCCuO6t.png" alt="A Mexican hat shown in a jQt plot window" /></a></p>
</div>
<div id="pu6" class="pu"><h1>ZX Spectrum Basic</h1>
<h2>Very Slow Program</h2>
<p><a href="https://i.sstatic.net/Z4dbVe5m.png" rel="noreferrer"><img src="https://i.sstatic.net/Z4dbVe5m.png" alt="source code" /></a></p>
<h2>Output</h2>
<p><a href="https://i.sstatic.net/Kg5rFvGy.png" rel="noreferrer"><img src="https://i.sstatic.net/Kg5rFvGy.png" alt="output" /></a></p>
<h2>Less Slow Program</h2>
<p><a href="https://i.sstatic.net/g0lHuEIz.png" rel="noreferrer"><img src="https://i.sstatic.net/g0lHuEIz.png" alt="source code" /></a></p>
<h2>Output</h2>
<p><a href="https://i.sstatic.net/xFp2l2Ri.png" rel="noreferrer"><img src="https://i.sstatic.net/xFp2l2Ri.png" alt="output" /></a></p>
<p>Sorry for source screenshots but I was too lazy to retype everything.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a></h1>
<pre><code>KUQ_ZvqK/t!YyY,lYH
</code></pre>
<p>Try it at <a href="https://matl.io/?code=KUQ_ZvqK%2Ft%21YyY%2ClYH&amp;inputs=&amp;version=22.8.0" rel="noreferrer">MATL Online</a>!</p>
<p>Some <em>obscure</em> features:</p>
<ul>
<li>The code does not use any numeric characters;</li>
<li>The hat plot is rather <em>dark</em>;</li>
<li>The language itself?</li>
</ul>
<h3>How it works</h3>
<pre><code>KUQ   % Push 4, square, add 1: gives 17
_Zv   % Symmetric range: gives row vector [17 16 ... 2 1 2 ... 16 17]
q     % Subtract 1, element-wise: gives [16 15 ... 1 0 1 ... 15 16]
K/    % Divide by 4, element-wise: gives [4. 3.75 ... 0.25 0 0.25 ... 3.75 4]
t!    % Duplicate, transpose
Yy    % Hypotenuse (square root of sum of squares), with implicit expansion.
      % Gives a square matrix
Y,    % Sine, element-wise
lYH   % Plot as surface
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/275993/">275993</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




