<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::278114</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Python</td><td>250207T154641Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278127#278127">Mukundan</a></td></tr>
<tr d-ix="1"><td>017</td><td>Jelly</td><td>250207T215416Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278133#278133">Jonathan</a></td></tr>
<tr d-ix="2"><td>174</td><td>Haskell</td><td>250207T193247Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278131#278131">ShapeOfM</a></td></tr>
<tr d-ix="3"><td>070</td><td>Charcoal</td><td>250207T165717Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278129#278129">Neil</a></td></tr>
<tr d-ix="4"><td>459</td><td>Python3</td><td>250207T151329Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278125#278125">Ajax1234</a></td></tr>
<tr d-ix="5"><td>146</td><td>Python 3.10</td><td>250207T151358Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278126#278126">SevC_10</a></td></tr>
<tr d-ix="6"><td>039</td><td>K ngn/k</td><td>250207T112823Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278120#278120">ovs</a></td></tr>
<tr d-ix="7"><td>9895</td><td>jq</td><td>250207T100819Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278119#278119">mousetai</a></td></tr>
<tr d-ix="8"><td>095</td><td>JavaScript Node.js</td><td>250207T052255Z</td><td><a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278115#278115">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <sup><s></s>101</sup> 99 bytes</h1>
<p><em>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/53748/jonathan-allan">@Jonathan Allan</a></em></p>
<pre class="lang-python prettyprint-override"><code>f=lambda x,y:min([y+sum(x[:i])-sum(x[:i//2])/2+f(x[i:],y)for i in range(1,len([x.sort()]+x))]or[0])
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dVFLTsMwEBXbnGKUVaw6bex8sCK1UjdISCyQuoy8CJBApPyUpii5BXs23cBlOAGchkns0I-KlZEz771547HfP-u-fanK_f5j16a2-H5Ml3lcPDzF0NE-LLLSivrZdldYXRRmktjT72LBJVnwWYpZFkrak7RqIIOshCYunxOL0TzB4m6-rZrWInLWESKrJnIk0a3ehoo8K5OhqKpR7ZDQAFxWT6EjFJKuhiUUcW0lr3FOR_F8W-dZa5lgr8AkZNRXuxZ1eBQKPTFGqG6ysrUi82Z9e2dSMO_Xm40po1G5HIwlarELUvYKBUjoc-1_rr4CChF35NCDB4bKKLgK8Q6I1riBwfgEcUcX4joqpeApXAQnaKBQ5hxg7whm5x4UfE1xdmZE4VpTPje8I4rrcKde7ki7_9DMNXykhaBwEvipyXAE_-8GLoX28Q3mYB4xTVzelafjGPxIehh2mgy7a6kQY3sWKBkTyonhTMMzjEcQ-o4C9ai_" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 17 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ṢṚŒṖŒHHÐeFSƲ€€+§Ṃ
</code></pre>
<p>A dyadic Link that accepts the pizza prices on the left as a list of even integers and the delivery price on the right as an integer and yields the minimal cost incurrable by optimally ordering.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hzkUPd846OunhzmlHJ3l4HJ6Q6hZ8bNOjpjVApH1o@cOdTf///482NNNRMDbQUTC0AGIQbQLERjoKRkC2kUXsf1MA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8///hzkUPd846OunhzmlHJ3l4HJ6Q6hZ8bNOjpjVApH1o@cOdTf9BkjN0Di930M961DBHwdZO4VHDXM3I//@jo810FKKNDGJjdbgUoGwdBWM0Pkze0AgmYGSAoUVHwQSLmBmamAkWMWOouClW/ToK5lBxEyRxIyg2RpIzxiFnCpSzsNBRQMFAhJA1QtKFiqEeNwBygCREFDsNUWmEpA7hL5g/gJYiucnQDKLG0AJihiHQE6AgBtsMdl0sAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<p>There is never any point in making an order which is not a contiguous sublist of an ordered list of the pizza prices since swapping any skipped one (from another order they are therefore currently in) with the next most expensive pizza in the order will either be cheaper or will be the same cost.</p>
<pre><code>ṢṚŒṖŒHHÐeFSƲ€€+§Ṃ - Link: list of integers, PizzaPrices; integer DeliveryCost
Ṣ                 - sort {PizzaPrices}
 Ṛ                - reverse {that}
  ŒṖ              - partitions -&gt; all ways to split that up into contiguous parts
           Ʋ€€    - for each part (i.e. order) of each partition:
    ŒH            -   split into two (if odd in length then left half is longer)
       Ðe         -   to those in the right half (cheaper pizzas):
      H           -     halve
         F        -   flatten {this list of lists of costs}
          S       -   sum {these}
              +   - add {DeliveryCost} (vectorises across all order-costs)
               §  - sums {of that}
                Ṃ - minimum
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 174 bytes</h1>
<pre class="lang-haskell prettyprint-override"><code>import Data.List (sort)
(?)=div
f d=minimum.(sum.(sum.(d:).(\(l,h)-&gt;((?2)&lt;$&gt;l)&lt;&gt;h).((?2)&lt;$&gt;length&gt;&gt;=splitAt)&lt;$&gt;)&lt;$&gt;).p.sort
p(x:y)=(([x]:)&lt;$&gt;p y)++[(x:a):b|a:b&lt;-p y]
p _=[[]]
</code></pre>
<p>The operative function is <code>f</code>, which takes the delivery fee and then the list of pizza prices.</p>
<p>I'm not much experienced at competitive golf; I suspect a great deal more can be shaved off. The import of <code>sort</code> is frustrating. The logic for generating all contiguious partitionings of the sorted list is taken from <a href="https://stackoverflow.com/q/35423903/10135377">here</a>, but of course I've scrunched it quite badly. By my count I'm only breaking-even by using <code>?</code> instead of <code>`div`</code>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 70 bytes</h1>
<pre><code>Ｗ⌊⁻ηυＦ№ηι⊞υι≔⟦⟦…υ¹⟧⟧ηＦΦυκ≔⁺Ｅη⮌Ｅ⮌κ⎇νμ⁺μ⟦ι⟧Ｅη⊞Ｏκ⟦ι⟧ηＩ⌊ＥηΣ⁺θＥι⁻Σλ⊘↨…λ⊘Ｌλ⁰
</code></pre>
<p><a href="https://tio.run/##RU9NS8QwEL37K3JMIEJdYT3sSQviYReLeis5hDpuQtOk5qOyvz5O0v0IDPMyb97Mm0FJPzhpcv5T2gChB231lKaSU6CKk8QYIz/OE9q6ZGMpaax0KSiaCt7dPYegj5b2fXsaDLTKzYV5YEJwopCv6ldtIvhCjCg/SzqDSw5yLlM/YAEfoH4veGScfIG30p@o5WTipCow91qgMaTP6uLnfQYvo/N0vPDr/s5rNN7KEG/nrapPhHXi7zpIY6qHF8Kg/E2aBb7pi0Qzt@vMldiDPUaFrdjbsOvb5dxv0cSm4eQRY4vx1AiR7xfzDw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｗ⌊⁻ηυＦ№ηι⊞υι
</code></pre>
<p>Sort the prices into order.</p>
<pre><code>≔⟦⟦…υ¹⟧⟧ηＦΦυκ≔⁺Ｅη⮌Ｅ⮌κ⎇νμ⁺μ⟦ι⟧Ｅη⊞Ｏκ⟦ι⟧η
</code></pre>
<p>Generate all possible orders of pizzas of consecutive prices. (We don't need all partitions because for example <code>10, 30</code> and <code>20, 40</code> will always be more expensive than <code>10, 20</code> and <code>30, 40</code>.)</p>
<pre><code>Ｉ⌊ＥηΣ⁺θＥι⁻Σλ⊘↨…λ⊘Ｌλ⁰
</code></pre>
<p>Calculate the price of each set of orders and output the minimum.</p>
</div>
<div id="pu4" class="pu"><h1>Python3, 459 bytes</h1>
<pre class="lang-py prettyprint-override"><code>S=sorted
E=enumerate
def f(d,p):
 q,M,U,D=[([],p,0)],-1,[],{}
 while q:
  (a,p,c),*q=S(q,key=lambda x:(len(x[1]),x[2]))
  if[]==p:M=min(M,c)if M!=-1 else c;continue
  for j,k in E(p):
   for A in[a+[[k]]]+[a[:J]+[K+[k]]+a[J+1:]for J,K in E(a)]:
    if(P:=S(map(S,A)))not in U:
     U+=[P];C=sum(d+sum(j*0.5 for j in i[:len(i)//2])+sum(i[len(i)//2:])for i in P)
     if not(V:=D.get(str(T:=p[:j]+p[j+1:])))or C&lt;=V:q+=[(P,p[:j]+p[j+1:],C)];D[str(T)]=C
 return M
</code></pre>
<p><a href="https://tio.run/##dVPLUtswFF2jr7hlEylWwLIT12MqOkxgA5NOZihsFC0MkYuC4zi208K0/fb0@kEIDPVYlu855770yJ@rh1Xmh3mx3V7LclVUZk4upMk2S1PElSFzk0BC5zxnEYE1n/Abfi4VVZrn3GWaDwTH/99/Cfx6sKmBNcqAxsjeM95fy2u65o/mWabx8m4ew1NEU5PRJyU040/K04yh3iZKS5lHE7m0GZ2gq01g8kkOBJi0NHB/cr/KKpttDIqTVQEL/gg2gwvalNViZ4io2FHqUWvtqFhFlzhdObXtxOrSEZGudZf8qvWNmW6cMT2dRljpMs7pNT9jjGWrqtbctDzcOFJN9clYlpslnTv1d9F3j0ZtLbXSqqjuy7LjY@ypUVi1QyLNaqWtlVPWxsQOMQu9jeT50Q9T0bIq6PdI5ipaaCdXi7pcrATdxl/kbbTGEuiUv6H5mOmTc9V4Mi3HBApTbYoMJlu7zHEv0Sa7xIlNK1PQb6vMcDg8PCQBB@W5Ggan4AWdxcFvkeEr0mn8gAjvBfLczhGfPVcOwxYPgzdo0KLCfYWHe7B4H4PDqKM88S4Qh88dNfLIcI/yuuG/5PIb2v8PLXwyQjoMObwZ@LadYQuj3Qp8NLo4IyJctJXoiI/nNqbrEm9P@trsS2eYvZOGYZNeBK1MhG0kgT3V29CUEHZrFOB2HpV5aivam2U9hpfioB9zuAMJ9aE2P@OU42HYacrZYHY6K//wWUm/ypliPQ4Wr@JBXJYGz01C@zEDKeGO5IXN0KUyZVVCXvPzHtv@Aw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3.10/" rel="nofollow noreferrer">Python 3.10</a>, <a href="https://more-itertools.readthedocs.io/en/stable/" rel="nofollow noreferrer">more_itertools</a>, 146 bytes</h1>
<p>The solution uses the external library <code>more_itertools</code>. It can be installed with the command <code>pip install more-itertools</code>.</p>
<p>The lambda function takes as input arguments the list of pizza prices and the delivery fee; it returns the minimum total cost.</p>

<pre class="lang-none prettyprint-override"><code>from more_itertools import*
f=lambda p,s:min([sum(s+sum(sorted(o)[:len(o)//2])/2+sum(sorted(o)[len(o)//2:])for o in g)for g in set_partitions(p)])
</code></pre>
<p><em>Cannot</em> <a href="https://tio.run/##dVLtjoMgEPzvU@y/yh2XCn4cMfFexJjGa7ElUTFAL@nTe0DVmtMj4pKZ2WHZ7PAwN9nHbFDj2CjZQScVPwnDlZGy1SC6QSrzFjRFW3fflxoGrPNO9GGp712o3/3fKvgllKjMW97beDzSCh3pH3Lh8go1UoEE0cPVH6/uqLk5DbUywgjZ63BAFRoN1wYKKAOwK8wwlDSqMNAM4TWEIXZwsoG9Ol5gQmecRt7Hrq2TNXIky/aozFEk2nDJwpF/LDGknqdk3xfDp@fTJT9Z8XTa8fP@eK2JdzVk0aRWw5h90Xrbz3Xg9cp06dne9o7p0sjIgiWZ2P3o3KNozqAr/asf87ttMV7P2Loakj21hD09SeLaN1XEfC9d9VUQuCG68Fb8cPXAMChx5hqDkaZuT2dpZ8jOl5ul3Jsrru@tm6smnKVzMvICi/Ym3BoePr4OeEqfY1G8rkHjLw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a> because of external library, but here are the results for the test cases:</p>
<pre class="lang-none prettyprint-override"><code>6 [20] -&gt; 26.0 True
6 [20, 30] -&gt; 46.0 True
6 [20, 20] -&gt; 36.0 True
12 [20, 2200] -&gt; 2222.0 True
6 [20, 30, 40] -&gt; 86.0 True
6 [20, 30, 60] -&gt; 106.0 True
6 [20, 40, 60] -&gt; 112.0 True
6 [20, 30, 40, 50] -&gt; 121.0 True
6 [20, 30, 60, 70] -&gt; 152.0 True
4 [20, 30, 20, 20, 30] -&gt; 103.0 True
4 [30, 30, 20, 20, 30] -&gt; 113.0 True
5 [88, 88, 88, 88, 8, 8] -&gt; 286.0 True
5 [20, 20, 20, 20, 20, 20, 20] -&gt; 115.0 True
100 [10, 20, 10, 20, 10, 20, 10, 20] -&gt; 200.0 True
2 [10, 20, 30, 40, 50, 60, 70, 80] -&gt; 288.0 True
5 [16, 30, 18, 10, 14, 12, 20, 28] -&gt; 126.0 True
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>41</s> 39 bytes</h1>
<p>thanks to @att for -1 byte</p>
<pre><code>{&amp;/(+/(x+/0.5|*&amp;y[&lt;y]2 0N#)'=)'++\!2&amp;y}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxlkU1OwzAQhfc5xUQR+akBjyd2sJoWcQIuUCrURSMhVSBBBbVK7o49bqKQWpYX33szfvZ0y3MuSyHLk5B4b34Xudus3JYAn7OqWFeFEC8p5a5PEgBqYA3dpmnhlnDrgR4BIdSM6ikKLvKLkaLICNlo/9eCDlThjDZMFU2oHiipeQcwLBiaN4GH2L1mQQ8CR4zBlRq1eq7RJatpwdrJBsuFZhAJr3coR4wfgNj6DIFfnXyLZRsNpuFJMT/Y+OgximqCQ9ngVtorfKGPlCQSvg4fP7A7HPef77vj2/d+6Vl3mfXp7If96m6UKO8yV6W0WD26vnBPYdxpJinLXP8HtvVvPw==" rel="nofollow noreferrer">Try it online!</a></p>
<p>The interesting part is the price calculation for single order, <code>+/0.5|*&amp;2 0N#</code>. We start from a sorted list of pizza prices.</p>
<p><code>2 0N#</code> splits the list of pizza prices into two rows. If there was an odd number of prices, the second row ends up being longer, which happens to be exactly what we want.</p>
<p><code>&amp;</code> (deep-where) gives the index (row and column) for each 1 in the array. For larger integers the index is repeated by that integer. <code>*</code> extracts only the rows, <code>0</code> for discounted pizzas and <code>1</code> for the others. <code>0.5|</code> increases all 0s to 0.5s, after that
we just need sum everything (<code>+/</code>).</p>
<pre><code>  p:2 4 6 6 8
  2 0N#p
(2 4
 6 6 8)
  *&amp;2 0N#p
0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
  +/0.5|*&amp;2 0N#p
23
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://stedolan.github.io/jq/" rel="nofollow noreferrer">jq</a>, <del>98</del> 95 bytes</h1>
<ul>
<li>-3 bytes thanks to <a href="https://codegolf.stackexchange.com/questions/278114/half-price-for-every-second-pizza/278119?noredirect=1#comment595360_278119">@ovs</a></li>
</ul>
<pre><code>def f(a):sort|[(1+range(length))as$b|(.[$b:]|f(a))+(.[:$b]|add)-(.[:$b/2%$b]+[0]|add/2)+a]|min;
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70oq3DBgqWlJWm6FjfjU1LTFNI0EjWtivOLSmqiNQy1ixLz0lM1clLz0ksyNDUTi1WSajT0olWSrGJrQAo1tYE8K5Wk2JrElBRNXQhH30gVKKIdbQAW1TfS1E6MrcnNzLOGWrNHI9rIAKTfTFNThwvE0VEwRhfAUGFkZAAWMjSCiBmCFWHRaQzEJtgEzTDtgGEkCWOoaiMU801AktGx0bEQPyxYGq2UqATlAAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 95 bytes</h1>

<pre class="lang-none prettyprint-override"><code>p=&gt;g=(a,s=p)=&gt;~~Math.min(...a.sort((p,q)=&gt;p-q).map((x,i)=&gt;(s+=x-~~a[++i/2-1]/2)+g(a.slice(i))))
</code></pre>
<p><a href="https://tio.run/##dVLbjoIwEH3vV/RxupRCy2VJNvUP9gtcs1ZElg1KFWJ84tfdEeqKRhsmzZwzc4bT9tccTZsfKtv5u2ZdnDf6bPWs1GB4qy3Ts77/NN2P2FY7EEIY0TaHDsDyPXLW3zOxNRbgxCvMofX0ye97M/e8KlC@XASKeSVgV13lBVQM1/ljSVJO5ypcUH9GVeoyTqMRiW@Iq4lSItUVUqFrxDVp5TQe8Sy9Q9MRleENjiewfNTgNHGUkg9CnL47KlEknlDKRXSdFQ109IKWEUmQzjJO7wK/0RlaSP5P4Fk4nYTIEPO5dMTzfdQMQ6ImpTezV2c43ZVm2TBepmOZzEYliZ4u1zD8QubOKCVLcShsbfB6A/hae4xTEG/swg5pUCLwzQ1f8RyfSN7s2qYuRN2U0OkNeIZBcTQ1rBh2dlrn@EL@AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/278114/">278114</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




