<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::284105</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>109</td><td>Maple</td><td>251015T202748Z</td><td><a href="https://codegolf.stackexchange.com/questions/284105/divide-1-by-a-sum-difference-of-square-roots/284133#284133">dharr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 109 bytes</h1>
<pre><code>s-&gt;map(z-&gt;`if`(z::`*`,[op(1,z),op(2,z)^2],`if`(z::`^`,[1,z^2],[z,1])),[op(..-2,combine(evala(1/s)+x,sqrt))]);
</code></pre>
<p>Input is <code>sqrt(2)+sqrt(3)+sqrt(5)</code>, Output is <code>[[-1/12, 30], [1/4, 2], [1/6, 3]]</code> meaning <code>-1/12*sqrt(30)+1/4*sqrt(2)+1/6*sqrt(3)</code>. The output sqrts are always of positive integers.</p>
<p>I thought this would be my shortest code ever, since <code>s-&gt;evala(1/s)</code> does all the math giving a sum of terms. However, Maple's automatic simplification gets in the way:</p>
<ol>
<li><code>sqrt(6)</code> gets simplified to <code>sqrt(2)*sqrt(3)</code>, requiring the <code>combine(..,sqrt)</code> code.</li>
<li>The output can look like <code>sqrt(3)/2</code> not <code>(1/2)*sqrt(3)</code>, but internally is <code>(1/2)*3^(1/2)</code></li>
<li>A term can have no sqrt in it, e.g., the first example just gives <code>1</code>, so needs to have a <code>sqrt(1)</code> affixed to it.</li>
</ol>
<p>All these mean that the parts need to be dissected and several special cases taken care of:</p>
<ol>
<li>If there is only 1 term (as in the first example), then add +x as a second term so it is a sum, then later use <code>op(..2,..)</code> to remove that term.</li>
<li>For (3) above, the term is not a product so we want <code>[term,1]</code>.</li>
<li>If the coefficient is 1, the term is also not a product but is a power (type <code>^</code>), so we want <code>[1,term^2]</code>
Otherwise we want <code>[op(1,z),op(2,z)^2]</code> meaning <code>[coefficient,square of sqrt(..)]</code>.</li>
</ol>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/284105/">284105</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




