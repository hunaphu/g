<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::233424</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>032</td><td>Pip xp</td><td>210815T205457Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233428#233428">DLosc</a></td></tr>
<tr d-ix="1"><td>039</td><td>BQN</td><td>210914T070059Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/235303#235303">frasiyav</a></td></tr>
<tr d-ix="2"><td>146</td><td>jq</td><td>210913T205918Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/235297#235297">Michael </a></td></tr>
<tr d-ix="3"><td>131</td><td>C gcc</td><td>210818T054501Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233521#233521">att</a></td></tr>
<tr d-ix="4"><td>023</td><td>Husk</td><td>210816T232306Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233461#233461">Dominic </a></td></tr>
<tr d-ix="5"><td>099</td><td>R</td><td>210816T200456Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233459#233459">pajonk</a></td></tr>
<tr d-ix="6"><td>022</td><td>Jelly</td><td>210816T232807Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233462#233462">Jonathan</a></td></tr>
<tr d-ix="7"><td>145</td><td>PowerShell Core</td><td>210817T015901Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233467#233467">Julian</a></td></tr>
<tr d-ix="8"><td>5348</td><td>J</td><td>210815T201547Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233427#233427">xash</a></td></tr>
<tr d-ix="9"><td>022</td><td>05AB1E</td><td>210816T235830Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233463#233463">ovs</a></td></tr>
<tr d-ix="10"><td>026</td><td>Jelly</td><td>210816T231821Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233460#233460">Nick Ken</a></td></tr>
<tr d-ix="11"><td>137</td><td>C clang</td><td>210816T183500Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233457#233457">AZTECCO</a></td></tr>
<tr d-ix="12"><td>091</td><td>Ruby</td><td>210816T073712Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233446#233446">G B</a></td></tr>
<tr d-ix="13"><td>092</td><td>JavaScript ES6</td><td>210815T220255Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233431#233431">Arnauld</a></td></tr>
<tr d-ix="14"><td>058</td><td>Haskell + hgl</td><td>210815T214912Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233430#233430">Wheat Wi</a></td></tr>
<tr d-ix="15"><td>042</td><td>Charcoal</td><td>210815T214033Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233429#233429">Neil</a></td></tr>
<tr d-ix="16"><td>116</td><td>Python 3</td><td>210815T200646Z</td><td><a href="https://codegolf.stackexchange.com/questions/233424/show-me-the-trajectory/233426#233426">hyperneu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-xp</code>, 32 bytes</h1>
<pre><code>^:iT(Yy+a@y%:#a)NiiPBya@i^@:i@?y
</code></pre>
<p>Takes the list (formatted like so: <code>[1;2;-3]</code>) as a command-line argument, and outputs a list of two lists. <a href="https://ato.pxeger.com/run?1=m724ILNgebSSbkWBUuyCpaUlaboWNxXirDJDNCIrtRMdKlWtlBM1_TIzA5wqEx0y4xysMh3sKyHqoMq3RCtFm1ibWhtZm1nrGlmbW1vEwo0CAA" rel="nofollow noreferrer">Attempt This Online!</a> Or, <a href="https://ato.pxeger.com/run?1=m724ILNgWbSSboBS7OLqcPelpSVpuhY3FeKsMkM0Iiu1Ex0qVa2UEzX9MjMDnCoTHTLjHKwyHewroeoW1yr4KkRzKUQbxAIJYxCha2itYARimAJpawUTawUzawVzawVjawVDkDCQZ2CtoGsGltW1tFYwVbAGawSqhGgBSukagfVYQDUYGkCwAUSHLshQkBSQTQDFcsVCnLpgAYQGAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<pre><code>^:iT(Yy+a@y%:#a)NiiPBya@i^@:i@?y
                                  a is cmdline input, eval'd (-x flag);
                                  i is 0, y is &quot;&quot; (implicit)
^:i                               Split i and assign back to i: i is now [0]
   T                              Loop until
      y                            current index
       +a@y                        plus number at current index
           %:                      mod
             #a                    length of list
     Y                             (yank into y, making this the new index)
    (          )Ni                 is already in the list of indices traversed:
                  iPBy              Push the new index onto the list of indices
                                  After the loop, we have the list of unique
                                  indices traversed in i and the first repeated
                                  index in y
                      a@i         Values from a at each index in i
                         ^@:      split at
                            i@?y  the index of y in i
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://mlochbaum.github.io/BQN/" rel="nofollow noreferrer">BQN</a>, 39 bytes<sup><a href="https://github.com/mlochbaum/BQN/blob/master/commentary/sbcs.bqn" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>↕∘≠⊸{⊏⟜𝕩¨2↑⊒⊸/⊸(+`⊑⊸=)⊸⊔0∾⊑˜⍟𝕨⟜⊑≠⊸|𝕨+𝕩}
</code></pre>
<p><a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAg4oaV4oiY4omg4oq4e+KKj+KfnPCdlanCqDLihpHiipLiirgv4oq4KCtg4oqR4oq4PSniirjiipQw4oi+4oqRy5zijZ/wnZWo4p+c4oqR4omg4oq4fPCdlagr8J2VqX0KCkbCqOKfqDDin6nigL/in6gz4p+p4oC/4p+owq8xLCAy4p+p4oC/4p+oNSwgMiwgNCwgNiwgNywgMywgMeKfqeKAv+KfqDYsIDAsIMKvNiwgMiwgwq85ICw1ICwz4p+p4oC/4p+oNCwgNSwgMiwgNiwgwq8yLCA3LCA44p+p4oC/4p+oNiwgMTAsIDEwLCAwLCDCrzksIMKvNCwgNuKfqeKAv+KfqDksIDksIDksIDksIDksIDksIDksIDksIDksIDksIDksIDnin6kK" rel="nofollow noreferrer">Try it here</a>.</p>
<pre><code>↕∘≠⊸{⊏⟜𝕩¨2↑⊒⊸/⊸(+`⊑⊸=)⊸⊔0∾⊑˜⍟𝕨⟜⊑≠⊸|𝕨+𝕩} # 𝕩 is input, 𝕨 is indices 0,1,..,length-1
↕∘≠⊸{                                 } # pass indices into the main function as 𝕨
                                ≠⊸|𝕨+𝕩  # add indices to the input mod the length
                          ⊑˜⍟𝕨⟜⊑        # traverse from the first element a number
                                        #  of steps equal to the length,
                                        #  accumulating results
                        0∾              # prepend 0
           ⊒⊸/⊸(+`⊑⊸=)⊸⊔                # find the first value to repeat and
                                        #  partition by occurrences
         2↑                             # take the first 2 groups
     ⊏⟜𝕩¨                               # and use them to index into the input
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://stedolan.github.io/jq/" rel="nofollow noreferrer">jq</a>, 146 bytes</h1>
<pre><code>length as$l|def x:((.[0]+.[1][-1])%$l+$l)%$l;def n:x as$x|.[1]|index($x);. as$i|[0,[],[]]|until(n;[$i[x],.[1]+[x],.[2]+[$i[x]]])|.[2][:n],.[2][n:]
</code></pre>
<p><a href="https://tio.run/##hU3basMwDH3vV@jBg4TIIU7Xbk0@ReihtGnnYdyNZuAHf/s8Kf6AgQ46Ohf787tQCUu8rx9wfpqQr8sN0tQ0PQ3c9eSYrOP2xYTOBF2zBuKUNJ2yBrKP1yU1JrVzr6rPNCCxDOefuPrQxJmMp8So8a6SUcgmMrdZT5pi1SlOXLjI/zvaC6xDGGUfZCG8IhwR3hD2CE5UOQYEe9xMewI8AGpLcrUgjh23xnuNu6FCayeBviiO0H@Gd7@Pr9U/4rPYyx8" rel="nofollow noreferrer" title="jq – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>115</s> 131 bytes</h1>

<pre class="lang-c prettyprint-override"><code>f(r,n,o,l,j)int*r,**o,*l;{int*t=malloc(4*n);for(*l=j=0;j+=o[0][(t[j]=++*l)-1]=r[j],!t[j=(j%n+n)%n];);*l-=l[1]=t[j]-1;o[1]=*o+l[1];}
</code></pre>
<p><a href="https://tio.run/##fZHbbtswDIavq6dgDWSQZGmwnDRtp/lJDF0Enj3IUKVAcYFiRZ49I@UMS7dhPgAk9ZH8SQ36@zBcLhPPKqqkgpqFj4vMSsqkZLDv5C3dyyGENPCdjMJOKXMZurlr7Fx3qW9cz5d@dl1dyyC0cV1GT91jrOPzJtZRbKKzwsqgu9DjOdHa2ES2TDXF7PlyzNjrkDOnloCGArQgjFG8s7tyOvGqr4Rld6gBiAOPKvxXZKyvawG/qM23jfx8qhRW6b1TvjbEqApK9vF1OfHKkX1mLwcfOXagatGy03CIpUClPuGwjKa1ELW2AlAGUdJHBUGB5Ol16VsnFIlEA0vfpgfq5SN0cF1fkCf/Y0wTKRd0SPmN@w/w55zrlDdNcEW1LyS/qsKaRU8Z9LoOwMfHLzT9zZYVhSHcgsc8Tv7tI7iKXGc07mPZkNLxb9pc6cb93vZ6bXkcsbGwUKy1crmF8@WJGdbgv2Ut0wZa9sgeoIUd7OERtmDQ30MDeo9B/QwPsMXIDojZg24ReiqIaehriNGYzEzLnuGf708" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Outputs <code>[prefix, loop]</code> into <code>o</code> and <code>[len(loop), len(prefix)]</code> into <code>l</code>. Expects these to have allocated enough memory to fit the output (though <code>o[1]</code> is discarded).</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>32</s> <s>29</s> <s>25</s> 23 bytes</h1>
<p><em>Edit: -2 bytes thanks to Razetime</em></p>
<pre><code>†!¹G-§eoUṠ-UUm←¡Sṙo!¹←ŀ
</code></pre>
<p><a href="https://tio.run/##yygtzv7//1HDAsVDO911Dy1PzQ99uHOBbmho7qO2CYcWBj/cOTMfKAXkHG34//9/tJmOgY6umY6Rjq6ljqmOcSwA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>Outputs loop first, then first-visited.</p>
<p><strong>Piece by piece:</strong></p>
<p>Make an infinite list of lists of indices by repeatedly shifting by the input value indexed by the first element:</p>
<pre><code>¡Sṙo!¹←ŀ
</code></pre>
<p>And get the first element of each of these: this is the list of indices:</p>
<pre><code>m←
</code></pre>
<p>Now, get the longest non-repeating prefix (this includes one copy of the repeating elements):</p>
<pre><code>U
</code></pre>
<p>And get the repeating indices:</p>
<pre><code>oUṠ-U
</code></pre>
<p>Join these together into a list of 2 lists:</p>
<pre><code>§e
</code></pre>
<p>And remove the first (the repeating indices) from the second (the prefix):</p>
<pre><code>G-
</code></pre>
<p>Finally, use these to index into the original input:</p>
<pre><code>†!¹
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>121</s> <s>118</s> <s>108</s> <s>102</s> <s>101</s> 99 bytes</h1>
<p><em>-10 bytes and another -6 thanks to <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">@Dominic van Essen</a></em></p>

<pre class="lang-r prettyprint-override"><code>function(a,t=1){while(!(t=(t+a[t]-1)%%sum(a|1)+1)%in%T)T=c(T,t)
split(a[T],cut(cumsum(T==t),-1:1))}
</code></pre>
<p><a href="https://tio.run/?fbclid=IwAR1DVml-S6X2G9FaLKvkNJy0r39FC1Pqq2Fi0Lp4mvQZ1e1Megiil4wdFSM##hY3NCoMwDMfvPkV3EBJMwfqxzUHfojfxIGUyQd2YKTtse3bXqvdBvn//JM@l00vnJsv9fYKWWCt8v279cIUDsAZO2pobqTCOZzdC@1GY@KafYoNGWzDEGM2PoWdoa9OQdQzWjUFrtGYkqS4K8bt0YOFIIiUhfcp8qgSJkkSOGHWQhiDzEC1IRRluZblqCxJ@6eTFJNROinU7W4nMVnrekZ@odPPwr/IeLuzUt38McfkB" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>The outputted lists have weird names (two intervals), but it I hope it's ok.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 23 </s> 22 <a href="https://github.com/DennisMitchell/jelly/iki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>Quite possibly still beatable...</p>
<pre><code>ĖUṙFḢƊƬḢ€⁺JœṖ€$§ṪọɗƇLṪ
</code></pre>
<p>A monadic Link that accepts the list and yields a list of lists.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///ItNCHO2e6Pdyx6FjXsTVA6lHTmkeNu7yOTn64cxqQrXJo@cOdqx7u7j05/Vi7D5D5/3A7UPjopIc7ZwDpyP//o6MNYrl0oo1BhK6hjoIRiGEKpHUUTHQUzHQUzHUUjHUUDEHCQJ6BjoKuGVhW11JBx1RBB6wRqBKiBSilawTWYwHVYGgAwSCNlkAMMhQkBWQTQLFcsQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>ĖUṙFḢƊƬḢ€⁺JœṖ€$§ṪọɗƇLṪ - Link: list of integers A=[a,b,...,x,y,...]
Ė                      - enumerate -&gt; [[1,a],[2,b],...,[n,x],[m,y],...]
 U                     - upend     -&gt; [[a,1],[b,2],...,[x,n],[y,m],...]
      Ƭ                - collect until a repeat under:
     Ɗ                 -   last three links as a monad, f(current=[[x,n],[y,m],...]):
   F                   -   flatten (current) -&gt; [x,n,y,m,...]
  ṙ                    -   rotate (current) left by (each of [x,n,y,m,...])
    Ḣ                  -   head -&gt; rotation by x
       Ḣ€              - head each -&gt; leftmost of each, [[a,1],...,[x,n],...]
         ⁺             - repeat Ḣ€ -&gt; visited elements in order, [a,...,x,...,last_of_loop]
              $        - last two links as a monad, f(V=[a,...,x,...,last_of_loop]):
          J            -   range of length -&gt; [1,2,...,length(V)]
           œṖ€         -   partition (V) before each (of those) indices
                   Ƈ   - filter (all of these 2-partitions) keeping if:
                    L  -   use length (of A) on the right of...
                  ɗ    -   last three links as a dyad, f(partition, length(A)):
               §       -     sums
                Ṫ      -     tail -&gt; length of the potential loop
                 ọ     -     how many times is that divisible by length(A)?
                             (positive (truthy) if an actual loop, else 0 (falsey))
                     Ṫ - tail
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/PowerShell/PowerShell" rel="nofollow noreferrer">PowerShell Core</a>, <s>156</s> 145 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>for($v=@();!(($s=$v.IndexOf($i))+1);$i%=$l){$v+=,+$i
$t+=,($u=$args[+$i])
$i+=$u+($l=$args.Count)}if(--$l*$s){$t[$s..$l],$t[0..--$s]}else{$t,@()}
</code></pre>
<p><a href="https://tio.run/##fZJfa9swFMXf9Snuwt0qzZLrP4m3EASG0sGeWtbHEIbnyquHWmeWnXVk/uzZlZ0mfRhDxtx7zu@eK7C3zS/TugdjrSqb1hyw0vtD1bQcdzrnYvWGc3Qad@Hnp3vzfFNxrIUIYrHC@q1GK/a4C7QMsGbYUcGx11i0392apI1gWAca@4CjneTwqumfOjHUFVcK7Xt0lNCt0YUh2o2kMgpDctxmMNYZ8iTdYjgMjOWcMWou4BKiCwkRiJc2pTbnqTgqKiYtIU3FMjlTC0ghgQzmEJO3kImcy0x@kKmMj1BGhMr8MCwIyWQkVUacWsqFTI/QnHyVjPlz6VMyqRKK@XgK8QmKtkSglvQek@LIP5GPUrT2fKvldAhayn8eQpmAP/Cpaa@L8kHdfPthyg72jAGged5SY@4loK1dBxrwq9dt02xJ69rCw037m5x3WEHuKT@5vr276l3XPE5xm3xPIsBdX5bGOV9qmL2ev5xCZ6DMz/Pe1Th1W7TFo@noPxqntqd2NvlfjOttB/9JnbjrY@rInXaQRV9/YIe/" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">Try it online!</a></p>
<p>Takes a list as parameter.</p>
<p>Returns two lists: loop first then trajectory</p>
<p>Saved:</p>
<ul>
<li>2 bytes by swapping the loop / trajectory in the result</li>
<li>2 bytes by reusing <code>$args[$i]</code> as <code>$u</code></li>
<li>1 byte by merging the declaration and first usage of <code>$l</code></li>
<li>3 bytes by not initialising <code>$i</code> anymore</li>
<li>3 bytes thanks to <em>mazzy</em>!</li>
</ul>
<h4>Not golfed:</h4>
<pre class="lang-powershell prettyprint-override"><code>$index = 0
$length = $args.Count
for ($indices = @(); ($truncateAt = $indices.IndexOf($index)) -eq -1) {
    $indices += , $index
    $trajectory += , $args[$index]
    $index = ($index + $args[$index] + $length) % $length
}
if (--$length -and $truncateAt) {
    ($trajectory[0..--$truncateAt] -join ','), ($trajectory[++$truncateAt..$length] -join ',')
}
else {
    '', ($trajectory -join ',')
}
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <sup>53</sup> 48 bytes</h1>
<p><em>-5 thanks to Jonah!</em></p>
<pre><code>(_2{.{~&lt;/.~]+./\@e.r)(]~.@,r=.(#@[|]+{~){:)^:_&amp;0
</code></pre>
<p><a href="https://tio.run/##bY4xC8IwEIX3/oqHgmlojWlao00tFAQnJ1etGaStuAhdI/nrMRWii9wdPN777riHmzHSo1YgSMGh/CwZ9qfjwcVaGGbsbsVsm7DVpenYSOPWsiYdaxbPm/OrTYylRtGr0gvuaDR4vyKKVD2Nutv9iQE8iDwInUEEvYZAAYkNcmTBlP4JLX2iSw9894oPLaGFx7c/OONT84nW/lYIyv8VuTc" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<ul>
<li><code>r=.(#@[|]+{~){:</code> take the last index (starting with 0 <code>&amp;0</code>), get the corresponding value, add it to the index and take the mod.</li>
<li><code>]~.@, … ^:_</code> append the new value to the indices list and repeat that process until the list does not change after removing duplicates</li>
<li><code>]+./\@e.r</code> the next index is a duplicate, so we find it in the indices list and have a bitmask: 0 for visited once, 1 for loops.</li>
<li><code>_2{.{~&lt;/.~</code> group the values based on the indices. Because there might be no items that are visited once, we can pad the output with taking the last two items <code>_2{.</code></li>
</ul>
<p>Another approach would be to not build a list, but just repeat the index-shift-mod-loop <code>&lt;@#</code> times, keeping the results, and then search for the loop. But I didn't get it shorter than this.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 22 bytes</h1>
<pre><code>0¸Δ¤DIsè+Ig%©ªÙ}D®QÅ¡è
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f/f4NCOc1MOLXHxLD68QtszXfXQykOrDs@sdTm0LvBw66GFh1f8/x9tpqNgaADBQKRrCcQmOgpmsQA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1 id="jelly-26-bytes-vbit"><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 26 bytes</h1>
<pre><code>L‘0ị+ị¥%L}ɗƬɗƬ%LḊḣ2fQ,ḟʋ/ị
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/9/nUcMMg4e7u7WB@NBSVZ/ak9OPrQFhVZ@HO7oe7lhslBao83DH/FPd@kAV/w@3P9y5T4XrcPujpjWR//9Hc0UbxOpwRRuDCF1DHQUjEMMUSOsomOgomOkomOsoGOsoGIKEgTwDHQVdM7CsrqWOAlAdWKMJmGkEVq9rBNZjAdVgaADBBhAduiBDQVJANgEUyxULAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A monadic link taking a list of integers and returning two lists of integers, with the looped integers first.</p>
</div>
<div id="pu11" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 137 bytes</h1>

<pre class="lang-c prettyprint-override"><code>a,i,j;
#define f(l,z){int t[z]={i=j=0},h[z];for(;!(a=t[i]);i=(z+i+l[i]%z)%z)h[j]=l[i],t[i]=++j;for(i=0;i&lt;j;)printf(&quot;! %d&quot;+!!--a,h[i++]);}
</code></pre>
<p><a href="https://tio.run/##hZHtaoMwFIb/exXRUVA8oUn8mmS5kpAf0tU10rnSOhgWr92dpMWu3WAayDnvefKefGzoZt/0b/PcgIVOBk@v29b2W9LGexiTs@0HMujRqLNVnWIT7DCR7ccxlmHcqEFbk0ir4jG16R6T1Zjg2OnOKJeCA1Sadn6JVUzal04mhyP6tnEUktVrlIYhpQ0a2zRFs2l2Pd8b25M4OQfE72B7GjTuoQTCgFCcBE41AVIAySZ5pZhj2JJyl96qwqWUg1iUzCmFN8uBoGuFbkD4AhQOyH0X4QEqPPS8EOV1W5wBDga0BppDudQrV6@B/DOQD/DKB3RJDp/DKY6iRHqF/1IEiAclg@qmrNegC8hAQAk5cOMJvL@fjNeK@1U6N0C0O6C4rCkf6iWUBjSejvtjcnbBKuDivnsN/jfBNOu/X8wErsCBuOtG4QsjF2JnzVzs8cxF@OEDcPMN" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<pre>
l : list , z : length 
int t[z] : kinda sieve, every step sets the visited item to step number
h[z] : save the trajectory values in order for output
for(;!(a=t[i]) : we iterate until we find a visited item, saving in a the first already visited
;i=(z+i+l[i]%z)%z) : modulo hack 

at each iteration :
h[j]=l[i] : add item to output list
,t[i]=++j; : and update sieve

Output
for(i=0;i&ltj;) : j is the number of items visited
printf("! %d"+!!--a,h[i++]) 
a is the beginning of loop so we 
put a separator by including '!' in format string 
</pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 91 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;l{*r=a=b=0;r&lt;&lt;a until b=r.index(a=(a+l[a])%l.size);[z=r[0,b],r-z].map{|x|l.values_at *x}}
</code></pre>
<p><a href="https://tio.run/##DcXRCoIwFADQX7kvgdrdGEVB6O1Hxog7miAskeliTf325Xk5Idpf6amIp1@bQEyWVBu6jiGOy@DBUpDD@HapYqr47DWb@uTlPGRXtzpT0AqtwSCykR@e1i1tXn7ZRze/eIEm7XuZoAet7wgKQRxdjh6AcEO4GlP@" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1>JavaScript (ES6), 92 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;[(g=p=&gt;a=1/(i=g[p%=w=a.length])?[]:[q=a[p],...g(p+q+w*q*q,g[p]=k++)])(k=0).splice(0,i),a]
</code></pre>
<p><a href="https://tio.run/##lVHbboQgEH3vV8xLE1gHFG/tNmH7IYQHYl1r1yjWTffzLdDamDTRLGEe5sycM2fgw3yZqfps7ZX1w1s9n@Vs5EmRRlp5MlLEpJWNso/yJg3v6r65vmv6qvSLGqVRViPnvCE2GqPbYTyM6Hq1vEQR1ZRcZEL5ZLu2qkmCLUWj52rop6GreTc05Exg76hEUwpxDEqjTx7u5WdrfnYXXzGBkC58JrxCuqOgCkdByBFKhCeEDEGsHRQBSkM597UtOeWaEgRWBgY7AhaAfwuVQYqVwRZCse1MuWnFMpmlwdzzIpV7DQ9urecHiuQnvKujC7/nyk/w4kHx2yD@/Zhy6M5dv9cKnb8B" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt; [                 // a[] = input array
  ( g = p =&gt;           // g is a recursive function taking a position p
                       // the underlying object of g is also used to keep
                       // track of the positions that are visited
    a =                // update a[]
      1 / (            //
        i = g[         // reduce the position modulo the length w of the
          p %= w =     // array and load g[p] into i
            a.length   //
        ]              //
      ) ?              // if i is defined:
        []             //   we've found the loop: stop the recursion
      :                // else:
        [              //   update the output array:
          q = a[p],    //     load a[p] into q
          ...g(        //     do a recursive call:
            p + q +    //       add q to p
            w * q * q, //       also add w*q² to make sure it's &gt;= 0
            g[p] = k++ //       save the index k into g[p] and increment k
          )            //     end of recursive call
        ]              //   end of array update
  )(k = 0)             // initial call to g with p = k = 0
  .splice(0, i),       // extract the non-looping part
  a                    // append the looping part
]                      //
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Haskell + <a href="https://gitlab.com/WheatWizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, <s>61</s> <s>60</s> 58 bytes</h1>
<pre class="lang-haskell prettyprint-override"><code>(i:y)#x|i?&gt;y=m(x!)&amp;@sp(/=i)(rv y)|u&lt;-(i+x!i)%l x:i:y=u#x
([0]#)
</code></pre>
<p><a href="https://gitlab.com/WheatWizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a> is an experimental golfing library I am developing for Haskell.  I started a few days ago and this is my first answer, and it's proof there is still a lot of room for improvement.</p>
<p>From this post I've learned that:</p>
<ul>
<li>I should probably make a dedicated function for <code>m.(!)</code>, since it is likely to come up more than just here.</li>
<li>I need versions of <code>sp</code> (<code>span</code>) and <code>bk</code> (<code>break</code>) that include the element that matches / doesn't match the predicate in the first part.  I had to use a hack with <code>rv</code>, which is costly and only works in this specific scenario.</li>
<li><s>I should make an infix version of <code>e</code> (<code>elem</code>).  It would have saved me at least a byte here.</s>  Turns out I had already done this (<code>(?&gt;)</code>).  Maybe what I actually need is better documentation that makes it easier to find this stuff.</li>
<li><s>I should make an infix version of <code>jB</code>.  It would have saved me at least 2 bytes here.</s> This also existed and I didn't realize (<code>(&amp;@)</code>). There might be a pattern here.</li>
<li>It might be a good idea to make an infix of <code>sp</code>. It could have saved me a byte here if I hadn't made an infix of <code>jB</code>.</li>
<li>I have probably overall underestimated the usefulness of infixes and I should in general just make more of them.</li>
</ul>
<h3>But here's how it actually works:</h3>
<p>Vocab:</p>
<ul>
<li><code>(?&gt;)</code>: checks if a list contains an element (<code>elem</code>)</li>
<li><code>m</code>: map (<code>fmap</code>)</li>
<li><code>(!)</code>: index a list (sort of <code>(!!)</code>)</li>
<li><code>(&amp;@)</code>: maps function across both parts of a tuple.</li>
<li><code>sp</code>: splits a list at the first element that matches a predicate (<code>span</code>)</li>
<li><code>rv</code>: reverses a list (<code>reverse</code>)</li>
<li><code>(%)</code>: modulo infix (<code>mod</code>, yes Haskell does not have a modulo infix)</li>
</ul>
<p>So this builds up a list of indices, when a index is added that is already in the list it stops and splits at the last occurrence of that index, and converts the indices to their values.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 42 bytes</h1>
<pre><code>≔⁰ζＷ¬№υζ«⊞υζ≔﹪⁺ζ§θζＬθζ»≔⌕υζζＵＭυ§θιＩ⟦…υζ✂υζ
</code></pre>
<p><a href="https://tio.run/##TY/NCsIwEITP9ily3EIKoihITyUgCFYKHksPoQ1NIE20SfzFZ4@pUfC0OzP7Lbstp2OrqfS@MEb0CuYYPdI8uXIhGYKDtkC0Uxbc5KcpeiazyhkedZ7MvlipOyc1VNIZeGBU2J3q2A3OHwqjPVO95XCe@gl7JV9uK1QXd8WgpCeih4FG92@NSENajSKcQqixUJN7Kxnh@vTDj1K0LIomDHtf12uMwj9ZKItQNhitMFo2jc8u8g0" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⁰ζ
</code></pre>
<p>Start at index 0.</p>
<pre><code>Ｗ¬№υζ«
</code></pre>
<p>Repeat until a duplicate index is found.</p>
<pre><code>⊞υζ
</code></pre>
<p>Save the current index.</p>
<pre><code>≔﹪⁺ζ§θζＬθζ
</code></pre>
<p>Calculate the new index.</p>
<pre><code>»≔⌕υζζ
</code></pre>
<p>Find the position of the repeat.</p>
<pre><code>ＵＭυ§θι
</code></pre>
<p>Replace the indices with the values.</p>
<pre><code>Ｉ⟦…υζ✂υζ
</code></pre>
<p>Output the values before and after the repeat as separate arrays.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 116 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda a,i=0,k=[]:i in k and[[a[q]for q in x]for x in[k[:k.index(i)],k[k.index(i):]]]or f(a,(i+a[i])%len(a),k+[i])
</code></pre>
<p><a href="https://tio.run/##hZBNb4JAEIbP@ismJk1262D4EFpJOFkOXhrT2KbJZg9rxLgBESm29tfTna3EfhwgLDvz7DvzDlt9NrtDGbTtNinUfr1RoFAnLuaJkLEGXUIOqtwIocRRbg81HImdbXg2ochFnE90ucnOTHOJubhmsZTSyLZMIdNjJbTkN0VWMsUxH1PWfux0kcGqPmXxcKAQ1pDAXlUse1cFmu7VqWF88tbUuqK9KnTDRgAjzoeDqtalyRaPy@dVPEJQV5a@LtP5Kn0gfLu@8qd0ni5eLtyMxXkLfY9wpflIpGDYrw46ddCjFo6H4EsbkN7/pxehESBMESKEO4QAweu6hzb17dGU@O9iYbCL4ERW48wAQ0A7WmQLnchaIoR/XYXpFnadHd8a31PhlCoI/B6UGnru9yLHmVk08cXL@hDwLoeeuUVh9p63@88f5As" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/233424/">233424</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




