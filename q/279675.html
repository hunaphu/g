<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::279675</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>058</td><td>Python 3</td><td>250513T233157Z</td><td><a href="https://codegolf.stackexchange.com/questions/279675/show-order-equivalence-between-the-rationals-and-the-binary-fractions/279699#279699">Lucenapo</a></td></tr>
<tr d-ix="1"><td>076</td><td>Maple</td><td>250513T161558Z</td><td><a href="https://codegolf.stackexchange.com/questions/279675/show-order-equivalence-between-the-rationals-and-the-binary-fractions/279691#279691">dharr</a></td></tr>
<tr d-ix="2"><td>069</td><td>Charcoal</td><td>250512T223646Z</td><td><a href="https://codegolf.stackexchange.com/questions/279675/show-order-equivalence-between-the-rationals-and-the-binary-fractions/279682#279682">Neil</a></td></tr>
<tr d-ix="3"><td>070</td><td>JavaScript Node.js</td><td>250513T095150Z</td><td><a href="https://codegolf.stackexchange.com/questions/279675/show-order-equivalence-between-the-rationals-and-the-binary-fractions/279689#279689">l4m2</a></td></tr>
<tr d-ix="4"><td>024</td><td>Uiua 0.16.0dev.2</td><td>250512T192131Z</td><td><a href="https://codegolf.stackexchange.com/questions/279675/show-order-equivalence-between-the-rationals-and-the-binary-fractions/279679#279679">Tbw</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>61</s> 58 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda x:0&lt;x&lt;=.5and f(x/(1-x))/2or x and-f(0-x%-1)-x//-1
</code></pre>
<p><a href="https://tio.run/##TY89bsMwDIV3nUJLANKhKslFF8PeAidTLlBkUKuoNVBLgeRBPr0ru2mbgSDf4wf@3ObpM/jnZXHdlxnfrOG5UW1uu6cX4y13kCVokRFlHSLPvJjCgRJ5JzSKLKXQi4th5C6a92kIPvFhvIU4Vaz/nejJNkewwu8sraHJS2lJITs@IJToTIfGrit4wTdUJIJz26487hMd9lsVIhQU2elxA/RQEr6qC9VVdRf6gsxthw@eR@M/riBqRbXChvG1Mf839GablK5xKo/394cg04zYdX@6Ov1Yyzc" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p><a href="https://codegolf.stackexchange.com/questions/260804/minkowskis-x-for-rational-x/260814#260814">This answer</a> gives a recurrence relation for the Minkowski question-mark function, so I just used the recurrence.</p>
<p>The input must be a <code>fractions.Fraction</code> object (which I believe is allowed as it is a native rational type).</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, <s> 83 </s> 76 bytes</h1>
<pre><code>s-&gt;(a:=convert(s,confrac))[1]+2*add((-1)^m/2^add(a[j],j=2..m),m=2..nops(a));
</code></pre>
<p>Input and output are rationals. Calculates Minkowski's question mark function.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 69 bytes</h1>
<pre><code>ＮθＮη‹θ⁰≦↔θ⍘÷θη²≧﹪ηθ.≔Ｅ²ιζＦ²⊞υ¹Ｗ⁻×θ§υ⁰×η§ζ⁰«≔‹×θΣυ×ηΣζεＩ¬ε§≔ζεΣζ§≔υεΣυ
</code></pre>
<p><a href="https://tio.run/##ZU/LTsMwEDw3X2H1tJZcBJEQB04BLpFIVVF@wG2W2FJiN7G3oCC@PdhpFFJx253ZeexRye5oZT0MuTmR31JzwA5a/pgsdxX2XaeNh1d0DlrBbnmACnnKnNOVgezgbE0eBWvn0yfpcO/DWEFu/Is@6xKjVHHB0iv5m66Uh8KWVNvAL03WN@swTylBAKlgOhj0Af2wHYOUsx05BSTYXcA@la6RQaENOXjXDY5tM5@bEr/iUSgu2IVQf0Q/Epyz72Q1hY2fzg57aoCupBHpeYQw5K4udZ@l87C1HpDHDyevRQrOwn8szSxF9mcYNg/J/bA5178" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as the numerator and denominator of a fraction (this does not need to be fully reduced) and outputs in binary. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the fraction.</p>
<pre><code>‹θ⁰≦↔θ
</code></pre>
<p>If it is negative then print a <code>-</code> and remove the sign.</p>
<pre><code>⍘÷θη²≧﹪ηθ.
</code></pre>
<p>Output the integer part of the fraction in binary, leaving the fractional part.</p>
<pre><code>≔Ｅ²ιζＦ²⊞υ¹
</code></pre>
<p>Start a traversal of the Stern-Brocot tree with <code>0/1</code> as the lower bound and <code>1/1</code> as the upper bound.</p>
<pre><code>Ｗ⁻×θ§υ⁰×η§ζ⁰«
</code></pre>
<p>Repeat until the input is found.</p>
<pre><code>≔‹×θΣυ×ηΣζε
</code></pre>
<p>Calculate whether the input is below the next fraction.</p>
<pre><code>Ｉ¬ε
</code></pre>
<p>Output <code>0</code> if it is and <code>1</code> if it is not.</p>
<pre><code>§≔ζεΣζ§≔υεΣυ
</code></pre>
<p>Update the relevant bound.</p>
<p>Previous 60-byte attempt only mapped <code>ℚ</code> into <code>ℤ[1/2] ∩ (1, 1)</code>:</p>
<pre><code>ＮθＮη‹θ⁰≦↔θ0.Ｆ²⊞υι≔⮌υζＷ⁻×θ§ζ⁰×η§υ⁰«≔‹×θΣζ×ηΣυεＩ¬ε§≔υεΣυ§≔ζεΣζ
</code></pre>
<p><a href="https://tio.run/##ZY/BasMwEETP8VcsOa1AKaFQeujJ5BRoQkj7A066rQS2HGu1SVHpt6uyY9yUHmeeZmZ1NJU/tlWd0tqdJGylOZDHTj0Vt9pkvfPWBXwmZuw0LFW2NtWpZLYfDssDt7UE0tBNT@fLu3kW760HvFewEzYoGmz2xtSezuSZUJSGmO2LsTUBbqwTxlfb0DBVhrV7o0@Mw6qGKzC/QAagFHwVs7F5OHNqeJEG459o74jqLcq7s@vBq4oDbtuApPrfjV03KzQF/9E40djT75QWj8VDWpzrHw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as the numerator and denominator of a fraction (this does not need to be fully reduced) and outputs a the binary representation of a fraction. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the fraction.</p>
<pre><code>‹θ⁰≦↔θ
</code></pre>
<p>If it is negative then print a <code>-</code> and remove the sign.</p>
<pre><code>0.
</code></pre>
<p>Output the leading <code>0.</code> of the binary fraction. (The output is always in the open range <code>(-1, 1)</code>.)</p>
<pre><code>Ｆ²⊞υι≔⮌υζ
</code></pre>
<p>Start a traversal of the Stern-Brocot tree with <code>0/1</code> as the lower bound and <code>1/0</code> as the upper bound.</p>
<pre><code>Ｗ⁻×θ§ζ⁰×η§υ⁰«
</code></pre>
<p>Repeat until the input is found.</p>
<pre><code>≔‹×θΣζ×ηΣυε
</code></pre>
<p>Calculate whether the input is below the next fraction.</p>
<pre><code>Ｉ¬ε
</code></pre>
<p>Output <code>0</code> if it is and <code>1</code> if it is not.</p>
<pre><code>§≔υεΣυ§≔ζεΣζ
</code></pre>
<p>Update the relevant bound.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>,<s> 75 </s>70 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(x,y)=&gt;x&lt;0?f(x+y,y)-1:x&amp;&amp;(x/y|0)+((x%=y)&lt;(y-=x)?f(x,y):f(x+x-y,x))/2
</code></pre>
<p><a href="https://tio.run/##NY3BboMwEETvfMVeEnZlA4FcIsCN@IYeKQcgMbUV4QhIZEv9d2qouofVzujtjG7f7dxP6rlEo7nd11UKtNyR@LDl6SrRMudVlOb2eESbuJ8TMUR7EI5KdJGwtEEeyTfWRo5boiRbKxBQN8HQ3wS2vPN53dUL7Hh76Chvi0CaCVCJKCtAlZcCGFMEu6lFWoD@8zSBkrh9Kq5JiJSgip@v@Rvryz7AQCWag@Lgt9yxhoIqns20IP33gJFQUW/G2Tzu8cMMqOq0YWESMlVn/vhaQp9Un5t4MZ/LpMYBM6L1Fw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p><a href="https://en.wikipedia.org/wiki/Stern%E2%80%93Brocot_tree" rel="nofollow noreferrer">Ref</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua 0.16.0-dev.2</a>, <sup><strike>36</strike></sup> 24 bytes <sup><a href="https://t.ly/aly6S" rel="nofollow noreferrer" title="SBCS for Uiua 0.15">SBCS</a></sup></h1>
<pre><code>+/-⇌ⁿ⊙1/2-1\+:°⊂⌊⍢˜⟜⊃◿÷±
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_16_0-dev_2__RiDihpAgKy8t4oeM4oG_4oqZMS8yLTFcKzrCsOKKguKMiuKNosuc4p-c4oqD4pe_w7fCsQpGIDc0IDkK" rel="nofollow noreferrer">Try on Uiua Pad!</a></p>
<p>Takes <code>p q</code> on stack and outputs as a float. Both solutions compute <a href="https://en.wikipedia.org/wiki/Minkowski%27s_question-mark_function" rel="nofollow noreferrer">Minkowski's</a> <span class="math-container">\$?(p/q)\$</span>, but in very different ways.</p>
<h2>Explanation</h2>
<pre><code>⌊⍢˜⟜⊃◿÷± # continued fraction expansion
:°⊂        # take off a_0 and save it for later
-1\+       # running sum starting at -1
ⁿ⊙1/2     # 1/2^n
/-⇌       # alternating sum
+          # add a_0 back
</code></pre>
<h2>Old solution</h2>
<pre><code>+÷-1⊃⧻˜⊗⍥(⊏⍏≡/÷.⊂⟜⧈+):⊞≤.⇡2⊙⊓⊂⌊⟜⊃⟜◿÷
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_16_0-dev_2__RiDihpAgK8O3LTHiioPip7vLnOKKl-KNpSjiio_ijY_iiaEvw7cu4oqC4p-c4qeIKyk64oqe4omkLuKHoTLiipniipPiioLijIrin5ziioPin5zil7_DtwpGIDUgOAo=" rel="nofollow noreferrer">Try on Uiua Pad!</a></p>
<p>Takes <code>b a</code> on stack for rational <span class="math-container">\$\frac{a}{b}\$</span> and outputs a float.</p>
<h2>Explanation</h2>
<pre><code>⊙⊓⊂⌊⟜⊃⟜◿÷            # stack afterwards: b  |  [b, a mod b]  |  floor(a/b)
⍥(⊏⍏≡/÷.⊂⟜⧈+):⊞≤.⇡2  # compute successive mediants, i.e. the Farey sequence of order b
˜⊗                     # at what index is a/b?
÷-1⊃⧻                  # divide by length of sequence minus 1
+                       # add back the integer part
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/279675/">279675</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




