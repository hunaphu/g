<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::251864</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Rust</td><td>220914T093131Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251886#251886">mousetai</a></td></tr>
<tr d-ix="1"><td>029</td><td>Perl</td><td>230606T180112Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/261602#261602">Adam Kat</a></td></tr>
<tr d-ix="2"><td>070</td><td>Prolog SWI</td><td>220922T214933Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/252173#252173">0							</a></td></tr>
<tr d-ix="3"><td>101</td><td>Prolog SWI</td><td>220914T230313Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251901#251901">crowprox</a></td></tr>
<tr d-ix="4"><td>109</td><td>JavaScript Node.js</td><td>220914T213925Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251898#251898">Matthew </a></td></tr>
<tr d-ix="5"><td>054</td><td>K ngn/k</td><td>220914T184545Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251893#251893">ngn</a></td></tr>
<tr d-ix="6"><td>208</td><td>C clang</td><td>220912T191103Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251867#251867">jdt</a></td></tr>
<tr d-ix="7"><td>149</td><td>tinylisp</td><td>220912T225445Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251869#251869">DLosc</a></td></tr>
<tr d-ix="8"><td>060</td><td>Ruby</td><td>220914T060801Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251884#251884">G B</a></td></tr>
<tr d-ix="9"><td>076</td><td>Raku</td><td>220913T205345Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251879#251879">Sean</a></td></tr>
<tr d-ix="10"><td>079</td><td>Python</td><td>220912T140221Z</td><td><a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251865#251865">pxeger</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Rust, <del>277</del> 276 bytes</h1>
<ul>
<li>-1 byte thanks to <a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter/251886?noredirect=1#comment599139_251886">CeilingCat</a></li>
</ul>
<pre class="lang-rs prettyprint-override"><code>enum N{A(String),B(Vec&lt;N&gt;)};fn f(a:&amp;[N],b:&amp;mut Vec&lt;String&gt;)-&gt;Vec&lt;N&gt;{a.iter().map(|j|match j{N::A(j)=&gt;N::A(('a'..'{').map(|i|i.to_string()).nth(b.iter().position(|a|a==j).unwrap_or_else(||{b.push(j.clone());b.len()-1})).unwrap()),N::B(j)=&gt;N::B(f(j,&amp;mut b.clone()))}).collect()}
</code></pre>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=a3966f982bd29bd1b9546c075f5f8139" rel="nofollow noreferrer">Playground Link</a></p>
</div>
<div id="pu1" class="pu"><h1>Perl, <s>63</s> <s>60</s> 29 bytes</h1>
<p>(+1 for <code>-p</code>)</p>
<pre class="lang-perl prettyprint-override"><code>s/\w+/$a{$&amp;}||=chr$i+++97/ge
</code></pre>
<p>Run like:</p>
<pre class="lang-bash prettyprint-override"><code>$ perl -pe 's/\w+/$a{$&amp;}||=chr$i+++97/ge' &lt;&lt;&lt;&quot;(rudolf)&quot;
</code></pre>
<p>or even</p>
<pre class="lang-bash prettyprint-override"><code>$ perl -pe 's/\w+/$a{$&amp;}||=chr$i+++97/ge' file
</code></pre>
<h3>Ungolfed and explained</h3>
<p>This is a simple replacement using the powerful <code>/e</code> modifier, which instructs perl to <strong>e</strong>valuate the replacement as code. It finds each identifier and checks it against a hash. If the hash is empty, it populates the next available letter, starting with ASCII code 97 (<code>a</code>):</p>
<pre class="lang-perl prettyprint-override"><code>s/                     # substitute
   (\w+)               # match: 1+ word characters
 /
   $letter{$1} ||=     # use existing letter or else assign …
      chr($i++ + 97)   # … a char w/ value of $i + 97, then increment $i
 /gex;                 # match globally and eval the replacement as code
                       # (this explanation uses /x for comments &amp; spacing)
</code></pre>
<p>Running through the examples on a file containing each test case on its own line:</p>
<pre><code>$ while IFS= read line; do 
    printf &quot;%-30s  %s\n&quot; &quot;$line&quot; \
      &quot;$(perl -pe 's/\w+/$a{$&amp;}||=chr$i+++97/eg' &lt;&lt;&lt;&quot;$line&quot;)&quot;
  done &lt; test-cases
(rudolf)                        (a)
(mousetail mousetail)           (a a)
(cart fish)                     (a b)
(no and no)                     (a b a)
(burger (and fries))            (a (b c))
(burger (or burger))            (a (b a))
(let (bob and) (bob let))       (a (b c) (b a))
(let (a (fish (let))))          (a (b (c (a))))
(kor (kor kor) (kor kor))       (a (a a) (a a))
((kor) kor)                     ((a) a)
(aa (ab ac ad) (ad ad) ad)      (a (b c d) (d d) d)
(aa not (ab ac ad) (ad ad))     (a b (c d e) (e e))
(((((do) re) mi) fa) so)        (((((a) b) c) d) e)
(do (re (mi (fa (so)))))        (a (b (c (d (e)))))
((mark sam) sam)                ((a b) b)
</code></pre>
<p>This prints the input in a 30-char column before printing the answer.</p>
</div>
<div id="pu2" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, <s>81</s> 70 bytes</h1>
<pre><code>\X,[I]--&gt;[H],{copy_term(X,Z),\(Z,H,I);nth1(I,X,H)},(\X;[]).
a--&gt; \_,!.
</code></pre>
<p><a href="https://tio.run/##bZBLT8MwEITv@RXhlkjTSuVxQiD1nfR5rXBXldukJaKJkZMKIcRvL2s7lICIZGd3Pnt2kletjurQKt@y83m9goip1XoUEeFjp17fN1Wq82CFpxDr4AkR4vC@qJ47QYwVovATwXp1Lyhse5Kv@esNrtrnswyEPiXquCd0Q3jc5upUppXMjrhUhJ5jO6kr7LPymdB3SqEgiwSFIgycsj3pQ6ohjLzXWVoSYfgbKQ1XMho5dEwriK3aGjdyFUvMxw0uIcxwCIsYRg6@sKHdeNFPRfwLLBdWt9vEKZKtJA/bQZpxMrFvs6aXA4Wq/jlEmNWm/CT82Tol5BlhLwkl93OHEwWhU4g849A8jZGNvKhv51K/oJQ5uW3JcrfrP/iiQ/B6PVvBN02/XzfX3AwG342Dw2HdCxZu2N8bjRpKxyjj8a8zDRJFDSJuYKabkF4cfwMXon4zmUwMMSnt/Om06Q3/trbnrDbvbPaT1wy4hX9HrrRp53NrJy6OzeUtFn/z8X1x5/6kt1y6KG5ah9pf" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>Instead of using predicates, I use definite clause grammar (DCG) notation.
DCG notation is syntactic sugar in Prolog that allows for more writing more concise code for sequence processing.
The basic way my program operates is that it iterates through the input and output list using DCG notation to bind the first item of the remainder of the input list to <code>NextItem</code> and the first item of the remainder of the output list to <code>ProcessedItem</code>.
Then the program handles each potential case for <code>NextItem</code> and binds <code>ProcessedItem</code> to the appropriate value.
Finally, the program attempts to process the following items, or, if none are found, terminates.</p>
<p>I stumbled onto an 11 byte golf of my program when I realized my original code was broken.
The issue was that when parsing a sublist, the inner scope would leak into the outer scope since <code>InScopeVars</code> was having new variables placed into it by <code>nth1/3</code>, instead of by the intended <code>append/3</code>.
I found a way to exploit this behavior though with the <code>copy_term/2</code> predicate, which unifies the second argument with a copy of the first argument but with fresh variables (e.g. <code>copy_term(X,Z)</code> where <code>X=[aa|SomeVar]</code> unifies <code>Z</code> with <code>[aa|SomeNewVar]</code>).
This allows us to create a copy of the scope to use when handling a sublist where its uninitialized tail can be used without the inner scope leaking, thereby allowing us to use <code>nth1/3</code> for both appending and finding the index.</p>
<h2>Ungolfed Code</h2>
<pre><code>rename_item(InScopeVars),
  [ProcessedItem]
  --&gt;
    [NextItem],
    {
      % Case 1: NextItem is a sublist
      % This predicate sets InScopeVarsCopy to a copy of InScopeVars,
      % but replaces all Prolog variables in it with newly instantiated ones.
      % This means any unifications that occur in the following rename_item call
      % will not affect InScopeVars
      copy_term(InScopeVars, InScopeVarsCopy),
      % DCGs are syntactic sugar for predicates with an additional two arguments:
      % the input sequence and the output sequence.
      % This fails if NextItem is not a list, in which case we'll
      % do Case 2 instead.
      rename_item(InScopeVarsCopy, NextItem, ProcessedItem)
    ;
      % Case 2: NextItem is a variable
      % We unify ProcessedItem with the index of NextItem in the list InScopeVars.
      % Note that since InScopeVars initially uninitialized,
      % it gets unified with [NextItem|UninitializedVariable].
      % On later calls, if NextItem appears in InScopeVars then ProcessedItem is
      % unified with the index of NextItem.
      % Otherwise the head of the uninitialized tail of InScopeVars is set to
      % NextItem, and NextItem's new index in InScopeVars is unified with
      % ProcessedItem.
      nth1(ProcessedItem, InScopeVars, NextItem)
    },
    (
      % Attempt to rename the next remaining item in the list
      rename_item(InScopeVars)
    ;
      % If that fails then we are done!
      []
    ).

rename --&gt;
  % Due to the way the nth1/3 predicate works, passing in an
  % uninitialized variable for the initial scope is in essence passing in an
  % infinite list of uninitialized variables.
  % As we encounter new (not Prolog) variables in the input program they will be
  % unified with the first uninitialized (Prolog) variable in the scope.
  rename_item(_),
  % Once we get the first solution, we use the cut to prevent backtracking
  !.
</code></pre>
<p>Before I realized that it was permitted to output numbers instead of letters I wrote the following program, which I've modified to use some of the golfs I later found:</p>
<h2>92 bytes</h2>
<pre><code>\X,[I]--&gt;[H],{copy_term(X,Z),\(Z,H,I);nth1(N,X,H),C is 96+N,name(I,[C])},(\X;[]).
a--&gt; \_,!.
</code></pre>
<p><a href="https://tio.run/##bZDda9swFMXf/Vd4bzY7CfSlMMoGifNh58N5DVUuRbGV1jS2iuwwxtjfnl1JbuqOGSTde37yucd@M/qsn0ftz@p6PewhMhqNfoiU8LvQb7@eOmXqaI/HGIfoESmy@KHpXu6iHHukMZKwasNv919zNLJWUQaRUPwH0WH/ICgeB5LNwsMTvoyvVxkJcyn1@USYxAi4rfWlVZ2szrhVhKlnhTQdTlX7Qki80mjIpkSjCTOvHC/mWRkIK59MpVoizD8jbeBLRguPzqqDOOqjdSNfscR8OeASwg6HcIhh6uErG7qNF31UxD/GceF0t628ItlK8rAC0o6TpTvtWt8uNLr7zyXCpjflp@TPNopQV4STJLTcbz0uNYRREHXFoXkaIxc579@upXlFK2vy247lyST8Hgq2CaZTVyG0TZL0zZGb2ey98XA@73vBQsH@wWIxUKRVlstPdwYkTQdEFLDTbcggy96BD9GfTFYrS2xKN3@9HnojLHt7zurybjYfee2AEqEiX7q0262zEzfH4Qry/N98/L5Q/k8Gu52P4qdJGv8F" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="http://www.swi-prolog.org" rel="noreferrer">Prolog (SWI)</a>, 101 bytes</h1>
<p>This version uses 1-26 instead of a-z (alternative version for a-z below).
Had to (re)learn about Prolog dictionaries for this one, I like them!</p>
<pre><code>[H|T]+[I|U]+A/N:-(H@&gt;[],H+I+A/N;I=A.get(H)),T+U+A/N;I is N+1,T+U+A.put(H,I)/I.
A+A+_.
A+B:-A+B+_{}/0.
</code></pre>
<p><a href="https://tio.run/##dVJda8IwFH3WX3ERhi2JdXt1KHN7sS8@bApCCJK2qQbbRpIWB3O/3d00tBsbK@Tk5pz7lZuejS70YWIv6nZjq@uGExZft5wsp@vZJFg9LRinKxK782M8X0YHWQerMKQbsvUcKAtr8uCJ6NygTONwGkfDJVmSvdueZxMEsv/4nN5Ht9kELkbVsqiC8UbaWlWHKIrGIR0CQCnOhbJ1wHZ8sQh25FXapqgpDAcD8HZP3cHLUaYnUDnkwXsIc9ycEcJRF5ltQ7pCPgbbBlcEGEtERlkqEk5ZLlLJOfWCaTJd5N2p1I2VtVAFhd7stFQYbCJX9tgxlaYgqoxCpTsqacxBGgqs5XOjpOV/NI3gD71WSMzNEp20GXlnI/3LReByPdCW4LyXTy6rRwT@0@5cmBda9Ixw6YQrmuJq6@KcvOXg26vS9X@ufXr8MpwEGIlQKoRcINh@OhkOjBmJUCp3D1cd1R@3YKUwJwwRJffI/W/SvevorUlTaUdhdPsC" rel="noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>(The <code>H@&gt;[]</code> part is a bit hacky, it's a list check (<code>is_list(H)</code>) that works on TIO, but there's probably a way to get rid of it, as neither are necessary in my ungolfed solution. Please correct me!)</p>
<h3>Ungolfed, commented</h3>
<pre><code>f([H|T],[NewH|NewT],Dict,N):-
% Case 1) No dict update needed
  ( f(H,NewH,Dict,N); % First element is a list (matches f([H|T]... or f([]...)
    NewH=Dict.get(H)), % First element is an atom
  f(T,NewT,Dict,N);
% Case 2) If first part failed, need to update the dictionary
  NewH is N+1,
  NewDict = Dict.put(H,NewH),
  f(T,NewT,NewDict,NewH).
f([],[],_,_).

% Wrapper predicate for recursive predicate
A+B:-f(A,B,_{},0).</code></pre>
<h3>a-z solution, 114 bytes</h3>
<pre><code>[H|T]+[I|U]+A/N:-(H@&gt;[],H+I+A/N;I=A.get(H)),T+U+A/N;Z is N+1,name(I,[Z]),T+U+A.put(H,I)/Z.
A+A+_.
A+B:-A+B+_{}/96.
</code></pre>
<p><a href="https://tio.run/##dVJdS8MwFH12v@IiyFqSdfgiONlw@rK@7EEnyEIYaZtuYW0zkpYJzt8@bxpbRbGQk3vPuR/JTQ9GF3o7skd1PrPFacUJi08vnMzHy8koWNzPGKcLEjv/Lp7Oo62sg0UY0hV5abk1KAtLck0rUcogpmzNv8To0GAojcPxOhrMyZxs3PYwGSGQzfvH@PYmOk9GcDSqlkUVDFfS1qraRlE0DOkAAEpxKJStA/bKZ7PglTxJ2xQ1hcHFBXi7p67gcSfTPagc8uAthCluzghhp4vMtildI5@DdwDXBBhLREZZKhJOWS5SyTn1gmkyXeSdV@rGylqogkJvdloqDB4iV3bXMZWmIKqMQqU7KmnMVhoKrOVzo6TlfzSN4J1eKyTWZolO2oq8s5H@FSJwuTPQluC8l/euqkcE/tPuQpgXWvSMcOWEa5riavvinLzl4Duq0vV/oX15/DKcBBiJUCqEXCDYfjoZDowZiVAqdw/XHdUft2ClMHtMESX3yP1v0r3r5XOTptJehtH5Ew" rel="noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 109 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.replace(/\w+|\S/g,m=&gt;m&gt;')'?v[m]=v[m]||Buffer([v[0]++]):(v=m&lt;')'?S.push(v)&amp;&amp;{...v}:S.pop(),m),S=[v=[97]])
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dVPNjtMwED5w61OMKrSx1Wx2hUALLe5KSJw59JhGWjdx2rBxHNlJQGr7JFyqFTwJTwFPw9hu06y2WM146vm--fks__hZqUwcnnL2q23y6_d_pGFzE2lRlzwV5Gb5bbJbLm7WoWRzOQ9ocN_FMmHW7Haf2jwXmsRdfJtMJgmdko7Jjxa0iOrWbEhHr662URR1-ymeqJrQUNJwweKOxR_ukoT6on9f_Z6NRl9WX0XaRKJqdCEM2Y4A15joNlNlTsdTeLnGhNNxeARK1RrR8KKE3utZCIQBNOW6gbwwmwtpLXR1hlYKeJVBpf4HHeZdtXotNBDLyO0U9MyyYLKClL6EKw3efQnnA3gpGjxSK9sQ9R4eeU6f_SIJY3ZaIA7fVzmSSIoId3wiPWJHzuBHz965klXT2zOJOLA1l5TCCkOluE2CnabA7Sw8czt-yD3NAm5KvIzhfSCxUs0FMjL9feA4GQhq96HYdmWKgsaQLCjk2JA53qqPug77X0_MFBAtgMgCVcTOkNRrOFAwAyLoMxWJ5PoRDJfUmWeqWEHsZK7Onka50p95uiEkLqq6bUIQ32t8DQkFNgf7FFJVmQZU22AUGOTE4eisD9XcGAycEIwdU5wQqhRRqdbE4e4hWLZv7m7fBTD17ts0COFYO7ie4x-fKYQTwUIfiE8qMni99e6ePmAXezrzb_lw8Ps_" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Ungolfed and Explained</h2>
<pre class="lang-javascript prettyprint-override"><code>str =&gt; str.replace(
  /\w+|\S/g,                          // replace each variable name or bracket
  m =&gt; m &gt; ')' ?                      // if match is a variable
    v[m] = v[m] || Buffer([v[0]++]) : // lookup the new var name, otherwise assign new
    (
      v = m &lt; ')' ?                   // otherwise, if match is opening bracket
        S.push(v) &amp;&amp; {...v} :         // push current var dict to stack
        S.pop(),                      // otherwise pop var dict
      m                               // return matched bracket (no-op)
    ),
  S = [                               // initialise stack
    v = [                             // initialise var dict
      97                              // v[0] = char code of next var name
    ]
  ]
)
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>65</s> 54 bytes</h1>
<pre><code>{$[x~*x;`s$`c$97+(s::?s,x)?x;[t:s;r:o'x;s::t;r]]};s:!0
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJx9kt1qwzAMhe/7FB0UFm+52N1YdNEHKQE5ib2FNjHYLqSM9tl3lPQvaTqDZSH5y5EU2+x3telObx1xWHG5+vp8T0KWrUPaqXVHm5gF8pl77QjRSD7Pj/BePhaLKOTh5DO7BOy2lLDV9Y46OpBX+XERNyn7feV2djmzKGU9F8/BceP2wUR87eZdOdazYM+V2ke2dfiZ0QNXPONax7qtcDzhZhSFS7jY+2/jqaetr01QVy5hTSBL9R/n/Nl94PQstzMRSVeI4OAgokZ6E/jGyYWknw5mL5hSFw4FYZfyT4bohds6FAkzcu709NlM9NLr/UkXwqU9M00MelpSqL9kjf50dT7UXX8sjaNeLtSYa118gNWFIwHZyFHeOKyUK0fsjSJuahirYYJTNCT7Uu/3oAcmAQTT1P3Dx+gAYY3miYtIGIkPXKP9loNuSIwaz0Ue2uNg8j8UqPek" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 208 bytes</h1>

<pre class="lang-c prettyprint-override"><code>a[26];b[26];c;d;e;f;g;h;i(*j){for(;f=*j;j++)if(f/47)c=c?:j;else{if(c){for(*j=g=d=0;a[d]*!g;wcscmp(a[d],c)?d++:g++);g||(a[d]=c,b[e=d]=h);putchar(d+97);}for(c=!putchar(f);f==41&amp;b[e]==h;a[e--]=0);h+=f%17-47%f;}}
</code></pre>
<p><a href="https://tio.run/##dVPbbuIwEH3nK6ZIrGwCWlqhRYtl9Qf2DyAPji9JaC7ISdQVNL@@7NhpQoDWSsbjmXPGc5HlUmaiiC8XsXv5FbLIS8kU08ywmCUsJfMDPZvSEmb4/MAOQUBTQ8zP9YZKLl@3B6azSp/RJjvc/MBjrviKiZ0K508xe5eVzI/EHReSvqog2MYYhcUfH97I5SLaaY5KQtmxqWUiLFHB7w1lrQso@VNvNRSz4OvnH0gIOU/wDr1chnxFWRJwM3veLNebmWFte0mLGnKRFoTCeQK40DCHWlf1LgT@aXPrz5TYRpWZodOFOwjcx868bCpdizSDQeuRcI@VwtZg0ioZENEdoihBFAqK8op4iBI1NtYWiAMam@qKDmASgaTfwEsLnXoDF/fwTNdoLyOXB@00NN1d8T0TAa5AIJ50QyMS3Z1tTHvDxLzAn161K9P1sZN3TOIZTnRYjP7QLOECYLIShCtHKL/jP64HfKU4jId5IL0o6y9CjOaDdSnQ1O0PzXdLlRQs@vOUgsEUq364bvmUh@@WrEogVgPJU2wqZorEL1qqgGj62FaSC/sGlcipF32HXJE396wWsPKHlvnNuHG413HCZ7Bi3ZM4hQxOAX@ho4dxtIgyZDrLqn0BWGHVZPUW8KJPCmUDNiX4ylVzJL1r5Ovj7Av996hlrdUWfMx9McSCAJ77eO2knVz@SZOJuLos3/8D" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/9481/noodle9">Noodle9</a>!</p>
<p>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!</p>
<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/112488/c">c--</a>!</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/dloscutoff/Esolangs/tree/master/tinylisp" rel="noreferrer">tinylisp</a>, 149 bytes</h1>

<pre class="lang-lisp prettyprint-override"><code>(load library
(d G(q((L N)(i(c()(h L))(i L(c(G(h L)N)(G(t L)N))L)(i(contains? N(h L))(c(last-index N(h L))(G(t L)N))(G L(insert-end(h L)N
(q((L)(G L(
</code></pre>
<p>The last line is an anonymous function that takes a nested list and returns a nested list. The returned list uses nonnegative integers instead of letters, which seems to be allowed by <a href="https://codegolf.stackexchange.com/questions/251864/re-name-all-identifiers-to-a-single-letter#comment560861_251864">this comment</a>.</p>
<p><a href="https://tio.run/##VY07EsMgDER7n2JLqfAZ0oWG8R34JSZDcGwo4tMTwBlP0mj2aVer7OMefHqVQmFRFsHrTW37QBaCViKJicmTIaYZkquGrCQ6VUtQ7oJljy0xKx/TBdM3biiolEcfrXufy/OIRG2rebfl0UV7lLbf1/778Evl7FI2KjnQCgougx7@iSb0ormNvw0UNAwsHG64Y4bnZjHzQNezrMMvc/kA" rel="noreferrer" title="tinylisp – Try It Online">Try it online!</a> Or, <a href="https://tio.run/##bVPLcsMgDLznK3SUDp1pHvfekkum/4ANbphiSIDMNF@fCmHjPswYkMVqvSw4W/9wNl2fT3RBaXC2iyo@aIMaTnhDPMM7ocUeCS9wJo7hzG8neeOlE2YJ6Cyw4LOyPr3B@wTv0amUX6zX5qslWxGemI3xJuYX4/VEWluRcBQJFSbJJ2ozQDYp9yqZtAG8bQAQMd51cAPBSsNXJiszjuGeDAt00CJqIGiwXsUMg00XWuGC7QzzAZTX4MM6bOHr7vHDRMCCHqI1iegHELewo7/QEKGGf6GvDepMBuxCV0RQjTgl@Jl1pUABlp0BCnZmrwW4E69awSerkIE7LdH0hWrZZNxUgYKU4Z8lTL1YoliHYuk9qCKeb16ZS5/Fw17kb2kxnIt8yCuFVA1n/Xs4UJkXR0vTfETREIyWYFAEqR6ZrImq9kxFOgBGAzhatoulcsFs1mLVHvBAP@zCUcVPSGqkOvzefNnJZC4Dr3xznRo7zeTlJhcKNLe7cm9CdgS8GN6crFX@i1zcmuBM@wfo@Q0" rel="noreferrer">verify all test cases</a>.</p>
<h3>Ungolfed</h3>
<pre class="lang-lisp prettyprint-override"><code>(load library)

(def _rename
 (lambda (expr names)
  (if (type? (head expr) List)
   (if expr
    (cons
     (_rename (head expr) names)
     (_rename (tail expr) names))
    nil)
   (if (contains? names (head expr))
    (cons
     (last-index names (head expr))
     (_rename (tail expr) names))
    (_rename expr
     (insert-end (head expr) names))))))

(lambda (expr) (_rename expr nil))
</code></pre>
<hr />
<p>Here's a <strong>167-byte</strong> version that uses letters instead of numbers:</p>
<pre class="lang-lisp prettyprint-override"><code>(load library
(d G(q((L N)(i(c()(h L))(i L(c(G(h L)N)(G(t L)N))L)(i(contains? N(h L))(c(single-char(a(last-index N(h L))97))(G(t L)N))(G L(insert-end(h L)N
(q((L)(G L(
</code></pre>
<p><a href="https://tio.run/##VY6xUsMwEET7fMWWe4Vn7BAIqejixpN/kCURi1FkYqkgX@9ICjDQ3Oze7ry75MLNu/i5rvSzMvBuXNRy29Cg55UccBI6agonDJI1huz66nLUM1UhQ63NISkX4htO33XN6MLZ20ZPaqGiVzE1Lhj79VM57OUPhn3mZ4JdUmODeZwp3xzrN498zT7ZmLSKFryC3ibww11QxDiPUsa/DRRGaBhYvOOMCU5KJCIbHn9h1RRgC3ZosRV04DarDk/Y4Rkv2OMVB3R51QnaDFjv" rel="noreferrer">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>69 65</s> 60 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;l,*r{l.map{|x|x*0==[]?f[x,*r]:&quot;&quot;&lt;&lt;97+(r|=[x]).index(x)}}
</code></pre>
<p><a href="https://tio.run/##jVLNbsMgDH6VilPbZdVu06amexDEgRTYUJNQmURiavLsmW2C1vW0HPjy/WDsBBib72Vx9fOprfZwaw@dvt6mNKX9S11L9eFkQl29C3E8vr0@bWGqZVK7g@@NTdu0m@dFSgGjCa0TqpKiC2O0g/atqDZ3hKyzhoFU5@MXC30gqntDgIS0ZoRPCyjIYjjwNgr1YAaCIrDZ2oGdJjSlrLrjZP/JaV65GXrJPicuIZ@RkUE9cszJ4qyIJXNNnRs487p2oc0vy7DGcfDhH7voPHyECVwBLEPnGZxmiPkTmsD1MEKAEZ4zt0aRPCU6Gi5UPuoubydU5QZcN/jv1bz8AA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://raku.org/" rel="nofollow noreferrer">Raku</a>, 76 bytes</h1>
<pre><code>sub f($x,%h?){$x~~Str??(%h{$x}//=chr 97+%h)!!$x.map:{f $^a,$_}with %h.clone}
</code></pre>
<p><a href="https://tio.run/##TYzdCoMwDEZfJUIllRW929jA@RC7n9Q/KqiV1jGH6Ku7xN0sN4fvy0nG2nXnffevAhopZhWaLFrEvG2PyWWZDA2FNUnS0ji4Xk6hiYJAzHGvx9vSgHhqJfL13U4GQhOXnR3qdff6AyJXgJDeARWQl0NjHUiJXT1RI7GwBRH1UGH0l3kdccGDlUVFAV3NEvbtgUYf8PZ3yRKBHAY5DHIYnh8cs38B" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.python.org" rel="noreferrer">Python</a>, 79 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda _,**s:[i==[*i]and f(i,**s)or s.setdefault(i,chr(97+len(s)))for i in _]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZJNbsMgEIWlLnsK5JVx0277I_kMOYCForGBGgVDBHjRs2STTXqn9jSFoVZiqkj1gueZ-WbmCfv4efgIozWn03kO8vHlaytbDVPPgew2TePfOtW2XaMYGE5krVKOWkf8kxeBCwmzDjE7jK5-fX7QwtSeUiojoYgyZMfy2O-74eCUCbWsu8rN3GpZMUrvL8nJznEiKF1tyFWwhgZwIdWl8mNRMjYVosskMVhX-9m9CxdL3YJIp4Sv2E3MJlkSBaZFQKa3_bKUXcWpfKMD8ET76SWTBbu32UFWFFbGq45uYbKuhkHeCNnogOevW-CXCOVvY7zI8I_-tZv4VNziVCdQJoUiAcWXH4db3BHhJBHGO8rGE1zeUGTA7dNyD1MemZTS_K8tv_IP" rel="noreferrer">Attempt This Online!</a></p>
<p>Thanks to @loopy walt.</p>
<h2><a href="https://github.com/pxeger/whython" rel="noreferrer">Whython</a>, 66 bytes</h2>
<pre class="lang-python prettyprint-override"><code>f=lambda _,**s:[s.setdefault(i,chr(97+len(s)))?f(i,**s)for i in _]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZLNSsQwEMfBo09RcmrW6tUPWARfo5Rl2iQ2bJpIPhCfxctexGfSpzGZWHYTWbCH_DMzv_lgmvfP1_nNz0YfDh_Bi-u7ryexVbCMDJpdt9m4h97dOO4ZFxCUb2U3zba9v71SXLeOUvoooi9yVBjbyEbqZjfkSt8X04uV2rei7YkNzChBBkovj87FhFgapCJdc2KU0ATWp7iQbq5C2qQAaJYkGmV0DPaZ2xjqV0RYyR0ZzmImyeqoMMU9MqMZ16bDiZ3CZzIATxw_XTJZsXuTJ8iKMtR2kdGvTNaiGOSOkAed8PydFtjRQvmbGBfp_5FfThM_wgxWtRxlkSgCUFz9c5jBHhFOEmHcUR48wfWGIgN2n5o7WHLJpJTmt7a-3h8" rel="noreferrer">Attempt This Online!</a></p>
<p>Port of the above.</p>
<h2><a href="https://github.com/pxeger/whython" rel="noreferrer">Whython</a>, 72 bytes</h2>
<pre class="lang-python prettyprint-override"><code>f=lambda a,s={}:s.setdefault(a,chr(97+len(S:={**s})))?[f(i,S)for i in a]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZKxTsMwEIYlRp4iymSXwApUiljZO0YZLrFNrDo2sh0hVPVJWLogngmeBvtM1MaoUjP49_m-u_vl-OPrbXj3g9GHw-fkxe3D97OoFYwdgwIqV-_2a3fnuGdcwKQ8gaofLHm8v1Fck8263q1Wbk8pfWoEkdWGCmMLWUhdQJv6_Vz1r1ZqTwRpSjsxo0TZUnp9PBzNFAaAVGVVnARLqAfrY15IN2QpbWICNIsSgmW2m-wLtyHVzIiwkruyPYuZKPNBhinukelMNw9tT-KYPlMBuKL9uElkxm5NcpAUpc3jRUUzM0kXzSBNhGS0x_XPLbBjhPK_MFykv6B-6SZ8JTPY1XKUUaIIQHH5z2EGZwQ4SoDxjpLxCOc3FBiw2zjcwZhaRqU0vbX5Df8C" rel="noreferrer">Attempt This Online!</a></p>
<p>My original solution</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/251864/">251864</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




