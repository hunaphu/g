<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::57204</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>037</td><td>Vyxal 3</td><td>250718T172601Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/282690#282690">pacman25</a></td></tr>
<tr d-ix="1"><td>095</td><td>Swift 6</td><td>240401T160543Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/272233#272233">macOSist</a></td></tr>
<tr d-ix="2"><td>nan</td><td></td><td>240402T112335Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/272249#272249">RARE Kpo</a></td></tr>
<tr d-ix="3"><td>072</td><td>JavaScript Node.js</td><td>240402T200428Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/272262#272262">l4m2</a></td></tr>
<tr d-ix="4"><td>098</td><td>PowerShell Core</td><td>230319T194032Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/259252#259252">Julian</a></td></tr>
<tr d-ix="5"><td>070</td><td>Perl 5 pF</td><td>240401T192409Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/272238#272238">Xcali</a></td></tr>
<tr d-ix="6"><td>106</td><td>Easyfuck</td><td>240330T224928Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/272207#272207">Quadrupl</a></td></tr>
<tr d-ix="7"><td>042</td><td>HP 41C/CV/CX 77 bytes</td><td>150908T131823Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57300#57300">db2</a></td></tr>
<tr d-ix="8"><td>037</td><td>GBZ80 machine code</td><td>210131T061127Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/218308#218308">EasyasPi</a></td></tr>
<tr d-ix="9"><td>316</td><td>brainfuck</td><td>210131T000940Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/218281#218281">engineer</a></td></tr>
<tr d-ix="10"><td>217</td><td>Forth gforth</td><td>170620T140706Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/127491#127491">2xsaiko</a></td></tr>
<tr d-ix="11"><td>076</td><td>JavaScript ES6</td><td>150908T212348Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57359#57359">edc65</a></td></tr>
<tr d-ix="12"><td>104</td><td>Python 2.7.3</td><td>161214T084752Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/103137#103137">Stefan</a></td></tr>
<tr d-ix="13"><td>119</td><td>C#</td><td>161214T081507Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/103135#103135">Stefan</a></td></tr>
<tr d-ix="14"><td>089</td><td>Perl 6</td><td>161214T072517Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/103132#103132">bb94</a></td></tr>
<tr d-ix="15"><td>073</td><td>Julia</td><td>150907T172141Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57223#57223">Alex A.</a></td></tr>
<tr d-ix="16"><td>177</td><td>Java 8</td><td>150907T184849Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57230#57230">hyperneu</a></td></tr>
<tr d-ix="17"><td>133</td><td>Python 3</td><td>150907T143714Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57208#57208">Beta Dec</a></td></tr>
<tr d-ix="18"><td>294</td><td>HPPPL</td><td>150909T225158Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57488#57488">M L</a></td></tr>
<tr d-ix="19"><td>079</td><td>Python 2</td><td>150907T195600Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57238#57238">daniero</a></td></tr>
<tr d-ix="20"><td>189</td><td>PHP</td><td>150909T190813Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57453#57453">Einacio</a></td></tr>
<tr d-ix="21"><td>057</td><td>K</td><td>150909T162157Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57439#57439">JohnE</a></td></tr>
<tr d-ix="22"><td>096</td><td>C</td><td>150907T192153Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57233#57233">r3mainer</a></td></tr>
<tr d-ix="23"><td>1705</td><td>RPL</td><td>150909T044432Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57412#57412">Jason</a></td></tr>
<tr d-ix="24"><td>194</td><td>R</td><td>150908T130217Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57299#57299">mawir</a></td></tr>
<tr d-ix="25"><td>104</td><td>JavaScript</td><td>150908T062133Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57276#57276">Andrew V</a></td></tr>
<tr d-ix="26"><td>8173</td><td>Ruby</td><td>150907T173622Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57224#57224">daniero</a></td></tr>
<tr d-ix="27"><td>115</td><td>Rust</td><td>150907T144307Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57210#57210">Doorknob</a></td></tr>
<tr d-ix="28"><td>090</td><td>Javascript ES6</td><td>150907T162920Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57219#57219">ETHprodu</a></td></tr>
<tr d-ix="29"><td>344</td><td>Lua</td><td>150908T003434Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57248#57248">Delya Er</a></td></tr>
<tr d-ix="30"><td>290</td><td>Ceylon</td><td>150907T194810Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57236#57236">Paŭlo Eb</a></td></tr>
<tr d-ix="31"><td>093</td><td>Python 3</td><td>150907T162649Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57218#57218">Rohcana</a></td></tr>
<tr d-ix="32"><td>127</td><td>Python 3</td><td>150907T181734Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57225#57225">uno20001</a></td></tr>
<tr d-ix="33"><td>111</td><td>Rust</td><td>150907T184026Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57227#57227">user4867</a></td></tr>
<tr d-ix="34"><td>035</td><td>Pyth</td><td>150907T142746Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57206#57206">izzyg</a></td></tr>
<tr d-ix="35"><td>037</td><td>CJam</td><td>150907T151433Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57213#57213">Dennis</a></td></tr>
<tr d-ix="36"><td>089</td><td>Haskell</td><td>150907T170904Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57221#57221">nimi</a></td></tr>
<tr d-ix="37"><td>193</td><td>C#</td><td>150907T155643Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57216#57216">Stephan </a></td></tr>
<tr d-ix="38"><td>197</td><td>STATA</td><td>150907T152631Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57214#57214">bmarks</a></td></tr>
<tr d-ix="39"><td>139</td><td>Crystal</td><td>150907T150257Z</td><td><a href="https://codegolf.stackexchange.com/questions/57204/programming-with-bits-and-bytes/57212#57212">kirbyfan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3/" rel="nofollow noreferrer">Vyxal 3</a>, 37 bytes</h1>
<pre><code>0?ƛ&quot;&gt;&lt;!@&quot;⟒∩&quot;2∻2×N‹&quot;²&quot;H2Þ0⇄H&quot;JyᏜ⑦%+]“ᴥ
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#H4sIAAAAAAAAE6tWSssvyk0sUbIy1lHKSE1MSS1SslJS0lFKzk9JBbIM7I_NjlGys1F0iFF6NH_So46VMUpGjzp2Gx2e7veoYWeM0qFNMUoeRofnGTxqb_GIUfKqfNg_59HEZarasY8a5jzcshRoVFp-fgnM2LScxPRiJavoWB2lzLyC0hIQO1rJyNRUSSdaSVEpNhZImRmDOXZ2EK6RsSWYb-MA5UMV5-UXKKqZaUE1GZkYQHXZ2YEUAi0oSy0qzszPA1psrGeuZ6BUCwCN_IdU7QAAAA" rel="nofollow noreferrer">Vyxal It Online!</a></p>
<p>-1 from changing how i implemented <code>@</code></p>
<p>Left fork aware! (also implicit input cost me 2 bytes due to exec shenanigans)</p>
<p>All of the 33 byters fail on <code>!&gt;&gt;&gt;&gt;@</code> because it doesn't properly reverse 15 hex to F0.</p>
</div>
<div id="pu1" class="pu"><h1>Swift 6, <s>99</s> 95 bytes</h1>
<pre class="lang-swift prettyprint-override"><code>let b={($0+&quot;&quot;).reduce(UInt8()){a,i in&quot;!&quot;==i ? ~a:i==&quot;&gt;&quot; ?a/2:i==&quot;&lt;&quot; ?a&lt;&lt;1:i==&quot;@&quot; ?a&gt;&gt;4|a&lt;&lt;4:a}}
</code></pre>
<p><a href="https://swiftfiddle.com/tbe4dvczhfcvtlc2fzmqxfe36a" rel="nofollow noreferrer">Try it on SwiftFiddle!</a></p>
</div>
<div id="pu2" class="pu"><p><strong>AWK</strong> -</p>
<ul>
<li><p>instead of doing both an upshift and downshift for <code>@</code>, this uses the trick about <code>% 255</code> instead of <code>% 256</code></p>
<blockquote>
<p><em>unlike standard nomenclature that calls it <code>left-shift</code> and
<code>right-shift</code> that describes what a computer is doing to the bits,</em></p>
<p><em>which also un-intuitively requires flipping the direction of the number line mentally when dealing with 2's-complement negatives - since the &quot;direction&quot; of both positive and negative infinity is left hand side,</em></p>
<p><em>I prefer using the terms <code>up-shift</code> and <code>down-shift</code> since they actually describe what we're doing to the numbers themselves that equally applies to unsigned as well as 2's-complement negatives, since we're</em> <em><strong>upping the magnitude</strong></em> <em>of the value or</em> <em><strong>drawing it down</strong></em>.</p>
<p><em>it's the same approach when describing manual gear shifting in sports cars, whether the manufacturer implemented it in the traditional multi-up-down design, clicking mini-tabs at the wheel, a circular knob, or a linear slider on some touch-screen.</em></p>
<p><em>while it's true that neither <code>up-shift</code> nor <code>down-shift</code>  provide insight to wrap-around effects of signed integer types, the same is also true for <code>left-shift</code> and <code>right-shift</code>.</em></p>
</blockquote>
</li>
<li><p>the main <code>for(..)</code> loop performs all calculations arithmetically instead of using any bitwise ops</p>
</li>
<li><p>it uses upfront <code>regex</code> to scrub out self-cancelling actions, such as consecutive double swaps or double inverts</p>
</li>
<li><p><em>p.s.</em> <code>+++</code> isn't some strange undocumented operator in <code>awk</code> - that's just <code>_ + ++_^_</code> that <code>awk</code> allows per <code>POSIX</code> specs, and since both left and right hand side of the <code>+</code> refer to the same variable (<code>_</code>), it matters not whether it got parsed as <code>_++ + _^_</code> or <code>_ + ++_^_</code> since the effects are absolutely identical</p>
</li>
</ul>
<p><em>one can write fully <code>POSIX</code>-compliant <code>awk</code> code without using a single semi-colon</em> (<code>;</code>)</p>
<pre><code> echo '
    ! -&gt; 255
    !&gt;&gt; -&gt; 63
    !&lt;@ -&gt; 239
    !nop!&amp;6*! -&gt; 255' |
</code></pre>
<hr />
<pre><code>gawk 'function _______(__,___,____,_____,_) {
  
  _ = &quot;^[^!]+|@@|!!|[^!&quot;(_____ = &quot;&lt;&gt;@&quot;)&quot;]+&quot;
  while(gsub(_,___,__)) { }
  _ += ++_+_
  
  if (__ &lt; &quot;! &quot;)
      return (_+++_^_-_)*!!__

  split(substr(__,--_),____,___)
  __ = ___ = _+_^_^++_-_
  
  for(_ in ____)___ = (_=index(_____,____[_]))&lt;=!!_ ? (_ ?(___+___) % (_+__) \
      : __-___) : _+_==_*_ ? (___-___%_)/_ : ___&lt;__ ? ++_*___*_%__ : ___
  return ___ 

} ($++NF = _______($!_))^_'
</code></pre>
<hr />
<pre><code>! -&gt; 255 255
!&gt;&gt; -&gt; 63 63
!&lt;@ -&gt; 239 239
!nop!&amp;6*! -&gt; 255 255
</code></pre>
<hr />
<pre><code># gawk profile, created Tue Apr  2 07:15:18 2024

# Rule(s)

 4  ($++NF = _______($!_))^_ { # 4
 4      print
     }


# Functions, listed alphabetically

 4  function _______(__, ___, ____, _____, _)
    {
 4      _ = &quot;^[^!]+|@@|!!|[^!&quot; (_____ = &quot;&lt;&gt;@&quot;) &quot;]+&quot;
 2      while (gsub(_, ___, __)) { }

 4      _ += ++_ + _
 4      if (__ &lt; &quot;! &quot;)
 2          return (_+++_^_-_) * !!__

 2      split(substr(__, --_), ____, ___)
 2      __ = ___ = _+_^_^++_-_

 4      for (_ in ____)
 4          ___ = (_ = index(_____,____[_])) &lt;= !!_? (_? (___+___) % (_+__) :\
            __-___) : _+_ == _*_ ? (___-___%_)/_ : ___&lt;__ ? ++_*___*_%__ : ___

 2      return ___
     }
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 72 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>p=&gt;[...p].map(a=t=&gt;a=255&amp;[a,~a,a*2,a/2,a*257/16]['!&lt;&gt;@'.indexOf(t)+1])|a
</code></pre>
<p><a href="https://tio.run/##lc5BDoIwEIXhvbdgQ1usJZCAidLKDTxA08UEqMFgOwgxLoxXR3ArG1eT/Jm8fFd4wFDdWxx3ztfNZOWEUmkhBBpxA6QgR6lAplkWauBv4BClHOJ0udk@TnKjSVCokojW1c3zbOnItolhL5iOm8q7wXeN6PyFWkoCwthPK4q1qtTqb7lWnccgzKNlffZTjXzm94YDkwpPlvb8Dz1@9Qf4AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/PowerShell/PowerShell" rel="nofollow noreferrer">PowerShell Core</a>, 98 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>switch($args){!{[byte]$a=-bnot$a-band255}`&lt;{$a=$a-shl1}`&gt;{$a=$a-shr1}`@{$a=($a-shl4)+($a-shr4)}}$a
</code></pre>
<p><a href="https://tio.run/##TY1dT4MwFIbv@RUH0myg9MJ9JSaDNDF6q3GXy@JK18kMUmxLpsH@diwUN85Vz/O@52klzlyqnBcFZkLyFh2TplXnk2Z5iKh8V1HjN9vsR/MdognOSqERxRktD7Pl0uzXjaUWqLy4M/v0skm7kW4LXbiIbt1LLiJjEG2N55HQAzsxkHDqT2OwwuhCAj9NgxhW8zFaE4tm8/sxK0XlT1Y3fjAIIviFJyEfKcvxc/bBmYamryPF5KnSMSD@XVnMD5AAenOZ5KoutAUTdATimn2yfdk81EqLT@faESfrZlMzxpXqLMM55l9X@7XX27rayNvN6/@nw30fGM@0fw" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-pF</code>, 70 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$\=(/\@/?($\&lt;&lt;4)+($\&gt;&gt;4):/!/?255-$\:/&gt;/?$\&gt;&gt;1:/&lt;/?$\&lt;&lt;1:$\)%256for@F}{
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/18lxlZDP8ZB315DJcbGxkRTG0jb2ZloWukr6tsbmZrqqsRY6dvp24NEDa30bUAsGxtDK5UYTVUjU7O0/CIHt9rq//8VbRz@5ReUZObnFf/X9TXVMzA0@K9b4AYA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Quadruplay/easyfuck/wiki" rel="nofollow noreferrer">Easyfuck</a>, 106 bytes</h1>
<pre>
Ì¢RGÏ<sup>CCH</sup>çP®óëÊR>hñãå<sup>PLD</sup>¯[¼ùbë×ZÙ]nSÅ¸␝«¶òëêl%!}yn␅␏<sup>APC</sup>>|<sup>PU1</sup>ó␚j<sup>PM</sup>/|<sup>PU1</sup>ãÜÏ␔ç[<sup>HOP</sup>CçÏ¿fS<sup>OSC</sup>n␅␏<sup>APC</sup>}ÌùNu¸␔>÷<sup>SGCI</sup>óå*ï]<sup>CCH</sup>ùóçÏ<sup>STS</sup>À␛á␋ç<sup>PAD</sup>␀␀ÿ
</pre>
<p><sup>due to lack of unicode representations for c1 control characters, they have been replaced by their superscripted abbreviations</sup></p>
<p>Decompressed:</p>
<pre><code>f(J$&gt;&gt;)g(+^&gt;^)$&gt;4&lt;&lt;&gt;,.^[^&gt;,.^]5Y.[J&lt;-`;+[&lt;]&gt;S0J!&gt;^-`(&gt;&gt;&gt;&gt;$&gt;1S*&lt;/&gt;$&lt;=f&lt;)g-`(&gt;&gt;&gt;~f)g-`(&gt;&gt;}f&gt;)g-`(&gt;{f&gt;&gt;)+^]J&gt;&gt;&gt;&gt;&gt;'@␍x!&gt;&lt;␀␀
</code></pre>
</div>
<div id="pu7" class="pu"><h1>HP 41C/CV/CX (77 bytes, 42 steps)</h1>
<p>Purely for giggles, here it is for the HP 41C/CV/CX calculator. (Requires either the Extended Functions module, or a 41CX for the ATOX function.)</p>
<p>Put your program into the Alpha register, which is a little tricky, as there's no way to enter ! or @ directly from the keyboard (use XTOA with the ASCII codes 33 and 64 respectively to append them).</p>
<p>Steps 08 and 10 allow for ignoring invalid opcodes; remove them to save 2 steps, but the program will crash on invalid input.</p>
<pre><code>01 LBL&quot;BB
02 0
03 LBL A
04 ATOX
05 X=0?
06 GTO E
07 X&lt;&gt;Y
08 SF 25
09 XEQ IND Y
10 CF 25
11 GTO A
12 LBL 33
13 255
14 X&lt;&gt;Y
15 -
16 RTN
17 LBL 60
18 2
19 *
20 256
21 MOD
22 RTN
23 LBL 62
24 2
25 /
26 INT
27 RTN
28 LBL 64
29 RCL X
30 16
31 /
32 INT
33 X&lt;&gt;Y
34 16
35 *
36 256
37 MOD
38 +
39 RTN
40 LBL E
41 RDN
42 RTN
</code></pre>
</div>
<div id="pu8" class="pu"><h1>GBZ80 machine code, 37 bytes</h1>
<p>As soon as I saw this challenge, I knew I had to do this for the Game Boy where this maps 1:1.</p>
<pre><code>000000a5: af 47 2a a7 c8 fe 21 28 00 fe 3c 28 00 fe 3e 28  .G*...!(..&lt;(..&gt;(
000000b5: 00 fe 40 20 ed cb 30 18 e9 78 2f 18 e4 cb 20 18  ..@ ..0..x/... .
000000c5: e1 cb 38 18 dd                                   ..8..
</code></pre>
<p>Commented assembly (<code>rgbds</code> with <code>#</code> comments instead of <code>;</code>):</p>
<pre class="lang-python prettyprint-override"><code>        SECTION &quot;.text&quot;,ROM0
        # input: null terminated string in HL
        # output: accumulator final value in B
func::
        # a = 0
        xor     a, a
.with_ld:
        # Save A to B so we can load the next byte from the tape.
        ld      b, a
        # Since not all instructions require the A register, we can skip the
        # ld by jumping here instead.
.no_ld:
        # load byte from HL and increment
        # a = *hl++
        ld      a, [hli]
        # and A against itself to check for zero
        and     a, a
        # return if null terminator
        ret     z
        # just a normal compare and branch chain
        cp      a, &quot;!&quot;
        jr      z, .cpl
        cp      a, &quot;&lt;&quot;
        jr      z, .left
        cp      a, &quot;&gt;&quot;
        jr      z, .right
        cp      a, &quot;@&quot;
        # comment char, skip without ld
        jr      nz, .no_ld
        # b = (b &gt;&gt; 4) | (b &lt;&lt; 4)
        swap    b
        jr      .no_ld
.cpl:
        # we need to use A for CPL
        ld      a, b
        # a = ~a
        cpl
        jr      .with_ld
.left:
        # b &lt;&lt;= 1
        sla     b
        jr      .no_ld
.right:
        # b &gt;&gt;= 1
        srl     b
        jr      .no_ld
</code></pre>
<p>Here is a version which prints directly using <code>printf</code> (SDCC ABI), satisfying the &quot;must print&quot; requirement (which I don't enjoy doing), 53 bytes</p>
<p><code>00 00</code> represents unlinked placeholders for the string below and <code>_printf</code>.</p>
<pre><code>000000e4: af 4f 2a a7 28 00 fe 21 28 00 fe 3c 28 00 fe 3e  .O*.(..!(..&lt;(..&gt;
000000f4: 28 00 fe 40 20 ec cb 31 18 e8 79 2f 18 e3 cb 21  (..@ ..1..y/...!
00000104: 18 e0 cb 39 18 dc 47 c5 21 00 00 e5 cd 00 00 e8  ...9..G.!.......
00000114: 04 c9 25 75 00                                   ..%u.
</code></pre>
<p>The only differences is that it uses <code>c</code> instead of <code>b</code> and adds a call to <code>printf</code>.</p>
<pre class="lang-python prettyprint-override"><code>        # .area _BASE
        SECTION &quot;.text&quot;, ROM0
        # input: null terminated string in HL
        # output: decimal printed with printf
func::
        # a = 0
        xor     a, a
.with_ld:
        # save A to C
        ld      c, a
        # since not all instructions require the A register, we can skip the
        # ld by jumping here.
.no_ld:
        # a = *hli++
        ld      a, [hli]
        # and a, a is better than cp a, 0
        and     a, a
        # return if null terminator
        jr      z, .print
        # just a normal compare and branch chain
        cp      a, &quot;!&quot;
        jr      z, .cpl
        cp      a, &quot;&lt;&quot;
        jr      z, .left
        cp      a, &quot;&gt;&quot;
        jr      z, .right
        cp      a, &quot;@&quot;
        # comment char, skip without ld
        jr      nz, .no_ld
        # c = (c &gt;&gt; 4) | (c &lt;&lt; 4)
        swap    c
        jr      .no_ld
.cpl:
        # we need to use A for CPL
        ld      a, c
        # a = ~a
        cpl
        jr      .with_ld
.left:
        # c &lt;&lt;= 1
        sla     c
        jr      .no_ld
.right:
        # c &gt;&gt;= 1
        srl     c
        jr      .no_ld
.print:
        # zero extend bc
        # a is known to be zero
        ld      b, a
        # SDCC uses cdecl
        push    bc
        # &quot;%u&quot;
        ld      hl, .str
        push    hl
        # printf(&quot;%u&quot;, (u16)result);
        call    _printf
        # restore stack and return
        add     sp, 4
        ret
.str:
        db &quot;%u&quot;
        db 0
</code></pre>
<p>Screenshot:
<a href="https://i.sstatic.net/ROO6Q.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/ROO6Q.png" alt="screenshot" /></a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/TryItOnline/brainfuck" rel="nofollow noreferrer">brainfuck</a>, 316 bytes</h1>
<pre><code>-&gt;,[&gt;++++[&lt;--------&gt;-]&lt;-[&gt;&gt;]&lt;[&gt;&gt;&gt;&gt;+[-&gt;-&lt;]&gt;[-&lt;+&gt;]&lt;&lt;&lt;]++++[&lt;-------&gt;-]&lt;+[&gt;&gt;]&lt;[&gt;&gt;&gt;&gt;[-&gt;++&lt;]&gt;[-&lt;+&gt;]&lt;&lt;&lt;]&lt;--[&gt;&gt;]&lt;[&gt;&gt;&gt;&gt;[-&gt;+&gt;+&lt;&lt;]&gt;&gt;[-&gt;&gt;--[--&lt;-&gt;]&lt;-&lt;]&gt;[[-]&lt;&lt;-&gt;&gt;]&lt;&lt;[--&lt;+&gt;]&lt;&lt;&lt;]&lt;--[&gt;&gt;]&lt;[&gt;&gt;&gt;&gt;[-&gt;+&gt;+&lt;&lt;]&gt;&gt;[-&gt;&gt;++++[-&lt;++++&gt;]&lt;&lt;]&gt;[-&gt;+&gt;+&lt;&lt;]&gt;&gt;[&gt;++++[&lt;----&gt;-]&gt;+&lt;&lt;]&gt;&gt;[-&lt;&lt;&lt;&lt;&lt;&lt;-&gt;&gt;&gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;&lt;&lt;[&gt;++++[&lt;----&gt;-]&gt;+&lt;&lt;]&gt;&gt;&gt;[-&lt;+&gt;]&lt;[-&lt;&lt;&lt;+&gt;&gt;&gt;]&lt;&lt;&lt;&lt;&lt;]&lt;,]&gt;&gt;&gt;.
</code></pre>
<p><a href="https://tio.run/##jY8xCkJBDETPso2F@bG0CnORkEIFQYSvCJ5/nUT9umDhFMtm5iWb3d92p/l4P5x7V0wOodz0JWiYOhDGAxCnYwFXE3pmMeBJy4cmLDLQBMcYQreuYKRqyrRecM5ilX3p/zGgViFJJRxD/vUvbrl0WUlRimf1m33/onpkocOmDDe9t/lybavtuj0A" rel="nofollow noreferrer" title="brainfuck – Try It Online">Try it online!</a></p>
<p>Explanation:</p>
<pre><code>-&gt;, input to cell 1
[
&gt;++++[&lt;--------&gt;-]&lt;- sub 33= now will be 0 if invert instruction (cell 1)
[&gt;&gt;] if not move to cell 3
&lt;[    runs if !
&gt;&gt;&gt;&gt;+[-&gt;-&lt;]&gt;[-&lt;+&gt;]&lt;&lt;&lt;  invert cell 4 to cell 5 back to 4 end 2
]
now ends on cell 2 either way

++++[&lt;-------&gt;-]&lt;+ sub 27
[&gt;&gt;]
&lt;[ runs if shl
&gt;&gt;&gt;&gt;[-&gt;++&lt;] shl cell 4 to cell 5
&gt;[-&lt;+&gt;]&lt; back to 4
&lt;&lt; to 2
]
ends on 2

&lt;-- sub 2
[&gt;&gt;]
&lt;[    runs if shr (hard)
&gt;&gt;&gt;&gt;[-&gt;+&gt;+&lt;&lt;] copy 4 to cell 5 and 6
&gt;&gt;[-&gt;&gt;--[--&lt;-&gt;]&lt;-&lt;] get evenness of 6 to 7
&gt;[ if odd
[-] zero cell 7
&lt;&lt;-&gt;&gt; sub cell 5
]
ends cell 7
&lt;&lt;[--&lt;+&gt;]&lt;&lt;&lt; shr cell 5 to 4
]
ends cell 2 again

&lt;-- sub 2
[&gt;&gt;]
&lt;[ if @ (also very hard)
&gt;&gt;&gt;&gt;[-&gt;+&gt;+&lt;&lt;] copy 4 to 5 and 6 (end on 4)
&gt;&gt;[-&gt;&gt;++++[-&lt;++++&gt;]&lt;&lt;] mul cell 6 by 16 to 7
&gt;[-&gt;+&gt;+&lt;&lt;] copy 7 to 8 and 9
&gt;&gt;[&gt;++++[&lt;----&gt;-]&gt;+&lt;&lt;] div 9 by 16 to 11= chopping off upper bits
&gt;&gt;[-&lt;&lt;&lt;&lt;&lt;&lt;-&gt;&gt;&gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;&lt;&lt; sub 5 by 11
[&gt;++++[&lt;----&gt;-]&gt;+&lt;&lt;] div 5 by 16 to 7
&gt;&gt;&gt;[-&lt;+&gt;] add 8 to 7
&lt;[-&lt;&lt;&lt;+&gt;&gt;&gt;]&lt;&lt;&lt; move 7 to 4
&lt;&lt;
]
end on 2 again

&lt;,] end on 1

a ends up at cell 4

&gt;&gt;&gt;. print
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Forth (gforth), 217</h1>

<pre><code>: o over ; : x 0 begin key dup emit swap o 13 = if . exit else o 33 = if invert else o 62 = if 1 rshift else o 60 = if 1 lshift else o 64 = if dup 4 lshift swap 4 rshift or then then then then then nip 255 and again ;
</code></pre>

<p>Not as short as I had hoped but oh well. I'm sure this can be golfed further. There doesn't seem to be any alternatives to if/elseif :/</p>

<p>Formatted / ungolfed:</p>

<pre><code>: x
  0 ( accumulator )
  begin
    key dup emit swap ( read char, print it and stash it away )
         over 13 = if . exit ( on newline, print accumulator and return. )
    else over 33 = if invert ( inversion )
    else over 62 = if 1 rshift ( shift 1 right )
    else over 60 = if 1 lshift ( shift 1 left )
    else over 64 = if dup 4 lshift swap 4 rshift or ( swap )
    then then then then then
    nip ( remove read character )
    255 and ( constrain accumulator to 1 byte after each step )
  again
;
</code></pre>
</div>
<div id="pu11" class="pu"><h1>JavaScript (ES6), 76 <s>81</s></h1>

<p>As an unnamed function returning the accumulator value</p>

<p>This is a porting of the super clever answers by @daniero (that have way too few upvotes)</p>

<p>Bonus: you <em>can</em> pass an initial value of the accumulator. If not passed, starting value is 0 as by specific.
</p>

<pre><code>(p,a)=&gt;(p.replace(/[!&lt;&gt;@]/g,i=&gt;a=(i&lt;'&lt;'?~a:i&lt;'&gt;'?a*2:i&lt;'@'?a/2:a*257/16)&amp;255),a)
</code></pre>

<p>Test running the snippet below in any EcmaScript 6 browser (I tested in Firefox)</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(p,a)=&gt;[...p].map(c=&gt;a=255&amp;[a,~a,a*2,a/2,a*257/16][1+'!&lt;&gt;@'.indexOf(c)])|a

// TEST
out=x=&gt;O.innerHTML+=x+'\n'

function go(x) { out(x+' -&gt; '+f(x)) }

go('!'),go('!&gt;&gt;'),go('!&lt;@'),go('!nop!&amp;6*!')

// LESS GOLFED
F=(p,a)=&gt;// a as a parameter, if not passed its value starts as undefined, then becomes NaN, but the operators '&amp;' and '~' treat it as 0
  [...p].map(c =&gt; // execute following function for each character p
    a = 255 &amp; // any intermediate result is converted to numeric and truncate to a byte          
   // evaluate all possible results (then choose one bases on the current character)
   [a,   // NOP, if unexpected char 'a' remains the same
    ~a,  // tilde == binary not (will give a result wider than a byte)
    a*2, // &lt; shift left is *2 (can give a result wider than a byte) 
    a/2, // &gt; shift right is /2 (can give a non integer result)
    a *257 / 16  // move nibbles around (will give a result wider than a byte)
   ] // array of all results
   [1+'!&lt;&gt;@'.indexOf(c)] // find index to get the correct result
  ) // end map, returns an array in any case
    // eventually a single element array containg a
  | a // return accumulator</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>Test program:&lt;input id=I&gt;&lt;button onclick='go(I.value)'&gt;go&lt;/button&gt;
&lt;pre id=O&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu12" class="pu"><h2>Python 2.7.3, 104 bytes</h2>

<p>Having code in strings to be evaluated looks pretty dirty, but works :D</p>

<pre><code>a=0
for c in raw_input():a=eval({'!':'~a','&lt;':'a&lt;&lt;1','&gt;':'a&gt;&gt;1','@':'a&lt;&lt;4|a&gt;&gt;4'}.get(c,'a'))&amp;255
print a
</code></pre>

<p>Here's the output (and input actually..)</p>

<p>And yes, it's really running on a RaspberryPi :)</p>

<p><a href="https://i.sstatic.net/zbKj8.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/zbKj8.png" alt="Example output"></a></p>
</div>
<div id="pu13" class="pu"><h2>C#, 119 bytes</h2>



<pre class="lang-cs prettyprint-override"><code>i=&gt;{var a=0;foreach(var c in i){if(c=='!')a=~a;if(c=='&gt;')a&gt;&gt;=1;if(c=='&lt;')a&lt;&lt;=1;if(c=='@')a=a&lt;&lt;4|a&gt;&gt;4;a&amp;=255;}return a;}
</code></pre>

<p>Other versions I tried, but need more bytes:</p>

<pre class="lang-cs prettyprint-override"><code>Func&lt;string,int&gt;C=i=&gt;{var a=0;foreach(var c in i){switch(c){case'!':a=~a;break;case'&lt;':a&lt;&lt;=1;break;case'&gt;':a&gt;&gt;=1;break;case'@':a=a&lt;&lt;4|a&gt;&gt;4;break;}a&amp;=255;}return a;};

// This is, despite having the worst score, my personal favourite :D
Func&lt;string,int&gt;D=i=&gt;{var f=new Dictionary&lt;char,Func&lt;int,int&gt;&gt;{{'!',q=&gt;~q},{'&lt;',q=&gt;q&lt;&lt;1},{'&gt;',q=&gt;q&gt;&gt;1},{'@',q=&gt;q&lt;&lt;4|q&gt;&gt;4}};var a=0;foreach(var c in i)if(f.ContainsKey(c))a=f[c](a)&amp;255;return a;};
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Perl 6, <s>96</s> 89 bytes</h2>

<pre><code>{my $a=0;$a=(+^*,*+&lt;1,*+&gt;1,{$_+&lt;4+$_+&gt;4},{$_})["!&lt;&gt;@".index($_)//4]($a)%256 for .comb;$a}
</code></pre>

<p>Old solution:</p>

<pre><code>{my $a=0;$a=(255-*,*+&lt;1+&amp;255,*+&gt;1,{$_+&amp;15+&lt;4+$_+&gt;4},{$_})["!&lt;&gt;@".index($_)//4]($a)for .comb;$a}
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Julia, <s>117</s> <s>94</s> <s>86</s> 73 bytes</h1>



<pre class="lang-default prettyprint-override"><code>p-&gt;(a=0x0;[a=c==33?~a:c==60?a&lt;&lt;1:c==62?a&gt;&gt;1:c!=64?a:a&lt;&lt;4|a&gt;&gt;4for c=p];1a)
</code></pre>

<p>This is an anonymous function that accepts a string and returns an integer. To call it, assign it to a variable.</p>

<p>Ungolfed:</p>

<pre class="lang-default prettyprint-override"><code>function f(p)
    # Initialize the accumulator to 0 as an 8-bit unsigned integer
    a = 0x0

    # Loop over the characters in the input
    for c in p
        a = c == 33 ? ~ a :        # '!'
            c == 60 ? a &lt;&lt; 1 :     # '&lt;'
            c == 62 ? a &gt;&gt; 1 :     # '&gt;'
            c != 64 ? a :          # no-op
            a &lt;&lt; 4 | a &gt;&gt; 4        # '@'
    end

    # Convert the accumulator to a regular integer and return
    return Int(a)
end
</code></pre>

<p>Saved 8 bytes thanks to Sp3000 and 13 thanks to Dennis!</p>
</div>
<div id="pu16" class="pu"><h1>Java (8), <s>514</s> <s>483</s> <s>411</s> <s>366</s> <s>359</s> <s>239</s> <s>224</s> <s>229</s> <s>198</s> <s>194</s> <s>187</s> <s>186</s> <s>184</s> <s>182</s> <s>181</s> <s>180</s> 177 characters</h1>

<p>Wow, this has been golfed down a LOT! Thanks to everyone who gave me suggestions! I greatly appreciate it!</p>

<pre><code>interface T{static void main(String[]g)throws Exception{int i,a=0;while((i=System.in.read())!=10)a=(i==33?255-a:i==62?a/2:i==60?a*2:i==64?a&gt;&gt;4|a&lt;&lt;4:a)%256;System.out.print(a);}}
</code></pre>

<p>Golfed 31 (!) bytes by optimizing the nibble swap with bitwise operations as opposed to lengthy <code>Integer.???</code> methods.</p>

<p>Golfed 72 (!!!!) chars by removing the unnecessary string created to swap nibbles. Much better than before!?</p>

<p>Golfed 45 (!!) chars by removing use of <code>java.util.Scanner</code> and reading from <code>System.in</code> directly. Note that now that the lambda expression is gone, Java 8 is no longer required! Just merely Java 1 would do!</p>

<p>Golfed 7 chars by making class <code>(default)</code> (removed <code>public</code> keyword), thanks to @bmarks</p>

<p>Golfed 120 (!!!!!!!) chars by turning all those lengthy <code>Integer</code> class operations in the bit flipping to <code>255 - a</code>. Now that's much shorter!</p>

<p>Golfed 15 (!) chars by converting shifts to multiplication and division, removing the braces from the while statement, and making <code>a</code> local within the <code>main</code> method.</p>

<p>Ungolfed 9 =( chars because of a problem with the left shift not discarding the leftmost byte. Therefore, I now do <code>mod (256)</code>. The right shift will make the resulting number one bit shorter than before, so there is no need to use <code>mod</code> on right shift. My nibble-swap thing will swap the last 4 bits and the second-last nibble, and the <code>and (&amp;)</code> truncates all other bits. My inversion program doesn't cause any problems if the original number is less than 256.</p>

<p>Golfed <s>31</s> 35 chars thanks to @Geobits by converting <code>switch</code> statement to a lot of ternary statements, and also converting chars to ints, shortening the literals.</p>

<p>Golfed 7 chars by removing unnecessary <code>&amp;240</code> in the nibble swap (<code>(a&amp;240)&gt;&gt;4</code> to <code>a&gt;&gt;4</code> and converting <code>(a&amp;15)&lt;&lt;4</code> to <code>a&lt;&lt;4&amp;240</code>. The last change only golfed one character though.</p>

<p>Golfed 1 char by removing unnecessary <code>=</code> in <code>a /= 2</code>, because <code>a = a /= 2</code> is equivalent to <code>a = a / 2</code>.</p>

<p>Golfed 2 chars by turning <code>println</code> to <code>print</code>.</p>

<p>Golfed 2 chars by removing accidental <code>a=</code> in <code>a=255-a</code> (<code>a=a=255-a</code> is equivalent to <code>a=255-a</code>)</p>

<p>Golfed 1 char by turning <code>a&lt;&lt;4&amp;240</code> into <code>a%16&lt;&lt;4</code>.</p>

<p>Golfed 1 char by adding brackets to the outside of the ternary statement and doing <code>%256</code>. That way, the <code>%16</code> is unnecessary in the left-shift part of the nibble swap. The brackets add 2 chars and the <code>%16</code> saves 3 chars.</p>

<p>Golfed 3 chars by changing <code>class</code> to <code>interface</code> and removing <code>public</code> using Java 8's static interface method feature. Thanks to @TheNumberOne (no comment, but find his answer on "Tips for golfing in Java"</p>
</div>
<div id="pu17" class="pu"><h1>Python 3, 133 bytes</h1>

<p>Uses a dictionary to make up for a lack of switch-case syntax in Python. <a href="http://www.pydanny.com/why-doesnt-python-have-switch-case.html" rel="nofollow">See more here</a>.</p>

<pre class="lang-py prettyprint-override"><code>a="0"*8
for i in input():a={"!":''.join(str(1-int(b))for b in a),"&lt;":a[1:]+"0","&gt;":"0"+a[:-1],"@":a[4:]+a[:4]}.get(i,a)
print(int(a,2))
</code></pre>

<p>The accumulator is a string which is converted into a base 10 number at the end.</p>

<h3>Example I/O:</h3>

<pre class="lang-bash prettyprint-override"><code>$ python3 bitsnbytes.py
!
255
$ python3 bitsnbytes.py
!&gt;&gt;
63
$ python3 bitsnbytes.py
!&lt;@
239
$ python3 bitsnbytes.py
!nop!&amp;6*!
255
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="http://www.hp-prime.de/en/category/6-downloads" rel="nofollow noreferrer">HPPPL</a>, <s>302</s> 294 bytes</h1>
<pre><code>#pragma mode(separator(.,;)integer(d8))EXPORT b()BEGIN print();local p,j,a;a:=#0d;INPUT({{p,[2]}});for j from 1 to dim(p)do c:=p(j);case if c==33 then a:=BITNOT(a)end if c==62 then a:=BITSR(a,1)end if c==60 then a:=BITSL(a,1)end if c==64 then a:=BITSL(a,4)+BITSR(a,4)end end;end;print(a*1);END;
</code></pre>
<p>Ungolfed:</p>
<pre><code>// make sure integers are unsigned 8 bit decimal numbers
#pragma mode( separator(.,;) integer(d8) ) 
EXPORT b()
BEGIN
  print();
  local p,j,a;
  a:=#0d;                         // set a to integer value 0
  INPUT({{p,[2]}});               // open input dialog treating input as string ( type [2])
  for j from 1 to dim(p) do
    c:=p(j);
    case
      if c==33 then a:=BITNOT(a) end             // !
      if c==62 then a:=BITSR(a,1) end            // &gt;
      if c==60 then a:=BITSL(a,1) end            // &lt;
      if c==64 then a:=BITSL(a,4)+BITSR(a,4) end // @
    end;
  end;
  print(a*1); // converts to proper output by promoting to non integer format
              // print(a) would result in
              // #239:8d for 239 if the default bit size is not set to 8 bits decimal
              // indicating an 8 bit unsigned decimal integer, or
              // #239d if the default bit size is already set to 8 bits decimal

END;
</code></pre>
<p><a href="https://i.sstatic.net/PZ8eA.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/PZ8eA.png" alt="HPPPL Input command" /></a></p>
<p><a href="https://i.sstatic.net/FoENi.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/FoENi.png" alt="HPPPL Output to Terminal" /></a></p>
<p>This answer ensures that the HP Prime uses unsigned 8 bit integers even if the mode is set to e.g. 64 bits by the user. If the calculator is set up manually to using unsigned 8 bit decimal integers, then the <code>pragma</code> command can be omitted.
If the output does not need to follow the format strictly then the <code>a*1</code> at the end can simply be <code>a</code>. Multiplying the result by 1 just ensures the output does not follow the internal output for integer values.
The <code>print</code> command in line 4 can also be omitted if the terminal does not need to be cleared before printing out the result.
If passing the program as a string argument is allowed, then the <code>INPUT</code> command can be omitted as well.</p>
<p>This is the shortest version with input and proper output, without the pragma argument (if the calculator is set to Uint8 by default:</p>
<p><strong>243 bytes:</strong></p>
<pre><code>EXPORT b()BEGIN local p,j,a;a:=#0d;INPUT({{p,[2]}});for j from 1 to dim(p)do c:=p(j);case if c=33 then a:=BITNOT(a)end if c=62 then a:=BITSR(a,1)end if c=60 then a:=BITSL(a,1)end if c=64 then a:=BITSL(a,4)+BITSR(a,4)end end;end;print(a*1);END;
</code></pre>
</div>
<div id="pu19" class="pu"><h1>Python 2, 79 bytes</h1>

<p>I realized that I have done something <a href="https://codegolf.stackexchange.com/a/8747/4372">very similar</a> to this in Python earlier. This is just a port of <a href="https://codegolf.stackexchange.com/a/57224/4372">my Ruby answer</a>, but it is incidentally the shortest Python answer as of now :D </p>

<pre><code>a=0
for i in raw_input():a=[~a,a/2,a*2,a*16+a/16,a]["!&gt;&lt;@".find(i)]&amp;255
print a
</code></pre>

<p>The difference from the Ruby version is that this one doesn't ignore invalid instructions while iterating over the input. Instead I take advantage of the fact that Python tends to return <code>-1</code> instead of <code>nil</code> when there is no match -- The current value of <code>a</code> is appended to the back of the result array, so that all invalid instructions maps to the same, unchanged value.</p>
</div>
<div id="pu20" class="pu"><h1>PHP, 189 bytes</h1>
<pre><code>&lt;? $c='00000000';foreach(str_split($argv[1])as$a){$a=='!'&amp;&amp;$c=strtr($c,'01','10');$a=='&lt;'&amp;&amp;$c=substr($c.'0',1);$a=='&gt;'&amp;&amp;$c=substr('0'.$c,0,8);$a=='@'&amp;&amp;$c=substr($c.$c,4,8);}echo bindec($c);
</code></pre>
<p>It's not that it gonna beat many answers, it's only for practice</p>
</div>
<div id="pu21" class="pu"><h1>K, 57 bytes</h1>

<p>It's a start:</p>

<pre><code>0{y+2*x}/(8#0){((~:;{-1_0,x};{1_ x,0};4!;{x})"!&gt;&lt;@"?y)x}/
</code></pre>

<p>tested using Kona:</p>

<pre><code>  f:0{y+2*x}/(8#0){((~:;{-1_0,x};{1_ x,0};4!;{x})"!&gt;&lt;@"?y)x}/
...
  f'("!";"!&gt;&gt;";"!&lt;@";"!nop!&amp;6*!")
255 63 239 255
</code></pre>

<p>I might be able to do better in k5, but it's a complex series of tradeoffs- for example, converting binary to decimal is as easy as <code>2/</code>, but the behavior of <code>?</code> makes it harder to handle a default case for instruction lookup.</p>
</div>
<div id="pu22" class="pu"><h1>C, 96</h1>
<p>Assuming ASCII (or compatible) input:</p>
<pre><code>a;main(c){while(c=getchar()+1)a=(c^34?c^61?c^63?c^65?a:a*257/16:a/2:a*2:~a)&amp;255;printf(&quot;%u&quot;,a);}
</code></pre>
<p><strong>Tidier:</strong></p>
<pre><code>a;
main(c){
  while(c=getchar()+1)
    a=(c^34?
      c^61?
        c^63?
          c^65?
            a
          :
            a*257/16
        :
          a/2
      :a*2:~a
    )&amp;255;
  printf(&quot;%u&quot;,a);
}
</code></pre>
<p>Basically it's just a collection of nested ternary expressions. I'm incrementing the value obtained from <code>getchar()</code> so that an EOF (-1) results in a value of zero and the program exits.</p>
<p><a href="http://ideone.com/x3geGw" rel="nofollow noreferrer"><strong>(ideone link)</strong></a></p>
</div>
<div id="pu23" class="pu"><h1>RPL, 170.5 bytes</h1>

<p>The input should be entered as a string on level 1.</p>

<pre><code>\&lt;&lt; DEC 8 STWS \-&gt; S 
    \&lt;&lt; #0d 1 S SIZE 
        FOR I "!&gt;&lt;@" S I DUP SUB POS 1 + { \&lt;&lt; \&gt;&gt; NOT SR SL \&lt;&lt; DUP #16d / SWAP #16d * + \&gt;&gt; } SWAP GET EVAL NEXT \&gt;&gt; 
\&gt;&gt;
</code></pre>
</div>
<div id="pu24" class="pu"><h1>R, 194 bytes</h1>

<pre><code>b&lt;-readline();A&lt;-rep(0,8);s&lt;-strsplit(b,"")[[1]];for(r in s){if(r=="!")A&lt;-(A+1)%%2;if(r=="&gt;")A&lt;-c(0,A)[1:length(A)];if(r=="&lt;")A&lt;-c(A,0)[-1];if(r=="@")A&lt;-c(A[5:8],A[1:4])};print(sum(A*(2^(7:0))))
</code></pre>

<p>ungolfed</p>

<pre><code>b &lt;- readline()
A &lt;- rep(0, 8) 
s &lt;- strsplit(b, "")[[1]]
for (r in s) {
    if (r == "!")
        A &lt;- (A + 1) %% 2
    if (r == "&gt;")
        A &lt;- c(0, A)[1:length(A)]
    if (r == "&lt;")
        A &lt;- c(A, 0)[-1]
    if (r == "@")
        A &lt;- c(A[5:8], A[1:4])
}
print(sum(A*(2^(7:0))))
</code></pre>
</div>
<div id="pu25" class="pu"><h1>JavaScript, 104</h1>

<pre><code>[].reduce.call(prompt(),function(a,i){return(i=='!'?~a:i=='&gt;'?a/2:i=='&lt;'?a*2:i=='@'?a&gt;&gt;4|a&lt;&lt;4:a)&amp;255},0)
</code></pre>

<p>Nested ternary operators map to instructions.</p>

<p>BITWISE AND is used to constrain our Number type to a single byte.</p>
</div>
<div id="pu26" class="pu"><h1>Ruby, <del>81</del> 73 bytes</h1>

<p>So much simpler -- no eval! For each valid character in the input, it evaluates each instruction, and finds the appropriate instruction through the index of <code>$&amp;</code> (the current character in the input).</p>

<pre><code>a=0
gets.scan(/[!&gt;&lt;@]/){a=[~a,a/2,a*2,a*16+a/16]["!&gt;&lt;@".index$&amp;]&amp;255}
p a
</code></pre>
</div>
<div id="pu27" class="pu"><h2>Rust, <s>121</s> 115 bytes</h2>



<pre class="lang-rust prettyprint-override"><code>fn r(s:&amp;str)-&gt;u8{let mut n=0u8;for t in s.chars(){match t{'!'=&gt;n=!n,'&gt;'=&gt;n/=2,'&lt;'=&gt;n&lt;&lt;=1,'@'=&gt;n=n&gt;&gt;4|n&lt;&lt;4,_=&gt;()}}n}
</code></pre>

<p>Sample run:</p>

<pre class="lang-rust prettyprint-override"><code>fn main() {
    println!("{}", r("!"));    //=&gt; 255
    println!("{}", r("!&gt;&gt;"));  //=&gt; 63
    println!("{}", r("!&lt;@"));  //=&gt; 239
}
</code></pre>

<p>Ungolfed:</p>

<pre class="lang-rust prettyprint-override"><code>fn run_ungolfed(s: &amp;str) -&gt; u8 {
    let mut n = 0u8;
    for t in s.chars() {
        match t {
            '!' =&gt; n = !n,
            '&gt;' =&gt; n &gt;&gt;= 1,
            '&lt;' =&gt; n &lt;&lt;= 1,
            '@' =&gt; n = (n &gt;&gt; 4) | (n &amp; 15) &lt;&lt; 4,
            _ =&gt; ()
        }
    }
    n
}
</code></pre>

<p>Surprisingly short for Rust. Nothing else really interesting other than the fact that <a href="https://doc.rust-lang.org/reference.html#operator-precedence" rel="nofollow">I learned more precedence rules today</a>—who knew <code>(a&gt;&gt;b)|c</code> is the same as <code>a&gt;&gt;b|c</code>?</p>

<p>Shaved off a byte by changing <code>n&gt;&gt;=1</code> to <code>n/=2</code>; however, the same cannot be done with multiplication, because arithmetic overflow is a panic (i.e. crash) in Rust.</p>
</div>
<div id="pu28" class="pu"><h1>Javascript (ES6), <s>80</s> <s>91</s> 90 bytes</h1>
<pre><code>a=&gt;[...a].reduce((p,c)=&gt;c=='!'?p^255:c=='&lt;'?p*2%256:c=='&gt;'?p&gt;&gt;1:c=='@'?p/16|0+p%16*16:p,0)
</code></pre>
<p>Pretty much as short as it can get. Defines an anonymous function which takes the program as input.</p>
<ul>
<li>For <code>!</code>, takes <code>x XOR 255</code>, as JS's <code>~</code> would consider <code>x</code> a 32-bit number.</li>
<li>For <code>&lt;</code>, multiplies <code>x</code> by 2 and takes the result mod 256.</li>
<li>For <code>&gt;</code>, truly shifts the bits of <code>x</code> 1 bit to the right.</li>
<li>For <code>@</code>, floors <code>x/16</code> and adds it to <code>x%16*16</code>.</li>
</ul>
<p>Thanks to @vihan for suggesting the use of <code>reduce</code> to save a byte.</p>
</div>
<div id="pu29" class="pu"><h1>Lua, 344 char</h1>

<pre><code>a=string.rep("0",8)
t=io.read()
f={["!"]=function()local s="";for j=1,8 do s=s..(a:sub(j,j)=="0"and"1"or"0") end;return s end,["&gt;"]=function() return "0"..a:sub(1,7) end,["&lt;"]=function()return a:sub(2,8).."0"end,["@"]=function()return a:sub(5,8)..a:sub(1,4)end}
for i=1,#t do a=(f[t:sub(i,i)]or function()return a end)()end
print(tonumber(a,2))
</code></pre>

<p>Inspired by @Beta Decay's use of a string accumulator, seeing as lua has no byte type. Could probably be golfed more by using fewer functions.</p>
</div>
<div id="pu30" class="pu"><h1>Ceylon, <s>297</s> 290</h1>

<pre><code>shared void y(){value t=process.readLine()else"";variable Byte a=0.byte;for(c in t){switch(c)case('!'){a=a.not;}case('&gt;'){a=a.rightLogicalShift(1);}case('&lt;'){a=a.leftLogicalShift(1);}case('@'){a=a.and(#f0.byte).rightLogicalShift(4).xor(a.and(#f.byte).leftLogicalShift(4));}else{}}print(a);}
</code></pre>

<p>Formatted:</p>

<pre><code>shared void y() {
    value t = process.readLine() else "";
    variable Byte a = 0.byte;
    for (c in t) { switch (c)
        case ('!') { a = a.not; }
        case ('&gt;') { a = a.rightLogicalShift(1); }
        case ('&lt;') { a = a.leftLogicalShift(1); }
        case ('@') { a = a.and(#f0.byte).rightLogicalShift(4).xor(a.and(#f.byte).leftLogicalShift(4)); }
        else {} }
    print(a);
}
</code></pre>

<p><code>#f</code> and <code>#f0</code> are hexadecimal numbers for the nibbles, <code>.byte</code> converts an integer into a byte. I'm lucky that Byte's <code>.string</code> attribute already uses the unsigned representation of a byte.
Ceylon also features a switch statement without fall-through, and a string is a list of characters, which can be iterated.</p>

<p>I also tried to cut those long shift method names down by using an aliasing import, but this actually becomes 7 bytes longer:</p>

<pre><code>import ceylon.language{Byte{r=rightLogicalShift,l=leftLogicalShift}}shared void x(){value t=process.readLine()else"";variable Byte a=0.byte;for(c in t){switch(c)case('!'){a=a.not;}case('&gt;'){a=a.r(1);}case('&lt;'){a=a.l(1);}case('@'){a=a.and(#f0.byte).r(4).xor(a.and(#f.byte).l(4));}else{}}print(a);}
</code></pre>

<p>Formatted:</p>

<pre><code>import ceylon.language {
    Byte {
        r=rightLogicalShift,
        l=leftLogicalShift
    }
}
shared void x() {
    value t = process.readLine() else "";
    variable Byte a = 0.byte;
    for (c in t) {
        switch (c)
        case ('!') { a = a.not; }
        case ('&gt;') { a = a.r(1); }
        case ('&lt;') { a = a.l(1); }
        case ('@') { a = a.and(#f0.byte).r(4).xor(a.and(#f.byte).l(4)); }
        else {}
    }
    print(a);
}
</code></pre>

<p>This might be useful if we need those methods a bit more often.</p>
</div>
<div id="pu31" class="pu"><h1>Python 3, <s>124</s> <s>94</s> 93 bytes</h1>



<pre class="lang-python prettyprint-override"><code>a=0
for i in input():
 if i in"!&gt;&lt;@":a=(i=='!')*(255-a)+(i=="&gt;")*a//2+(i=="&lt;")*(a+a)%256+(i=="@")*(16*(a%16)+a//16)
print(a)
</code></pre>

<p>"!" is same as subtracting from 255.<br>
"&lt;" is same as multiplying by 2. But 8 bit register means mod 256.<br>
">" is same as integer division by 2.<br>
"@" means shifting last 4 bits (<code>a%16</code>) by 4 bits(<code>*16</code>) and adding the first four bits(<code>a/16</code>).</p>

<p><strong>EDIT (read shameless copying)</strong><br>
Saw the other answer in python (by Beta decay). It uses a really effective way to simulate switch cases using dictionary. Using that we can write</p>



<pre class="lang-python prettyprint-override"><code>a=0
for i in input():a={"!":255-a,"&lt;":a&lt;&lt;1&amp;255,"&gt;":a//2,"@":(a%16)&lt;&lt;4+a&gt;&gt;4}.get(i,a)
print(a)
</code></pre>

<p>Thanks, Beta Decay.</p>
</div>
<div id="pu32" class="pu"><h1>Python 3, 127 bytes</h1>

<p>Edit: shorting, thanks @Jakube</p>

<p>Edit2: fix, thanks @Anachor</p>

<pre><code>a=0
for i in input():a=(a^255if i=="!"else a&gt;&gt;1if i=="&gt;"else a&lt;&lt;1if i=="&lt;"else(a&amp;15)&lt;&lt;4|(a&amp;240)&gt;&gt;4if i=="@"else a)&amp;255
print(a)
</code></pre>
</div>
<div id="pu33" class="pu"><h2>Rust, 111 bytes</h2>

<p>More of a comment on @Doorknob's answer, but I don't have any rep for comments as I just created an account.</p>

<p>One can shave 10 bytes off his Rust solution with the following:</p>



<pre class="lang-rust prettyprint-override"><code>fn r(s:&amp;str)-&gt;u8{let mut n=0u8;for t in s.chars(){n=match t{'!'=&gt;!n,'&gt;'=&gt;n&gt;&gt;1,'&lt;'=&gt;n&lt;&lt;1,'@'=&gt;n&gt;&gt;4|n&lt;&lt;4,_=&gt;n}}n}
</code></pre>
</div>
<div id="pu34" class="pu"><h1>Pyth, <s>36</s> 35 bytes</h1>

<pre><code>u%@[t_G/G2yGi_jGJ16JG)x"!&gt;&lt;@"H256z0
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=u%25%40%5Bt_G%2FG2yGi_jGJ16JG%29x%22%21%3E%3C%40%22H256z0&amp;test_suite=1&amp;test_suite_input=%21%0A%21%3E%3E%0A%21%3C%40%0A%21%3C%26&amp;debug=0">Test harness</a></p>

<p>The internal representation of the accumulator is an integer. This integer is mod-ed by 256 on each iteration, as desired. The operations performed are <code>-G-1</code>, <code>G/2</code>, <code>G*2</code> and <code>G</code> converted to base 16, reversed, and converted back to base 10, where <code>G</code> is the accumulator.</p>

<p>I missed the line about ignoring everything else. This has been remedied. Thanks, @Dennis. </p>
</div>
<div id="pu35" class="pu"><h1>CJam, 37 bytes</h1>

<pre><code>0q{"!&gt;&lt;@"#"~ 2/ 2* GmdG*+ "S/=~255&amp;}/
</code></pre>

<p>Try it online in the <a href="http://cjam.aditsu.net/#code=0q%7B%22!%3E%3C%40%22%23%22~%202%2F%202*%20GmdG*%2B%20%22S%2F%3D~255%26%7D%2F&amp;input=!%3C%40" rel="nofollow">CJam interpreter</a>.</p>

<h3>How it works</h3>

<pre><code>0                   e# Push 0 (accumulator).
q                   e# Read from STDIN.
{                   e# For each character in the input:
  "!&gt;&lt;@"#           e#   Find its index in "!&gt;&lt;@" (-1 if not found).
  "~ 2/ 2* GmdG*+ " e#   Push that string.
  S/                e#   Split at spaces to push ["~" "2/" "2*" "GmdG*+" ""].
                    e#     "~"      : signed 64-bit bitwise NOT
                    e#     "2/"     : divide by 2
                    e#     "2*"     : multiply by 2
                    e#     "GmdG*+" : (x) -&gt; (x/16) (x%16) -&gt; (16(x%16) + (x/16))
                    e#     ""       : NOOP
  =~                e#  Select the corresponding string and evaluate it.
  255&amp;              e#  Zero all but the 8 least significant bits.
}/                  e#
</code></pre>
</div>
<div id="pu36" class="pu"><h1>Haskell, 89 bytes</h1>

<pre><code>a#'!'=255-a
a#'&gt;'=div a 2
a#'&lt;'=mod(a*2)256
a#'@'=mod(a*16)256+div a 16
a#_=a
f=foldl(#)0
</code></pre>

<p>Usage example: <code>f "!&gt;&gt;"</code> -> <code>63</code></p>
</div>
<div id="pu37" class="pu"><p><strong>C# 193</strong></p>

<pre><code>void Main(){byte a=0;foreach(var c in Console.ReadLine()){if(c=='!')a=(byte)~a;if(c=='&gt;')a=(byte)(a&gt;&gt;1);if(c=='&lt;')a=(byte)(a&lt;&lt;1);if(c=='@')a=(byte)(((a&amp;240)&gt;&gt;4)|((a&amp;15)&lt;&lt;4));}Console.Write(a);}
</code></pre>
</div>
<div id="pu38" class="pu"><h2>STATA, 197 bytes</h2>

<pre><code>di _r(a)
gl b=0
forv x=1/`=length("$a")'{
gl c=substr("$a",`x',1)
if"$c"=="!" gl b=255-$b
if"$c"=="&gt;" gl b=int($b/2)
if"$c"=="&lt;" gl b=mod($b*2,256)
if"$c"=="@" gl b=mod($b,16)*16+int($b/16)
}
di $b
</code></pre>

<p>Ungolfed</p>

<pre><code>display _request(a) //get the input via prompt and put in var a
global b=0 //initialise A to be 0
forv x=1/`=length("$a")'{ //for loop from 1 to last char in a
global c=substr("$a",`x',1) //get the char at index x in a
if "$c"=="!" global b=255-$b //invert is the same as 255-A
if "$c"=="&gt;" global b=int($b/2) //right shift is the same as A/2 (with integer division)
if "$c"=="&lt;" global b=mod($b*2,256) //left shift is the same as A*2%256
if "$c"=="@" global b=mod($b,16)*16+int($b/16) //nibble swap is the same as A%16*16+A/16
}
display $b //display the result of A
</code></pre>

<p>Does not work with the online interpreter and requires the non-free default interpreter. This would be somewhat easier with actual bitwise operations, but I don't think they're too useful for most of the common uses of STATA.</p>
</div>
<div id="pu39" class="pu"><h1>Crystal, 139 bytes</h1>
<pre><code>def f x
b=0_u8
x.chars.each do|c|
b=case c
when'!'
~b
when'&gt;'
b&gt;&gt;1
when'&lt;'
b&lt;&lt;1
when'@'
b&lt;&lt;4|b&gt;&gt;4
else raise &quot;&quot;
end
end
puts b
end
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/57204/">57204</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




