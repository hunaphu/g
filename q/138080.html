<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::138080</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>069</td><td>Python 2</td><td>170808T070000Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138084#138084">tsh</a></td></tr>
<tr d-ix="1"><td>130</td><td>Forth gforth</td><td>201111T052059Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/215044#215044">Bubbler</a></td></tr>
<tr d-ix="2"><td>035</td><td>CasioBasic</td><td>170808T074901Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138089#138089">numberma</a></td></tr>
<tr d-ix="3"><td>030</td><td>Octave</td><td>170809T081107Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138186#138186">Cinaski</a></td></tr>
<tr d-ix="4"><td>040</td><td>Julia 0.6.0</td><td>170808T184740Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138134#138134">Goysa</a></td></tr>
<tr d-ix="5"><td>026</td><td>05AB1E</td><td>170808T132807Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138112#138112">Emigna</a></td></tr>
<tr d-ix="6"><td>080</td><td>JavaScript ES6</td><td>170808T104950Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138101#138101">Neil</a></td></tr>
<tr d-ix="7"><td>036</td><td>Pari/GP</td><td>170808T080330Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138091#138091">alephalp</a></td></tr>
<tr d-ix="8"><td>052</td><td>Haskell</td><td>170808T120707Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138106#138106">ბიმო</a></td></tr>
<tr d-ix="9"><td>014</td><td>APL Dyalog</td><td>170808T070021Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138085#138085">Ad&#225;</a></td></tr>
<tr d-ix="10"><td>028</td><td>Mathematica</td><td>170808T073255Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138087#138087">alephalp</a></td></tr>
<tr d-ix="11"><td>011</td><td>M</td><td>170808T080438Z</td><td><a href="https://codegolf.stackexchange.com/questions/138080/find-the-tangent-of-the-sum-of-inverse-tangents/138092#138092">miles</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 69 bytes</h1>

<pre class="lang-python prettyprint-override"><code>from fractions import*
f=lambda k:k and Fraction(k+f(k-1),1-k*f(k-1))
</code></pre>
<p><a href="https://tio.run/##LcoxDsIwDADAnVd4a1KSIYyVYOQfhtZgmdiRm4XXh4FuN1z79rfpZQxyq0COz86mO3Bt5n0@0fWD9bEiyCKAusL9KEHOFCSXmEqW@c84yBwYWMFRX1soJS7NWTtwmvJtShQ4jh8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Use the identity:</p>
<pre class="lang-python prettyprint-override"><code>tan(A + B) = (tan(A) + tan(B)) / (1 - tan(A) * tan(B))
</code></pre>
<p>We have:</p>
<pre class="lang-python prettyprint-override"><code>f(k) = 0                                    if k = 0
     = (k + f(k - 1)) / (1 - k * f(k - 1))  if k &gt; 0
</code></pre>
<p>Thanks to Luis Mendo, save 4 bytes. Thanks to
Lucenaposition, save 3 bytes.</p>
</div>
<div id="pu1" class="pu"><h1><a href="http://www.complang.tuwien.ac.at/forth/gforth/Docs-html/" rel="nofollow noreferrer">Forth (gforth)</a>, 130 bytes</h1>

<pre class="lang-forth prettyprint-override"><code>: g dup if tuck mod recurse then ;
: f 0 1 rot for 2dup i * + -rot swap i * - next
2dup g + abs over 0&lt; 2* 1+ * &gt;r i / swap r&gt; / ;
</code></pre>
<p><a href="https://tio.run/##LY7LDoIwEEX3/YoTlhAeZQnGf0FowaiUtEX9exzA1dzHuclY5@OUj3Y/29YwMqwLd0tc@wcvN@BNv/pgiJOZaVWDpULjXURW1AdPSka@Z@HTnT5nNt@ojn6UtrsF3Nt4qgt1is6EuXpBy3Pjr6JaeSGaEBVoXTA4EQhTUCQ0JH9rz6AkEdF7SZ/OLao9ttsP" rel="nofollow noreferrer" title="Forth (gforth) – Try It Online">Try it online!</a></p>
<p>Uses <a href="https://codegolf.stackexchange.com/a/194241/78410">my own implementation of gcd</a>, and the OEIS formula. Takes <code>k</code> from the stack and returns two integers <code>denom num</code> on the stack. It took a lot of effort (and bytes) to normalize the fraction.</p>
<pre class="lang-forth prettyprint-override"><code>: g ( x y -- gcd 0 )
  dup if tuck mod recurse then
;

: f ( k -- denom num )
  0 1               \ push initial fraction with num=0, denom=1
  rot for           \ ( num denom ) loop from k to 0 inclusive
    2dup i * + -rot \ ( denom*k+num num denom )
    swap i * -      \ ( denom*k+num denom-num*k )
  next
  2dup g + abs      \ ( num denom gcd ) evaluate positive gcd and remove 0
  over 0&lt; 2* 1+ *   \ ( num denom gcd' ) negate gcd if denom &lt; 0
  &gt;r i / swap r&gt; /  \ ( denom/gcd' num/gcd' )
;
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Casio-Basic, 35 bytes</h1>

<pre><code>tExpand(tan(sum(seq(tan⁻¹(n),n,0,k
</code></pre>

<p>tan<sup>-1</sup> should be entered as the one on the Trig keyboard; or the <sup>-1</sup> can be entered separately from the abc>Math keyboard. According to the fx-CP400's manual, it's a single two-byte character (764).</p>

<p>Function, 34 bytes for the code, +1 byte to add <code>k</code> as an argument.</p>

<p><strong>Explanation</strong></p>

<p><code>seq(tan-1(n),n,0,k)</code> generates all the values for <code>tan-1(n)</code> from 0 to k.</p>

<p><code>sum</code> adds them all together, then <code>tan</code> does the tangent function on them.</p>

<p><code>tExpand</code> will then turn them into a single fraction.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 30 bytes</h1>



<pre class="lang-matlab prettyprint-override"><code>format rat
tan(sum(atan(0:k)))
</code></pre>

<p><a href="https://tio.run/##y08uSSxL/Z9ta2bN9T8tvyg3sUShKLGEqyQxT6O4NFcjEcQwsMrW1NT8/x8A" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h2>Julia 0.6.0 40 bytes</h2>

<p><code>k-&gt;rationalize(tan(sum(x-&gt;atan(x),1:k)))</code></p>

<p>It's a straightforward implementation of the question. The precision of rationalize can sometimes be weird but works fine 99% of the time. </p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>33</s> 26 bytes</h1>

<pre><code>0X)Iƒ©`N*+®`sN*-‚D¿D_i\¤}/
</code></pre>

<p><a href="https://tio.run/##ASwA0/8wNWFiMWX//zBYKUnGksKpYE4qK8KuYHNOKi3igJpEwr9EX2lcwqR9L///Ng" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>0X)                          # initialize stack with [0,1]
   Iƒ                        # for N in range [0 ... input] do:
     ©                       # store a copy of the current pair in the register
      `                      # push the pair separately to the stack
       N*                    # multiply the denominator with N
         +                   # add the numerator
          ®`s                # push the denominator then the numerator to the stack
             N*              # multiply the numerator by N
               -             # subtract it from the denominator
                D¿D          # get 2 copies of the greatest common divisor
                   0Qi  }    # if the gcd equals 0
                      \¤     # replace it with the denominator
                         /   # divide the pair with this number
</code></pre>
</div>
<div id="pu6" class="pu"><h2>JavaScript (ES6), 80 bytes</h2>

<pre><code>f=n=&gt;n?([a,b]=f(n-1),g=(a,b)=&gt;a?g(b%a,a):b,c=g(d=b*n+a,e=b-n*a),[d/c,e/c]):[0,1]
</code></pre>

<p>Returns a [numerator, denominator] pair. Explanation: Let <code>f(n-1) = a/b</code> then <code>f(n) = atan(tan(n)+tan(a/b)) = (n+a/b)/(1-n*a/b) = (b*n+a)/(b-n*a)</code>. It then remains to reduce the fraction to its lowest terms.</p>

<p><a href="https://es6console.com/j63jz0l7/" rel="nofollow noreferrer">Online ES6 Environment</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow noreferrer">Pari/GP</a>, 36 bytes</h1>

<pre><code>n-&gt;imag(x=prod(i=0,n,1+i*I))/real(x)
</code></pre>

<p><a href="https://tio.run/##DYoxDoAgDAC/0ji1ChEeALvPIFFIEy1N4@DvkeFuuJwWY990VEgwxGd@SsMvqfUTOQUnLm68HkS7XeXGj0bthjLv4CBO1FjeGRbweaqiENH4AQ" rel="nofollow noreferrer" title="Pari/GP – Try It Online">Try it online!</a></p>

<p>Or the same length:</p>

<pre><code>n-&gt;fold((x,y)-&gt;(x+y)/(1-x*y),[0..n])
</code></pre>

<p><a href="https://tio.run/##DYoxCoAwDAC/EpwSbWp9gP2IOAhSKUhaikP7@pjhbjiuXi3zUzXBDiocU3lvxO4GccS@DFpx4z4PckfwXk7SVBqK3cHBZtSW5bMwAUdTQiEi/QE" rel="nofollow noreferrer" title="Pari/GP – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 52 bytes</h1>



<p>This uses the OEIS series expansion:</p>

<pre class="lang-hs prettyprint-override"><code>import Data.Ratio
f 0=0%1
f n|p&lt;-f$n-1=(p+n)/(1-n*p)
</code></pre>

<p><a href="https://tio.run/##DcUxDsMgDADAva@wokSCIpIwdIOpfUF@YKmQoibGIh77d8pwug9e33gcreWTSxV4oeC8oeRyS7CGdXJ9@rG3aSTrgmJDelHO0p11OzETBOCaSWCG1NWI754yZpjcoCF4D3uUZyGJJFd7/AE" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>Or a pointfree version:</p>

<pre class="lang-hs prettyprint-override"><code>(scanl1(\f n-&gt;(f+n)/(1-n*f))[0%1..]!!)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 14 bytes</h1>



<p>Requires <code>⎕FR←1287</code> (<strong>128</strong> bit <strong>F</strong>loating-point <strong>R</strong>epresentation) for small input. Takes <code>k</code> as right argument.</p>

<pre class="lang-apl prettyprint-override"><code>1(∧÷,)3○¯3+.○⍳
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qW9CjtgmGRhbm/9NADI1HHcsPb9fRNH40vfvQemNtPSD9qHfz//9ph1YYKBgqGCkYK5gomCqYAQA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p><code>⍳</code> integers one through <code>k</code> (zero is not needed as 0 = arctan 0)</p>

<p><code>¯3+.○</code> sum of arcus tangents</p>

<p><code>3○</code> tangent</p>

<p><code>1(</code>…<code>)</code> apply the following tacit function with 1 as left argument and the above as right argument:</p>

<p> <code>∧</code> the lowest common multiple (of 1 and the right argument); gives the numerator</p>

<p> <code>÷</code> divided by</p>

<p> <code>,</code> the concatenation (of 1 and the right argument); gives the numerator and the denominator</p>
</div>
<div id="pu10" class="pu"><h1>Mathematica, 28 bytes</h1>

<pre><code>Fold[+##/(1-##)&amp;,0,Range@#]&amp;
</code></pre>

<p><a href="https://tio.run/##y00sychMLv6fpmCr8N8tPyclWltZWV/DUFdZWVNNx0AnKDEvPdVBOVbtv0t@dEBRZl5JdJ6OgpKCrp2Cko5CWnRebKyOQjVQyEBHwdCgNvY/AA" rel="noreferrer" title="Mathics – Try It Online">Try it online!</a></p>

<p>A longer, but more interesting approach (32 bytes):</p>

<pre><code>Im@#/Re@#&amp;@Product[1+n I,{n,#}]&amp;
</code></pre>

<p><a href="https://tio.run/##y00sychMLv6fpmCr8N8z10FZPyjVQVnNIaAoP6U0uSTaUDtPwVOnOk9HuTZW7b9LfnRAUWZeSXSejoKSgq6dgpKOQlp0XmysjgJQiYKBjoKhQW3sfwA" rel="noreferrer" title="Mathics – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/m" rel="nofollow noreferrer">M</a>, 11 bytes</h1>

<pre><code>×C÷@+
R0;ç/
</code></pre>

<p><a href="https://tio.run/##y/3///B058PbHbS5ggysDy/X////vxkA" rel="nofollow noreferrer" title="M – Try It Online">Try it online!</a></p>

<p>Uses the OEIS formula <code>x(n) = (x(n-1)+n)/(1-n*x(n-1))</code> with <code>x(0) = 0</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/138080/">138080</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




