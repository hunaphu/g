<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::42637</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>276</td><td>Python3</td><td>240828T174021Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/275209#275209">Ajax1234</a></td></tr>
<tr d-ix="1"><td>028</td><td>Pyth</td><td>141228T085210Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42877#42877">isaacg</a></td></tr>
<tr d-ix="2"><td>234</td><td>Python 2</td><td>141227T225745Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42870#42870">user2487</a></td></tr>
<tr d-ix="3"><td>076</td><td>Mathematica</td><td>141226T083235Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42808#42808">swish</a></td></tr>
<tr d-ix="4"><td>037</td><td>CJam</td><td>141224T075637Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42743#42743">jimmy230</a></td></tr>
<tr d-ix="5"><td>037</td><td>APL</td><td>141224T074405Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42742#42742">jimmy230</a></td></tr>
<tr d-ix="6"><td>098</td><td>Haskell</td><td>141221T235248Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42641#42641">proud ha</a></td></tr>
<tr d-ix="7"><td>051</td><td>CJam</td><td>141222T111522Z</td><td><a href="https://codegolf.stackexchange.com/questions/42637/magic-box-problem/42658#42658">Martin E</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 276 bytes</h1>
<pre class="lang-py prettyprint-override"><code>S=lambda b:sum(sum(i)==len(i)for i in b)
def f(b):
 q,d,U=[([],b)],{S(b):[[]]},[b]
 for m,b in q:
  for i in range(len(b[0])):
   B=[j[:i]+[int(not j[i])]+j[i+1:]for j in b];d[s]=d.get(s:=S(B),[])+[m+[i+1]]
   if B not in U:q+=[(m+[i],B)];U+=[B]
 return min(d[max(d)],key=len)
</code></pre>
<p><a href="https://tio.run/##RZDBasMwDIbPy1OIXmIRU1Z2GSm@5AFGoO3JEyPGSecscVLHhZWxZ@@sUrqDJWz//4d@zZf4OfmX1zlcrzs1NKOxDZhyOY@Cj0Olhtan3k0BHDgPBjPbdtAJg2UGJ2nlQWmhSRok@bPjZ62JfqU2lAHbRmnYeEpyeGBC44@tYLbRz4TMAqiU7nXpqNDOR@GnCL12hFSkVmxKYnd/G4K2Vi@k7PrYRrGUaicqlJqw0GPBWiLmuQ4qYEyyHMpTkQblb5IV0vaQrlWShTaeg4fReWH12HwLm4J8tRcOjtdlAwpWq1VW1/u6/q97rqndKyt4LXH6MFMTrFhSoqc7Wt/i9ErldY6PDI4ey@jcENsg3ibfSljWyzy4KPJ3nyNSls2B7Z34Z28Q8foH" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 28</h1>
<pre><code>f@eo+/QN/Qm!dN_osZ^U2lhQTUhQ
</code></pre>
<p>Takes input in the form of a nested list, e.g.</p>
<pre><code>[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,1,1],[0,0,0,1,1]]
</code></pre>
<p>Gives output 0-indexed, e.g.</p>
<pre><code>[2]
</code></pre>
<p><code>^U2lhQ</code>: Generates all possible lists of 0s and 1s of the right length.</p>
<p><code>_osZ</code>: Orders these lists from most 1s to least.</p>
<p><code>+/QN/Qm!dN</code>: Counts how many times each list (<code>N</code>) and its inverse, 0s and 1s swapped (<code>m!dN</code>) occur in the input. The former corresponds to a series of flips leaving all zeros, the latter to leaving all ones.</p>
<p><code>eo</code>: Orders the list by the above key, and takes its last element, which will be the result with the most matching columns, and among them the one with the least ones.</p>
<p><code>f@ ... TUhQ</code>: Converts this list of 1s and 0s to a list of indices to be flipped.</p>
<p>For 1-indexing, change the <code>d</code> to a <code>k</code>, then put <code>mhd</code> at the beginning.</p>
</div>
<div id="pu2" class="pu"><h2>Python 2, 234</h2>

<pre><code>from itertools import *
A=input()
n=len(A[0])
R=range(n)
S=(0,)
for p in[q for i in R[:-1] for q in combinations(R,i)]:
    s=[sum([(l[q]+(q in p))%2 for q in R])for l in A]
    m=s.count(n)+s.count(0)
    if m&gt;S[0]:S=(m,p)
print S[1]
</code></pre>

<p>Input is a list of lists:</p>

<pre><code>[[0,0,1,0,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,1,1],[0,0,0,1,1]]
</code></pre>

<p>Output is a tuple of flips using python indexing from 0:</p>

<pre><code>(2,)
</code></pre>

<p>If the output must be indexed from 1, then the code is 272 characters with 0 denoting no flips:</p>

<pre><code>print 0 if len(S[1])==0 else [p+1 for p in S[1]]
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Mathematica - 76</h1>

<pre><code>{
{P, P, T, P, P},
{P, P, T, P, P},
{P, P, T, T, P},
{P, P, P, T, T},
{P, P, P, T, T}
}/.{P -&gt; 1, T -&gt; 0};
First@MaximalBy[
  Subsets@Range@Length[%],
  MapAt[1-#&amp;,%,{All,#}]~Count~{1..}&amp;
]
</code></pre>
</div>
<div id="pu4" class="pu"><h1>CJam, 37</h1>
<pre><code>q~_{:!}%+:T{T1$a-,\0-+}$0={U):U*}%0-`
</code></pre>
<p>Input format:</p>
<pre><code>[[0 0 1 0 0] [0 0 1 0 0] [0 0 1 1 0] [0 0 0 1 1] [0 0 0 1 1]]
</code></pre>
</div>
<div id="pu5" class="pu"><h1>APL, 37</h1>
<pre><code>{x/1+⍳⍴x←y[↑⍋(+/∘.≠⍨2⊥⍉y),¨+/y←⍵⍪~⍵]}
</code></pre>
<p>Example:</p>
<pre><code>{x/1+⍳⍴x←y[↑⍋(+/∘.≠⍨2⊥⍉y),¨+/y←⍵⍪~⍵]} 5 5⍴0 0 1 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 1 1 0 0 0 1 1
</code></pre>
<p><a href="http://ngn.github.io/apl/web/#code=%7Bx/1+%u2373%u2374x%u2190y%5B%u2191%u234B%28+/%u2218.%u2260%u23682%u22A5%u2349y%29%2C%A8+/y%u2190%u2375%u236A%7E%u2375%5D%7D%205%205%u23740%200%201%200%200%200%200%201%200%200%200%200%201%201%200%200%200%200%201%201%200%200%200%201%201" rel="nofollow noreferrer">Tested here.</a></p>
</div>
<div id="pu6" class="pu"><h1>Haskell, 98</h1>
<pre><code>g s=snd$maximum[((sum[1|o&lt;-s,o==r||o==map(1-)r],-sum r),[i|(i,1)&lt;-zip[1..]r])|r&lt;-s++map(map(1-))s]
</code></pre>
<p>input format is a list of list of ints. you can use a string version for testing:</p>
<pre><code>gg = g . map (map (\c -&gt; case c of 'T' -&gt; 0 ; _ -&gt; 1) ) . lines
</code></pre>
<p><sub>oh no the spaces! it hurts!</sub></p>
<p>this works by iterating over the rows and calculating the number of points we will get if we flipped the columns in a way that this row gains us a point.</p>
<p>first thing to notice is that flipping the row to either all <code>True</code> or all <code>False</code> doesn't matter, because the grids will be exactly the inverse of each other and thus will have the exact same score.</p>
<p>the way we calculate the count when a given row gains a point is so: we iterate over the rows again, and sum the points each row gives us, using the fact that they do exactly when the rows are either identical or the exact inverse.</p>
<p>for example, if the row we are flipping is <code>TPPTP</code> and the current row we are iterating over is <code>PTTPT</code> or <code>TPPTP</code> then the row gains us a point, but when it's any other row, it doesn't gain us any points.</p>
</div>
<div id="pu7" class="pu"><h1>CJam, <s>53</s> 51 bytes</h1>

<pre><code>l~z:X,,La\{1$f++}/{,}${X\{_X=:!t}/z{_&amp;,(},,}$0=:)S*
</code></pre>

<p>This reads a two-dimensional array of 0s and 1s from STDIN. E.g. the example in the question would be</p>

<pre><code>[[0 0 1 0 0] [0 0 1 0 0] [0 0 1 1 0] [0 0 0 1 1] [0 0 0 1 1]]
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow">Test it here.</a></p>

<p>This first gets all possible subsets of columns, in order of increasing length, then performs the flips for each subsets and sorts them by how many rows still have both 0s and 1s in them. Finally, we just return the first such subset. This relies on the sorting being stable, such that the initial order of increasing length takes care of the tie-breaker.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/42637/">42637</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




