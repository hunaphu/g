<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276269</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>123</td><td>AWK</td><td>241025T213334Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276330#276330">user1255</a></td></tr>
<tr d-ix="1"><td>022</td><td>05AB1E</td><td>241024T141446Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276303#276303">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>075</td><td>Python</td><td>241025T044945Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276322#276322">Albert.L</a></td></tr>
<tr d-ix="3"><td>091</td><td>Python 2</td><td>241024T003518Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276296#276296">Lucenapo</a></td></tr>
<tr d-ix="4"><td>nan</td><td>Python</td><td>241023T112529Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276275#276275">138 Aspe</a></td></tr>
<tr d-ix="5"><td>033</td><td>Charcoal</td><td>241023T212312Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276293#276293">Neil</a></td></tr>
<tr d-ix="6"><td>020</td><td>Vyxal</td><td>241023T211325Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276292#276292">emanresu</a></td></tr>
<tr d-ix="7"><td>021</td><td>Jelly</td><td>241023T184442Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276289#276289">Jonathan</a></td></tr>
<tr d-ix="8"><td>079</td><td>Perl 5 n</td><td>241023T175351Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276288#276288">Xcali</a></td></tr>
<tr d-ix="9"><td>043</td><td>APL Dyalog Unicode</td><td>241023T094958Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276272#276272">Ven</a></td></tr>
<tr d-ix="10"><td>060</td><td>JavaScript ES10</td><td>241023T092926Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276271#276271">Arnauld</a></td></tr>
<tr d-ix="11"><td>043</td><td>Retina</td><td>241023T091329Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276270#276270">Neil</a></td></tr>
<tr d-ix="12"><td>043</td><td>Uiua</td><td>241023T103638Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276273#276273">mousetai</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, 123 bytes</h1>
<pre><code>{for(i=2;i&lt;=split(0$0,a,X);i++)printf(!a[i]&amp;&amp;0~(a[i-1]+a[i+1])%2||1~a[i]&amp;&amp;(2~a[i-1]||2~a[i+1])||2~a[i]&amp;&amp;0~(i-1)%2)?i-2FS:x}
</code></pre>
<p><a href="https://tio.run/##SyzP/v@/Oi2/SCPT1sg608a2uCAns0TDQMVAJ1EnQtM6U1tbs6AoM68kTUMxMTozVk3NoE4DyNA1jNUGUtqGsZqqRjU1hnUQSQ2jOohkTQ2YBZKHMiFagXJADZr2mbpGbsFWFbX//wMA" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>0.øü3εOÈy2åNÉ)yÅsè}ƶ0K
</code></pre>
<p>Input as a list of digits; output as a list of 1-based indices.</p>
<p><a href="https://tio.run/##ATIAzf9vc2FiaWX//zAuw7jDvDPOtU/DiHkyw6VOw4kpecOFc8Oofca2MEv//1sxLDAsMSwyXQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/A73DOw7vMT631f9wR6XR4aV@hzs1Kw@3Fh9eUXtsm4H3f53/0dGGOgY6hrE60UYgWgfEMwLywKJglgFcDoEN4KqgOuDiMP0I0wwQKkCmoehAqEBjI5mAYQoWOw1jYwE" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p>Or alternatively:</p>
<pre><code>õªćsv©y)DOÈs2åNÉ)®è–®y
</code></pre>
<p>Input can be a string or a list of digits; prints the invalid 0-based indices on separated newlines.</p>
<p><a href="https://tio.run/##ATAAz/9vc2FiaWX//8O1wqrEh3N2wql5KURPw4hzMsOlTsOJKcKuw6jigJPCrnn//zEwMTI" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaBkX6nDpeRfWgLkFQO5OpX/D289tOpIe3HZoZWVmi7@hzuKjQ4v9TvcqXlo3eEVjxomH1pX@b/20DZ7zZj/0YYGhjpGBoaGBkY6QKaRjgGIB4YGICGQBIgNkgcrMwAL6CgZQGTAIjBSCawErgiu1zAWAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>0.ø             # Surround the (implicit) input-list with leading/trailing 0
   ü3           # Pop and get all overlapping triplets of this list
     ε          # Map over each triplet:
      O         #  Sum the triplet
       È        #  Check whether this sum is even
      y         #  Push the triplet again
       2å       #  Pop and check whether it contains a 2
      N         #  Push the 0-based map-index
       É        #  Check whether this index is odd
         )      #  Wrap all three checks into a list
          y     #  Push the triplet again
           Ås   #  Pop and leave its middle
             è  #  Use that to 0-based index into the earlier list
     }ƶ         # After the map: multiple all checks by their 1-based index
       0K       # Then remove all 0s
                # (after which this is output implicitly as result)
</code></pre>

<pre class="lang-none prettyprint-override"><code>õª              # Append an empty string &quot;&quot; to the (implicit) input
                # (which also converts it to a list if it wasn't already)
  ć             # Extract head; push remainder-list and first item separately to
                # the stack
   s            # Swap so the remainder-list is at the top of the stack
    v           # Pop and loop over each of its values `y`:
     ©          #  Store the top of the stack in variable `®` (without popping)
      y         #  Push the current loop-value `y`
       )        #  Wrap all items on the stack into a list
                #  (2 items in the first iteration; 3 in later iterations)
        D       #  Duplicate this pair or triplet
         O      #  Sum it together
          È     #  Check whether this sum is even
        s       #  Swap so the pair/triplet is at the top again
         2å     #  Pop and check whether it contains a 2
        N       #  Push the 0-based map-index
         É      #  Check whether this index is odd
           )    #  Wrap all three checks into a list
            ®è  #  Use `®` to 0-based index into this triplet
              – #  If it's truthy: print the current loop-index with newline
     ®y         #  Push values `®` and `y` for the next iteration
                # (if the input-list is valid and no indices were printed at the
                # end of the loop, it'll implicitly print the first pushed value
                # with trailing newline instead, which is the empty string &quot;&quot;)
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 75 bytes</h1>
<h3>-2 thanks to @Jonathan Allan.</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[j for j,c in enumerate(l)if[~sum(L:=[0,*l][j:j+3]),2in L,j][c]%2]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dVBRSsQwEMXfnmJYEJruKEkWQRf2BO4NYpDYptvUNilt6uKPF_FHEL2TnsakdWVFnEDIvJl5b16e37tHXzn78lpubt5GX55dflw3qr0rFDRrUUPpeqgxB2NB27HVvfI6bYgpxdMwtul2vREUs0aKel0vV5IgD51brKXI5SmX35Q-0hh0mN1GplZ16eD786FrjMdD1uuuUblG12mbUoJXmVggLGR4LHBByDqBEFmg2WRxxliPhqB-UE3qyFTs-gCmZRpgR2btl88TyyiDnxBMQkrBDDAoW-xNXukC7rTfa22BLdmGk4RTxig_DFyEAV9p6M2u8q0bPPA4rjwoC64ooHOD8cZZkgQlfqSEwBFWf_XwiIuBd2NeGbuLzTzS_uakcBSCSvhv-bjjrnejLcJiBQz3j0F4SSc706HRk1ghXCBcIlzJhEWfsRLtCsbkbJ1OaOiVCZ07JvBwR5wf0u_qzBJL879_AQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 77 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l:[j for j,c in enumerate(l)if[~sum(L:=[0,*l][j:j+4:2]),2in L,j][c]%2]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dVBRSsQwEMXfnmJYEJruKElU0MLeQE8Qg8Q23aa2SWlTxR8v4o8geic9jUnryoo4gZB5M_PevDy_94--dvbltdpcv02-Ojr_uGpVd1sqaHPRQOUGaLAAY0HbqdOD8jptianE0zh16WW-ERSzVoomb9anOZcEeei9xEaKQh5y-U3qI5FBh9lN5OpUn45-OB771njcZYPuW1VodL22KSV4kYkVwkqGxwpXhOQJhMgCzSaLM8Z6NAT1vWpTR-ZiPwQwrdIAO7Jov3weWEYZ_IRgElIKZoRR2fLBFLUu4Vb7B60tsDXbcJJwyhjlu4GzMOBrDYPZ1r5zowcex5UHZcGVJfRuNN44S5KgxPeUEDjCyV893ONi4N1U1MZuYzOPtL85KeyFoBL-Wz7uuB3cZMuwWAnj3WMQXtPZznxo9CROEM4QzhEuZMKiz1iJdgVjcrFOZzT0yoQuHTO4uyPOd-l3dWGJpeXfvwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>104</s> 91 bytes</h1>

<pre class="lang-none prettyprint-override"><code>b=input()+[-2]*2
for i,j in enumerate(b):l=b[i-1:i+2];print`i`*[~sum(l)&amp;1,2in l,i&amp;1,0,0][j]
</code></pre>
<p><a href="https://tio.run/##TYtBCsMgEADvfYWnoomBuMeUvGRZSAVLN5iNWD300q9beyvDwFwmvcvzFGjNryypFm1GnIAGuDzOrNjuikUFqUfI9xK0N0tcPfLkFh6BbimzlI23AT@veuhors5CP6LlXrOdCXdqDaG3@/MHWEdf" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <del>398</del> <del>183</del> 168 bytes</h1>
<p>Saved 230 bytes thanks to @Malo</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=jVNNitswGF3Mzqf4cKCxiYeRHAamBq3mAC2lO-MG2ZEbQUYWspxmSNMTFLrprh3IpqVH6FXa5VygV6h-7E6acaEYzOfn9973JH369FXe6lUjDocvna7Pr358W7IaZFTGWQCU5EUAJclRgopZOcuR-awbBTzZABfARHfDFNUsKvM0O8eFFYEgZc5nc0MF6UpsS17DhhCUVSR6J1-J2EBs7UFsQflWxBcX6RGcGph7ZfUEZ3RGcm6cFNOdEkB93p9nZAIvWauhoi1rA23KhSuBQG7UALuQC9npMIMQIxwmELKtZJVmSwPluNgnp7QUYYzSU-blCNMYPuLhBNIE5iNsdEpF483dgx4nmCdwmcBVAk_HotjMVjcSHf9zlciJTvlj2b29kwzv_5ClA7sX-4QjyqAIggm86AToh9O0s2YrO2wPJ5u5JhO4bsSGKQ2tVly8Bt0AVYreQlODGcySqdYRXZaF_2VmggsdbWM3xlvray3zPnBROEXv_1w1FWtb0CvmnR2uWNuttXGS0ZFzfCy8bm4kVQzecL2CYZm90EdqF1WjlMGNz2BI-ih_9uWvMM86bZoNZCqWsKFrvqSaN8JRpLIrq8Odp-xhN73__PHX9w9Te4OOOrK12dDp_d376T6M_S0abv9v" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-python prettyprint-override"><code>def p(b):
 a=[]
 b=[0,0]+b+[0]
 for i,v in enumerate(b[2:-1]):
  n=b[i+3]
  p=b[i+1]
  if v==0:c=(~p^n)
  elif v==1:c=(p|n)//2
  elif v==2:c=i
  if c&amp;1:a+=[i]
 return a
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=tVbdahNBFL6VPMUhBZNgandTCrWYqwqCYCu1BSHEsNk92wxuZpeZ2Tah1icQvPFOhd7oM_gs3gh9AV_BMzP7ny31xgTCzsn5-c45354zX34ka7WI-c3N91SF2_u_HvwOMIRExD5KOfOE8NZ9xpNU2efBQQfoswVnEiFiUoEfLxOBC-SSxRwumVqQiAdM0dGLIGSRQsH4OfQlW7LIE6BiCCNPvfSSgXEmUKaRgjFMpuYcxgL8VAjkasZ4gKthcbzwohSBcUCeLlF4ClvAWYDPUYFaIHBcKSjstMToQv8o5iQKYY5rwptJ53HKAzko_GjrLOoYKqEmNYDwCNyp9rUhhacQIa-BBIyodjp6EaUC-7WKBRqYVNULFqcyA6-rUuTDlE6eKlxY5toFWGcTz1hLTfS7M9mmTNpwPUMKuWRUsssF8xcQJxkC3U56JnhLmHsSAyBZ5tNCL7xUAGUoCVDZMxvo6PgU4rCZ_ZvjE8utsp0NuzOpSTZn6pJRghZeLCR41NsF_UT6b9Nzn1DWjPMm51WrNJ1Ja2OqVspr5voNSBUGs4LI_Q-NdrwtbEtqYdRWD7dZj36jElSIsgYDCNgFC6jo8zWM_nNSjZzelznBzk4lentio2ZiL1KaHgJVKuxrmXPG8PAeLDXOVgJLPLjH0mkj9-EC_Xe6SBpHhB4Bk-ycs5D5HiEiUumaSZoo_cwRHeMgGNSo3Yj1sNlLK3_sJQnyoF9LYVBTzKaiqYw16nS24BT1tCXuyo6ix5l51FPTqF91zTvdPYCu67jdIXRxlaBPeEg0cafXw6bayHFdZ9TU3GvRJIcbeu4QRkPYbdF2mqpOe3DzdTYR7A5hbwj7Q3jSBkVj1nYt0N07s3SMUVO_Dbt1b0zy338wG-XambFF2GLZmepOnqTE-LKbZt950u6norP5oj2M-QUKIqQyW5Smrd1UNCNpB85RSKNYmeiaE4yr_mpglsZK-9UuJxngqR3wmf9XdtWXm7G-k---CVSdHBL3PdpbZkTnKefcNfDkzI-J8L72mTsfZ7CKGtWAHaeKguXKeozTLGFBufYSobMMu1dW5RquerdfP__5-amnX8dKRDPnerffPvauuwN7z8muO_m15y8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-python prettyprint-override"><code>def process_array(input_array):
    # Use list comprehension with conditional filtering (similar to flatMap)
    result = []
    for current_index, current_value in enumerate(input_array):
        # Get the next value in the array (None if beyond array bounds)
        next_value = input_array[current_index + 1] if current_index + 1 &lt; len(input_array) else None
        
        # Store the previous value for the next iteration
        previous_value = 0 if current_index == 0 else input_array[current_index - 1]
        
        # Determine which operation to perform based on current value
        if current_value == 0:
            # NOT of previous value XOR with next value
            # Using bitwise operators and handling None case
            next_val = 0 if next_value is None else next_value
            computed_result = (~previous_value ^ next_val)
        elif current_value == 1:
            # (previous value OR next value) divided by 2
            next_val = 0 if next_value is None else next_value
            computed_result = (previous_value | next_val) // 2
        elif current_value == 2:
            # Just return the current index
            computed_result = current_index
        else:
            computed_result = 0
        
        # Check if the least significant bit is set (result is odd)
        if computed_result &amp; 1:
            result.append(current_index)
            
    return result

# Test cases
test_cases = [
    {&quot;input&quot;: &quot;101&quot;, &quot;expected&quot;: [1]},
    {&quot;input&quot;: &quot;201102&quot;, &quot;expected&quot;: [5]},
    {&quot;input&quot;: &quot;1012&quot;, &quot;expected&quot;: [1, 2, 3]},
    {&quot;input&quot;: &quot;0&quot;, &quot;expected&quot;: [0]},
    {&quot;input&quot;: &quot;20101010002&quot;, &quot;expected&quot;: [3, 5, 8, 9]},
    {&quot;input&quot;: &quot;111020100102&quot;, &quot;expected&quot;: [11]},
    {&quot;input&quot;: &quot;20110010201&quot;, &quot;expected&quot;: []},
    {&quot;input&quot;: &quot;01102011100111100111&quot;, &quot;expected&quot;: []},
    {&quot;input&quot;: &quot;20111100102011102010011&quot;, &quot;expected&quot;: []}
]

# Run test cases
for case in test_cases:
    # Convert string to array of numbers
    input_array = [int(x) for x in case[&quot;input&quot;]]
    
    # Process the array
    result = process_array(input_array)
    
    # Compare with expected result
    is_correct = result == case[&quot;expected&quot;]
    
    # Output result and validation
    print(f&quot;{result} {'✔️' if is_correct else '❌'}&quot;)
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 33 bytes</h1>
<pre><code>Ｉ⌕ＡＥＥθ✂⪫00θκ⁺³κ¹＆¹§⟦⊕Σι⁼2⌈ικ⟧§θκ¹
</code></pre>
<p><a href="https://tio.run/##RYzBCsIwEER/JfS0gQhNPXqqolChUOhRPIQk4OI2NU2q/fuYKuJhhhlm9@mbmvSoKKVuQhfhoEKEEzpTE0GrHh95wXpCbeE8ooOiLAvBPBfsLlhHc4BtjrlKnm2P8YXB1s6AFKyOjTN2gUvj9GQH66I10M8D4Hp79LOiAEWVea1acPgN9@v/1a9wzr98vktJlrJKmye9AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Port of @Arnauld's JavaScript answer.</p>
<pre><code>     θ                              Input string
    Ｅ                               Map over characters
        00                          Literal string `00`
       ⪫                            Joined with
          θ                         Input string
      ✂        ¹                    Sliced from
           κ                        Current index to
              κ                     Current index
            ⁺                       Plus
             ³                      Literal integer `3`
   Ｅ                                Map over windows
                      ι             Current window
                     Σ              Sum of digits
                    ⊕               Incremented
                          ι         Current window
                         ⌈          Maximum
                       ⁼            Equals
                        2           Literal string `2`
                           κ        Current index
                   ⟦        ⟧       Make into list
                  §                 Indexed by
                              θ     Input string
                             §      Indexed by
                               κ    Current index
                ＆                   Bitwise And
                 ¹                  Literal integer `1`
 ⌕Ａ                                 Find indices of
                                ¹   Literal integer `1`
Ｉ                                   Cast to string
                                    Implicitly print
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 20 bytes</h1>
<pre><code>0pǏ3lƛ∑₂n2c¥&amp;¬W;¨£iT
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCIwcMePM2zGm+KIkeKCgm4yY8KlJsKsVzvCqMKjaVQiLCIiLCJbMiwwLDEsMCwxLDAsMSwwLDAsMCwyXSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>0pǏ                  # Prepend and append a 0
   3lƛ         ;     # Over the subarrays of length 3...
              W      # Construct a list of
      ∑₂             # 0 -&gt; Sum even
        n2c          # 1 -&gt; Contains a 2
           ¥&amp;¬       # 2 -&gt; Whether the current index is even
                ¨£i  # Index the original values into each list
                   T # And get the truthy indices of this.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 21 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>2e;SḂj0Ḋƭ
Ø0jÇ3Ƥ⁸ịƑ&quot;T
</code></pre>
<p>A full program that accepts the list of blocks (integers from <span class="math-container">\$\{0,1,2\}\$</span>) and prints the list of <strong>1-indexed</strong> indices of erroneous blocks.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/98o1Tr44Y6mLIOHO7qOreU6PMMg63C78bEljxp3PNzdfWyiUsj///@jDXUUDHQUgKRRLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<p>Or see the <a href="https://tio.run/##y0rNyan8/98o1Tr44Y6mLIOHO7qOreU6PMMg63C78bEljxp3PNzdfWyiUsj/w@06h9sf7lgEFNI5OunhzhmPmtZkPWqYo2Brp/CoYa5m5P//0dGGOgY6hrE6XArRRiCWDohvBOaDZaBsAyQVCGyApBaqEy6DMAdhrgFCDcRUFF0INWhsFFMwTMJiM0hHLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>. (This calls the code twice for each input just to ensure that the <code>ƭ</code> is in the right state after an odd-length input (hence the &quot;full program&quot; qualification above))</p>
<h4>How?</h4>
<pre><code>2e;SḂj0Ḋƭ - Helper link: three-slice of blocks, T
2e        - does two exist in {T}?
   S      - sum {T}
  ;       - concatenate -&gt; [2 in T?, sum T]
    Ḃ     - mod two -&gt; [2 in T? % 2, sum T % 2]  (Note: 2 in T? % 2 = 2 in T)
        ƭ - on successive calls alternate between:
      0   -   zero
       Ḋ  -   dequeue {T}
     j    - join -&gt; [2 in T?, 0 / 2nd element, ...junk...,  Sum T % 2]
                       ^        ^                             ^
                    (1-case   2-case                        0-case)

Ø0jÇ3Ƥ⁸ịƑ&quot;T - Main Link: list of {0,1,2}, Blocks
Ø0          - [0,0]
  j         - join with {Blocks} -&gt; 0-padded-blocks
    3Ƥ      - for each three-slice, from left to right:
   Ç        -   call the helper link -&gt; LookupArray
      ⁸     - chain's left argument -&gt; Blocks
         &quot;  - zip with - f(Block, respective LookupArray):
        Ƒ   -   is {Block} invariant under?:
       ị    -     {Block} index into {LookupArray} (1-indexed &amp; modular)
          T - truthy indices
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-n</code>, 79 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>($&amp;-2||pos()%2)&amp;&amp;say pos while /2\K1|1(?=2)|([02]|^\K)0(?=[20]|$)|1\K0(?=1)|2/g
</code></pre>
<p><a href="https://tio.run/##FchBCoMwEEDRq2RhQ2YRnRlwWXqA0BMYBReigpjQFEphzu403Xx4Py@vo1d1jfUsklNxcGOwtsxfU2U@234spuMYSMg97gziBuRRphgA6xgYR2lAKIY/CYS7VRUZmZBq8Ur5vaezqH/2LRKqP38" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Output is 1-indexed</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>47</s> 43 <a href="https://codegolf.meta.stackexchange.com/a/9429/43319" title="When can APL characters be counted as 1 byte each?">bytes</a><sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer" title=".dyalog files using a single byte character set">SBCS</a></sup></h1>
<p><code>⎕IO=0</code></p>

<pre class="lang-none prettyprint-override"><code>{⍸((⍵=2)×2|⍳⍴⍵)∨{(~2|+/⍵)(2∊⍵)0[⍵[1]]}⌺3⊢⍵}
</code></pre>
<p>Creates a 3-cases stencil around each elements (those get padded with zeroes). Index into an array computing whether the sum of the 3 is odd (0 being the identity element here) for 0, and for 1 checks if any element is 2 (we know the middle one is 1). No check done for 2 at this stage (index not available at point).
Then a second checks is <code>OR</code>ed with the first one, we compute a range of the indices, and keep those for positions of 2.</p>
<p>Once we have a boolean vector, use ⍸ to get the truthy positions.</p>
<p>-4 thanks to @asherbhs.</p>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkG/6sf9e7Q0HjUu9XWSPPwdKOaR72bH/VuAfI1H3WsqNaoM6rR1gfxNIwedXSBGAbRQDLaMDa29lHPLuNHXYuA3Nr/aUDDHvX2PepqftS7BmjAofXGj9omAq0JDnIGkiEensH/0xQMFQwUDLnSFIxANJhnxAUVBbMg4ghsAFUBU28IFQXrhIsZwPWBRQA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1>JavaScript (ES10), 60 bytes</h1>
<p>Expects an array of digits.</p>

<pre class="lang-none prettyprint-override"><code>a=&gt;a.flatMap(p=(v,i)=&gt;[~p^(q=a[i+1]),(p|q)/2,i][p=v]&amp;1?i:[])
</code></pre>
<p><a href="https://tio.run/##dZJNTsMwEIX3PcUoC2KrxsSpKkErtys2SJQFS8tIJnVKUNq4SahA/JwAiQ1LuAfn6QU4QnASqrQ0eKSRRn7v@RvJt2qlsiCNTH64SKa6CHmh@EjRMFb5uTLIcLQiEeYj8WKu0JIrEXWZxASZpyU@8kkkheErecDG0UBIXAxFB0CAwzzmEGg7gslmkKSW@x5jnt/mEP0WuU332@MFI@AT6MltufcPir302mGq8vaIRI9An8AxgRPZwJTopXxvA8G2dt1Z1assf9O3WBr2Or3ybHrta5X7G9WvqQYrHbvyjuzQMElPVXCDkICMgL43Osj1FCQGPoJHmxfrHFKdAYcQCUppJunc/onJ3fxapxgPrSRIFlkSaxonM3R2eTGhWZ5Gi1kUPiDrxNAFx1YXyqkcHOC8eWoM7vfX2/rj3XYXBuCuP1/dMvgZD4sf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-none prettyprint-override"><code>a =&gt;                // a[] = input array
a.flatMap(p =       // initialize p to a zero'ish value
(v, i) =&gt;           // for each value v at index i:
  [                 //   lookup array:
    ~p ^            //     0: (NOT predecessor) XOR
    (q = a[i + 1]), //        successor
    (p | q) / 2,    //     1: (predecessor OR successor) / 2
    i               //     2: just use i
  ][p = v]          //   get the result at index v and copy v to p
  &amp; 1               //   test the LSB
  ?                 //   if it's set:
    i               //     return the position
  :                 //   else:
    []              //     discard this entry
)                   // end of flatMap()
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, <s>55</s> <s>48</s> 43 bytes</h1>
<pre><code>^|$
0
Iv`101|[02]0[02]|21|.12|(?&lt;!^(..)*).2
</code></pre>
<p><a href="https://tio.run/##K0otycxLNPz/P65GhcuAy7MswdDAsCbawCjWAETUGBnW6Bka1WjY2yjGaejpaWpp6hn9V9VMOLSNS@c/UCmXkYGhoYERF5BpBNQP5IGhAUgIJAFig@TBygzAAlwGEAmwAIwEK4Arges0BAA" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Outputs unstable positions on separate lines but link is to test suite that joins on commas for convenience. Explanation: The skyscraper is wrapped in <code>0</code>s for convenience, then <code>I</code> command automatically lists the positions of the matches, while the <code>v</code> modifier allows the matches to overlap, thus avoiding forward lookahead, so it just remains to match the unstable positions, starting at the now previous character, which is at the desired position.</p>
</div>
<div id="pu12" class="pu"><h1>Uiua, 43 chars</h1>
<pre><code>⊚↥⊃(≡(⨬(¬◿2/+|/↥⌕2|0)⊸⊡1)◫3↻1⊂0_0|↧◿2⇡⧻⤙=2)
</code></pre>
<p><a href="https://uiua.org/pad?src=0_13_0__YSDihpAgewogIDFfMF8xCiAgMl8wXzFfMV8wXzIKICAxXzBfMV8yCiAgwqQwCiAgMl8wXzFfMF8xXzBfMV8wXzBfMF8yCiAgMV8xXzFfMF8yXzBfMV8wXzBfMV8wXzIKICAyXzBfMV8xXzBfMF8xXzBfMl8wXzEKICAwXzFfMV8wXzJfMF8xXzFfMV8wXzBfMV8xXzFfMV8wXzBfMV8xXzEKICAyXzBfMV8xXzFfMV8wXzBfMV8wXzJfMF8xXzFfMV8wXzJfMF8xXzBfMF8xXzEKfQpmIOKGkCDiiprihqXiioMo4omhKOKorCjCrOKXvzIvK3wv4oal4oyVMnwwKeKKuOKKoTEp4perM-KGuzHiioIwXzB84oan4pe_MuKHoeKnu-KkmT0yKQrijZpmIGEK" rel="nofollow noreferrer">Pad Link</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276269/">276269</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




