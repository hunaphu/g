<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276269</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>021</td><td>Jelly</td><td>241023T184442Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276289#276289">Jonathan</a></td></tr>
<tr d-ix="1"><td>079</td><td>Perl 5 n</td><td>241023T175351Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276288#276288">Xcali</a></td></tr>
<tr d-ix="2"><td>nan</td><td>Python</td><td>241023T112529Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276275#276275">138 Aspe</a></td></tr>
<tr d-ix="3"><td>043</td><td>APL Dyalog Unicode</td><td>241023T094958Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276272#276272">Ven</a></td></tr>
<tr d-ix="4"><td>060</td><td>JavaScript ES10</td><td>241023T092926Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276271#276271">Arnauld</a></td></tr>
<tr d-ix="5"><td>043</td><td>Retina</td><td>241023T091329Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276270#276270">Neil</a></td></tr>
<tr d-ix="6"><td>043</td><td>Uiua</td><td>241023T103638Z</td><td><a href="https://codegolf.stackexchange.com/questions/276269/building-skyscrapers/276273#276273">mousetai</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 21 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>2e;SḂj0Ḋƭ
Ø0jÇ3Ƥ⁸ịƑ&quot;T
</code></pre>
<p>A full program that accepts the list of blocks (integers from <span class="math-container">\$\{0,1,2\}\$</span>) and prints the list of <strong>1-indexed</strong> indices of erroneous blocks.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/98o1Tr44Y6mLIOHO7qOreU6PMMg63C78bEljxp3PNzdfWyiUsj///@jDXUUDHQUgKRRLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre><code>2e;SḂj0Ḋƭ - Helper link: three-slice of blocks, T
2e        - does two exists in {T}?
   S      - sum {T}
  ;       - concatenate -&gt; [2 in T?, sum T]
    Ḃ     - mod two -&gt; [2 in T? % 2, sum T % 2]  (Note: 2 in T? % 2 = 2 in T)
        ƭ - on successive calls alternate between:
      0   -   zero
       Ḋ  -   dequeue {T}
     j    - join -&gt; [2 in T?, 0 / 2nd element, ...junk...,  Sum T %2]

Ø0jÇ3Ƥ⁸ịƑ&quot;T - Main Link: list of {0,1,2}, Blocks
Ø0          - [0,0]
  j         - join with {Blocks} -&gt; 0-padded-blocks
    3Ƥ      - for each three-slice, from left to right:
   Ç        -   call the helper link -&gt; LookupArray
      ⁸     - chain's left argument -&gt; Blocks
         &quot;  - zip with - f(Block, respective LookupArray):
        Ƒ   -   is {Block} invariant under?:
       ị    -     {Block} index into {LookupArray}
          T - truthy indices
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-n</code>, 79 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>($&amp;-2||pos()%2)&amp;&amp;say pos while /2\K1|1(?=2)|([02]|^\K)0(?=[20]|$)|1\K0(?=1)|2/g
</code></pre>
<p><a href="https://tio.run/##FchBCoMwEEDRq2RhQ2YRnRlwWXqA0BMYBReigpjQFEphzu403Xx4Py@vo1d1jfUsklNxcGOwtsxfU2U@234spuMYSMg97gziBuRRphgA6xgYR2lAKIY/CYS7VRUZmZBq8Ur5vaezqH/2LRKqP38" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Output is 1-indexed</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <del>398</del> 183 bytes</h1>
<p>Saved 215 bytes thanks to @Malo</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=jVRBjtMwFF2wyym-Uok2mowmzmikISKrOQAIsYtC5aYOtZRxLNspHZVyAiQ27GCk2cAV4CqwnAtwBb7thJZOkFCk2Hr_vefn-Dufvsobs2rF3d2XztSnlz--LVkNcraIsgBoXpQB1K0CHq-BC2Ciu2aKGubrIPJFwU9ICbwGHJ82TGAFWKMZJFiXeeJKOY4ORPopQU-LrhHNqnz2Tr4SEUKs8SCxoHwrorOz9ABOEeZeWT0mGT3JC45OiplOCaA-_s9H-QReMm2goprpwOB07qaQQ4FqgG3IhexMmEFIEhLGELKNZJVhS4QKUu7iY1qaEJKkx8yLESYaPuCRGNIYzkfYyTE1GV_cPcnDBOcxXMRwGcOTsSg2s9WNRCf_3GXiRMf8seze3kmG93_I0oHdi33CEWVQBsEEXnQCzP40bSfamW3F_clmbpEJXLVizZQBbRQXr8G0QJWiN9DWgG27YEo7ossy9yXsCS7MbBO5Jt9YX2tZ9IHL0il6_-eqrZjWYFbMOztcMd01Bp3k7MA5OhRetdeSKgZvuFnBsM1e6CPpedUqhTj6DIZ5H-XPd_krzLPO4GIDmYolrGnDl9TwVjiKVHZndbj1lB1sp_efP_76_mHqbuR-RXcvp_e376e7MPK3aPgZ_AY" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-python prettyprint-override"><code>def p(b):
 a=[]
 for i,v in enumerate(b):
  n=b[i+1] if i+1&lt;len(b) else 0
  p=0 if i==0 else b[i-1]
  if v==0:c=(~p^n)
  elif v==1:c=(p|n)//2
  elif v==2:c=i
  if c&amp;1:a+=[i]
 return a
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=tVbdahNBFL6VPMUhBZNgandTCrWYqwqCYCu1BSHEsNk92wxuZpeZ2Tah1icQvPFOhd7oM_gs3gh9AV_BMzP7ny31xgTCzsn5-c45354zX34ka7WI-c3N91SF2_u_HvwOMIRExD5KOfOE8NZ9xpNU2efBQQfoswVnEiFiUoEfLxOBC-SSxRwumVqQiAdM0dGLIGSRQsH4OfQlW7LIE6BiCCNPvfSSgXEmUKaRgjFMpuYcxgL8VAjkasZ4gKthcbzwohSBcUCeLlF4ClvAWYDPUYFaIHBcKSjstMToQv8o5iQKYY5rwptJ53HKAzko_GjrLOoYKqEmNYDwCNyp9rUhhacQIa-BBIyodjp6EaUC-7WKBRqYVNULFqcyA6-rUuTDlE6eKlxY5toFWGcTz1hLTfS7M9mmTNpwPUMKuWRUsssF8xcQJxkC3U56JnhLmHsSAyBZ5tNCL7xUAGUoCVDZMxvo6PgU4rCZ_ZvjE8utsp0NuzOpSTZn6pJRghZeLCR41NsF_UT6b9Nzn1DWjPMm51WrNJ1Ja2OqVspr5voNSBUGs4LI_Q-NdrwtbEtqYdRWD7dZj36jElSIsgYDCNgFC6jo8zWM_nNSjZzelznBzk4lentio2ZiL1KaHgJVKuxrmXPG8PAeLDXOVgJLPLjH0mkj9-EC_Xe6SBpHhB4Bk-ycs5D5HiEiUumaSZoo_cwRHeMgGNSo3Yj1sNlLK3_sJQnyoF9LYVBTzKaiqYw16nS24BT1tCXuyo6ix5l51FPTqF91zTvdPYCu67jdIXRxlaBPeEg0cafXw6bayHFdZ9TU3GvRJIcbeu4QRkPYbdF2mqpOe3DzdTYR7A5hbwj7Q3jSBkVj1nYt0N07s3SMUVO_Dbt1b0zy338wG-XambFF2GLZmepOnqTE-LKbZt950u6norP5oj2M-QUKIqQyW5Smrd1UNCNpB85RSKNYmeiaE4yr_mpglsZK-9UuJxngqR3wmf9XdtWXm7G-k---CVSdHBL3PdpbZkTnKefcNfDkzI-J8L72mTsfZ7CKGtWAHaeKguXKeozTLGFBufYSobMMu1dW5RquerdfP__5-amnX8dKRDPnerffPvauuwN7z8muO_m15y8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-python prettyprint-override"><code>def process_array(input_array):
    # Use list comprehension with conditional filtering (similar to flatMap)
    result = []
    for current_index, current_value in enumerate(input_array):
        # Get the next value in the array (None if beyond array bounds)
        next_value = input_array[current_index + 1] if current_index + 1 &lt; len(input_array) else None
        
        # Store the previous value for the next iteration
        previous_value = 0 if current_index == 0 else input_array[current_index - 1]
        
        # Determine which operation to perform based on current value
        if current_value == 0:
            # NOT of previous value XOR with next value
            # Using bitwise operators and handling None case
            next_val = 0 if next_value is None else next_value
            computed_result = (~previous_value ^ next_val)
        elif current_value == 1:
            # (previous value OR next value) divided by 2
            next_val = 0 if next_value is None else next_value
            computed_result = (previous_value | next_val) // 2
        elif current_value == 2:
            # Just return the current index
            computed_result = current_index
        else:
            computed_result = 0
        
        # Check if the least significant bit is set (result is odd)
        if computed_result &amp; 1:
            result.append(current_index)
            
    return result

# Test cases
test_cases = [
    {&quot;input&quot;: &quot;101&quot;, &quot;expected&quot;: [1]},
    {&quot;input&quot;: &quot;201102&quot;, &quot;expected&quot;: [5]},
    {&quot;input&quot;: &quot;1012&quot;, &quot;expected&quot;: [1, 2, 3]},
    {&quot;input&quot;: &quot;0&quot;, &quot;expected&quot;: [0]},
    {&quot;input&quot;: &quot;20101010002&quot;, &quot;expected&quot;: [3, 5, 8, 9]},
    {&quot;input&quot;: &quot;111020100102&quot;, &quot;expected&quot;: [11]},
    {&quot;input&quot;: &quot;20110010201&quot;, &quot;expected&quot;: []},
    {&quot;input&quot;: &quot;01102011100111100111&quot;, &quot;expected&quot;: []},
    {&quot;input&quot;: &quot;20111100102011102010011&quot;, &quot;expected&quot;: []}
]

# Run test cases
for case in test_cases:
    # Convert string to array of numbers
    input_array = [int(x) for x in case[&quot;input&quot;]]
    
    # Process the array
    result = process_array(input_array)
    
    # Compare with expected result
    is_correct = result == case[&quot;expected&quot;]
    
    # Output result and validation
    print(f&quot;{result} {'✔️' if is_correct else '❌'}&quot;)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>47</s> 43 <a href="https://codegolf.meta.stackexchange.com/a/9429/43319" title="When can APL characters be counted as 1 byte each?">bytes</a><sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer" title=".dyalog files using a single byte character set">SBCS</a></sup></h1>
<p><code>⎕IO=0</code></p>

<pre class="lang-none prettyprint-override"><code>{⍸((⍵=2)×2|⍳⍴⍵)∨{(~2|+/⍵)(2∊⍵)0[⍵[1]]}⌺3⊢⍵}
</code></pre>
<p>Creates a 3-cases stencil around each elements (those get padded with zeroes). Index into an array computing whether the sum of the 3 is odd (0 being the identity element here) for 0, and for 1 checks if any element is 2 (we know the middle one is 1). No check done for 2 at this stage (index not available at point).
Then a second checks is <code>OR</code>ed with the first one, we compute a range of the indices, and keep those for positions of 2.</p>
<p>Once we have a boolean vector, use ⍸ to get the truthy positions.</p>
<p>-4 thanks to @asherbhs.</p>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkG/6sf9e7Q0HjUu9XWSPPwdKOaR72bH/VuAfI1H3WsqNaoM6rR1gfxNIwedXSBGAbRQDLaMDa29lHPLuNHXYuA3Nr/aUDDHvX2PepqftS7BmjAofXGj9omAq0JDnIGkiEensH/0xQMFQwUDLnSFIxANJhnxAUVBbMg4ghsAFUBU28IFQXrhIsZwPWBRQA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (ES10), 60 bytes</h1>
<p>Expects an array of digits.</p>

<pre class="lang-none prettyprint-override"><code>a=&gt;a.flatMap(p=(v,i)=&gt;[~p^(q=a[i+1]),(p|q)/2,i][p=v]&amp;1?i:[])
</code></pre>
<p><a href="https://tio.run/##dZJNTsMwEIX3PcUoC2KrxsSpKkErtys2SJQFS8tIJnVKUNq4SahA/JwAiQ1LuAfn6QU4QnASqrQ0eKSRRn7v@RvJt2qlsiCNTH64SKa6CHmh@EjRMFb5uTLIcLQiEeYj8WKu0JIrEXWZxASZpyU@8kkkheErecDG0UBIXAxFB0CAwzzmEGg7gslmkKSW@x5jnt/mEP0WuU332@MFI@AT6MltufcPir302mGq8vaIRI9An8AxgRPZwJTopXxvA8G2dt1Z1assf9O3WBr2Or3ybHrta5X7G9WvqQYrHbvyjuzQMElPVXCDkICMgL43Osj1FCQGPoJHmxfrHFKdAYcQCUppJunc/onJ3fxapxgPrSRIFlkSaxonM3R2eTGhWZ5Gi1kUPiDrxNAFx1YXyqkcHOC8eWoM7vfX2/rj3XYXBuCuP1/dMvgZD4sf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-none prettyprint-override"><code>a =&gt;                // a[] = input array
a.flatMap(p =       // initialize p to a zero'ish value
(v, i) =&gt;           // for each value v at index i:
  [                 //   lookup array:
    ~p ^            //     0: (NOT predecessor) XOR
    (q = a[i + 1]), //        successor
    (p | q) / 2,    //     1: (predecessor OR successor) / 2
    i               //     2: just use i
  ][p = v]          //   get the result at index v and copy v to p
  &amp; 1               //   test the LSB
  ?                 //   if it's set:
    i               //     return the position
  :                 //   else:
    []              //     discard this entry
)                   // end of flatMap()
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, <s>55</s> <s>48</s> 43 bytes</h1>
<pre><code>^|$
0
Iv`101|[02]0[02]|21|.12|(?&lt;!^(..)*).2
</code></pre>
<p><a href="https://tio.run/##K0otycxLNPz/P65GhcuAy7MswdDAsCbawCjWAETUGBnW6Bka1WjY2yjGaejpaWpp6hn9V9VMOLSNS@c/UCmXkYGhoYERF5BpBNQP5IGhAUgIJAFig@TBygzAAlwGEAmwAIwEK4Arges0BAA" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Outputs unstable positions on separate lines but link is to test suite that joins on commas for convenience. Explanation: The skyscraper is wrapped in <code>0</code>s for convenience, then <code>I</code> command automatically lists the positions of the matches, while the <code>v</code> modifier allows the matches to overlap, thus avoiding forward lookahead, so it just remains to match the unstable positions, starting at the now previous character, which is at the desired position.</p>
</div>
<div id="pu6" class="pu"><h1>Uiua, 43 chars</h1>
<pre><code>⊚↥⊃(≡(⨬(¬◿2/+|/↥⌕2|0)⊸⊡1)◫3↻1⊂0_0|↧◿2⇡⧻⤙=2)
</code></pre>
<p><a href="https://uiua.org/pad?src=0_13_0__YSDihpAgewogIDFfMF8xCiAgMl8wXzFfMV8wXzIKICAxXzBfMV8yCiAgwqQwCiAgMl8wXzFfMF8xXzBfMV8wXzBfMF8yCiAgMV8xXzFfMF8yXzBfMV8wXzBfMV8wXzIKICAyXzBfMV8xXzBfMF8xXzBfMl8wXzEKICAwXzFfMV8wXzJfMF8xXzFfMV8wXzBfMV8xXzFfMV8wXzBfMV8xXzEKICAyXzBfMV8xXzFfMV8wXzBfMV8wXzJfMF8xXzFfMV8wXzJfMF8xXzBfMF8xXzEKfQpmIOKGkCDiiprihqXiioMo4omhKOKorCjCrOKXvzIvK3wv4oal4oyVMnwwKeKKuOKKoTEp4perM-KGuzHiioIwXzB84oan4pe_MuKHoeKnu-KkmT0yKQrijZpmIGEK" rel="nofollow noreferrer">Pad Link</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276269/">276269</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




