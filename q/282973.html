<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282973</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>109</td><td>Python 3</td><td>250806T200922Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282992#282992">Jonathan</a></td></tr>
<tr d-ix="1"><td>087</td><td>JavaScript ES6</td><td>250806T103734Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282974#282974">Arnauld</a></td></tr>
<tr d-ix="2"><td>177</td><td>Python3</td><td>250806T184230Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282991#282991">Ajax1234</a></td></tr>
<tr d-ix="3"><td>911</td><td>Brachylog</td><td>250806T171826Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282987#282987">DLosc</a></td></tr>
<tr d-ix="4"><td>010</td><td>Jelly</td><td>250806T165726Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282984#282984">Jonathan</a></td></tr>
<tr d-ix="5"><td>037</td><td>Charcoal</td><td>250806T165346Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282983#282983">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3</a>, 109 bytes</h1>
<p><sup>I won't be surprised if we can make do without <code>import</code>ing in fewer bytes</sup></p>

<pre class="lang-python prettyprint-override"><code>from itertools import*
f=lambda d:len(d)and max(f(d[1:]),f(d[:-1]),*{len({*p})for p in product(*d)}&amp;{len(d)})
</code></pre>
<p><strong><a href="https://tio.run/##nVJNb4QgFLz7K8geKhh72PRmsv0jrgd2ASUqzyDNdmv87dZXpGq/DjUhDvNmBh7Q3V0F5mmalIWWaCetA2h6otsOrEsidWp4exGciKyRhgrGjSAtf6WKivyYFSxFkD0eZ5QMKBmSbmQKLOmINqSzIF6ujiaCjQ@DjxjZhHUne4cSGpE8L1KyjiJFKhZQxgHX3JTcAsQpiWvgDY9RucCZe5MXu@M8DK4Qo3RfoVyAqeUdUQW2lwiucPMmz3xA5HYa7ry7xF@pLVdKbl1LDnp428@n@bXoA0Lxz5DPHXyPCO3coFG@vDZW/ocIuT8Kl037xTZ3s/bTaDBxuD4f8Cvar79BczLLIjJ/ndXGUXUY8ImMZ3N6JoOiOGHz7MCmdw" rel="nofollow noreferrer" title="Python 3 (pre-release) – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre class="lang-python prettyprint-override"><code>from itertools import* # get access to the `product` function
f=lambda d:            # f is a function of d - f(d):
  len(d)               #   get the length of d
  and                  #   logical AND (short-circuits if d = [], returning 0)
    max(...)           #   maximum of:
      f(d[1:])         #     a) call f with a beheaded d
      f(d[:-1])        #     b) call f with a betailed d
      *                #     c...) unpacked:
            &amp;          #        intersection of:
       {...}           #          1. set of:
       for p in        #               for each p in:
         product(*d)   #                 the Cartesian product of d's animal lists:
           len({*p})   #                   distinct animal count in p
             {len(d)}  #          2. singleton set of the length of d
</code></pre>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), 87 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=([a=[],...b],o=f,n=0)=&gt;Math.max(n,b+b&amp;&amp;f(b),...a.map(s=&gt;o[s]||f(b,{...o,[s]:1},n+1)))
</code></pre>
<p><a href="https://tio.run/##fVLLTsMwELz3K3KqHdWkLSAOIPfGkS@wfNikdhKaeis7ojzKtxcnjmlDASmKZ2dn9hHnGV7AFbbetVcG1@p41JwK4EKyLMtyyZBrZvgi5asnaKtsC6/UsHyWT6ea5mknAk/uqOMrFE4eDp5mH55G5sP75Sczs2WapscHMUkSIcgaSyIlS@bzZNkzksUnsIug24ApwSISRjYIDRCfFQNk5F3ldkQFGD1DqZtQSteu8p41mo1686BC65Q/C9x7nxjiDnXMWR7a3lb6d1lb0Fqd6VlUw9a1yo4zvTNm/nbHnj@9w/x3Yf49NrqXfC9Shn3/jUfhUJZdaMKkoUNoenu6p7hIU6Mh4ZKC/3cw6nsCoex1KHv6prH7xSmDXE4yjfYRiopCwldJgcZho7IGS6opdP/UFw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (           // f is a recursive function taking:
  [             //
    a = [],     //   a[] = next list of animals (empty by default)
    ...b        //   b[] = array of remaining lists
  ],            //
  o = f,        //   o = object to store selected animals
  n = 0         //   n = number of selected animals
) =&gt;            //
Math.max(       // get the maximum of:
  n,            //   the current value of n
  b + b &amp;&amp;      //   if b[] is not empty:
    f(b),       //     the result of a recursive call with b[]
                //     (previous values of o and n are discarded)
  ...a.map(s =&gt; //   for each animal s in a[]:
    o[s] ||     //     abort if this animal was already selected (*)
    f(          //     otherwise, do a recursive call:
      b,        //       pass b[]
      {         //       build a new object with:
        ...o,   //         the content of o
        [s]: 1  //         a new entry with key s and value 1
      },        //
      n + 1     //       increment n
    )           //     end of recursive call
  )             //   end of map()
)               // end of Math.max()
</code></pre>
<p><em><sub>(*) We return 1 if we abort. This is safe because reaching that part of the code means that there's at least one non-empty list of animals and the answer is at least 1.</sub></em></p>
</div>
<div id="pu2" class="pu"><h1>Python3, 177 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(o):
 q,r=[(o[i:],[])for i in range(len(o))],[0]
 for o,m in q:
  if o and(c:=[j for j in o[0]if j not in m]):q+=[(o[1:],m+[j])for j in c]
  else:r+=[len(m)]
 return max(r)
</code></pre>
<p><a href="https://tio.run/##fU/LbsMgELz7K7gZFA6teqks5UsQB5KAjR9svKZK0593FzuO4/RxAGZ3ZnbY8zVWEN7ezziOJ@uY4yCKjPUS94qD8oWWSgsHyDzzgaEJpeWtDSQTRL3ojCUSZJfonqzMOwbMhBM/FntVT3SdSCA1cTULEFPdaVH0uynmlWK6narnpEl9pMnMtoMtkDQpsRPUQhs/kLzmk6MYz@hD5I4rpSVbjxYiW6m8oU8bBMhl3oBpTZ5ENyjzL3vATWuGi@d5mPNDRa4ThMZeCVSAg6X3CBdyqludUOo88CZOtpLu0qNxzj7o5aI23RAtbpnJuTB/u5fMZ6/WMtvucIHWTbL7MuW89b/1pryNlj8082/nBP2Uuxpl3noIyXAf8TvYRK8gTR6/AQ" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, <s>10</s> 9 (or 11?) bytes</h1>
<pre><code>{s∋ᵐ≠l}ᶠ⌉
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7r4UUf3w60THnUuyKl9uG3Bo57O//@jo5WyE/PSE4vy85V0lLLzE3MSlWJ1FKKhTB2lqtSkIhQhCBOmJzb2fwQA" rel="nofollow noreferrer">Try it online!</a></p>
<p>In the corner case where we never see an animal on any day, this program fails instead of returning 0. I would argue that's a reasonable behavior, but if it needs to output 0, here is an 11-byte solution:</p>
<pre><code>{s∋ᵐ≠l}ᶠ,0⌉
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7r4UUf3w60THnUuyKl9uG2BjsGjns7//6OjY3UUEDj2fwQA" rel="nofollow noreferrer">Try it online!</a></p>
<h3>Explanation</h3>
<p>Brachylog's logic-based paradigm is good for this kind of challenge. Unfortunately, the &quot;contiguous sublist&quot; builtin <code>s</code> doesn't try sublists in order of length but in order of initial index, so we need a workaround.</p>
<pre><code>{s∋ᵐ≠l}ᶠ⌉
{     }ᶠ   List all possible outputs to the following nested predicate:
 s           Contiguous sublist of the input
  ∋ᵐ         Take some element from each element of that list
    ≠        The result must have no two elements that are equal
     l       Take the length
        ⌉  Maximum
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ẆŒpQƑƇ$ƇẈṪ
</code></pre>
<p>A monadic Link that accepts a list of lists of animals and yields the maximal number of contiguous days during which one could reference a unique animal from each day's observation.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hrrajkwoCj0081q5yrP3hro6HO1f9//8/Olo9OzEvPbEoP19dR0E9Oz8xJ1E9VkchGsoEilWlJhWhiEGYMF2xsQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##nVFLDoIwEN17ChYm3XAZ1w2LKqUglTGFhODShbjVYxgvIFsj98CLVJoy4aPGxE3nzZt5rzOZNZey0LqpDo/zdlGf6nJel011bG4XfS@f@6vWlFLPnTnO@DWBUuKDIIhjlgimAIjrkBiYZMT2dknL7vhSTVhMUItmQZSGRuJDEvPCoBBUyg1YQY4yy3WJ4Ud9LLMOwgQRKRYEfKzs3IyKbdKMq/eyNcHyD6PBJJ@McLkcZIAN/aLifwr9vzZ3a9iPB7frN5QRJGR4YmvzA0/nGeE28V4" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<pre><code>ẆŒpQƑƇ$ƇẈṪ - Link: DailyObservations
Ẇ          - contiguous sublists of {DailyObservations} -&gt; Streaks (from shortest to longest)
       Ƈ   - keep those {Streaks} for which:
      $    -   last two links as a monad - f(Streak):
 Œp        -     Cartesian product of {Streak}'s items
     Ƈ     -     keep those for which:
    Ƒ      -       is invariant under?:
   Q       -         deduplicate
        Ẉ  - length of each of the {remaining Streaks}
         Ṫ - tail -&gt; length of longest remaining streak (or zero if none remain)
</code></pre>
<hr />
<p>Note: <code>ẈṪ</code> rather than <code>ṪL</code> because tailing an empty list, as <code>remaining Streaks</code> becomes when no animals are seen on any day, yields the integer <code>0</code>, and integers have length <code>1</code>)</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 37 bytes</h1>
<pre><code>Ｆθ«≔ΣＥ∨υ⟦υ⟧Ｅι⊞ＯΦκ›ν⌕κμμυＪ⌈⊞ＯＥυＬκⅈ⁰»Ｉⅈ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bU_LasMwEDzbXyF80QoUyDGQUyikUFpiSA4FoYPq-CFsS64eIVDyJbnkkJB-Qf_Ff1Mp6aUQWHZnZ5kZ9vhdNMIUWnSn08W7ajIbfyptEHwS9JUmC2tlrWDte3gTA6wMeIqY54SiuEuKcm-b1VAa4bSBpexcaaCl6NmUIkJF0VKqbaR6Qsi9h-HJPE1efD9sdHDeyz4k_LOK9iHrtVS1a6CNmne4SadBekhzI5WDJ2Ed3Pj52X4U9u-HK8smuy7jY84Yw1tdY4oL4ULvpFaYUxYKV9I2-DGIkgcXzu_-vw" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｆθ«
</code></pre>
<p>Loop over the input list of lists of animals.</p>
<pre><code>≔ΣＥ∨υ⟦υ⟧Ｅι⊞ＯΦκ›ν⌕κμμυ
</code></pre>
<p>For each streak so far (or an empty streak if there are none; this happens on the first day and on the day after seeing no animals) and for each animal, calculate the streak that ends in that animal, starting from the animal after its previous appearance (if any; if this is a new animal then its index will be <code>-1</code> and all previous animals are kept).</p>
<pre><code>Ｊ⌈⊞ＯＥυＬκⅈ⁰
</code></pre>
<p>Keep track of the length of the longest streak found (if any).</p>
<pre><code>»Ｉⅈ
</code></pre>
<p>Output the length of the longest streak.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282973/">282973</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




