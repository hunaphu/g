<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282973</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>017</td><td>05AB1E</td><td>250814T091306Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283087#283087">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>081</td><td>Dyalog APL</td><td>250811T175319Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283066#283066">Aaron</a></td></tr>
<tr d-ix="2"><td>031</td><td>Uiua</td><td>250811T003151Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283060#283060">nyxbird</a></td></tr>
<tr d-ix="3"><td>106</td><td>Prolog SWI</td><td>250809T022650Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283042#283042">0							</a></td></tr>
<tr d-ix="4"><td>083</td><td>JavaScript ES6</td><td>250806T103734Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282974#282974">Arnauld</a></td></tr>
<tr d-ix="5"><td>094</td><td>Python 3</td><td>250807T053958Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283007#283007">tata</a></td></tr>
<tr d-ix="6"><td>006</td><td>Nekomata</td><td>250807T021100Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/283005#283005">alephalp</a></td></tr>
<tr d-ix="7"><td>109</td><td>Python 3</td><td>250806T200922Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282992#282992">Jonathan</a></td></tr>
<tr d-ix="8"><td>177</td><td>Python3</td><td>250806T184230Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282991#282991">Ajax1234</a></td></tr>
<tr d-ix="9"><td>911</td><td>Brachylog</td><td>250806T171826Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282987#282987">DLosc</a></td></tr>
<tr d-ix="10"><td>010</td><td>Jelly</td><td>250806T165726Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282984#282984">Jonathan</a></td></tr>
<tr d-ix="11"><td>037</td><td>Charcoal</td><td>250806T165346Z</td><td><a href="https://codegolf.stackexchange.com/questions/282973/longest-streak-of-new-animal-every-day/282983#282983">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÃÅ’Îµ.Â«Ã¢ÎµÂ¸ËœÃÃ™Qsg*]M
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//cN/RSee26h1afXjRua2Hdpyec3jC4ZmBxelasb7//0dHK2Un5qUnFuXnK@koZecn5iQqxepEQ1k6SlWpSUXIImAWTENsLAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXSf4Pio5PObdU7tPrwonNbD@04PefwhMMzA4vTtWJ9/yvpheloxvyPjo6O1YGhWB2F6Gil7MS89MSi/HwlHaXs/MScRCWgFJSlo1SVmlSELAJmwTRADUjLLM4AKk3Jz8tOrQQyMvKLilOBdHJ@OVg9hA9igUSQ5BNLwNrSgWR6ZlFiWloqknodmOrE3OKS1CJUGbBOmAxu3TA70fVCHV6en5MGloP7IJ00LtQ0TDUQB0LMh9iFUK6jlJOZn6cEiQOIRuwMFAsRjNjY/7q6efm6OYlVlQA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Ã             # Push 0 and the input-list
 Å’            # Get all sublists of this input-list
  Îµ           # Map over each sublist:
   .Â«         #  Reduce it by:
     Ã¢        #   Cartesian product of two lists
      Îµ       #  Inner map over each resulting list:
       Â¸      #   Wrap it into a list (work-around for singleton values)
        Ëœ     #   Flatten it to a list of strings
       Ã      #   Triplicate the current list of strings
        Ã™     #   Uniquify the top copy
         Q    #   Check that it equals to the other copy (aka, all values are unique)
          s   #   Swap to get the list of strings
           g  #   Pop and push its length
            * #   Multiply it to the unique-check
  ]           # Close the nested maps
   M          # Push the largest value on the stack, including inside (nested) lists
              # (which is output implicitly as result)
</code></pre>
<p>Minor note: there seems to be a bug in 05AB1E, because <code>...0M</code> instead of <code>Ã...M</code> should have worked the same for edge test-case <code>[[],[],[],[]]</code>, but results in an empty string instead: <a href="https://tio.run/##yy9OTMpM/f//6KRzW/UOrT686NzWQztOzzk84fDMwOJ0rVgD3///o6NjdWAoFgA" rel="nofollow noreferrer">try it online</a>..</p>
</div>
<div id="pu1" class="pu"><h1>Dyalog APL, 81 chars</h1>
<pre><code>{0âŒˆâŒˆ/+/Â¨âŠƒ,/{âµâˆ˜{âŠƒâŠ†â¨â‰ âµâ†“âº}Â¨Â¯1+â³â‰¢âµ}Â¨âŠƒ,/{0=â‰¢âµ:0â‹„âŠƒ{,âºâˆ˜.,âµ}/âµ}Â¨{âµâŠ†â¨0â‰ â‰¢Â¨âµ}(âŠ‚âˆªâŠƒ,/âµ)â³Â¨âµ}Â­â¡â€‹â€â€âªâ¡âªâ âªâ¢â¡â¡â£âªâ€â â€âªâ¡âªâ âªâ¢â¡â¡â¤âªâ€â â€âªâ¡âªâ âªâ¢â¡â¢â¡âªâ€â â€âªâ¡âªâ âªâ¢â¡â¢â¢âªâ€â â€âªâ¡âªâ âªâ¢â¡â¢â£âªâ€â â€âªâ¡âªâ âªâ¢â¡â¢â¤âªâ€â â€âªâ¡âªâ âªâ¢â¡â£â¡âªâ€â â€âªâ¡âªâ âªâ¢â¡â£â¢âªâ€â â€âªâ¡âªâ âªâ¢â¡â£â£âªâ€â â€âªâ¡âªâ âªâ¢â¡â£â¤âªâ€â â€âªâ¡âªâ âªâ¢â¡â¤â¡âªâ€â â€âªâ¡âªâ âªâ¢â¡â¤â¢âªâ€â€â€‹â¡â â¡â€Œâ¢â€‹â€â€âªâ¡âªâ âªâ¤â£â¡âªâ€â â€âªâ¡âªâ âªâ¤â£â¢âªâ€â â€âªâ¡âªâ âªâ¤â£â£âªâ€â â€âªâ¡âªâ âªâ¤â£â¤âªâ€â â€âªâ¡âªâ âªâ¤â¤â¡âªâ€â â€âªâ¡âªâ âªâ¤â¤â¢âªâ€â â€âªâ¡âªâ âªâ¤â¤â£âªâ€â â€âªâ¡âªâ âªâ¤â¤â¤âªâ€â â€âªâ¡âªâ âªâ¢â¡â¡â¡âªâ€â â€âªâ¡âªâ âªâ¢â¡â¡â¢âªâ€â€â€‹â¡â â¡â€Œâ£â€‹â€â€âªâ¡âªâ âªâ£â£â¤âªâ€â â€âªâ¡âªâ âªâ£â¤â¡âªâ€â âªâªâ âªâªâ âªâªâ âªâªâ âªâªâ âªâªâ â€âªâ¡âªâ âªâ¤â¡â¤âªâ€â â€âªâ¡âªâ âªâ¤â¢â¡âªâ€â â€âªâ¡âªâ âªâ¤â¢â¢âªâ€â â€âªâ¡âªâ âªâ¤â¢â£âªâ€â â€âªâ¡âªâ âªâ¤â¢â¤âªâ€â€â€‹â¡â â¡â€Œâ¤â€‹â€â€âªâ¡âªâ âªâ£â¤â¢âªâ€â â€âªâ¡âªâ âªâ£â¤â£âªâ€â â€âªâ¡âªâ âªâ£â¤â¤âªâ€â â€âªâ¡âªâ âªâ¤â¡â¡âªâ€â â€âªâ¡âªâ âªâ¤â¡â¢âªâ€â â€âªâ¡âªâ âªâ¤â¡â£âªâ€â€â€‹â¡â â¡â€Œâ¢â¡â€‹â€â€âªâ¡âªâ âªâ£â¢â¡âªâ€â â€âªâ¡âªâ âªâ£â¢â¢âªâ€â â€âªâ¡âªâ âªâ£â¢â£âªâ€â â€âªâ¡âªâ âªâ£â¢â¤âªâ€â â€âªâ¡âªâ âªâ£â£â¡âªâ€â â€âªâ¡âªâ âªâ£â£â¢âªâ€â€â€‹â¡â â¡â€Œâ¢â¢â€‹â€â€âªâ¡âªâ âªâ£â¡â¡âªâ€â â€âªâ¡âªâ âªâ£â¡â¢âªâ€â â€âªâ¡âªâ âªâ£â¡â£âªâ€â€â€‹â¡â â¡â€Œâ¢â£â€‹â€â€âªâ¡âªâ âªâ£â¤âªâ€â â€âªâ¡âªâ âªâ¢â¤â£âªâ€â â€âªâ¡âªâ âªâ¢â¤â¤âªâ€â€â€‹â¡â â¡â€Œâ¢â¤â€‹â€â€âªâ¡âªâ âªâ¢â£â¡âªâ€â â€âªâ¡âªâ âªâ¢â£â¢âªâ€â â€âªâ¡âªâ âªâ¢â£â£âªâ€â â€âªâ¡âªâ âªâ¢â£â¤âªâ€â â€âªâ¡âªâ âªâ¢â¤â¡âªâ€â â€âªâ¡âªâ âªâ¢â¤â¢âªâ€â€â€‹â¡â â¡â€Œâ£â¡â€‹â€â€âªâ¡âªâ âªâ¤â¡âªâ€â â€âªâ¡âªâ âªâ¤â¢âªâ€â â€âªâ¡âªâ âªâ¤â£âªâ€â âªâªâ â€âªâ¡âªâ âªâ¢â¢â£âªâ€â â€âªâ¡âªâ âªâ¢â¢â¤âªâ€â€â€‹â¡â â¡â€Œâ£â¢â€‹â€â€âªâ¡âªâ âªâ¢â¡â¤âªâ€â â€âªâ¡âªâ âªâ¢â¢â¡âªâ€â â€âªâ¡âªâ âªâ¢â¢â¢âªâ€â€â€‹â¡â â¡â€Œâ£â£â€‹â€â€âªâ¡âªâ âªâ¤â¤âªâ€â â€âªâ¡âªâ âªâ¢â¡â¡âªâ€â â€âªâ¡âªâ âªâ¢â¡â¢âªâ€â â€âªâ¡âªâ âªâ¢â¡â£âªâ€â€â€‹â¡â â¡â€Œâ£â¤â€‹â€â€âªâ¡âªâ âªâ£â¡âªâ€â â€âªâ¡âªâ âªâ£â¢âªâ€â â€âªâ¡âªâ âªâ£â£âªâ€â€â€‹â¡â â¡â€Œâ¤â¡â€‹â€â€âªâ¡âªâ âªâ¢â¢âªâ€â â€âªâ¡âªâ âªâ¢â£âªâ€â â€âªâ¡âªâ âªâ¢â¤âªâ€â€â€‹â¡â â¡â€Œâ¤â¢â€‹â€â€âªâ¡âªâ âªâ¤âªâ€â â€âªâ¡âªâ âªâ¢â¡âªâ€â€â€‹â¡â â¡â€Œâ¤â£â€‹â€â€âªâ¡âªâ âªâ¢âªâ€â â€âªâ¡âªâ âªâ£âªâ€â€â€‹â¡â â¡â€ŒÂ­
                                                                  (âŠ‚âˆªâŠƒ,/âµ)â³Â¨âµ}  # â€â¡Find the index of each element of the sublists against a uniquified flattened list
                                                        {âµâŠ†â¨0â‰ â‰¢Â¨âµ}              # â€â¢Partition the input into sections not containing empty list
                                           âŠƒ{      }/âµ}Â¨                        # â€â£For each of the sections, reduce with this function
                                             ,âºâˆ˜.,âµ                             # â€â¤Combine every element of the left with every element of the right.  This gives all the possible choices of selection
                                    0=â‰¢âµ:0                                      # â€â¢â¡Unless the input was empty in which case return 0
                                âŠƒ,/                                             # â€â¢â¢Flatten that a bit
           {                  }Â¨                                                # â€â¢â£Then for each of these possible selections
                        Â¯1+â³â‰¢âµ                                                  # â€â¢â¤Generate 0..length-1
            âµâˆ˜{       }Â¨                                                        # â€â£â¡and combine with the input
                   âµâ†“âº                                                          # â€â£â¢Dropping right many elements from left; this lets the streak start from anywhere in the list
               âŠƒâŠ†â¨â‰                                                              # â€â£â£Partition over its own nub sieve to break possible streaks up
        âŠƒ,/                                                                     # â€â£â¤Flatten
     +/Â¨                                                                        # â€â¤â¡Sum each of them to get the streak length
   âŒˆ/                                                                           # â€â¤â¢Find the max of all streak lengths
 0âŒˆ                                                                             # â€â¤â£and max with zero in case the previous was empty
ğŸ’
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
<p>Thanks to @Mat_rdv for suggestions and noting where the previous solution failed.  I did not both golfing this down again afterwards because @Mat_rdv's answer in the comment is vastly superior at 52 chars.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 31 bytes</h1>
<pre><code>â¬š0/â†¥âŠœ(/â†¥â™­â‰¡â§…(âŠ—1â§†â‡Œ)/(â™­â‚‚â—‡âŠâŠ‚))Â±âŠ¸â‰¡â—‡â§»
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_17_0-dev_2__IyBFeHBlcmltZW50YWwhCmYg4oaQIOKsmjAv4oal4oqcKC_ihqXima3iiaHip4Uo4oqXMeKnhuKHjCkvKOKZreKCguKXh-KKnuKKgikpwrHiirjiiaHil4fip7sKdCDihpAg4o2k4qSZ4omN4oqZKGbCsGpzb24pCnQgMCAkIFtbXSwgW10sIFtdLCBbXV0KdCAzICQgW1sna2FuZ2Fyb28nLCdrb2FsYSddLCBbJ2tvYWxhJywnemVicmEnXSwgWydrb2FsYSddLCBbJ2thbmdhcm9vJ11dCnQgNiAkIFtbJ2Zpc2gnLCdkb25rZXknLCdob3JzZScsJ2NvdyddLFsnaG9yc2UnXSxbJ2NvdycsJ2hvcnNlJywnY2F0JywnZG9nJywnZ2lyYWZmZSddLFsnaG9yc2UnLCdjb3cnLCdoYW1zdGVyJ10sWydob3JzZScsJ2NhdCcsJ2hhbXN0ZXInLCdnaXJhZmZlJ10sWydob3JzZScsJ2NvdyddLFsnY293J10sWydob3JzZScsJ2NhdCddXQp0IDQgJCBbWyd3b2xmJ10sWydmaXNoJywnZG9nJ10sIFsnZmlzaCcsJ2RvZyddLCBbJ2Zpc2gnLCdkb2cnXSxbJ2Zpc2gnLCdkb2cnLCdjYXQnXSxbJ2Zpc2gnLCdkb2cnXSxbJ2NhdCcsJ3dvbGYnXV0KdCAyICQgW1snZG9nJywnY2F0JywnbGlvbiddLFtdLFsnZmlzaCddLFsnZmlzaCddLFsnZmlzaCddLFsnZG9nJ10sWydmaXNoJ10sWydmaXNoJ11dCg==" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>Â±âŠ¸â‰¡â—‡â§»      # find non-[] days
âŠœ(         # for each partition without []:
 /(â™­â‚‚â—‡âŠâŠ‚)  #   reduce by cartesian product
 â‰¡â§…(       #   for each prefix:
  âŠ—1â§†â‡Œ)   #     reverse, and find the first duplicate's index
 /â†¥â™­)       #   find the maximum across all
â¬š0/â†¥        # find the maximum (default to 0)
</code></pre>
<p>so many parentheses.....</p>
</div>
<div id="pu3" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 106 bytes</h1>
<pre><code>D-P-L:-D=[Y|R],(member(X,Y),\+member(X,P),R-[X|P]-L;R-[]-L);length(P,L).
D+M:-setof(L,D-[]-L,X),last(X,M).
</code></pre>
<p><a href="https://tio.run/##fY/LboMwEEX3@YrujMWYD0jURVu6IxLKisj1wmmNQRhc2UioVf6dGvMKfS3Ad3zvmRm/G620JLYr@z4mKUn2JL6n5@uJQVCL@iJMkMEZw0u4VCmGE6HZNWUkOTjlDnxQopFtEaSQ4GgXh8c9saLVeZBA7BOQYVDcto4/4qjvKWVwt34sfIAdpajijeRGawSo0lxxNLiTBPQpLmZzNcqZcV0efZe8tIWLv@mmEh9OFNpY4c5X3TmETvWghpsbn7cek@4vS8PzXNzkYU7z2rbCbB1Pzs7f9DzzO@tWf/Krd1rl3l3eIMdX/ltvyqkj/MiMS44TWBj7eSsASJW6GYIL@rvYjFwFC5@jLw" rel="nofollow noreferrer" title="Prolog (SWI) â€“ Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<h5>Ungolfed</h5>
<pre><code>streak(Log,Prev,Length) :-
  Log=[Day|Rest],
    ( member(Animal,Day), \+ member(Animal,Prev), streak(Rest,[Animal|Prev],Length);
      streak(Rest,[],Length)
    );
  length(Prev,Length).

max_streak(Log,Max) :- setof(Length,streak(Log,[],Length),Streaks), last(Streaks,Max).
</code></pre>
<p>The program defines two predicates. <code>max_streak/2</code> is the main predicate which has the list representing the animal log as its first argument and produces the output by unifying it with its second argument. The other predicate, <code>streak/3</code>, takes the animal log as its first argument, a list representing the previously recorded streak animals (initially <code>[]</code>) as its second argument, and the length of the possible streak as its third argument. It is important to note this length does not need to be that of the longest streak, so <code>streak([[dog,cat]],[],0)</code> is considered true, since, while suboptimal, a zero day streak is possible with that log of animals.</p>
<p><code>max_streak/2</code> works by using <code>setof\3</code> to create the sorted list <code>Streaks</code> of all values of <code>Length</code> that satisfy the predicate <code>streak(Log,[],Length)</code>, which will be a list of all possible lengths of streaks, sorted from least to greatest.
Then we produce the output by unifying <code>Max</code> with the last, and therefore greatest, element of <code>Streaks</code> using the <code>last/2</code> predicate.</p>
<p>In <code>streak/3</code> I make heavy use of Prolog's backtracking to briefly (and incredibly inefficiently) find possible streak lengths.
There are three branches that Prolog will check when <code>streak/3</code> is called.</p>
<h6>The first branch</h6>
<pre><code>Log=[Day|Rest], member(Animal,Day), \+ member(Animal,Prev), streak(Rest,[Animal|Prev],Length)
</code></pre>
<p>This branch gets the next day of the log and then attempts to find an animal in it that has not been previously used in the current streak.
If successful we add the animal to our streak and proceed onto checking the next day.
Note that, since we are finding all solutions to <code>streak/3</code>, Prolog's interpreter will end up attempting streaks with each possible animal in the log that was not already in the streak.</p>
<h6>The second branch</h6>
<pre><code>Log=[Day|Rest],streak(Rest,[],Length)
</code></pre>
<p>This branch throws out the current streak and starts a new streak with the remaining days.</p>
<h6>The third branch</h6>
<pre><code>length(Prev,Length)
</code></pre>
<p>The third branch forms the base case of the recursive predicate.
No matter what the input, it is always valid to not try to add any more days to the streak, at which point we can determine its length.</p>
<p>Because Prolog is finding all values of <code>Length</code> that satisfy <code>streak(Log,[],Length)</code> it will traverse the second and third branches of <code>streak/3</code> even when the first is satisfied. This ensures that the program considers all possible streaks.</p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (ES6), 83 bytes</h1>
<p><em>-4 thanks to <a href="https://codegolf.stackexchange.com/users/127096/tata">@tata</a></em></p>

<pre class="lang-javascript prettyprint-override"><code>f=([a,...b],o=f,n=0)=&gt;a?Math.max(n,f(b),...a.map(s=&gt;o[s]||f(b,{...o,[s]:1},n+1))):n
</code></pre>
<p><a href="https://tio.run/##fVLLTsMwELz3K3KzI0zaAuJQlHLiyBdYPmxTOwlNvZUdUR7l24ObjSmhgBTFs7Mz@4jzBM/gC1fv2kuLa911JucSRJZlKyUwN8LmszRfwv0jtFW2hRduheGr9KiAEO@4z5covTocAi3eA40ihIv5h7AX8zRNF7a7k5MkkZKtsWRKiWQ6TeY9o0R8iJ2RbgO2BIfIBNsgNMBCVg5QsDe9ciOKYPQMpa6plKl9FTxrtBv9GkCFzutwFrgPPjnER3RkvuWh7W1leJe1A2P0N72Iatj6VrtxpnfGzN/u2POnd5j/lubfY2N6ydciJe37bzwKh7LiTEOTUgdqenO6p7hIU6NldEnk/x2M@p4Alb2isqdvGrufnYrkapIZdA9QVBySfJkUaD02Omuw5IZD@Ku6Tw" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (             // f is a recursive function taking:
  [               //
    a,            //   a[] = next list of animals
    ...b          //   b[] = array of remaining lists
  ],              //
  o = f,          //   o = object to store selected animals
  n = 0           //   n = number of animals in o
) =&gt;              //
a ?               // if a[] is defined:
  Math.max(       //   get the maximum of:
    n,            //     the current value of n
    f(b),         //     the result of a recursive call with b[]
                  //     (previous values of o and n are discarded)
    ...a.map(s =&gt; //     for each animal s in a[]:
      o[s] ||     //       abort if this animal was already selected (*)
      f(          //       otherwise, do a recursive call:
        b,        //         pass b[]
        {         //         build a new object with:
          ...o,   //           the content of o
          [s]: 1  //           a new entry with key s and value 1
        },        //   
        n + 1     //         increment n
      )           //       end of recursive call
    )             //     end of map()
  )               //   end of Math.max()
:                 // else:
  n               //   return n
</code></pre>
<p><em><sub>(*) We return 1 if we abort. This is safe because reaching that part of the code means that there's at least one non-empty list of animals and the answer is at least 1.</sub></em></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 94 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda l,s=[]:max(map(len,s+[l and[f]*f(l[1:],[t+[a]for t in s+[[]]for a in{*l[0]}-{*t}])]))
</code></pre>
<p><a href="https://tio.run/##fVJNj8IgEL3zK0gvLcoad93swaT@EeQwKiiRQlPIuq7xt3eB2mr360B5b@a9mSGd@uwP1izaVpYaqs0OsKauZHxZwUdRQV1oYaibMo3B7JjkE1lo9rzklPkpAy5tgz1WBgcJ44lCoJeJZnN@fbpM/JUTTkjrhfNbcMLhEmdZhlCQU3w/HJUrPI/h/AhmD421Oc2PFjTkUXCDNP8Um2YU6mDv6QotUiGp3CE4dtYcxTmAg22cCPfWnoKL3XhEMfKQB59s@/DdqwakFA962quhcl4040xy9pm/3X3P795u@rc0/clqmQTDM/bdW//lI3orSn9oujm7Dqnla2p599BcK2uidnD/DkZd7yAVfUEo/OqZ842qCzJztVa@yNZmbTKC0LA6w2osEcaKYhFWJG6eeAdNse995SojJCjqRhlfyEKRshQURxDD7Rc" rel="noreferrer" title="Python 3 â€“ Try It Online">Try it online!</a></p>
<p>Alternate (same byte count):</p>
<pre class="lang-python prettyprint-override"><code>f=lambda l,s=[]:max(map(len,s+[l and[f]*f(l[1:],[t|{a}for t in s+[set()]for a in{*l[0]}-t])]))
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a>, 6 bytes</h1>
<pre><code>qáµ~Å¯#Ã…
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFZtJJurlLsgqWlJWm6FqsKH26dUHd0vfLh1iXFScnFUOEFtxj3R0fH6sBQLFd0tFJ2Yl56YlF-vpKOUnZ-Yk6iElAGytJRqkpNKkIWAbNgGiD60zKLM4AqU_LzslMrgYyM_KLiVCCdnF8OVg7hg1ggEST5xBKwtnQgmZ5ZlJiWloqkXgemOjG3uCS1CFUGrBMmg1s3zE50vRB3l-fnpIGl4B5IJ40LNQxTDcR9EPPBViFU6yjlZObnKUHCH6IPOwPFPgQjFhKRAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A port of <a href="https://codegolf.stackexchange.com/a/282987/9288">DLosc's Brachylog answer</a>. Non-determinism is very useful for this kind of challenge.</p>
<pre><code>qáµ~Å¯#Ã…
q           Find a contiguous subsequence of the input
 áµ          For each element in that subsequence
  ~             Choose an element from the list
   Å¯        Check that all elements in the result are unique
    #       Take the length
     Ã…      Find the maximum possible value of that length
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3</a>, 109 bytes</h1>
<p><sup>I won't be surprised if we can make do without <code>import</code>ing in fewer bytes</sup></p>

<pre class="lang-python prettyprint-override"><code>from itertools import*
f=lambda d:len(d)and max(f(d[1:]),f(d[:-1]),*{len({*p})for p in product(*d)}&amp;{len(d)})
</code></pre>
<p><strong><a href="https://tio.run/##nVJNb4QgFLz7K8geKhh72PRmsv0jrgd2ASUqzyDNdmv87dZXpGq/DjUhDvNmBh7Q3V0F5mmalIWWaCetA2h6otsOrEsidWp4exGciKyRhgrGjSAtf6WKivyYFSxFkD0eZ5QMKBmSbmQKLOmINqSzIF6ujiaCjQ@DjxjZhHUne4cSGpE8L1KyjiJFKhZQxgHX3JTcAsQpiWvgDY9RucCZe5MXu@M8DK4Qo3RfoVyAqeUdUQW2lwiucPMmz3xA5HYa7ry7xF@pLVdKbl1LDnp428@n@bXoA0Lxz5DPHXyPCO3coFG@vDZW/ocIuT8Kl037xTZ3s/bTaDBxuD4f8Cvar79BczLLIjJ/ndXGUXUY8ImMZ3N6JoOiOGHz7MCmdw" rel="nofollow noreferrer" title="Python 3 (pre-release) â€“ Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre class="lang-python prettyprint-override"><code>from itertools import* # get access to the `product` function
f=lambda d:            # f is a function of d - f(d):
  len(d)               #   get the length of d
    and                #     logical AND (short-circuits if d = [], returning 0)
  max(...)             #   maximum of:
    f(d[1:])           #     a) call f with a beheaded d
    f(d[:-1])          #     b) call f with a betailed d
    *                  #     c...) unpacked:
          &amp;            #        intersection of:
     {...}             #          1. set of:
     for p in          #               for each p in:
       product(*d)     #                 the Cartesian product of d's animal lists:
         len({*p})     #                   distinct animal count in p
           {len(d)}    #          2. singleton set of the length of d
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python3, 177 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(o):
 q,r=[(o[i:],[])for i in range(len(o))],[0]
 for o,m in q:
  if o and(c:=[j for j in o[0]if j not in m]):q+=[(o[1:],m+[j])for j in c]
  else:r+=[len(m)]
 return max(r)
</code></pre>
<p><a href="https://tio.run/##fU/LbsMgELz7K7gZFA6teqks5UsQB5KAjR9svKZK0593FzuO4/RxAGZ3ZnbY8zVWEN7ezziOJ@uY4yCKjPUS94qD8oWWSgsHyDzzgaEJpeWtDSQTRL3ojCUSZJfonqzMOwbMhBM/FntVT3SdSCA1cTULEFPdaVH0uynmlWK6narnpEl9pMnMtoMtkDQpsRPUQhs/kLzmk6MYz@hD5I4rpSVbjxYiW6m8oU8bBMhl3oBpTZ5ENyjzL3vATWuGi@d5mPNDRa4ThMZeCVSAg6X3CBdyqludUOo88CZOtpLu0qNxzj7o5aI23RAtbpnJuTB/u5fMZ6/WMtvucIHWTbL7MuW89b/1pryNlj8082/nBP2Uuxpl3noIyXAf8TvYRK8gTR6/AQ" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, <s>10</s> 9 (or 11?) bytes</h1>
<pre><code>{sâˆ‹áµâ‰ l}á¶ âŒ‰
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7r4UUf3w60THnUuyKl9uG3Bo57O//@jo5WyE/PSE4vy85V0lLLzE3MSlWJ1FKKhTB2lqtSkIhQhCBOmJzb2fwQA" rel="nofollow noreferrer">Try it online!</a></p>
<p>In the corner case where we never see an animal on any day, this program fails instead of returning 0. I would argue that's a reasonable behavior, but if it needs to output 0, here is an 11-byte solution:</p>
<pre><code>{sâˆ‹áµâ‰ l}á¶ ,0âŒ‰
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7r4UUf3w60THnUuyKl9uG2BjsGjns7//6OjY3UUEDj2fwQA" rel="nofollow noreferrer">Try it online!</a></p>
<h3>Explanation</h3>
<p>Brachylog's logic-based paradigm is good for this kind of challenge. Unfortunately, the &quot;contiguous sublist&quot; builtin <code>s</code> doesn't try sublists in order of length but in order of initial index, so we need a workaround.</p>
<pre><code>{sâˆ‹áµâ‰ l}á¶ âŒ‰
{     }á¶    List all possible outputs to the following nested predicate:
 s           Contiguous sublist of the input
  âˆ‹áµ         Take some element from each element of that list
    â‰         The result must have no two elements that are equal
     l       Take the length
        âŒ‰  Maximum
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>áº†Å’pQÆ‘Æ‡$Æ‡áºˆá¹ª
</code></pre>
<p>A monadic Link that accepts a list of lists of animals and yields the maximal number of contiguous days during which one could reference a unique animal from each day's observation.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hrrajkwoCj0081q5yrP3hro6HO1f9//8/Olo9OzEvPbEoP19dR0E9Oz8xJ1E9VkchGsoEilWlJhWhiEGYMF2xsQA" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##nVFLDoIwEN17ChYm3XAZ1w2LKqUglTGFhODShbjVYxgvIFsj98CLVJoy4aPGxE3nzZt5rzOZNZey0LqpDo/zdlGf6nJel011bG4XfS@f@6vWlFLPnTnO@DWBUuKDIIhjlgimAIjrkBiYZMT2dknL7vhSTVhMUItmQZSGRuJDEvPCoBBUyg1YQY4yy3WJ4Ud9LLMOwgQRKRYEfKzs3IyKbdKMq/eyNcHyD6PBJJ@McLkcZIAN/aLifwr9vzZ3a9iPB7frN5QRJGR4YmvzA0/nGeE28V4" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">test-suite</a>.</p>
<h4>How?</h4>
<pre><code>áº†Å’pQÆ‘Æ‡$Æ‡áºˆá¹ª - Link: DailyObservations
áº†          - contiguous sublists of {DailyObservations} -&gt; Streaks (from shortest to longest)
       Æ‡   - keep those {Streaks} for which:
      $    -   last two links as a monad - f(Streak):
 Å’p        -     Cartesian product of {Streak}'s items
     Æ‡     -     keep those for which:
    Æ‘      -       is invariant under?:
   Q       -         deduplicate
        áºˆ  - length of each of the {remaining Streaks}
         á¹ª - tail -&gt; length of longest remaining streak (or zero if none remain)
</code></pre>
<hr />
<p>Note: <code>áºˆá¹ª</code> rather than <code>á¹ªL</code> because tailing an empty list, as <code>remaining Streaks</code> becomes when no animals are seen on any day, yields the integer <code>0</code>, and integers have length <code>1</code>)</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 37 bytes</h1>
<pre><code>ï¼¦Î¸Â«â‰”Î£ï¼¥âˆ¨Ï…âŸ¦Ï…âŸ§ï¼¥Î¹âŠï¼¯Î¦Îºâ€ºÎ½âŒ•ÎºÎ¼Î¼Ï…ï¼ªâŒˆâŠï¼¯ï¼¥Ï…ï¼¬Îºâ…ˆâ°Â»ï¼©â…ˆ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bU_LasMwEDzbXyF80QoUyDGQUyikUFpiSA4FoYPq-CFsS64eIVDyJbnkkJB-Qf_Ff1Mp6aUQWHZnZ5kZ9vhdNMIUWnSn08W7ajIbfyptEHwS9JUmC2tlrWDte3gTA6wMeIqY54SiuEuKcm-b1VAa4bSBpexcaaCl6NmUIkJF0VKqbaR6Qsi9h-HJPE1efD9sdHDeyz4k_LOK9iHrtVS1a6CNmne4SadBekhzI5WDJ2Ed3Pj52X4U9u-HK8smuy7jY84Yw1tdY4oL4ULvpFaYUxYKV9I2-DGIkgcXzu_-vw" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ï¼¦Î¸Â«
</code></pre>
<p>Loop over the input list of lists of animals.</p>
<pre><code>â‰”Î£ï¼¥âˆ¨Ï…âŸ¦Ï…âŸ§ï¼¥Î¹âŠï¼¯Î¦Îºâ€ºÎ½âŒ•ÎºÎ¼Î¼Ï…
</code></pre>
<p>For each streak so far (or an empty streak if there are none; this happens on the first day and on the day after seeing no animals) and for each animal, calculate the streak that ends in that animal, starting from the animal after its previous appearance (if any; if this is a new animal then its index will be <code>-1</code> and all previous animals are kept).</p>
<pre><code>ï¼ªâŒˆâŠï¼¯ï¼¥Ï…ï¼¬Îºâ…ˆâ°
</code></pre>
<p>Keep track of the length of the longest streak found (if any).</p>
<pre><code>Â»ï¼©â…ˆ
</code></pre>
<p>Output the length of the longest streak.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282973/">282973</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




