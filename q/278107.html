<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::278107</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>097</td><td>JavaScript V8</td><td>250207T132022Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278124#278124">Arnauld</a></td></tr>
<tr d-ix="1"><td>082</td><td>Python 3.8 prerelease</td><td>250207T001041Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278110#278110">Lucenapo</a></td></tr>
<tr d-ix="2"><td>017</td><td>05AB1E</td><td>250207T083712Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278117#278117">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>021</td><td>MATL</td><td>250206T224215Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278108#278108">Luis Men</a></td></tr>
<tr d-ix="4"><td>021</td><td>K ngn/k</td><td>250207T113526Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278122#278122">att</a></td></tr>
<tr d-ix="5"><td>035</td><td>Charcoal</td><td>250207T114919Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278123#278123">Neil</a></td></tr>
<tr d-ix="6"><td>163</td><td>Maple</td><td>250207T055738Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278116#278116">dharr</a></td></tr>
<tr d-ix="7"><td>124</td><td>Perl 5 n</td><td>250206T225725Z</td><td><a href="https://codegolf.stackexchange.com/questions/278107/unap-peel-ing-permutations/278109#278109">Xcali</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, 97 bytes</h1>
<p>Expects <code>(h)(w)</code> and prints the output using option 1.</p>

<pre class="lang-none prettyprint-override"><code>h=&gt;w=&gt;{for(s=j=1,i=w*h;i--;print(n+=-z|w))j=j-1||(q=s&gt;&gt;2,z=s++%4&lt;2,s&amp;1?0:n=z-~q*w-q,z?w:h-1)-q*2}
</code></pre>
<p><a href="https://tio.run/##bVJbrtowEP1nFSN0WxxwEDZ5AKnhq6uIIl1EQ5PoKgFCbyogXUGl/vSz3UfXczfQJdAZO1EAVUpsZ@bMOWfiydav63JzSHdH@3V23apropaVWp63xYGVKlOCp6oaJkFq28HukOZHlo@UfbpUlpWpzBaXC9urcrmU/KTK0eid80Hy8r1YTRa5Otnf9sPK3vPTqloktrDs/VDWV00DCnJQSzjE5Xj3pUxYbgW9sAcQguD04A4RRLwNTSmEi@S3iWmL1Ylpl5A6oHdT7NzlHMo5vCXk4HKYcfA5eB3OeeRwNQLDHqI7nH/vTiMwJib4kkFEi7kuwlUQBIkEykmyPWnFBTWOpcK/68/nRsLTuFvPs4bJ6ZhIh5iF3@hOG0Vh/Mw7aldThv/h9Zs65JJuU09uCYMckuL0jTjp3XAbR07jhLJEKY077cbt5I1s@Kjd8nlNT17zH13DSn4ePczbq9NGfSOpf@TcmCYbuiF9Z72oN8bp/rjeJIyFkHCoOMRfd/HmGH@CyKKpPKNFnEwc0jAK8LxlicUqi46bIi@Ll3j8Unxmz4l6Oic1MuBe1Qt4OtM8Z0Wasz70rdoEYAT9PijVqaxg8PfPj7dfP3EdwAIGb7@/D@pnFKit4PoP" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-none prettyprint-override"><code>h =&gt;               // outer function taking the height h
w =&gt; {             // inner function taking the width w
  for(             // main loop:
    s =            //   s = current step (4 steps per revolution)
    j = 1,         //   j = number of moves in the current step
    i = w * h;     //   i = total number of moves
    i--;           //   stop when i = 0
    print(         //   update n and print it:
      n + = -z | w //     add -1 if z is set, or w otherwise
    )              //
  )                //
    j = j - 1 || ( //   decrement j; if it's zero:
      q = s &gt;&gt; 2,  //     q = current revolution
      z = s++ % 4  //     z = 1 for an horizontal step
          &lt; 2,     //         0 for a vertical step
                   //         this goes 1-&gt;0-&gt;0-&gt;1 (mod 4)
      s &amp; 1 ?      //     if this is an odd step:
        0          //       do nothing
      :            //     else (we are at a top-right corner):
        n = z      //       reset n to z ...
          - ~q * w //       ... plus (q+1)*w
          - q,     //       ... minus q
      z ?          //     if this is an horizontal step:
        w          //       set j to w
      :            //     else:
        h - 1      //       set j to h-1
    ) - q * 2      //     minus q*2 in both cases
}                  //
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, <s>106</s> <s>98</s> 82 bytes</h1>

<pre class="lang-none prettyprint-override"><code>lambda x,y:sorted(range(x*y),key=lambda z:[min(c:=z%y,d:=z//y,y-c-.5,x-d-.5),d-c])
</code></pre>
<p><a href="https://tio.run/##ZVLJboMwEL37K@ZSAe1kMWA2iUO@I8mBAGlRExIBqiA/n87Ypm1SJMDz/DaW6zR8XNoguXb3Y767n4rzoSpgxCnrL91QV25XtO@1O75OHn7WU24Jt2x7blq3zPLby4QV3VarCadFuVgqHBcV3TysFuXeu29yx3FAIoAEOiQKPQQ8BAg@GlzwMFMYDQRfwWeESciE0IAhgyHOegSFkCDECJFg/Eml9BbhEdEErx/i9RaBck0nYZJoMtVsukqmkIOkAJ@rrec4SZMkqYxN@Zg9Y61T@FAvsRbhrwUHsKWMbWBgo6Qpkgo2gYg9/xvGVkAmvrJC7sccEvuM80w8P/pjaqqEtgLvsqVvaukaSnAcKM59Cp2NIvsUkX1lythxkefwdP4uumFssvQ7S01bztdPktBfsuyvp2ZwnV3reOJ46WCEpoVNJqDAA5Z50w7uuJV7D81K0ar@Kk4MrrO9R7y@r7thO75J@NEfXVJ7@zw/Nf3glt79Gw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Output is 0-based and used option 1.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>*LIôΔćˆøíćˆR}¯í˜þ
</code></pre>
<p>1-based and visiting top-left first (option 1). Two loose inputs in the order <span class="math-container">\$h,w\$</span>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f9fy8fz8JZzU460n247vOPwWhAdVHto/eG1p@cc3vf/vymXGQA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWWCS@h/LZ@Iw1vOTTnSfrrt8I7Da0F0UO2h9YfXnp5zeN//w@t1Dm35Hx1tqGMYqwMkjYGkMZhtpGMEJk2ApAmYbQ6VNQeSpjpmQNJMxzQ2FgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>
<p>If we look at the first two steps of option 1, we can add a rotate clockwise and reverse in between to make extracting all four first rows from the matrix of those two steps the same. This means we can basically repeat the following four sub-steps until the matrix is empty.<br />
E.g., with the example matrix:</p>
<pre><code> 1  2  3  4  5  6
 7  8  9 10 11 12
13 14 15 16 17 18
19 20 21 22 23 24
25 26 27 28 29 30
</code></pre>
<p>Step 1a: Extract the first row (<code>ćˆ</code>):</p>
<pre><code> 7  8  9 10 11 12
13 14 15 16 17 18
19 20 21 22 23 24
25 26 27 28 29 30

[[1,2,3,4,5,6]]
</code></pre>
<p>Step 1b: Rotate the matrix once clockwise (<code>øí</code>):</p>
<pre><code>25 19 13  7
26 20 14  8
27 21 15  9
28 22 16 10
29 23 17 11
30 24 18 12
</code></pre>
<p>Step 1c: Extract the first row again (<code>ćˆ</code>):</p>
<pre><code>26 20 14  8
27 21 15  9
28 22 16 10
29 23 17 11
30 24 18 12

[[1,2,3,4,5,6],[25,19,13,7]]
</code></pre>
<p>Step 1d: Reverse the matrix (<code>R</code>):</p>
<pre><code>30 24 18 12
29 23 17 11
28 22 16 10
27 21 15  9
26 20 14  8
</code></pre>
<p>After the same four steps to extract the 'bottom-right' corner:</p>
<pre><code> 8  9 10 11
14 15 16 17
20 21 22 23

[[1,2,3,4,5,6],[25,19,13,7],[30,24,18,12],[26,27,28,29]]
</code></pre>
<p>And in the end, we reverse each inner list and flatten it (<code>¯í˜</code>).</p>
<p><em>Code explanation:</em></p>

<pre class="lang-none prettyprint-override"><code>*         # Multiply the two (implicit) input-integers together: h*w
 L        # Pop and push a list in the range [1,h*w]
  Iô      # Split it into parts of the second input's (w) size
    Δ     # Loop until the result no longer changes:
     ć    #  Extract head; pop and push first row and remainder-matrix separately
      ˆ   #  Pop and add this first row to global array `¯`
       øí #  Rotate the remainder-matrix once clockwise:
       ø  #   Zip/transpose; swapping rows/columns
        í #   Reverse each inner row
     ćˆ   #  Extract head and add to global array again
       R  #  Reverse the rows of the matrix for the next iteration
    }¯    # After the changes-loop: push the global array
      í   # Reverse each inner row
       ˜  # Flatten it
        þ # Remove the two/three trailing empty strings by only keeping integers
          # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>23</s> 21 bytes</h1>
<pre><code>p:Ge`XP1&amp;Z)0&amp;Y)1X!t]v
</code></pre>
<p>Input is <code>[w h]</code>. Output is 1-based, with each number on a different line.</p>
<p><a href="https://tio.run/##y00syfn/v8DKPTUhIsBQLUrTQC1S0zBCsSS27P//aDMF01gA" rel="nofollow noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8L/Ayj01ISLAUC1K00AtUtMwQrEktuy/oktURcj/aEMFw1iuaGMwaahgDCSNFIyApAmYNFIwAcuaA0lzsKyZgimQNFUwiwUA" rel="nofollow noreferrer">verify all test cases</a>, with each output on a single line for easier visualization.</p>
<h3>Explanation</h3>
<pre><code>p        % Implicit input: [w h]. Product: w*h
:        % Range: [1 2 ... w*h]
G        % Push input again
e        % Reshape as a matrix with that size, in column-major order
`        % Do...while
  XP     %   Flip matrix vertically
  1&amp;Z)   %   Push first column, then the rest of the matrix
  0&amp;Y)   %   Push last row, then the rest of the matrix
  1X!    %   Rotate 90 degrees counterclockwise
  t      %   Duplicate. This will be used as loop condition
]        % End. The loop is repeated while the matrix is non-empty
v        % Concatenate all results into a column vector. Implicit display
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 21 bytes</h1>
<pre><code>&lt;+(+&lt;\|&amp;\|:\&amp;;-).\:!:
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs7LR1tC2ialRi6mxilGz1tXUi7FStOLiqlaISQABa4WYNIWYilp1DUMFQy5DBWMuYyBtpGAExCZcJkDaHCxmzmWqYMZlpmCqaQ0AT4wRow==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Didn't read properly, oops.</p>
<p>Input a two-element array <code>f h,w</code>. 0-indexed. Chooses &quot;Option 1&quot;.</p>
<pre><code>                   !:   r,c for range(h*w)
&lt;                       sort by:
 +(          ; ).\:       (      ;   )
              -                   r-c
                           layer:
            &amp;                ▛ min(r,c)
         |:\                 ▟ its reverse
       &amp;/                    min
   +&lt;\| \                    do ▛ first
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 35 bytes</h1>
<pre><code>Ｎθ≔⪪…⁰×θＮθθＷ⌈θ«≔⮌Ｅι⮌Ｅθ§μλθＩＥθ⊟κＩ⮌⊟θ
</code></pre>
<p><a href="https://tio.run/##VYy9DoIwFEZneIo73iY1cdGFiTgxaAj6AhUbaGxL/0AS47NXUElw@IYv5@TULXN1x2SMhTZ9OPXqyh1akqW596LReDZSBKyYbjhuKVyE4h4thbVOCKFgP8vSRyskBzyyUaheTSkCzzT51So@cOf5RA0KCus7NfNQ6BsfUVGQhPyqWZqUTuiAB@bDYpadwfts/NOlN2P7xa8Y97CLm0G@AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. 0-indexed and starts at the top left. Takes inputs in the order <code>w, h</code>. Explanation:</p>
<pre><code>Ｎθ≔⪪…⁰×θＮθθ
</code></pre>
<p>Generate the initial rectangle.</p>
<pre><code>Ｗ⌈θ«
</code></pre>
<p>Repeat until either it is empty or its rows are.</p>
<pre><code>≔⮌Ｅι⮌Ｅθ§μλθ
</code></pre>
<p>Transpose the rectangle antidiagonally.</p>
<pre><code>ＩＥθ⊟κ
</code></pre>
<p>Remove and print the last element of each row.</p>
<pre><code>Ｉ⮌⊟θ
</code></pre>
<p>Remove and print the reverse of the last row.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 163 bytes</h1>
<pre><code>proc(h,w)s:=seq;n:=h*w;a,b,c,d:=1,w,1+n-w,n;L:=();to n do L,=s(b..a,-1);b+=w;a+=w;L,=s(a..c,w);a++;c++;L,=s(b..d,w);b--;d--;L,=s(d..c,-1);d-=w;c-=w;od;[L][..n]end;
</code></pre>
<pre><code>proc(h,w)
s:=seq;                 # s short for seq
n:=h*w;
a,b,c,d:=1,w,1+n-w,n;   # initialize a,b,c,d
L:=();                  # initialize output list
to n do                 # too many times, but it's shorter                     
  # for each case: seq(from..to,step) then update &quot;from&quot; and &quot;to&quot;
  L,=s(b..a,-1);b+=w;a+=w; # top going left
  L,=s(a..c,w);a++;c++;    # left side going down
  L,=s(b..d,w);b--;d--;    # right side going down
  L,=s(d..c,-1);d-=w;c-=w; # bottom going left
od;
[L][..n]                # chop off extras
end;
</code></pre>
<p>Doesn't use an array, just generates the numbers. Starts at top-left corner. Output is 1-based. Keeps track of the numbers at the corners: <code>a,b,c,d</code> for top left, top right, bottom left, bottom right. Updates them after outputting a row or column.</p>
<p>It might be possible to have just one <code>L,seq(...)</code> in the loop with clever updates, but I couldn't think of a short way to do this.</p>
<p>The last line could be <code>L[..n]</code> except the 1,1 case fails then.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-n</code>, 124 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$w=&lt;&gt;;@a=map[$_*$w+1..$_*$w+$w],0..$_-1;map say,(reverse@{shift@a}),(map{shift@$_}@a),(map{pop@$_}@a),reverse@{pop@a}while@a
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/1@l3NbGztoh0TY3sSBaJV5LpVzbUE8PwlApj9UxAHF0Da2B0grFiZU6GkWpZalFxakO1cUZmWklDom1mjoaQEkoVyW@1iERKlKQXwDjwzWBxBJryzMyc1IdEv//N@Uy@5dfUJKZn1f8X9fXVM/A0OC/bh4A" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/278107/">278107</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




