<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::268543</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>059</td><td>JavaScript ES6</td><td>231214T153302Z</td><td><a href="https://codegolf.stackexchange.com/questions/268543/is-it-stuck-in-a-counting-loop/268544#268544">Arnauld</a></td></tr>
<tr d-ix="1"><td>007</td><td>Jelly</td><td>231214T171239Z</td><td><a href="https://codegolf.stackexchange.com/questions/268543/is-it-stuck-in-a-counting-loop/268548#268548">Nick Ken</a></td></tr>
<tr d-ix="2"><td>014</td><td>J</td><td>231214T170704Z</td><td><a href="https://codegolf.stackexchange.com/questions/268543/is-it-stuck-in-a-counting-loop/268547#268547">Jonah</a></td></tr>
<tr d-ix="3"><td>115</td><td>Python3</td><td>231214T153550Z</td><td><a href="https://codegolf.stackexchange.com/questions/268543/is-it-stuck-in-a-counting-loop/268545#268545">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 59 bytes</h1>
<p>Naive implementation. Returns a Boolean value.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;(g=a=&gt;g[a]?a+&quot;&quot;==b:g(g[a]=a.map(p=v=&gt;p[v]=-~p[v])))(b=a)
</code></pre>
<p><a href="https://tio.run/##jc9BC4IwFAfwe59CPG00lc3qEDy79Qm6iYen6SjMDS2PffU1NUFCww32GPu9P3t3bLHJ6pt@epW65qYAgxARCfaUMSYn3LouQHqUpLsC@g/UREMLkY7bBLx3VyilJAWkJlNVo8rcL5UkBYkFE/bNma4gcM5YNvnmh3LGZ@ilfs1IsVpaa3fIwrFjOdMqzna27gf9R/LeihWZgwxt7uGbuTB8/83pWCM1Hw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt; (                // a[] = input array
  g =                 // g is a recursive function taking ...
  a =&gt;                // ... the current state a[] of the array
  g[a] ?              // if we've encountered a[] before:
    a + &quot;&quot; == b       //   stop and return true if this is the original array
  :                   // else:
    g(                //   do a recursive call:
      g[a] =          //     mark a[] as encountered
      a.map(p =       //     p is on object used to count 'preceding' values
      v =&gt;            //     for each value v in a[]:
        p[v] = -~p[v] //       increment p[v]
      )               //     end of map()
    )                 //   end of recursive call
)(b = a)              // initial call to g with a[] saved in b[]
</code></pre>
<hr />
<h1>JavaScript (ES6), 45 bytes</h1>
<p>Optimized version using <a href="https://codegolf.stackexchange.com/a/268547/58563">Jonah's conjecture</a>.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a+&quot;&quot;==(g=a=&gt;a.map(p=v=&gt;p[v]=-~p[v]))(g(a))
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/Z9m@z/R1i5RW0nJ1lYj3RbE1stNLNAosC2ztSuILou11a0DUZqaGukaiZqa/5Pz84rzc1L1cvLTNdI0oo10jIByCshAX1/BLTGnOJULTamhjiEWpSFFpVhUGhGtEqgWCI11jGE6cJsJVGWoYwKkTSGq8ag0BKs1IsJMiEpjoLlmUDNxeB7sTGRvwZT@BwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 41 bytes</h1>
<p>Further optimized, knowing that we're actually looking for a <a href="https://codegolf.stackexchange.com/questions/144201/stackable-sequences">stackable sequence</a> as pointed out by <a href="https://codegolf.stackexchange.com/users/20260/xnor">xnor</a>. This is basically a 1-indexed version of my answer to the other challenge.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.every(k=&gt;a[a[-k]=-~a[-k--],-k]--|!k)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/Z9m@z/R1i5RL7UstahSIxvIjE6M1s2OtdWtA9G6urE6QJ6ubo1itub/5Py84vycVL2c/HSNNI1oIx2jWE1NBWSgr6/glphTnMqFptRQxxCL0pCiUiwqjYhWCVQLhMY6xjAduM0EqjLUMQHSphDVeFQagtUaEWEmRKUx0FwzqJk4PA92JrK3YEr/AwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>ċṪ‘ƊƤ⁺⁼
</code></pre>
<p><a href="https://tio.run/##y0rNyan8//9I98Odqx41zDjWdWzJo8Zdjxr3/H@4c5/1o4Y5Crp2Co8a5lofbgcKqHA93L3l4Y5ND3csCjvW9ahpzeF2IBH5/3@0kY5RLEipW2JOcSpXtKGOIZgbUlQK5hmh8IB8IDTWMUZVAxQx1DEB0qYYMoZgOSOsosZAPWaoloONRwj9BwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A monadic link taking a list of integers and returning 1 if a loop and 0 if not. Uses @Jonah’s observation that we only need to apply the transformation twice and check whether we get back to where we started.</p>
<h2>Previous solution, 9 bytes</h2>
<pre><code>ċṪ‘ƊƤ⁺ÐL⁼
</code></pre>
<p><a href="https://tio.run/##y0rNyan8//9I98Odqx41zDjWdWzJo8Zdhyf4PGrc8//hzn3WjxrmKOjaKTxqmGt9uB0ooML1cPeWhzs2PdyxKOxY16OmNYfbgUTk///RRjpGsSClbok5xalc0YY6hmBuSFEpmGeEwgPygdBYxxhVDVDEUMcESJtiyBiC5YywihoD9ZihWg42HiH0HwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A monadic link taking a list of integers and returning 1 if a loop and 0 if not.</p>
<h2>Explanation</h2>
<pre><code>ċṪ‘ƊƤ     | For each prefix, count the number of times the popped tail appears and then increment by 1
     ⁺ÐL  | Repeat this again until a value is seen for the second time, returning the last value that has not been seen before
        ⁼ | Check whether equal to the original argument
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 14 bytes</h1>
<pre><code>-:(1#.]=]\)^:2
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/da00DJX1Ym1jYzTjrIz@a3KlJmfkK6iHFJWWZFSqQ3hpCoYKhgimEZKoghEQGisYI8kCuYYKJkDaFFXYECwB1azulphTjDDfCNlQmFJjoClmyMJAo/8DAA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>This uses the fact I conjectured in the comments, which WheatWizard confirmed is true:</p>
<blockquote>
<p>It looks like the true ones all have a cycle length of 2, and the false ones converge to something with a cycle length of 2 also, just not including the original input.</p>
</blockquote>
<p>So, we simply apply the transformation twice, and check if the result matches the input.</p>
</div>
<div id="pu3" class="pu"><h1>Python3, 115 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(a):
 q=[a]
 while(l:=[sum(k==j for k in q[-1][:i+1])for i,j in enumerate(q[-1])])not in q:q+=[l]
 return l==a
</code></pre>
<p><a href="https://tio.run/##bZBBT8QgEIXP8ismvRSyrAmta0wTPHr05A17YLPTLLuUUqAaf32lJMZsNBzIe/Pxhhn/lc6Ta598WNcTDjBQzToCs1S6J/B5Nhap7aSKy0ivUl5gmAJcwTiY1V70qjM70bPNNPyy2eiWEYNOSAvAeuamVPhu3kllc2rAtAQHVkq9RpBQVZVqeNPD/hletI1IlOCiyLewFNXcqKzzaXl7y2RH8Id8H/5URKk1/7ptfvN427zE/1r5g4SUGbdBBmMTBvo6OeQQ76O3JtH63dUsb@5OczjmmUbtKX5oy8H8EFtcZjISI4ZUVg1SwpEQH4zLRMKYIvitfqrZ@g0" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<!-- TYYY -->

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/268543/">268543</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




