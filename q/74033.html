<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::74033</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>179</td><td>AWK</td><td>241105T181802Z</td><td><a href="https://codegolf.stackexchange.com/questions/74033/the-holier-numbers/276529#276529">xrs</a></td></tr>
<tr d-ix="1"><td>165</td><td>JavaScript ES6</td><td>160224T103012Z</td><td><a href="https://codegolf.stackexchange.com/questions/74033/the-holier-numbers/74042#74042">Neil</a></td></tr>
<tr d-ix="2"><td>122</td><td>Python 2</td><td>160225T210153Z</td><td><a href="https://codegolf.stackexchange.com/questions/74033/the-holier-numbers/74199#74199">lynn</a></td></tr>
<tr d-ix="3"><td>317</td><td>Lua</td><td>160224T084655Z</td><td><a href="https://codegolf.stackexchange.com/questions/74033/the-holier-numbers/74038#74038">Katenkyo</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, 179 bytes</h1>
<pre><code>{for(j=i=0;j!=$1;i++){if(i!~/[12357]/){j++;l=split(i,a,X)
for(x=0;l;l--)x+=x+gsub(/[469]/,X,a[l])+2*gsub(/[80]/,X,a[l])-1
b[x]=b[x]!=&quot;&quot;?b[x]&quot; &quot;i:i}}for(i in b)s=s b[i]&quot; &quot;
print s}
</code></pre>
<p><a href="https://tio.run/##RYxNCoMwGET3niKGLpImErW1fyH0GkLIQheWzwYrxtKA2KunDRS6GYY3vGle9xCW7jGRXoHKZZ@qTSGBMbpARyB9C12Uu@poBF16xqRVbrQwE@ANr2kSRf/VrLRZRj1Tnt3csyVC7w9nI3jNG20NZeX2h0/5n2ZF0mpvVIxUYXyNBSMMF1jX@AwIBtRSpxxqNcQpGScYZuTWEMrqAw" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
<pre><code>{for(j=i=0;j!=$1;i++)       # until n (input) hits
{if(i!~/[12357]/)           # unholy number disincluded
{j++;                       # add to hit count
l=split(i,a,X)              # split number into digits
for(x=0;l;l--)              # maths back from last digit
x+=x+gsub(/[469]/,X,a[l])+  # gsub returns # of matches
2*gsub(/[80]/,X,a[l])-1     # two points
b[x]=b[x]!=&quot;&quot;?b[x]&quot; &quot;i:i}}  # append to string based on score
for(i in b)s=s b[i]&quot; &quot;      # combine strings in order
print s}                    # where the magic happens
</code></pre>
</div>
<div id="pu1" class="pu"><h2>JavaScript (ES6), <s>166</s> 165 bytes</h2>

<pre><code>f=n=&gt;[...Array(n)].map((_,i)=&gt;i.toString(5)).sort((a,b)=&gt;e(a)-e(b),e=n=&gt;'0b'+[...n.replace(/./g,c=&gt;'10010'[c])].reverse().join``).map(n=&gt;+n.replace(/./g,c=&gt;"04689"[c]))
</code></pre>

<p>Edit: Saved 1 byte by returning an array of strings.</p>

<p>Ungolfed:</p>

<pre><code>function base5_to_extended_holiness_binary(c) {
    return "10010"[c];
}
function extended_holiness(n) {
    var binary = n.toString(5).replace(/./g, base5_to_extended_holiness_binary);
    binary = s.split("").reverse().join("");
    return parseInt(s, 2);
}
function extended_holiness_sort(a, b) {
    return extended_holiness(a) - extended_holiness(b);
}
function base5_to_holy_number(c) {
    return "04689"[c];
}
function list_by_extended_holiness(n) {
    var array = new Array(n);
    for (var i = 0; i &lt; n; i++)
         array[i] = i;
    array = array.sort(extended_holiness_sort);
    for (var i = 0; i &lt; n; i++)
        array[i] = parseInt(array[i].toString(5).replace(/./g, base5_to_holy_number);
    return array;
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Python 2, <s>138</s> 122 bytes</h1>

<p>This looks for holy numbers up to 5<sup><em>N</em></sup> for an input <em>N</em>, which is ridiculously slow:</p>

<pre><code>e=lambda s:s and(s[0]in'08')+e(s[1:])*2or 0
lambda N:sorted([`x`for x in range(5**N)if set(`x`)&lt;=set('04689')][:N],key=e)
</code></pre>

<p>Here the limit is 5<i>N</i><sup>2</sup>, and you can actually run the test cases, at the cost of a single byte:</p>

<pre><code>e=lambda s:s and(s[0]in'08')+e(s[1:])*2or 0
lambda N:sorted([`x`for x in range(5*N*N)if set(`x`)&lt;=set('04689')][:N],key=e)
</code></pre>

<p>The first snippet is valid, as 5<sup><em>N</em></sup> ≥ 5<i>N</i><sup>2</sup> for all positive integers <em>N</em>.</p>
</div>
<div id="pu3" class="pu"><h2>Lua, 317 Bytes</h2>

<p>I had some troubles doing this, some things in Lua don't work as I think it does. I will have to try and play with them if I want to golf this down. 
You can test lua <a href="http://www.lua.org/cgi-bin/demo" rel="nofollow">online</a> by replacing <code>arg[1]</code> by the number of elements you want :).</p>



<pre class="lang-lua prettyprint-override"><code>function f(y)h=0(y..''):reverse():gsub(".",function(c)h=c:find("[08]")and 1+h or h end)return h end
x,a=0,{}while(#a&lt;arg[1]+0)do a[#a+1],x=(x..''):find("^[04689]*$")and x or nil,x+1 end
for i=1,#a do m=1
for j=1,#a do x=a[m]m=(f(x)~=f(a[j])and f(x)&gt;f(a[j])or x&gt;a[j])and j or m
end end print(a[m])table.remove(a,m)end
</code></pre>

<h3>Ungolfed and explanations</h3>

<pre class="lang-lua prettyprint-override"><code>function f(y)                     -- function returning the enhanced holiness of a holy number
  h=0                             -- h is the cumulated holyness of processed digits
  (y..''):reverse()               -- reverse the digits in y
         :gsub(".",function(c)    -- iterate over each digits
     h=c:find("[08]")and 1+h or h -- ternary based on the digit being [08] or [469]
   end)                           
  return h                        -- return h
end

x,a=0,{}                          -- initialise a counter, and the array of holy numbers
while(#a&lt;arg[1]+0)                -- iterate until we have n holy numbers
do
  a[#a+1]=(x..'')                 
      :find("^[04689]*$")         -- if we can't find an unholy digit
             and x or nil         -- insert x into a
  x=x+1                           -- increment x anyway
end

for i=1,#a                        -- iterate n times(current size of a)
do
  m=1                             -- m is the index of the lowest value
  for j=1,#a                      -- iterate over a
  do
    x=a[m]                        -- x is shorter to write than a[m]
    m=(f(x)~=f(a[j])              -- nested ternaries, translated in
        and f(x)&gt;f(a[j])          -- nested if below
        or x&gt;a[j])and j or m      
  end
  print(a[m])                     -- output a[m]
  table.remove(a,m)               -- remove it from the table a
end
</code></pre>

<p>The nested ternaries used for the new value of <code>m</code> can be translated in nested ifs as:</p>

<pre class="lang-lua prettyprint-override"><code>if(f(a[m])~=f(a[j])) then         -- if a[m] and a[j] don't have the same holyness
  if(f(a[m])&gt;f(a[j])) then m=j end-- compare by holyness
else
  if(a[m]&gt;a[j]) then m=j end      -- else, compare by numeric value
</code></pre>

<p>Also, I would have loved to replace the nested <code>for</code> by using <code>table.sort</code>, but, for a reason I don't know, the following doesn't work despite not producing an infinite loop or crushing the sort function.</p>

<pre class="lang-lua prettyprint-override"><code>table.sort(a,function(i,j)
    return f(i)~=f(j)              
         and f(i)&gt;f(j)          
         or i&gt;j
end)
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/74033/">74033</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




