<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::247835</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>153</td><td>Regex ECMAScript</td><td>241011T010213Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/276043#276043">Deadcode</a></td></tr>
<tr d-ix="1"><td>007</td><td>Uiua</td><td>241008T014226Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/275960#275960">noodle p</a></td></tr>
<tr d-ix="2"><td>003</td><td>Vyxal 3</td><td>241008T135247Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/275968#275968">pacman25</a></td></tr>
<tr d-ix="3"><td>041</td><td>Python 3.8 prerelease</td><td>241007T215348Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/275958#275958">aeh5040</a></td></tr>
<tr d-ix="4"><td>012</td><td>x8664 assembly</td><td>220526T030603Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247858#247858">Chris</a></td></tr>
<tr d-ix="5"><td>024</td><td>C gcc</td><td>230715T183638Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/262886#262886">Hunaphu</a></td></tr>
<tr d-ix="6"><td>010</td><td>x8664 machine code</td><td>230716T012439Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/262896#262896">engineer</a></td></tr>
<tr d-ix="7"><td>016</td><td>m68k assembly GNU</td><td>230715T201031Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/262888#262888">Saladin</a></td></tr>
<tr d-ix="8"><td>004</td><td>Thunno 2</td><td>230715T164409Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/262881#262881">The Thon</a></td></tr>
<tr d-ix="9"><td>043</td><td>Scala</td><td>230418T061335Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/260228#260228">138 Aspe</a></td></tr>
<tr d-ix="10"><td>017</td><td>Rattle</td><td>220531T145049Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248034#248034">Daniel H</a></td></tr>
<tr d-ix="11"><td>040</td><td>Raku</td><td>221130T155800Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/255033#255033">Mark Ree</a></td></tr>
<tr d-ix="12"><td>014</td><td>J</td><td>221111T082039Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/254474#254474">south</a></td></tr>
<tr d-ix="13"><td>017</td><td>><></td><td>221111T073708Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/254473#254473">Emigna</a></td></tr>
<tr d-ix="14"><td>nan</td><td></td><td>221013T152436Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/253166#253166">bigyihsu</a></td></tr>
<tr d-ix="15"><td>nan</td><td>Fig</td><td>220924T190119Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/252216#252216">Seggan</a></td></tr>
<tr d-ix="16"><td>035</td><td>Prolog SWI</td><td>220901T175739Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/251536#251536">naffetS</a></td></tr>
<tr d-ix="17"><td>013</td><td>TIBASIC</td><td>220901T193455Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/251539#251539">absolute</a></td></tr>
<tr d-ix="18"><td>029</td><td>Ruby</td><td>220901T133415Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/251529#251529">G B</a></td></tr>
<tr d-ix="19"><td>022</td><td>Desmos</td><td>220525T230933Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247855#247855">Aiden Ch</a></td></tr>
<tr d-ix="20"><td>045</td><td>Brev</td><td>220622T140630Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248939#248939">Sandra</a></td></tr>
<tr d-ix="21"><td>094</td><td>Brainfuck</td><td>220622T132455Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248936#248936">MennoK</a></td></tr>
<tr d-ix="22"><td>093</td><td>BitCycle u</td><td>220617T201825Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248745#248745">Nilster</a></td></tr>
<tr d-ix="23"><td>010</td><td>Pip</td><td>220612T200609Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248523#248523">naffetS</a></td></tr>
<tr d-ix="24"><td>017</td><td>APLDyalog Unicode</td><td>220612T082051Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248505#248505">Kamila S</a></td></tr>
<tr d-ix="25"><td>011</td><td>K ngn/k</td><td>220611T143230Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248476#248476">coltim</a></td></tr>
<tr d-ix="26"><td>022</td><td>K ngn/k</td><td>220602T135418Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248103#248103">oeuf</a></td></tr>
<tr d-ix="27"><td>010</td><td>Stax</td><td>220531T162348Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/248038#248038">recursiv</a></td></tr>
<tr d-ix="28"><td>006</td><td>Husk</td><td>220525T225334Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247853#247853">Dominic </a></td></tr>
<tr d-ix="29"><td>006</td><td>Vyxal</td><td>220525T201814Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247837#247837">naffetS</a></td></tr>
<tr d-ix="30"><td>005</td><td>Husk</td><td>220527T153457Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247923#247923">Leo</a></td></tr>
<tr d-ix="31"><td>048</td><td>Python 3</td><td>220526T214336Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247893#247893">axolotl</a></td></tr>
<tr d-ix="32"><td>020</td><td>R</td><td>220525T223316Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247850#247850">Dominic </a></td></tr>
<tr d-ix="33"><td>017</td><td>JavaScript</td><td>220525T202719Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247840#247840">Unmitiga</a></td></tr>
<tr d-ix="34"><td>027</td><td>C gcc</td><td>220526T234420Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247901#247901">c--</a></td></tr>
<tr d-ix="35"><td>004</td><td>Jelly</td><td>220526T232411Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247897#247897">Luis Men</a></td></tr>
<tr d-ix="36"><td>037</td><td>Haskell</td><td>220526T213852Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247891#247891">flawr</a></td></tr>
<tr d-ix="37"><td>5714</td><td>Haskell</td><td>220526T160142Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247881#247881">staletid</a></td></tr>
<tr d-ix="38"><td>031</td><td>PowerShell</td><td>220526T181420Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247883#247883">another </a></td></tr>
<tr d-ix="39"><td>024</td><td>Python 3</td><td>220525T213755Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247844#247844">Luis Men</a></td></tr>
<tr d-ix="40"><td>016</td><td>PARI/GP</td><td>220526T040207Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247859#247859">alephalp</a></td></tr>
<tr d-ix="41"><td>004</td><td>MathGolf</td><td>220525T221022Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247848#247848">Kevin Cr</a></td></tr>
<tr d-ix="42"><td>036</td><td>Cgcc</td><td>220525T222718Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247849#247849">Lala5th</a></td></tr>
<tr d-ix="43"><td>014</td><td>Factor + math.unicode</td><td>220525T202436Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247839#247839">chunes</a></td></tr>
<tr d-ix="44"><td>026</td><td>Retina 0.8.2</td><td>220525T225556Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247854#247854">Neil</a></td></tr>
<tr d-ix="45"><td>017</td><td>Wolfram Language Mathematica</td><td>220525T224643Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247852#247852">att</a></td></tr>
<tr d-ix="46"><td>024</td><td>Charcoal</td><td>220525T223524Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247851#247851">Neil</a></td></tr>
<tr d-ix="47"><td>004</td><td>Vyxal</td><td>220525T211849Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247842#247842">emanresu</a></td></tr>
<tr d-ix="48"><td>004</td><td>05AB1E</td><td>220525T215731Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247846#247846">Kevin Cr</a></td></tr>
<tr d-ix="49"><td>031</td><td>rSNBATWPL</td><td>220525T215716Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247845#247845">rydwolf</a></td></tr>
<tr d-ix="50"><td>041</td><td>Python 3</td><td>220525T212013Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247843#247843">Noodle9</a></td></tr>
<tr d-ix="51"><td>032</td><td>rSNBATWPL</td><td>220525T203354Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247841#247841">naffetS</a></td></tr>
<tr d-ix="52"><td>032</td><td>JavaScript</td><td>220525T200912Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247836#247836">rydwolf</a></td></tr>
<tr d-ix="53"><td>nan</td><td></td><td>220525T202325Z</td><td><a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number/247838#247838">Giuseppe</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Regex (ECMAScript), 153 bytes</h1>
<p><code>(?=(x*).*(?=x{4}(x{5}(\1{5}))(?=\2*$)\3+$)(|x{4})(?=xx(x*)\5)\4(x(x*))(?=(\6*)\7+$)(?=\6*$\8)\6*(?=x\1\7+$)(x*)(\9x?)|)((\5\10)(\9\10\12?)?|x{5}|xx?x?)\B</code></p>
<p><a href="https://tio.run/##TY9LbtswEIb3PIVqGPGMVCumHpYdlRYQoItssmiXZReCzchsaVqgmJiN5W0P0CP2Ii7ZIkA38/j@fzAz39qXdtga2dv50MudMIej/i5@XA3T4hR9Et1H1wO8ss1tfIWGgYsxjX3hzsUF3Lm8AKc@InrGs3iKPE@mCGPQA3MujPASeQF/ywCBLz2rgtFPLeMpX6FPwc7pP@6dwNeuwREBeMnpIvQ@cZo12Ixh9ehc4x38/hrfvmJqj5@tkboDTAcltwKW7@cFYj2wRX3aSyUAFDOi3SmpBSC@Y/pZKTx3TKVDr6SF2XyGtXwC0KxLldCd3eMmG0c5PLaPIFnfmkE8aAvdl8VXxDdB/C/oDW3oXZDR7s3xNHnQL62Su8i0uhN30SRR9dPRQC0/MFHLJEG/8MAmbpIa0YvWgsT00NrtHgziebi56f1TFsIftO6f7WANyGQW/f75K5olB3/J26n15XLNSE5KsiI0JxkleUFK360JLQqS5TnJq4os6YKsVxWh5br6Aw" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<p>Takes its input in unary, as a string of <code>x</code> characters whose length represents the number. Returns its output as the length of the match.</p>
<p>This is based on <a href="https://codegolf.stackexchange.com/questions/126373/am-i-a-fibonacci-number/178956#178956">Am I a Fibonacci Number? (<strong>161 bytes</strong>)</a>, with some modifications that take advantage of the difference between that problem and this one.</p>
<pre><code>                           # tail = N = input number; no need for an anchor, because all
                           # Fibonacci inputs except for 1 will return a match
(?=
    (x*)                   # \1+1 = potential number for which 5*(\1+1)^2 ± 4 is a
                           # perfect square; this is true iff \1+1 is a Fibonacci number,
                           # which we shall call F_n. Outside the surrounding lookahead
                           # block, \1+1 is guaranteed to be the largest number for which
                           # this is true such that \1 + 5*(\1+1)^2 + 4 &lt;= N.
    .*
    (?=                    # tail = (\1+1) * (\1+1) * 5 + 4
        x{4}
        (                  # \2 = (\1+1) * 5
            x{5}
            (\1{5})        # \3 = \1 * 5
        )
        (?=\2*$)
        \3+$
    )
    (|x{4})                # \4 = parity - determined by whether the index of Fibonacci
                           #               number \1+1 is odd or even;
    (?=
        xx                 # tail = arithmetic mean of (\1+1) * (\1+1) * 5 and \6 * \6
                           #      = ((F_n * F_n * 5) + (L_n * L_n)) / 2 = L_{2n}
        (x*)\5             # \5 = floor(tail / 2) = floor(L_{2n} / 2)
    )
    \4
    # require that the current tail is a perfect square
    (x(x*))                # \6 = potential square root, which will be the square root
                           #      after the following two lookaheads; \7 = \6-1
    (?=(\6*)\7+$)          # \8 = must be zero for \6 to be a valid square root
    (?=\6*$\8)
    # \6 is now the Lucas number L_n corresponding to the Fibonacci number F_n.
    \6*
    (?=x\1\7+$)            # tail = F_{2n} = L_n * F_n = \6 * (\1+1), where \6 is larger
    (x*)(\9x?)             # \9 = floor(tail / 2);
                           # \10 = ceil(tail / 2); the remainder tail % 2 will always be
                           #       the same as the remainder discarded by \5, because
                           #       F_{2n} is odd iff L_{2n} is odd, thus this ceil()
                           #       can complement the floor() of \5 when adding \5 + \10
|                          # Allow everything above to be skipped, resulting in all
                           # capture groups being unset.
)
(
    # Note that if the above was skipped using the empty alternative in the lookahead,
    # the following will evaluate to 0. This relies on ECMAScript NPCG behavior.
    (\5\10)                # \12  = F_{2n+1} = (L_{2n} + F_{2n})/2 = \5 + \10; head=\12
    (
        \9\10              # head = F_{2n+2} = F_{2n}   + F_{2n+1}
                           #                 = \9+\10   +   \12
        \12?               # head = F_{2n+3} = F_{2n+2} + F_{2n+1}    (optionally)
                           #                 = head     +   \12;
                           # This is needed only for an input of N = 21, which is an
                           # exception because 2^2*5+4 = 24 &gt; 21, thus the algorithm
                           # chooses 1^2*5+4 = 9 as its square instead. This won't break
                           # any subsequent Fibonacci inputs, because execution this
                           # optional will in those cases set tail = 0, breaking the
                           # final assertion.
    )?                     # Do the above optionally
|
    x{5}|xx?x?             # The cases 2→1, 3→2, 5→3, and 8→5 cannot be handled by our
                           # main algorithm, so match them here.
)
\B                         # Assert head ≠ 0 and tail ≠ 0
</code></pre>
<h1>Regex (ECMAScript), 162 bytes</h1>
<p><code>\B(?=(x*).*(?=x{4}(x{5}(\1{5}))(?=\2*$)\3+$)(|x{4})(?=xx(x*)\5)\4(x(x*))(?=(\6*)\7+$)(?=\6*$\8)\6*(?=x\1\7+$)(x*)(\9x?)|)(\9\10(\5\10)\12?|x{21}|x{8}|x{5}|xx?x?)$</code></p>
<p><a href="https://tio.run/##TU/LbtswELzzK1TDiHelWjH1sJ2otIAAPeSSQ3oMexBsRmZC0wLFxGxsXfsB/cT@iEM2CNDL7O7M7OupeW36tZGdnfad3Aiz2@tn8etsmBaH6F60310H8MZWl/GZ30DNwMWYxj5xx2IAdywH4NQjoud4Fo@R58kY4RT0wDkXWniJvIB/aSCBzz23CEbfNY/HfIk@BDunH7x3Ar9yNZ5C5HQGvPSInGa1H57RweMyQOnB1d45PseXb5ja/Q9rpG4B017JtYD512mBWPVsVh22UgkAxYxoNkpqAYhfmH5RCo8tU2nfKWlhMp1gJR8BNGtTJXRrt7jKTifZ3zV3IFnXmF7cagvtw@wn4qcg/hf0itb0Oshot2Z/GN3q10bJTWQa3YrraJSo6nFvoJLfmKhkkqBfuGMjN0qN6ERjQWK6a@x6Cwbx2F9cdP4pC@EPWnUvtrcGZDKJ/v7@E02Snb/k89RqGM4ZyUlJloTmJKMkL0jpqytCi4JkeU7yxeId" rel="nofollow noreferrer" title="JavaScript (SpiderMonkey) – Try It Online">Try it online!</a></p>
<p>This is an exact clone of <a href="https://codegolf.stackexchange.com/questions/126373/am-i-a-fibonacci-number/178956#178956">Am I a Fibonacci Number? (<strong>161 bytes</strong>)</a> with the <code>^</code> anchor replaced with <code>\B</code>, which is a shorthand for <code>(?!^|$)</code>. So the regex engine goes forward one character at a time looking for a match, thus matching the largest Fibonacci number less than the input. As such this is much slower than the 153 byte version.</p>
<p>(What we'd really like is <code>(?!^)</code> instead of <code>\B</code>, so we could return an output of <span class="math-container">\$0\$</span> from an input of <span class="math-container">\$1\$</span>, but that would take 3 more bytes, and the problem doesn't require handling <span class="math-container">\$1\$</span>.)</p>
</div>
<div id="pu1" class="pu"><h1>Uiua, 7 bytes</h1>
<pre><code>⍢⤙+⋅≠.1
</code></pre>
<p>Try it: <a href="https://uiua.org/pad?src=0_13_0-dev_3__RiDihpAg4o2i4qSZK-KLheKJoC4xCgrin5ziiaFGIFsxIDIgMyA1IDggMTMgMjEgMzQgNTUgODldCuKXjOKXjOKJoSZw4o2aJCJfIC0-IF8i4qyaQFxzwrDii5UK" rel="nofollow noreferrer">Uiua pad</a></p>
<p>Starting with two ones, repeatedly add them while bringing the second number to the top until the second number is equal to the input. Then, the top number is the previous fibonacci.</p>
<p>Alternatively, using the method of dividing by the golden ratio:</p>
<h1>Uiua, 8 bytes</h1>
<pre><code>⁅÷÷2+1√5
</code></pre>
<p>Try it: <a href="https://uiua.org/pad?src=0_13_0-dev_3__RiDihpAg4oGFw7fDtzIrMeKImjUK4qyaQCDiiaEkIl8g4oaSIF8i4qyaQFxzwrDii5Xin5xGIFsyIDMgNSA4IDEzIDIxIDM0IDU1IDg5IDE0NF0K" rel="nofollow noreferrer">Uiua pad</a></p>
<p>Uiua is read right to left and stack-based, so written with more traditional infix this is equivalent to:</p>
<pre><code>⁅(x÷((1+√5)÷2))
</code></pre>
<p>(where <code>⁅</code> means round to the nearest integer)</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3/" rel="nofollow noreferrer">Vyxal 3</a>, 3 bytes</h1>
<pre><code>kgṠ
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#H4sIAAAAAAAAE6tWSssvyk0sUbIy0lHKSE1MSS1SslJS0lFKzk9JBbKy0x_uXADkpuXnl8Ck0nIS04uVrKJjdZQy8wpKS6DsstSi4sz8PKAaYz0TPUMDpVoA6CzanV0AAAA" rel="nofollow noreferrer">Vyxal It Online!</a></p>
<p>integer divide by the golden ratio.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 41 bytes</h1>
<p>A different method.  Impractically slow for large values without caching. For n between two Fibonaccis it returns the lower one.</p>

<pre class="lang-none prettyprint-override"><code>g=lambda n:n and[a:=g(n-1),n-1][g(a)+a&lt;n]
</code></pre>
<p><a href="https://tio.run/##FcQxCoAwDADA3Vd0TFCHWgQp@pLSIVKIgsZSuvj6aG@4/NbjEbfkosrbRfeeyIgXQ5IC@Y1BRovDXwwMhD2tEjWXUyowTDgwuNbcWlrWIXaqHw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>x86-64 assembly, <s>13</s> 12 bytes</h1>
<pre><code>6a 01 58 99 92 01 c2 39 fa 75 f9 c3
</code></pre>
<p>In assembly:</p>
<pre><code>previous:
    push 1
    pop rax
    cdq     # zeroes rdx
previous_loop:
    xchg eax,edx
    add edx,eax
    cmp edx,edi
    jne previous_loop
    ret
</code></pre>
<p><a href="https://tio.run/##nVbdbus2DL6unoJoUJwNS3rspD9JgO6m2x5gVwN2gkKW5EStLXuS3Djn5TtSThzbSXqGBUhiURT5kfxImTun8iTbTdZCfIx4s1IOthvu1buyoB1oA8@FVOCU8LowwI2EovJl5aGuJaSFzblnI1koZ7542Bb2DXQKgs7g8YzbNRryG26g1KWCpEpTZdkoQQNoEA/Qsb1FVPOQV2KDbnZbvmO32niVvbid8bwGU5RWpbpmzHlu/cse8W75gfJ3XVRuyUaI1ENVglVr7byybgmW10/xGKysnyJUeOAQxQzwU1ZuAzGK7ufNuihJGQWLRRAI@Q872H7JiqIMDsg5RpgjZG3W8IdOCsOF0GCqPEGPqFM52plNJ4n2RyjA3wstHfz5@1/QhILZpkxkOtfeYfwKlV2V0XOBxwGPk7nFNMCpxWYNitdjJQlkFINoNriUgLKxCuBnC0h5gz8vG7nUKH@8h7SJ69Uo6MWFu2IWtqzyH8rIY3LZ4eklU@apuzXpl4Exr5xfwgiolg0DDGyUVRQM7QVh8NJm3yZlK8iLd1qPrTvKXJUArsdRPW9SL96AZ3ptcmV8q0WsJK1J/BBA7Gt12M4Ux@rr8d9OcJO@OG@xOqu@X6d7foMMM9eVCZ5lEExQujZKBKpvFWy4BI5QhVDOpVWGcRrsH3doGKx9rg02FRRYYrvV7piFUCIsadRKXjMFlGYKZIAHQ0BAqwGifhVOgm6a62LUfYtt3MiknpcST/v0CBJht5lmB7jLgXWsZae@ob06a6Qaw0xir2O/4JSQ3HMwSkkle4yBNU6XQCTGesEc3d02Ari@ySp4@hXw75u5Zt16n1e@JgSKhlp6BMEYUv3ysef9cLupINkhylv4rcrLJTlUtRKXD35NtPmKYxOdSpVUa9I8o4ZVW95k9TeD5dk/yLp5uEa0oRKQautoYlqlAIdsRf3g4CeqeCgrVfHnxs1y0HI4DPoCNxTIeiAQ9Smv2hDOc@qXqI7np8Q6bEWDLdFuRfPVp9QLNOoACms5WHdDCvu6T7vbdVYkPIOca8PoZ9lmNlAOCbD2G3Z1mD/zHlqFMX42CU9ydeTT@djQ@f4ODN632m/ofj1p/5NxRJdqKwkdE@6HTve@mu9EcPSAl/XbBAeXziT6LWhYoSc0QqztuQumSf0Hpr831tA2Tnq6vUpukYcH6xPYWu3D@A84cYDzd3VAoOWAZOHyElnh6BbEkbpvy16IIfuyZdiQKuE0Wmn8HupBABrJfzD5vOqXj@jcL@9qcLQed6/IPqDgtg3r/4DoxWWVKOjNDJNHJppM0hWz5fiigRUD/MNoG/1LHVCjXqCwG8hk82rRjwAt98Y@kSk4blpGUc2D65ZGI5BVOT0pIgFzXmpzNurVp/ACFLLaoQi1LQ3MVH5xPzDZSeLZjN9dyPdJZ7Qd3Zn0Zwhzdvdiikk7o0t0ya7oVa4/cIJKeBm4otH1EbMpm8ZsdsfiO/zOZw@zOF5EM2DTxWM8je@jxxm7m0eP99OHxePDvw" rel="nofollow noreferrer" title="Assembly (gcc, x64, Linux) – Try It Online">Try it online!</a></p>
<p>Uses the usual calling convention of taking the first argument in <code>rdi</code> and returning in <code>rax</code>. It's also valid x86-32, just with <code>edi</code> and <code>eax</code> instead.</p>
<p>It's pretty simple- it just explicitly computes Fibonacci numbers and returns if the new number is equal to the input. At the end of a loop, <code>rdx</code> contains the next Fibonacci number and <code>rax</code> contains the previous. If <code>rdx</code> is equal to the input <code>rdi</code>, then the loop terminates (and thus <code>rax</code>, the previous number, is returned). Otherwise the two are swapped, and the loop begins again.</p>
<p>This uses 32-bit registers to save a few bytes, so it only works up to the 48th Fibonacci number, <code>4807526976</code>. This does not fit in a 32-bit integer but its result does so and it is not the same as any previous number modulo <code>2^32</code> so the math works out.</p>
<p>It can be expanded to work properly with 64-bit numbers by changing all the registers to 64-bit, at the cost of 2 bytes:</p>
<pre><code>6a 01 58 99 48 0f c1 c2 48 39 fa 75 f7 c3
</code></pre>
<p>The added bytes are the REX.W (<code>0x48</code>) prefix that swaps the operand size to 64-bit. <code>xchg rax,rdx; add rdx,rax</code> is also replaced with <code>xadd rdx,rax</code>, which is shorter because it uses one fewer REX.W prefix.</p>
<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/30206/peter-cordes">@PeterCordes</a>.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>26</s> 24 bytes</h1>
<p>-4 thanks to c--.</p>
<p>This uses int and overflows at the 46th fib (first exceeding <span class="math-container">\$2^{31}\$</span>) but</p>
<p><code>p(n){n=round(n*2/(1+sqrt(5)));}</code> breaks at 43 and is longer.</p>

<pre class="lang-c prettyprint-override"><code>p(n){n=n*.618033989+.5;}
</code></pre>
<p><a href="https://tio.run/##XY5PC8IwDMXv/RRBEbqtGxtTUesEQW8ePQpDNqMBrcU/J9lnn20dWszlkd9LXlLFx6pqW81V8FKFCpNxNknzfDqZRslINm2fVHV@1geY3x81XZPTgpF6wGVPigcvBqZsjyVAAan0QPkHwE5kP6DAW8HrjVtIRSppPhxLiqIu3tkuDUvpEbuNHnBxBkd2WrKv4Y5r42mOgcf1zTjIezQbhLUN@CjGXb9ab7bL2aCGneoJ@K79KhckjGSZQKepQC2652LUwee3hjWMtW8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>x86-64 machine code, 10 bytes</h1>
<p>Expects input in <code>edx</code> and outputs to <code>eax</code>.</p>
<pre><code>b8 dd bc 1b cf f7 f0 d1 e8 c3 
</code></pre>
<p><a href="https://tio.run/##ZVJhb5swEP3OrzgxIUHibLBVWtWUTdHGh0ptEtF23bROCAwkSNggIGmiLn999I6QEDIUXex3z@/d@cxHC87r@l0ieboKI7guqzCR1fvlF6WPZf9BaRKcY0UiF2fYtvwghC8JVVaofOlVUPgvXh7HXrCtovK3Zf4BG17NTXDJwNyEIcWAU7QCijymGH9uotlwLIpRw@efdmNFWWdJCAMURe28KlBw@nh7iwm0BIR1@pcGvCqAH22KqFr7KTII8EuhNwv6VJGtIQo3DDQLniWoXYb7aQraxzOU@BoWFvmbfuYKVLsQKuh7M@M00eDSYO3qWHqPhIoqMrCYvajR1ot6q0Iee9jt@xR@InW6iUOfp/eBU8h1uhQGFtY6d2cPnutMvsPf/frJvXlwDhvnp/ONwd1k7s3dmx@TJkG7yXQ2/XU3e7zHm8cflkM2IhI833YtsP6EyfBQOJW5TBZLLMhix07T7KUPVCJvD8RZAc3wEtscQ3J9cYFxODx02JLxNGqMzwTJqMMa26F9ot0dphdCeaOj5/iYq1hXKaWFxhVoIdACtPJZ4lCIzug4IzcGeuPZyBvwFVSV5jcYgOO6MBiorfKuNz8TR1fX/3ic@ouyHj3h66pHAh@jjd5R@gY" rel="nofollow noreferrer">Try it online!</a></p>
<h2>Explanation</h2>
<p>Disassembly:</p>
<pre><code>b8 dd bc 1b cf          mov    eax,0xcf1bbcdd
f7 f0                   div    eax
d1 e8                   shr    eax,1
c3                      ret
</code></pre>
<p>The function approximates <span class="math-container">\$\operatorname{round}(\frac{n}{\phi})=\lfloor\frac{n+\frac{\phi}{2}}{\phi}\rfloor=\lfloor\frac{1}{2}\cdot\frac{2^{32}n+2^{31}\phi}{2^{31}\phi}\rfloor\$</span>, where <span class="math-container">\$\phi=\frac{1+\sqrt{5}}{2}\$</span>. <span class="math-container">\$2^{31}\phi\approx3474701533\$</span>, which fits nicely into a 32-bit integer as <code>0xcf1bbcdd</code>. Since <code>div r32</code> works on <code>edx:eax</code>, <code>n</code> can be loaded into <code>edx</code> and <code>0xcf1bbcdd</code> can be loaded into <code>eax</code> to create the numerator of the fraction, while also having <code>eax</code> as the denominator of the fraction after <code>div eax</code>. Afterwards, all that is left is to divide by two, which is handled by <code>shr eax, 1</code>.</p>
</div>
<div id="pu7" class="pu"><h1>m68k assembly (GNU), 16 bytes</h1>
<pre><code>70 00 72 01 d0 81 c1 41 b2 af 00 04 66 f6 4e 75
</code></pre>
<p>Or in assembly:</p>
<pre><code>begin:
    moveq.l #0, %d0;
    moveq.l #1, %d1;
loop:
    add.l %d1, %d0;
    exg.l %d0, %d1;
    cmp.l 4(%sp), %d1;
    bne loop;
    rts;
</code></pre>
<p>Works with both the Linux and the SysV calling conventions (parameters on stack, return in %d0, %d0-%d1 are scratch registers).</p>
<p>The c function definition is:</p>
<pre class="lang-c prettyprint-override"><code>unsigned long prev_fibonacci(unsigned long num);
</code></pre>
<p>All calculations are done in 32 bit mode. 16bit is the same size, only faster.</p>
<p>Code execution takes 22 cycles plus 46 cycles per loop iteration. (On a 68000 w/ a 16bit bus and no waitstates)</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 4 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>kG/V
</code></pre>
<p><a href="https://Not-Thonnu.github.io/run#aGVhZGVyPSZjb2RlPWtHJTJGViZmb290ZXI9JmlucHV0PTEzJmZsYWdzPQ==" rel="nofollow noreferrer">Try it online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>      # Implicit input...
  /   # ...divided by...
kG    # ...phi...
   V  # ...then rounded
      # Implicit output
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 43 bytes</h1>
<p><a href="https://tio.run/##bYw9D4JADIb3@xUdrxoxICRKwuDo4GScjMOJfBkoenQxhN9@HnGzdmjS5@37DLlpjetvjyJnOJqGYFQA96KEzh/a2GpIYW@teV9ObBuqrpjCmRqGDEY3/5Wa0gMxZlrTojNcB8PLsk5wRcsQ1xEG3PvcgR81r6fXcEu61BHiD9kIkgiyFSSUtSiU7ljK/9h3Uh9/m5OalPsA" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>def f(n:Int)=((n*math.sqrt(5)-n+1)/2).toInt
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DRH001/Rattle" rel="nofollow noreferrer">Rattle</a>, 17 bytes</h1>
<pre><code>|r`=+s[$+~[\gq]]0
</code></pre>
<p><a href="https://www.drh001.com/rattle/?flags=&amp;code=%7Cr%60%3D%2Bs%5B%24%2B%7E%5B%5Cgq%5D%5D0&amp;inputs=34" rel="nofollow noreferrer">Try it Online!</a></p>
<h1>Explanation</h1>
<pre><code>|             take input
 r`           save input as special arg
   =          set top of stack to 0
    +         increment
     s        save value of 1 to storage
      [...]0  infinite loop

 $            swap top of stack with value in storage
  +~          increment top of stack by value in storage
    [\...]    if the top of the stack is equal to the special arg...
      g       get the value in storage (i.e. the previous Fibonacci value)
       q      quit and print implicitly
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Raku, 40 bytes</h1>
<pre><code>sub p(\n,\a=0,\b=1){n==b??a!!p(n,b,a+b)}
</code></pre>
<p><a href="https://glot.io/snippets/gfwihepb2g" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, <s>12</s> 14 bytes</h1>
<pre><code>1.61803&lt;.@%~&gt;:
</code></pre>
<p>Pretty self-explanatory.</p>
<p><a href="https://ato.pxeger.com/run?1=JYw9CsJAFAZ7TzEIGgSz5O3bvwQNgiAIVl5BsoiNjbZexCYWtvYexdsYSPExzBTf83Xpv1NTZNYNBUsqmmGlYXs87N73Wy7TR0yQVOnKbGaPthnjb7-YdKfzlTxvsSiehChWUIcfrEacw6qiMRKkok4R8XXE-uRwkoQQgx8P-37kHw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>1.61803&lt;.@%~&gt;:
            &gt;:  NB. increment input
1.61803         NB. golden ratio
          %~    NB. flip arg order and divide
       &lt;.@      NB. then floor the result
</code></pre>
<p>I saw <code>1.618</code> might be too inaccurate. <code>-:&gt;:%:5</code> results in <code>1.61803</code>, so I added the extra digits.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">&gt;&lt;&gt;</a>, 17 bytes</h1>
<pre><code>01\~n;
=?\:@+:{:}
</code></pre>
<p><a href="https://tio.run/##S8sszvj/38Awpi7PmsvWPsbKQduq2qr2////umUWlgA" rel="nofollow noreferrer">Try it online</a></p>
<p><strong>Explanation</strong></p>
<p>Starts at <strong>0,1</strong>.<br />
Calculates the next Fibonacci number until we reach the input.<br />
Prints the second newest.</p>
</div>
<div id="pu14" class="pu">
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 59 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import.&quot;math&quot;
func f(n float64)float64{return Round(n/Phi)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY9JDsIwDEX3OYXVVSOFoRNtQdwBsUUIhSEQ0ToopKuqR-AEbCokDsFRuA0ulI39_azv4f44mvZ1kbuzPB6glBqZLi_GuqGnSuc9K6cG2Xv2Z6V0J4-pCnegfARVGOkmMe9zbQ-usghLU-Hex9HipHnTj7h9Td0Cn9dM6e0VpnNYrf_WUEAkIBGQCQhIhQGBmEiHcmIxFWFEnShNBUyCsYA8IxUkOcUwyeKGKWNhI3A6txLpnW5LzRZWoyvQR9HdzDlrWH9U2_7yBw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>wow built-in constants</p>
<h3>Calculated version, 72 bytes</h3>
<pre class="lang-go prettyprint-override"><code>import.&quot;math&quot;
func f(n float64)float64{return Round(2*n/(1+Pow(5,0.5)))}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY9BTsMwEEX3PsUoKxuGUjtxm1TqnmXVLULIlLpENOPKOGIR5QicgE1UiUNwFG7DBNLNzJ830v8zn-dDGL5PbvfqDntoXE2ibk4hplnmm5R9tcnflD93F9a49JIJ39IOvCTwx-DSolBT7-I-tZFgG1p6luaKbqW-3oR3aXE-s0qpfvL7-HMY06TqhK-f3mC1hvuHi49ByBEsQomgWRnNoGAyoopZwYPJeZMvlwgLPUeoSlbaVlyNLYte-BDhEWm1jo74tzGlE5tYUzqSJBwfUEr0YjpqGP77Lw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/Seggan/Fig" rel="nofollow noreferrer">Fig</a>, <span class="math-container">\$5\log_{256}(96)\approx\$</span> 4.116 bytes</h1>
<pre><code>_\mG}
</code></pre>
<p><a href="https://fig.fly.dev/#WyJfXFxtR30iLCI0MTgxIl0=" rel="nofollow noreferrer">Try it online!</a></p>
<p>No round builtins, so I use the old increment and floor trick.</p>
<pre><code>_\mG}
    } # The input number incremented
 \    # Divided by
  mG  # The golden ratio
_     # Floor
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 35 bytes</h1>
<pre><code>1+0.
N+M:-nth1(M,_,_),X is N-M,M+X.
</code></pre>
<p><a href="https://tio.run/##KyjKz8lP1y0uz/z/31DbQI/LT9vXSjevJMNQw1cnXideUydCIbNYwU/XV8dXO0Lvv5WugrGJtq@OQkFRZl6Jhq@m3n8A" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>-9 bytes thanks to Jo King</p>
<p>Of course, it's shorter to just use floating point:</p>
<h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 31 bytes</h1>
<pre><code>N/M:-M is round(2*N/(1+5^0.5)).
</code></pre>
<p><a href="https://tio.run/##KyjKz8lP1y0uz/z/30/f10rXVyGzWKEovzQvRcNIy09fw1DbNM5Az1RTU@@/la6CsYm@r45CQVFmXomGL1AIAA" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1>TI-BASIC, 13 bytes</h1>
<pre><code>round(2Ans(1+√(5))⁻¹,0
</code></pre>
<p><strong>Hexdump:</strong><br />
(Token hex-values found <a href="http://tibasicdev.wikidot.com/tokens" rel="nofollow noreferrer">here</a>.)</p>
<pre><code>12 32 72 10 31 70 BC 35 11 11 0C 2B 30 | round(2Ans(1+√(5))⁻¹,0
</code></pre>
<p>Takes input in <code>Ans</code> and prints the requested output in the challenge.</p>
<p><strong>Explanation:</strong></p>
<pre><code>round(2Ans(1+√(5))⁻¹,0           ; full program

           1+√(5)                ; phi * 2
          (      )⁻¹             ; 1 / (phi * 2)
       Ans                       ; Ans / (phi * 2)
      2                          ; Ans / phi
round(              ,0           ; round to nearest integer
</code></pre>
<hr />
<p><strong>Note:</strong> TI-BASIC is a tokenized language.  Character count does <em>not</em> equal byte count.</p>
<p>TI-BASIC only has decimal precision up to 14 decimals for calculations and 10 decimals for equivalence.</p>
<p>Byte count is determined via the following steps:</p>
<ol>
<li>Find the program's size via <code>MEM</code>&gt;<code>Mem Mgmt/Del…</code>&gt;<code>Prgm…</code></li>
<li>Subtract the length of the program name</li>
<li>Subtract the program header length, which is 9 bytes</li>
</ol>
</div>
<div id="pu18" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 29 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n{a=b=1;0while n&gt;a=b+b=a;b}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1y6vOtE2ydbQ2qA8IzMnVSHPDsjVTrJNtE6q/V@gkBZtaGIS@x8A" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, <s>25</s> 22 bytes</h1>
<p><em>-3 bytes thanks to <a href="https://codegolf.stackexchange.com/users/92689/steffan">@Steffan</a></em></p>
<pre><code>pp-p~1
f(n)=round(n/p)
</code></pre>
<p>Port of some of the other answers.</p>
<p><a href="https://www.desmos.com/calculator/ghhxxfiubs" rel="nofollow noreferrer">Try It On Desmos!</a></p>
</div>
<div id="pu20" class="pu"><h2>Brev, <s>50</s> 45 bytes</h2>
<pre><code>(define((p x y)n)(if(= n y)x((p y(+ x y))n)))
</code></pre>
<p>Example:</p>
<pre><code>(map (p 0 1) '(34 13 55 2))
=&gt; (21 8 34 1)
</code></pre>
</div>
<div id="pu21" class="pu"><h1><a href="https://esolangs.org/wiki/Brainfuck" rel="nofollow noreferrer">Brainfuck</a>, 94 bytes</h1>
<pre><code>&gt;&gt;&gt;&gt;+&lt;&lt;&lt;+[[-]&lt;[-&gt;+&gt;+&lt;&lt;]&gt;&gt;[-&lt;&lt;+&gt;&gt;]&gt;&gt;[-&gt;+&gt;+&lt;&lt;]&gt;&gt;[-&lt;&lt;+&gt;&gt;]&lt;&lt;&lt;[-&gt;&gt;+&lt;&lt;]&gt;[-&lt;+&gt;]&gt;[-&lt;+&lt;&lt;&lt;-&gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;]&gt;&gt;
</code></pre>
<p>Input should be entered into the first address. Output is at the address pointed to when the program terminates.</p>
<p>Might add an explanation later.</p>
</div>
<div id="pu22" class="pu"><h1><a href="https://esolangs.org/wiki/BitCycle" rel="nofollow noreferrer">BitCycle (-u)</a>, 93 bytes</h1>
<p><a href="https://dloscutoff.github.io/Esolangs/BitCycle/?p=c4sc4jcwncztA2jsr1sczBcBcsCc3secnjcwrsczcqiB2isc2qoczcbr1DzcDcnc2tCcezrADAznc3tc2nc3Ba&amp;i=MjE_&amp;f=1" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>    v    / &lt;^ ~+AA/v
1v ~B B vC   v&gt; ^/ &lt;
v ~ ?\BB\v  ?= ~ !
1D~ D ^  +C &gt;~
ADA~^   +  ^   B@
</code></pre>
<p>The program generates a Fibonacci number, doubles it, and compares it to the input. If it's greater than or equal to the input, it is halved and output, otherwise it's discarded and the next number is generated.</p>
<pre><code>          the question mark [input] hits a splitter [\]. one bit is redirected while the rest of the bits move to top B  [input].
1v ~B     top D [2fib(n-1)], which starts with 2, is emptied to right A [2fib(n)] and left A [intermittent]. 
v ~ ?\B   bottom D [2fib(n-2)] empties to right A.
1D~       right A empties to top D and top B [2fib(n)].
ADA~      left A empties to bottom D [2fib(n-2)].
</code></pre>
<pre><code>v    / &lt;   *'top B' refers to BOTH B's; 'bottom B' refers to BOTH B's*
B B vC     if bottom B [input] isn't empty, it hits a splitter. one bit is redirected to D [intermittent] while the rest of the bits re-enter bottom B.
  BB\v     top B [2fib(n)] hits a splitter. one bit is redirected to top C [2fib(n)] while the rest re-enter top B.
D ^  +C    if bottom B is empty, top B hits another splitter. one bit is redirected to bottom C [&quot;2fib(n) &gt;= input&quot;?].
^   +  ^   D will eventually empty to bottom B.
</code></pre>
<pre><code>   ^ ~+AA/v   *'A' refers to BOTH A's
C   v&gt; ^/ &lt;   if bottom C [&quot;2fib(n) &gt;= input&quot;?] isn't empty, it hits a switch. the bits are redirected to B [terminator]
   ?= ~ !     if bottom C is empty, top C [2fib(n)] hits a switch. the bits are redirected into the question mark, destroying them.
 C &gt;~         if bottom C isn't empty, top C empties to A [fib(n)]
      B@      A hits 2 splitters. one bit is redirected away, and another is redirected into the exclamation mark [output]. the rest of the bits re-enter A.
              B empties into the at-sign, which terminates the program.
</code></pre>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 10 bytes</h1>
<pre><code>Ua*DRT5//2</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgebSSbkWBUuyCpaUlaboWq0ITtVyCQkz19Y0gAlDxm2rRStGGCkYKxgqmChYKhsYKRoYKxiYKpkCepYKhiYmCkbFxLNwYAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu24" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>17 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>{⌊.5+⍵÷.5×1+5*.5}
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=q37U06Vnqv2od@vh7Xqmh6cbaptq6ZnWAgA&amp;f=e9Q39VHbhDQFQwtjM2NDQ0sDY65HUCELSwA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>5</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>12</s> 11 bytes</h1>
<pre><code>--2!(1-%5)*
</code></pre>
<p><a href="https://ngn.codeberg.page/k/#eJxNjU1OwzAYRPc+xYegUgK4xn+xYx+DZVXR1Nht1NYucYJSoXJ2LLHJavRGTzPBYMweKopXsn5GaDQ/T5vb72ACAMx2l0622oWuP9vZ3uxQb+8o9Pt3/zX56LxhwEGCBsqBUeACZKEWqBDAOAeuFDT0DVqtgMpWAZNagKCaQqMaWe42izVLXzH9WBRbhF6qpRBgQTVCBB3H8ZoNIS59+kM6h3UeO3fyszt28eDXLl1IsfPYp5gJE0pzSa6D/+7TlHEZS7Fzrsdxuuz9UAQtVPP4H+gPmTxTfA==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Applies @Albert.Lang's approach from <a href="https://codegolf.stackexchange.com/questions/247835/previous-fibonacci-number?answertab=scoredesc#comment554398_247844">this comment</a>.</p>
<ul>
<li><code>(1-%5)*</code> calculate 1 minus the square root of 5 (i.e. <code>-1.2360679774997898</code>) and multiply it by the (implicit) input</li>
<li><code>-2!</code> integer divide by 2 (rounding towards 0, e.g. <code>-8!-7</code> returns <code>-1</code>)</li>
<li><code>-</code> negate (and implicitly return)</li>
</ul>
</div>
<div id="pu26" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>21</s> 22 bytes</h1>
<pre><code>{_x%1.618033988749895}
</code></pre>
<p><a href="https://ngn.bitbucket.io/k#eJxLs6qOr1A11DMztDAwNra0sDA3sbSwNK3l4kpTMDG0MAQAhuYHhA==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Increased 1 byte to round the number.</p>
</div>
<div id="pu27" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 10 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Çâ'Ç,¼)í&quot;─
</code></pre>
<p><a href="https://staxlang.xyz/#p=808327802cac29a122c4&amp;i=2%0A3%0A5%0A8%0A19134702400093278081449423917&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>
<h3>Approach</h3>
<ul>
<li>Start with an infinite Fibonacci generator</li>
<li>Keep values while they are less than the input, resulting in array e.g. <code>[1, 1, 2, 3, 5]</code>.</li>
<li>Extract last element.</li>
</ul>
</div>
<div id="pu28" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 6 bytes</h1>
<pre><code>i*½←√5
</code></pre>
<p><a href="https://tio.run/##yygtzv6f@6ip8X@m1qG9j9omPOqYZfr///9oQx0jHWMdUx0LHUNjHSNDHWMTHVMgz1LH0MREx8jYOBYA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>Same strategy as <a href="https://codegolf.stackexchange.com/a/247850/95126">my R answer</a> (and also those of <a href="https://codegolf.stackexchange.com/a/247844/95126">Luis Mendo</a> and <a href="https://codegolf.stackexchange.com/a/247840/95126">unmitigated</a>).</p>
<p>(<a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a> has a fibonacci sequence built-in, but using it here seems to come-out longer at <a href="https://tio.run/##yygtzv7/P1gx/1HbhEdNa45sSPv//7@RIQA" rel="nofollow noreferrer">7 bytes</a>: <code>S!o←€İf</code>).</p>
<p>Update: proven wrong by <a href="https://codegolf.stackexchange.com/a/247923/95126">Leo</a></p>
</div>
<div id="pu29" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 6 bytes</h1>
<pre><code>ÞFḟ‹∆f
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLDnkbhuJ/igLniiIZmIiwiIiwiMzQiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 5 bytes</h1>
<pre><code>→←xİf
</code></pre>
<p><a href="https://tio.run/##yygtzv7//1HbpEdtEyqObEj7//@/kSEA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>Makes use of the built-in list of Fibonacci numbers.</p>
<h3>Explanation</h3>
<pre><code>→←xİf
   İf  Take the list of Fibonacci numbers
  x    Split it on occurrences of the input
 ←     Get the first sub-list
→      Get the last element of that
</code></pre>
</div>
<div id="pu31" class="pu"><h3><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>50 bytes</s> 48 bytes</h3>

<pre class="lang-python prettyprint-override"><code>def f(n,a=0,b=1):
 while b&lt;n:a,b=b,a+b
 return a
</code></pre>
<p><a href="https://tio.run/##ZY1NbsMgEEb3nGJ2xgqJDLZUKSq9iOsFtofaakUQECWN5bMTTNNsMqtv/t6zv2E6mTrGETVoapiSFeslL48ELtP8g9C/m6NKo56pXU/AYTg7AyoG9MHLVrC6I3i1OAQcZcuZ6Ig@ObjCbMAp84VUMF5VG/D/7KCsRTPSjGj3vCsJ5Pyy2D2SSCfDhMM3OpBAi8@zeGuGgkFOvC7KLA0MN@1ttn8I9lRu@lQ@fWsaytxYN5tAdbGEFfYfsPgVloekRSl9tyZs5E0T7w" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu32" class="pu"><h1><a href="https://www.r-project.org" rel="noreferrer">R</a>, <s>23</s> <s>22</s> 20 bytes</h1>
<p><em>Edit: -1 byte thanks to pajonk, then -2 bytes thanks to att</em></p>
<pre><code>\(x)(x*5^.5-x+1)%/%2</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMHqgqLUsvi0zCQFG92lpSVpuhZbYjQqNDUqtEzj9Ex1K7QNNVX1VY0gUjc1YKo1kjWMdIx1THUsdAyNdYwMdYxNdEyBPEsdQxMTTU0uiPoFCyA0AA" rel="noreferrer">Attempt This Online!</a></p>
<p>The ratio between consecutive fibonacci numbers famously converges towards <a href="https://en.wikipedia.org/wiki/Golden_ratio" rel="noreferrer">the golden ratio phi</a>, equal to <code>(1+5^.5)/2</code>.<br />
This is sufficiently accurate that rounding produces the correct value for all fibonacci numbers, including even the second <code>1</code> at the start which we don't need to handle here.</p>
<p>(Edit after reading some other answers: this was independently-derived, but is also the approach taken by <a href="https://codegolf.stackexchange.com/a/247844/95126">Luis Mendo</a> and <a href="https://codegolf.stackexchange.com/a/247840/95126">unmitigated</a>)</p>
</div>
<div id="pu33" class="pu"><h1>JavaScript, <s>21</s> 17 bytes</h1>
<pre class="lang-js prettyprint-override"><code>n=&gt;n*5**.5-n+1&gt;&gt;1
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNEts/ifZvs/z9YuT8tUS0vPVDdP29DOzvB/QVFmXolGmoaRpiYXjG2MxDZFYlsgsQ2RFRkZIus2QdaOot8S2QAToLr/AA" rel="noreferrer">Try it online!</a></p>
<p>-4 bytes thanks to <a href="https://codegolf.stackexchange.com/users/81203">att</a>.</p>
</div>
<div id="pu34" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 27 bytes</h1>

<pre class="lang-c prettyprint-override"><code>f(a){a=2*a/(1+sqrt(5))+.5;}
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/247840/112488">Unmitigated's JavaScript answer</a>.</p>
<p><a href="https://tio.run/##TVDRbsMgDHyGr3A7TYKRdkulPlH2JVMlkpAOaSMdodWkLvv17CDTtAfss82dD9rNqW3nuRdW3qzZPdhHUavxIyaxl1Jt93qa73xo3y6dO4yp88P29ZlzHxJPbkwCgM7RXSvKKLjPJPmNs1xEN2rOEMlQL8oI9Tli1ov1fUeKEL4RXsK6Klza/IqBtXRAyRrpEkNu0sqUG5pPi4l364O4Dr77W2srasCFRqb2QyRh4aBGe0kBKeI8acAD1chKBUngs4aOhixsMptRo0vPZIkjNRKWbVZlkb4MlQ/I6/K7pn8@4W7@AQ" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu35" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 4 bytes</h1>
<pre><code>‘:Øp
</code></pre>
<p>Add 1 to the input and integer-divide by the golden ratio.</p>
<p><a href="https://tio.run/##y0rNyan8//9RwwyrwzMK/v//b2wCAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu36" class="pu"><h1><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, <s>38</s> 37 bytes</h1>
<p>This works for an aribrary size of inputs. We iterate through the Fibonacci sequence until we find some number <code>x</code>, that is larger than half the input <code>n</code>. This is works because the previous fibonacci number is roughly <code>0.618*n</code>.
The Fibonacci list <code>f</code> was borrowed from <a href="https://codegolf.stackexchange.com/questions/85/fibonacci-function-or-sequence#comment110_89">R. Martinho Fernandes</a>.</p>

<pre class="lang-hs prettyprint-override"><code>g n=[x|x&lt;-f,2*x&gt;=n]!!0
f=0:scanl(+)1f
</code></pre>
<p><a href="https://tio.run/##y0gszk7Nyfn/P10hzza6oqbCRjdNx0irws42L1ZR0YArzdbAqjg5MS9HQ1vTMO1/bmJmnoKtQkFRZl6JgopCbmKBQrpCtJGOsY6pjoWOoXHsfwA" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu37" class="pu"><h1>Haskell, 57 bytes (or 14 bytes)</h1>
<p>Complete solution which handles arbitrarily large input:</p>
<pre><code>f n=(x!!).flip(-)1.length.fst.span(&lt;n)$x
x=scanl(+)0(1:x)
</code></pre>
<p>Explanation:</p>
<ol>
<li><p>Let <code>x</code> be a an infinite list of fibonacci numbers ( <code>x = scanl (+) 0 (1:x)</code> ).</p>
</li>
<li><p>Partition list into a tuple (<code>[Int], [Int]</code>), the leftmost portion being all numbers <code>&lt;</code> than the input.</p>
</li>
<li><p>Take the first portion with <code>fst</code>.</p>
</li>
<li><p>Subtract 1 from the length of that list.</p>
</li>
<li><p>Extract (<code>!!</code>) the number with the resultant (<code>idx--</code>) index from the infinite list.</p>
</li>
</ol>
<p>Simple solution:</p>
<pre><code>round.(/0.618)
</code></pre>
</div>
<div id="pu38" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 31 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>[int](&quot;$args&quot;/1.61803398874989)
</code></pre>
<p><a href="https://tio.run/##K8gvTy0qzkjNyfn/PzozryRWQ0klsSi9WEnfUM/M0MLA2NjSwsLcxNLCUvP///9GxsYA" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
<p>The ratio of two adjacent numbers in the Fibonacci series rapidly approaches ((1 + sqrt(5)) / 2). So if N is divided by ((1 + sqrt(5)) / 2) and then rounded, the resultant number will be the previous Fibonacci number...</p>
<p>at least according to <a href="https://www.geeksforgeeks.org/find-the-previous-fibonacci-number/#:%7E:text=Approach%3A%20The%20ratio%20of%20two,be%20the%20previous%20Fibonacci%20number." rel="nofollow noreferrer">this article.</a></p>
<p>-16 thanks <a href="https://codegolf.stackexchange.com/users/80745/mazzy">mazzy</a></p>
</div>
<div id="pu39" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, <s>29</s> <s>28</s> <s>27</s> 24 bytes</h1>
<p><em>The footer uses <a href="https://codegolf.stackexchange.com/a/247843/36398">@Noodle9's checker code</a></em>.</p>
<p><em>1 byte saved thanks to <a href="https://codegolf.stackexchange.com/users/58834/chris">@Chris</a>!</em></p>
<p><em>3 more bytes off thanks to <a href="https://codegolf.stackexchange.com/users/101374/albert-lang">Albert.Lang</a>!</em></p>
<p>Function that returns an integer-valued <code>float</code>. It fails for large inputs due to floating-point inaccuracies.</p>

<pre class="lang-python prettyprint-override"><code>lambda n:~n*(1-5**.5)//2
</code></pre>
<p><a href="https://tio.run/##ZY1BDoIwEEXXcorZ0WJRWzQmJPUiyAJhEKLWhtYEJXh1rFVXzupN5s9/@m6bq0qmWu6nc3E5VAWo9KkiwuNNFC02dLkUk0VjjcwES/IAe42lxUpmnIk8qK8d9NAq6Ap1RCIYX61oGsx@sUWhNaqK@Ios5jkNZp7/DvMvCRcpGyxP2IEEEu5vYrsuQwaeeBJSL7UM39pHqz8VDH5Kpwc3xn3XxFK/6K5VltThYEeIdzCYEYavJEMpTT662ukF" rel="noreferrer">Try it online!</a></p>
</div>
<div id="pu40" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 16 bytes</h1>
<pre><code>n-&gt;n*2\/(1+5^.5)</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMHiNAXbpaUlaboWG_J07fK0jGL0NQy1TeP0TDUhwjfN0_KLNDIVbBWMdBQMDQx0FPKA7LTMpPy8xOTkTI1MTWuFgqLMvBKNPAUlBV07IJGmkaepCdW-YAGEBgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/247840/9288">Unmitigated's JavaScript answer</a>. <code>a\/b</code> is a short way to write <code>round(a/b)</code>.</p>
<p>PARI/GP's floating point number is 128-bit by default. This gives the correct result until the 184th Fibonacci number (<code>127127879743834334146972278486287885163</code>).</p>
</div>
<div id="pu41" class="pu"><h1><a href="https://github.com/maxbergmark/mathgolf/blob/master/math_golf.txt" rel="nofollow noreferrer">MathGolf</a>, <s>6</s> 4 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>)φ/i
</code></pre>
<p>-2 bytes porting <a href="https://codegolf.stackexchange.com/a/247842/52210"><em>@emanresuA</em>'s Vyxal answer</a>, which is in turn a port of <a href="https://codegolf.stackexchange.com/a/247840/52210"><em>@Unmitigated</em>'s JavaScript answer</a>.</p>
<p><a href="https://tio.run/##y00syUjPz0n7/1/zfJt@5v//RlzGXKZcFlyGxlxGhlzGJlymQJ4ll6GJCQA" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Original 6 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a> answer:</strong></p>
<pre><code>╒fg&lt;┤Þ
</code></pre>
<p><a href="https://tio.run/##y00syUjPz0n7///R1Elp6TaPpiw5PO//fyMuYy5TLgsuQ2MuI0MuYxMuUyDPksvQxAQA" rel="nofollow noreferrer">Try it online.</a></p>
<p><code>g&lt;</code> could alternatively also be <code>á&gt;</code>: <a href="https://tio.run/##y00syUjPz0n7///R1ElphxfaPZqy5PC8//@NuIy5TLksuAyNuYwMuYxNuEyBPEsuQxMTAA" rel="nofollow noreferrer">try it online</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>)      # Increase the (implicit) input-integer by 1
 φ/    # Divide it by the golden ratio 1.618033988749895
   i   # Truncate it to an integer
       # (the +1 and truncate act as a round builtin here, which MathGolf lacks)
       # (after which the entire stack is output implicitly as result)
</code></pre>

<pre class="lang-python prettyprint-override"><code>╒      # Push a list in the range [1, (implicit) input-integer]
 f     # Get the 0-based n'th Fibonacci number for each value in this list
  g    # Filter it by:
   &lt;   #  Where it's smaller than the (implicit) input-integer
    ┤  # Extract the trailing value
     Þ # Discard the list from the stack, keeping just that value
       # (after which the entire stack is output implicitly)
</code></pre>
</div>
<div id="pu42" class="pu"><h1><a href="https://gcc.gnu.org/c99status.html" rel="noreferrer">C(gcc)</a>, <s>57,55,53,50,45</s>, 36 bytes</h1>
<pre class="lang-c prettyprint-override"><code>x;y;f(a){for(x=y=1;y-a-x;y+=x=y-x);}
</code></pre>
<p>Naive approach based on calculating all previous Fibonacci numbers, breaking when we reach the input.</p>
<p><a href="https://tio.run/##dczBCgIhGATgu08hG4GyGbkRBH/2JF1E1xJKw3VDWfbZzUu3nNvMB6PYXalSEmQwRNLF@ECSyIJDZpLVuRe1skRhLRvr1HPW42WK2vr944qsi/glrSMfbzVdEK55h7oa0m31zXU7QwZK4S8cW3BqwbkFvPk18J@EMc7B4QOgtXwB" rel="noreferrer">Try it here</a></p>
<p>Edit:  Thanks for Neil, golfing <s>2</s> 5 bytes.</p>
<p>Edit2: Thanks Dominic van Essen for golfing an other 5 bytes.</p>
<p>Edit3: Thanks att for golfing 9 bytes.</p>
</div>
<div id="pu43" class="pu"><h1><a href="https://factorcode.org/" rel="noreferrer">Factor</a> + <code>math.unicode</code>, <s>21</s> <s>19</s> <s>18</s> 14 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ φ / round ]
</code></pre>
<p><a href="https://tio.run/##S0tMLskv@h8a7OnnbqWQm1iSoVBQlFpSUllQlJlXopCdWpSXmgMW10vOzysuScwrKYZwS/Myk/NTUiGctNK85JJMoAIFay4uE0MLQ67/0Qrn2xT0FYryS/NSFGL/Jyfm5Cjo/QcA" rel="noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>-4 thanks to @DominicvanEssen!</p>
<p>Divide the input by the golden ratio and round the result.</p>
</div>
<div id="pu44" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 26 bytes</h1>
<pre><code>.+
$*
(\2?(\1)|1)+1
$1$2
1
</code></pre>
<p><a href="https://tio.run/##K0otycxL/K@q4Z7wX0@bS0WLSyPGyF4jxlCzxlBT25BLxVDFiMvw/38LLmMTLkMTEwA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation: Loosely based on @MartinEnder's Retina answer to <a href="https://codegolf.stackexchange.com/q/126373">Am I a Fibonacci Number?</a>.</p>
<pre><code>.+
$*
</code></pre>
<p>Convert to unary.</p>
<pre><code>(\2?(\1)|1)+1
</code></pre>
<p>Match as many Fibonacci numbers as possible. The first iteration only matches the leading <code>1</code> while subsequent iterations match iteration of the loop matches the penultimate Fibonacci number (if any), then the previous Fibonacci number, while saving it as the next penultimate Fibonacci number. The match actually sums the Fibonacci sequence, resulting in a sequence one less than the Fibonacci sequence, so a final <code>1</code> needs to be matched.</p>
<pre><code>$1$2
</code></pre>
<p>Because the match is summing the sequence, the final capture of the sequence <code>$1</code> is actually the Fibonacci number before the one we want, so we need to add on the penultimate matched Fibonacci number <code>$2</code>.</p>
<pre><code>1
</code></pre>
<p>Convert to decimal.</p>
</div>
<div id="pu45" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="noreferrer">Wolfram Language (Mathematica)</a>, 17 bytes</h1>
<pre><code>Round[2#/++√5]&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7Pyi/NC8l2khZX1v7Uccs01i1/4GlmaklDgFFmXkl0cq6dmkOyrFqDlpumUn5eYnJyZl1wcmJeXVBiXnpqdHGOkYGsf8B" rel="noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu46" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 24 bytes</h1>
<pre><code>ＮθＦ²⊞υιＷ‹⌈υθ⊞υΣ…⮌υ²Ｉ§υ±²
</code></pre>
<p><a href="https://tio.run/##Rcy9DoIwFIbh3avoeE6Cg4SNyXQiUULwCmo92iYthf4gXn0tLq5vnu@TSnjphMm5m@YU@2Tv5GHB9vB0nkGNbEhBQaqYLu2ttCEGFwoBrmLTNllIWLEF/@5WGv9IQ1y5GUZayQf6qRqxfAxeTxG4CBHOsZsetO2rnl4iEuwE25xPTZOPq/kC" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｎθ
</code></pre>
<p>Input the target.</p>
<pre><code>Ｆ²⊞υι
</code></pre>
<p>Start with <code>[0, 1]</code>.</p>
<pre><code>Ｗ‹⌈υθ
</code></pre>
<p>Repeat until the target is reached.</p>
<pre><code>⊞υΣ…⮌υ²
</code></pre>
<p>Generate the next Fibonacci number.</p>
<pre><code>Ｉ§υ±²
</code></pre>
<p>Output the highest one less than the input.</p>
</div>
<div id="pu47" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="noreferrer">Vyxal</a>, 4 bytes</h1>
<pre><code>kg/ṙ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCJrZy/huZkiLCIiLCIyIl0=" rel="noreferrer">Try it Online!</a></p>
<p>Port of Unmitigated's JavaScript answer</p>
<pre><code>  /  # Divide by...
kg   # Phi
   ṙ # Round
</code></pre>
</div>
<div id="pu48" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 4 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÅF¨θ
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//cKvboRXndvz/b2gAAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/R/ic7jncGtaWaW9ksKjtkkKSvaV/w@3uh1acW7Hf53/AA" rel="nofollow noreferrer">verify some more test cases</a>.</p>
<p><code>¨θ</code> could be a lot of different alternatives, like <code>Á¤</code> or <code>`\</code>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>ÅF    # Push a list of Fibonacci numbers lower than or equal to the (implicit) input
  ¨   # Remove the last one (the input)
   θ  # Keep the next last one
      # (after which it is output implicitly as result)
</code></pre>
</div>
<div id="pu49" class="pu"><h1><a href="https://github.com/Radvylf/rSNBATWPL" rel="nofollow noreferrer">rSNBATWPL</a>, 31 bytes</h1>
<pre><code>n~(y=1;x~cond{y!n}{{y=y+x}}$x)$
</code></pre>
<p><a href="https://dso.surge.sh/#@WyJyYWlzaW4tYmF0d2FmZmxlIixudWxsLCJnPW5+KHk9MTt4fmNvbmR7eSFufXt7eT15K3h9fSR4KSQ7IiwiZyQxMyIsIiIsIiJd" rel="nofollow noreferrer">Try It Online!</a></p>
<p>Port of my JS answer:</p>
<blockquote>
<p>This is a recursive solution, based off one of the two most common recursive fibonacci algorithms, which involves a function <code>f(x, y) = f(y, x + y)</code> that stops at some point. With this function, <code>x</code> is always a fibonacci number, and <code>y</code> is always the fibonacci number after it, so once <code>y</code> is the fibonacci number we were given as input, we know <code>x</code> is the one before it.</p>
</blockquote>
</div>
<div id="pu50" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 41 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,a=0,b=1:n-b and f(n,b,a+b)or a
</code></pre>
<p><a href="https://tio.run/##xVBBboQwDLzzCt8A1SvhBBKyUvqRtocAQYvaZhGkUlvE26mD2jc0h2Q89owdz1/xdg/yOEb75t67wUFAZyvsLF3DpQMXBhiLgB26h668L@CO6Ne4goVCIEiEBqFFIEaCmKiZSZRhruZASM5IrREUVQimZUSN4Vs0LedralmmtGIRVaZW/GhNzIlWNVxWK6m4gW4qkUoEScOOZBQr2Zl0S1Rm/nP2ffRDmitp/320Mutvvn/1S5oof/4Quu5zhBORzMts5GVG9DAF@J7m4twqwt8/ymsGfNKexyKWZzAvU4jFmG9xh8sjbOsO22@TJ2/t@rKz7fED" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu51" class="pu"><h1><a href="https://github.com/Radvylf/rSNBATWPL" rel="nofollow noreferrer">rSNBATWPL</a>, 32 bytes</h1>
<pre><code>x~for{t=1;x&gt;t;f=b}{b=t;t=f+t}$-1
</code></pre>
<p><a href="https://dso.surge.sh/#@WyJyYWlzaW4tYmF0d2FmZmxlIixudWxsLCJnPXh+Zm9ye3Q9MTt4PnQ7Zj1ifXtiPXQ7dD1mK3R9JC0xOyIsImckMTMiLCIiLCIiXQ==" rel="nofollow noreferrer">Try It Online!</a></p>
<p>Port of R answer.</p>
</div>
<div id="pu52" class="pu"><h1>JavaScript, Node.js, 32 bytes</h1>
<p><em>-1 thanks to Arnauld</em></p>
<pre><code>n=&gt;(y=1,f=x=&gt;y-n?f(y,y+=x):x)(0)
</code></pre>
<p><strong>Explanation:</strong></p>
<p>This is  a recursive solution, based off one of the two most common recursive fibonacci algorithms, which involves a function <code>f(x, y) = f(y, x + y)</code> that stops at some point. With this function, <code>x</code> is always a fibonacci number, and <code>y</code> is always the fibonacci number after it, so once <code>y</code> is the fibonacci number we were given as input, we know <code>x</code> is the one before it.</p>
</div>
<div id="pu53" class="pu">
<h1><a href="https://www.r-project.org" rel="noreferrer">R</a>, 27 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x){while(x&gt;T)T=F+(F=T);F}</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMHqgqLUsvi0zCQFG92lpSVpuha7YzQqNKvLMzJzUjUq7EI0Q2zdtDXcbEM0rd1qISrWwvRoGBprckHEFiyA0AA" rel="noreferrer">Attempt This Online!</a></p>
<p>Similar to <a href="https://codegolf.stackexchange.com/a/247836/67312">this answer</a>, iterates through the Fibonacci sequence until <code>T==x</code> and returns <code>F</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/247835/">247835</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




