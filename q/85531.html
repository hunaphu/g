<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::85531</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>221</td><td>C# .NET Core</td><td>170114T175659Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/106867#106867">sergiol</a></td></tr>
<tr d-ix="1"><td>205</td><td>Java 8</td><td>180327T194755Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/160470#160470">Jakob</a></td></tr>
<tr d-ix="2"><td>116</td><td>Tcl</td><td>170114T233138Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/106907#106907">sergiol</a></td></tr>
<tr d-ix="3"><td>089</td><td>Perl</td><td>170115T002249Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/106912#106912">user6440</a></td></tr>
<tr d-ix="4"><td>237</td><td>Batch</td><td>160718T122726Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85634#85634">Neil</a></td></tr>
<tr d-ix="5"><td>138</td><td>Python 2</td><td>160718T164722Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85662#85662">mbomb007</a></td></tr>
<tr d-ix="6"><td>147</td><td>PowerShell</td><td>160718T161956Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85655#85655">ThePoShW</a></td></tr>
<tr d-ix="7"><td>180</td><td>PHP</td><td>160718T134952Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85641#85641">Titus</a></td></tr>
<tr d-ix="8"><td>176</td><td>SML</td><td>160717T233732Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85592#85592">Laikoni</a></td></tr>
<tr d-ix="9"><td>048</td><td>Dyalog APL</td><td>160717T223132Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85589#85589">Ad&#225;</a></td></tr>
<tr d-ix="10"><td>054</td><td>bash</td><td>160716T212233Z</td><td><a href="https://codegolf.stackexchange.com/questions/85531/write-a-program-to-display-directory-treehouse/85534#85534">Doorknob</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, 221 bytes</h1>

<pre class="lang-cs prettyprint-override"><code>namespace System.IO{class P{static int n;static void Main(String[]a){Console.WriteLine(new string('&#9;',n++)+Path.GetFileName(a[0]));try{foreach(var f in Directory.GetFileSystemEntries(a[0])){a[0]=f;Main(a);}}catch{}n--;}}}
</code></pre>
<p><a href="https://tio.run/##NY7LasMwEEV/RbtIOHa6N131RSFtA1l0kWYxTMf1gDMK0uDECH@7qibp6nLhPg7GGn2gnAUOFI@AZLZTVDo0rx8JB4jRbFJUUEbDokbamxk9f5s3YLFbDSw/uz249OAl@oGaz8BKaxayQicTLwG7@NLFUqrKVRvQvnkhfeaB3suvhd3d3rlWw5S6QgPY2xGC6cqleeRAqD5M/40r35OUVYq3avqT@669AIFr5xlBsU@z1HUxc855RYorpfPAI/0C" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>
<hr />
<p>The ungolf:</p>
<pre class="lang-cs prettyprint-override"><code>using System.IO;
using System;

class P
{
    static int n=0;
    static void Main(String[] a)
    {
        for (int i=0;i&lt;n;i++) Console.Write('&amp;#9;');
        Console.WriteLine(Path.GetFileName(a[0]));
        n++;

        if(Directory.Exists(a[0]))
            foreach (String f in Directory.GetFileSystemEntries(a[0]))
                Main(new String[]{f});
        n--;
    }
}
</code></pre>
<p>First time I ever recursed a <code>Main</code> function!</p>
<p>I believe a person that has fresher knowledge of C# can golf it more, as I didn't program on C# for some time!</p>
</div>
<div id="pu1" class="pu"><h1>Java 8, 205 bytes</h1>



<pre class="lang-java prettyprint-override"><code>import java.io.*;public interface M{static void p(File f,String p){System.out.println(p+f.getName());if(!f.isFile())for(File c:f.listFiles())p(c,p+"\t");}static void main(String[]a){p(new File(a[0]),"");}}
</code></pre>

<p>This is a full program submission which takes input from its first command-line argument (not explicitly permitted, but done by many others) and prints output to standard out.</p>

<p><a href="https://tio.run/##TY69csIwEIRfRXElBUdQx306aFwSF4o5kTOWdCOdYRiPn13I0FDut7M/g7mar0Dgh9MlZ3QUIouhQI1BfzY0/Y3YC/QM0ZoexN6gnxMbLvQa8CRI/uAIwtYtR/RnQWpu74nB6TCxpsJ49JI2Vp@BD8aBVKpBKz@sxrRGi7Yhvlr6b6tHTLyKVAySfU2b6pcr1Szvq67ckK/FY2fUTNLDTTzrzHHXqbpaE0vOefsfHGzj5D3EBw" rel="nofollow noreferrer">Try It Online</a> (note different interface name)</p>

<h2>Ungolfed</h2>

<pre class="lang-java prettyprint-override"><code>import java.io.*;

public interface M {
    static void p(File f, String p) {
        System.out.println(p + f.getName());
        if (!f.isFile())
            for (File c : f.listFiles())
                p(c, p + "\t");
    }

    static void main(String[] a) {
        p(new File(a[0]), "");
    }
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="http://tcl.tk/" rel="nofollow noreferrer">Tcl</a>, 116 bytes</h1>

<pre><code>proc L f {puts [string repe \t [expr [incr ::n]-1]][file ta $f];lmap c [glob -n -d $f *] {L $c};incr ::n -1}
L $argv
</code></pre>

<p><a href="https://tio.run/##NctBCoMwEAXQfU/xF64KQdzqFbxBmkU6TkIgjWGciiCePXXT7YOnlFurshJmBJz1qxvsppJKhHBlvBSWjyqwqZBgHIszg3M2pMxQjy64KX98BcHGvL5hCsxyM54O54yOruk/YYbrcZOXuLfWelbqlY@cdv4B" rel="nofollow noreferrer" title="Tcl – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>Perl, 89 bytes</h1>

<p>It's useful when there's a find module in the core distribution. Perl's File::Find module does not traverse the tree in alphabetic order, but the spec didn't ask for that.</p>

<pre><code>/usr/bin/perl -MFile::Find -nE 'chop;find{postprocess,sub{--$d},wanted,sub{say" "x$d.$_,-d$_&amp;&amp;++$d&amp;&amp;"/"}},$_'
</code></pre>

<p>The script proper is 76 bytes, I counted 13 bytes for the command-line options.</p>
</div>
<div id="pu4" class="pu"><h2>Batch, 237 bytes</h2>

<pre><code>@echo off
echo %~1\
for /f %%d in ('dir/s/b %1')do call:f %1 %%~ad "%%d"
exit/b
:f
set f=%~3
call set f=%%f:~1=%%
set i=
:l
set i=\t%i%
set f=%f:*\=%
if not %f%==%f:*\=% goto l
set a=%2
if %a:~0,1%==d set f=%f%\
echo %i%%f%
</code></pre>

<p>Where \t represents the literal tab character. This version includes trailing <code>\</code>s on directories but 41 bytes can be saved if they are not needed.</p>
</div>
<div id="pu5" class="pu"><h1>Python 2, 138 bytes</h1>
<p>Modified from <a href="https://stackoverflow.com/a/9728478/2415524">this SO answer</a>. Those are tabs for indentation, not spaces. Input will be taken like <code>&quot;C:/&quot;</code>.</p>

<pre class="lang-python prettyprint-override"><code>import os
p=input()
for r,d,f in os.walk(p):
    t=r.replace(p,'').count('/');print' '*t+os.path.basename(r)
    for i in f:print'   '*-~t+i
</code></pre>
<p><a href="http://ideone.com/4P9uWR" rel="nofollow noreferrer"><strong>Try it online</strong></a> - <em>It's pretty interesting that I'm allowed to browse the directory on Ideone...</em></p>
<p>Same length:</p>
<pre class="lang-python prettyprint-override"><code>from os import*
p=input()
for r,d,f in walk(p):
    t=r.replace(p,'').count(sep);print' '*t+path.basename(r)
    for i in f:print'   '*-~t+i
</code></pre>
</div>
<div id="pu6" class="pu"><h1>PowerShell, 147 bytes</h1>
<pre><code>param($a)function z{param($n,$d)ls $n.fullname|%{$f=$_.mode[0]-ne&quot;d&quot;;Write-Host(&quot; &quot;*$d*4)&quot;$($_.name)$((&quot;\&quot;)[$f])&quot;;If(!$f){z $_($d+1)}}}$a;z(gi $a)1
</code></pre>
<p>Man, I feel like PS should be able to do something like the bash answer, but I'm not coming up with anything shorter than what I've got here.</p>
<p>Explanation:</p>
<pre><code>param($a)                     # assign first passed parameter to $a
function z{param($n,$d) ... } # declare function z with $n and $d as parameters
ls $n.fullname                # list out contents of directory
|%{ ... }                     # foreach
$f=$_.namde[0]-ne&quot;d&quot;          # if current item is a file, $f=true
Write-Host                    # writes output to the console
(&quot; &quot;*$d*4)                    # multiplies a space by the depth ($d) and 4
&quot;$($_.name)$((&quot;\&quot;)[$f])&quot;      # item name + the trailing slash if it is a directory
;if(!$f){z $_($d+1)}          # if it is a directory, recursively call z
$a                            # write first directory to console
z(gi $a)1                     # call z with $a as a directoryinfo object and 1 as the starting depth
</code></pre>
</div>
<div id="pu7" class="pu"><h1>PHP, 180 bytes</h1>

<ul>
<li>first argument: path must have a trailing slash (or backslash)</li>
<li>second argument: level defaults to <code>NULL</code> and will be interpreted as <code>0</code> by <code>str_repeat</code>; will throw a warning if not provided</li>
</ul>

<p></p>

<pre><code>function d($p,$e){$s=opendir($p);echo$b=str_repeat("\t",$e++),$e?basename($p)."/":$p,"
";while($f=readdir($s))echo preg_match("#^\.#",$f)?"":is_dir($p.$f)?d("$p$f/",$e):"$b\t$f
";}
</code></pre>

<ul>
<li>displays hidden files and directories, but does not recurse hidden directories<br>
add parentheses around <code>is_dir(...)?d(...):"..."</code> to remove hidden entries from output (+2)<br>
replace <code>"#^\.#"</code> with <code>#^\.+$#</code> to display/recurse hidden entries but skip dot entries (+2)</li>
<li>may throw errors when directories are nested too deep. Insert <code>closedir($s);</code> before the final <code>}</code> to fix (+13)</li>
<li>will fail if a directory contains an entry with no name, prepend <code>false!==</code> to the while condition to fix (+8)</li>
</ul>

<p><strong>with glob, 182 bytes</strong> (probably 163 in future php)</p>

<pre><code>function g($p,$e){echo$b=str_repeat("\t",$e),$e++?basename($p)."/":$p,"
";foreach(glob(preg_replace("#[*?[]#","[$1]",$p)."*",2)as$f)echo is_dir($f)?g($f,$e):"$b\t".basename($f)."
";}
</code></pre>

<ul>
<li>does not display or recurse hidden files/directories</li>
<li><code>2</code> stands for <code>GLOB_MARK</code>, will append a slash to all directory names, as does <code>ls -F</code></li>
<li>the <code>preg_replace</code> escapes glob special characters<br>
I could have abused <code>preg_quote</code> for this (-19); but that would fail on Windows systems, as the backslash is the directory separator there.</li>
<li>php <em>may</em> soon include a function <a href="https://github.com/hholzgra/glob-quote" rel="nofollow">glob_quote</a>, which will allow the same golfing as <code>preg_quote</code> and work on all systems.</li>
</ul>

<p><strong>with iterators, 183 bytes</strong><br>
(well, not purely iterators: I used implicit <code>SplFileInfo::__toString()</code> to golf <code>$f-&gt;getBaseName()</code> and <code>$f-&gt;isDir()</code> to the old PHP 4 functions.)</p>

<pre><code>function i($p){echo"$p
";foreach($i=new RecursiveIteratorIterator(new RecursiveDirectoryIterator($p),1)as$f)echo str_repeat("\t",1+$i-&gt;getDepth()),basename($f),is_dir($f)?"/":"","
";}
</code></pre>

<ul>
<li>no trailing slash required</li>
<li>displays and recurses hidden entries (<code>ls -a</code>)</li>
<li>insert <code>,4096</code> or <code>,FilesystemIterator::SKIP_DOTS</code> before <code>),1</code> to skip dot entries (+5) (<code>ls -A</code>)</li>
<li>flag <code>1</code> stands for <code>RecursiveIteratorIterator::SELF_FIRST</code></li>
</ul>
</div>
<div id="pu8" class="pu"><h2><a href="https://en.wikipedia.org/wiki/Standard_ML" rel="nofollow">SML</a>, 176 bytes</h2>

<pre><code>open OS.FileSys;val! =chDir;fun&amp;n w=(print("\n"^w^n);!n;print"/";c(openDir(getDir()))(w^"\t");!"..")and c$w=case readDir$of SOME i=&gt;(&amp;i w handle _=&gt;();c$w)|x=&gt;()fun%p=(&amp;p"";!p)
</code></pre>

<p>Declares (amongst others) a function <code>%</code> which takes a string as argument. Call with <code>% "C:/Some/Path";</code> or <code>% (getDir());</code> for the current directory.</p>

<p>I'm using the normally rather functionally used language StandardML whose <code>FileSys</code>-Library I discovered after reading this challenge.</p>

<p>The special characters <code>!</code>, <code>&amp;</code>, <code>$</code> and <code>%</code> have no special meaning in the language itself and are simply used as identifiers; however they can't be mixed with the standard alphanumeric identifiers which allows to get rid of quite some otherwise needed spaces. </p>

<pre><code>open OS.FileSys;
val ! = chDir;                       define ! as short cut for chDir

fun &amp; n w = (                        &amp; is the function name
                                     n is the current file or directory name
                                     w is a string containing the tabs
    print ("\n"^w^n);                ^ concatenates strings
    ! n;                             change in the directory, this throws an 
                                     exception if n is a file name
    print "/";                       if we are here, n is a directory so print a /
    c (openDir(getDir())) (w^"\t");  call c with new directory and add a tab to w
                                     to print the contents of the directory n
    ! ".."                           we're finished with n so go up again
)
and c $ w =                          'and' instead of 'fun' must be used 
                                     because '&amp;' and 'c' are mutual recursive
                                     $ is a stream of the directory content
    case readDir $ of                case distinction whether any files are left
        SOME i =&gt; (                  yes, i is the file or directory name
            &amp; i w handle _ =&gt; ();    call &amp; to print i an check whether it's a 
                                     directory or not, handle the thrown exception 
            c $ w )                  recursively call c to check for more files in $
        | x    =&gt; ()                 no more files, we are finished

fun % p = (                          % is the function name, 
                                     p is a string containing the path
    &amp; p "";                          call &amp; to print the directory specified by p
                                     and recursively it's sub-directories
    ! p                              change back to path p due to the ! ".." in &amp;
)
</code></pre>

<p>Can be compiled like this with <a href="http://smlnj.org/" rel="nofollow">SML/NJ</a> or with Moscow ML* by prefixing with <code>load"OS";</code>.</p>

<p>*See <code>mosml.org</code>, can't post more than 2 links.</p>
</div>
<div id="pu9" class="pu"><h1><a href="http://goo.gl/9KrKoM" rel="nofollow noreferrer">Dyalog APL</a>, 48 <a href="https://codegolf.meta.stackexchange.com/a/9429/43319">bytes</a></h1>
<pre><code>(⊂∘⊃,1↓'[^\\]+\\'⎕R'    ')r[⍋↑r←⎕SH'dir/s/b ',⍞]
</code></pre>
<p><code>⍞</code> prompt for character input</p>
<p><code>'dir/s/b ',</code> prepend text</p>
<p><code>⎕SH</code> execute in shell</p>
<p><code>r←</code> store in <em>r</em></p>
<p><code>↑</code> make list of strings into character matrix</p>
<p><code>⍋</code> indices for ascending sorting</p>
<p><code>r[</code>...<code>]</code> reorder <em>r</em> [sorted]</p>
<p><code>(</code>...<code>)</code> on the standard out of the shell command, do:</p>
<p><code>'[^\\]+\\'⎕R'    '</code> regex replace backslash-terminated runs of non-backslashes by four spaces</p>
<p><code>1↓</code> drop the first line</p>
<p><code>⊂∘⊃,</code> prepend the enclosed first [line]</p>
<p>Result of inputting &quot;\tmp&quot; to the prompt begins as follows on my computer:</p>
<pre><code>C:\tmp\12u64
            keyboards64.msi
            netfx64.exe
            setup.exe
            setup_64_unicode.msi
            setup_dotnet_64.msi
        AdamsReg.reg
        AdamsReg.zip
        qa.dws
        ride-experimental
            win32
                d3dcompiler_47.dll
                icudtl.dat
                libEGL.dll
</code></pre>
<p>⋮</p>
</div>
<div id="pu10" class="pu"><h2>bash, <s>61</s> <s>58</s> 54 bytes</h2>

<pre><code>find "$1" -exec ls -Fd {} \;|perl -pe's|.*?/(?!$)|  |g'
</code></pre>

<p>Takes input as a command line argument, outputs on STDOUT.</p>

<p>Note that the spaces near the end before the <code>|g</code> are actually a tab character (SE converts them to spaces when displaying posts).</p>

<pre><code>find              crawl directory tree recursively
"$1"              starting at the input directory
-exec             and for each file found, execute...
ls -Fd {} \;      append a trailing slash if it's a directory (using -F of ls)
|perl -pe         pipe each line to perl
'
s|                replace...
.*?/              each parent directory in the file's path...
(?!$)             that doesn't occur at the end of the string...
|    |            with a tab character...
g                 globally
'
</code></pre>

<p>Thanks to <a href="https://codegolf.stackexchange.com/users/12012/dennis">@Dennis</a> for 4 bytes!</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/85531/">85531</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




