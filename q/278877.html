<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::278877</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>038</td><td>Ruby</td><td>250325T123606Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278901#278901">G B</a></td></tr>
<tr d-ix="1"><td>054</td><td>Google Sheets</td><td>250325T063306Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278898#278898">z..</a></td></tr>
<tr d-ix="2"><td>011</td><td>APLDyalog Unicode</td><td>250324T164743Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278886#278886">att</a></td></tr>
<tr d-ix="3"><td>013</td><td>Charcoal</td><td>250325T011520Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278893#278893">Neil</a></td></tr>
<tr d-ix="4"><td>013</td><td>Uiua</td><td>250324T153531Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278883#278883">Joao-3</a></td></tr>
<tr d-ix="5"><td>006</td><td>Jelly</td><td>250324T181625Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278889#278889">Unrelate</a></td></tr>
<tr d-ix="6"><td>017</td><td>x8664 machine code</td><td>250324T174704Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278888#278888">m90</a></td></tr>
<tr d-ix="7"><td>009</td><td>05AB1E</td><td>250324T143739Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278880#278880">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>026</td><td>Haskell</td><td>250324T135231Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278879#278879">colossus</a></td></tr>
<tr d-ix="9"><td>030</td><td>JavaScript Node.js</td><td>250324T124117Z</td><td><a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector/278878#278878">Mukundan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 38 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n{k=0;n[k]=1+n[n[k]]while n[k+=1];n}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1y6vOtvWwDovOjvW1lA7LxrEiC3PyMxJVQAytW0NY63zav8XKKRFRxvoKACRIRgZg9lAZAYmLcDI0ACCLWJjFZQVHrVNUog2iFUwVDACQmMgDWLBeMYKRv8B" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Google Sheets, 54 bytes</h1>
<p><em><sup>Port of <a href="https://codegolf.stackexchange.com/a/278878/120719">Mukundan314's answer</a></sup></em></p>
<p>Expects input in <kbd>A:A</kbd>.</p>
<pre class="lang-cpp prettyprint-override"><code>=REDUCE(0,TOCOL(A:A,1),LAMBDA(x,y,{x;INDEX(x,y+1)+1}))
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>11 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>(⊢⍪1+⌷∘,)⌿⊖
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=03jUtehR7ypD7Uc92x91zNDRfNSz/1HXNAA&amp;f=S1MwVDDkSoNgIDRSMFYwUTAF0uYoIiZAljkYGhrAJYzAwoYKZkBsCYSGhiBkCQA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=train&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>1-indexed.</p>
<pre><code>(       )⌿⊖ for each (non-root) node
 ⊢⍪           append
   1+⌷        1+ its parent's depth
      ∘,      (fix initial case)
</code></pre>
<h2><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>13 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h2>
<pre><code>⊂(⊢⌊1+⌷)⍣≡⍳⍤≢
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=AR8A4P/iioIo4oqi4oyKMSvijLcp4o2j4omh4o2z4o2k4omi&amp;f=S1MwVDDkSoNgIDRSMFYwUTAF0uYoIiZAljkYGhrAJYzAwoYKZkBsCYSGhiBkCQA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=train&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>Also 1-indexed.</p>
<pre><code>          ⍳⍤≢   starting from 1 2...n,
 (     )⍣≡      fixed point of:
  ⊢⌊              min with
⊂   1+⌷           1+ parents' depths
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 13 bytes</h1>
<pre><code>ＦＡ⊞υ∧Ｌυ⊕§υιＩυ
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/z8tv0hBwzOvoLREQ1NTIaC0OEOjVEfBMS9Fwyc1L70EyNPUUfDMSy5KzU3NK0lN0XAs8cxLSa0AqcrUBAJrroCizLwSDefE4hKgYk3r//@jow10FIDIEIyMwWwgMgOTFmBkaADBFrGx/3XLcgA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. I/O includes root (input value is arbitrary). Explanation:</p>
<pre><code>ＦＡ
</code></pre>
<p>Loop over the parent vector.</p>
<pre><code>⊞υ∧Ｌυ⊕§υι
</code></pre>
<p>If this is the root, then push zero, otherwise push one more than the parent's depth.</p>
<pre><code>Ｉυ
</code></pre>
<p>Output the depth vector.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua</a>, <s>15</s> 13 bytes</h1>
<pre><code>∧(˜⊂+1⊸⊡)⊃↘↙1
</code></pre>
<p><a href="https://uiua.org/pad?src=0_15_0-rc_1__RiDihpAg4oinKMuc4oqCKzHiirjiiqEp4oqD4oaY4oaZMQpGIFswIDBdCkYgWzBdCkYgWzAgMCAxIDIgMyA0IDEgNl0KRiBbMCAwIDEgMiAzIDMgMCA2IDYgNiA5XQpGIFswIDAgMSAxIDMgMCAwIDUgMCA4IDggMTAgMTAgOF0K" rel="nofollow noreferrer">Try it in the pad!</a></p>
<p>Thanks to @Tbw for -2 bytes!</p>
<p>Takes in a 0-indexed array, with the root node included.</p>
<p>For every node, the program looks up the corresponding depth in the (partial) result array, then adds 1.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 6 bytes</h1>
<pre><code>JịƬ&gt;1S
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/9/r4e7uY2vsDIP/P9y95dDWhzs2hT1qmHG43Vsz8v9/AwUDLiBUMFAwVDBSMFYwAdJmSHxjIMsMDC2hooZgMQMFUyC2AEJDAxCyAAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Takes input 1-indexed with the root (test harness converts for convenience).</p>
<pre><code>J         Starting with the 1-index of each node,
 ị        1-index each into the parent vector
  Ƭ       repeatedly until nothing changes (i.e. they're all 1).
   &gt;1S    How many values are greater than 1 in each column?
</code></pre>
<p>The initial <code>J</code> is needed to distinguish the root from its immediate children, so that it takes 0 steps to reach itself but its children need 1. Omitting the root complicates things, as out-of-bounds indexing wraps around--the root is needed as a &quot;sink&quot; that keeps things 1 once they've been 1 once, because the loop keeps running until the entire vector hits a cycle, and the cycle needs to be convenient even if looping on individual elements (as in <code>JịƬ€¹Ẉ’</code>) because <code>Ƭ</code> is Jelly's only looping quick that reuses the right argument instead of Doing The Fibonacci Thing™.</p>
</div>
<div id="pu6" class="pu"><h1>x86-64 machine code, 17 bytes</h1>
<pre><code>57 59 83 0F FF AD 8B 04 81 FF C0 AB FF CA 75 F5 C3
</code></pre>
<p><a href="https://tio.run/##TVLBjtowED3bXzFNtV0HzCoBiiiUXnavVStUqZWAg@s44Co4ke1sQ6P8etNxEKhyYs/Me/PGM4msqslRyr4X7gwMthGj@YpUtTuBzfQaqrICKxtKSgsv379sX@Drty3sEDtwmKTUrkhRZi6j5Fy@ghINR1A2MIb5yIrmQIk2MsQpcb4MvEyhn6H/y/wBS4lVnsYRxGuqGq@sgeg5gva11BnkTBsPI8tBlsZ5GDzBh9PE647St6he1JmCj85nunw6faLUeeG1BOdtLT145bwUTkE7ZK2HZLFLFwfMv4Fud4ANtLSd8jbhSddx2qZoDsZyiPGUT/mMz/FcXPH0//gMrcWwPlzR@Q1NByzh7/Fd4kqT8CwDq1vTcJuz0IbFtKUkxymza6@i9iW887C6d@BiSpBDQopVri780AVGcnb1OfgnETYcTggHtcDW2FyCncObTQDRGo9RjJDKIpyz6EFDxG@i@jBkV7WXJ2HZ4948hkBH7/S9@SzkSRuF3yVTqyjAoU4T6nC4oJuV0N7o8JBMf6D@ZcNYbZw@GpVB0B7FebxrxmMs2MHvky4UsEu4ZNI8z4LoXYHhDX9ecBLx3qBSg2DX939lXoij6yfnxRw3/IU3yFfFPw" rel="nofollow noreferrer" title="C++ (gcc) – Try It Online">Try it online!</a></p>
<p>Following the standard calling convention for Unix-like systems (from the System V AMD64 ABI), this takes in RDI an address at which to place the depth vector, as an array of 32-bit integers; the address of the parent vector, as an array of 32-bit integers, in RSI; and the number of nodes in EDX.</p>
<p>In assembly:</p>
<pre><code>f:  push rdi; pop rcx       # Copy the depth-vector address into RCX.
    or DWORD PTR [rdi], -1  # Set the first value to -1 (will become 0).
r:  lodsd       # Load a parent-vector value into EAX, advancing RSI.
    mov eax, [rcx + 4*rax]  # Load that index's depth into EAX.
    inc eax     # Add 1 to the depth in EAX.
    stosd       # Store EAX into the depth vector, advancing RDI.
    dec edx     # Subtract 1 from EDX, counting down from the length.
    jnz r       # Jump back to repeat if it's nonzero.
    ret         # Return.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 9 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>¾ˆv¯yè&gt;=ˆ
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/278878/52210"><em>@Mukundan314</em>'s Python answer</a>, but outputs each value on a separated newline instead.<br />
Root note is omitted.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//0L7TbWWH1lceXmFne7rt//9oAx1DIDTWMQBCUyC2AEJDAxCyiAUA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaBkX6nDpeRfWgLkFQO5OpX/D@073VZ2aH3l4RV2tqfb/tce2mZ/aMv/6GiDWJ1oIDLQMdQx0jHWMQHSZkh8Yx0DHTMwtISKGoLFDHRMgdgCCA0NQMgiNhYA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p>If outputting as a list is mandatory, it's +1 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">byte</a> by porting <a href="https://codegolf.stackexchange.com/questions/278877/convert-a-parent-vector-to-a-depth-vector#comment596301_278878"><em>@Mukundan314</em>'s JavaScript answer in the comments</a> instead:</p>
<pre><code>vD0ªy&lt;è&gt;Nǝ
</code></pre>
<p>Root note is omitted.</p>
<p><a href="https://tio.run/##yy9OTMpM/f@/zMXg0KpKm8Mr7PyOz/3/P9pAxxAIjXUMgNAUiC2A0NAAhCxiAQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXL/zIXg0OrKm0Or7DzOz73f63O/@hog1idaCAy0DHUMdIx1jEB0mZIfGMdAx0zMLSEihqCxQx0TIHYAggNDUDIIjYWAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>¾ˆ         # Add 0 to the global array (which is initially empty)
v          # Loop over each value `y` of the (implicit) input-list:
 ¯         #  Push the global array
  yè       #  Pop and push its y'th (0-based modular) value
    &gt;      #  Increase that by 1
     =     #  Output it with trailing newline (without popping)
     ˆ     #  Pop and add it to the global array
</code></pre>

<pre class="lang-python prettyprint-override"><code>v          # Loop over each value `y` of the (implicit) input-list:
 D         #  Duplicate the current list
           #  (which will use the implicit input-list in the first iteration)
  0ª       #  Append a trailing 0 to the copy
    y&lt;è    #  Pop and push its (y-1)'th (0-based modular) value
       &gt;   #  Increase that by 1
        Nǝ #  Insert it back into the list at the current loop-index `N`
           # (after which the modified list is output implicitly as result)
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, 26 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>f p=0:[1+f p!!i|i&lt;-tail p]
</code></pre>
<p><a href="https://tio.run/##PYsxC4MwFIR3f8UpbsWSRAoitXvnjuIQSKyhMYYY6NL/nj5bke8e3PHuJrm@tLUpjfAda3t@IpPn5mOuVZTGwg9p0tbrgLbFIwbjnqhu6O8uDtn@6TBLj6ClwhnvJag1m6VxnVoywNMklmP57xYMDJyosbkLXUNwtqkpjv7R5hBE/duIPVEkiSJ9AQ" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>The depth of each node (except the root) will be 1 plus the depth of its parent. Since the parent always comes before its children in the input I can use self reference to get the parent's depth with <code>f p!!i</code>. Then I just need to ensure my base case (the root) is handled specially by always prepending 0 and only iterating over the <code>tail</code>.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://nodejs.org" rel="noreferrer">JavaScript (Node.js)</a>, 30 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>x=&gt;x.map((i,j)=&gt;x[~j]=x[-i]+1)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/Z9m@7/C1q5CLzexQEMjUydLE8iJrsuKta2I1s2M1TbU/J@cn1ecn5Oql5OfrpGmEW0Qq6nJhSaGRchAR8FQR8FIR8FYR8EEzDYjoAqIgFwzGLLEqdwQphaITMGkBRgZGkCwBVDnfwA" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="https://www.python.org" rel="noreferrer">Python</a>, 46 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda x,r=[0]:[(r:=r+[r[i]+1])[-1]for i in x]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZCxasMwEIb3PMXhxRJxjJSkwTW4kKVQ6FDIqGhwiU0FiSwUB9wX6AN07ZIlfYM-TNY-R4eeJLs0rSVzd7-__-7w27t5bp8afTzVUMD6dGjrSXZOt-XucVNCl9hCMJkLYvPCjoUVSo65pGLCZd1YUKA0dLJ3fTlpq3Tl1MZUmjCa2qrcEJruzVa1JF7rtY5pPgJ8lDYJVJ3BubvSkH1rU3wViq7H4Ph8eY0pHQzICqVboij8zEe5h6kUPJeeDX3_sShfsh5uDi3CNcFOYZKxziii2-XdfZRA9LBcrSIpPFe4JjIJ60fFDX5HnYZ_cDx_ADBgI1wbI3f9-8KnToMpzGCOcTFQvXLl4iU2w2zhz_UfeO6z6aWFewPDTgwyPJy5m_2yOjP3WaiwxDsN238D" rel="noreferrer">Attempt This Online!</a></p>
<p>root node is omitted in both input and output of both answers</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/278877/">278877</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




