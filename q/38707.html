<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::38707</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>010</td><td>Vyxal j</td><td>241026T081818Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/276337#276337">emanresu</a></td></tr>
<tr d-ix="1"><td>089</td><td>Python 3</td><td>141016T034534Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/39899#39899">xnor</a></td></tr>
<tr d-ix="2"><td>101</td><td>Python 2</td><td>141011T024500Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38709#38709">Justin</a></td></tr>
<tr d-ix="3"><td>113</td><td>JavaScript</td><td>141012T182726Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/39740#39740">edc65</a></td></tr>
<tr d-ix="4"><td>098</td><td>Ruby</td><td>141011T133544Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38720#38720">britisht</a></td></tr>
<tr d-ix="5"><td>026</td><td>CJam</td><td>141011T213424Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/39727#39727">Dennis</a></td></tr>
<tr d-ix="6"><td>034</td><td>CJam</td><td>141011T103018Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38717#38717">Martin E</a></td></tr>
<tr d-ix="7"><td>099</td><td>Haskell</td><td>141011T203137Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/39725#39725">proud ha</a></td></tr>
<tr d-ix="8"><td>033</td><td>CJam</td><td>141011T105314Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38718#38718">Optimize</a></td></tr>
<tr d-ix="9"><td>046</td><td>GolfScript</td><td>141011T034649Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38711#38711">Justin</a></td></tr>
<tr d-ix="10"><td>025</td><td>Pyth</td><td>141011T032044Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38710#38710">Justin</a></td></tr>
<tr d-ix="11"><td>103</td><td>Python 2</td><td>141011T041757Z</td><td><a href="https://codegolf.stackexchange.com/questions/38707/bulgarian-solitaire/38712#38712">Nathan M</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a> <code>j</code>, 10 bytes</h1>
<pre><code>‹₅psṘꜝ)İ$p
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJqIiwiIiwi4oC54oKFcHPhuZjqnJ0pxLAkcCIsIiIsIls0LCA0LCAzLCAyLCAxXSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>       İ   # Collect values while unique...
------)    # of applying the following function
‹          # Decrement every item
  p        # Prepend
 ₅         # The length
   sṘ      # Sort backwards
     ꜝ     # And remove empty items
        $p # Prepend the initial list
           # (j flag formats list into newline-separated string)
</code></pre>
</div>
<div id="pu1" class="pu"><h2>Python 3: 89 chars</h2>

<pre class="lang-python prettyprint-override"><code>g=lambda l,s=[]:print(l)!=l in s or g(sorted([x-1for x in l if~-x]+[len(l)])[::-1],s+[l])
</code></pre>

<p>Much like the Python solutions already posted, but with recursive function calls rather than loops. The list <code>s</code> stores the splits already seen, and short-circuits out the recursion in case of a repeat.</p>

<p>The function <code>print()</code> (this is Python 3) just needs to be somehow called in each loop. The tricky thing is that a <code>lambda</code> only allows a single expression, so we can't do <code>print(l);...</code>. Also, it outputs <code>None</code>, which is hard to work with. I wind up putting <code>print(l)</code> on one side of an inequality; <code>==</code> doesn't work for some reason I don't understand.</p>

<p>An alternative approach of sticking it in a list uses equally many characters.</p>

<pre class="lang-python prettyprint-override"><code>g=lambda l,s=[]:l in s+[print(l)]or g(sorted([x-1for x in l if~-x]+[len(l)])[::-1],s+[l])
</code></pre>

<p>Using <code>print(*l)</code> would format the outputs like <code>4 2 2</code> rather than <code>[4,2,2]</code>.</p>
</div>
<div id="pu2" class="pu"><h1>Python 2, <s>148</s> <s>130</s> 101</h1>
<pre class="lang-python prettyprint-override"><code>l=input()
s=[]
print l
while l not in s:s+=l,;l=sorted([i-1for i in l if 1&lt;i]+[len(l)])[::-1];print l
</code></pre>
<p>This simply goes remembers all previous iterations, and checks if the new one is in that list. Then, it prints it out.</p>
<p>Sample run:</p>
<p>Input:</p>
<pre><code>[4,4,3,2,1]
</code></pre>
<p>Output:</p>
<pre><code>[4, 4, 3, 2, 1]
[5, 3, 3, 2, 1]
[5, 4, 2, 2, 1]
[5, 4, 3, 1, 1]
[5, 4, 3, 2]
[4, 4, 3, 2, 1]
</code></pre>
<p>Edit: I reread the specs to golf, plus applied a lot of golfing.</p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (E6) 113</h1>
<p>Worst entry so far :(</p>
<pre><code>F=l=&gt;{
  for(k=[];console.log(l),!k[l];)
    k[l]=l=[...l.map(n=&gt;(p+=n&gt;1,n-1),p=1),l.length].sort((a,b)=&gt;b-a).slice(0,p)
}
</code></pre>
<p><strong>Test</strong> in FireFox/FireBug console</p>
<pre><code>F([4,4,3,2,1])
</code></pre>
<p><em>Output</em></p>
<pre><code>[4, 4, 3, 2, 1]
[5, 3, 3, 2, 1]
[5, 4, 2, 2, 1]
[5, 4, 3, 1, 1]
[5, 4, 3, 2]
[4, 4, 3, 2, 1]
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Ruby, 98</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;c{g={c=&gt;1}
p *loop{c=(c.map(&amp;:pred)&lt;&lt;c.size).sort.reverse-[0]
g[c]?(break g.keys&lt;&lt;c): g[c]=1}}
</code></pre>

<h2>Explanation</h2>

<ul>
<li>Input is taken as the arguments to a lambda. It expects an <code>Array</code>.</li>
<li>Previous game states are stored in the <code>Hash</code> <code>g</code>.</li>
<li>To create a new game state, use <code>Array#map</code> to decrease every element by 1, add the length of the <code>Array</code> as an element, sort it in decreasing order and delete the element <code>0</code>.</li>
<li>To check if a game state has been seen before, checking if <code>g</code> has a key for new game state is sufficient.</li>
</ul>
</div>
<div id="pu5" class="pu"><h1>CJam, 26 bytes</h1>

<pre><code>q{~_:(_,+0-$W%]___&amp;=}g{p}/
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow" title="CJam interpreter">Try it online.</a></p>

<h3>Example run</h3>

<pre><code>$ cjam &lt;(echo 'q{~_:(_,+0-$W%]___&amp;=}g{p}/') &lt;&lt;&lt; '[5 3]'
[5 3]
[4 2 2]
[3 3 1 1]
[4 2 2]
</code></pre>
</div>
<div id="pu6" class="pu"><h2>CJam, <s>40</s> <s>36</s> 34 bytes</h2>

<pre><code>]l~{a+_W=_p:(_,+$W%{},1$1$a#0&lt;}gp;
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow">Test it here.</a> Enter input as a CJam-style array, like <code>[5 3]</code>, into the STDIN field. Output format is similar, so square brackets and spaces as delimiters.</p>

<p>Even if I golf this down further (which is definitely possible), there's no way to beat Pyth with this. Maybe it's time to learn J. Explanation coming later.</p>
</div>
<div id="pu7" class="pu"><h1>Haskell, 99</h1>
<pre><code>import Data.List
g l=until(nub&gt;&gt;=(/=))(\l-&gt;l++[reverse$sort$length(last l):[x-1|x&lt;-last l,x&gt;1]])[l]
</code></pre>
</div>
<div id="pu8" class="pu"><h2>CJam, <s>35 34</s> 33 bytes</h2>

<p>(Damn, this power cut that I was not the first one to post in CJam)</p>

<pre><code>l~{_p:(_,+{},$W%_`_S\#0&lt;\S+:S;}g`
</code></pre>

<p>Input:</p>

<pre><code>[1 1 1 1 1 1 1]
</code></pre>

<p>Output:</p>

<pre><code>[1 1 1 1 1 1 1]
[7]
[6 1]
[5 2]
[4 2 1]
[3 3 1]
[3 2 2]
[3 2 1 1]
[4 2 1]
</code></pre>

<p><a href="http://cjam.aditsu.net/" rel="nofollow">Try it online here</a></p>
</div>
<div id="pu9" class="pu"><h1>GolfScript, <s>50</s> 46</h1>
<pre><code>~.p$[]{[1$]+\.{(.!&quot;;&quot;*~}%\,+$.-1%p\.2$?)!}do];
</code></pre>
<p>Can almost certainly be golfed further. <a href="http://golfscript.apphb.com/?c=OyJbNCA0IDMgMiAxXSIKfi5wJFtde1sxJF0rXC57KC4hIjsiKn59JVwsKyQuLTElcFwuMiQ%2FKSF9ZG9dOw%3D%3D" rel="nofollow noreferrer">Try it out here.</a></p>
</div>
<div id="pu10" class="pu"><h1>Pyth, <s>40</s> 25</h1>
<pre><code>QW!}QY~Y]Q=Q_S+fTmtdQ]lQQ
</code></pre>
<p>This is pretty close to a translation of my python 2 answer.</p>
<p>Sample run:</p>
<p>Input:</p>
<pre><code>[4,4,3,2,1]
</code></pre>
<p>Output:</p>
<pre><code>[4, 4, 3, 2, 1]
[5, 3, 3, 2, 1]
[5, 4, 2, 2, 1]
[5, 4, 3, 1, 1]
[5, 4, 3, 2]
[4, 4, 3, 2, 1]
</code></pre>
<p>How it works:</p>
<pre><code>Q                          Q = eval(input()) # automatic
 W!}QY                     while not Q in Y:
      ~Y]Q                     Y += [Q]
               fTmtdQ                     filter(lambda T: T, map(lambda d: d - 1, Q))
            _S+      ]lQ           sorted(                                             + [len(Q)])[::-1]
          =Q_S+fTmtdQ]lQ       Q = sorted(filter(lambda T: T, map(lambda d: d - 1, Q)) + [len(Q)])[::-1]
                        Q      print(Q)
QW!}QY~Y]Q=Q_S+fTmtdQ]lQQ
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Python 2 - 103</h1>
<pre><code>p=input()
m=[]
print p
while p not in m:m+=[p];p=sorted([x-1 for x in p if x&gt;1]+[len(p)])[::-1];print p
</code></pre>
<p>Similar to Quincunx' answer, but replaces appends with addition, and removes the last two lines.</p>
<p>Sample output:</p>
<pre><code>[4, 4, 3, 2, 1]
[5, 3, 3, 2, 1]
[5, 4, 2, 2, 1]
[5, 4, 3, 1, 1]
[5, 4, 3, 2]
[4, 4, 3, 2, 1]
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/38707/">38707</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




