<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277623</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>195</td><td>JavaScript ES8</td><td>250113T192321Z</td><td><a href="https://codegolf.stackexchange.com/questions/277623/draw-an-ascii-analog-digital-clock/277624#277624">Arnauld</a></td></tr>
<tr d-ix="1"><td>119</td><td>Ruby</td><td>250113T210943Z</td><td><a href="https://codegolf.stackexchange.com/questions/277623/draw-an-ascii-analog-digital-clock/277625#277625">Level Ri</a></td></tr>
<tr d-ix="2"><td>074</td><td>Charcoal</td><td>250113T230039Z</td><td><a href="https://codegolf.stackexchange.com/questions/277623/draw-an-ascii-analog-digital-clock/277627#277627">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES8), 195 bytes</h1>
<p>Expects <code>(&quot;HH&quot;)(&quot;MM&quot;)</code> and returns a matrix of characters.</p>

<pre class="lang-none prettyprint-override"><code>h=&gt;m=&gt;(C=[...(M=Math)+h].map(_=&gt;[...&quot;&quot;.padEnd(32)]),g=n=&gt;[.36,2/3,z].map(d=&gt;[z=0,1].map(k=&gt;C[7.5+M.sin(a=(n-3)/1.9)*d*7|0][15.5+M.cos(a)*d*(13+5%(n%6||3))+k|0]=d?m[k]:&quot;#&quot;)))(m/5,z=.967)&amp;g(m=h)||C
</code></pre>
<p><a href="https://tio.run/##RZDNboMwDIDvfQorUye7pCk/o11XhR1QjzwBQ1MEtPSHgADt0LFnZ0k7aSfbnz85sc/qS/V5d2qHpW6KcjrIqZJRLSOMZSqEwEQmaqjIqTJRqxY/ZWQxY6JVxV4XGPiUET9KbRvBmvurgN8ebmHQTbrce5QXGcXpRoROIvqTRiVRLwNaeWJLi2KxGd0s9cJ7O296VBaiFzjhHPV8PY4BkXMxkize6/SSvbEnRkRYr0J@k2K73tDzEWtZ0TjG0y6dAaTA3FfGgfkhg4w/iOdb4rr/xA0sebHOLJuJQ9PtVV4hplBxqCEjkBF8G/daDhCDhANW5l3aGZQ3um@upbg2R4zvW3bW7sS5MSsy88O/7EMzAgdstGHJRFe2pRrs/cykH5p@AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Formulas</h3>
<p>Given the index <span class="math-container">\$n\in[0\dots11]\$</span> of the hand position, the angle is given by:</p>
<p><span class="math-container">$$a=(n - 3)\times 2\pi/12\approx(n-3)/1.9$$</span></p>
<p>We use <span class="math-container">\$a\$</span> to compute the integer position <span class="math-container">\$(x,y)\$</span> on the grid as follows:</p>
<p><span class="math-container">$$x=\lfloor15.5+\cos(a)\times d\times r_x\rfloor\\
y=\lfloor7.5+\sin(a)\times d\times r_y\rfloor$$</span></p>
<p>where <span class="math-container">\$r_y\$</span> is always <span class="math-container">\$7\$</span> and <span class="math-container">\$r_x\$</span> depends on <span class="math-container">\$n\bmod 6\$</span>:</p>
<p><span class="math-container">$$\begin{array}{|c|c|c|c|c|c|c|}
\hline
  n\bmod 6 &amp; 0 &amp; 1 &amp; 2 &amp; 3 &amp; 4 &amp; 5 \\ 
\hline
   r_x &amp; 15 &amp; 13 &amp; 14 &amp; 15 &amp; 14 &amp; 13 \\
\hline
\end{array}$$</span></p>
<p>The value of <span class="math-container">\$r_x\$</span> is obtained with the JS code <code>13 + 5 % (n % 6 || 3)</code>.</p>
<p>The following values of <span class="math-container">\$d\$</span> are used to generate the different circles: <span class="math-container">\$0\$</span>, <span class="math-container">\$0.36\$</span>, <span class="math-container">\$2/3\$</span>, <span class="math-container">\$0.967\$</span>. We use the last 3 values for the minute hand and the first 3 for the hour hand.</p>
<h3>Ungolfed</h3>
<p>This ungolfed code draws the full clock, using the formulas described above.</p>

<pre class="lang-none prettyprint-override"><code>let C = [...Array(15)].map(_ =&gt; [...Array(32).fill(&quot; &quot;)]);

for(let n = 0; n &lt; 12; n++) {
  [ 0, 0.36, 2 / 3, 0.967 ].forEach(d =&gt; {
    let a = (n - 3) * Math.PI * 2 / 12,
        rx = 13 + 5 % (n % 6 || 3),
        x = 15.5 + Math.cos(a) * d * rx | 0,
        y = 7.5 + Math.sin(a) * d * 7 | 0;

    C[y][x] = d ? n &gt;&gt; 1 : &quot;#&quot;;
    C[y][x + 1] = d ? n * 5 % 10 : &quot;#&quot;;
  });
}
console.log(C.map(r =&gt; r.join(&quot;&quot;)).join(&quot;\n&quot;));
</code></pre>
<p><a href="https://tio.run/##TZBRa4MwFIXf/RUHRyGpbWYUlc21Y8ge9jDYu5MR1K4tzpQoo2Xtb3c3MmYD4d4k3zk39@7Vt@pKszv0y1ZX9TA0dY8MK@RCiCdj1InJiBfiSx3YB1brq/sw4GKzaxrmwuUFTx1now2z@pb0fkrhATKg6HkcPw6Qw1/AF2G8QIBbhPZwFycoBCmfVblllS1hUcAaKTJiLZYIOeZ4Vf1WvL1QZtUyWIycXeZIoAzhIcLMKmaIcT6TbGJGJBIRQaNRqTumrG1FmwzO9Ll/@ERwMrHdrp3YxKLUreWy/FTkx4LoCo/U8HoNiXu4N2569U42cmLm4yelP3EXGt7FKXXb6aYWjf5k2ThwY6dhxF5Tedfl/C97bylPh@EX" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>137 129 123 121</s> 119 bytes</h1>

<pre class="lang-none prettyprint-override"><code>-&gt;t{s=&quot;%40s&quot;%$/*20
-3.upto(2){|i|j=t[h=i/3]
g=j/5**-h-3
s[420+&quot;\5,RxN$&quot;[g%6].ord*i*~0**h+=g/6,2]=i==0?&quot;##&quot;:&quot;%02d&quot;%j}
s}
</code></pre>
<p><a href="https://tio.run/##bctPC4IwGIDx@z5FTAc1t3ybUyJ48xt06Lp2CfHfRXETCrWvbhR06/jw4xnG@3MtcZVnPzmkTIOjLIy5AiKT/dj7bqt209zMLXpTYxMnllTYxinnspYJcUYriOgtFdfHJaSmYpndd0PBG/4CzusIqzgTymKDCDkNAnqiDFRBWbsQt6z96N2mNOYoVGot@WYuuQbyk4MSAP8pEfozrW8" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>A function taking an argument in the form <code>[12,00]</code> and returning a newline separated string.</p>
<p>It forms a canvas of 20 lines of 39 spaces plus newline. . It then draws from the tip of the minute hand at iteration <code>-3</code> to the centre <code>0</code> and then on to tip of the hour hand <code>2</code> by replacing characters.</p>
<p>The centre of the clock is at index 420 (I didn't plan it that way, it just happened!) There is an magic string with numbers for the (positive) offsets corresponding to half a revolution of the hand in the lower half of the clockface, encoded into ascii. the other half revolution is managed by negating these offsets by multiplying by <code>-1</code> raised to the power <code>h+g/6</code> (due to Ruby priority rules, <code>-1</code> is represented by <code>~0</code>.)</p>
<p><strong>Commented code</strong> Based on 123 byte version</p>
<pre class="lang-none prettyprint-override"><code>-&gt;t{s=(&quot;.&quot;*39+$/)*20     #Make a string s of 20 lines of 39 spaces plus newline
(-3..2).map{|i|          #Iterate from -3 (tip of minute hand) to 2 (tip of hour hand)
  j=t[h=i/3]             #h= -1 for minute, 0 for hour (rounding integer division down)
                         #Extract j from t[] (ruby wraps negative index -1 round to 1)
  g=(j/5**-h)-3          #If minute, divide j by 5 to make g correspond to hour value. 
                         #Subtract 3 so that g/6 is even in lower half 3..8 and odd in upper half 
  s[420+i*~0**(h+g/6)*   #Centre at 420. Offset by i, with signflip if minutes(h)+upperhalf(g/6) is odd.. 
  &quot;\5,RxN$&quot;[g%6].ord,2]= #...times offset for one of 6 values from magic string. Change 2 chars in s... 
  i==0?&quot;##&quot;:&quot;%02d&quot;%j}    #...to ## if i==0 or the minute/hour contained in j if not.
s}                       #Return string s
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 74 bytes</h1>
<pre><code>##Ｆ²«≔§⪪θ:¬ιη≔⎇ι﹪Ｉη¹²÷Ｉη⁵ζＪ⁰∧¬﹪ζ⁶⊖÷ζ³Ｆ⁻³ι«Ｍ×∨‹ζ⁶±¹Ｉ§024542ζ⁻Ｉ§”)⊞↷ηk⦃”ζ²Ｐη
</code></pre>
<p><a href="https://tio.run/##XZDRaoMwFIav9SmCvTmBDDTaMborWW865jaYLyB6VgOauCTK1tFnd4muFHoTQs6fj@8/dVvpWlXdPL9rIS1Em01EH8NPpQlwSn7DIDdGHCXk9iAb/IaPoRMWvhiJdhFl5FVZENRdWvfrki1Ry0r/gGCkUM3YKXiqjIXWxRLujoO0ezGJBq/vW884ecbz2A@lgpiRXDbg@f@MEyP3PrXHWmOP0mIDV5KbppR6wOJeCDkaSBlxcr5FUKgJoRQ9GnjT8ILGrEBXAY@VRUg8e/G5VI1inm0zHnkxP1yZN5E44WmWZSlP4jXICF80gmLsrBiWrS7LOYfneY4fdnw7303dHw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>##
</code></pre>
<p>Output the clock's centre.</p>
<pre><code>Ｆ²«
</code></pre>
<p>Loop over the minutes and hours.</p>
<pre><code>≔§⪪θ:¬ιη
</code></pre>
<p>Extract the minutes or hours from the input time.</p>
<pre><code>≔⎇ι﹪Ｉη¹²÷Ｉη⁵ζ
</code></pre>
<p>Get the direction index from <code>0</code> to <code>11</code>.</p>
<pre><code>Ｊ⁰∧¬﹪ζ⁶⊖÷ζ³
</code></pre>
<p>Jump to the centre of the clock, except for <code>:00</code>/<code>:30</code>/<code>06:</code>/<code>12:</code>, which are offset vertically.</p>
<p>Ｆ⁻³ι«</p>
<p>Loop thrice for the minutes or twice for the hours.</p>
<pre><code>Ｍ×∨‹ζ⁶±¹Ｉ§024542ζ⁻Ｉ§”)⊞↷ηk⦃”ζ²
</code></pre>
<p>Move to the next minutes (or hours) position. The horizontal offsets are cyclically extracted from the <code>024542</code> string and then negated for the larger directions while the vertical offsets are extracted from a compressed string <code>001234443210</code> from which <code>2</code> is subtracted.</p>
<pre><code>Ｐη
</code></pre>
<p>Output the minutes or hours without moving the cursor.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277623/">277623</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




