<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::85786</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>039</td><td>APLNARS</td><td>250212T094736Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/278213#278213">Rosario</a></td></tr>
<tr d-ix="1"><td>006</td><td>Japt x</td><td>240824T092859Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275124#275124">Shaggy</a></td></tr>
<tr d-ix="2"><td>050</td><td>Haskell</td><td>240825T152301Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275141#275141">matteo_c</a></td></tr>
<tr d-ix="3"><td>007</td><td>Jelly</td><td>240825T142645Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275139#275139">Unrelate</a></td></tr>
<tr d-ix="4"><td>071</td><td>Scala 3</td><td>240825T003642Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275136#275136">138 Aspe</a></td></tr>
<tr d-ix="5"><td>012</td><td>Uiua</td><td>240824T154539Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275129#275129">nyxbird</a></td></tr>
<tr d-ix="6"><td>007</td><td>Vyxal</td><td>240824T213729Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275135#275135">emanresu</a></td></tr>
<tr d-ix="7"><td>011</td><td>Uiua</td><td>240824T202318Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275132#275132">janMakos</a></td></tr>
<tr d-ix="8"><td>057</td><td>Python 2  60</td><td>160719T145834Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85815#85815">Jeremy</a></td></tr>
<tr d-ix="9"><td>038</td><td>Ruby rmatrix</td><td>240824T162421Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/275130#275130">Jordan</a></td></tr>
<tr d-ix="10"><td>037</td><td>Wolfram Language Mathematica</td><td>191113T022113Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/195783#195783">att</a></td></tr>
<tr d-ix="11"><td>015</td><td>Brachylog</td><td>191111T102203Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/195691#195691">Unrelate</a></td></tr>
<tr d-ix="12"><td>024</td><td>k4</td><td>160723T022554Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/86367#86367">Aaron Da</a></td></tr>
<tr d-ix="13"><td>048</td><td>Matlab/Octave</td><td>160720T145050Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85961#85961">SpamBot</a></td></tr>
<tr d-ix="14"><td>021</td><td>Actually</td><td>160720T101159Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85931#85931">user4594</a></td></tr>
<tr d-ix="15"><td>010</td><td>MATL</td><td>160719T122926Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85789#85789">Luis Men</a></td></tr>
<tr d-ix="16"><td>024</td><td>R</td><td>160720T074956Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85919#85919">plannapu</a></td></tr>
<tr d-ix="17"><td>063</td><td>Ruby</td><td>160720T040535Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85905#85905">David Lj</a></td></tr>
<tr d-ix="18"><td>059</td><td>PHP</td><td>160719T172040Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85832#85832">Titus</a></td></tr>
<tr d-ix="19"><td>070</td><td>Lua</td><td>160719T154957Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85821#85821">Leaky Nu</a></td></tr>
<tr d-ix="20"><td>012</td><td>APL</td><td>160719T151653Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85817#85817">Leaky Nu</a></td></tr>
<tr d-ix="21"><td>043</td><td>PowerShell v2+</td><td>160719T151815Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85818#85818">AdmBorkB</a></td></tr>
<tr d-ix="22"><td>010</td><td>Jelly</td><td>160719T144156Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85813#85813">Leaky Nu</a></td></tr>
<tr d-ix="23"><td>014</td><td>Pyth</td><td>160719T142432Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85807#85807">Leaky Nu</a></td></tr>
<tr d-ix="24"><td>020</td><td>CJam</td><td>160719T124809Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85792#85792">Martin E</a></td></tr>
<tr d-ix="25"><td>046</td><td>Retina</td><td>160719T132314Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85799#85799">Martin E</a></td></tr>
<tr d-ix="26"><td>046</td><td>JavaScript</td><td>160719T124213Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85791#85791">Neil</a></td></tr>
<tr d-ix="27"><td>015</td><td>J</td><td>160719T125702Z</td><td><a href="https://codegolf.stackexchange.com/questions/85786/dijkstras-challenge/85793#85793">miles</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 39 chars</h1>
<pre><code>{0=×/a←⍴z←⍵:0⋄+/{z[⊂⍵]=k←+/⍵:k⋄0}¨,⍳a}
</code></pre>
<p>The problem can be seen for all tensors where case 2 dimensional matrix is a particular case... test:</p>
<pre><code>  f←{0=×/a←⍴z←⍵:0⋄+/{z[⊂⍵]=k←+/⍵:k⋄0}¨,⍳a}
  f 0 0⍴ 1 2 3
0
  f 0 1⍴ 1 2 3
0
  f 2
0
  f ,1
1
  f 1
0
  f 3 3⍴1 5 2 9 4 2 5 9 6
10
  f 4 4⍴0 3 0 4 0 4 1 4 4 3 1 2 ¯2 4 ¯2 ¯1
11
  f 2 3⍴ 3 ¯1 3 3 3 ¯1 3 1
3
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-x</code></a>, <s>7</s> 6 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>0-indexed</p>
<pre><code>ËfÈ¶E°
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LXg&amp;code=y2bItkWw&amp;input=W1swLDMsMCw0XSxbMCw0LDEsNF0sWzQsMywxLDJdLFstMiw0LC0yLC0xXV0" rel="nofollow noreferrer">Try it</a></p>
<pre><code>ËfÈ¶E°     :Implicit input of 2D-array
Ë          :Map each array at index E
 f         :  Filter by
  È        :  Passing each number through the following function
   ¶       :    Is equal to
    E°     :    Posfix incremented E
           :Implicit output of sum of resulting array
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, 50 bytes</h1>
<pre class="lang-haskell prettyprint-override"><code>f x=sum[e|(i,r)&lt;-z x,(j,e)&lt;-z r,i+j==e];z=zip[0..]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XVFBasMwEKRXv2JutekqjWQ3tCR6iRDFFIU6TUKwHHBMftJLLqVval_TXSd224DE7szODGj1_vlaxrewXp9OH_tmqR6_zBKtjfuNC8e0ojpbqA4tpSsKfVtTdbeyNvh5Z7tq56aTiT87v2_mTYjNSxlDhIVLgNR5wpRPRj1yxl8RmvBAMF4g4J4IxR_II2ZmYjIEPbokIidIQTGIBbEZ-h9ZnJVCjrHK9EopSku41nKH9Fzo3pYPjl-q18-4zXjik2RTVlt-7a6utg1c2hIOfG4zHHEBzxkWCuNqZCqE4z1z1AH3lpnLDodf-AE" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>ŒJ§ḋ=¥Ẏ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///oJK9Dyx/u6LY9tPThrr7/h9sfNa2J/P8/OlYnOtooFkQa6pjqGAEZljomYNpUx1LHDCxjoGOsY6BjAmQCSR1DMMsEKGYIVqdrBBQEErqGYMXGQAZQzhjIhjKB4gA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<pre><code>ŒJ         All multidimensional indices in the input, in flat order.
  §        Sum them.
   ḋ       Dot product the sums with
    =¥     whether or not they equal corresponding elements of
      Ẏ    the input flattened.
</code></pre>
<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>ŒĖ§f/€S
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///opCPTDi1P03/UtCb4/@F2IBX5/390rE50tFEsiDTUMdUxAjIsdUzAtKmOpY4ZWMZAx1jHQMcEyASSOoZglglQzBCsTtcIKAgkdA3Bio2BDKCcMZANZQLFAQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<pre><code>ŒĖ         Multidimensional enumerate: list all [index, element] pairs.
  §        Vectorizing sum (sums the indices, but not the elements!).
    /€     For each pair,
   f       filter the index sum by equality to the element.
      S    Sum.
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 71 bytes</h1>
<pre class="lang-scala prettyprint-override"><code>m=&gt;(for{i&lt;-m.indices;j&lt;-m(i).indices;if i+j==m(i)(j)}yield m(i)(j)).sum
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZC_TsMwEMb3PMWpky3iirYZUMCVmFCHToipymCSuLoodpDjtKqqPAlLF1h4A96kPA3-UzGU5T797rvzd_L7Z1-KViy-NhOmu70welKcf7rXpi4trAVqOCYAVS1BOSDCbPscHo0Rh82zNai3Bc3hRaMFHiYBdqIF5SgMkdCCC9ymsEjB1Yym10aWwuy_kYUNZ8yvDDYPK17YjAaLJonPloMucxJPjHWlbVHwpRPKPwYr2d35SfElkZ054gNTU9QVlnV_3zggSP8YJeBNw7lvkoaOB6zbCi5Ep_2g4nPfPv7N_YZtNfH5RFF_05iMceB0ivoL" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua</a>, 12 bytes</h1>
<pre><code>/+⊡⊚=≡≡/+°⊡.
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_13_0-dev_1__ZiDihpAgLyviiqHiipo94omh4omhLyvCsOKKoS4KZltbXV0KZltbMl1dCmZbWzEgNSAyXQogIFs5IDQgMl0KICBbNSA5IDZdXQpmW1swIDMgMCA0XQogIFswIDQgMSA0XQogIFs0IDMgMSAyXQogIFvCrzIgNCDCrzIgwq8xXV0KZltbMyDCrzEgMyAzXQogIFszIMKvMSAzIDFdXQo=" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>/+⊡⊚=≡≡/+°⊡.
           °⊡  # create an array with the indices for each element
       ≡≡/+    # sum each pair of indices
  ⊡⊚=       . # pick-where-equal
/+             # sum
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 7 bytes</h1>
<pre><code>⁽∑€=*f∑
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLigb3iiJHigqw9KmbiiJEiLCIiLCJbWzAsIDMsIDAsIDRdLFswLDQsMSw0XSxbNCwzLDEsMl0sWy0yLDQsLTIsLTFdXSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>  €     # Place at each position
⁽∑      # The sum of its coordinates
   =*   # Keep only those that are equal
     f∑ # Flatten and sum
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Uiua, 11 bytes</h1>
<pre><code>⧻⊚×⊸=/+°⍉°⊡
</code></pre>
<p><a href="https://uiua.org/pad?src=0_13_0-dev_1__RiDihpAg4qe74oqaw5fiirg9LyvCsOKNicKw4oqhCgotLS10ZXN0CiMgRXhwZXJpbWVudGFsIQrijaTipJniiY0gMCBGIFtbXV0K4o2k4qSZ4omNIDAgRiBbWzJdXQrijaTipJniiY0gMiBGIFsKICBbMSA1IDJdCiAgWzkgNCAyXQogIFs1IDkgNl1dCuKNpOKkmeKJjSAxMSBGIFsKICBbMCAzIDAgNF0KICBbMCA0IDEgNF0KICBbNCAzIDEgMl0KICBbwq8yIDQgwq8yIMKvMV1dCuKNpOKkmeKJjSA2IEYgWwogIFszIMKvMSAzIDNdCiAgWzMgwq8xIDMgMV1dCi0tLQo=" rel="nofollow noreferrer">Try it online!</a></p>
<h2>Explanation</h2>
<pre><code>⧻⊚×⊸=/+°⍉°⊡

         °⊡ # matrix indices
     /+°⍉ # sum along final axis (i+j)
  ×⊸= # set non-equal elements to zero (boolean multiply)
⧻⊚ # positive-only matrix sum
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python 2 - <del>60</del> 57 bytes</h1>
<p>It's a code snippet, so it would be a few more bytes if I actually returned the value, I guess.
<code>e=enumerate;sum(i*(x+y==i)for x,r in e(a)for y,i in e(r))</code></p>
<p>Thanks for the help Leaky Nun :-)</p>
<p>Quick explanation. <code>a</code> is an array holding numbers. Simply iterate through indexes and sum up all values where the value equals the sum of the index.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a> <code>-rmatrix</code>, 38 bytes</h1>
<p>Takes a Matrix object as input (<code>m</code>). (Alas,
The space after <code>_1</code> is required.)</p>
<pre class="lang-ruby prettyprint-override"><code>m.each_with_index.sum{_2+_3==_1 ?_1:0}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpck20km5RbmJJUWaFUuxNz1wFWwVfMC862kBHwVhHAUiaxOpwgXgmOgqGUJ4JWA7IMwLxdI3AkiBK1zA2lqtAIWZpaUmarsVNtVy91MTkjPjyzJKM-My8lNQKveLS3Op4I-14Y1vbeEMF-3hDK4NaiOoFUApKAwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>42</s> 37 bytes</h1>
<pre><code>Tr[Pick[#2,Tr@#,#2]&amp;@@@ArrayRules@#]&amp;
</code></pre>
<p><a href="https://tio.run/##LYvLCsIwEEX3@Qoh0NUEm0eFLpT4B0W6C12E0mLQuohxISHfHsc0m7ln7pnZbLgvmw1utnk959Gbwc0PQwWMXlOgYmq01lfv7ff2eS5vTacmD969gqHssv7Xo44kJiAxilSCQwcC6RB7UJU66OG06xYktKBKjQm8ssKe13MmUOBgfP@RSKhlkXVBRVL@AQ" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>1-indexed.</p>
<pre><code>                       ArrayRules@#     get (position-&gt;value)s
   Pick[#2,Tr@#,#2]&amp;@@@                 keep values equal to sum(position)
Tr[                                ]    sum
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 15 bytes</h1>

<pre><code>{iiʰI-ʰ=∧Ihh}ᶠ+
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFRu/6htw6Ompoe7Omsfbp3wvzoz89QGT91TG2wfdSz3zMiofbhtgfb//9EK0bE60dFGsSDSUMdUxwjIsNQxAdOmOpY6ZmAZAx1jHQMdEyATSOoYglkmQDFDsLp4I6AgkIg3BCs2BjKAcsZANpQJFFeIBQA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>

<pre><code>              +    The output is the sum of
{           }ᶠ     all possible results of
 i                 taking a row from the input with its index,
  i                taking an element with its index
   ʰ               from that row,
    I    Ihh       and outputting the element
       =∧          so long as the index of the row is equal to
     -ʰ            the value of the element minus its index within the row.
</code></pre>
</div>
<div id="pu12" class="pu"><h1>k4, 24 bytes</h1>

<p>Assumes the matrix is stored in <code>m</code>.</p>

<pre><code>+//7h$m*m=(!#m)+/:\:!#*m
</code></pre>

<p>This is one of those puzzles where the simplifications involved in designing k from APL (and J) really hurt—k’s <code>!</code> is the equivalent of APL’s <code>⍳</code> but only works on vectors, so I have to assemble the matrix of indices myself; inner product is one character in APL but five in k; and I lose three characters to handling the empty matrix properly because k doesn’t have strongly-typed matrices.</p>
</div>
<div id="pu13" class="pu"><h1>Matlab/Octave, 48 bytes</h1>
<p>1-indexed.</p>
<p>Will not handle the first test case because <code>[1:0]</code> has size 1x0 for some reason</p>
<pre><code>sum(sum(M.*(M-[1:size(M,1)]'-[1:size(M,2)]==0)))
</code></pre>
<p>Tested in Octave 3.</p>
<p>Full program:</p>
<pre><code>M = [2]
sum(sum(M.*(M-[1:size(M,1)]'-[1:size(M,2)]==0)))
M = [1 5 2; 9 4 2; 5 9 6]
sum(sum(M.*(M-[1:size(M,1)]'-[1:size(M,2)]==0)))
M = [ 0 3  0  4; 0 4  1  4; 4 3  1  2;-2 4 -2 -1]
sum(sum(M.*(M-[1:size(M,1)]'-[1:size(M,2)]==0)))
M = [ 3 -1 3 3; 3 -1 3 1]
sum(sum(M.*(M-[1:size(M,1)]'-[1:size(M,2)]==0)))
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Actually, 21 bytes</h2>
<pre><code>ñ`i╗ñ&quot;i╜+@;(=*&quot;£Mi`MΣ
</code></pre>
<p><a href="http://actually.tryitonline.net/#code=w7FgaeKVl8OxImnilZwrQDsoPSoiwqNNaWBNzqM&amp;input=W1swLDMsMCw0XSxbMCw0LDEsNF0sWzQsMywxLDJdLFstMiw0LC0yLC0xXV0" rel="nofollow noreferrer">Try it online!</a></p>
<p>Thanks to Leaky Nun for making me stop being lazy and finally write this.</p>
<p>This uses 0-indexed matrices, and takes input as a nested list.</p>
<p>Explanation:</p>
<pre><code>ñ`i╗ñ&quot;i╜+@;(=*&quot;£Mi`MΣ
ñ                      enumerate input
 `i╗ñ&quot;i╜+@;(=*&quot;£Mi`M   for each (i, row) pair:
  i╗                     flatten, store i in register 0
    ñ                    enumerate the row
     &quot;i╜+@;(=*&quot;£M        for each (j, val) pair:
      i╜+                  flatten, add i to j
         @;(               make an extra copy of val, bring i+j back to top
            =              compare equality of i+j and val
             *             multiply (0 if not equal, val if they are)
                 i       flatten the resulting list
                    Σ  sum the values
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>15</s> <s>14</s> 10 bytes</h1>
<pre><code>3#fbb+y=*s
</code></pre>
<p>The input has rows separated by <code>;</code>. For example: <code>[1 5 2; 9 4 2; 5 9 6]</code>. 1-based indexing is used.</p>
<p><a href="http://matl.tryitonline.net/#code=MyNmYmIreT0qcw&amp;input=WzMgLTEgMyAzOyAzIC0xIDMgMV0K" rel="nofollow noreferrer">Try it online!</a> Or <a href="http://matl.tryitonline.net/#code=YAozI2ZiYit5PSpzCkRU&amp;input=W10KWzJdClsxIDUgMjsgOSA0IDI7IDUgOSA2XQpbMCAzIDAgNDsgMCA0IDEgNDsgNCAzIDEgMjsgLTIgNCAtMiAtMV0KWzMgLTEgMyAzOyAzIC0xIDMgMV0" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<p>I'll use the example with input <code>[3 -1 3 3; 3 -1 3 1]</code> in the explanation.</p>
<pre><code>3#f    % Three-output find: for all nonzero values of implicit input matrix, pushes
       % three column vectors with row indices, column indices, and values
       %   Stack contains: [1;2;1;2;1;2;1;2], [1;1;2;2;3;3;4;4], [3;3;-1;-1;3;3;3;1]
bb     % Bubble up twice: move vectors of row and column indices to top
       %   Stack contains: [3;3;-1;-1;3;3;3;1], [1;2;1;2;1;2;1;2], [1;1;2;2;3;3;4;4]
+      % Element-wise sum of top two arrays
       %   Stack contains: [3;3;-1;-1;3;3;3;1], [2;3;3;4;4;5;5;6]
y      % Duplicate the vector of nonzero values onto the top of the stack
       %   Stack contains: [3;3;-1;-1;3;3;3;1], [2;3;3;4;4;5;5;6], [3;3;-1;-1;3;3;3;1] 
=      % Element-wise equality test of top two arrays
       %   Stack contains: [3;3;-1;-1;3;3;3;1], [0;1;0;0;0;0;0;0]
*      % Element-wise multiply of top two arrays
       %   Stack contains: [0;3;0;0;0;0;0;0]
s      % Sum of array
       %   Stack contains: 3
</code></pre>
</div>
<div id="pu16" class="pu"><h1>R, 24 bytes</h1>

<pre><code>sum(M[M==row(M)+col(M)])
</code></pre>

<p>1-based.<br>
Test cases:</p>

<pre><code>&gt; M&lt;-matrix(nrow=0,ncol=0)
&gt; M
&lt;0 x 0 matrix&gt;
&gt; sum(M[M==row(M)+col(M)])
[1] 0
&gt; M&lt;-matrix(2,nrow=1,ncol=1)
&gt; M
     [,1]
[1,]    2
&gt; sum(M[M==row(M)+col(M)])
[1] 2
&gt; M&lt;-matrix(c(1,9,5,5,4,9,2,2,6),nrow=3)
&gt; M
     [,1] [,2] [,3]
[1,]    1    5    2
[2,]    9    4    2
[3,]    5    9    6
&gt; sum(M[M==row(M)+col(M)])
[1] 10
&gt; M&lt;-matrix(c(0,0,4,-2,3,4,3,4,0,1,1,-2,4,4,2,-1),nrow=4)
&gt; M
     [,1] [,2] [,3] [,4]
[1,]    0    3    0    4
[2,]    0    4    1    4
[3,]    4    3    1    2
[4,]   -2    4   -2   -1
&gt; sum(M[M==row(M)+col(M)])
[1] 11
&gt; M&lt;-matrix(c(3,3,-1,-1,3,3,3,1),nrow=2)
&gt; M
     [,1] [,2] [,3] [,4]
[1,]    3   -1    3    3
[2,]    3   -1    3    1
&gt; sum(M[M==row(M)+col(M)])
[1] 3
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Ruby, 63 bytes</h1>

<p>With z as a two-dimensional array of numbers:</p>

<pre><code>s=0;z.each_index{|i|z[i].each_index{|j|s+=i+j if z[i][j]==i+j}}
</code></pre>

<p>Not terribly exciting at all.</p>

<p>If z is a flattened array with x and y having the sizes of the arrays, such as:</p>

<pre><code>x=z.size
y=z[0].size
z=z.flatten
</code></pre>

<p>Then we have this monstrousity - perhaps more ruby-ish with it's fancy products and zips, but actually larger:</p>

<pre><code>(1..x).to_a.product((1..y).to_a).zip(z).inject(0){|s,n|s+(n[0][0]+n[0][1]==n[1]+2?n[1]:0)}
</code></pre>
</div>
<div id="pu18" class="pu"><h1>PHP, 59 bytes</h1>
<pre><code>foreach($a as$y=&gt;$r)foreach($r as$x=&gt;$v)$s+=($v==$x+$y)*$v;
</code></pre>
<p>expects array $a defined; must be empty or 2-dimensional, 0-indexed.<br />
calculates sum to $s (previously 0 or undefined - 0 equals NULL)<br />
insert <code>+2</code> before final <code>)</code> for 1-indexed behaviour</p>
<p>Happy Birthday APL! </p>
<p><strong>functions and test suite</strong></p>
<pre><code>function f0($a) { foreach($a as$y=&gt;$r)foreach($r as$x=&gt;$v)$s+=($v==$x+$y)*$v;return $s|0; }
function f1($a) { foreach($a as$y=&gt;$r)foreach($r as$x=&gt;$v)$s+=($v==$x+$y+2)*$v;return $s|0;}
$samples = [
    [], 0, 0,
    [[2]], 0, 2,
    [[1,5,2],[9,4,2],[5,9,6]], 2, 10,
    [[0,3,0,4],[0,4,1,4],[4,3,1,2],[-2,4,-2,-1]],11,11,
    [[3,-1,3,3],[3,-1,3,1]],6,3
];
function test($x,$e,$y){static $h='&lt;table border=1&gt;&lt;tr&gt;&lt;th&gt;input&lt;/th&gt;&lt;th&gt;output&lt;/th&gt;&lt;th&gt;expected&lt;/th&gt;&lt;th&gt;ok?&lt;/th&gt;&lt;/tr&gt;';echo&quot;$h&lt;tr&gt;&lt;td&gt;&quot;,out($x),'&lt;/td&gt;&lt;td&gt;',out($y),'&lt;/td&gt;&lt;td&gt;',out($e),'&lt;/td&gt;&lt;td&gt;',cmp($e,$y)?'N':'Y',&quot;&lt;/td&gt;&lt;/tr&gt;&quot;;$h='';}
while($samples)
{
    $a=array_shift($samples);
    test($a,'B0:'.array_shift($samples),'B0:'.f0($a));
    test($a,'B1:'.array_shift($samples),'B1:'.f1($a));
}
</code></pre>
</div>
<div id="pu19" class="pu"><h1>Lua, 70 bytes</h1>



<p>1-indexed.</p>

<pre class="lang-lua prettyprint-override"><code>s=0 for i=1,#a do for j=1,#a[i]do s=i+j==a[i][j]and s+i+j or s end end
</code></pre>

<p>Bonus: it works for ragged arrays!</p>

<p>Input stored in <code>a</code>, output stored in <code>s</code>.</p>

<h1>Full program:</h1>

<pre class="lang-lua prettyprint-override"><code>function Dijkstras_Challenge(a)
    s=0 for i=1,#a do for j=1,#a[i]do s=i+j==a[i][j]and s+i+j or s end end
    print(s)
end

Dijkstras_Challenge({})
Dijkstras_Challenge({{2}})
Dijkstras_Challenge({{1,5,2},{9,4,2},{5,9,6}})
Dijkstras_Challenge({{0,3,0,4},{0,4,1,4},{4,3,1,2},{-2,4,-2,-1}})
Dijkstras_Challenge({{3,-1,3,3},{3,-1,3,1}})
</code></pre>
</div>
<div id="pu20" class="pu"><h1>APL, <s>13</s> 12 bytes</h1>

<p><strong>1 byte thanks to @jimmy23013.</strong></p>

<p>1-indexed.</p>

<p>The array is stored in the variable <code>m</code>.</p>

<pre>
<s>+/,m×m=+/¨⍳⍴m</s>
+/∊m∩¨+/¨⍳⍴m
</pre>

<p><a href="http://tryapl.org/?a=+/%u220Am%u2229%A8+/%A8%u2373%u2374m%20%u2190%202%204%20%u2374%203%20%AF1%203%203%203%20%AF1%203%201&amp;run" rel="nofollow noreferrer">Try it online!</a></p>

<p>Based on <a href="https://codegolf.stackexchange.com/a/85793/48934">the answer in J</a>, which is a language based on APL.</p>

<p>In TryAPL, to key in: <code>+/m&#96;em&#96;c&#96;1+/&#96;1&#96;i&#96;rm</code></p>

<p>With the array: <code>+/m&#96;em&#96;c&#96;1+/&#96;1&#96;i&#96;rm &#96;[ 2 4 &#96;r 3 &#96;21 3 3 3 &#96;21 3 1</code></p>

<h3>Explanation</h3>

<pre><code>+/∊m∩¨+/¨⍳⍴m
           m    temp ← variable
          ⍴     temp ← shape of temp
         ⍳      temp ← a 2D array where each element is
                       the corresponding index. for the
                       example, this gives:
                       ┌───┬───┬───┬───┐
                       │1 1│1 2│1 3│1 4│
                       ├───┼───┼───┼───┤
                       │2 1│2 2│2 3│2 4│
                       └───┴───┴───┴───┘
      +/¨       each element in temp ← its sum
   m∩¨          temp ← intersect each element in temp with the variable
+/              temp ← sum of temp
</code></pre>
</div>
<div id="pu21" class="pu"><h2>PowerShell v2+, 43 bytes</h2>

<pre><code>%{$j=0;$_|%{$o+=$_*($_-eq$i+$j++)};$i++};$o
</code></pre>

<p>As a snippet. Usage is to explicitly pipe the matrix to this (see examples below). Assumes that <code>$i</code>, and <code>$o</code> are either null or zero at the start (I've explicitly set them as such in the examples below), and utilizes 0-index.</p>

<p>Does a foreach loop on each row of the matrix. We set <code>$j</code> to <code>0</code>, and then go through each element of the row in another loop <code>$_|%{...}</code>. Each inner loop, we increment <code>$o</code> by the current element multiplied by a Boolean <code>($_-eq$i+$j++)</code>, meaning if that Boolean is <code>$TRUE</code>, it'll be <code>1</code>, otherwise <code>0</code>. Then we exit the inner loop, increment <code>$i</code>, and start the next row. Finally, we leave <code>$o</code> on the pipeline at the end.</p>

<h3>Examples</h3>

<pre><code>PS C:\Tools\Scripts\golfing&gt; $o=0;$i=0;$j=0;@(@(3,-1,3,3),@(3,-1,3,1))|%{$j=0;$_|%{$o+=$_*($_-eq$i+$j++)};$i++};$o
6

PS C:\Tools\Scripts\golfing&gt; $o=0;$i=0;$j=0;@(@(0,3,0,4),@(0,4,1,4),@(4,3,1,2),@(-2,4,-2,-1))|%{$j=0;$_|%{$o+=$_*($_-eq$i+$j++)};$i++};$o
11
</code></pre>
</div>
<div id="pu22" class="pu"><h1>Jelly, <s>15</s> <s>14</s> 10 bytes</h1>

<p><strong>4 bytes thanks to Adnan.</strong></p>

<p>1-indexed.</p>

<pre>
<s>L€R€+"LR$=³×³FS</s>
<s>L€R€+"LR$=×³FS</s>
J€+"J=×⁸FS
</pre>

<p><a href="http://jelly.tryitonline.net/#code=SuKCrCsiSj3Dl8KzRlM&amp;input=&amp;args=W1szLC0xLDMsM10sWzMsLTEsMywxXV0" rel="nofollow">Try it online!</a></p>

<p><a href="http://jelly.tryitonline.net/#code=SuKCrCsiSj3Dl-KBuEZTCsOH4oKs&amp;input=&amp;args=W10sW1syXV0sW1sxLDUsMl0sWzksNCwyXSxbNSw5LDZdXSxbWzAsMywwLDRdLFswLDQsMSw0XSxbNCwzLDEsMl0sWy0yLDQsLTIsLTFdXSxbWzMsLTEsMywzXSxbMywtMSwzLDFdXQ" rel="nofollow">Verify all testcases at once.</a>
(Slightly modified.)</p>
</div>
<div id="pu23" class="pu"><h1>Pyth, 14 bytes</h1>

<p>0-indexed.</p>

<pre><code>ss.e.e*ZqZ+kYb
</code></pre>

<p><a href="http://pyth.herokuapp.com/?code=ss.e.e%2aZqZ%2BkYb&amp;test_suite=1&amp;test_suite_input=%5B%5D%0A%5B%5B2%5D%5D%0A%5B%5B1%2C5%2C2%5D%2C%5B9%2C4%2C2%5D%2C%5B5%2C9%2C6%5D%5D%0A%5B%5B0%2C3%2C0%2C4%5D%2C%5B0%2C4%2C1%2C4%5D%2C%5B4%2C3%2C1%2C2%5D%2C%5B-2%2C4%2C-2%2C-1%5D%5D%0A%5B%5B3%2C-1%2C3%2C3%5D%2C%5B3%2C-1%2C3%2C1%5D%5D&amp;debug=0" rel="nofollow">Test suite.</a></p>
</div>
<div id="pu24" class="pu"><h2>CJam, <s>23</s> <s>21</s> 20 bytes</h2>

<p><em>Thanks to Peter Taylor for saving 3 bytes.</em></p>

<pre><code>ee{~_@f-_,,.=.*~}%1b
</code></pre>

<p>Expects the matrix to be on the stack and leaves the sum instead. Indices are zero-based in either case.</p>

<p><a href="http://cjam.aditsu.net/#code=%5B%5B%200%203%20%200%20%204%5D%0A%20%5B%200%204%20%201%20%204%5D%0A%20%5B%204%203%20%201%20%202%5D%0A%20%5B-2%204%20-2%20-1%5D%5D%0A%0Aee%7B~_%40f-_%2C%2C.%3D.*~%7D%251b" rel="nofollow">Test it here.</a></p>
</div>
<div id="pu25" class="pu"><h2><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 46 bytes</h2>

<p>Byte count assumes ISO 8859-1 encoding.</p>

<pre><code>\d+
$*
M!`(?&lt;=(\S* |.*¶)*)(?&lt;-1&gt;1)+\b(?(1)1)
1
</code></pre>

<p>Input uses space and linefeed separators to represent the matrix. Indices are 0-based.</p>

<p><a href="http://retina.tryitonline.net/#code=XGQrCiQqCk0hYCg_PD0oXFMqIHwuKsK2KSopKD88LTE-MSkrXGIoPygxKTEpCjE&amp;input=MCAzIDAgNAowIDQgMSA0CjQgMyAxIDIKLTIgNCAtMiAtMQ" rel="nofollow noreferrer">Try it online!</a></p>

<h3>Explanation</h3>

<p>Not quite the kind of challenge Retina was made for, but it's doing surprisingly well... :)</p>

<p><strong>Stage 1: Substitution</strong></p>

<pre><code>\d+
$*
</code></pre>

<p>This simply expands all the integers in the string as unary numbers using <code>1</code> as the unary digit. Negative numbers like <code>-3</code> will simply become things like <code>-111</code>.</p>

<p><strong>Stage 2: Match</strong></p>

<pre><code>M!`(?&lt;=(\S* |.*¶)*)(?&lt;-1&gt;1)+\b(?(1)1)
</code></pre>

<p>Due to the <code>!</code> option, this prints all the matches of the given regex. Said regex uses <a href="https://stackoverflow.com/a/17004406/1633117">balancing groups</a> to check whether the current number is the same as the sum of its indices.</p>

<p>To do that, we first determine the sum of indices with the lookbehind <code>(?&lt;=(\S* |.*¶)*)</code>. This adds one capture for each number in front of the current one on the same line (via <code>\S* </code>) as well as one capture for each line in front of the current one (via <code>.*¶</code>) to group <code>1</code>. Hence, we get the zero-based sum of indices as a result.</p>

<p>Then we try to match the entire next number while removing captures from this stack with <code>(?&lt;-1&gt;1)+\b</code>. And then we make the match fail if any captures are left on group <code>1</code> with <code>(?(1)1)</code> to ensure equality.</p>

<p>Note that negative numbers are never matched, because the lookbehind cannot get past the <code>-</code> in front of list of <code>1</code>s and the <code>(?&lt;-1&gt;1)+</code> can't match it either.</p>

<p>This gives us a list of all the unary numbers which equal the sum of their indices.</p>

<p><strong>Stage 3: Match</strong></p>

<pre><code>1
</code></pre>

<p>We end with another match stage, but without the <code>!</code> option, this just counts the number of matches, which both sums all the unary numbers from the previous result and also converts that sum back to decimal.</p>
</div>
<div id="pu26" class="pu"><h2>JavaScript, <s>49</s> 46 bytes</h2>

<pre><code>a.map((b,i)=&gt;b.map((c,j)=&gt;r+=c==i+j&amp;&amp;c),r=0)|r
</code></pre>

<p>Edit: Saved 3 bytes thanks to @MartinEnder pointing out that snippets are allowed.</p>
</div>
<div id="pu27" class="pu"><h1>J, 15 bytes</h1>

<pre><code>+/,M*M=+/&amp;i./$M
</code></pre>

<p>Uses zero-based indexing and assumes the matrix is already stored in variable <em>M</em>.</p>

<h2>Explanation</h2>

<pre><code>+/,M*M=+/&amp;i./$M
             $a  Get the shape of M
            /    Insert between the shape
         &amp;i.     Create a range from 0 to each end exclusive
       +/        Forms a table which is the sum of each row and column index
     M=          1 if the element is equal to its index sum else 0
   M*            Multiply by their values
  ,              Flatten
+/               Reduce using addition to get the sum
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/85786/">85786</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




