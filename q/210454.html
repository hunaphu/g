<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::210454</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>085</td><td>Wolfram Language Mathematica</td><td>200902T045629Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210464#210464">att</a></td></tr>
<tr d-ix="1"><td>021</td><td>Charcoal</td><td>200902T000041Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210459#210459">Neil</a></td></tr>
<tr d-ix="2"><td>225</td><td>R</td><td>200902T130620Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210483#210483">Dominic </a></td></tr>
<tr d-ix="3"><td>126</td><td>R</td><td>200903T171959Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210543#210543">att</a></td></tr>
<tr d-ix="4"><td>163</td><td>Perl 5</td><td>200906T035724Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210629#210629">Kjetil S</a></td></tr>
<tr d-ix="5"><td>137</td><td>JavaScript ES8</td><td>200902T120927Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210481#210481">Arnauld</a></td></tr>
<tr d-ix="6"><td>013</td><td>05AB1E</td><td>200902T084849Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210475#210475">Kevin Cr</a></td></tr>
<tr d-ix="7"><td>060</td><td>J</td><td>200903T065429Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210515#210515">Bubbler</a></td></tr>
<tr d-ix="8"><td>070</td><td>Pip l</td><td>200903T023139Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210496#210496">DLosc</a></td></tr>
<tr d-ix="9"><td>318</td><td>Scala</td><td>200902T183306Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210486#210486">user</a></td></tr>
<tr d-ix="10"><td>222</td><td>JavaScript V8</td><td>200902T000438Z</td><td><a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210460#210460">Matthew </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>123</s> <s>122</s> <s>109</s> <s>107</s> <s>87</s> 85 bytes</h1>
<pre><code>Print@@@SparseArray[i=p=0;p-=ReIm[++I/I^⌈2√i++⌉/.I+1|I-1-&gt;I]&amp;/@#+2i-&gt;#,3i,&quot; &quot;]&amp;
</code></pre>
<p><a href="https://tio.run/##LY29boMwGAB3noIYicWmNMlYEbmqEsVbFSJ1QFT6Ygy4wdgy7lDlZ06kPEEfjxehpO1yp5tOgauFAic5DGUyvFrZOkppasB24tla@MpkYpLHJxMlG8FUhjGL2Xt/u8z6y7fEuL9d4weGp0cWTaMFy8OYBngmo0VA5pIgH@XhUNKXGixwJ2xHl7zWWUAQIluduvFXjcVa8@lW2qo8zMNzyqE9HzwEO16Isqrlx75RrTaIeGgtmkb7b9o2xeTe8IvdH/m/iruRdxp@AA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Input a list of characters.</p>
<p>The direction of the (1-indexed) <span class="math-container">\$i\$</span>th character relative to the previous character can be computed with <span class="math-container">\$\Big\lceil2\sqrt i\Big\rceil\bmod 4\$</span>:</p>
<ul>
<li>1: ↗</li>
<li>2: ↘</li>
<li>3,0: ←</li>
</ul>
<hr />
<h3>alternative approach, <s>99</s> 93 bytes</h3>
<pre><code>sPrint@@@Array[&quot; &quot;&amp;@@s[[4# #-2#+1-#2&amp;@@If[(a=Abs@#2)&lt;2#,!##,#-a|-#2]]]&amp;,2{L=Tr[1^s],L},-L]
</code></pre>
<p><a href="https://tio.run/##JY1NasMwFIT3PoWjB6al8iIiyxpeKC0NeNGSQBZCgWdZjt3aVpCURcnPIXKDnDBHcJ128w3fzGI6CrXpKDSahiob/O1y/XBNHxBx7hz9SBazBNFLOYMYUgFP0xTE2Cwq@UDZvPAI4vFZAJ8AcEjpOM5KqYSLQ56tnJxuvOL5iae5Gj73jQlY4UtNjnQwzuOrrq0Ezhhf2WUYn7ejLfrdPrxZ16lEJeelpv58iBgVujTVtm6@vtuutzvGI/Zu2tbGa@vacnJ3@kPxT30PFp2GXw" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Directly computes the index of each position: in Cartesian coordinates (zero-indexed),
<span class="math-container">\$\operatorname{index}(x,y)=\begin{cases}2y(2y+1)-x,&amp;|x|&lt;-2y\\
2\left(y+|x|\right)\left(2\left(y+|x|\right)+1\right)+x,&amp;\text{else}\end{cases}.\$</span></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>37</s> <s>36</s> 21 bytes</h1>
<pre><code>ＧＨ✳✳Ｅ⊖ＬθＩ§4174⌈⊗₂⊕ι²θ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=RY7NCoJAFIVfRVxdQReFUNAqcpFQELWMFuN41alxrs6M_Wx7jTYuinqAXqa3SUjoLA_f-Ti3Fy-Y5sRk2z4amwXjz3VF8pKTmpOUdIJIaORWkDKwZBVEyDWWqCymsECV2wJqz_OdGTMWpjZWKZ7BDQej0O1KFFKoHCJqEtkNNnXDNK6JLMTq7xFeH98Z-k7tTe4m4ab_89y6wVG6uzdLeIpZXoj9QZaKqlob-0O-" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Explanation: Inspired by @KevinCruijssen's 05AB1E solution, but then using @att's formula to generate the directions.</p>
<pre><code>       θ                Input string
      Ｌ                 Length
     ⊖                  Decremented
    Ｅ                   Map over implicit range
                  ι     Current index (0-indexed)
                 ⊕      Incremented (i.e. 1-indexed)
                ₂       Square rooted
               ⊗        Doubled
              ⌈         Ceiling
         §4174          Cyclically index to find direction
        Ｉ               Cast to integer
  ✳✳                    Convert to directions
ＧＨ                 ²θ   Draw path using input string
</code></pre>
<p>The path drawing command draws one character for the start and then <code>n-1</code> characters for each direction in the array. Unfortunately there aren't any single character strings that represent diagonal directions so I have to use integers instead; these start at <code>0</code> for right and increment for each 45° clockwise.</p>
<p>Previous 37 byte solution:</p>
<pre><code>≔⮌⪪Ｓ¹θＦＬθＦ³Ｆ§⟦⊕⊗ι⁺³×⁴ι⊗⊕ι⟧κ¿θ✳⁻⁷×³κ⊟θ
</code></pre>
<p><a href="https://tio.run/##TU6xrsIwDNz5ioyOVAbUJ72BCYmlEkgI3vbEUFK3NU2dNnERfx/SCiQWn3w@351pS29caWPchUANwxkf6APCZbAkUPAwyUU8cQM6Uxudxqi3q9p5BQfkRloYtVbLnr9xJwVX@IT/go3HHlmwgr2bbjYhzRYnOwXIM/VHPQb4ydTCfiTfb@lwzVSXIqhWKUqdUheBPXk0Qo7hSJy8fj9e@SKeI9wwN9vGWN5MhXXT0r2zPbth9EFWcf2wLw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⮌⪪Ｓ¹θ
</code></pre>
<p>Split the input into characters and reverse the list.</p>
<pre><code>ＦＬθ
</code></pre>
<p>Loop a large enough number of times.</p>
<pre><code>Ｆ³
</code></pre>
<p>Loop for each side of the triangle.</p>
<pre><code>Ｆ§⟦⊕⊗ι⁺³×⁴ι⊗⊕ι⟧κ
</code></pre>
<p>Loop for the size of the side.</p>
<pre><code>¿θ
</code></pre>
<p>Check whether there is still anything left to print.</p>
<pre><code>✳⁻⁷×³κ⊟θ
</code></pre>
<p>Print the next character in the appropriate direction.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>270</s> <s>265</s> <s>252</s> <s>243</s> <s>232</s> <s>227</s> 225 bytes</h1>
<p><em>I finally managed to remove 2 more characters to bring the total to a number that can be represented in triangular form (as shown here). Code should be formatted conventionally to be run (as in the example on TIO); the '•' represents a newline (<code>\n</code>) character.</em></p>

<pre class="lang-r prettyprint-override"><code>              f
             unc
            tion(
           s,`~`=c
          bind,m=ma
         trix){n=nch
        ar(s)+1;p=m(,
       n^2,2);while(T&lt;
      n){a=4*F;p[T+0:a,
     ]=c(F:-F,(-F:F)[-1]
    )~0:a-2*F;p[T+a+-2:a+
   3,]=(F=F+1)~(b=2*F-1):-
  b;T=T+2*a+4};m=m(&quot; &quot;,n,n)
 ;m[p[2:n-1,]+b+1]=el(strspl
it(s,''));apply(m,1,cat,&quot;•&quot;)}
</code></pre>
<p><a href="https://tio.run/##NY/LboMwEEX3/gqLLrBjUxWaFaq3fAE7RBUDTnBrxtQ2eTRKfp06UrMb6Zy5utetwWkJB6PEul@gD9oC8Xx334m@0zDwSUwyKmd6BQH9KB3xlOVoFhPh8FnwgqLTqI0i9QfQqxTbTYXmpmZvpeSt6ElVZhUnWVVWtMnylt4jyIp/SbKsKCV7jyapRMVyeiediDTLaZl1qBY1KzaSbW8o9iAJTjhwoGhq5qYoIct5yzqWt0IZ4oPzs9Ehtk9TSpGcZ3MhE895LwNPUEJv6wsGGxQOowz4uRs/Z@NReuxUWBzgozTLv6f94wmDUoMaOPYW@2CdGrB@aDGkixkpLMakeFROoccpnukkCaP6WXT/3Tl7gr09fy3T7O1RuQiM/L0M9vCa0PUP" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Note that this approach has been comprehensively outgolfed by <a href="https://codegolf.stackexchange.com/questions/210454/spiralize-a-word-triangularly/210543#210543">att's approach</a>, although as consolation neither that nor any of the other current answers can be represented as a triangle...</p>
<p>Works by constructing the coordinates for each letter, then using this to put the letters into an empty matrix.</p>
<p>Commented:</p>
<pre class="lang-r prettyprint-override"><code>triangle=
function(s){n=nchar(s)          # n is the number of letters
s=el(strsplit(s,''))            # first split the string into individual letters
p=matrix(,2,n^2)                # initialize p as a 2-row matrix to hold the coordinates
                                # (with plenty of columns so that we've enough to go all 
                                # the way round the outermost triangle)
                                # now, F is the current loop, starting at 0
while(T&lt;=n){                    # T is the current letter index
a=4*F+1                         # a=the size of the 'arch' (number of letters going up &amp; over)
p[,T+1:a-1]=                    # set the coordinates for the arch letters...
  rbind(                        # ...(rbind combines rows for y &amp; x coordinates)...
    c(F:-F,(-F:F)[-1]),         # ...to y = F..-F, and then -F+1..F (so: up &amp; then down again)
    1:a-2*F-1)                  # ...and x = across the arch from -2*F to +2*F
a=a+2                           # a=now the width of the base = size of arch + 2
p[,T+a+1:a-3]=                  # now set the coordinates of the base letters...
  rbind(                        #
    F+1,                        # ... base y = row F+1
    (b=2*F+1):-b)               # ... and x = goes (backwards) from 2*F+1..-2*F-1
T=T+2*a-2                       # update the current letter index
F=F+1}                          # increment the loop
p=p[,1:n]                       # delete any excess coordinates
p=p-min(p)+1                    # re-zero the coordinates to remove negatives
m=matrix(&quot; &quot;,b&lt;-max(p),b)       # create a new matrix filled with &quot; &quot;
m[t(p)]=s                       # and fill it with the letters at the right positions
n=apply(m,1,cat,&quot;               # finally, print each row
&quot;)}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>205</s> <s>153</s> <s>147</s> <s>136</s> <s>132</s> 126 bytes</h1>
<p>-52 from Dominic van Essen.<br />
-4 from Giuseppe.<br />
-4 again thanks to Giuseppe.<br />
-5 further thanks to Dominic van Essen</p>

<pre class="lang-r prettyprint-override"><code>function(s,n=nchar(s))for(y in(x=-n:n)*2)cat(ifelse((i=(t=y-2*(r=abs(x))*!r&lt;y)*t-t-2*(r&lt;y)*x+x+1)&gt;n,&quot; &quot;,substring(s,i,i)),&quot;
&quot;)
</code></pre>
<p><a href="https://tio.run/##bU@7UsMwEOzzFRdRRHJsZkjJIGr@gFq2z7FAnOB0CjY/b2QGN4RuZ29fx4uwd3QOaJchUyc@kk41WepGxzoZM0TWM3jSk23onkx1Mp0T7QcMCbX2Voudm1Ol2bo26cmYas8Ps6mkkR96xdNxOt6ZR6oVqDrlNpVWOpciX3tjarVTZrkBioIgoxPYRsG2CUaXgFEyE1xcyL86n1YTEGKPfQ0pQpLI2Je9RVZC2pJxoBzCAUZk3K3QbulayYgf2XevLcdPGuL0kt/eU7wgl0NwX3Mfz7fK/HVdM@4fqr3mnjCECM@RQ78vH38D" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 163 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub f{                    #newlines and indentation added here for readability. 
  $_=' 'x1e3;
  @L=(51,$a=-1,-49)x($p=225);
  for$c(pop=~/./g){
    $P=$p+$L[1];
    $a++&gt;0&amp;&amp;s/^(.{$P}) /$1$c/s&amp;&amp;($p=$P,$a=0,shift@L)||substr$_,$p+=$L[0],1,$c
  }
  s/.{50}/$&amp;\n/gr
}
</code></pre>
<p>In short, it adds the next char from the input in the current direction unless it discovers it's time to change direction.</p>
<p><a href="https://tio.run/##Xc3LToNAGEDhvU@BzR/KBMowVRaGjKn3tqLitd5qQylQFGGcoYpSfHWcroyuT/IdFvLUbhqxmCpRBRPaVtolCTecnks1mxjg0w4xOptbqNSA0W7XRk6Ucwg0ljP6jU0cowo8CkwH94GMHfB1fdtSVYGfNFOWGikYCARYqOpKAG9lWoaYJ1HRc9FyKdei4DAxpEElYo0N@Q1qgc3KtmoM6mOGY143a4wnWaFEWsufBrMwiufJ80v6muXsjYti8f5Rfn7t7O7tHxwe9QfDY/fk9Mw7v7i8ur4Z3d7dt5DzC/TDNM2VUc7T2fqf8F@WsfkB" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES8), 137 bytes</h1>
<p>Expects an array of characters. Returns a string.</p>
<p>This version is based on <a href="https://codegolf.stackexchange.com/a/210464/58563">the formula used by @att</a>, modified to be more golf-friendly in JS.</p>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map((c,n)=&gt;(m[y+=~(d=2*n**.5-1/n)%4%3?d&amp;++x/x||-1:!x--]=m[y]||[...''.padEnd(x)])[x]=c,m=[],x=y=a.length)&amp;&amp;m.map(r=&gt;r.join``).join`
`
</code></pre>
<p><a href="https://tio.run/##bY7LTsMwFET3@Qo3UlM7D1flsaFyWFXiD1hElmJs54VjBycUBwK/HgxlyWZmdO6VZjp2ZiO37TBl2gi5VmRlJGe4ZwOEPNWI5LAv5oR8QUGuYh3H@DY77DXa3myv70WUJG7vliU73G1cllHif@myFBjj3Q4PTJy0gA5RVDhKeNqTgqaOzIRhJXU9NSiK@t8uS3KLO9PqskQXD8r1WAQAhA9SKQMejVViE6YgZE8X5X8mZFU3bfesem2G/9iLHafX85ub38OABrgy9sR4A0dAcvDhG6z0EVTwZ/VI0dEjbvRolMTK1NCfPftE6zc" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> (raw output)</p>
<p><a href="https://tio.run/##bY9NU4MwEEDv/IqUsSXhI1i1FzvBU2e8ePHiAZghQoDWkGDAmlrwr2O0nZ687O683dm3u6N72uVq2/aBkAWbSjJRElHc0BbC3BeIRLCJDx75hgW5cYXr4lWwDAWa381vH4qF5@lQD0OwvJ/pIEiJmU2HIcYYOw5uabERBdQoRbFOSe43JE59TQ6EYs5E1ddosWj@XIpECu/kVmQZOmUrm9axBYD9yDiX4EUqXsxsH9j09RTzcypYWdXb3RtvhGz/Y@@q6z/2n/rwZVuphUupNjSvYQdIBI7GoJgpQQl/r@5StDYol6KTnGEuK2jaWLGW05zBMBFeWBlHImx0oc@s2ugWZkkiwPHq2J2fAwF4on2NSy6lghfquuAar9A4Zj5wKgedtxnviKYf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> (with extra whitespace removed)</p>
<h3>How?</h3>
<p>Given the position <span class="math-container">\$n\$</span> of the character, the direction <span class="math-container">\$0\le d\le 2\$</span> can be computed with:</p>
<p><span class="math-container">$$d=\left(\left\lfloor2\sqrt{n}+1-\frac{1}{n}\right\rfloor\bmod 4\right)\bmod 3$$</span></p>
<p>The actual JS implementation is:</p>
<pre class="lang-javascript prettyprint-override"><code>~(2 * n ** 0.5 - 1 / n) % 4 % 3
</code></pre>
<p>which evaluates to <span class="math-container">\$0\$</span>, <span class="math-container">\$-1\$</span> or <span class="math-container">\$-2\$</span>.</p>
<hr />
<h1>JavaScript (ES8), <s> 163 </s> 157 bytes</h1>
<p>Expects an array of characters. Returns a string.</p>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(c=&gt;((m[y]=m[y]||[...''.padEnd(x)])[x]=c,j%3%2?x--:y+=!!++x-j%3,k?k--:k=(n=j/3&lt;&lt;1)+(j++%3||n+2)),m=[],j=k=0,x=y=a.length)&amp;&amp;m.map(r=&gt;r.join``).join`
`
</code></pre>
<p><a href="https://tio.run/##bY@9boMwHMR3nsJBIrFlcNuwNfmTKVLfoANCwuHbGJsamkJLn506Tccud6ffDacT/MqHzDT9GCidF2sJK4eIs473OIMI4y6eE7jJssSMsd2O9Tw/qxxPJCHxlEDmCy/09qcpCJ5nCpsNpVNgkd@eWotawArEQ3g8PhGKBaVeuCyK7gnxO4gTX0ALj/4EM3AmC1WNNdluu999A5FhQjcqTcndnXQ9xA5C7kshpUav2sh84/rI5Ze7Zn@WF2VVN6KVndL9f@zNDOP79WOaP10ncVipzZlnNR4QROjLLpjCRlTi2@chIQeLMq0GLQsmdYVtbdk3WX8A" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> (raw output)</p>
<p><a href="https://tio.run/##bY9Bb4IwGIbv/IpKprQC1Wl2mRZPJrvssssOQEIHBYTSssIcTPztrE7jaZfv/fJ8yffkLeiRNrE61K0rZMLGlIyUeBRXtIYx8SCs/D4klzEMPsbYsnBNk71IYIdC5HchiZ1iup6udp3rPvc2mUxsu3M1cspdqVFJoCDFYr3dPiIbFrY9XQ@DsFcIORXxQ6cgJVk6HekJxZyJrM3RbFb9@RXxFC7kQUQRuqYRjRvfAMB8YZxL8C4VTyamA0z6cZ3xLRKWZvmhKHklZP0f@1RN@3X87vof0wgNnEq1p3EOG0A8cNIGxfQKUnjp3IRoo1EsRSM5w1xmUJ@xYjWnMYOLQNiLTDsCYaI7fWPZvqthFAQCnB5Oza0ccMErbXOccikVvNP5HCzxEzqfIwdYmYVu37T3jMZf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> (with extra whitespace removed)</p>
<h3>How?</h3>
<p>This is a rather straightforward algorithm that draws the output character by character in a matrix <span class="math-container">\$m[\:]\$</span>, keeping track of the position <span class="math-container">\$(x,y)\$</span> of the pen, a direction in <span class="math-container">\$\{0,1,2\}\$</span> and the number <span class="math-container">\$k\$</span> of characters to draw before the next direction change.</p>
<p>We move according to the following table:</p>
<pre><code> direction | moving towards | distance
-----------+----------------+----------
     0     | South-East     |  2t + 1       (t = turn number)
     1     | West           |  4t + 3
     2     | North-East     |  2t + 2
</code></pre>
<p>Which gives:</p>
<pre><code>t = 0     t = 1        t = 2            t = 3

                                          2       
                         2               2.       
            2           2.              2..0      
  2        2.          2..0            2....0     
 2X       2.X0        2..X.0          2...X..0    
1110     2....0      2......0        2........0   
        11111110    2........0      2..........0  
                   111111111110    2............0 
                                  1111111111111110
</code></pre>
<p>In the JS implementation, we do not store the direction explicitly. Instead, we use a counter <span class="math-container">\$j\$</span> going from <span class="math-container">\$0\$</span> to <span class="math-container">\$+\infty\$</span> and use <span class="math-container">\$j\bmod 3\$</span> to figure out the current direction. We also do not store the turn number but compute <span class="math-container">\$n=2\cdot\lfloor j/3\rfloor\$</span>, using the value of <span class="math-container">\$j\$</span> <em>before</em> it's incremented to account for the direction change (which means that <span class="math-container">\$n\$</span> is equal to <span class="math-container">\$2(t-1)\$</span> rather than <span class="math-container">\$2t\$</span> when the direction wraps to <span class="math-container">\$0\$</span>).</p>
<p>Hence the following table:</p>
<pre><code>     j mod 3     |  (j + 1) mod 3  |                     | new starting
 (old direction) | (new direction) |    new distance     | value for k
-----------------+-----------------+---------------------+--------------
        2        |        0        | (n + 2) + 1 = n + 3 |     n + 2
        0        |        1        |      2n + 3         |    2n + 2
        1        |        2        |       n + 2         |     n + 1
</code></pre>
<p>And the corresponding expression to update <span class="math-container">\$k\$</span>:</p>
<pre class="lang-javascript prettyprint-override"><code>k = (n = j / 3 &lt;&lt; 1) + (j++ % 3 || n + 2)
</code></pre>
<p>The coordinates are updated with:</p>
<pre class="lang-javascript prettyprint-override"><code>j % 3 % 2 ?          // if the direction is 1:
  x--                //   decrement x
:                    // else:
  y += !!++x - j % 3 //   increment y if the direction is 0
                     //   or decrement y if it's 2
                     //   increment x in both cases
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>24</s> <s>20</s> <s>15</s> 13 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>2Iā¨t·îŽOGsèΛ
</code></pre>
<p>-7 bytes by porting <a href="https://codegolf.stackexchange.com/a/210459/52210"><em>@Neil</em>'s Charcoal answer</a>, using <a href="https://codegolf.stackexchange.com/a/210464/52210"><em>@att</em>'s formula</a>, so make sure to upvote both of them as well!</p>
<p><a href="https://tio.run/##ASoA1f9vc2FiaWX//zJJxIHCqHTCt8Ouxb1PR3PDqM6b//9IZWxsbyBXb3JsZCE" rel="nofollow noreferrer">Try it online.</a> No test suite, because the <code>.Λ</code> builtin will keep its previous contents and there isn't any way to reset it (<a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaBkX6nDpeRfWgLh6VT@Nyo@0nhoRcmh7YfXHd3r7158eIXeudn/df5HKyUmJaekpqVnZGZl5@Tm5Rco6Sh5pObk5CuE5xflpCgCuYlJYCJZKRYA" rel="nofollow noreferrer">this is what it would look like</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>2              # Push a 2
 I             # Push the input-string
  ā            # Push a list in the range [1,length] (without popping)
   ¨           # Remove the last value to change the range to [1,length)
    t          # Take the square-root of each value
     ·         # Double each
      î        # Ceil each
       ŽOG     # Push compressed integer 6136
          s    # Swap so the list is at the top of the stack again
           è   # Index each value (0-based and modulair) into the 6136
            Λ  # Pop all three and use the Canvas builtin,
               # after which the result is implicitly output immediately afterwards
</code></pre>

<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (section <em>How to compress large integers?</em>)</a> to understand why <code>ŽOG</code> is <code>6136</code>.</p>
<p>The Canvas builtin uses three arguments to draw a shape:</p>
<ul>
<li>Character/string to draw: the input in this case</li>
<li>Length of the lines we'll draw: <code>2</code> in this case</li>
<li>The direction to draw in: <code>[3,6,6,6,1,1,3,3,3,6,6,6,6,6,6,6,1,1,1,1,3,...]</code>.</li>
</ul>
<p>See the original answer below for an explanation of the Canvas builtin. Unlike the program below where the list of lengths are leading, here the list of directions are leading because we use a single length of <code>2</code>.</p>
<hr />
<p><strong>Original <s>24</s> 20 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a> answer:</strong></p>
<pre class="lang-none prettyprint-override"><code>ā·Ð·s&gt;ø.ι˜DŠOð×«₆1ªΛ
</code></pre>
<p>Contains leading/trailing spaces and newlines (the longer the input, the more spaces/newlines)</p>
<p><a href="https://tio.run/##ATkAxv9vc2FiaWX//8SBwrfDkMK3cz7DuC7OucucRMWgT8Oww5fCq@KChjHCqs6b//9IZWxsbyBXb3JsZCE" rel="nofollow noreferrer">Try it online.</a> No test suite, because the <code>.Λ</code> builtin will keep its previous contents and there isn't any way to reset it (<a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaBkX6nDpeRfWgLh6VT@P9J4aPvhCYe2F9sd3qF3bufpOS5HF/gf3nB4@qHVj5raDA@t0js3@7/O/2ilxKTklNS09IzMrOyc3Lz8AiUdJY/UnJx8hfD8opwURSA3MQlMJCvFAgA" rel="nofollow noreferrer">this is what it would look like</a>, where the test cases are drawn on top of one another).</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>ā           # Push a list in the range [1, length] of the (implicit) input (without popping)
            #  i.e. &quot;Hello World!&quot; → &quot;Hello World!&quot; and [1,2,3,4,5,6,7,8,9,10,11,12]
 ·          # Double each value in this list
            #  → [2,4,6,8,10,12,14,16,18,20,22,24]
  Ð         # Triplicate it
   ·        # Double each value of the top copy
            #  → [4,8,12,16,20,24,28,32,36,40,44,48]
    s       # Swap to get the other copy
     &gt;      # Increase each by 1
            #  → [3,5,6,9,11,13,15,17,19,21,23,25]
      ø     # Create pairs of the top two lists
            #  → [[4,3],[8,5],[12,7],[16,9],[20,11],[24,13],[28,15],[32,17],[36,19],[40,21],[44,23],[48,25]]
       .ι   # Interleave it with the third list
            #  → [2,[4,3],4,[8,5],6,[12,7],8,[16,9],10,[20,11],12,[24,13],14,[28,15],16,[32,17],18,[36,19],20,[40,21],22,[44,23],24,[48,25]]
         ˜  # Flatten
            #  → [2,4,3,4,8,5,6,12,7,8,16,9,10,20,11,12,24,13,14,28,15,16,32,17,18,36,19,20,40,21,22,44,23,24,48,25]
D           # Duplicate this list of integers
 Š          # Triple-swap, so the stack order is list,input,list
  O         # Pop and sum the top list
            #  → 636
   ð×       # Create a string of that many spaces
     «      # And append it to the string
₆           # Push builtin 36
 1ª         # Convert it to a list of digits, and append 1: [3,6,1]
Λ           # Use the Canvas builtin with these three arguments,
            # after which the result is implicitly output immediately afterwards
</code></pre>

<p>The Canvas builtin uses three arguments to draw a shape:</p>
<ul>
<li>Character/string to draw: the input in this case, appended with trailing spaces</li>
<li>Length of the lines we'll draw: the list <code>[2,4,3,4,8,5,6,12,7,8,16,9,10,20,11,...]</code></li>
<li>The direction to draw in: <code>[3,6,1]</code>. The digits in the range <span class="math-container">\$[0,7]\$</span> each represent a certain direction:</li>
</ul>

<pre class="lang-none prettyprint-override"><code>7   0   1
  ↖ ↑ ↗
6 ← X → 2
  ↙ ↓ ↘
5   4   3
</code></pre>
<p>So the <code>[3,6,1]</code> in this case translate to the directions <span class="math-container">\$[↘,←,↗]\$</span>.</p>
<p>Here a step-by-step explanation of the output (we'll use input <code>&quot;Hello_World!&quot;</code> as example here):</p>
<p>Step 1: Draw 2 characters (<code>&quot;He&quot;</code>) in direction <code>3↘</code>:</p>
<pre class="lang-none prettyprint-override"><code>H
 e
</code></pre>
<p>Step 2: Draw 4-1 characters (<code>&quot;llo&quot;</code>) in direction <code>6←</code>:</p>
<pre class="lang-none prettyprint-override"><code>  H
olle
</code></pre>
<p>Step 3: Draw 3-1 characters (<code>&quot;_W&quot;</code>) in direction <code>1↗</code>:</p>
<pre class="lang-none prettyprint-override"><code>  W
 _H
olle
</code></pre>
<p>Step 4: Draw 4-1 characters (<code>&quot;orl&quot;</code>) in direction <code>3↘</code>:</p>
<pre class="lang-none prettyprint-override"><code>  W
 _Ho
oller
     l
</code></pre>
<p>Step 5: Draw 8-1 characters (<code>&quot;d!     &quot;</code>) in direction <code>6←</code>:</p>
<pre class="lang-none prettyprint-override"><code>   W
  _Ho
 oller
    !dl
</code></pre>
<p>Et cetera for all other trailing spaces.</p>
<p><a href="https://codegolf.stackexchange.com/a/175520/52210">See this 05AB1E tip of mine for an in-depth explanation of the Canvas builtin.</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 60 bytes</h1>
<pre><code>4 :'x(&lt;&quot;1(#x)++/\(3|4|&gt;.2*%:i.#x){&lt;:3 3#:3 2 8)}y',~' '&quot;0/,~
</code></pre>
<p><a href="https://tio.run/##ndJbT8IwFADg9/2K4zbTDUq3bqi4AAmgiIqoeMFbQhQ2Lk6GyIQJ7q/PKmQmMhKwD01z2n4956TdQAUDVE4F27SGHIVBp9UegtvntPmy6Yx6nMzxBJAFGQMQhp8rkCBQqJaLQRIMNJbSPJWEsRyPKw@SPk1Os0SLbRodwmKTtKGDLrBJg5T86SHsI0C8qmA/gEqeAKczwpsRXgTh/SUkTdBiLCxOiCp6iPufglgW32n42A@N9Yu5N2bFMGXBSPA0TRR5FQbmyjqGCnWK6xQoNtgUofx2ZJniLSphWyIauy4j@pooLDrghvs0niWKmyGr04j9RrPRdsACVDJt24GaM7CbG2gWRQk2UHji8anRNK1Wu9N9tl96Tv918DZ030dj7yOXL@ztFw9Kh0fH5ZPK6dl59eLy6rp2c3unUk1Pbm3vpHYjTYxy0W/l8sviBRR8AQ" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Obligatory J answer because it's Jonah's challenge.</p>
<p>Because &quot;replace a certain position inside an array with a value&quot; is not a verb but an adverb, it can't be used in a train as-is, so it is wrapped inside an explicit inline verb.</p>
<p>Uses <a href="https://codegolf.stackexchange.com/a/210464/78410">att's formula</a> to construct the directions.</p>
<h3>How it works</h3>
<pre><code>NB. input: a string (character vector) of length n

,~' '&quot;0/,~  NB. create a large enough canvas (blank matrix of size 2n*2n)
        ,~  NB. concatenate two copies of self
       /    NB. outer product by...
  ' '&quot;0     NB.   a constant function that returns blank per character
,~          NB. concatenate two copies of self

4 :'...'  NB. a dyadic explicit verb, where x is the input string and
          NB. y is the canvas generated above
x(...)}y    NB. replace some places of y by contents of x...
3|4|&gt;.2*%:i.#x  NB. formula by att (gives 0, 1, or 2 per index)
(...){          NB. select the directions based on the above...
&lt;:3 3#:3 2 8    NB. the matrix (0 -1)(-1 1)(1 1) i.e. L/RU/RD
(#x)++/\        NB. take cumulative sum (giving coords to place each char)
                NB. and add n to all elements
&lt;&quot;1             NB. enclose each row to satisfy the input format of }
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-l</code>, 70 bytes</h1>
<pre><code>sMC:Y#ax:w:y/2-/2Ly*2L++i/2{I++v&lt;ys@w@x:a@vi%4%3?++x&amp;i%4=1?--w++w--x}s
</code></pre>
<p><a href="https://tio.run/##K8gs@P@/2NfZKlI5scKq3KpS30hX38inUsvIR1s7U9@o2lNbu8ymstih3KHCKtGhLFPVRNXYXlu7Qg3IsjW019Ut19Yu19WtqC3@//@/bs7/xKTklNS09IzMrOyc3Lz8gsKi4pLSsvKKyioA" rel="nofollow noreferrer" title="Pip – Try It Online">Try it online!</a></p>
<p>... I'm not sure I want to try explaining this monstrosity in detail. The basic idea is to construct an over-big 2D array of spaces (<code>sMC:#a</code>) and then put the characters from the input string into the array at the proper indices (<code>s@w@x:a@v</code>). The rest of the code figures out what the &quot;proper indices&quot; are.</p>
<hr />
<p>Alternate approach, 77 bytes:</p>
<pre><code>a.:sX#aW&lt;|a{UpaWa^@YxNl?v+1++v%2?v*2+1vl:xNl?RV^p.:lv%2?lPEpl.^pAEx}RVsX,#l.l
</code></pre>
<p><a href="https://tio.run/##K8gs@P8/Uc@qOEI5MdymJrE6tCAxPDHOIbLCL8e@TNtQW7tM1ci@TMtI27AsxwokGBQWV6BnlQMSzglwLcjRiytwdK2oDQorjtBRztHL@f//v27O/8Sk5JTUtPSMzKzsnNy8/ILCouKS0rLyisoqAA" rel="nofollow noreferrer">Try it online!</a></p>
<p>Builds the triangle as a list of lines, alternating between adding lines to the front/end of the list and adding characters to the front/end of each line. I was hoping this way might be shorter, but so far it seems it's not.</p>
</div>
<div id="pu9" class="pu"><h1>Scala, <s>322</s> 318 bytes</h1>
<pre><code>s=&gt;((s zip Seq.unfold((0,0,0-&gt;0)){case(r,n,y-&gt;x)=&gt;Option.when(n&lt;s.size){val(c,t)=(math.sqrt(n).toInt%2,r+1-math.abs(x.sign))
(y-&gt;x,(t,n+1,(y+(c-1)*(1-t%2*2),x+1-c*2)))}}groupBy(_._2._1)toSeq)sortBy(_._1)map(_._2.sortBy(_._2._2)map(_._1)mkString)zipWithIndex)map{t=&gt;&quot; &quot;*(math.sqrt(s.size).toInt-t._2)+t._1}mkString &quot;\n&quot;
</code></pre>
<p><a href="https://scastie.scala-lang.org/7caCJTcPTcq8rywhD8dHcA" rel="nofollow noreferrer">Try it in Scastie</a> (doesn't work in TIO)</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://v8.dev/" rel="noreferrer">JavaScript (V8)</a>, 222 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;(g=(a,b,n=1)=&gt;b?g([(c=(b+' '.repeat(n*8)).slice(0,n*8))[n*6-1],...[...a,c.slice(0,n*4-1)].map((l,i)=&gt;c[n*6+i]+l+c[n*6-2-i])],b.slice(n*8),n+1):a)([s[0]],s.slice(1)).reduce((p,l,i,a)=&gt;p+' '.repeat(a.length-i-1)+l+`
`,'')
</code></pre>
<p><a href="https://tio.run/##XY5Zb8IwEITf@RX0yWtiW6SqKlQpVL3pfZe2kSWcxART47hOSI8/nxqEKsTDSjOa3W92KmpRpk7Zita9Zhw1ZdSHPAJBEmKiEEf9ZD@HGNIIkgC1EXPSSlGB6fQwZqVWqYQuWbrYdHZpyAljLPYjSLqW79AQczYTFkAT5bHpYj1QPNDBUtJtqjjmJFkdLZDEBCHeExjiMu5yTspVFvpqJ7O5l2CJ5xHhiXb9P8G0NHk1ocoX@45Ra0QQwo11ylQwBjSQWhftYeF0toUwbv0HIkkzOc4navqhZ6awn66s5vXX98/vweHR8cnp2eD84vLq@ub27v7h8en5Zfj69r4B2OR53/wB" rel="noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<p>It most definitely can be golfed more.<br />
I use a recursive algorithm, splitting the output into triangle 'layers', where each layer is a complete wrap (three sides) of the previous triangle.</p>
<p>Ungolfed</p>
<pre class="lang-javascript prettyprint-override"><code>s=&gt;(g=(a,b,n=1)=&gt; // g is a recursive function; a: previous; b: rest; n: increment
  b ? // if there is more string to wrap
    g([ // wrap b around a as a triangle and recurse
        (c=(b+' '.repeat(n*8)).slice(0,n*8))[n*6-1],
        ...[...a,c.slice(0,n*4-1)].map((l,i)=&gt;c[n*6+i]+l+c[n*6-2-i])
      ],
      b.slice(n*8),
      n+1)
  :a // otherwise return the triangle
  )
  ([s[0]],s.slice(1)) // run the function with the first letter and the rest
  .reduce((p,l,i,a)=&gt;p+' '.repeat(a.length-i-1)+l+'\n','') // step the triangle to make it look like it is meant to
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/210454/">210454</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




