<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::201076</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>029</td><td>Juby</td><td>250505T185332Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/279529#279529">Jordan</a></td></tr>
<tr d-ix="1"><td>009</td><td>J</td><td>200316T085421Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201117#201117">Galen Iv</a></td></tr>
<tr d-ix="2"><td>038</td><td>C gcc</td><td>200316T235720Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201169#201169">S.S. Ann</a></td></tr>
<tr d-ix="3"><td>015</td><td>Wolfram Language Mathematica</td><td>200315T182927Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201080#201080">ZaMoC</a></td></tr>
<tr d-ix="4"><td>034</td><td>Haskell</td><td>200316T162659Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201133#201133">Wheat Wi</a></td></tr>
<tr d-ix="5"><td>005</td><td>MathGolf</td><td>200316T144543Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201131#201131">Kevin Cr</a></td></tr>
<tr d-ix="6"><td>063</td><td>C gcc</td><td>200315T222849Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201090#201090">Noodle9</a></td></tr>
<tr d-ix="7"><td>050</td><td>Python 2</td><td>200315T185307Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201082#201082">Surculos</a></td></tr>
<tr d-ix="8"><td>061</td><td>Factor</td><td>200316T084444Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201116#201116">Galen Iv</a></td></tr>
<tr d-ix="9"><td>070</td><td>Racket</td><td>200316T080227Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201113#201113">Galen Iv</a></td></tr>
<tr d-ix="10"><td>004</td><td>W j</td><td>200316T021225Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201107#201107">user9206</a></td></tr>
<tr d-ix="11"><td>004</td><td>Jelly</td><td>200315T182902Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201079#201079">Jonathan</a></td></tr>
<tr d-ix="12"><td>005</td><td>APL Dyalog</td><td>200315T225912Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201092#201092">Jo King</a></td></tr>
<tr d-ix="13"><td>022</td><td>Perl 6</td><td>200315T224816Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201091#201091">Jo King</a></td></tr>
<tr d-ix="14"><td>034</td><td>JavaScript ES6</td><td>200315T185122Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201081#201081">Arnauld</a></td></tr>
<tr d-ix="15"><td>012</td><td>Charcoal</td><td>200315T203526Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201089#201089">Neil</a></td></tr>
<tr d-ix="16"><td>049</td><td>Python 3.8</td><td>200315T191742Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201086#201086">Jonathan</a></td></tr>
<tr d-ix="17"><td>005</td><td>Japt x</td><td>200315T191146Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201083#201083">Gymhgy</a></td></tr>
<tr d-ix="18"><td>057</td><td>Python 3</td><td>200315T191556Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201085#201085">RGS</a></td></tr>
<tr d-ix="19"><td>005</td><td>05AB1E</td><td>200315T191303Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201084#201084">Grimmy</a></td></tr>
<tr d-ix="20"><td>009</td><td>Jelly</td><td>200315T182135Z</td><td><a href="https://codegolf.stackexchange.com/questions/201076/all-aboard-the-factorial-train/201078#201078">hyperneu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/cyoce/J-uby" rel="nofollow noreferrer">J-uby</a>, 29 bytes</h1>
<pre class="lang-ruby prettyprint-override"><code>:+|~:^%(:/&amp;:*|:&amp; &amp;:/|:+&amp;:sum)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700K740qXLBIjfbpaUlaboWe620a-qs4lQ1rPTVrLRqrNQU1Kz0a6y01ayKS3M1IWp2aRjq6RkaaOqlJiZnKFTX5NUoFCi4RefFKtRCFCxYAKEB" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 9 bytes</h1>

<pre><code>1#.!%1+i.
</code></pre>

<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/DZX1FFUNtTP1/mtyKXClJmfkK2hYp2kqqNkpGCpoK2TqWUAEDQ2sFdKAZAWUawrmmkK5RmBZI4OK/wA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>

<pre><code>1#.           the sum of (by conversion to base 1)
   !          n factorial
    %         divided by
     1+i.     the list 1..n  
</code></pre>

<h1><a href="https://github.com/JohnEarnest/ok" rel="nofollow noreferrer">K (oK)</a>, <s>16</s> 12 bytes</h1>

<p>-4 bytes thanks to ngn!</p>

<pre><code>+/*/'1+&amp;:'~=
</code></pre>

<p><a href="https://tio.run/##y9bNz/7/P81KW19LX91QW81Kvc72f5qC6X8A" rel="nofollow noreferrer" title="K (oK) – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 38 bytes</h1>



<pre class="lang-c prettyprint-override"><code>f(n){n=n&gt;1?(n+n--)*f(n)-n*n*f(n-1):n;}
</code></pre>

<p>Port of Jonathan Allan's Python 3.8 answer.</p>

<p><a href="https://tio.run/##HYqxDsIwDET3fIVVCclu8BBGQuFHWFCqIA9cUYVYqn57cLjlPd1d0WcprVWGbJhwTTdGhKqMvVKM6KJJzsh7M3zo9TDwd7FZwhbIU5eV@2A0UcqOi/PkEqP8Dz3v1S@Vh8N8x3CkyiaSw95@" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 15 bytes</h1>

<pre><code>Tr[#!/Range@#]&amp;     
</code></pre>

<p><em>-1 byte from @Greg Martin</em></p>

<p><a href="https://tio.run/##y00syUjNTSzJTE78n277P6QoWllRPygxLz3VQTlW7X9AUWZeiYK@Q7q@A0TQyOD/fwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 34 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>a 0=0
a n=n*a(n-1)+product[1..n-1]
</code></pre>

<p><a href="https://tio.run/##y0gszk7Nyfn/P1HBwNaAK1EhzzZPK1EjT9dQU7ugKD@lNLkk2lBPD8iP/Z@bmJlnW1CUmVeikqhg@h8A" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>This implements the <a href="https://oeis.org/A000254" rel="nofollow noreferrer">OEIS definition</a>.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/maxbergmark/mathgolf/blob/master/math_golf.txt" rel="nofollow noreferrer">MathGolf</a>, 5 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>╒k!╠Σ
</code></pre>
<p><a href="https://tio.run/##BcFLDYAwFEXB/XGBg96W/uSwARIgbFBC0j0JfhBRI4@ZY7rW5dxns97ubejt@V4z4QmMRBKZQkUOCXkU0IgiSiijgire/Q" rel="nofollow noreferrer">Try it online.</a></p>
<p>Or</p>
<pre><code>!k╒/Σ
</code></pre>
<p><a href="https://tio.run/##BcFLDYAwFEXB/XGBAnr7rxw2lAQIG5SQoAA/iMDIY2afzqUf22w2rN99je9jJjyBSCJTqDTkkJBHAUWUUEYFVdTw7gc" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>╒      # Push a list in the range [1, (implicit) input-integer]
 k!    # Push the input-integer again, and pop and push its factorial
   ╠   # Divide the factorial by each value in the list (b/a builtin)
    Σ  # And sum that list
       # (after which the entire stack joined together is output implicitly as result)

!      # Push the factorial of the (implicit) input-integer
 k╒    # Push the input-integer again, and pop and push a list in the range [1, input]
   /   # Divide the factorial by each value in the list
    Σ  # And sum that list
       # (after which the entire stack joined together is output implicitly as result)
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>70</s> <span class="math-container">\$\cdots\$</span> <s>64</s></sup> 63 bytes</h1>

<p>Saved a byte thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!<br>
Saved a byte thanks to <a href="https://codegolf.stackexchange.com/users/92237/surculose-sputum">Surculose Sputum</a>!!!   </p>



<pre class="lang-c prettyprint-override"><code>l;c;i;t;f(n){l=0;for(c=i=1;i&lt;n;l=c,c=t)t=-l*i*i+c*(i+++i);n=c;}
</code></pre>

<p><a href="https://tio.run/##FY5LCoNAEET3nqIRhPmJMxo/oZ2cJJvQYmgwnSDuxLObcVOPWryiqHwTneeChIwbzkr0vkSP83dVFDkG5FFwieQobnqL5WLYsCWj2FrLGiUSHufnxaL0nl0aywaSRBlDQGtFQ2UgOGgchITWO6j7Wyp9d2XjuyHB39vhqr7u2r4DU2W/NS3NKi8mKB9QTE/JHYiD66PG7Dj/" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p>Uses <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a>'s <a href="https://codegolf.stackexchange.com/a/201081/9481">formula</a>.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>57</s> <s>52</s> 50 bytes</h1>

<p><em>-2 bytes thanks to @JonathanAllan !</em>
</p>

<pre class="lang-python prettyprint-override"><code>i=x=0
f=1
exec"i+=1;x=i*x+f;f*=i;"*input()
print x
</code></pre>

<p><a href="https://tio.run/##LY7NDoMgEITvPMWGXvCnSfGo2b4LVdBN2sUQjPTpqWLn@GW@zKzfuHju8ugni1LKTJjwIRxqYZMdJTWoh4RUp8YNrkYaZE28blFVYg3EEVI@NOF8AAZiCIZnq3QLna56AUduEGiGvwTRQ7BxCwxxsReF3cJuOJZ2Ifg2n9dkeuDCriFu5f0p20LOb@r8XOUf" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<hr>

<p><strong>If the sequence is 0-indexed, we can cut down 2 more bytes</strong></p>

<h2><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 48 bytes</h2>



<pre class="lang-python prettyprint-override"><code>i=x=f=1
exec"i+=1;x=i*x+f;f*=i;"*input()
print x
</code></pre>

<p><a href="https://tio.run/##LY5LDoMwDET3OYWVbvh1AUuQuUsKCVhqHRQZkZ4@hdBZPs3TzPaV1XOXJj9b1FonwogOW2WjnTTV2A4RqYq1G1yFNOiKeNulKNUWiAViOiXlfAAGYgiGF1t0bdkrOPOAQAv8DRAPwcoeGGS1N4XDwmFYcjsTfJvPazY9cGb3Cjf6Oeomk@tYcd0t0w8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<hr>

<p><strong>How:</strong>
This solution uses the <code>exec</code> trick, which repeats the code <code>n</code> times, then <code>exec</code> the repeated code.</p>

<p><code>f</code> is the current factorial.<br>
<code>x</code> (the solution function) is defined by the recurrent relation:<br>
<span class="math-container">$$x(i)=ix(i-1)+(i-1)!$$</span><br>
and<br>
<span class="math-container">$$x(0)=0$$</span></p>

<p><a href="https://codegolf.stackexchange.com/a/201085/92237">@RGS's answer</a> has a really nice explanation for this formula.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a>, 61 bytes</h1>

<pre><code>: f ( n -- n ) [1,b] dup [ product ] dip [ / ] with map sum ;
</code></pre>

<p><a href="https://tio.run/##LY27DsIwFEN3vsIjSKQ8xnQHdemCmKIOoU0hor0NyY0QXx9CxGIdy7I96p4Xn66Xpj1LPI0nM2HW/ChSeU13ExDMKxrqMzlvmD/OW2LUq6aVOJUFqyfBXltKEiPWIAiRZQN12N46DNFB5fIyxJ6Rvf35Xaa3LV8OIc6o03H/b6g805WgSl8" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://racket-lang.org/" rel="nofollow noreferrer">Racket</a>, 70 bytes</h1>



<pre class="lang-lisp prettyprint-override"><code>(λ(x)(let([a(range 1(+ 1 x))])(apply +(map(λ(y)(/(apply * a)y))a))))
</code></pre>

<p><a href="https://tio.run/##NcwxDsIwFAPQvaewxGLTAYXrIIYvSFDVUEWhQ3M27sCVQoKoN1tPznab/VoP0ZYH8q8MvPswLR6h8vPmJka/8mLMzXg4jnDYpKtoKcWCkU9LnRbx9N@OMBXJ1FI1tM/plaIVdIuA/Qxn18UX" rel="nofollow noreferrer" title="Racket – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/A-ee/w" rel="nofollow noreferrer">W</a> <code>j</code>, <s>5</s> 4 <a href="https://github.com/A-ee/w/wiki/Code-Page" rel="nofollow noreferrer">bytes</a></h1>

<p>After scanning through the source, I realized an undocumented feature - the <code>j</code> flag can actually sum the output at the end!</p>

<pre><code>7Uëÿ
</code></pre>

<p>Uncompressed:</p>

<pre><code>*rak/
</code></pre>

<h2>Explanation</h2>

<pre><code>*r     % Reduce via multiplication
       % (Contains implicit range)
  ak   % Range from input to 1
    /  % Division (integer division when
       % none of the operands are floating-points)
Flag:j % Sum the resulting list
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, <s>&nbsp;5&nbsp;</s> 4 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>

<pre><code>!:RS
</code></pre>

<p><strong><a href="https://tio.run/##y0rNyan8/1/RKij4////pgA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/1/RKij4f9DRPYfbHzWtcf//38gAAA" rel="noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>

<h3>How?</h3>

<p>When we introduce an <span class="math-container">\$n^{\text{th}}\$</span> train it allows:</p>

<ul>
<li><span class="math-container">\$(n-1)!\$</span> states - by being placed behind none of the <span class="math-container">\$n-1\$</span> existing trains and being faster than all of them.</li>
<li>all the previous end states, each in <span class="math-container">\$n\$</span> different ways - by being placed behind at least one existing train and being faster than <span class="math-container">\$[0,n-1]\$</span> of the <span class="math-container">\$n-1\$</span> existing trains</li>
</ul>

<p>We know <span class="math-container">\$a(1) = 1\$</span> so...  </p>

<pre><code>n  a(n) 
1  1
2  1! + 1*2
3  2! + 1!*3 + 1*2*3
4  3! + 2!*4 + 1!*3*4 + 1*2*3*4
5  4! + 3!*5 + 2!*4*5 + 1!*3*4*5 + 1*2*3*4*5
... etc
</code></pre>

<p>Which is:</p>

<pre><code>n  a(n) 
1  1
2  1 + 2
3  1*2 + 1* 3 + 2*3
4  1*2*3 + 1*2* 4 + 1* 3*4 + 2*3*4
5  1*2*3*4 + 1*2*3* 5 + 1*2* 4*5 + 1* 3*4*5 + 2*3*4*5
...
n  n!/n + n!/(n-1) + n!/(n-2) + ... + n!/1
</code></pre>

<p>Hence the code:</p>

<pre><code>!:RS - integer, n
!    - (n) factorial      n!
  R  - range (n)          [1,...,n-2,n-1,n]
 :   - integer division   [n!/1,...,n!/(n-2),n!/(n-1),n!/n]
   S - sum                a(n)
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 5 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>+/!÷⍳
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v8/7VHbBG19xcPbH/VuBvIOrVAAMhSMDAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>

<p>Calculates the sum of (<code>+/</code>) the factorial of <span class="math-container">\$n\$</span> (<code>!</code>) divided by (<code>÷</code>) the range 1 to <span class="math-container">\$n\$</span> (<code>⍳</code>).</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, 22 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{sum [*]($_)X/$_}o^*+1
</code></pre>

<p><a href="https://tio.run/##JU/LSkNRDNznK86iiFa85p0cRL9DEC0u7Kql0uKiiN9@PY9skpmEmcn31/ng6/Fabvbluay/l59jedu@3252d6@Pm93f6WN7T@sTXD6vZWk3@9O50LIwrlQeXgoB9yYgAxFo74ZgvXMo@FiEK8SYBD0hx4jVUqHOmd3CgXAi53RFoGnCaCrZ8XAjbUvlzEZM35rIYRX7yUjAKermGuKNGmFUpJILIjk2buQKDGlCLFUGOSMyi6I1OYvKnR5xGxtem6ml8dSoU5fMjdSzfdlTIvD4IsO4aqJ4eL9v9Q8" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>

<p>Returns the sum of the factorial of <span class="math-container">\$n\$</span> divided by the range 1 to <span class="math-container">\$n\$</span>.</p>
</div>
<div id="pu14" class="pu"><h1>JavaScript (ES6), 34 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=n=&gt;n&gt;1?(n+--n)*f(n)-n*n*f(n-1):n
</code></pre>
<p><a href="https://tio.run/##FcZNCoMwEAbQq8wyozNC6k9V0B5EXAQ1YtEvoqXXT@lbvbf7unu6tvOjCPMSo@/Q9ejtyyBVBSfegBUJ/lHLLeIUcId9yfawmsEKPYRyoUKoFKqEnkK1UDNmhzuNZ44/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>This is an implementation of the recurrence relation:</p>
<p><span class="math-container">$$\cases{
a(0)=0\\
a(1)=1\\
a(n) = a(n-1) \times (2n - 1) - a(n-2) \times (n - 1)^2,\:n&gt;1}$$</span></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 12 bytes</h1>

<pre><code>≔…·¹ＮθＩΣ÷Πθθ
</code></pre>

<p><a href="https://tio.run/##S85ILErOT8z5/9@xuDgzPU/DMy85p7Q4syw1KDEvPVXDUEfBM6@gtMSvNDcptUhDU1NHoVDTmiugKDOvRMM5sbhEI7g0F6ipxCWzLDMlVSOgKD@lNLlEoxCsEAis//@3/K9blgMA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>

<pre><code>≔…·¹Ｎθ
</code></pre>

<p>Create a range from <code>1</code> to <code>n</code>.</p>

<pre><code>    θ   Range `1`..`n`
   Π    Product i.e. `n!`
  ÷     Vectorised divide by
     θ  Range `1`..`n`
 Σ      Sum
Ｉ       Cast to string
        Implicitly print
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, <s>&nbsp;50&nbsp;</s> 49 bytes</h1>

<p>-1 thanks to Surculose Sputum (using walrus in 3.8 to save some <code>~-</code>s)</p>



<pre class="lang-python prettyprint-override"><code>f=lambda n:n&gt;1and(2*n-1)*f(n:=n-1)-n*n*f(n-1)or n
</code></pre>

<p><strong><a href="https://tio.run/##HYuxCsMwEEP3fsVt8ZmkYHcpB8m/uCRuA41i3FtKyLe7djVITyClr7523O4plxLHd9gecyAIJhcwG28xOLbRQMZGAyxaq7hnQonVdfkoraAc8FyM68k7lgtVpbxCTXfI5E@h4@yudb8FNe3SU/wnM5cf" rel="nofollow noreferrer" title="Python – Try It Online">Try it online!</a></strong></p>

<hr>

<p>A <strong>52</strong> using a different approach:</p>

<pre class="lang-python prettyprint-override"><code>f=lambda n,k=2:n*k and~-n*f(n-1,k)+f(n-1,k-1)or n==k
</code></pre>

<p><a href="https://tio.run/##LYtBDsIgFET3nuLvyq9gAksSvAumRRvstMG/aZp6dUTj28xbzFs3eSxwtabwjPNtiASdg/PoM0UMb4M@KRirM5//YiwvhRBCrqmJjC@hCVQi7qOympxlf6LGWiaI6nZ/dYen/egu7T9HUd9EU/otM9cP" rel="nofollow noreferrer" title="Python – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-x</code></a>, 5 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÆÊ/°X
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LXg&amp;code=xsovsFg&amp;input=MjA" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 57 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda n:n and n*f(n-1)+math.factorial(n-1)
import math
</code></pre>

<p><a href="https://tio.run/##RVLLahwxELzrKzo67Sb2ovfDYEMOySfkFAiKZ8Yr0GqGkdYQwn77Ri0RPBd1VbWqS81sf@p5zfJ@X55TuPyeAuSnDCFPkD8vh/zIj18uoZ5PS3it6x5D6hyJl23dK6B0r3Opv15DmQs8A6WUw@MLcCLwkER2xInCUzOi8RRWEdMFaxSxvZLMOOJ6ybx2ivhRC6OtIZwNZIQzihE@hgimlXSI@zSumqiEc40Yc71jwmrPsKUnEE4qo42y0jSqh1FSem4kY9ywxvVcllnZjIT0spMjohBSMd3stPUC6R63sdb4NlQ7LYaHH75cG82Vce2VmJIR0V/hrBZeOSaNNdjfvrY2QpZ1B1wmxAwfSz2VLcV6oD8zPT4RgPwA67W2VWPLfxFt6RHVJsRcDxnBMhqXgeIyiE@jo5XdD2APsczwI6Tr/G3f1/2w0O8hpnkaaTAF/M23Byjn9ZomeIvvjWj3b/1HeQsI0frWIsypzGi77TiEfk3pw6XAFkqZpxM93v8B" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>Implements the recurrence relation given by</p>

<p><span class="math-container">$$\begin{cases}a(n) = n\times a(n-1) + (n-1)! \\
a(0) = 0 \end{cases}$$</span></p>

<p><strong>How</strong>: If you have <span class="math-container">\$n\$</span> trains on the railway, consider removing the faster one from the railway and take the <span class="math-container">\$(n-1)!\$</span> permutations of the remaining <span class="math-container">\$n-1\$</span> trains. For each permutation of the <span class="math-container">\$n-1\$</span> trains, there are <span class="math-container">\$n\$</span> places where you can put the <span class="math-container">\$n\$</span>th train, the fastest one.</p>

<ul>
<li>If you put it in the front, then the connections made by the other <span class="math-container">\$n-1\$</span> trains remain exactly the same, and those never catch up with the faster train. So placing it in the front adds a new train to the total sum.</li>
<li>If you put it in any other of the <span class="math-container">\$n - 1\$</span> positions, it will just connect to the train in front and then we are back at the case when we had <span class="math-container">\$n - 1\$</span> trains on the railway, so the total number of trains stays the same.</li>
</ul>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 5 bytes</h1>

<pre><code>!IL÷O
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f9f0dPn8Hb///9NAA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 9 bytes</h1>

<pre><code>Œ!«\€Q€FL
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///oJMVDq2MeNa0JBGI3n////1sAAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>this is the non-smart trivial approach</p>

<h1>Explanation</h1>

<p>Observe that if we have a list of trains' speeds, moving left, then we can cumulatively reduce by minimum to get the final list of trains' speeds.</p>

<pre><code>Œ!«\€Q€FL  Main Link
Œ!         all permutations (defaults over a range)
    €      For each permutation
   \       Cumulatively reduce by
  «        minimum
      €    For each permutation
     Q     remove duplicate values
       F   join all of the trains (flatten)
        L  and get the final length
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/201076/">201076</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




