<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::13022</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>377</td><td>Python3</td><td>251009T160902Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/284051#284051">Ajax1234</a></td></tr>
<tr d-ix="1"><td>448</td><td>Ruby</td><td>131031T053118Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/13052#13052">Cary Swo</a></td></tr>
<tr d-ix="2"><td>364</td><td>Haskell</td><td>131029T035237Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/13032#13032">Ray</a></td></tr>
<tr d-ix="3"><td>342</td><td>Python 2 with Numpy</td><td>131029T034852Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/13031#13031">Ray</a></td></tr>
<tr d-ix="4"><td>186</td><td>Mathematica</td><td>131028T084017Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/13029#13029">alephalp</a></td></tr>
<tr d-ix="5"><td>160</td><td>APL</td><td>131027T195931Z</td><td><a href="https://codegolf.stackexchange.com/questions/13022/how-many-times-is-rectangular-array-a-embedded-in-rectangular-array-b/13023#13023">marinus</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 377 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(a,b):
 q,c=[(a,b,[])],0
 for a,b,o in q:
  if[]==a or len(a)&gt;len(b):c+=[]==a;continue
  q+=[(a,b[1:],o)]
  if[]==o:
   Q,S=[(a[0],0,[])],[]
   for A,I,O in Q:
    if[]==A:S+=[O];continue
    if I&lt;len(b[0]):Q+=[(A,I+1,O)]+[(A[1:],I+1,O+[I])]*(A[0]==b[0][I])
   q+=[(a,b,j)for j in S]
  elif all(A==B for A,B in zip(a[0],[b[0][t]for t in o])):q+=[(a[1:],b[1:],o)]
 return c
</code></pre>
<p><a href="https://tio.run/##TZExb8MgEIXn8itQlkCMqlhdKrdUSrYsjSKPFFXYwSqRBQ4mQ/vn3TucNhlsc3fvvvdkhu/0FfzT8xCn6Wg72jEjGl4RehatVFgIpbkWa0K7ECnWgTpPzyChrlNaSkNh0FvPDH/DD6y3hcyTlzb45PzFgvhczDxVVloErv/3A6LoQdQ4V2vwmi0VSrLrRuzEHl0PWXrd21Q1IPf63gRndPeaYwCKVwd0hf2iFHuuCzhn/1wXagc@K2itAYd6bCDlL6s4cfQ/oXeNcWwPfNP3bCPl9ppti9MfN8zhVeYkjbOEk6A5r2Zgtr77AdGmS/S0ncaSSrpYLIhpGngMwTOpb93ch5chDRaoM7MKLy2FzyaYeGQj3NzDlarUyukc0WGMzvXJRvYevBV0fByH3iW2/PBLDknIEJ1PrGM3UsnFjVuXnPPpFw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><p>Ruby 448</p>

<pre><code>class Array
alias t transpose
alias z size
alias e each
alias s select
end

def x
v=[]
while(w=gets.chop).size&gt;0 do
v&lt;&lt;w.split('')
end
v
end

def w(i,j)(0...i).to_a.combination(i-j).to_a end

a=x
n=a.z
a=a.t
o=a.z
b=x
q=b.z
r=b[0].z
w=['.']
y=w*r
z=w*q
f=[]
w(q,n).e{|u|w(r,o).e{|v|
h=b.dup
u.e{|i|h[i]=y}
h=h.t
v.e{|j|h[j]=z}
h=h.t
f&lt;&lt;h if(h.s{|i|i!=y}.t.s{|i|i!=w*n})==a}}
p f.z
puts
f.e{|b|b.e{|i|k='';i.e{|j|(k&lt;&lt;' ')if k.size&gt;0;k&lt;&lt;j}
puts k}
puts}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Haskell, 364 chars</h1>

<pre><code>m=map
l=length
u=unlines
v=reverse
z=zip[0..]
q s=p(lines s)[]
e i a=[a!!j|j&lt;-i]
main=g.w.q=&lt;&lt;getContents
g x=(print.l)x&gt;&gt;(putStr.u.m u)x
c 0=[[]];c n=let x=m(m(1+))$c(n-1)in x++m(0:)x
p(c:x) a|c==""=(v a,fst$p x[])|1&lt;2=p x(c:a);p[]a=(v a,[])
w(a,b)=[m(\(p,r)-&gt;m(\(q,x)-&gt;if(elem p i&amp;&amp;elem q j)then(b!!p!!q)else '.')$z r)$z b|i&lt;-c.l$b,j&lt;-c.l$b!!0,a==(m(e j).e i)b]
</code></pre>

<h2>Ungolfed Version, 716 chars</h2>

<pre><code>parse (c:x) a | c == "" = (reverse a, fst$parse x [])
              | otherwise = parse x (c:a)
parse [] a = (reverse a, [])
readMat s = parse (lines s) []

choose 0 = [[]]
choose n = let
  x = map (map (1+))$choose (n-1)
  in x ++ map (0:) x

select ix a = [a!!i | i&lt;-ix]

for = flip map
make b (ix, jx) = 
  for (zip [0..] b) (\(i,r) -&gt;
    for (zip [0..] r) (\(j,x) -&gt;
      if elem i ix &amp;&amp; elem j jx
      then b!!i!!j
      else '.'
    )
  )

main = do
  s &lt;- getContents
  let (a, b) = readMat s
      (n, m) = (length b, length.head$ b)
  let ans = [make b (ix, jx) | ix &lt;- choose n, jx &lt;- choose n, 
              a == (map (select jx).select ix$ b)]
  print$ length ans
  putStrLn$unlines.map unlines$ ans
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Python 2 with Numpy, 342 chars</h1>

<pre><code>from numpy import*
from itertools import*
import sys
S=str.split
C=combinations
R=range
a,b=[mat(map(list,S(x)))for x in S(sys.stdin.read(),'\n\n')]
n,m=b.shape
o,p=a.shape
z=[]
for i in product(C(R(n),o),C(R(m),p)):
 i=ix_(*i);e=b[i]
 if all(a==e):f=copy(b);f[:]='.';f[i]=e;z+=[f]
print len(z)
for x in z:print'\n'.join(map(''.join,x))+'\n'
</code></pre>

<h2>Output Example</h2>

<pre><code>5
a..bb
a..ba
.....
.....

ab.b.
.....
.....
ab.a.

ab..b
.....
.....
ab..a

.....
.abb.
.aba.
.....

.....
a.bb.
.....
a.ba.
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Mathematica, 186 chars</h1>

<pre><code>{a,b}=Characters/@StringSplit@InputString[]&amp;~Array~2;{Length@#,Grid/@#}&amp;[ReplacePart[b,Except[$|##&amp;@@Tuples@#,{_,_}]-&gt;"."]&amp;/@Select[Tuples[Subsets/@Range/@Dimensions@b],b[[##]]&amp;@@#==a&amp;]]
</code></pre>

<h3>Example:</h3>

<pre><code>In[1]:= {a,b}=Characters/@StringSplit@InputString[]&amp;~Array~2;{Length@#,Grid/@#}&amp;[ReplacePart[b,Except[$|##&amp;@@Tuples@#,{_,_}]-&gt;"."]&amp;/@Select[Tuples[Subsets/@Range/@Dimensions@b],b[[##]]&amp;@@#==a&amp;]]  
? abb aba
? ababb aabba babab abbaa

Out[1]= {5, {a . . b b, a b . b ., a b . . b, . . . . ., . . . . .}}
             a . . b a  . . . . .  . . . . .  . a b b .  a . b b .
             . . . . .  . . . . .  . . . . .  . a b a .  . . . . .
             . . . . .  a b . a .  a b . . a  . . . . .  a . b a .
</code></pre>
</div>
<div id="pu5" class="pu"><h2>APL (160)</h2>

<pre><code>{∆,⍨⍴∆←⍵∘{(⍴⍵)⍴(,⍵){⍺:⍵⋄'.'}¨,⍺}¨⊃¨∘.∧/¨∆/⍨⍺∘≡¨⍵∘{(⊃⍵)⌿⍺/⍨⊃⌽⍵}¨∆←,⊃∘.,/⊂¨¨K{⍵=0:⊂⍺/1⋄~(⍳⍺)∘∊¨⍵{⍺=1:(⍳⍵)⋄∆/⍨{∧/&lt;/¨2,/⍵}¨∆←,⍳⍺/⍵}⍺}¨(K←⍴⍵)-⍴⍺}/{×⍴K←⍞:∇⍵,⊂K⋄↑⍵}¨⍬⍬
</code></pre>

<p>Output:</p>

<pre><code>      {∆,⍨⍴∆←⍵∘{(⍴⍵)⍴(,⍵){⍺:⍵⋄'.'}¨,⍺}¨⊃¨∘.∧/¨∆/⍨⍺∘≡¨⍵∘{(⊃⍵)⌿⍺/⍨⊃⌽⍵}¨∆←,⊃∘.,/⊂¨¨K{⍵=0:⊂⍺/1⋄~(⍳⍺)∘∊¨⍵{⍺=1:(⍳⍵)⋄∆/⍨{∧/&lt;/¨2,/⍵}¨∆←,⍳⍺/⍵}⍺}¨(K←⍴⍵)-⍴⍺}/{×⍴K←⍞:∇⍵,⊂K⋄↑⍵}¨⍬⍬
abb
aba

ababb
aabba
babab
abbaa

 5  .....  .....  ab..b  ab.b.  a..bb  
    a.bb.  .abb.  .....  .....  a..ba  
    .....  .aba.  .....  .....  .....  
    a.ba.  .....  ab..a  ab.a.  .....  
</code></pre>

<p>Explanation:</p>

<ul>
<li><code>{</code>...<code>}/{×⍴K←⍞:∇⍵,⊂K⋄↑⍵}¨⍬⍬</code>: read the two arrays from the keyboard, and return them as two matrices. Reduce the following function over the list of the two matrices.</li>
<li><p><code>∆{</code>...<code>}¨(∆←⍴⍵)-⍴⍺</code>: get the height and width of each of the matrices. In both the width and the height, get a list of possible lines to drop.</p>

<ul>
<li><p><code>⍵=0:⊂⍺/1</code>: if the matrices are the same length in a dimension, never drop any lines from that dimension. Otherwise:</p></li>
<li><p><code>⍺=1:(⍳⍵)⋄</code>: If the difference is one, try to drop each line</p></li>
<li><code>∆/⍨{∧/&lt;/¨2,/⍵}¨∆←,⍳⍺/⍵</code>: otherwise, drop each possible combination of <code>⍺</code> lines.</li>
</ul></li>
<li><code>∆←,⊃∘.,/⊂¨¨</code>: combine each height mask with each width mask, giving all possible combinations to make the second list the size of the first.</li>
<li><code>⍵∘{(⊃⍵)⌿⍺/⍨⊃⌽⍵}¨∆</code>: for each possible combination, remove those lines from the second matrix.</li>
<li><code>∆/⍨⍺∘≡¨</code>: drop all the ones that are not equal to the first matrix, giving the solutions.</li>
<li><code>⊃¨∘.∧/¨</code>: for each of the possible solutions, make a matrix with <code>0</code> where a dot should go and <code>1</code> where the corresponding character from the first matrix should go.</li>
<li><code>⍵∘{(⍴⍵)⍴(,⍵){⍺:⍵⋄'.'}¨,⍺}¨</code>: for each of these, flatten both the second matrix (<code>,⍵</code>) and the matrix of dots (<code>,⍺), and take either the character or a dot for each position (</code>{⍺:⍵⋄'.'}¨). Then reshape it to the shape it had before (<code>(⍴⍵)⍴</code>). </li>
<li><code>∆,⍨⍴∆</code>: give the amount of solution, and each solution.</li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/13022/">13022</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




