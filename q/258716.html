<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::258716</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td></td><td>250529T102406Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/282036#282036">Miro</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>241022T072418Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/276239#276239">Hand-E-F</a></td></tr>
<tr d-ix="2"><td>nan</td><td></td><td>230305T165051Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258843#258843">SE - sto</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>230305T162416Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258842#258842">SE - sto</a></td></tr>
<tr d-ix="4"><td>000</td><td>Coordinates use default 0</td><td>230305T112748Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258830#258830">SE - sto</a></td></tr>
<tr d-ix="5"><td>nan</td><td></td><td>230304T142420Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258796#258796">ccprog</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>230304T142202Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258795#258795">ccprog</a></td></tr>
<tr d-ix="7"><td>nan</td><td></td><td>230304T142126Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258794#258794">ccprog</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>230304T141931Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258793#258793">ccprog</a></td></tr>
<tr d-ix="9"><td>nan</td><td></td><td>230304T141851Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258792#258792">ccprog</a></td></tr>
<tr d-ix="10"><td>nan</td><td></td><td>230304T141812Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258791#258791">ccprog</a></td></tr>
<tr d-ix="11"><td>nan</td><td></td><td>230304T141733Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258790#258790">ccprog</a></td></tr>
<tr d-ix="12"><td>nan</td><td></td><td>230304T141656Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258789#258789">ccprog</a></td></tr>
<tr d-ix="13"><td>nan</td><td></td><td>230304T141621Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258788#258788">ccprog</a></td></tr>
<tr d-ix="14"><td>nan</td><td></td><td>230303T012348Z</td><td><a href="https://codegolf.stackexchange.com/questions/258716/tips-for-golfing-in-svg/258718#258718">Parcly T</a></td></tr>
</table>
<div id="pu0" class="pu"><h2>Use color names where applicable</h2>
<p>Save one character by using the colour name <code>red</code> instead of the hex code <code>#f00</code>.</p>
<p>Some other cases where the colour name is equal to or shorter than the hex code are listed <a href="https://chrisnager.github.io/short-color-names/" rel="nofollow noreferrer">here</a> (note that <code>rgba(0,0,0,0)</code> can actually be shortened to <code>#0000</code>, so <code>transparent</code> is not shorter).</p>
</div>
<div id="pu1" class="pu"><h1>Use 12-bit colour codes</h1>
<p>Colour codes can be expressed as 12-bit colour codes. There's less resolution, but is fine for most applications.</p>
<pre><code>fill=&quot;white&quot;       ==  fill=&quot;#FFF&quot;
fill=&quot;yellow&quot;      ==  fill=&quot;#FF0&quot;
fill=&quot;aquamarine&quot;  ~=  fill=&quot;#7FC&quot;
</code></pre>
</div>
<div id="pu2" class="pu"><h1>You have all of unicode</h1>
<p>There's a built-in library of thousands upon thousands of graphic primitives, which cost you just a couple of bytes each, plus an up-front cost of <code>&lt;text&gt;&lt;/text&gt;</code></p>
<p>In production SVGs, this is horrible practice since you will of course be at the mercy of font rendering and support, and are mixing up graphics and semantics. But good practice has never stopped code golfing!</p>
<p>Interesting unicode blocks:</p>
<ul>
<li><a href="https://www.unicode.org/charts/PDF/U2190.pdf" rel="nofollow noreferrer">Arrows</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U25A0.pdf" rel="nofollow noreferrer">Geometric shapes</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U1FB00.pdf" rel="nofollow noreferrer">Symbols for legacy computing</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U2700.pdf" rel="nofollow noreferrer">Dingbats</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U2300.pdf" rel="nofollow noreferrer">Miscellaneous Technical</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U2580.pdf" rel="nofollow noreferrer">Block elements</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U2500.pdf" rel="nofollow noreferrer">Box drawing</a></li>
<li><a href="https://www.unicode.org/charts/PDF/U1F780.pdf" rel="nofollow noreferrer">Geometric shapes extended</a></li>
</ul>
<p><a href="https://i.sstatic.net/mMOa7m.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/mMOa7m.png" alt="unicode" /></a></p>
</div>
<div id="pu3" class="pu"><h1><code>&lt;rect&gt;</code> is never the answer</h1>
<p>The equivalent path for a rectangle is always shorter than <code>&lt;rect&gt;</code></p>
<pre><code>&lt;rect x=5 y=5 width=2 height=1 fill=red /&gt;
&lt;path d=M5,5h2v1h-2 fill=red /&gt;
</code></pre>
<p>If either the width or height is equal to <code>1</code> (or otherwise the local line width), <code>&lt;line&gt;</code> is shorter when either the x or y coordinate is <code>0</code></p>
<pre><code>One coordinate is 0:

&lt;rect x=5 width=2 height=1 fill=red /&gt;
&lt;path d=M5,0h2v1h-2 fill=red /&gt;
&lt;line x1=5 x2=7 stroke=red /&gt;

Both coordinates are 0:

&lt;rect width=2 height=1 fill=red /&gt;
&lt;path d=h2v1h-2 fill=red /&gt;
&lt;line x2=2 stroke=red /&gt;
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Coordinates: use default (0,0) positioning</h1>
<p>Transforming the origin is often cheaper than giving explicit coordinates.</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;svg viewBox=-4,-4,8,8&gt;&lt;circle r=3 fill=red</code></pre>
</div>
</div>
</p>
</div>
<div id="pu5" class="pu"><h1>Path data: Path fills close automatically</h1>
<p>If a path has a fill, but no stroke, you can leave out closing the path</p>
<pre><code>M0,0H5V5H0V0Z  ==  M0,0H5V5H0V0  ==  M0,0H5V5H0    for stroke=&quot;none&quot; or in a clip-path
                                 ==  M0,0H5V5H0Z   for stroke=&quot;&lt;paint&gt;&quot;
</code></pre>
<p>But the automatic closing last segment is alway straight, so if you have a curve as the last command, the repetition of the last coordinate might be inevitable</p>
<pre><code>M0,0H5V5Q0,5 0,0Z  ==  M0,0H5V5Q0,5 0,0
</code></pre>
<p>...unless you are able to use another point as the start</p>
<pre><code>M0,0H5V5Q0,5 0,0Z  ==  M5,0V5Q0,5 0,0
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Path data: Try out the <code>A</code> command</h1>
<p>Grafical editors tend to approximate elliptical arcs with (sequences of) cubic Bezier curves. For example, Inkscape perfectly understands</p>
<pre><code>M0,0A10,15-20 0 1 10,12
</code></pre>
<p>But move the handle of the end point, even if you immediately move it back to its original position, and suddenly you will have a cubic Bezier.</p>
<pre><code>M 0,0 C 4.3412,1.4378 8.2913,6.1779 10,12
</code></pre>
<p>This also happens with quadratic Beziers, with the small difference that the result of the conversion is mathematically equal. Conversions from <code>C</code> to <code>A</code> or <code>C</code> to <code>Q</code> on the other hand are impossible most of the time.</p>
<p>With reasonable rounding, you might (almost) regain the original length, but you will have to test this manually</p>
<pre><code>M0,0C4.3,1.4 8.3,6.2 10,12
</code></pre>
<p>But take note: the above arc command has extra opportunities for minification. (This is something that the available tools all miss.) The <code>large_arc</code> and <code>sweep</code> parameters are <strong>flags</strong>. As they can only be <code>0</code> or <code>1</code>, no space needs to follow them</p>
<pre><code>M0,0A10,15-20 0 1 10,12  ==  M0,0A10,15-20 0110,12
</code></pre>
<p>I know this looks strange, but it is really part of the grammar. Note the <code>comma_wsp?</code></p>
<pre><code>elliptical_arc_argument::=
    number comma_wsp? number comma_wsp? number comma_wsp
    flag comma_wsp? flag comma_wsp? coordinate_pair
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Path data: The art of spaces</h1>
<p>The most curious term in the <a href="https://www.w3.org/TR/SVG2/paths.html#PathDataBNF" rel="noreferrer">BNF grammar</a> is the production <code>comma_wsp?</code>. What it means is: separate numbers with commas and/or whitespace as you wish, or leave them off completely. I'll quote from the spec directly:</p>
<blockquote>
<p>The processing of the EBNF must consume as much of a given EBNF production as possible, stopping at the point when a character is encountered which no longer satisfies the production. Thus, in the string <code>&quot;M 100-200&quot;</code>, the first coordinate for the &quot;moveto&quot; consumes the characters &quot;100&quot; and stops upon encountering the minus sign because the minus sign cannot follow a digit in the production of a &quot;coordinate&quot;. The result is that the first coordinate will be &quot;100&quot; and the second coordinate will be &quot;-200&quot;.</p>
<p>Similarly, for the string <code>&quot;M 0.6.5&quot;</code>, the first coordinate of the &quot;moveto&quot; consumes the characters &quot;0.6&quot; and stops upon encountering the second decimal point because the production of a &quot;coordinate&quot; only allows one decimal point. The result is that the first coordinate will be &quot;0.6&quot; and the second coordinate will be &quot;.5&quot;.</p>
</blockquote>
<p>Implied here is that adjecent to command letters no space is needed to separate a number (and commas are forbidden).</p>
<p>The same rules apply to transform functions, but not to the <code>viewBox</code> attribute.</p>
<p>Another small note is about writing SVG content inline in a HTML page. It is legal to leave off the surrounding quotes for an attribute, as long as the attribute contains no whitespace. This applies also to path data, but you might be forced to replace spaces with commas</p>
<pre><code>&lt;path d=&quot;M0,0 1,1&quot; /&gt;  == &lt;path d=M0,0,1,1 /&gt;
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Path data: Don't overestimate relative commands</h1>
<p>Adobe Illustrator writes all path commands as relative commands, obviously assuming they will lead to shorter strings. While this is true in a lot of cases, most of the time they will lead to nothing, and sometimes even take up extra space</p>
<pre><code>M10,10 15,16  ==  M10,10l5,6
M10,10 25,26  ==  M10,10l15,16
M25,26 10,10  ==  M25,26l-15-16
</code></pre>
<p>In an extra note, relative commands are relative not to the previous (control) point, but to the previous <strong>stop point</strong>, which might be a further distance away</p>
<pre><code>M0,0C0,2 8,10 15,15  != M0,0c0,2 8,8 7,7     WRONG!
                     == M0,0c0,2 8,10 15,15
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Path data: Concatenate paths</h1>
<p>Path strings can contain multiple substrings. If they</p>
<ul>
<li>have the same styles,</li>
<li>are defined in the same userspace coordinate system and</li>
<li>do not overlap,</li>
</ul>
<p>instead of writing two elements, you can just concatenate the path data strings.</p>
<pre><code>&lt;path d=&quot;M0,0 5,5&quot; /&gt;&lt;path d=&quot;M10,10 15,15&quot; /&gt;  ==  &lt;path d=&quot;M0,0 5,5M10,10 15,15&quot; /&gt;
</code></pre>
<p>In this case, you could even take advantage of relative commands</p>
<pre><code>&lt;path d=&quot;M0,0 5,5m5,5 5,5&quot; /&gt;
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Path data: Mirror symetrical Bezier curves</h1>
<p>There are special commands that mirror the Bezier control points around a stop coordinate.</p>
<pre><code>M0,0Q0,1 1,1 1,2 2,2 2,3 3,3  == M0,0Q0,1 1,1T2,2 3,3
M0,0C0,1 1,2 2,2 3,2 4,3 4,4  == M0,0C0,1 1,2 2,2S4,3 4,4
</code></pre>
<p>This even works when mixing quadratic and cubic Beziers:</p>
<pre><code>M0,0C0,1 1,2 2,2Q3,2 3,3  == M0,0C0,1 1,2 2,2T3,3
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Path data: Do not repeat command letters</h1>
<p>If there are multiple path segments with the same command, you can leave out the letters on the repetitions.</p>
<pre><code> M0,0Q0,1 1,1Q1,2 2,2  == M0,0Q0,1 1,1 1,2 2,2
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Path data: Use <code>H</code> and <code>V</code> instead of <code>L</code></h1>
<p>If your path contains straight lines that are horizontal or vertical, the following sequences are equal:</p>
<pre><code>M0,0L1,0  ==  M0,0H1
M0,0L0,1  ==  M0,0V1
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Path data: Use automatic tools</h1>
<p>The <a href="https://www.w3.org/TR/SVG2/paths.html#PathDataBNF" rel="nofollow noreferrer">grammar</a> for the path data microsyntax is especially aimed at a minimal representation, but leaves room for a lot of variants.</p>
<p>Because of that, there are tools available that try to automatically minimize the path data. Notably Adobe Illustrator will automatically try to apply minification on SVG export, and the <a href="https://jakearchibald.github.io/svgomg/" rel="nofollow noreferrer">SVGOMG</a> optimization tool contains a module for the same purpose. The latter one is included in a number of online tools, including for example Figma.</p>
<p>These tools are a good start, but still fall short in some aspects.</p>
</div>
<div id="pu14" class="pu"><h1>Know your transforms</h1>
<p><em>Note: this answer talks about the implementation of transforms described in the SVG 1.1 standard, not the CSS standard.</em></p>
<p>In SVG there are <a href="https://www.w3.org/TR/SVG11/coords.html#TransformAttribute" rel="noreferrer">five main types</a> of affine transforms that can be used in the <code>transform</code> attribute of an object.</p>
<ul>
<li><code>matrix(a,b,c,d,e,f)</code> is the most general one. It transforms using the affine transformation matrix
<span class="math-container">$$\begin{bmatrix}x'\\y'\end{bmatrix}\leftarrow\begin{bmatrix}a&amp;c\\b&amp;d\end{bmatrix}\begin{bmatrix}x\\y\end{bmatrix}+\begin{bmatrix}e\\f\end{bmatrix}$$</span>
where the coordinate system is the usual &quot;x right, y down&quot; one <em>in the frame of the deepest enclosing group of the object in question</em>, which may be the document root. Thus (for example) groups of groups of clones can be arranged in a tree with <em>one</em> simple transformation per group to achieve fractal-like effects.</li>
<li><code>translate(x,y)</code> does as you would expect. Note that <code>translate(x)</code> works and is equivalent to <code>translate(x,0)</code>.</li>
<li>Ditto for <code>scale(x,y)</code>, but here <code>scale(x) = scale(x,x)</code>. Negative values can be provided, and indeed <code>scale(-1)</code> is shorter than <code>rotate(180)</code> (see below).</li>
<li><code>rotate(d)</code> means rotation by <code>d</code> degrees clockwise about the origin (of the current coordinate frame). <code>rotate(d,x,y)</code> means rotation by <code>d</code> degrees clockwise about <code>(x,y)</code>.</li>
<li>Define <code>skew(a,b) = matrix(1,tan(b),tan(a),1,0,0)</code> where <code>a,b</code> are again in degrees. This is not in SVG, but <code>skewX(a) = skew(a,0)</code> and <code>skewY(b) = skew(0,b)</code> are.</li>
</ul>
<p>My experience with <a href="https://gitlab.com/parclytaxel/Kinross" rel="noreferrer">compressing</a> <em>My Little Pony: Friendship Is Magic</em> <a href="https://codegolf.stackexchange.com/q/258642/110698">cutie marks</a> has taught me that in the most general case using <code>matrix</code> is the best. When the transform is only a similarity (angle-preserving) using <code>rotate(a,b,c)scale(s)</code> (transforms are applied right-to-left) is usually better, and for yet more special cases composing two of the non-matrix primitives above is usually better, but never three.</p>
<hr />
<p>A particularly egregious example of transform compression can be seen in <a href="https://gitlab.com/parclytaxel/Selwyn/-/blob/master/Cutie%20Marks/Main%20Six%20%2B%20Royalty/Cutie%20Marks%20of%20the%20Mane%20Six.svg" rel="noreferrer">Fluttershy's cutie mark</a> from the relevant section of my <a href="https://gitlab.com/parclytaxel/Selwyn" rel="noreferrer">Selwyn</a> repository. (The actual file over there duplicates groups because clones don't play well with the path effects of Inkscape; I often use the Envelope Deformation path effect to slightly bend cutie marks to fit the curving flanks of ponies, as can be seen e.g. <a href="https://derpibooru.org/images/1810117" rel="noreferrer">here</a>.)</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;svg viewBox=-50,-50,100,100&gt;&lt;g id=a&gt;&lt;path d=m15-33.8c-3.8-4,10.2-9.1-3,16.3,14.4-25.5,18.3-11.7,12.6-12.2 fill=none stroke=#69c8c3 stroke-width=.9 /&gt;&lt;path d=m17.1-14.3c12.5,13.7-8.1,27-9.7,4-21.6,12.5-21.9-12.6-3-11.6-11.9-12.7,10-31.6,8.4,2.7,28.5-19.9,19.3,2.4,4.3,4.9z fill=#f3b5cf /&gt;&lt;path d=m5.9-7.6c4.4-11.9,8.7-17.7,10-17.1,1.3.6-1,7.8-10,17.1z fill=#69c8c3 /&gt;&lt;/g&gt;&lt;use href=#a transform=matrix(.83,0,0,.83,11.9,37.3) /&gt;&lt;use href=#a transform=rotate(-65,22.3,22)scale(.94) /&gt;</code></pre>
</div>
</div>
</p>
<p>Here one of the cloned butterflies is transformed using the <code>rotate()scale()</code> pattern, but the other clone is not because <code>matrix(.83,0,0,.83,11.9,37.3)</code> is shorter than <code>translate(11.9,37.3)scale(.83)</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/258716/">258716</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




