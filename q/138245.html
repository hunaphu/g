<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::138245</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Perl 5</td><td>170809T171801Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138278#138278">Xcali</a></td></tr>
<tr d-ix="1"><td>071</td><td>Haskell</td><td>170809T172845Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138280#138280">Wheat Wi</a></td></tr>
<tr d-ix="2"><td>057</td><td>Ruby</td><td>170809T152043Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138257#138257">Nnnes</a></td></tr>
<tr d-ix="3"><td>121</td><td>Java OpenJDK 8</td><td>170810T203442Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138454#138454">Olivier </a></td></tr>
<tr d-ix="4"><td>055</td><td>JavaScript ES6</td><td>170809T170017Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138277#138277">ETHprodu</a></td></tr>
<tr d-ix="5"><td>035</td><td>CJam</td><td>170809T164514Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138274#138274">Peter Ta</a></td></tr>
<tr d-ix="6"><td>076</td><td>Mathematica</td><td>170809T152310Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138259#138259">JungHwan</a></td></tr>
<tr d-ix="7"><td>082</td><td>Python</td><td>170809T150854Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138251#138251">Uriel</a></td></tr>
<tr d-ix="8"><td>043</td><td>Retina</td><td>170809T213742Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138324#138324">Neil</a></td></tr>
<tr d-ix="9"><td>121</td><td>PHP</td><td>170809T213503Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138323#138323">halfmang</a></td></tr>
<tr d-ix="10"><td>073</td><td>Javascript</td><td>170809T165609Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138275#138275">asgallan</a></td></tr>
<tr d-ix="11"><td>047</td><td>Pyth</td><td>170809T155917Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138264#138264">Arnold P</a></td></tr>
<tr d-ix="12"><td>084</td><td>Python 2</td><td>170809T160111Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138265#138265">Erik the</a></td></tr>
<tr d-ix="13"><td>021</td><td>SOGL V0.12</td><td>170809T151941Z</td><td><a href="https://codegolf.stackexchange.com/questions/138245/bifurcated-text/138256#138256">dzaima</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, <s>54</s> 50 + 1 (-p) = 51 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/\{(.)\}/$1/g while s/[a-z]\K[a-z]+/_{$&amp;}^{$&amp;}/ig
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/79YP6ZaQ08zplZfxVA/XaE8IzMnVaFYPzpRtyo2xhtMaevHV6uo1caBCP3M9P//E5OS/@UXlGTm5xX/1/U11TMwNPivWwAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p><strong>How?</strong></p>
<p>The substitution in the while condition breaks occurrences of multiple letters in the first letter, followed by the rest in braces like this:</p>
<pre class="lang-perl prettyprint-override"><code>abc -&gt; a_{bc}^{bc}
</code></pre>
<p>The while loop executes the substitution until no more multi-letter sequences remain.  The substitution inside the loop removes braces from around single letters.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 71 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>f[x,y]=x:'_':y:'^':y:[]
f(x:y@(_:_))=x:"_{"++f y++"}^{"++f y++"}"
f x=x
</code></pre>

<p><a href="https://tio.run/##7VVdaoQwEH73FCEsmKC9QMDSC/QEVkPWJirVVUykkdCz24lmoXRf9qWUUl8yM9988xcGphH6TXbduqrcpkuRWRbzmC0sLv2bF5Eili1PhDNOKXgxdzhJFFqSBH@UX3QcKWQzu0or@rGTOssJxinCmKYRIlh4XQSjl97quSxlQCphPFRxJ7gpDWTeZXCraai9X3E3cTfwuqyBsktQbrEQ1wyT3mo1nuF52hcF3i732G/YluVebih0btU8wRBbsTN3LXfQ67yl2YZyJgSaa7JbDLT7uXs7P5Qb9L/bOxjH3//W34N17P6x@/9z9zEtol60l6wX4zMiL0SnSFL08IjGqb2Yk4ZDyRDcTKKb4f0ks0whTQFERNpRVka@MvBKj4jKzKLzJgkkiim6Xtf1Ew" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>If we just had to output valid code the following would work for 44 bytes:</p>

<pre class="lang-hs prettyprint-override"><code>f[a]=[a]
f(a:b)=a:"_{"++f b++"}^{"++f b++"}"
</code></pre>

<p><a href="https://tio.run/##y0gszk7Nyfn/Py06MdYWiLnSNBKtkjRtE62U4quVtLXTFJK0tZVq45DYSv9zEzPzbAuKMvNKVNKUkhNLlP4DAA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>76</s> <s>73</s> <s>72</s> <s>68</s> <s>67</s> 57 bytes</h1>

<p>Use of lambda saving 4 bytes thanks to <a href="https://codegolf.stackexchange.com/users/64834/tutleman">Tutleman</a></p>



<pre class="lang-ruby prettyprint-override"><code>f=-&gt;s{(r=s[1..-1])[0]?s[0]+?_+[r[1]??{+f[r]+?}:r]*2*?^:s}
</code></pre>

<p><a href="https://tio.run/##FchBCsIwEEDRfU8xG0EbGozLQs1BhlFik9iNRmZaiqQ5e6ybD@/z8vjWGofuKvnIg6DRujN0wjNZ2aPsXSGjIWuzisj7KD1Te2ntrZdSD2t28AowuhkipydMiSUUHdw4gU@wrYn91gB8llkg4p/UhLevPw" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>

<p>Ungolfed:</p>

<pre class="lang-ruby prettyprint-override"><code>def f(s)
  r = s[1..-1]
  if r.size &gt; 0
    if r.size &gt; 1
      x = "{" + f(r) + "}"
    else
      x = r
    end
    return s[0] + "_" + [x, x].join("^")
  else
    return s
  end
end
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="http://openjdk.java.net/" rel="nofollow noreferrer">Java (OpenJDK 8)</a>, 121 bytes</h1>



<pre class="lang-java prettyprint-override"><code>s-&gt;{int l=s.length;String r=--l&lt;0?"":""+s[l];for(;l--&gt;0;)r="{"+s[l]+"_"+r+"^"+r+"}";return r.replaceAll("^\\{|\\}$","");}
</code></pre>

<p><a href="https://tio.run/##VVDBbsIwDL3zFZa1Q6vSiDOlTGjSbjtxpDCFLi1hIamcFAl1/fYupR10kZL42c/Wez7zK49NJfT567ur6qOSOeSKWwsfXGpoZgBj1jru/Hc18gsuvhZsHUld7vbAqbThnQpw9vNY7aRiRa1zJ41m72Owyk@cdvv50LeGoyxqyrkzBCl0Nl43UjtQqWVK6NKdkoEIlMaxWi1eEZeIkd2pfVIYChIVx@tFElKKzZCO8BMjivBwf1tMSLiaNBAjUSmei41SAR6yrPnJsvYF54hh0nbJXfjDjRPWWa9o8NMfxPkz5lNwEVPkvUxhQaac4pMh@4//twCBY64dpPTuRu@9mOUgKXwo2t6sExdmascqz3JKB89dMl5V6hb0LcyZN7/yDRG/BWEYDtPbWX/b7hc" rel="nofollow noreferrer" title="Java (OpenJDK 8) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h2>JavaScript (ES6), <s>57</s> 55 bytes</h2>

<pre><code>f=([c,...s])=&gt;s+s?c+`_${p=s[1]?`{${f(s)}}`:s}^`+p:c||''
</code></pre>

<p><s>Θ(len(s)) complexity!</s> According to @PeterTaylor, this is actually Θ(2^len(s)), which is still the best possible...</p>
</div>
<div id="pu5" class="pu"><h2>CJam (35 bytes)</h2>

<pre><code>MqW%{"^{ }_{ }"{AW$,)3e&lt;#&lt;},S/@*+}/
</code></pre>

<p>This is a full program. <a href="http://cjam.aditsu.net/#code=MqW%25%7B%22%5E%7B%20%7D_%7B%20%7D%22%7BAW%24%2C)3e%3C%23%3C%7D%2CS%2F%40*%2B%7D%2F&amp;input=abcde" rel="nofollow noreferrer">Online demo</a>.</p>

<p>3 bytes work around a bug in the interpreter (see below).</p>

<h3>Dissection</h3>

<pre><code>M            e# Start building from the empty string
qW%{         e# For each character in the reversed input
  "^{ }_{ }" e#   Take a template
  {          e#   If the accumulator is of length n, remove all characters whose
    A        e#   codepoints are greater than pow(10,
    W$,)3e&lt;  e#                                   min(n+1, 3))
    #&lt;       e#   When the accumulator is the empty string, that's all of them.
  },         e#   When the accumulator is one character, that's {}
             e#   When the accumulator is any longer, it's none of them.
  S/@*       e#   Substitute the accumulator for the spaces.
  +          e#   Append to the new character.
}/
</code></pre>

<p>Note that the <code>min(n+1, 3)</code> is to work around a bug in the interpreter: there must be some pattern in the powers of 10 that <code>'}</code> is smaller than, but <a href="http://cjam.aditsu.net/#code=&#39;%7DA50%2Cf%23f%3C" rel="nofollow noreferrer">it's not obvious</a>.</p>
</div>
<div id="pu6" class="pu"><h1>Mathematica, <s>72</s> <s>84</s> <s>77</s> 76 bytes</h1>
<pre><code>a_±b__:={&quot;{&quot;,a,&quot;_&quot;,±b,&quot;^&quot;,±b,&quot;}&quot;};±(a_:&quot;&quot;):={&quot;&quot;,a,&quot;&quot;};&quot;&quot;&lt;&gt;Most@Rest@±##&amp;@@#&amp;
</code></pre>
<p>Uses CP-1252 (Windows) encoding. Takes a list of characters as input.</p>
<h2>Explanation</h2>
<pre><code>a_±b__:=
</code></pre>
<p>Define the function <code>±</code>, with 2 or more arguments. Label the first argument <code>a</code>, and second and on <code>b</code>.</p>
<pre><code>{&quot;{&quot;,a,&quot;_&quot;,±b,&quot;^&quot;,±b,&quot;}&quot;}
</code></pre>
<p>Create a <code>List</code> equivalent to <code>&quot;{a_±b^±b}&quot;</code> (<code>±b</code> is evaluated again, recursively).</p>
<pre><code>±(a_:&quot;&quot;):= ...
</code></pre>
<p>Define the function <code>±</code>, with 1 or 0 arguments. Label the first argument<code>a</code>, if it exists, and assign <code>&quot;&quot;</code> to <code>a</code> otherwise.</p>
<pre><code>{&quot;&quot;,a,&quot;&quot;}
</code></pre>
<p>Create a <code>List</code> equivalent to <code>&quot;a&quot;</code>, padded with empty <code>String</code>s.</p>
<pre><code>&quot;&quot;&lt;&gt;Most@Rest@±##&amp;@@#&amp;
</code></pre>
<p>A pure function that applies <code>±</code> to the input, drops first and last element, and converts <code>List</code> to <code>String</code>.</p>
</div>
<div id="pu7" class="pu"><h1>Python, <s>95</s> <s>90</s> <s>86</s> <s>92</s> 82 bytes</h1>

<p><em>10 bytes saved thanks to @ConnerJohnston</em></p>



<pre class="lang-python prettyprint-override"><code>f=lambda s:s and s[0]+(s[1:]and'_{0}^{0}'.format(s[2:]and'{'+f(s[1:])+'}'or s[1]))
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/7/P802JzE3KSVRodiqWCExL0WhONogVlujONrQKhbIVY@vNqiNA2J1vbT8otzEEqCMEUSmWl07DaJOU1u9Vj2/CKjVMFZT839BUWZeiUaahrq6piYXnJOIyktC4WbkFxWnAkX@AwA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 43 bytes</h1>

<pre><code>(.)(.)$
$1¶$2
+`(.)¶(.*)
¶{$1_$2^$2}
¶{|}$

</code></pre>

<p><a href="https://tio.run/##K0otycxL/K@q4Z7wX0NPE4hUuFQMD21TMeLSTgDyDm3T0NPS5Dq0rVrFMF7FKE7FqBbEqalV4fr/P5ErN5UrObGEK60oP50rI7@oOJUrKTOttAgolgoA" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>

<pre><code>(.)(.)$
$1¶$2
</code></pre>

<p>Get the ball rolling by slicing off the last character. (But if it's the only character, them leave it alone.)</p>

<pre><code>+`(.)¶(.*)
¶{$1_$2^$2}
</code></pre>

<p>Move the ¶ character back one step at a time, each time taking the previous result and making it a subscript and superscript of the next character.</p>

<pre><code>¶{|}$
</code></pre>

<p>Remove the now redundant ¶ and the outer {}s.</p>
</div>
<div id="pu9" class="pu"><h1>PHP, 121 bytes</h1>

<pre><code>function b($s){return $s[0].($s[1]?'_'.($s[2]?'{'.($b=b(substr($s,1))).'}^{'.$b.'}':"$s[1]^$s[1]"):'');}echo b($argv[1]);
</code></pre>

<p>The function itself is 104 bytes and shows a PHP Notice.</p>
</div>
<div id="pu10" class="pu"><h1>Javascript, 73 Bytes</h1>

<pre class="lang-js prettyprint-override"><code>s=&gt;[...s].reduceRight((m,c)=&gt;`${c}_{${m}}^{${m}}`).replace(/{(.)}/g,'$1')
</code></pre>

<h2>Explanation</h2>

<pre class="lang-js prettyprint-override"><code>s=&gt;                                  // take the input string
    [...s]                           // split the string into an array
    .reduceRight(                    // reduce the array in reverse order
        (m,c)=&gt;`${c}_{${m}}^{${m}}`  // storing the result of each iteration in the memo m
    )                                // and returning m at the end
    .replace(/{(.)}/g,'$1')          // replace redundant {}
</code></pre>

<p>Because there is no specified initial value of <code>m</code>, <code>reduceRight</code> takes the last element of <code>s</code> as the initial value, and begins iterating at index <code>s.length-2</code>.</p>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const f=s=&gt;[...s].reduceRight((m,c)=&gt;`${c}_{${m}}^{${m}}`).replace(/{(.)}/g,'$1');

const input = document.querySelector('#input');
const output = document.querySelector('#output');
output.textContent = f(input.value);
input.addEventListener('keyup', e =&gt; output.textContent = f(input.value));</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>Enter text to bifurcate: &lt;input type="text" id="input" value="cat" /&gt;
&lt;br /&gt;
&lt;span id="output"&gt;&lt;/span&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 47 bytes</h1>

<pre><code>Ljk[hb|&amp;ttbs[\_\{ytb"}^{"ytb\})&amp;tbs[\_htb\^htb;
</code></pre>

<p><a href="https://tio.run/##K6gsyfj/3ycrOzojqUatpCSpODomPqa6siRJqTauWglIx9RqqkGEM4CcOCBh/b/yv1JGflFxqhIA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>

<p>This is pretty much a straight port of @Uriel's Python answer.  Going to golf it down in a bit.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 84 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def b(s):q=s and(s[2:]and'{%s}'or'%s')%b(s[1:]);return s[1:]and s[0]+'^%s_'%q+q or s
</code></pre>

<p><a href="https://tio.run/##HYxBCsIwEAC/spewWXrRHiO@pMQSbcVeNsluShHx7XHxNgPDlHd7ZR57X9Yn3L1SqFeFxIvXaQzRAD9Ov5gFnSI5S6ZziHSRte3C8DerDE5xwJvTGV0dKmQB7UU2braVdMwbl715ov5I7Qc" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/dzaima/SOGL" rel="nofollow noreferrer">SOGL V0.12</a>, 21 <a href="https://github.com/dzaima/SOGL/blob/master/chartable.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>±K;{╔+;lH?&quot;{ŗ}”}1 ^Ο+
</code></pre>
<p><a href="https://dzaima.github.io/SOGLOnline/?code=JUIxSyUzQiU3QiV1MjU1NCslM0JsSCUzRiUyMiU3QiV1MDE1NyU3RCV1MjAxRCU3RDElMjAlNUUldTAzOUYr,inputs=Y2F0" rel="nofollow noreferrer">Try it Here!</a></p>
<p>Explanation:</p>
<pre><code>±                      reverse the string
 K                     take off the first letter - will slowly convert to the output
  ;                    get the rest of the string ontop
   {                   iterate over the rest of the characters
    ╔+                   append &quot;_&quot; to it
      ;                  get the output string ontop
       lH?     }         if it's length - 1 [isn't 0]
          &quot;{ŗ}”            push the string &quot;{ŗ}&quot; where ŗ is replaced by the output string
                1 ^Ο     wrap &quot;^&quot; around with the output string
                    +    prepend to it the current character + &quot;_&quot;
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/138245/">138245</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




