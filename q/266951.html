<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::266951</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>223</td><td>JavaScript ES6</td><td>231121T210243Z</td><td><a href="https://codegolf.stackexchange.com/questions/266951/get-the-bible-verse/266967#266967">Arnauld</a></td></tr>
<tr d-ix="1"><td>283</td><td>GNU sed En</td><td>231121T220045Z</td><td><a href="https://codegolf.stackexchange.com/questions/266951/get-the-bible-verse/266969#266969">Philippo</a></td></tr>
<tr d-ix="2"><td>070</td><td>Jelly</td><td>231121T211417Z</td><td><a href="https://codegolf.stackexchange.com/questions/266951/get-the-bible-verse/266968#266968">Nick Ken</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 223 bytes</h1>
<p>Expects <code>(text)(reference)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>t=&gt;s=&gt;([,s,v]=s[M='match'](/(.+) (.+)/),t.split(/\*+|[\r\n]{10}/)[(n=t.split`
`.findIndex(r=&gt;r[M](s.replace(/\d/,n=&gt;` ${&quot;_FST&quot;[n]}.* .*`))))?n-21:64]+0)[M]((v[1]?v:&quot;1:&quot;+v)+&quot;((.|\\r\\n)*?)\\d&quot;)[1].trim().replace(/\r\n/g,&quot; &quot;)
</code></pre>
<p><a href="https://tio.run/##hZRZj6NIFoXf61ekrJbaLqqTfatWVsuAWWxsdozJTE2xL2YHA6a7f3uNs2dG008z8RBS3O9cnRPSjci90euDLmuGX6o6jH7ELz@Gl2/9y7f165f@y/j@0r8eX34uvSFIf35fg@tnYPP0sYGbL8Nz3xTZsAbfPgN/vL51b9X77zD0J7h5XVcv/4bfP31/jrMqlKowmtfdy7fu9fi@7p@7qCm8IHr0huCX6uXb96effl/9gzfM1Wv1/ufz56fnz983j/Vb9QsCfyWwdwDafHSux1f4/bfx6wr@ugLGDbBar5//eHt4v1Wbz79t3t7C1eaheB66rFxv/mbzSAcmX1ZPq82PoK764Snun16euqi9ZV20XsX9avPrp3@Rpcj8v7OP83@puXPMB/0oPmdVXHhDpHuTca@CNXOL46h7jru6XMcfd/RCPiuivxi0eR5q4xGrStabL08r3@sjAltt/l7@9dNfHnURPRd1so7XH16b9UqIqqjP@if4K7zaPAFPq7fqP3n@hxb5v9rdXIe3Dyn6yPHrj8aOT37aozsZkyGu1wgW1tIwbRLrgt9jVyjKvZy22s6T6qg9ofM1FRxH5cQz4NjRLclp3SImGrH31lnBQ4OVDBSPA8X1MT/AfBoEyaM1KUQPaIfGJdRE88Atnky3nL8uAUXXQK1aijtO23QhmZO7r5FKwKg777CPyUxzIDQHWdIRjtfFeSaReadLwW7fdXnIbx3c2rLQ0irqoBsT5Z7R/AaZnXP2Q1NQIneyKtkoCdqjozbnLRfD8WaCZVbaNzaUjIIdmclt61SdNdG3W0ZUVjOR00QlCrKgEJwwIZX09DQRTt8XE1gzdtsEjE4P8Xa5XepcO4caAJAMX2ZVEDF@ccavbNNISmGlCXUJQSLhkNz2jAvk1dHJtmNnKYYJBY6gQCN3rqp4S2dGtdhdccLhj5VNoBrNHA69tdOBgCaybeJYUY0N9rkNtR0ZIQJstSidjj4aYIcjF1nCrulIYy5uNDhctkRhL1tMjkaovBzZPGmuntht02ynllK2iPlAAvTg09cw1E0gHGNi6RoxHOHhUGqWBR36E3u33fvW7bfeWdwmdoYjNEGqCwzog4fXfqeq26CAUqhrNZOOunBpB6ej00xxpxGJJvoMYxUpYEB5Nxxj8Ynb7l7yVEHN@4OMRDNXqf1U1eTFFTNfPmWVK2OXhbgMBLKnAvc4nU6@t9f48izgssxmlqb2CF2GthS5pGcKWJgMaaNsBXIvdWlwDRLtUjkaHGhCO2U1lV9J@sindUJmKMkrmCC2huNpA@1jMn/I70ql@cZwdQ7APWJsjOW9GkJm7yIMJLsPDHlKSEHDIw6ZAZ/JkFMri4muMdApRsO2orU2hu9IQhdj6washAtN0sb4Deeu7QJJwbZm2b7iwTLPiL1GFEIEqyhXUWLawr1lMlsg5w1Eh4qDoZAgfD8z6VVLhTKQ69hQT5R9PFDC0gNcFJFHXA1ORxCoarPFY3G3iMSwhGS@p6nUt3uI3rJdlykXOrzsD/lpPnHcTgJDv4wQrLhCCid4Y4kXRkGb8vXAMDKZEah9CZdbXOt6nUbeLXLxxbCUBuMuCurIvHUX/dGMeKIbSB@JlvwydZrPp2Xa@vMj34W1980Jvuek2UZuGqpYhLPRUBV4/5hwfSg5AhjqSyFWpn@/DgfDAuajmGq3KbnrEr1YKEvbVF1dWeKk69EO5Q7@bqR0IimD3dmXRyzTLwKC84t4S3njLvPg7haYJwz1zop9BRluDFox2YESy@pUUsn@3WLiC17iQT9AIc7fRs4LDzosb@lwR0gA05z5thMUGdVlPiJHOd3n90q/9FcEUP3JFyTwUiYifTDSGYXRWuF1U4VK0CCv5x13QYezGQBTZZuzSsDh@QYquVzEd8l0SZAETohsT1Y@MBWpMoI@OlU7JQXcmYdMMftQZ0l2aPRki@RLgyygJiGPJHEPAS6lhpbtzjw8eLtlgSnIGvuUOC4nknfmMqrkjMooRrOSxzfgEhUkeebWNekuLPiDhxylhnEYHzv1VJozi9mjIR8TcwuiV43Tjzzq0D6X94F5Lw4X81gEwG7ncxihH1FhGu9gbgTw@QColi1oyhke2yq40qKv2sOQPR6jJB/PQ@4uZS12vn9MrV63MzSB7fS834/GCCiQZl8TPFLPldoOMK8x1D656Cwx5vYxEpozsixHyZu3NJ2yfMlAMuhiQ9xcMntOEgzJclW0aj2scxQRbJthaKD24a1Ty@RdKwsWhA430r3i@MGcHU@Idz3a1ATPzu7AxzWV1XqyaKW3DcB@3xmgoRstu3f0yqUZ@XpsBynAQsarwcq6aSfsBqkKZFN4EEKYCJVZLZa9flgWiy/N23xD6DsEO9pSwkAazruzoXJSx56WvU1zqtFc@@gIFFku8kW@2AIi80qfDTgnOiHKCcOYjJk4Lx2fJB7dHaewIVHfG49xQTGyW1esnysKfwL8AOYiqvDOtLAHRynGykiG44OERQjBHpKbMdZWds8B7mxFc82rRt2oGiJe5/RKYUJ4oZ3RcUB1enn5Jw" rel="nofollow noreferrer" title="JavaScript (Node.js) ‚Äì Try It Online">Try it online!</a></p>
<p>(The TIO code works on a small extract of the original file.)</p>
<h3>Method</h3>
<ol>
<li>We compute the book number by looking for the line containing the book name in the summary. There's a special case for <em>James</em> which appears on the very first line of the file. We also have to be careful about the misalignment between <em>Malachi</em> and <em>Matthew</em>.</li>
<li>We split the text and extract the relevant book.</li>
<li>We look for the requested verse in this book and format it.</li>
</ol>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>t =&gt;                    // t = input text
s =&gt;                    // s = reference
(                       //
  [, s, v] = s.match(   // split s into:
    /(.+) (.+)/         //   s = book name
  ),                    //   v = &quot;chapter:verse&quot; or just &quot;verse&quot;
  t.split(              // turn t into an array of books
    /\*+|[\r\n]{10}/    // by splitting on &quot;***&quot; or &quot;\r\n&quot; * 5
  )[(                   //
    n = t.split`\n`     // split t on new lines
      .findIndex(r =&gt;   // and find the first string r
        r.match(        //   which contains:
          s.replace(    //     the book name
            /\d/, n =&gt;  //       with the leading digit (if any)
            &quot; &quot; +       //       replaced with a space
            &quot;_FST&quot;[n] + //       followed by &quot;F&quot;, &quot;S&quot; or &quot;T&quot;
                        //       (for &quot;First&quot;, &quot;Second&quot;, &quot;Third&quot;)
            &quot;.* .*&quot;     //       followed by &quot;.* .*&quot;
          )             //     end of replace()
        )               //   end of match()
      )                 // end of findIndex()
  ) ?                   // if n is not 0:
    n - 21              //   use n - 21
  :                     // else:
    64                  //   use 64 for &quot;James&quot;
  ] + 0                 // get the n-th book and append a &quot;0&quot;
).match(                // then find:
  (v[1] ? v : &quot;1:&quot; + v) //   the verse header,
  + &quot;((.|\\r\\n)*?)&quot;    //   followed by the verse content,
  + &quot;\\d&quot;               //   followed by a trailing digit
)[1]                    // end of match(); keep the content
.trim()                 // trim it
.replace(/\r\n/g, &quot; &quot;)  // and turn line breaks into spaces
</code></pre>
</div>
<div id="pu1" class="pu"><h1>GNU sed <code>-En</code>: <s>¬†330 321 303 298¬†</s> 283 bytes</h1>
<p>The reference is given in the first line. In real life you can do this like <code>sed 'the script' &lt;&lt;(echo Luke 19:10;cat pg10.txt)</code></p>
<pre><code>1{s/^([123]) /\1/;s/.* S/S/;/:/!s/ / 1:/;h}
/\n/!N;N;/^.{5}$/!D;n;n;s/\r//;/Bi/D
/Ac|La|Re/s/ of.*// 
s/The Fi/1/;s/The Se/2/;s/The Th/3/;s/^[123].*M//
s/[^0-9]* //;s/ms$/m/;G;/^(..*)\n\1/!d
:1
n;G;/(.*:.*) .*\n.* \1$/!b1
s/\n.*//;s/.*[0-9]:\S* //
:2
N;/ *[0-9]*[:*]\S.*/!b2
s///;s/\r\n/ /gp
</code></pre>
<p><strong>Explanation:</strong> The first line forms the given verse to remove the whitespace after a number, rename the Song of Salomon and add <code>1:</code> for one-chapter books; this gets saved in the hold space. The second line finds book titles, the following three convert them to a canonical form and check for a match with the given verse. The rest of the script search for the exact verse inside the book and strip it to only that verse.</p>
<p>This was the original POSIX <code>sed -n</code> version with 298 bytes:</p>
<pre><code>1{s/^\([123]\) /\1/;s/.* S/S/;/:/!s/ / 1:/;h;}
/\n/!N;N;/^.....$/!D;n;n;s/^M//;/Bi/D
/[ALR][cae]/s/ of.*//
s/The F/1/;s/The Se/2/;s/The T/3/;s/^[123].*M//
s/[^0-9]* //;s/ms$/m/;G;/^\(..*\)\n\1/!d
:1
n;G;/\(.*:.*\) .*\n.* \1$/!b1
s/\n.*//;s/.*[0-9]:[^ ]* //
:2
N;/ *[0-9]*[:*][^ ].*/!b2
s///;s/^M\n/ /g;p
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>80</s> 70 bytes</h1>
<pre><code>·∏¢f√òDV+2·ªã=‚ÄùJ∆≤o1
·∏≤-·ªã‚Åπ≈ì·π£‚Äù¬∂x5¬§¬§·ª¥‚Ç¨¬§·∏¢w¬•∆á·ªã@√á{K≈ì·π£·∏≤·π™¬π‚Åæ1:;$f?‚Äù: ã2·ªãw‚±Æ√òD;‚Ç¨‚Äù:¬§≈ìP∆ä·∏¢·∏ä
</code></pre>
<p><a href="https://tio.run/##7VhNbxzHEb3Pr@hDbpkY4sq2LAqBQ0aCTNqSDFGOAN96dnp3WpyZ3nTPcLTMxc7FgH30JTnk4igIEAQBYgSBBAM5ULAO@RfkH1FeVXXP7lI0HCCXHJYX7vRHddWrqlfV/cTU9fL16/Pn38xe/u72r346Of/uq59ffPaHw1ffup3s/Pm3P8PAxecvvv/6/MUfMX72z6fvnD07e3b@3T8ufvtX/H/@zXD2p1dfYNUvXn7xmw95Hbadv/jL2YuLz/@1s3vrJ7P3sXH331@R7OHi73/DQbewmQbPnn3/9cevvoSU8@dfvn7559ePKqPum0E9MqHTjWk75Waqw@CHtp2rQwwFtW@L2mT0R6vvurAwtdqbTp0vaVHn1JG22HlPd9g5YN3O7o6itYVzx0ng3LTG6866lkYOTeiD@mXlbehyng8ycVuf2JJHsjiyV3hd6eYtEjtJX6owc92pg6D19JbSbSk/4/ChnrpChvlnGu5LHTIarWxQhTdd5U17S@3sXld7tJbm49qPK@1hOy3@VHtNijzCudqz2CxOy9o7wbtGjuOfcXjP64aEv83C6StNNLbVpS5usS7pK07e1zrAchEXP@LUka4bx/q@wyLlO5PJfedOScuHelrpaDyPyfSDwpQ83XeVTPIIT2bwRjAk913BgT7jPvYHO@gYzpadm2NRxpGrXSMeq4zHLDZXmk4wLa8d7MzQ7Cfe6kCH3RAj4j6R8tAVTkcs5XfCrLBahulXGgyaBL0nAAedzHFBL3B@jID4lYLA@XQA/0z4nEatbpKwjD/HHRrWjHv4IykArE@jWvQzBcSpOSZxlAjXWLk4Eufv6RZ@NUF2pq8xOpL391behRFRv50d8REPJA3NtHItfV8O7lzpwvVdRg7obGPIE0s1GG/UVHtvEQJ60EtK4n1dLGvX7tIZEz5Dzzr2ZNyRFd7186pbW5yvHT3GKACyphYTxs/omk@dd4UuaBrHSNqNYytX9@Xo675MoNZWH9tGkiZ@pB2nzrPAmGr4HNUp3TSpgp9RDTjLNqPfRjmQSidDkCQYf49zRp@m9I8foztBfLpN3uSPTSaCxJhaKzqiMDWLinOj6kNBm5Ee97Rf5vRjqMAkAwHrfCuEmdOggnunuq5NmQl/MjPu3EAmKQxfItugZsRIiTbhOsle0Jeaud53SM9sbbkYwXtkYd92VoRSwCwp4TliwPhjGJC0LElTV0v7EQk4xkV7NnRblyaGvqfuu4HFFdZ31eVqwpA5ohzgNNhgdtXjCnIwipGscR3RE6HMK01YuD4gDaCLOCSHe2bOx1SZakoaNze0LVeBiAxFBOrBsMHifMRPXaYq94Grl@pu5ZJXblIdbKNkJsboajqFkVBPeijdaEpViGwdLLB1LZU1a/Sx4W1aLfqittNjZZ7qZlGbnNVH7ShF@UXfyUKCduHtia2XUjOvqX3MDVCTREFNyWLGyAQawGGBFKpcLbUXqsyRj2JU9tGDh7eVXiwMHMMB4RTljAWoqvRGN8BFk1/zEUI6ZLOkZzNsZ/OwvSOzWBDkG/FGVy25RuzC97F@QOdpxfHu2qmxJwh5HEpWYuxqxCdCj@SnUFE6FJ6ghEi4SpNKgrMoiBUdJxOTZgtfZ4d3jj45Eh1GGUGfGF6xMA7QjwFtvQo2xuVkwnEpGUihB@@UrjW5mGLhY0uwF9je1zNLCRwNpIBCGB6bNhn1EXorVSz598K7RWW6FcY467raj87S6sT6OVBhTVEt1oJSLP0RGBDjsiLBkBEM6k6DkOxNnUcdJVqRssYvUFugu0XI3HUxCfoIwtsb8S6bvLaUYAxaqI1ZqJIIKLwRaGx2xk2DLUuIQZRFNamRHANPMpsiBScKUx@3aGIpMDjAAG5GEcCiYtES02nJzPrQMakGKndcMk2k1DEOFMcBjJqglyXHDmwXE81IyoB9H8RQm8o0zENoII2mYbKm1EuK0uwD492qXdrIMy7DjWGeUmi/V1RpdKBMQWvm@6BrAyAmaH@PYgw85r3QlROa4iuqxH17hPPQDOF9MjwbCAvEcDCMalDo9n3Sk44SmIl4p44JTw3Oh8ouCHBG4brQ6KYxjHCFxC4vcYnQpOoAPi4PEokZBdhoj8RNki6FmzGOfkOFJBvLsaYhpM2MmA1XFWl0wtTbwiQmyGJyrsiafGAQxqVJ/NzQETAylooAEqipwDN2rIiEk6SFtiu2y9XBlc5ObIWwsOSFbPC262DG5eydxOaaiWcUlCcn1LH8k9Q8076TSKYZDgWNXnAeJVqQYUiLRQH0eNHEyFkZ@1EjQ0@Mb52PNCSp7nvg1CwTnR0Er03N5t@Q/GUv5xv@iCUl5Yl09BK1uTLtr3vrGeaMYS5tbVG5O2wY6NzUe0rgpVrCR0r3TlN0/eTd1BesEGJXa7oV3nXygc2gpNUZmfjAqCXK8lzIT1oPtmAZo1@KNjtT6JAyj5hWz3GBzTNG6AC1eClZwAJWaYBIDI5Vvim5wFGykQExw3miNAu40YgiuapdPgKQZ0KqMcyGzUwcCIdVDwJtidAovJgrGAEQYpmRa2NAXzKekk@469qaqnTSqIIMefPE2amJLG6eTo3hS/0cZb1TT9xSpOys0nPtAkEY2VjEVUVtVL550JpGGR/AhZ74R9ow8e3MwLrSDbEkRcQXTMbN7sqNJJqrg1ugJyxjAe6gaehxGY9nozpRIK03KnM769CKzl0sidnM6/aYsqgNgmez9L4SU@XqI5Vr0L4V7qBCt@p3JJdi7WQKoWRFWezBwCDtmD4bYTAiBZ1hK9CDfkBDt9KRom0TBa5fhXWS8sNdmhTPmFmAeuxnr@zT9sB/JtZW6sVGb2USP@keueEn1G6x4s58uYglo5CGMhYzuSwcZJJezEaUYMJRUjqouaU6dPxGzEJwCW73bjmWBVzoHkcO0t6RxlTvqBm4vHlTYWLfltqtnG@Lmz5g7XdByPGWN0grMqrPtRvhz1cLVno3@296OPWDPVz2Rg/3QPiaVRFyOkjMCl5GXyLmv3slHUt60fuKVNnGTY/HErfGytRXrlJ68IAmsikxDDdE8bs2w3qdrREtbWzB6eK/3ufIDoqptN5pKsiMoJvlsYUZHGhXe5QpcU4G6uVAWn83HF8lBMNYadZqx1pdYRyTbYJOLFYEwcodaxeHNZ/AD@g8TLNZlLPkjgldK1HgH@pGr8UDmmtiR@F3UDi/kPJdVHhkQDPL@wkSocwG99aWx@ghDtkZ18QLhR/hjRJG9iiYUMkpkuVT3Yd4B6W2DEvE6JvxNjf2YnzRMHqNGnT7JjOokRmydR5bJ4mY1RO6MR79Dzwxd6uqkNoaaTFSsyQ2ZaR1dFWIL0ubWX3x2e@DqtHpv8XPzyr@vY4vzey27RP29gl7@4S9fcLePmFvn7C3T9jbJ@ztE/b2CXv7hL19wt4@YW@fsLdP2Nsn7O0T9vYJe/uEvX3C3j5hb5@w/3@esP8D" rel="nofollow noreferrer" title="Jelly ‚Äì Try It Online">Try it online!</a></p>
<p>A pair of links that is called as a days and that takes the pg10.txt file as its right argument and the required biblical reference as its left argument. TIO fails with the full document (presumably because the POST exceeds the maximum size), and the links to TIO on CGCC are even more limited because of length. However, it should work with the full text if run locally.</p>
<h2>Explanation</h2>
<pre><code>·∏¢f√òDV+2·ªã=‚ÄùJ∆≤o1                                          # Helper link: Takes a bible reference and returns which number book should be used that matches the textual part of the reference; half the code is to handle the John letters
·∏¢                                                       # Head
 f√òD                                                    # Keep only digits
    V                                                   # Evaluate (will be 0 if no digits)
     +     ∆≤                                            # Add the result of the following, applied to the helper link's original argument
      2·ªã=‚ÄùJ                                             # - 1 if the second remaining character is a J, otherwise 0
            o1                                          # Or 1 (replaces 0s with ones)

·∏≤-·ªã‚Åπ≈ì·π£‚Äù¬∂x5¬§¬§·ª¥‚Ç¨¬§·∏¢w¬•∆á·ªã@√á{K≈ì·π£·∏≤·π™¬π‚Åæ1:;$f?‚Äù: ã2·ªãw‚±Æ√òD;‚Ç¨‚Äù:¬§≈ìP∆ä·∏¢·∏ä # Main link: takes a bible reference as its argument and returns the verse
·∏≤                                                       # Split at spaces
 -·ªã                                                     # Penultimate part (will be the last word of the book title)
   ‚Åπ          ¬§                                         # Using the following applied to the right argument:
    ≈ì·π£‚Äù¬∂x5¬§¬§                                            # - Split at five consecutive newlines
            ·ª¥‚Ç¨                                          # - Split each at newlines
               ·∏¢w¬•∆á                                     # Keep those where the first line includes the book title word from earlier
                   ·ªã@√á{                                 # Index into this using the result of calling the helper link on the original reference (so returning a single book)
                       K                                # Join with spaces
                        ≈ì·π£            ∆≤                 # Split at the substring determined by calling following on the original reference:
                          ·∏≤                             # - Split at spaces
                           ·π™                            # - Tail (i.e. the verse or chapter:verse)
                                  f?‚Äù:                  # - If contains a colon:
                            ¬π                           #   - Leave as is
                             ‚Åæ1:;$                      #   - Else: prepend &quot;1:&quot;
                                       2·ªã               # Take the second part (i.e. the bit immediately after the chapter:verse reference)
                                                    ∆ä   # Following as a monad:
                                         w‚±Æ√òD;‚Ç¨‚Äù:¬§      # - Find the position of every sublist that comprises of a digit followed by a colon
                                                  ≈ìP    # - And split at these
                                                     ·∏¢·∏ä # Take the first remaining part, and then remove the first character (which will be the space left just after the original chapter:verse marker)
üíé
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/266951/">266951</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




