<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::694</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>135</td><td>C</td><td>160516T180225Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/80029#80029">Toby Spe</a></td></tr>
<tr d-ix="1"><td>059</td><td>JavaScript</td><td>230308T090820Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/258925#258925">EzioMerc</a></td></tr>
<tr d-ix="2"><td>056</td><td>PowerShell Core</td><td>230403T212203Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/259702#259702">Julian</a></td></tr>
<tr d-ix="3"><td>064</td><td>Attache</td><td>180118T181736Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/153525#153525">Conor O&</a></td></tr>
<tr d-ix="4"><td>072</td><td>C gcc</td><td>190111T000529Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/178635#178635">gastropn</a></td></tr>
<tr d-ix="5"><td>057</td><td>AWK</td><td>180118T191223Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/153531#153531">Robert B</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>180215T161240Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/155875#155875">Brad Gil</a></td></tr>
<tr d-ix="7"><td>062</td><td>Java OpenJDK 8</td><td>180119T002828Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/153559#153559">rockscie</a></td></tr>
<tr d-ix="8"><td>040</td><td>J –</td><td>150202T110110Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/45261#45261">FUZxxl</a></td></tr>
<tr d-ix="9"><td>027</td><td>PARI/GP</td><td>150203T170702Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/45314#45314">Charles</a></td></tr>
<tr d-ix="10"><td>034</td><td>Mathematica</td><td>150430T143627Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/49485#49485">alephalp</a></td></tr>
<tr d-ix="11"><td>028</td><td>CJam</td><td>150201T233828Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/45248#45248">aditsu q</a></td></tr>
<tr d-ix="12"><td>036</td><td>Mathematica</td><td>140820T105213Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/36500#36500">Martin E</a></td></tr>
<tr d-ix="13"><td>075</td><td>Python</td><td>110208T120111Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/703#703">JPvdMerw</a></td></tr>
<tr d-ix="14"><td>078</td><td>Haskell</td><td>110208T125402Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/704#704">stusmith</a></td></tr>
<tr d-ix="15"><td>nan</td><td>Perl</td><td>110208T143758Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/708#708">user475</a></td></tr>
<tr d-ix="16"><td>063</td><td>Ruby</td><td>110208T113548Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/702#702">Dogbert</a></td></tr>
<tr d-ix="17"><td>239</td><td>Python3 239 Chars</td><td>110208T103720Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/697#697">st0le</a></td></tr>
<tr d-ix="18"><td>105</td><td>PHP</td><td>110208T104831Z</td><td><a href="https://codegolf.stackexchange.com/questions/694/last-non-zero-digit-of-n/699#699">Arnaud L</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>C, <s>150</s> <s>140</s> 135 bytes</h1>
<pre class="lang-c prettyprint-override"><code>r,d;f(k,x){r=x&lt;5?3:f(k+1,x/5);return(d=x%5)?r*&quot;33436&quot;[d]*(1&lt;&lt;d*k%4)%5:r;}main(int c,char**v){c=atoi(*++v);printf(&quot;%d&quot;,c&lt;2?1:2*f(0,c));}
</code></pre>
<p>This is the version for ASCII systems; replace the string <code>33436</code> with <code>11214</code> for an EBCDIC system, or with <code>\1\1\2\1\4</code> for a portable program.</p>
<p>C solutions are a bit hampered by the requirement to provide a full program; however, this does answer the question fully.</p>
<p>Try it online (requires Javascript):</p>
<ul>
<li><a href="https://tio.run/##HcnRCoIwFIDhV4nB4Jy5yLnWhZv4INGFnGWJZHEwGYjPvqT/7uOn44MoZ9bR9zDqhCs3KbjW1jsLo9PJoef7/OUJYpOkw5aVsPZsL@IabwpMCFGN8ozS1ey3VzdMMEzzgTQ9O1ZqwZWabn4PoIpiQf/h/fYgZBSaQtWaulI9lJoQ/ZZzNuW/Hw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">1000000 only</a></li>
<li><a href="https://tio.run/##VUztboMwDPzPU1hMSEnINsJHt0EoD9L1B0tKG7ULU0YnpIpn9wLtVM2yffbd2epxrxSi47rqyJGP9OLqURZNVvo1Fnx8LmjldsPZWaLrMSpo41iYZXm2Cjd6y4iQUrNjlNOoKF014YOx6nTWO5Dfgzb902Ed/KNO5mPmPltjibEDtG6vOKhD6xiblx8aXALw0fUOFoeBGkQFHuXi9mMcGwpX2xKzzdbt0Bsyv9iYLa3u6pfzekfCSEO9hki/25CD9SnTRpQp60jCLb1dTMGEKDDFDHMscIUv@IpvKBKfS13brf9B8gs" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Loop with all testcases</a></li>
</ul>
<h2>Explanation</h2>
<p>It's based on the algorithm outlined in <a href="http://www.mathpages.com/home/kmath489.htm" rel="nofollow noreferrer">Least Significant Non-Zero Digit of n!</a>, turned around so that we recurse in to find the highest power of five, and do the calculation on the way out.  The tables of constants were too big, so I reduced them by finding a relationship between the previous residue <code>r</code>, the current digit <code>d</code> and the recursion depth <code>k</code>:</p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: right;">r</th>
<th style="text-align: center;">d=0</th>
<th style="text-align: center;">d=1</th>
<th style="text-align: center;">d=2</th>
<th style="text-align: center;">d=3</th>
<th style="text-align: center;">d=4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3×2ᵏ</td>
<td style="text-align: center;">1×2²ᵏ</td>
<td style="text-align: center;">3×2³ᵏ</td>
<td style="text-align: center;">2</td>
</tr>
<tr>
<td style="text-align: right;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1×2ᵏ</td>
<td style="text-align: center;">2×2²ᵏ</td>
<td style="text-align: center;">1×2³ᵏ</td>
<td style="text-align: center;">4</td>
</tr>
<tr>
<td style="text-align: right;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2×2ᵏ</td>
<td style="text-align: center;">4×2²ᵏ</td>
<td style="text-align: center;">2×2³ᵏ</td>
<td style="text-align: center;">3</td>
</tr>
<tr>
<td style="text-align: right;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3×2ᵏ</td>
<td style="text-align: center;">3×2²ᵏ</td>
<td style="text-align: center;">3×2³ᵏ</td>
<td style="text-align: center;">2</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4×2ᵏ</td>
<td style="text-align: center;">4×2²ᵏ</td>
<td style="text-align: center;">4×2³ᵏ</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table></div>
<p>For <code>r&gt;0</code>, this resolves to a constant times <code>r</code> times <code>2ᵈᵏ</code> (mod 5); the constants are in <code>a[]</code> below (inlined in the golfed code).  We also observe that <code>(2⁴)%5</code> is 1, so we can reduce the exponent to avoid overflowing the range of <code>int</code>.</p>
<pre class="lang-c prettyprint-override"><code>const int a[] = { 1, 1, 2, 1, 4 };
int f(int k, int x)
{
    int r = x&lt;5 ? 3 : f(k+1,x/5); /* residue - from recursing to higher-order quinary digits */
    int d = x%5;
    if (!d)
        return r;
    return r * a[d] * (1 &lt;&lt; d*k%4) % 5;
}

int main(int c, char **v)
{
    c = atoi(*++v);
    printf(&quot;%d&quot;,
           c&lt;2
           ? 1                  /* special-case 0 &amp; 1 */
           : 2*f(0,c));         /* otherwise, it's 2 times r */
}
</code></pre>
<h2>Tests:</h2>
<pre><code>$ for i in 100 1000 10000 100000; do echo $i: `./694 $i`; done
100: 4
1000: 2
10000: 8
100000: 6
1000000: 4
</code></pre>
<p>Performance is respectable, too.  Here's a maximum input for a system with 32-bit <code>int</code>:</p>
<pre><code>$ time ./694 2147483647
8
real    0m0.001s
user    0m0.000s
sys     0m0.000s
</code></pre>
<p>I got the same timings with a maximal 64-bit <code>int</code>, too.</p>
</div>
<div id="pu1" class="pu"><h1>JavaScript, 59 bytes</h1>
<p>Based on <a href="https://math.stackexchange.com/a/130389/1156907">this answer</a></p>
<pre><code>f=n=&gt;n&gt;9?'6248'[(a=n/5|0)%4]*f(a)*f(n%5)%10:'1126422428'[n]
</code></pre>
<p>Try it:</p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=n=&gt;n&gt;9?'6248'[(a=n/5|0)%4]*f(a)*f(n%5)%10:'1126422428'[n]

;[
  0, // 1
  1, // 1
  2, // 2
  3, // 6
  4, // 4
  5, // 2
  6, // 2
  7, // 4
  8, // 2
  9, // 8
  10, // 8
  20, // 4
  100, // 4
  1000, // 2
  10000, // 8
  100000, // 6
  1000000, // 4
].forEach(n=&gt;console.log(n, f(n)))</code></pre>
</div>
</div>
</p>
<p>Modified formula is:</p>
<p><span class="math-container">$$
D(0) = 1 \\
D(1) = 1 \\
D(2) = 2 \\
D(3) = 6 \\
D(4) = 4 \\
D(5) = 2 \\
D(6) = 2 \\
D(7) = 4 \\
D(8) = 2 \\
D(9) = 8 \\
D(n) = (LastDigitOf(2^{\lfloor n/5 \rfloor}) * D(\lfloor n/5 \rfloor) * D(n \mod 5)) \mod 10, \;where \;n &gt; 9
$$</span></p>
<h2>How?</h2>
<p>The original formula is <span class="math-container">\$D(n) = (2^{[n/5]} * D([n/5]) * D(n \mod 5)) \mod 10\$</span></p>
<p>But there is a problem: we need to calculate <span class="math-container">\$2^{[n/5]}\$</span>. For example if <span class="math-container">\$n = 10 000 \$</span> then we need to calculate <span class="math-container">\$2^{2000}\$</span> which is already too hard (in JS it will output <code>Infinity</code>). But I discovered that we don't need to calculate it instead of this we just need to calculate the last digit of <span class="math-container">\$2^{[n/5]}\$</span>. Why? Because each time we just need to calculate the last digit of <span class="math-container">\$2^{[n/5]} * D([n/5]) * D(n \mod 5)\$</span></p>
<h3>Theorem</h3>
<p>The last digit of multiplication is the last digit of multiplication of last digits of each multiplier</p>
<h3>Proof</h3>
<p>Let's say we have two numbers <span class="math-container">\$a\$</span> and <span class="math-container">\$b\$</span>. We can represent each of them to the power of <code>10</code>:</p>
<p><span class="math-container">$$
a = x_n * 10^n + x_{n - 1} * 10^{n - 1} + \ldots + x_1 * 10^1 + x_0 \\
b = y_n * 10^m + y_{m - 1} * 10^{m - 1} + \ldots + y_1 * 10^1 + y_0
$$</span></p>
<p>or</p>
<p><span class="math-container">$$
a = (x_n * 10^{n - 1} + x_{n - 1} * 10^{n - 2} + \ldots + x_1) * 10 + x_0 \\
b = (y_n * 10^{m - 1} + y_{m - 1} * 10^{m - 2} + \ldots + y_1) * 10 + y_0
$$</span></p>
<p>When we multiply them we will get:</p>
<p><span class="math-container">$$
a * b = (...) * 10 + x_0 * y_0
$$</span></p>
<p>Now it is clear that the last digit of multiplication is the last digit of <span class="math-container">\$x_0 * y_0\$</span>, where the <span class="math-container">\$x_0\$</span> and <span class="math-container">\$y_0\$</span> are the last digits of <span class="math-container">\$a\$</span> and <span class="math-container">\$b\$</span> respectively. So we proved the theorem</p>
<p>Now we need to find the last digits of powers of <code>2</code>. Let's write some of them:</p>
<p><span class="math-container">$$
2^0 = 1 \\
2^1 = 2 \\
2^2 = 4 \\
2^3 = 8 \\
2^4 = 16 \\
2^5 = 32 \\
2^6 = 64 \\
2^7 = 128 \\
2^8 = 256
$$</span></p>
<p>Now we can see the pattern <code>1 (2 4 8 6) (2 4 8 6)</code> and can write it <span class="math-container">\$(k = [n / 5])\$</span>:</p>
<pre><code>if (k == 0) return 1;
else return [6, 2, 4, 8][k % 4];
</code></pre>
<p>We can ignore the first case when <code>k == 0</code> and here is why:</p>
<p><code>k % 4 == 0</code> when <code>k is one of [0, 4, 8, 12, 16, ...]</code> but we need to consider cases when <code>k is one of [0, 4, 8]</code> because for bigger values we will run recursion. The second multiplier in our formula is <span class="math-container">\$D(k)\$</span> and for <code>k is on of [0, 4, 8]</code> we get <code>[1, 4, 2]</code> respectively. We had to multiply these values by <code>1</code> but instead of this we will multiply them by <code>6</code> so we will get <code>[1, 24, 12]</code>, the last digits of these values are <code>[1, 4, 2]</code>. Now we can see that it doesn't matter to multiply them by <code>1</code> or <code>6</code> the last digits will be the same</p>
<p>The last thing we need it is to prove that <span class="math-container">\$[n / 5] = \lfloor n / 5 \rfloor\$</span> for <span class="math-container">\$n \ge 0\$</span>. I think it is obvious</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/PowerShell/PowerShell" rel="nofollow noreferrer">PowerShell Core</a>, 56 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>($s=1)..&quot;$args&quot;|%{$s=+(&quot;$(($s%1e5)*$_)&quot;.Trim(48))}
$s%10
</code></pre>
<p><a href="https://tio.run/##XZFBb4JAEIXP7q/YkNWwLRKwaq2JCUlrj7Yp3owxFEelgULZNbRRfjudXSqhzmnem2/eJLtZWkAuDhDH/TDNoWK72akymZi53LYNFuR7YZy7JzRuTYOZOOm6MOI3bMMNe5lHiTmccF4S5TtVSQjb0xk9kQ4TBTYr/0dISOynKNh/pkJGobB9mWZFIMPDejr1ZZDLBRQmJ6TTYzvqqYtEr2sQB7qfx0EmYEvwAvFMQrEsz3Qt6vKLGFh00Ig7i44bMbTosBGjNjZui/s2NmlPHiw6aYTr/FdOew2l095U@prXzvjKqVM4PdPnNJ8H4aH/8v4BocS3VByTIKRFGXxnaMIW35Zt6kkO4hirmYwSQL@HX6BxPV69@o9HIdOkjlt7dZ4q/xiGIISKamL78HVJbLglZimoyVT1phll/9EdY4n3DQ1io8GSlNUv" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">Try it online!</a></p>
<p>Naive implementation, takes under 5 seconds on my local, 25 seconds on TIO<br />
I'll rework it when I get a chance</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/ConorOBrien-Foxx/Attache" rel="nofollow noreferrer">Attache</a>, 64 bytes</h1>
<pre><code>{k.=Floor[_/5]If[_&lt;2,1,6*Digits@$`U1sTny@(_%10)*3^(k%4)*$@k%10]}
</code></pre>
<p><a href="https://tio.run/##SywpSUzOSP2fqGBl@786W8/WLSc/vyg6Xt801jMtOt7GSMdQx0zLJTM9s6TYQSUh1LA4JK/SQSNe1dBAU8s4TiNb1URTS8UhG8iPrf3vl5qaUhytUlCQnB7LFVCUmVcSklpc4pxYnFocnaijYGhlqaCuoGFoEGdoZaYZ@x8A" rel="nofollow noreferrer" title="Attache – Try It Online">Try it online!</a></p>
<p>Simple implementation of the OEIS formula. <code>Digits@$`U1sTny</code> compresses the hardcoded dictionary using Attache's compressed number feature. <code>$</code> refers to the function itself within this answer.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 72 bytes (function)</h1>



<pre class="lang-c prettyprint-override"><code>f(n,d)long long n,d;{for(d=1;n;d%=10000)for(d*=n--;d%10&lt;1;d/=10);d%=10;}
</code></pre>

<p><a href="https://tio.run/##VY7PCsIwDMbP9inKoNDKiqv/pdYn8SILK4OayRAvY89es@XgzCG/L19CktrGus650ViCSR1GOSeq/NB0vYbgPHpQwVUUZrbWAa0lz1VX52FDLcMTfsyfrgUZ9WKTEYNYvfoW340uVEogw00quGNR0hlJl43xYhTi@WhRz9NRO7IIW8aOsWccGEfGiXFmXBjTR8yfWKil/NNTMeYv" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>101</s> 99 bytes (whole program)</h1>



<pre class="lang-c prettyprint-override"><code>main(){long long n,d=1;for(scanf("%lld",&amp;n);n;d%=10000)for(d*=n--;d%10&lt;1;d/=10);printf("%d",d%10);}
</code></pre>

<p><a href="https://tio.run/##HYtBCoAgEEWvEoHhhJKuJw8jDkVgY1i76Oym/sVb/McLeg@hlNMfLOGNifehgxU5i1vK8g6eNzmKGGlUEwMyknDW1EHzNDvWun7WrBZpqQrwygc/rapNM4BfKb0x5gc" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p>This question is just shy of 8 years old so "reasonable machine" is not the same as back then, but I'm getting times of ~.01 seconds on my computer when doing all test cases together, so unless computers have increased in speed by a factor of 1000 this last decade, it should be fine.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, <s>47</s> 57 bytes</h1>

<pre><code>{for(p=$1;--$1;p=(p*$1)%1e4)while(!(p%10))p/=10;$0=p%10}1
</code></pre>

<p><a href="https://tio.run/##bYzBCsIwEETv@YoKKSRCcSeNaaXEf/FQURQMXnqQfnvssgtevOybmR3msjxq/Vxfb1eyxdR12ynZlb2FbzFHv9zuz9ntXGlB3pdDBk2WMtsVtaLJ5wYmMILpGclERjRHCZNgkHAUd2KMBqSEMsgCevXxf51I1jZB0mD1@6pOqrX9BQ" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>

<p>Original solution did not handle "large" input values very well. Could add <code>-M</code> to force it to work, but that also requires a lot more processing time.</p>
</div>
<div id="pu6" class="pu">

<h1><a href="https://perl6.org" rel="nofollow noreferrer">Perl 6</a>, <s> 26 </s> 35 bytes</h1>

<pre class="lang-perl6 prettyprint-override"><code>{[*](1..$_)~~/.*&lt;(&lt;-[0]&gt;/}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7X1qcqlBmppdszZVbqaCWnJ@SqmD7vzpaK1bDUE9PJV6zrk5fT8tGw0Y32iDWTr/2f1p@kQJQxtBEoZpLQaE4sVJBSSVewdZOQSVeD6xdQ1OJq/Y/AA" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it</a></p>

<hr>

<p>As a full program:</p>

<pre class="lang-perl6 prettyprint-override"><code>put [*](1..@*ARGS[0])~~/.*&lt;(&lt;-[0]&gt;/
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7X1qcqlBmppdszcVVXJqkkJyfkqqgoaDtoOUY5B6soKlQzaWgAJIoKC1R0FCJBwqoxNf@B/GitWI1DPX0ICqjDWI16@r09bRsNGx0gRw7/f@1XGn5RQpAFYYmYFNAepRU4hVs7RRU4vXUQDZpaCpx1f4HAA" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it</a></p>

<h2>Expanded:</h2>

<pre class="lang-perl6 prettyprint-override"><code>{
  [*]( 1..$_ ) # reduce using &amp;infix:« * »
  ~~           # match with
  /
    .*         # any number of values (so it matches from the end)
    &lt;(         # only capture the following
    &lt;-[0]&gt;     # any value but 0 (negated character class)
  /
}
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="http://openjdk.java.net/" rel="nofollow noreferrer">Java (OpenJDK 8)</a>, 62 bytes</h1>



<pre class="lang-java prettyprint-override"><code>n-&gt;{long f=n;for(;n&gt;1||f%10==0;)f=n&gt;1?f*--n:f/10;return f%10;}
</code></pre>

<p><a href="https://tio.run/##LU9BboNADLz3FValSNAYipO0abNa@oKecolU9bAlbLQpMQiWKBXh7dSQSLalGdnjmaM5m6iscj7uf4esME0Dn8Zx9wDg2Oe1NVkOuxECFCUfIAuEBw6VUL20VOONdxns4AIaBo7Sbtq0mpUt60BxSternVGidaJCoVP6sE9RxBv7TImqc9/WDOOC6gd106zan0I079Ln0u3hJL6Cra8dH76@wYQ3U6MbL1hDR7jAJa7wBV9xjW/4jpQgEdICaYm06tV4MF2JL5iCuI0PJ2b71/j8FJetjyt54QsOHMzhEXQqYw6XWJKH99j98A8" rel="nofollow noreferrer" title="Java (OpenJDK 8) – Try It Online">Try it online!</a></p>

<p>Similar to @Kevin Cruijssen but saves 5 bytes by combining the loops.</p>
</div>
<div id="pu8" class="pu"><h2>J – <s>42</s> 40 characters</h2>

<p>A whole program. Save this program in a file and run with <code>jconsole script.ijs 1234</code>. Notice that this program does not exit the interpreter after printing a result. Type <code>^D</code> or <code>exit]0</code> to exit the interpreter.</p>

<pre><code>echo([:{:@(#~*)10&amp;#.inv@*)/1+i.".&gt;{:ARGV
</code></pre>

<p>Here is an explanation:</p>

<ul>
<li><code>x #. y</code> interprets the integer vector <code>y</code> as a base <code>x</code> number; for example, <code>10 #. 1 2 3 4</code> yields <code>1234</code>.</li>
<li><code>u inv</code> yields the <em>inverse</em> of a verb <code>u</code>. In particular, <code>x #. inv y</code> represents <code>y</code> as a base <code>x</code> number; for example, <code>10 #. 1234</code> yields <code>1 2 3 4</code>. Notice that <code>inv</code> is defined as <code>^:_1</code>, that is, <code>u</code> applied -1 time.</li>
<li><code>x * y</code> is the <em>product</em> of <code>x</code> and <code>y</code>, thus <code>x 10&amp;#.inv@* y</code> yields a base-10 representation of the product of <code>x</code> and <code>y</code>.</li>
<li><code>x # y</code> copies the <em>n</em>-th item of <code>y</code> as often as the <em>n</em>-th item of <code>x</code>; when <code>x</code> is a vector of booleans, <code>x</code> selects which items of <code>y</code> to take. For instance,  <code>1 0 1 0 # 1 2 3 4</code> yields <code>1 3</code>.</li>
<li><code>* y</code> yields the <em>signum</em> of <code>y</code>.</li>
<li><code>x u~ y</code> is the <em>reflexive</em> of <code>u</code>, that is, the same as <code>y u x</code>.</li>
<li>Thus, <code>y #~ * y</code> yields a vector of all items of <code>y</code> that are positive. In tacit notation, this can written with a <em>hook</em>  as <code>(#~ *)</code>.</li>
<li><code>{: y</code> yields the last item in <code>y</code>.</li>
<li>assembled together, we get the tacit phrase <code>([:{:@(#~*)10&amp;#.inv@*)</code>.</li>
<li><code>u/ y</code> is the <em>reduction</em> of <code>y</code>, that is, the dyadic verb <code>u</code> inserted between elements of <code>y</code>. For instance, <code>+/1 2 3 4</code> is like <code>1 + 2 + 3 + 4</code> and yields <code>10</code>.</li>
<li>Thus, the phrase <code>([:{:@(#~*)10&amp;#.inv@*)/ y</code> yields the last digit of the product of the items of <code>y</code>.</li>
<li><code>ARGV</code> is a boxed vector of the command line arguments.</li>
<li><code>".&gt;{:ARGV</code> is the last argument unboxed and interpreted as a number.</li>
<li><code>i. y</code> computes natural numbers from <code>0</code> to <code>y - 1</code>.</li>
<li>Thus, <code>1+i. y</code> yields natural numbers from <code>1</code> to <code>y</code>. I could have also used <code>&gt;:</code> <em>increment</em>  here, but <code>1+</code> is clearer at the same cost of characters.</li>
<li>The entire program just applies <code>1+i.".&gt;{:ARGV</code> (the vector of <code>1</code> to the number in the last command line argument) to the verb <code>([:{:@(#~*)10&amp;#.inv@*)/</code> and prints the result with <code>echo</code>.</li>
</ul>
</div>
<div id="pu9" class="pu"><h2>PARI/GP - 27 bytes</h2>

<p>This trades speed for size -- the testcase takes a long time (~6 seconds).</p>

<pre><code>n-&gt;n!/10^valuation(n!,5)%10
</code></pre>

<p>This version is much faster (~15 microseconds) but takes 81 bytes:</p>

<pre><code>n-&gt;r=1;while(n,r*=Mod(4,10)^(n\10%2)*[1,2,6,4,2,2,4,2,8][max(n%10,1)];n\=5);lift(r)
</code></pre>

<p>You can use this (non-golfed) code to test either:</p>

<pre><code>[%(10^n) | n &lt;- [1..6]]
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Mathematica, 34 bytes</h1>
<pre><code>Mod[#!/10^IntegerExponent[#!],10]&amp;
</code></pre>
</div>
<div id="pu11" class="pu"><h1>CJam - 28</h1>

<pre><code>1ri{I)*_AbW%{}#A\#/1e7%}fIA%
</code></pre>

<p>You can try it at <a href="http://cjam.aditsu.net/" rel="nofollow">http://cjam.aditsu.net/</a> for values up to 10000 or so; for larger numbers you should use the <a href="https://sourceforge.net/projects/cjam/" rel="nofollow">java interpreter</a>. 1000000 runs in about 3 seconds on my laptop.</p>

<p><strong>Explanation:</strong></p>

<p>Unfortunately the straightforward solution is too slow, so I'm keeping only the last 7 digits (before the trailing zeros) after each multiplication.</p>

<pre><code>1           push 1 on the stack
ri          read a token and convert to integer
{           loop (for I from 0 to N - 1)
    I)      push I and increment
    *       multiply with the previous value (initially 1)
    _Ab     duplicate and convert to array of digits
    W%      reverse array
    {}#     find the position of the first non-zero digit
    A\#     raise 10 to that power
    /       divide, thus removing all trailing zeros
    1e7%    keep the remainder modulo 10000000
}fI         end for loop
A%          get the last digit
</code></pre>

<p><strong>Note:</strong> this language is a lot newer than the question.</p>
</div>
<div id="pu12" class="pu"><h2>Mathematica, <s>45</s> 36 bytes</h2>

<pre><code>Last@Select[IntegerDigits[#!],#&gt;0&amp;]&amp;
</code></pre>

<p>Very readable for a winning answer. :) (Then again, there's no GolfScript &amp; Co. submission yet.)</p>

<p>This handles input 1,000,000 in about 5 seconds on my machine.</p>
</div>
<div id="pu13" class="pu"><h2>Python - 75</h2>

<pre><code>n=input()
g=1
while n:
 g*=n
 while g%10&lt;1:g/=10
 g%=10**9
 n-=1
print g%10
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Haskell, 78 characters</h2>

<pre><code>f n=head$dropWhile(=='0')$reverse$show$product[1..n]
main=interact(show.f.read)
</code></pre>

<p>(Would probably need to be compiled to compute 1,000,000! in 10 secs).</p>
</div>
<div id="pu15" class="pu"><h1>Perl, 53 <del>58</del> <del>61</del> characters</h1>
<p>All whitespace can be removed, but I left it in for &quot;readability&quot;. Note: not using some silly explicit formula from Sloane.</p>
<pre><code>sub f {
    $_ = $1 * ++$n || 1, /(.{1,7}?)0*$/ while $n &lt; $_[0];
    $1 % 10
}
</code></pre>
<p>Calculates f(10^6) in 8.7 seconds on my machine.</p>
<p><strong>Update</strong>: OP wanted it to be a whole program:</p>
<pre><code>$_ = $1 * ++$n || 1, /(.{1,7}?)0*$/ while $n &lt; $ARGV[0];
print $1 % 10
</code></pre>
<p>That makes it 55 characters.</p>
</div>
<div id="pu16" class="pu"><h1>Ruby - 63 chars</h1>

<pre><code>f=-&gt;n{n&lt;2?1:6*[1,1,2,6,4,4,4,8,4,6][n%10]*3**(n/5%4)*f[n/5]%10}
</code></pre>

<p>Source - <a href="http://oeis.org/A008904">http://oeis.org/A008904</a></p>

<p>Handles f upto a thousand digits under a second.</p>

<h1>Test</h1>

<pre><code>irb(main):014:0&gt; for n in 2..6
irb(main):015:1&gt; puts f[10**n]
irb(main):016:1&gt; end
4
2
8
6
4
</code></pre>
</div>
<div id="pu17" class="pu"><p><h2>Python3</h2> <strong>239 Chars</strong></p>

<p>Can do <a href="http://www.ideone.com/xLq4n" rel="nofollow">10000</a> in ~3.2 seconds (Ideone cuts me off at 8 seconds, i'm sure it'll take longer than 10secs though :( )</p>

<pre><code>from functools import *
N=100
r=range
s=(p for p in r(2,N)if all(p%n&gt;0for n in r(2,p)))
f=lambda n,x:n//x+(n//x&gt;0and f(n//x,x)or 0)
e=list([p,f(N,p)]for p in s)
e[0][1]-=e[2][1]
e[2][1]=0
print(reduce(lambda x,y:x*y,map(lambda x:x[0]**x[1],e))%10)
</code></pre>

<p><h2>Python2.6</h2> <strong>299 Chars</strong> (a bit faster)</p>

<pre><code>from itertools import *
N=100000
r=xrange
def s(c=count(2)):
        while 1:p=c.next();c=ifilter(p.__rmod__,c);yield p
f=lambda n,x:n//x+(n//x&gt;0and f(n//x,x)or 0)
e=[[p,f(N,p)]for p in takewhile(lambda x:x&lt;N,s())]
e[0][1]-=e[2][1]
e[2][1]=0
print(reduce(lambda x,y:x*y,map(lambda x:pow(x[0],x[1],10),e))%10)
</code></pre>
</div>
<div id="pu18" class="pu"><h1>PHP - 105</h1>

<pre><code> &lt;?foreach(explode("\n",`cat`)as$n)if($n){$f=rtrim(gmp_strval(gmp_fact($n)),'0');echo substr($f,-1)."\n";}
</code></pre>

<p>Runs under 10 seconds with the given testcase.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/694/">694</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




