<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::273152</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>059</td><td>Retina 0.8.2</td><td>250122T205800Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/277811#277811">Unrelate</a></td></tr>
<tr d-ix="1"><td>009</td><td>Jelly</td><td>240517T124510Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273164#273164">Jonathan</a></td></tr>
<tr d-ix="2"><td>049</td><td>Perl 5 Minteger pF</td><td>240517T214017Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273170#273170">Xcali</a></td></tr>
<tr d-ix="3"><td>012</td><td>Uiua</td><td>250122T131409Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/277808#277808">nyxbird</a></td></tr>
<tr d-ix="4"><td>1646</td><td>☾</td><td>250122T075728Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/277801#277801">Ganer</a></td></tr>
<tr d-ix="5"><td>113</td><td>AWK</td><td>240521T194808Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273227#273227">C K</a></td></tr>
<tr d-ix="6"><td>1134</td><td>Cubical Agda</td><td>240521T125527Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273216#273216">Na&#239;</a></td></tr>
<tr d-ix="7"><td>050</td><td>Python 3.8 prerelease</td><td>240517T075905Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273155#273155">Jitse</a></td></tr>
<tr d-ix="8"><td>011</td><td>05AB1E</td><td>240517T124333Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273163#273163">Kevin Cr</a></td></tr>
<tr d-ix="9"><td>009</td><td>05AB1E</td><td>240521T025644Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273210#273210">alephalp</a></td></tr>
<tr d-ix="10"><td>013</td><td>MATL</td><td>240518T112436Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273177#273177">Luis Men</a></td></tr>
<tr d-ix="11"><td>100</td><td>Google Sheets</td><td>240518T140214Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273178#273178">doubleun</a></td></tr>
<tr d-ix="12"><td>038</td><td>JavaScript ES6</td><td>240517T101405Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273160#273160">Arnauld</a></td></tr>
<tr d-ix="13"><td>070</td><td>Retina 0.8.2</td><td>240517T155751Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273169#273169">Neil</a></td></tr>
<tr d-ix="14"><td>022</td><td>Charcoal</td><td>240517T151233Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273167#273167">Neil</a></td></tr>
<tr d-ix="15"><td>6766</td><td>Rust</td><td>240517T092316Z</td><td><a href="https://codegolf.stackexchange.com/questions/273152/compute-the-degree-of-a-string/273157#273157">mousetai</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, <s>63</s> 59 bytes</h1>
<pre><code>(.)\1*
$1$1
ba|cb|ac|$
--
O`.
+`-\w

^(((-)|.){6})*.*
$3$#1
</code></pre>
<p><a href="https://tio.run/##VYxBCgIxDEX3/xpWaEdaKIJXcOkFBun/wYUbFyK4sJ69ts4slOQTkjze/fK43ti2/liaT2HOE1x2GWI1VVp1iBGnkrArcX4CZ@99DDWF1@EdptTxvdvk1igjeoQeA80kkRh30zK/b@q37H8d2BCttHWbuDYWrz4" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a></p>
<p>...I was going to suggest this as a golf to <a href="https://codegolf.stackexchange.com/a/273169/85334">Neil's Retina 0.8.2 solution</a>, given that that is what it started as, until I realized I've made some or another meaningful change on all but two lines (now one). Funny how that happens.</p>
<h4>Explanation:</h4>
<pre><code>(.)\1*
$1$1
</code></pre>
<p>Replace every run of identical characters (including trivial runs of a single unique character) with precisely two copies of that character. This results in non-overlapping pairs corresponding to every overlapping pair in the original input, with an extra character at the beginning and end.</p>
<pre><code>ba|cb|ac|$
--
</code></pre>
<p>Replace every counterclockwise pair, and the empty match at the end of the string, with <em>two</em> minuses.</p>
<pre><code>O`.
+`-\w

</code></pre>
<p>Sort that result, so that minuses precede letters, then delete minus-letter pairs iteratively until none remain. Sorting is 1 byte shorter than matching unequal pairs in both orders and repeating <code>\w</code>.</p>
<pre><code>^(((-)|.){6})*.*
$3$#1
</code></pre>
<p>Divide by <em>6</em> rounded towards 0, and convert to decimal:</p>
<p>Like Neil's paired division and conversion, this doesn't directly &quot;do signed math&quot; so much as it floor divides the nonnegative unary and copies the unary digit onto the beginning of the decimal result to serve as its sign. However, using a number-of-matches substitution <code>$#{...}</code> instead of a length substitution <code>$.{...}</code>, it's a little trickier to actually match <em>specifically</em> a minus sign without consuming it out of the total--I have to clumsily use <code>((-)|.)</code> to include it, since filtering letters out afterwards is much bulkier (because decimal digits are also matched by <code>\w</code>),</p>
<p>Outside of the sign logic, this matches the entire string as 0 or more greedy repetitions of 6 of anything then 0 or more repetitions of anything at all (anchored to the start of the string to eliminate an extra empty match at the end), and replaces it with (the sign prefixed to) the number of times the 6-wide group matched in decimal.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 12 </s> 9 bytes</h1>
<pre><code>IÆTṠS÷3r`
</code></pre>
<p>A monadic Link that accepts a list of the walked vertices' <a href="https://codegolf.meta.stackexchange.com/a/8964/53748">ASCII codes/byte values</a> and yields <a href="https://codegolf.meta.stackexchange.com/a/11884/53748">a singleton list</a> containing the net number of rounds.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/zcFvIw50Lgg9vNy5K@P//f7SluY6CpSUUWyBhkLh5LAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/9/zcFvIw50Lgg9vNy5K@K/jf7hdJetRwxwFWzuFRw1zNSP//49WSkxKTlTS4VJQAtJJYAaQTgYzEpOTk5KSEiHSIHXJSQg2XHliEjJMRuXClMMsgepMhtqUlAhFMEmovSDpWAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<p>The ASCII codes of the characters in the input are <code>[97, 98, 99]</code> for <code>&quot;abc&quot;</code>, respectively.</p>
<p>The <em>instructions</em> are the substrings of length two of the input.</p>
<p>Each instruction has an expected <em>direction</em>, <span class="math-container">\$1\$</span> for clockwise, <span class="math-container">\$-1\$</span> for anticlockwise, or <span class="math-container">\$0\$</span> for no movement.</p>
<p>For most instructions, the direction is just the forward difference of the instruction's values (<span class="math-container">\$d\$</span> below), the only time this is not the case is when the ordinals have an absolute difference of two. The code coerces these by taking the sign of the tangent of the value in radians.</p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: center;">instruction</th>
<th style="text-align: center;">expected direction</th>
<th style="text-align: center;"><span class="math-container">\$d\$</span></th>
<th style="text-align: center;"><span class="math-container">\$\tan{d}\$</span></th>
<th style="text-align: center;"><span class="math-container">\$v = \operatorname{sgn}(\tan d)\$</span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">ab</td>
<td style="text-align: center;">clockwise (<span class="math-container">\$1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$98-97=1$$</span></td>
<td style="text-align: center;"><span class="math-container">\$1.557...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">bc</td>
<td style="text-align: center;">clockwise (<span class="math-container">\$1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$99-98=1$$</span></td>
<td style="text-align: center;"><span class="math-container">\$1.557...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">ca</td>
<td style="text-align: center;">clockwise (<span class="math-container">\$1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$97-99=-2$$</span></td>
<td style="text-align: center;"><span class="math-container">\$2.185...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">cb</td>
<td style="text-align: center;">anticlockwise (<span class="math-container">\$-1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$98-99=-1$$</span></td>
<td style="text-align: center;"><span class="math-container">\$-1.557...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$-1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">ba</td>
<td style="text-align: center;">anticlockwise (<span class="math-container">\$-1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$97-98=-1$$</span></td>
<td style="text-align: center;"><span class="math-container">\$-1.557...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$-1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">ac</td>
<td style="text-align: center;">anticlockwise (<span class="math-container">\$-1\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$99-97=2$$</span></td>
<td style="text-align: center;"><span class="math-container">\$-2.185...\$</span></td>
<td style="text-align: center;"><span class="math-container">\$-1\$</span></td>
</tr>
<tr>
<td style="text-align: center;">aa</td>
<td style="text-align: center;">no movement (<span class="math-container">\$0\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$97-97=0$$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
</tr>
<tr>
<td style="text-align: center;">bb</td>
<td style="text-align: center;">no movement (<span class="math-container">\$0\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$98-98=0$$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
</tr>
<tr>
<td style="text-align: center;">cc</td>
<td style="text-align: center;">no movement (<span class="math-container">\$0\$</span>)</td>
<td style="text-align: center;"><span class="math-container">$$99-99=0$$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
<td style="text-align: center;"><span class="math-container">\$0\$</span></td>
</tr>
</tbody>
</table></div>
<pre><code>IÆTṠS÷3r` - Link: list of character ordinals from [97,98,99] (i.e. &quot;abc&quot;)
I         - forward differences
 ÆT       - tan {that} (vectorises)
   Ṡ      - sign {that} (vectorises)
    S     - sum {that}
     ÷3   - divide {that} by three -&gt; FractionalRounds
       r` - inclusive range with self -&gt; [int(FractionalRounds)]
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-Minteger -pF</code>, 49 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>map$\+=(0,-1,1,-1,1)[(ord)-ord$F[++$i]],@F}{$\/=3
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/z83sUAlRttWw0BH11DHEExoRmvkF6Vo6gIJFbdobW2VzNhYHQe32mqVGH1b4///E5OQYTIq919@QUlmfl7xf11fUz0DQwMg7ZNZXGJlFVqSmWNbXJoLFMjMK0lNTy36r1uQ4wYA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<h4><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-M5.010 -MList::Util=reduce -Minteger -pF</code>, 53 bytes</h4>

<pre class="lang-perl prettyprint-override"><code>reduce{$_=(ord$b)-ord$a;$\+=/2/?$_/-2:$_;$b}@F}{$\/=3
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/78oNaU0ObVaJd5WI78oRSVJUxdEJVqrxGjb6hvp26vE6@saWanEW6sk1Tq41VarxOjbGv//n5icnJSUlJj4L7@gJDM/r/i/rq@pnoGhAZD2ySwusbIKLcnMsYUYDhTLzCtJTU8t@q9bkOMGAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 12 bytes</h1>
<pre><code>⌊÷3/+⍜+₁◿₃⧈-
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_15_0-dev_1__ZiDihpAg4oyKw7czLyvijZwr4oKB4pe_4oKD4qeILQrijaTipJniiY0xIGYiYWJjYSIK4o2k4qSZ4omNwq8xIGYiYWNjYmJiYWEiCuKNpOKkmeKJjTAgZiJhYmNhY2JhIgrijaTipJniiY0yIGYiYWJjYWJjY2FiIgrijaTipJniiY0xIGYiYWJhYmFiYWJhYmFiYWJjYWJhYmFiYWJhYmFiYWIiCuKNpOKkmeKJjTEgZiJhYmNiY2EiCuKNpOKkmeKJjTEgZiJhYmNhYmNhY2IiCg==" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>⌊÷3/+⍜+₁◿₃⧈-
          ⧈-  # deltas
     ⍜+₁◿₃   # mod 3 under +1 (results in -1, 0, or 1)
   /+         # summed
⌊÷3           # floor divided by 3
</code></pre>
</div>
<div id="pu4" class="pu"><p>☾, 16 Chars (46 bytes)</p>
<p><a href="https://i.sstatic.net/OlXsVHM1.png" rel="noreferrer"><img src="https://i.sstatic.net/OlXsVHM1.png" alt="Solution" /></a></p>
<pre><code>󷺹󷹝ᴙᙧ1󷸻ꟿⴵ○􋐴○-⨁→⹏3
</code></pre>
<p>(Note: ☾ uses a custom font, you can copy-paste the above code into the <a href="https://ganer.xyz/moon/" rel="noreferrer">Web UI</a>)</p>
<p><a href="https://i.sstatic.net/XYlwzecg.png" rel="noreferrer"><img src="https://i.sstatic.net/XYlwzecg.png" alt="Diagram" /></a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, 113 bytes</h1>
<pre><code>{for(j=1;++i&lt;length($0);){x=substr($0,i,2);x~&quot;ab&quot;||x~&quot;bc&quot;||x~&quot;ca&quot;?j++:0;x~&quot;cb&quot;||x~&quot;ac&quot;||x~&quot;ba&quot;?j--:0}}$0=int(j/3)
</code></pre>
<p><a href="https://tio.run/##LcndDkAgAEDhd2ld1GLCXWmepZqfYmzK2MKrh3F1dvbJbYgxtPOCrMg5IaYam6nzPYIUcxx24Vbl/PJsYpIC8/0CUoHjeKr0Vy1BbQlh9EX9o/xRvZimjJ4npMJMHtmsxDHe" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
<p>This will implicitly ignore double characters. I feel like there's a shorter trick somewhere, but my test haven't panned out.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://agda.readthedocs.io/en/latest/language/cubical.html" rel="noreferrer">Cubical Agda</a>, 1134 bytes</h1>
<p>Uses Agda 2.6.4.3, the <a href="https://github.com/agda/cubical/" rel="noreferrer">cubical</a> library 0.7 and the <a href="https://github.com/agda/agda-stdlib" rel="noreferrer">standard library</a> 2.0.</p>
<pre><code>{-# OPTIONS --cubical #-}
open import Cubical.Data.Int
open import Cubical.Data.Int.Divisibility
open import Cubical.Data.Nat
open import Cubical.Foundations.Everything
open import Data.List
open import Data.List.NonEmpty as L⁺

data 𝟛 : Type where
  a b c : 𝟛

data △ : Type where
  inc : 𝟛 → △
  ab : inc a ≡ inc b
  bc : inc b ≡ inc c
  ca : inc c ≡ inc a

infix 40 _⇒_
_⇒_ : (x y : 𝟛) → inc x ≡ inc y
a ⇒ a = refl
a ⇒ b = ab
a ⇒ c = sym ca
b ⇒ a = sym ab
b ⇒ b = refl
b ⇒ c = bc
c ⇒ a = ca
c ⇒ b = sym bc
c ⇒ c = refl

🏃 : ∀ s → inc (L⁺.head s) ≡ inc (L⁺.last s)
🏃 s with snocView s
... | ys ∷ʳ′ y = go ys
  where
    go : ∀ ys → inc (L⁺.head (ys L⁺.∷ʳ y)) ≡ inc y
    go [] = refl
    go (v ∷ vs) = v ⇒ _ ∙ go vs

🧬 : △ → Type
🧬 (inc _) = ℤ
🧬 (ab i) = sucPathℤ i
🧬 (bc i) = sucPathℤ i
🧬 (ca i) = sucPathℤ i

_/3 : ℤ → ℤ
n@(pos _) /3 = quotRem 3 n (snotz ∘ injPos) .QuotRem.div
n@(negsuc _) /3 = - quotRem 3 (- n) (snotz ∘ injPos) .QuotRem.div

d : List⁺ 𝟛 → ℤ
d s = subst 🧬 (🏃 s) 0 /3
</code></pre>
<p>A straightforward <a href="https://en.wikipedia.org/wiki/Winding_number" rel="noreferrer">winding number</a> computation, slightly complicated by the fact that the string doesn't have to start and end on the same character.</p>
<p>We define the triangle as a <a href="https://ncatlab.org/nlab/show/higher+inductive+type" rel="noreferrer">higher inductive type</a> generated by three points and three paths, as well as a <a href="https://en.wikipedia.org/wiki/Covering_space" rel="noreferrer">covering space</a> with fibre <a href="https://en.wikipedia.org/wiki/Integer" rel="noreferrer">ℤ</a> that looks like a &quot;triple helix&quot;:</p>
<p><a href="https://i.sstatic.net/IxA18lqW.png" rel="noreferrer"><img src="https://i.sstatic.net/IxA18lqW.png" alt="triple helix cover of a triangle" /></a></p>
<p>To get the degree/winding number of a string of vertices, we transport 0 along a path in the triangle generated by taking the &quot;shortest&quot; path from each vertex to the next, and divide the resulting integer by 3 <em>towards zero</em>.</p>
<p>There is no compiler for Cubical Agda (yet!), but we can check that the test cases compute correctly:</p>
<pre><code>open import Agda.Builtin.Char
open import Agda.Builtin.FromString
open import Agda.Builtin.String
open import Data.Bool
open import Data.List.Effectful as List
open import Data.Maybe
open import Data.Maybe.Effectful as Maybe

parse1 : Char → Maybe 𝟛
parse1 'a' = just a
parse1 'b' = just b
parse1 'c' = just c
parse1 _   = nothing

parse : List Char → Maybe (List⁺ 𝟛)
parse s = mapA parse1 s &gt;&gt;= fromList
  where open List.TraversableA Maybe.applicative

instance
  IsString-vertices : IsString (List⁺ 𝟛)
  IsString-vertices .IsString.Constraint s = T (is-just (parse (primStringToList s)))
  IsString-vertices .IsString.fromString s ⦃ j ⦄ = to-witness-T _ j

_ : d &quot;abca&quot; ≡ 1
_ = refl
_ : d &quot;bcab&quot; ≡ 1
_ = refl
_ : d &quot;cabc&quot; ≡ 1
_ = refl
_ : d &quot;accbbbaa&quot; ≡ -1
_ = refl
_ : d &quot;abcacba&quot; ≡ 0
_ = refl
_ : d &quot;abcabcab&quot; ≡ 2
_ = refl
_ : d &quot;abababababababcababababababab&quot; ≡ 1
_ = refl
_ : d &quot;abcbca&quot; ≡ 1
_ = refl
_ : d &quot;abcabcacb&quot; ≡ 1
_ = refl
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 50 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,*s:int(sum(-(a+~(a:=b))%3-1for b in s)/3)
</code></pre>
<p><a href="https://tio.run/##VYy9DsIwDIT3PoUXJLu0BdQFReqbsNhpKyKRHyVhYOHVQzIggXy@u0@yHF757t18DbHsy6082MrKwEOflHEZ09PiiHx8I6tFiA7zeNl9BAHjINFpptIwNbQcMOU41TVhAB82h2ci1QGE2J7t2Kdpc9qvGxJRYdHcsZZqtX2zqZbf0f/YtUutRYT5Aw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>-5 bytes thanks to Neil</p>
<p>-5 bytes thanks to Albert.Lang</p>
<p>Port of Arnauld's JavaScript answer.</p>
<p>Alternative solution:</p>
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 69 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:int(sum('aabbccabca'.count(x+y)-1for x,y in zip(s,s[1:]))/3)
</code></pre>
<p><a href="https://tio.run/##VY3NCsIwDMfve4rc1uCcjt0GPsn0kESLBdeWdoPVl6/tQVDy9U9@IfFpfTo7Zn255hctfCeIk7GrituiWiJmEWKhthe3lfF@SHgctAuwdwmMhbfxKnZxHqYb4mnEXFmsZKFC1tCXML4D5x9WnRGnBsCH@kKriJjr9YaESyrqW6sX8Wvy3zZ1U4SZiT4" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>13</s> 11 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÇÔ¥3%É·&lt;O3÷
</code></pre>
<p>-2 bytes porting <a href="https://codegolf.stackexchange.com/a/273177/52210"><em>@LuisMendo</em>'s MATL answer</a>, so make sure to upvote that answer as well!</p>
<p>Input as a string.<br />
(If we're allowed to take the input as a list of codepoint-integers, the leading <code>Ç</code> can be removed for -1 byte.)</p>
<p><a href="https://tio.run/##yy9OTMpM/f//cPvhKYeWGqse7jy03cbf@PD2//8Tk5KTkoEEAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeX/w@2Hpxxaaqx6uPPQdht/48Pb/@v8j1ZKTEpOVNJRApJJQApIJgOpxOTkpKSkRJAESD45CcaCKktMQobJqFyIUoixUD3JSTCTwIZDTQDpS4ZbAdcGdEEsAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Ç           # Convert the (implicit) input-string to a list of codepoint-integers
 Ô          # Connected uniquify it to remove non-moving cases
  ¥         # Pop and get the forward-differences (deltas) of this list
   3%       # Modulo-3 each difference
     É      # Modulo-2 each of those
      ·&lt;    # Double and subtract 1 to convert the 0s to -1s (and 1s remain 1s)
        O   # Sum this list of 1s and -1s
         3÷ # Integer-divide it by 3
            # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 9 bytes</h1>
<pre><code>Ç¥&gt;3%&lt;O3÷
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m73MwDQxyTB1wYKlpSVpuhZrDrcfWmpnrGrjb3x4-5LipORiqMSCFYnJyUlJSYmJED4A" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>Ç¥&gt;3%&lt;O3÷
Ç           # Convert each element in the input to its ASCII value
 ¥          # Calculate the deltas
  &gt;         # Increment each element by 1
   3%       # Take each element modulo 3
     &lt;      # Decrement each element by 1
      O     # Sum the elements
       3÷   # Integer divide by 3
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer" title="MATL – Try It Online">MATL</a>, 13 bytes</h1>
<pre><code>dXzI\oEqsI/Zo
</code></pre>
<p><a href="https://tio.run/##y00syfn/PyWiyjMm37Ww2FM/Kv//f/XEpOREdQA" rel="nofollow noreferrer">Try it online!</a> or <a href="https://tio.run/##y00syfmf8D8losozJt@1sNhTPyr/v0vIf/XEpOREdS51IJkEpIBkMpBKTE5OSkpKBEmA5JOTYCyossQkZJiMyoUohRgL1ZOcpA4A" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<pre><code>d    % Implicit input. Consecutive differences (of ASCII codes)
Xz   % Remove zeros
I\   % Modulo 3 (element-wise)
o    % Modulo 2 (element-wise)
E    % Times 2 (element-wise)
q    % Minus 1 (element-wise)
s    % Sum of all values
I/   % Divide by 3
Zo   % Round towards 0. Implicit display
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Google Sheets, 100 bytes</h1>
<pre><code>=sort(let(a,mid(A1,row(A:A),2),int(sum(countif(a,{&quot;ab&quot;,&quot;bc&quot;,&quot;ca&quot;})-countif(a,{&quot;ba&quot;,&quot;cb&quot;,&quot;ac&quot;}))/3)))
</code></pre>
<p>Put the string in cell <code>A1</code> and the formula in <code>B1</code>.</p>
<p>Counts instances of advancing and regressing letter pairs and divides by 3 à la <a href="https://codegolf.stackexchange.com/a/273164/119296">Jonathan Allan's answer</a>.</p>
<p><a href="https://i.sstatic.net/oT5EuzEA.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/oT5EuzEA.png" alt="screenshot" /></a></p>
</div>
<div id="pu12" class="pu"><h1>JavaScript (ES6), 38 bytes</h1>
<p><em>Straightforward formula</em></p>
<p>Expects an array of ASCII codes.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(t=c=&gt;t=-~t-(a+4-[a=c])%3)|t/3
</code></pre>
<p><a href="https://tio.run/##pdLBCsIwDAbgu08xBkKLtFXntTvsNcYOSWxFmevYqifx1WvFix62CktOuXwkP7nAHUYazr0XnTuaYHUAXYK8Qs@8Jl16LZ5eMNgcRA2aGr4u@MOrIpDrRtca2boTs6yWUlY3a83AckCCnDecZ5OlVLZbTQsRwGVCBGiZAIR/XCHmCUJEmGOSRIwisUgktgkhkWcU9rPCd9Pv@GFTWSKlfuIthBc" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 39 bytes</h1>
<p><em>Chained modulos on ASCII code concatenation</em></p>
<p>Expects an array of ASCII codes.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(t=c=&gt;t=~-t+(a+[a=c])%80%3)|t/3
</code></pre>
<p><a href="https://tio.run/##pdKxDoIwEAbg3acgJCRtCAVlcSmDr0EY7s7WaJASqE7GV681LjrQmnA33fLl7s9d4A4zTefRFoM5KqelA9mAuMLIrCTZWPksbM4gb0FSx7N9ldX8YcvakRlm0yvRmxPTrBVCHG5aq4mlgAQp7zhPFqssk@1mWfAArhM8QOsEIPzjiiJMECJCiIkSPorIIp6oIkIkTy/sgsJ30@/4YWNZIsV@4i24Fw" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Method</h3>
<p>Move types are identified by computing the concatenation of the ASCII codes of the previous and current characters and reducing it modulo <span class="math-container">\$80\$</span> and modulo <span class="math-container">\$3\$</span>. This gives <span class="math-container">\$0\$</span> for <em>counter-clockwise</em>, <span class="math-container">\$1\$</span> for <em>no move</em> and <span class="math-container">\$2\$</span> for <em>clockwise</em>.</p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: center;">previous char.</th>
<th style="text-align: center;">current char.</th>
<th style="text-align: center;">concat. of ASCII codes</th>
<th style="text-align: center;">mod 80</th>
<th style="text-align: center;">mod 3</th>
<th style="text-align: center;">move type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">a</td>
<td style="text-align: center;">a</td>
<td style="text-align: center;">9797</td>
<td style="text-align: center;">37</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">no move</td>
</tr>
<tr>
<td style="text-align: center;">a</td>
<td style="text-align: center;">b</td>
<td style="text-align: center;">9798</td>
<td style="text-align: center;">38</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">clockwise</td>
</tr>
<tr>
<td style="text-align: center;">a</td>
<td style="text-align: center;">c</td>
<td style="text-align: center;">9799</td>
<td style="text-align: center;">39</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">counter-clockwise</td>
</tr>
<tr>
<td style="text-align: center;">b</td>
<td style="text-align: center;">a</td>
<td style="text-align: center;">9897</td>
<td style="text-align: center;">57</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">counter-clockwise</td>
</tr>
<tr>
<td style="text-align: center;">b</td>
<td style="text-align: center;">b</td>
<td style="text-align: center;">9898</td>
<td style="text-align: center;">58</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">no move</td>
</tr>
<tr>
<td style="text-align: center;">b</td>
<td style="text-align: center;">c</td>
<td style="text-align: center;">9899</td>
<td style="text-align: center;">59</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">clockwise</td>
</tr>
<tr>
<td style="text-align: center;">c</td>
<td style="text-align: center;">a</td>
<td style="text-align: center;">9997</td>
<td style="text-align: center;">77</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">clockwise</td>
</tr>
<tr>
<td style="text-align: center;">c</td>
<td style="text-align: center;">b</td>
<td style="text-align: center;">9998</td>
<td style="text-align: center;">78</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">counter-clockwise</td>
</tr>
<tr>
<td style="text-align: center;">c</td>
<td style="text-align: center;">c</td>
<td style="text-align: center;">9999</td>
<td style="text-align: center;">79</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">no move</td>
</tr>
</tbody>
</table></div>
<h3>Search code</h3>
<p>The following code was used to brute-force the modulo values.</p>

<pre class="lang-javascript prettyprint-override"><code>let A = [ 97, 98, 99 ];
for(let m0 = 1; m0 &lt; 1000; m0++) {
  for(let m1 = 1; m1 &lt;= m0; m1++) {
    if(A.every(p =&gt;
      A.every(c =&gt; {
        let r = p - c ? c == p + 1 || c == 97 &amp;&amp; p == 99 ? 1 : -1 : 0;
        let v = (p + [c]) % m0 % m1 - 1;
        return v == r;
      })
    )) {
      console.log(m0, m1);
    }
  }
}
</code></pre>
<p><a href="https://tio.run/##VY/BCsIwEETv/Yq5KAm1kpw01ih@h3iQGEWpTYm1INpvr7tqCwY2mcy@DJvLvtnfXDxXdVaGg@@6wtfYwGILM5vAzKkMdnlyDFFw76qoqXM@l9BKKZZpKvFMgAHSP0hjaanPqmeA81Fspr7x8SEq2NXHA3rLkfUDeXFcpLQKGRzWVJYvKTRer@/NzDAek8fSEKKxQMabyv9iGooR/HTrdhIj/sKIR8xo1AGMvr7HklmL2Nut/Agph8FcKG@h8NMinMRVTShGfuE24Wq77g0" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 70 bytes</h1>
<pre><code>(.)\1+
$1
\B
#
+T`#`-`b#a|c#b|a#c
+`\w|#-|-#

..?(.)?
$1
^(-)?.*
$1$.&amp;
</code></pre>
<p><a href="https://tio.run/##VYs9CsMwDIV3XUNpcGIsyAkMXXKBjKbohw5ZOpRCF9/dkZOlRQ/0Pfje@/nZX9JuYeUWaCpLhGGBcgeEuDFyYkWphloFDSKXb8VUEwIQZR/krj9CmjLNjgONrYmagJipqjh4M71@j8Pv2X/t2jm/bNMD" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>(.)\1+
$1
</code></pre>
<p>Deduplicate consecutive letters.</p>
<pre><code>\B
#
</code></pre>
<p>Insert <code>#</code>s between pairs of letters.</p>
<pre><code>+T`#`-`b#a|c#b|a#c
</code></pre>
<p>Change <code>#</code>s to <code>-</code>s where the letters are anticlockwise.</p>
<pre><code>+`\w|#-|-#

</code></pre>
<p>Delete the letters and cancel out adjacent <code>#</code>s and <code>-</code>s.</p>
<pre><code>..?(.)?
$1
</code></pre>
<p>Integer divide by <code>3</code>.</p>
<pre><code>^(-)?.*
$1$.&amp;
</code></pre>
<p>Convert to decimal.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 22 bytes</h1>
<pre><code>﹪%d∕ΣＥΦθκ⊖﹪⊕⁻℅ι℅§θκ³¦³
</code></pre>
<p><a href="https://tio.run/##TUxBCgIxEPtKWRBGqCePngQR9rAo@IJuZ8DB2anWdvH3Y0UWDYGEhCReQ44piNk5sxYYElZJ0K2w8@7AMyPBpU4whDscWQpleHh3W7eSYqaJtBAuq17/Itb6hFNG1iDAbbD4fekV6fX9afBu@5OdWYjjh2O0zSxv" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>       θ                Input string
      Φ κ               Filter out first letter
     Ｅ                  Map over remaining letters
              ι         Current letter
             ℅          Ordinal
            ⁻           Minus
                §θκ     Previous letter
               ℅        Ordinal
           ⊕            Incremented
          ﹪             Modulo
                   ³    Literal integer `3`
         ⊖              Decremented
    Σ                   Take the sum
   ∕                    Divide by
                     ³  Literal integer `3`
﹪                       Format as string using
 %d                     Truncate to integer
                        Implicitly print
</code></pre>
<p>17 bytes if (as in all of the examples so far) the input can be assumed to start with <code>a</code>:</p>
<pre><code>ＦＳＭ⊖﹪⁻℅ιⅈ³→﹪%d∕ⅈ³
</code></pre>
<p><a href="https://tio.run/##NcyxCgIxEATQ3q8IB8IGYmXntddYBEUb29xmvVuIicRNfj/mBGGY6s3g6jImF1p7pqzgHN9F7pI5LqC1sqkSTISZXhSFPNjkS0hgOZYPXLLn6AKwNurRuVHHrU43XlbR4@7ab@Q/GfZ@MGriyp6g6x/WY2sO5y0ztkMNXw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＦＳ
</code></pre>
<p>Loop over the characters of the input string.</p>
<pre><code>Ｍ⊖﹪⁻℅ιⅈ³→
</code></pre>
<p>Subtract the current position from the character's ordinal, reduce modulo <code>3</code>, subtract <code>1</code>, and add that to the current position.</p>
<pre><code>﹪%d∕ⅈ³
</code></pre>
<p>Truncating divide the current position by <code>3</code>.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.rust-lang.org" rel="noreferrer">Rust</a>, <del>67</del> 66 bytes</h1>
<pre class="lang-rust prettyprint-override"><code>|a|a[1..].iter().fold((0,a[0]%3),|(b,c),d|(b-(c+!d)%3-1,*d%3)).0/3
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VVBLbsIwEFWXeNUjGEsgm9ppSDYofBbtHbqJIuQ4thoRbOQ4ZZHkJN2waA9FT1NHCAQea57ePM1o5n3_2KZ25yhFjMmidKXRiEIUhdF8QPY-ZPMlrarMkYlPKXb12iiFsvNYabjnpcYEtpV0UCVK42laxlFG2MbD-rdxii3Obx3veDoPgiwonbSYBMpUBcYh5WmYTWJCO5xTQWjhkWHxMi7IJGZzOiu8SILwNb5M-nt6XgJlLHSydlvBawlLDVMwyhHPBUeQ13CaNouMAuifr4qcI3rVH8jwr-w-xCO9NQzz75tFjkAGWzA62FK7So8xUrjtybrtvWW1K5KkdjZJlDX7rd9-gW9Lk6DRR8sPmFCo8PRWv7qz91K362a74R7vIwmEqSopXJKsPqRYbTcbTAhZgh70F2NOpwv-Aw" rel="noreferrer">Attempt This Online!</a></p>
<p>Now handles repeats</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/273152/">273152</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




