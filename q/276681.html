<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276681</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>008</td><td>Vyxal</td><td>241116T005055Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276699#276699">emanresu</a></td></tr>
<tr d-ix="1"><td>036</td><td>Haskell + hgl</td><td>241120T185245Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276763#276763">Wheat Wi</a></td></tr>
<tr d-ix="2"><td>nan</td><td>Scala 3</td><td>241116T033427Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276700#276700">138 Aspe</a></td></tr>
<tr d-ix="3"><td>189</td><td>C# .NET Core</td><td>241118T223647Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276740#276740">Pepik</a></td></tr>
<tr d-ix="4"><td>070</td><td>APL+WIN</td><td>241120T114624Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276751#276751">Graham</a></td></tr>
<tr d-ix="5"><td>124</td><td>C++ clang</td><td>241118T182557Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276735#276735">ioveri</a></td></tr>
<tr d-ix="6"><td>022</td><td>Pip r</td><td>241119T192347Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276745#276745">DLosc</a></td></tr>
<tr d-ix="7"><td>030</td><td>Uiua</td><td>241119T030549Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276741#276741">ErikDaPa</a></td></tr>
<tr d-ix="8"><td>050</td><td>Perl 5 F</td><td>241115T210837Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276695#276695">Xcali</a></td></tr>
<tr d-ix="9"><td>012</td><td>05AB1E</td><td>241118T085917Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276729#276729">Kevin Cr</a></td></tr>
<tr d-ix="10"><td>079</td><td>Python + NumPy</td><td>241116T073709Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276701#276701">Albert.L</a></td></tr>
<tr d-ix="11"><td>016</td><td>Japt</td><td>241115T173018Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276688#276688">Shaggy</a></td></tr>
<tr d-ix="12"><td>092</td><td>Ruby</td><td>241115T172048Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276686#276686">Jordan</a></td></tr>
<tr d-ix="13"><td>094</td><td>R</td><td>241117T045504Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276716#276716">Eonema</a></td></tr>
<tr d-ix="14"><td>079</td><td>Ruby</td><td>241117T004341Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276715#276715">Level Ri</a></td></tr>
<tr d-ix="15"><td>069</td><td>JavaScript ES6</td><td>241115T211329Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276696#276696">Arnauld</a></td></tr>
<tr d-ix="16"><td>122</td><td>Python</td><td>241115T181150Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276690#276690">movatica</a></td></tr>
<tr d-ix="17"><td>026</td><td>Charcoal</td><td>241115T170848Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276684#276684">Neil</a></td></tr>
<tr d-ix="18"><td>018</td><td>K ngn/k</td><td>241115T224747Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276698#276698">ovs</a></td></tr>
<tr d-ix="19"><td>014</td><td>Jelly</td><td>241115T171040Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276685#276685">Jonathan</a></td></tr>
<tr d-ix="20"><td>097</td><td>Retina</td><td>241115T170507Z</td><td><a href="https://codegolf.stackexchange.com/questions/276681/count-the-fish-in-a-school/276683#276683">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 8 bytes</h1>
<pre><code>C&lt;v¦+3Ḋ∑
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJQIiwiIiwiQzx2wqYrM+G4iuKIkSIsIiIsIltbMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyXSwgWzYwLCA2MiwgNjAsIDMyLCAzMiwgMzIsIDMyLCA2MCwgNjIsIDYwLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgNjAsIDYyLCA2MCwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjJdLCBbMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgNjIsIDYwLCA2MiwgNjAsIDYyLCA2MCwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCA2MCwgNjIsIDYwXSwgWzMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgNjAsIDYyLCA2MCwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgNjAsIDYyLCA2MF0sIFszMiwgNjIsIDYwLCA2MiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyXSwgWzYyLCA2MCwgNjIsIDMyLCAzMiwgNjAsIDYyLCA2MCwgNjAsIDYyLCA2MCwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgNjAsIDYyLCA2MCwgNjIsIDYwLCA2MiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyXSwgWzMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgNjIsIDYwLCA2MiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCA2MCwgNjIsIDYwXSwgWzMyLCA2MiwgNjAsIDYyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCA2MCwgNjIsIDYwLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYwLCA2MiwgNjAsIDMyLCAzMiwgMzIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjIsIDMyLCAzMiwgMzIsIDYyLCA2MCwgNjJdXSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>I/O as a matrix of charcodes. Inspired by <a href="https://codegolf.stackexchange.com/a/276698/100664">ovs's K answer</a> (and then backported to that to save two bytes)</p>
<pre><code>       ∑ # Over each line, sum the results of
C&lt;       # For each number, check if it's not a space
C        # by checking if if casting it to a char
 &lt;       # results in a larger value - ' ' &lt; '3', '&lt;'/'&gt;' &gt; '6'
  v¦     # Take the cumulative sum of these
    +    # Add to the original charcodes
     3Ḋ  # And check if it's divisible by 3
</code></pre>
<p>As to why this works, here's an example:</p>
<ul>
<li>Given <code>&gt;&lt;&gt;&gt;&lt;&gt; &lt;&gt;&lt;  </code> (<code>[62 60 62 62 60 62 32 60 62 60 32 32]</code>)</li>
<li>Mask of nonspaces i.e. fish characters: <code>[1 1 1 1 1 1 0 1 1 1 0 0]</code></li>
<li>Cumulative sum of that: <code>[1 2 3 4 5 6 6 7 8 9 9 9]</code> (modulo 3: <code>[1 2 0 1 2 0 0 1 2 0 0 0]</code>)
<ul>
<li>First char of fish -&gt; 1 (modulo 3), second char -&gt; 2, last char -&gt; 0, space -&gt; 0</li>
</ul>
</li>
<li>input charcodes modulo 3: <code>[2 0 2 2 0 2 2 0 2 0 2 2]</code>
<ul>
<li><code>&gt;</code> -&gt; 2, <code>&lt;</code> -&gt; 0, <code> </code> -&gt; 2</li>
</ul>
</li>
<li>Add these together: <code>[0 2 2 0 2 2 2 1 1 0 2 2]</code> (modulo 3). The only way this will result in a 0 is if:
<ul>
<li>a <code>1</code> from the first char of a fish is added to a 2 from a <code>&gt;</code> i.e. tail of rightwards fish</li>
<li>a <code>0</code> from the last char of a fish is added to a 0 from a <code>&lt;</code> i.e. tail of a leftwards fish</li>
</ul>
</li>
<li>Check divisibility by 3: <code>[1 0 0 1 0 0 0 0 0 1 0 0]</code> i.e. fish positions</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a> + <a href="https://www.gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 36 bytes</h1>
<pre><code>ca&quot;1&quot;&lt;&lt;tx&lt;m(gkY$rX&quot;&gt;{1_&lt;&gt;|&lt;&gt;&lt;{1_|.&quot;)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYubatm2yYlKhko2NiUVNrka6dmRKkURSnbVhvE2djU2djZARo2ekiZUdWBuYmaegq1CSj6XgkJBkYKKgka2QrSSnY0dECnpKCkAdSgoKMUqWFkp-GQWlyh45pVowpSCVALlISrBtI1SLMTgBQsgNAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<ul>
<li><code>rX&quot;&gt;{1_&lt;&gt;|&lt;&gt;&lt;{1_|.&quot;</code> regex to replace the tails with <code>1</code>s.</li>
<li><code>tx</code> transpose</li>
<li><code>ca&quot;1&quot;</code> count the number of <code>1</code>s in each row (previously columns).</li>
</ul>
<h1>No parser, <s>37</s> 38 bytes</h1>
<pre><code>cn by3&lt;&lt;tx&lt;m(zwp^.m Or~&lt;cna&quot; &quot;&lt;&lt;pxx)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TYzNCoJAHMTvPsWwRBSkFy8d_nrpXhLdwmDVtcSPtXUl7dCLdPESPZNvk6REMDDD_IZ5vi-8SkWWdf0hyUupNK41z5I4ERE8JbI6EsYEvF-wPK4qYe3FWTSGaWIrNWQBriVaoY2gteEgDlrYr1rH5rqfp05YYOiJdEP54n4rT1aOnXpQWHAGRlQ2zXJab3KeFMNDJA2gVJghxZG55A5iKwZyCWD-PxyqEX6dmD9edd3oHw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<ul>
<li><code>pxx</code> get non-empty prefixes</li>
<li><code>cna&quot; &quot;</code> count the number of non-spaces in each prefix.</li>
<li><code>m Or</code> convert characters of the original list to code points.</li>
<li><code>zwp</code> add pairwise to the original list of code points.</li>
<li><code>m</code> map over each row</li>
<li><code>tx</code> transpose</li>
<li><code>cn by3</code> count the number of entries in each row divisible by 3.</li>
</ul>
<h1>Parser no regex, 47 bytes</h1>
<pre><code>ca&quot;1&quot;&lt;&lt;tx&lt;m(gkY$on(hh=#+)cx3&quot;&gt;&lt;&gt;&lt;&gt;&lt; &quot;&quot;1000010&quot;)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY1BToQwGIX3nOKlzqJkwAyZjZkUEjcmJsaMcWHUzKIDRRoKRebHjF7FDRvjETzL3EYKQ9v0pf3f-973byEPpTKmP_3pqrEt4b2TRudaZdi2ynSZ8s6DrReGuLcEW0OSxacij8cXSx-bDfi1IdXWkvSHQh7gRTegYEZc3liTyb1RIB9xAi4RJti7K0fqOyXISeZfnOEx0iOEEPh68tLjenw_gq9d621N_k9HeXh1iso4lSxiQtBRVPytfF7YmheFYwwxlgi3wVi0Gla0YnPwoZK6HqiZ9YCmxQK8xKvzD4cFDC4GtnN9d_pAY-lsdc4R7JxTBdtN4L6f9B8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h1>Reflection</h1>
<p>This is ok. I'm a little disappointed by the fact the parser-no-regex version is so much longer than the no parser version when the shortest solution is the regex version. I want parsers to be more efficient than they are. It would even help regex parser answers. I don't really have a way to fix the thing I am frustrated with, but I have some thoughts in general:</p>
<ul>
<li><s>There should be a combined version of <code>gkY&lt;rX</code>. There's one for <code>gky&lt;rX</code> already, I just got a bit unlucky.</s> Turns out I already <em>implemented</em> this but forgot to export it. Very unlucky. Would have saved 3 bytes.</li>
<li>Map and then transpose seems to be a common operation for some reason. Should add a built-in for it.</li>
<li><code>pM</code> and <code>hd</code> should be combined</li>
<li><code>Wr</code> is great for making lists of strings, unless you want a space in one of the strings. Then the alternative is <code>Ln</code>, but newlines cost two bytes to write in strings. There should be an alternative that splits on some other character, and if I have any foresight I will make two of them.</li>
<li>There should be builtins for converting to and from binary <code>String</code>s. It would be cheaper to make <code>&quot;1000010&quot;</code> if I had one.</li>
<li>There should be a combined version of <code>m Or</code>.</li>
<li>There should be a function for cumulatively counting the number of values.</li>
</ul>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, <del>178</del> 161 bytes</h1>
<p>Saved 17 bytes thanks to @corvus_192</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=bVLLTtwwFJW69FdceWWrjIXaTTWMI7FoJRYjpKKuhlmYGScYbCfEN-0QypewgQX8E3wNTjIkASabe-7jHB_f-O4prJRV35_pgk6s8lmlMj0t8oCp2RwXge7Ric__qdLT5cuXX8YVeYnQckSFxgqncHVufCZ-60xvCMnPLvQKYa6MhxsCsNYpuJgwVWZhCodlqa4XJ1hGypJP4Y83CLKdBPirLBhfVNj1Y51SCpDMEth-A-zRGJBZMmvgNnxgbavN3Gd6jCNWxF0j1kg_NjLyNjtIk90-350wVEibRdpw6Fvlk0xreJfODjgYGXqje_WwV44bJv3y8wrH22cpG_0OzoW77CCjlLekImZoPRsTm84tIY1eOgXWFWVyoq8WRx6XHORjhenkx_NDkMlNM1bLAKGw8SXQU09Tq3CuCmZlQqPB_9EzFaVIjV8fWjtv3tuRZ5a7OONk4kRAVeJXZlLmuueo11LShsa_gbZBwz7n_CD2a2HCT1fgNa_bBtvHHOpI2rRqRia1WOWVxwgl57ed0YdtvL_v4is" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>s=&gt;{val z=s split &quot;\n&quot;flatMap(l=&gt;&quot;&gt;&lt;&gt;|&lt;&gt;&lt;&quot;.r.findAllMatchIn(l)map(m=&gt;m.start+(if(m.matched==&quot;&lt;&gt;&lt;&quot;)2 else 0)));if(z.isEmpty)z else(0to z.max)map(i=&gt;z.count(i==))}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=dVTNbtQwEL5w8lOMcnKEsCq4oNXuSj1wqMRKVRGnUiGz6ywGx4niSdVqyZNw6QUeiqfBf7HdNs3F45nvm5lvYvv3X7Pnir97ePgzYvPm_b9XXLZ9NyB4PxtRKtZy3H-X-siuxFHcEdJ9-yH2CDsuNZwIwEE00NoN5cPRrOB8GPj99SccLOWmXsFnLRE2HglwyxVI3Y8Y4tZfVRXAdr2F-GUzWaVB1tu1M-PyhBW9DvecbteCZe0QsD6SYEUjMzanJst9PqqQPcTvLC0XnT3P0viGl_IsmLmRHCt0JTNlthMmafh9ZyTKThs7-kbqwyVHFIO-nN20-Dt1Yg3CjMr9xX03aszglC1DuxHL3xuYrP0ZPLSqArS3O1SalnAXmUg8UYvN2eMVoSv4KA1eX2i8eXS4-kBxB8tK_2WnUbHBRw0zvZJIqy-6qlmjOO54DydQUgvY-Pm7vgKfufLnSu3c2b_Q1IFqexMcoc1ogJYZ5Pa-vAYqG6BtuC3iABvbgatew1sQygg4qyNp8uvEsHMSSs0vTbcQuyjcVU5gJs2Htsf72gNpqOo7OMUG3JxafjcXsmky2fojip4BdiVu1i9L_Znpm6dfnXCZpGaRQfdEpvDSxAdnfnj-Aw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>import scala.util.matching.Regex

object Main {
  def main(args: Array[String]): Unit = {
    val inputString = &quot;&quot;&quot;  &gt;&lt;&gt;        &gt;&lt;&gt;       &gt;&lt;&gt;      &gt;&lt;&gt;      &gt;&lt;&gt;
&lt;&gt;&lt;    &lt;&gt;&lt;            &gt;&lt;&gt;    &lt;&gt;&lt;    &gt;&lt;&gt;
 &gt;&lt;&gt;      &gt;&lt;&gt;     &gt;&lt;&gt;&lt;&gt;&lt;        &gt;&lt;&gt;&gt;&lt;&gt;   &lt;&gt;&lt;
    &gt;&lt;&gt;  &gt;&lt;&gt;        &lt;&gt;&lt;     &gt;&lt;&gt;    &lt;&gt;&lt;
 &gt;&lt;&gt;        &gt;&lt;&gt;         &gt;&lt;&gt;     &gt;&lt;&gt;       &gt;&lt;&gt;
&gt;&lt;&gt;  &lt;&gt;&lt;&lt;&gt;&lt;       &gt;&lt;&gt;  &lt;&gt;&lt;&gt;&lt;&gt;        &gt;&lt;&gt;   &gt;&lt;&gt;
   &gt;&lt;&gt;     &gt;&lt;&gt;        &gt;&lt;&gt;        &gt;&lt;&gt;    &lt;&gt;&lt;
 &gt;&lt;&gt;  &gt;&lt;&gt;       &lt;&gt;&lt;        &lt;&gt;&lt;      &gt;&lt;&gt;   &gt;&lt;&gt;&quot;&quot;&quot;

    val positions = findPatternPositions(inputString)
    val result = countPositions(positions)
    val outputString = result.mkString(&quot;&quot;)
    println(outputString)
  }

  def findPatternPositions(s: String): List[Int] = {
    val pattern = &quot;&gt;&lt;&gt;|&lt;&gt;&lt;&quot;.r
    s.split(&quot;\n&quot;).flatMap { line =&gt;
      pattern.findAllMatchIn(line).map { m =&gt;
        m.start + (if (m.matched == &quot;&lt;&gt;&lt;&quot;) 2 else 0)
      }
    }.toList
  }

  def countPositions(positions: List[Int]): List[Int] = {
    if (positions.isEmpty) List()
    else {
      val maxPosition = positions.max
      (0 to maxPosition).map { i =&gt;
        positions.count(_ == i)
      }.toList
    }
  }
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, 189 bytes</h1>

<pre class="lang-cs prettyprint-override"><code>int[]c(string f){var p=f.Split('\n');var t=new int[p.Max(s=&gt;s.Length)];foreach(var x in p)for(int m=0;m&lt;2;m++)foreach(Match n in Regex.Matches(x,m&gt;0?&quot;&lt;&gt;&lt;&quot;:&quot;&gt;&lt;&gt;&quot;))t[n.Index+m*2]++;return t;}
</code></pre>
<p><a href="https://tio.run/##lVFNT8MwDL3nV1i9rFlLVnYkbTmgHUAbQgyJw9ghdNkWqUlLkm5F0357SfYBExIHnDiOnWcnzivMVVFp3jVGqBVMP43lkqJLj4yF@vgVeuGtJc981ZRMj9pac2NEpQxFqG7eS1FAUTJj4ElXK80k2iFwcjoylllnNpVYwIQJFeLD6RHjxVjtr9KQQZDmKeRp7tXNACIYqY3QlZJcWfLIt@5xHKLv3AsJAHy2Vy@@ytH8s8qpyB9ZtBPKzuZFeHr1Eu82TEOdLcm0LoUNe2@qh6mP2UzxLXh4TSasDU2WGzLmamXXeE6XjgVWrEOPbB0KauxCoYODzBIq0yGVUYTPsAmzxRqUBzoeeEsOAW7CNpZ5cus/LrgJfLcY25ki92rB20j2h/MooprbRiuwdN@d@7xz9FUlJ69aWO4bOzVEHipHURAHMRShxhjTwy/t0R6hQR8lcRJfuzGMj7uz/VnP4@BBf9B9AQ" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>
<p>Full code:</p>
<pre class="lang-csharp prettyprint-override"><code>    
using System;
using System.Text.RegularExpressions;

public class Program
{
    public static void Main()
    {
        string r = &quot;&lt;&gt;&lt; &gt;&lt;&gt; &gt;&lt;&gt;&gt;&lt;&gt;&quot; + Environment.NewLine +
                          &quot;  &lt;&gt;&lt; &lt;&gt;&lt;     &gt;&lt;&gt;    &gt;&lt;&gt;&quot; + Environment.NewLine +
                          &quot; &lt;&gt;&lt; &lt;&gt;&lt;&quot; + Environment.NewLine;

        int[] c (string f)   
        {
            var p = f.Split('\n');
            int m = 0;

            foreach (var x in p)
                m = Math.Max(m, x.Length);

            var t = new int[m];

            foreach (var x in p)
            {
                foreach (Match n in Regex.Matches(x, &quot;&lt;&gt;&lt;&quot;))
                    t[n.Index + 2]++;
                foreach (Match n in Regex.Matches(x, &quot;&gt;&lt;&gt;&quot;))
                    t[n.Index]++;
            }
            
            return t;
        }
        
        Console.WriteLine(string.Join(&quot;,&quot;, c(r)));
    }
}



<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu4" class="pu"><h1>APL+WIN, 70 bytes</h1>
<p>Prompts for school as a 2 dimension array.</p>
<pre><code>m←((i←(⍴i)÷3),3)⍴i←(n←v≠' ')/v←,j←⎕⋄+⌿(⍴j)⍴n\,(m[;1]='&gt;'),0,m[;,3]='&lt;'
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlyPWooz3tfy6QqaGRCSIf9W7J1Dy83VhTx1gTxAaJ5QGJskedC9QV1DX1y4AcnSwgATTjUXeL9qOe/SBNWSDVeTE6GrnR1oaxtup26po6BjpAjo4xkGej/h9oEdf/NC5DBWOgQnU7Gzt1LjjPxs4GxDNWMDSCSgKRAlBUQQFEAhGIrwARh0CIbiNDqHpMqA4A" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C++ (clang)</a>, <s>191</s> 124 bytes</h1>

<pre class="lang-cpp prettyprint-override"><code>[](auto&amp;r,auto&amp;v){for(auto&amp;s:r)for(int i=0;i+2&lt;s.size();i++)v.resize(max(v.size(),s.size())),s[i]&gt;59?v[i+62-s[i]]++,i+=2:0;}
</code></pre>
<p><a href="https://tio.run/##NZD9asMgEMD/9ykOCkNJGkphg1XrHqSU4axNb0s0qHFlpc@eGdOecne/@9BTPQxr3SnbTiu0uhtPRqAL0RvVSzIGtC1Y1ZswKG0gxBMnaowOzrCH6XCkM7z4upjEbmfnl1DYeTYD2gi433CstiI0Af8MZRkqlhpvCvbqStMjUz9LWHYPeJSv7x/pgNXbdj3jsapqrPbb3YbfJ05W2A/OR@FNa66SzFf1Ci1l5EYgS37FPH7gyejovFhYgn8GcoeExMuM9TcvTSdXzHLCLK2JHVpDNdo6MA6@GcZw@fxS@odmLnX3on8v2Bkams7YNl4ok5tH@kx9nZ6@87D8yg4SA@3GKAQuOW/i6C1sOLlPUsi8QUhBZpV3XmSJPiCrkv8H" rel="nofollow noreferrer" title="C++ (clang) – Try It Online">Try it online!</a></p>
<p>Reduction thanks to jdt and ceilingcat</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-r</code>, 22 bytes</h1>
<pre><code>$+^gR`\S`*3{'&lt;Q@a?Rhh}
</code></pre>
<p>Takes input from stdin; requires it to be padded to a rectangle with spaces. <a href="https://ato.pxeger.com/run?1=m724ILNgWbSSbpFS7IKlpSVpuhbbVLTj0oMSYoITtIyr1W0CHRLtgzIyaiGSUDULbjGWKyjY2dgpQAGCCWehMrhs7GxAHCiFpg8qijCFC9McII2kGciGSIDFuOAKkdwEU41qB5rpKDqQ7UIS4QJzgfoRRsBEMMwBklxYDcLChBjHhe5wJIfCmXDDFSARAAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<pre class="lang-lisp prettyprint-override"><code>$+^gR`\S`*3{'&lt;Q@a?Rhh}
   g                    ; List of lines of stdin (-r flag)
    R                   ; In each line, replace
     `\S`*3             ; regex match of three non-space characters (guaranteed
                        ; to be a fish because only well-formed fish are present)
           {         }  ; with this callback function:
            '&lt;Q@a?      ;   If the fish starts with &lt;
                  Rh    ;   Reverse of h (001)
                    h   ;   Else, h (100)
  ^                     ; Split into a 2D matrix of characters
$+                      ; Sum (treating spaces as 0s)
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 30 bytes</h1>
<pre><code>+@0/+⬚0⊜(=-:@&gt;◿3+2\+≠@ .)⊸≠@\n
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_14_0-dev_2__JCAgID48PiAgICAgICAgPjw-ICAgICAgID48PiAgICAgID48PiAgICAgID48PgokIDw-PCAgICA8PjwgICAgICAgICAgICA-PD4gICAgPD48ICAgID48PgokICA-PD4gICAgICA-PD4gICAgID48Pjw-PCAgICAgICAgPjw-Pjw-ICAgPD48CiQgICAgID48PiAgPjw-ICAgICAgICA8PjwgICAgID48PiAgICA8PjwKJCAgPjw-ICAgICAgICA-PD4gICAgICAgICA-PD4gICAgID48PiAgICAgICA-PD4KJCA-PD4gIDw-PDw-PCAgICAgICA-PD4gIDw-PD48PiAgICAgICAgPjw-ICAgPjw-CiQgICAgPjw-ICAgICA-PD4gICAgICAgID48PiAgICAgICAgPjw-ICAgIDw-PAokICA-PD4gID48PiAgICAgICA8PjwgICAgICAgIDw-PCAgICAgID48PiAgID48PgorQDAvK-KsmjDiipwoPS06QD7il78zKzJcK-KJoEAgLiniirjiiaBAXG4K" rel="nofollow noreferrer">Try it online!</a>, inspired by <a href="https://codegolf.stackexchange.com/a/276698/123890">ovs's K solution</a></p>
<p><strong>Explanation:</strong></p>
<pre><code>+@0/+⬚0⊜(=-:@&gt;◿3+2\+≠@ .)⊸≠@\n
       ⊜(               )⊸≠@\n =&gt; split string by newlines
                    ≠@         =&gt; non-whitespace indexes
                +2\+           =&gt; accumulative addition starting at 2
              ◿3               =&gt; modulo 3
          -:@&gt;                 =&gt; subtract 62 (&gt;)
         =             .       =&gt; compare with original row
     ⬚0                        =&gt; fill 0s if needed
+@0/+                          =&gt; row addition and then stringify (optional)
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-F</code>, <s>57</s> 50 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/(&gt;)&lt;&gt;|&lt;&gt;&lt;/$1?100:aa1/ge;s/./$;[pos]+=$&amp;/ge}{say@
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/79YX8NO08auxsbORl/F0N7QwMAqMdFQPz3VulhfT1/FOrogvzhW21ZFDShUW12cWOnw/7@Cgp2NnQIUIJhwFjKDC2gwiAml0HRBRUHqMLUDaSRdQDZEAijGBVeG5BCYWoTRXNjdiWIDQoQLzANqQ1gKE8EwBuxgbOZgYSIcgpBD8hecCTf5X35BSWZ@XvF/XV9TPQNDg/@6eQA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 12 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ðÊ€ηOIÇ+3ÖøO
</code></pre>
<p>Similar as a bunch of other answers.</p>
<p>Takes the input as a list of lists of characters, including trailing spaces to make all lines the same length.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//8IbDXY@a1pzb7u95uF3b@PC0wzv8//@PjlZSUNIBYzsgtoHSCgQwsWqJUUeamlidaLhqGywq8clR4it85qK6jlr@tkOzlVhfIavHZQfCPJiLCbmMlNRByLXEhTMpYUmOK0mNAwWi0yc2XchhQmxsEjKHGiGDmXapHTbUVEtc6iDWNlJyFTFqiQjjWAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@mFFCUWlJSqVtQlJlXkpqikJlXUFpipaCkU2nLpeSYXFKamIMQ03N61LQm@NBKoJR/aQlU8P/hDYe7gOLntvsfWne4Xdv48LTDO/z/6xzaZv8/WklBwc7GTgEKEEw4C5kRk2djZwNiQyk0bVBRsEJMA4A0kjYgGyIBFAOqhqlDcgtMMcJwZFNRlCLboYDkWjAXqBFhL0wEwxyIo7GZhIWJ5BaEJJLn4Ey42Uo6CkoICiQMMQPiOJhjIUGEUIcJlWIB" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>ðÊ           # Check for each inner-most character in the (implicit) input-matrix
             # that it's NOT equal to a space &quot; &quot;
  €η         # Take the prefixes of each inner list of 0s/1s
    O        # Sum each inner-most prefix
     I       # Push the input-matrix again
      Ç      # Convert each character to its codepoint-integer
       +     # Vectorized add the values at the same positions
        3Ö   # Check for each whether it's divisible by 3
          ø  # Zip/transpose; swapping rows/columns
           O # Sum each inner list (the columns before the zip) together
             # (after which the resulting list of sums is output implicitly)
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 79 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda s:sum((cumsum((X:=c_[s].view(&quot;i4&quot;)%-8)&lt;0,1)+X)%3&gt;1,0)
from numpy import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVFLboMwEFW3PoWFFMmmBNnQRYSAfVbdRipVlRJQUINt8WmVs3QTqWrv1N6j-9rYiaEBxuM3v-fx-P1LHLs9Z6ePMsk--65crr7vD9v6ebeFbdT2NUJ5Xw_7Jkryp4f20X-tijfkVHcOXixXOCYexbcbvAhT6hEMyobXkPW1OMKqFrzpXEObl7yB-b5nL7BikIuCIYL9ptjuEPZbcag65GQsYw6OAHTXHoeJTrdBBwMomop1yC3RGnttIRLHOjnWR51-bn7TOAWUEAAkkALjNAZKSVEh7TVGQEhICKU0MAXXv-JSKVMNAISK3HwWXtAYAEmkoNn-VRmvyrsu112MKnRguNQ5bdTIOddSg_k-JydYDxgsPa1xnp7FtHRoeI5nBtpGbGx0rwu0zDQM5KClBHIf5h6qNRhKQrmCQD1HKLV-_j8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes a list of rows which are strings.</p>
<p>Or</p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + NumPy, 77 bytes (@emanresu A)</h3>
<p>assuming input lines are equal length.</p>
<pre class="lang-python prettyprint-override"><code>lambda s:sum((cumsum((X:=c_[s].view(&quot;i4&quot;))&gt;32,1)+X)%3&lt;1,0)
from numpy import*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVLNSsNAEAaPA77DEpDu1lj2x4OUJPcevBesSEwTGmx2l_wofRYvBdF30qdxN5umSdtkdv7n22FmP3_0rt4ouf_KwtV3U2d3D7-P27h4XceomldNgXHSFK1czsPk5al6nr3n6Qf28nuPkEhwn5HbJbkRAfMpgaxUBZJNoXcoL7Qq62kHmmSqRMmmkW8ol0jpVGJKZmUarzGZVXqb19hbyZX0yBzQdOErFLr0Y9AjgHSZyxpPM7wgfpXqcDLpnYq4q_Z_V9dREAGjFMAohlAQBWCZIRty3s7glApKGWO8Kzj_LZZNGXMAhCx49x3VXhsrYKCs0YmTus57RIFzHNfOoNAFWh_0iYOeDtnjO07QRxXDuwYeaE03wWGim8-41g7sItAF1cHBaeODRnu1B0fABDcLMMSNbPch7GkNS8Iczu2ahOHuWfwD" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>How?</h3>
<p>Using numpy is convenient here, because the array constructor pads strings to equal length (with zeros, so normally you wouldn't necessarily notice). The view cast to integer does roughly the same as ord in standard python; it also reveals the padding.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>24</s> <s>21</s> 16 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>Takes input as a 2D array of codepoints.</p>
<pre><code>Ëí+DËgHÃå+ÃÕËxv3
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;header=t8txIMtj&amp;code=y%2b0rRMtnSMPlK8PVy3h2Mw&amp;input=IiAgPjw%2bICAgICAgICA%2bPD4gICAgICAgPjw%2bICAgICAgPjw%2bICAgICAgPjw%2bCjw%2bPCAgICA8PjwgICAgICAgICAgICA%2bPD4gICAgPD48ICAgID48PgogPjw%2bICAgICAgPjw%2bICAgICA%2bPD48PjwgICAgICAgID48Pj48PiAgIDw%2bPAogICAgPjw%2bICA%2bPD4gICAgICAgIDw%2bPCAgICAgPjw%2bICAgIDw%2bPAogPjw%2bICAgICAgICA%2bPD4gICAgICAgICA%2bPD4gICAgID48PiAgICAgICA%2bPD4KPjw%2bICA8Pjw8PjwgICAgICAgPjw%2bICA8Pjw%2bPD4gICAgICAgID48PiAgID48PgogICA%2bPD4gICAgID48PiAgICAgICAgPjw%2bICAgICAgICA%2bPD4gICAgPD48CiA%2bPD4gID48PiAgICAgICA8PjwgICAgICAgIDw%2bPCAgICAgID48PiAgID48PiI" rel="nofollow noreferrer">Try it</a></p>
<pre><code>Ëí+DËgHÃå+ÃÕËxv3     :Implicit input of 2D array of codepoints
Ë                    :Map each D
 î+                  :  Interleave with, reducing each pair by addition
   DË                :    Map D
     g               :      Sign of difference with
      H              :        32
       Ã             :    End map
        å+           :    Cumulatively reduce by addition
          Ã          :End map
           Õ         :Transpose
            Ë        :Map
             x       :  Reduce by addition of
              v3     :    Divisible by 3?
</code></pre>
</div>
<div id="pu12" class="pu"><h2><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 92 bytes</h2>
<p>Takes an array of lines as input.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;a{h=Hash.new 0
a.map{_1.scan(/(&gt;&lt;&gt;)|&lt;&gt;&lt;/){h[$`.size+($1?0:2)]+=1}}
(0...a[0].size).map &amp;h}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsEiN9ulpSVpuhY3Y3TtEqszbD0SizP08lLLFQy4EvVyEwuq4w31ipMT8zT0Nexs7DRrbOxs9DWrM6JVEvSKM6tStTVUDO0NrIw0Y7VtDWtruTQM9PT0EqMNYsGymiATFNQyaqF2mBcouEVHcykBTQIiBaBZCgpKOlxKIBYQgcTAfIg8BCpxxcZCtC9YAKEB" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>95</s> 94 bytes</h1>
<p><em>-1 thanks to pajonk</em></p>
<pre class="lang-r prettyprint-override"><code>\(x)Reduce(\(v,m)v+`[&lt;-`(!1:max(nchar(x)),(m*attr(m,&quot;m&quot;))[-1,],1),gregexec(&quot;&lt;&gt;(&lt;)|(&gt;)&lt;&gt;&quot;,x),0)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVLLTsQgFE3cmPAVyOpehcTujCH9CLczmmkqHZtINZSZdOGfuKkxfpR-jUAfMO20i3t6OPfcU-Dzy_TflRQ_B1uJu9-nLXT4oJ4PpYItHLnG481uI8UOrrJ7XXTQlC-FcRrkoK8Law1ozjRD3IiMP_IM-d6ovepUCUzmIPEDcpQ54x3yWxym_F1cWtXaVorXurVASiCM0lzmdHwinFEKGCfOW_qvsSwaRzZIqfNeubiadDo8LDjOe8_KJNIkjxMW1ifqdFBkvHcgXHccPzErpzn-ObszcEq_iJ786AzjAILc7b-PxQIKCf3y5DZkjemHrTttXb8MCRJSvRnwJ03rhoYTR_pu6sZCFWgc70PfD_Uf" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Ungolfed:</p>
<pre><code>\(x) {
  Reduce(
    # for each vector of fish tail indices, increment the correct slots in the output 
    #   vector
    \(v,m) {
      v +
        # assigning 1's to the indices of fish tails in a vector of zeroes
        # (this works because the assignment form of [] silently returns the new vector
        `[&lt;-`(
          0*1:max(nchar(x)),
          # multiply match indices by match lengths so that zero-length matches 
          #   aren't included, and exclude row 1 (total match)
          # (this works since assigning to index 0 leaves the vector unchanged)
          (m*attr(m,&quot;m&quot;))[-1,],
          1
         )
    },
    # find the fish tails and return a list of integer vectors, where each vector is
    #   the indices of the fish tails
    gregexec(&quot;&lt;&gt;(&lt;)|(&gt;)&lt;&gt;&quot;,x),
    # initial value for `Reduce`
    0
  )
}
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>83</s> 79 bytes</h1>

<pre class="lang-none prettyprint-override"><code>-&gt;s{a=[c=x=0]*w=s=~/\n/
s.bytes{|i|c+=i/60
i&gt;10?a[(i-62+x+=1)%w]+=c%3/2:x=0}
a}
</code></pre>
<p><a href="https://tio.run/##JYtBCoMwFET3/xTBIrQNNj8RXBR/epA0ixgqZFNK06Ki9uppRObBDDPM@9tNKVKhW51hrW4Zg80yW8FgX3ZBAQeFWCNKKXOAnlKl4@zIeBoJ7XmgSD9xfwqIl276POK8hMVzCqJBCFrizZljqBrFR07yVA6Wky9roa75voJb04v1Jtr0Bw" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Function that takes a newline separated string as an argument and returns an array.</p>
<p>Assumes there is no line longer than the first line.</p>
<p><code>c</code> is a count of the number of <code>&lt;</code> and <code>&gt;</code> (characters over ascii 60) found. When we are at the middle character of a fish <code>c%3</code> reaches its max value of 2. The direction of the character (ascii 60 or 62) points toward the tail, and the appropriate adjacent column <code>a[x+1]</code> or <code>a[x-1]</code> is incremented.</p>
<p>The magic constant might be expected to be <code>-61</code>, based on the average of 60 and 62, but another 1 must be subtracted to compensate for the increment of <code>x</code>.</p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (ES6), 69 bytes</h1>
<p><em>-2 thanks to <a href="https://codegolf.stackexchange.com/users/76323/l4m2">@l4m2</a></em></p>
<p>Expects an array of arrays of characters (which may be of different lengths). Returns an array of integers.</p>

<pre class="lang-none prettyprint-override"><code>a=&gt;a.map(r=&gt;r.map((c,i)=&gt;b[i]=~~b[i]+(c==&quot;&lt;&gt;&quot;[a=c+3|-~a%3])),b=[])&amp;&amp;b
</code></pre>
<p><a href="https://tio.run/##bVBBbsMgELzzCgupESgJqpRjDbf2Azk6PhCCUyIHXHArVW39dRdsx5DWgJZhmdkduPAP7oRVTbvV5iT7ivacMk6uvEGWMjsAJDYKU3YsVEm7LmxrJCiFOYMFp2K9@952/GFXYrw50qLEq9Wxt/LtXVmJYOUgJlby04uq5f5TC/SISWv2rVX6jDBxTa1aBA/6oD2xMvaZi1fkMsqyL5Blwmhnaklqc0YVcpHuycHbQCwIIc63JxejNIIQ4yfwg3uWMwB88CvLWQ5C8Cukx@x0ADNMJ/Ddg3IaEc4oBcBLApy2P6opG3j/5WO/RDFeDI5vtMTIjRtLg2Wfdx1iBgyn8StS3vjqe@lgeKnOAoxG4l3yrhnOlX8B" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-none prettyprint-override"><code>a =&gt;                // a[] = input array
a.map(r =&gt;          // for each row r[] in a[]:
  r.map((c, i) =&gt;   //   for each character c at position i in r[]:
    b[i] =          //     update b[i]:
      ~~b[i] + (    //       coerce it to an integer in case it's still undefined
        c == &quot;&lt;&gt;&quot;[  //       test whether c is a fish tail:
          a =       //         update a:
            c + 3 | //           this gives 3 if c is a space (which forces the
                    //           test to fail and resets a to 3) or NaN otherwise
            -~a % 3 //           computes (a + 1) mod 3; if the result is 2, this
                    //           is the middle part of the fish (never a tail)
        ]           //       end of lookup
      )             //
  ),                //   end of inner map()
  b = []            //   start with b = []
) &amp;&amp; b              // end of outer map(); return b[]
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>142</s> <s>126</s> 122 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda s:[*map([m.start()+2*(m[0]&lt;'&gt;')for r in s for m in re.finditer(r'\S..',r)].count,range(max(map(len,s))))]
import re
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVFNToQwFI7bnqJh03bEhp-NMQyXcAksqgNaQwspnUS9ihsSo4fxBnoaX4EBdHhp877383198N4-2xf72Oj-vdrnH0dbXV1_v9ZC3R0E7m6ynRItzRTvrDCWsstoR1UWFAlJCasagw2WGnfYQeWgKXkl9UHa0lBD8lvOiW9Ywe-bo7a-EfqhpEo8Uydbl9rvGFiBpGobY4E9TvBz8WX2FfU8D-M0SfFkC5zRGqAkTRyc3D_WlHV953TwKxbgsQA5NLetBjn1LtJoe84_LywZNERAWx49Zc5khoG3dDbgMshSW33XDGdl-MO8a2tpKck1YQyh1kgNEeFPjdTDmjprYIVQG0teGEdhGMCJwIcBWOzuELgTw40iSEFjEHhsXGnfj_4X" rel="nofollow noreferrer">Attempt This Online!</a></p>
<ul>
<li>Input: list of strings</li>
<li>Output: list of integers</li>
</ul>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>40</s> <s>35</s> <s>28</s> 26 bytes</h1>
<pre><code>ＷＳＰ⭆ι⁺¬﹪⁺℅κＬ⁻…ι⊕λ ³Σ⊟ＫＤ⊕λ→
</code></pre>
<p><a href="https://tio.run/##bU/BbsMgDL3nK6yejJSddtuiXLpLpWaL1i@ICAqoFCJmNu3rGaFpSNf4gJ@f37MNl53jttMh/EilBeDBjJ5O5JQZkDFovCY1xorwSjbdiKqEVvsvfLeEje29tpjqD9cr02k8sxKOwgwksVEmNva/XIu9tMl6MNyJizAketQsSnewY1N@np6Tv2Abha0Q5zflBCdlDd57Snj5VIMkluI1BIC6qmGODBe0BkVVVxOc0z/XzE66R3vMK1fE10bkikW2OuSmzaOL7TvvNmSmSFW05aU35mFMOnhrzgbMh@Te6l8LzJPD07f@Aw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as a list of newline-terminated strings. Explanation: Now inspired by @Ausername's version of @ovs' answer.</p>
<pre><code>ＷＳ
</code></pre>
<p>Loop through each row of fish.</p>
<pre><code>Ｐ⭆ι⁺¬﹪⁺℅κＬ⁻…ι⊕λ ³Σ⊟ＫＤ⊕λ→
</code></pre>
<p>For each character, count the number of non-spaces so far including the current character, add on the current character's ordinal, and check whether the result is divisible by <code>3</code>. If so, then increment the appropriate digit of the result, otherwise replace blanks with zeros. Replace the current result with the new computed values. (Unfortunately Charcoal has no way of adding the values in two arrays to each other so it has to peek each digit of the result in turn.)</p>
</div>
<div id="pu18" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 18 bytes</h1>
<pre><code>+/{x=62-3!2+\~^x}'
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxtUEsOwiAQ3XOKcTbatMakJi4Mkh7EuOwZmhg9u8Dj85ACTV+GeR9mvY+X9/a4zefrYR6f39f2ORqzLpM669SjUwD+iHVWRI3/AvQnFFFAB7YOhd5vCIpEKlaFBbUgOkRzkfT746ZqVULKTg8hiIwLelhupnyZ0XrtuDQs9qRKnpakEXJznijz48gQrBfcgZCkYLWFghdYTESHH9wkWo0=" rel="noreferrer">Try it online!</a></p>
<pre><code>  {             }'   / for each row:
   x=62-3!2+\~^x     /   mark the tails
+/                   / add the rows to get column count
                     / example: &quot;&gt;&lt;&gt;&gt;&lt;&gt; &lt;&gt;&lt;  &quot;
             ~^x     / is not null (not space)
                     / 1 1 1 1 1 1 0 1 1 1 0 0
          2+\        / cumulative sums, starting at 2
                     / 3 4 5 6 7 8 8 9 10 11 11 11
        3!           / modulo 3. maps each fish to 0 1 2
                     / 0 1 2 0 1 2 2 0 1 2 2 2
     62-             / subtract from 62 (&gt;). Maps each fish to &quot;&gt;=&lt;&quot;
                     / &quot;&gt;=&lt;&gt;=&lt;&lt;&gt;=&lt;&lt;&lt;&quot;
   x=                / character-wise equal to original row
                     / 1 0 0 1 0 0 0 0 0 1 0 0
</code></pre>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 14 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>
<pre><code>&gt;⁶Ä3ḍk⁸Ġ€F=2)S
</code></pre>
<p>A monadic Link that accepts a list of lists of <code>&lt; &gt;</code> characters and yields a list of the column-wise tail counts.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/uUeO2wy3GD3f0Zj9q3HFkwaOmNW62RprB/x/u3nK4/f9/BQU7GzsFKEAw4SxkBpeNnQ2ICaXQdEFFQeowtQNpJF1ANkQCKMYFV4bkEJhahNFc2N2JYgNChAvMA2pDWAoTwTAG7GBs5mBhIhyCkEPyF5wJNxkA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<p>Partition each row after either the right-hand side of each fish (whether a head or a tail) or a space character like so:</p>
<pre><code>  &gt;&lt;&gt;   &gt;&lt;&gt;&lt;&gt;&lt;
00111000111111    &lt;- greater than space?
00123333456789    &lt;- cumulative sums
11001111001001    &lt;- is divisible by three?
ww[f]www[f][f][]  &lt;- identified &quot;parts&quot; (by partitioning after 1s) 
                        shown here as: water (w);
                                       fish ([f]); and
                                       a trailing empty list ([])
</code></pre>
<p>Then identify the &quot;tails&quot; of each &quot;part&quot; using the group-indices-by-value monad, <code>Ġ</code>:</p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: center;">Part Type</th>
<th style="text-align: center;">Part</th>
<th style="text-align: center;">Ġ(Part)</th>
<th style="text-align: center;">flatten(Ġ(Part))=2?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>[f]</code></td>
<td style="text-align: center;"><code>&quot;&lt;&gt;&lt;&quot;</code></td>
<td style="text-align: center;"><code>[[1,3],[2]]</code></td>
<td style="text-align: center;"><code>[0,0,1]</code></td>
</tr>
<tr>
<td style="text-align: center;"><code>[f]</code></td>
<td style="text-align: center;"><code>&quot;&gt;&lt;&gt;&quot;</code></td>
<td style="text-align: center;"><code>[[2],[1,3]]</code></td>
<td style="text-align: center;"><code>[1,0,0]</code></td>
</tr>
<tr>
<td style="text-align: center;"><code>w</code></td>
<td style="text-align: center;"><code>&quot; &quot;</code></td>
<td style="text-align: center;"><code>[[1]]</code></td>
<td style="text-align: center;"><code>[0]</code></td>
</tr>
<tr>
<td style="text-align: center;"><code>[]</code></td>
<td style="text-align: center;"><code>&quot;&quot;</code></td>
<td style="text-align: center;"><code>[]</code></td>
<td style="text-align: center;"><code>[]</code></td>
</tr>
</tbody>
</table></div>
<pre><code>&gt;⁶Ä3ḍk⁸Ġ€F=2)S - Link: list of lists of characters, School
            )  - for each (Row of the School):
&gt;⁶             -    {Row} greater than the space character? (vectorises)
  Ä            -    cumulative sums of {that}
   3ḍ          -    three divides {that}? (vectorises)
     k⁸        -    partition the Row after truthy indices of {that}
       Ġ€      -    group the indices of each of {those} by their values
         F     -    flatten {that}
          =2   -    {that} equals two? (vectorises)
             S - sum {that} (column-wise)
</code></pre>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 97 bytes</h1>
<pre><code>N$^`
$.&amp;
(\S)(\S)\1
 $2&#32;
 &lt;
1&#32;
&gt;&#32;
 1
+`(?&lt;=^(.)*)(.)((.*¶)+(?&lt;-1&gt;.)*)1(?(1)^)
$.(_$2*)$3&#32;
&#32;
0
0G`
</code></pre>
<p><a href="https://tio.run/##bU8xDsIwDNz9Cg8RsltR1WUN6cjGwlqVMjCwMCDexgP4WHBKmwTaSIkvZ9/l8rg@b/eLeH80/QCm2gB1Jw67E0DTIKAFQXAKBMqBWrvvqeKC9SCqiveLSyW34gIp1JJwz@pEZ9MUbHYqhBrqw@A9orMOp5VgRDkA62yAU/lTTWyYW8q1ZirF34ZyEMeyIPNssob1nD8vJAbGm8rSozOzsBkDr/mswBQk9bJ/RRidPw" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Explanation:</p>
<pre><code>N$^`
$.&amp;
</code></pre>
<p>Sort the rows in descending order of length.</p>
<pre><code>(\S)(\S)\1
 $2 
</code></pre>
<p>Chop the heads and tails off all the fish.</p>
<pre><code> &lt;
1 
&gt; 
 1
</code></pre>
<p>Place <code>1</code>s where the tails used to be.</p>
<pre><code>+`(?&lt;=^(.)*)(.)((.*¶)+(?&lt;-1&gt;.)*)1(?(1)^)
$.(_$2*)$3 
</code></pre>
<p>Accumulate the column totals.</p>
<pre><code>&#32;
0
</code></pre>
<p>Replace any remaining spaces with zeros.</p>
<pre><code>0G`
</code></pre>
<p>Keep just the totals.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276681/">276681</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




