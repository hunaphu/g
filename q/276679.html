<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276679</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>019</td><td>Pip</td><td>241119T210133Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276746#276746">emanresu</a></td></tr>
<tr d-ix="1"><td>017</td><td>Uiua</td><td>241119T114102Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276743#276743">janMakos</a></td></tr>
<tr d-ix="2"><td>097</td><td>JavaScript Node.js</td><td>241116T134654Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276706#276706">l4m2</a></td></tr>
<tr d-ix="3"><td>044</td><td>Pip xp</td><td>241118T211746Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276739#276739">DLosc</a></td></tr>
<tr d-ix="4"><td>014</td><td>05AB1E</td><td>241118T082645Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276728#276728">Kevin Cr</a></td></tr>
<tr d-ix="5"><td>109</td><td>Python 3.8 prerelease</td><td>241117T000628Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276714#276714">STerliak</a></td></tr>
<tr d-ix="6"><td>011</td><td>Vyxal</td><td>241116T222027Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276712#276712">emanresu</a></td></tr>
<tr d-ix="7"><td>054</td><td>Charcoal</td><td>241115T195350Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276694#276694">Neil</a></td></tr>
<tr d-ix="8"><td>128</td><td>C clang</td><td>241116T163116Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276707#276707">jdt</a></td></tr>
<tr d-ix="9"><td>011</td><td>Jelly</td><td>241116T191727Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276710#276710">Unrelate</a></td></tr>
<tr d-ix="10"><td>080</td><td>Python</td><td>241117T060255Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276718#276718">Albert.L</a></td></tr>
<tr d-ix="11"><td>027</td><td>K ngn/k</td><td>241117T145931Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276720#276720">att</a></td></tr>
<tr d-ix="12"><td>146</td><td>JavaScript ES6</td><td>241115T183254Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276692#276692">Arnauld</a></td></tr>
<tr d-ix="13"><td>162</td><td>Python3</td><td>241115T223147Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276697#276697">Ajax1234</a></td></tr>
<tr d-ix="14"><td>069</td><td>Bash + GNU parallel</td><td>241115T160826Z</td><td><a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete/276680#276680">Themooni</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 19 bytes</h1>
<pre><code>YOGb{Y[a]+SNy}SKDNa
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgebSSbkWBUuyCpaUlaboWmyP93ZOqI6MTY7WD_Sprg71d_BIhMlAFN22jlaJNDa1NDKyNDayNDKwNDa0Nja0NDcysTQ0MgMKGQHEjoARQ2NDM2tDIECRnYW0Yq6SjYAazBgA" rel="nofollow noreferrer">Attempt This Online!</a> Port of several other golflang answers, posted by <a href="https://codegolf.stackexchange.com/questions/276679/in-what-order-will-the-downloads-complete#comment593909_276739">DLosc's request</a> (-2 thanks to DLosc).</p>
<pre><code>Y                   # Yank into the y variable
 OG                 # A grid of 1s of size
   b                # &lt;paralellism&gt;
                DN  # Reverse sort
                  a # The download list
    {        }SK    # And sort by the function:
          SN        # Reverse sort
            y       # the list of queue lengths
      [a]+          # Add the current download to the first
     Y              # Yank that into the y variable
              SK    # And use [the first item of] that list to sort the downloads
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Uiua, 17 bytes</h1>
<pre class="lang-none prettyprint-override"><code>F â† âŠââ—Œâ¤šâˆ§Ëœ(.âœâŠ¢+â†)âŠ™âŠšâ‡Œâ†
</code></pre>
<p><a href="https://uiua.org/pad?src=0_14_0-dev_2__IyBFeHBlcmltZW50YWwhCkYg4oaQIOKKj-KNj-KXjOKkmuKIp8ucKC7ijZziiqIr4o2GKeKKmeKKmuKHjOKNhgo=" rel="nofollow noreferrer">Try it online!</a></p>
<p><em>This would be 16 bytes with <code>F â† âŠââŠ¸â¬šâˆ˜\(âœâŠ¢+â†)âŠš:â‡Œâ†</code> if the <code>scan</code> function wasn't annoying and had parity with <code>reduce</code></em></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 97 bytes</h1>

<pre class="lang-none prettyprint-override"><code>(x,t=0,h=[])=&gt;g=n=&gt;h[t]||n--?x+x?g(n,h[t+(u=x.sort((a,b)=&gt;a-b).pop(t+=!!t))]=u):h.flat():g(0,++t)
</code></pre>
<p><a href="https://tio.run/##lZHNagIxEIDvPsV4S9jZNdk/RIme@hQhh2jd3RZJRGPZg@@@zay2QivUBkJgfr4vk7zbD3vaHt8OIXX@dTc0amA9BiWwU9pwtWqVU6tOB3O5uDRd90m/bpnDGEnYWfXZyR8DYxY3sdamG54d/IGFRE2ngXOjznzRZc3eBsYXLROYJIEPSz0B0KArLLHA3CD8a5UQO2Yz0DlCgVAiVOYGFFgKLATmAqV8mnsHikiMW8qIjWclHoJRPnnn3@D8CibBHS5/wFGK@m/BN5zABCVJZI0SEhDlsaEgA1aCppIxnsdEDMs6yiXl5kivV4OB0UBRoBKgmlFCTWS4asuv@W5m@hYxzijGqrmZmEnW@OOL3XaMabAIDgwHtYKtdye/32V737KGWc4c53w5fAI" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<p>-6B Arnauld</p>
<p>Not pretty but</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-xp</code>, 44 bytes</h1>
<pre><code>Wl|DN:a#l&lt;b&amp;a?uPU[i0]+@YlPUPOaUi&amp;FI:DlBMUSNu
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgebSSbkWBUuyCpaUlaboWN3XCc2pc_KwSlXNsktQS7UsDQqMzDWK1HSJzAkID_BNDM9XcPK1ccpx8Q4P9SiF6YFpto5WiTQ2tTQysjQ2sjQysDQ2tDY2tDQ3MrE0NDIDChkBxI6AEUNjQzNrQyBAkZ2FtGKuko2AGcwAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Ungolfed/commented</h3>
<p>This solution simulates the download process one tick at a time. There's probably a shorter solution to be had by porting someone else's approach; I haven't looked into it yet.</p>
<p>The <code>-xp</code> flags mean that command-line arguments are evaluated as Pip values (letting us take the list input as a single arg) and lists are output in repr form.</p>
<pre class="lang-lisp prettyprint-override"><code>;; a is the list of tasks that haven't been queued up yet
;; b is the maximum parallelism number
;; l is the list of ticks remaining for the currently executing tasks
;; i is the current tick
;; u is the list of [completion time, task] pairs
;; Initially, a and b are command-line args, l is [], i is 0, and u is nil

; Sort a in descending numerical order
DN: a
; Loop while either a or l is nonempty:
W a | l {
  ; Check if the number of tasks currently executing is less than the max
  ; parallelism, and, if so, if there are any tasks waiting to be queued up
  I #l &lt; b &amp; a {
    ; Pop the next task from a and push it to l
    l PU POa
    ; Calculate that task's completion time: current tick plus length of task
    Y i + @l
    ; Push [completion time, task] to u
    u PU [y; @l]
  } EL {
    ; Else, move to the next tick
    U i
    ; Decrement all elements of the ticks-remaining list
    D l
  }
  ; Filter out any tasks that have 0 ticks remaining
  FI: l
}
; Sort u numerically (ascending by completion time)
SN: u
; For each [completion time, task] pair in u, return the second element of the pair
B MU u
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>16</s> 14 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ã…0Â©I{RÎ£Â®{Ä‡y+Å¡Â©
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/276712/52210"><em>@emanresuA</em>'s Vyxal answer</a>, which in turn is a port of <a href="https://codegolf.stackexchange.com/a/276718/52210"><em>@Albert.Lang</em>'s Python answer</a>, so make sure to upvote both of those answers as well!<br />
-2 bytes thanks to <em>@emanresuA</em></p>
<p>Inputs in the order <span class="math-container">\$parallelism,list\$</span>.</p>
<p><a href="https://tio.run/##ATgAx/9vc2FiaWX//8OFMMKpSXtSzqPCrnvEh3krxaHCqf//NApbNTEsNDAsMzAsMjAsMTEsMTIsMTA2XQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9WmWCvpJCYl6KgZA9kPGqbBGRUJvw/3GpwaGVxddC5xYfWVR9pr9Q@uvDQyv@1Ov@jo6NNdUx0jHWMYnVMYnUUgFwDHRMDHWMDHSMDHUND7KI6hgjlhmgSOoYGZrgkjUGSOqYGIMMMgeJGQAmgsKEZUJ8hSM5CB2ijGVivmQFQIVivJVAVyMRYAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>Ã…0             # Push a list of the first (implicit) input amount of 0s
  Â©            # Store it in variable `Â®` (without popping)
   I           # Push the second input-list
    {R         # Sort it in reversed order
      Î£        # Then sort it further by:
       Â®       #  Push list `Â®`
        {      #  Sort it
         Ä‡     #  Extract head; push first item and remainder list separately
          y+   #  Add the current value to this first item
               #  (which will either add 0 to each value; or add the values at the
               #  same positions in the lists together)
            Å¡  #  Prepend it back to the list
             Â© #  Store this as new `Â®` (without popping)
               # (after the sortBy, output the sorted list implicitly)
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, <s>115</s> <s>113</s> 109 bytes</h1>
<ul>
<li>-2 thanks to <a href="https://codegolf.stackexchange.com/users/85334/unrelated-string">UnrelatedString</a></li>
<li>-4 thanks to <a href="https://codegolf.stackexchange.com/users/20260/xnor">xnor</a></li>
</ul>

<pre class="lang-none prettyprint-override"><code>def f(F,p):
 F.sort();q=zip(*[F[-p:]]*2)
 for t in F[~p::-1]+F[-1:]*p:(n,i),*q=q;yield i;q+=(n+t,t),;q.sort()
</code></pre>
<p><a href="https://tio.run/##ZZHBboJAEIbvPsWUi7s6ml1Qohh69NKkfQDKASOkqwQW2DZpjX11OwO1JvWwgcz//f/M7thP91ZXwcq2l8s@L6AQW7QyGsF23tWtE3LTxF/GikmyTWY2StOJL0dQ1C04MBVsk28bRTOdTknWUTqxkajQSJw0cbP5NHm5B7NpprGopg6dxE3zm3vpIAbP80bJEhcYoJ8iLGD2CImPENA/wjIlUeFCYaDQV6j1jVEE0dGaKvRdqjsWtX@P@wPOtsGi/1lQq/DPxhbG2U5kb2crM/fegL24VDyFprpPApV1SLGatRXyBcI@mkvAOjDQp7ODo4d@i@vIvy35SVQ/tuqpFU0QKmrXT7CmXrfbrgdrPzadkG7KL81bM7y1wpQub8VzXeUI3byzpXFi/FqNJW8eMoQdLcdcBQ4d09bhgHAkIbsKOJTrd0fV0nROFCL/yEpxkEh9nDhKyUDWdXnrBi6GntgRUXgnc4aHGE6knD0CbcuuwktenlI4ZedokNh12p09efkB" rel="nofollow noreferrer" title="Python 3.8 (pre-release) â€“ Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, <s>22</s> <s>12</s> 11 bytes</h1>
<pre><code>áº‹Â£sá¹˜ÂµwÂ¥s+:Â£
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLhuovCo3PhuZjCtXfCpXMrOsKjIiwiIiwiWzUxLDQwLDMwLDIwLDExLDEzLDEwNiw1MDAsNDAxLDMwMiwyMDEsMTE2LDEyMSwxMDY4LDFdXG42Il0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Now uses an idea stolen from <a href="https://codegolf.stackexchange.com/a/276718/100664">Albert.Lang's Python answer</a> of only maintaining a list of queue lengths, and sorting by those, except there turns out to be an absurdly short way to do this.</p>
<pre><code> Â£          # Set the register (list of queue lengths) to
áº‹           # &lt;parallelism&gt; copies of &lt;downloads&gt;
            # In older versions of this, this was a list of 0s, but any numeric list will work
            # since lists are lexicographically compared by the first element, and it saves a byte
  sá¹˜        # Sort the list of downloads backwards
    Âµ       # And sort this list by, for each n, 
      Â¥s    # Taking the register, sorting it, 
        +   # And adding
     w      # n to the first element
         :Â£ # Then resetting the register, and using its current value to sort
            # since two downloads will never finish at the same time, 
            # This is sorting by the head, i.e. the ETA of the current value
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 54 bytes</h1>
<pre><code>â‰”âŸ¦âŸ§Ï…ï¼·â»Î¸Ï…âŠÏ…âŒˆÎ¹ï¼µï¼­Ï…âŸ¦Î¹Î¹âŸ§ï¼·Ï…Â«ï¼·âŒŠâŒŠÏ…ï¼¦â‡â€ºï¼¬Ï…Î·â€¦Ï…Î·Ï…ï¼µï¼­Î»â»Î¼Â¬Î½ï¼©âœ‚âŒŠÏ…Â¹â‰”Î¦Ï…âŒŠÎºÏ…
</code></pre>
<p><a href="https://tio.run/##TVDBSsQwFDzvfsU7vsATkuoWwZMU9GJlQW@lh1DjNpgma5qoi/jtMekqu4fHg5l5M5MMo/SDkyal23nWO4tdTxDZzfpz1EYBttrGGd8LxmAb5xEjQSu/9BQn1CwLW7lv3DRJ@1KoThPo/nQfGXyvVyez5e5/Z08Gr84DPitvpT/gvVcyKI8Pyu5CzmIEY57mMBjVjG5fIgpQ2pwFm9xpKToRPLqAlpVmq63XNmAj54BPRg/qLJhAHDV/z77TpuTGxWjRvDF2/ImflLpuw@mK0yWnipMQJCoSvKYNL7DIeJWJDIs6U6Jw1yR6qvt08WF@AQ" rel="nofollow noreferrer" title="Charcoal â€“ Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>â‰”âŸ¦âŸ§Ï…ï¼·â»Î¸Ï…âŠÏ…âŒˆÎ¹
</code></pre>
<p>Sort the input into descending order.</p>
<pre><code>ï¼µï¼­Ï…âŸ¦Î¹Î¹âŸ§
</code></pre>
<p>Map each download into its relative duration and original length.</p>
<pre><code>ï¼·Ï…Â«
</code></pre>
<p>Repeat until all downloads complete.</p>
<pre><code>ï¼·âŒŠâŒŠÏ…
</code></pre>
<p>Repeat until one download completes.</p>
<pre><code>ï¼¦â‡â€ºï¼¬Ï…Î·â€¦Ï…Î·Ï…
</code></pre>
<p>Loop over only the running downloads.</p>
<pre><code>ï¼µï¼­Î»â»Î¼Â¬Î½
</code></pre>
<p>Decrement the time remaining.</p>
<pre><code>ï¼©âœ‚âŒŠÏ…Â¹
</code></pre>
<p>Output the original length of the completed download.</p>
<pre><code>â‰”Î¦Ï…âŒŠÎºÏ…
</code></pre>
<p>Remove the completed download from the list.</p>
<p>51 bytes to port @Albert.Lang's algorithm:</p>
<pre><code>â‰”ï¼¥Î·â°Î·ï¼·âŒˆâ»Î¸ï¼¥Ï…âŒŠÎºÂ§â‰”Î·âŒ•Î·âŒŠÎ·âŒˆÂ§âŠï¼¯Ï…âŸ¦âºâŒŠÎ·Î¹Î¹âŸ§Â±Â¹â‰”âŸ¦âŸ§Î·ï¼·â»Ï…Î·âŠÎ·âŒŠÎ¹ï¼©ï¼¥Î·âŠŸÎ¹
</code></pre>
<p><a href="https://tio.run/##VU9NawIxEL37K3JMYAqZrS4FT1IoeFD3vuwhaDBD1@x2k1T/fcxol7aBZOB9zcvRmek4mD7nTQh09nJnRulAaAXCqfXi6qi3oqA3uqSL3JFPQX6BYFkqg/wD/1R8xDNjE7f@ZG8c80H@xHPWOaXY@wybdU0K7jDaycRh4tC26cuSXwsI4tuVZ2/PJlqJvG29@Kncdv@7PjomxpTg7L8FiH3NRD7KdxPi/N1mGJkqZM5tu9Kw1PCqodKACFgB6hpWmmEseFWIAmNdKGTuDbCDussv3/0d" rel="nofollow noreferrer" title="Charcoal â€“ Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>â‰”ï¼¥Î·â°Î·
</code></pre>
<p>Start with all parallel tasks ready.</p>
<pre><code>ï¼·âŒˆâ»Î¸ï¼¥Ï…âŒŠÎº
</code></pre>
<p>Process the downloads in descending order of size.</p>
<pre><code>Â§â‰”Î·âŒ•Î·âŒŠÎ·âŒˆÂ§âŠï¼¯Ï…âŸ¦âºâŒŠÎ·Î¹Î¹âŸ§Â±Â¹
</code></pre>
<p>Take the earliest completed download, add it to the current download's size and save that with the size, then also update that download's new completion time.</p>
<pre><code>â‰”âŸ¦âŸ§Î·ï¼·â»Ï…Î·âŠÎ·âŒŠÎ¹ï¼©ï¼¥Î·âŠŸÎ¹
</code></pre>
<p>Sort the downloads by start time and output their lengths.</p>
</div>
<div id="pu8" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 128 bytes</h1>

<pre class="lang-c prettyprint-override"><code>s[9999];c(*a,*b){return*b-*a;}f(*r,*a,n,p){for(n=qsort(a,n,4,c)-p;n++&lt;1e4;)n&lt;1?s[*a++]=*a:s[n]?*r++=s[n],s[n]=0,s[*a+++n]=*a:0;}
</code></pre>
<p><a href="https://tio.run/##jVNtj5swDP68/goL6aQA6UZo6a6l6H4I4wNH4YbUpiyh2zTEX1/nOHDQqpMurRO/PH7spk6xLI65fLtedbrFlcUF83LuvbqdKtuLkt7r0svjvmKe4hiQvHG76qyYTH7os2qZca154S6bWPr@XpTr2JV78aJTL/f9LPHynU5l9uIp30@Mxs2WBNwCfEmQIO6vP8/1ARpVy5YV33PlgcxPJQe0PciVIg2kC90CwOIq5jxphxPQjY0bOwNmcHUSxFDvJW6@75oQrSnt6YCJNbwAHg7swMETq6R1ZplG5DfpoKNfLAzrKa8low6IUbfqUrS2IVpUuS1POn0OsvjGLW/N5tYsfzdl0ZaHKa@HttRtmkEy44cOPxGHNYcVhxB6UvHbQUguVCNM7fldSoAhlBVKiCKESY3G1CEihEVFwYcoUKiDzT1NaJEG8ZhKPKJCCTaG7@vAtxoqGkg0QsQA@xjpitCmDeISJhyauAmKjeG0hM@4Y2kR0c/prH@CRWMmsYWzqxBTJeKnSobwQYsbutuhxa3hufkXtlPzBrWhq7OzEC/ovJ9uXf8pzxUzg@LCF5iZaYBjTKN/N52q1JdjmxKmzj7L2ZRWzAY5jFEa5cmUk9q48e2bYg6Bd8bh/J8B0z4NeFtsZ/H3lefA8W3s5sSj81HK@6uluzNv9/q3qI75m74uf/0D" rel="nofollow noreferrer" title="C (clang) â€“ Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>15</s> <s>14</s> <s>12</s> 11 bytes</h1>
<pre><code>á¹¢Uá¹¢+&quot;Â¥É¼ÃÉ“xÉ¼
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///hzkWhQKytdGjpyT2H552cXHFyz//Dy/WPTnq4c4bBoZUPd85W0Yz8/z@aKzraVMdEx1jHKFZHwSRWB8Q30DEx0DE20DEy0DE0xCGsY4ikwRBNRsfQwAynrDFIVsfUAGScIVDcCCgBFDY0A2o0BMlZ6IAsNQNrNjMAqgRrtgQqg5oZCwA" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">Try it online!</a></p>
<p><i>-1 with slightly less stateful register use</i></p>
<p><i>-2 by actually porting directly</i></p>
<p><i>-1 by thinking</i></p>
<p>Takes the list on the left, and the max parallelism <span class="math-container">\$p\$</span> on the right, as a full program--relies on the register being initialized to a scalar. Port of <a href="https://codegolf.stackexchange.com/a/276712/85334">emanresu A's port of</a> <a href="https://codegolf.stackexchange.com/a/276718/85334">Albert.Lang's approach</a>.</p>
<pre><code>        É“      First,
          É¼    set the register to itself (initially 0)
         x     repeated a number of times equal to
        É“      the max parallelism.
á¹¢U             Then, sort the downloads descending.
     Â¥ Ã       Sort those by the results of mapping in order:
  á¹¢   É¼        Sort the register (times used) ascending
   +&quot;          and add the time being sorted to the first element of that
      É¼        then set the register to that result and use it as the sort key.
  á¹¢ &quot;  Ã       (Lists compare lexicographically, so the first element is used.)
</code></pre>
<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>22</s> <s>20</s> <s>19</s> 18 bytes</h1>
<pre><code>á¹¢USÃ;&quot;Â¥Æ’á¸Ÿ`â‚¬}ÂµÃ„áºá»¤á»‹áº
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///hzkWhwYfnWSsdWnps0sMd8xMeNa2pPbT1cMvDXX0Pdy95uLsbyPh/eLn@0UkPd87QjPz/P5orOtpUx0THWMcoVkfBJFYHxDfQMTHQMTbQMTLQMTTEIaxjiKTBEE1Gx9DADKesMUhWx9QAZJwhUNwIKAEUNjQDajQEyVnogCw1A2s2MwCqBGu2BCqDmhkLAA" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">Try it online!</a></p>
<p><i>-2 further porting emanresu A's actual solution after further discussion in chat</i></p>
<p><i>-1 with a slightly more clever way of getting the empty lists after way too many failed attempts</i></p>
<p><i>-1 by throwing that out because I remembered I don't need the singletons any more</i></p>
<p>Takes the list on the left, and the max parallelism <span class="math-container">\$p\$</span> on the right. Port of <a href="https://codegolf.stackexchange.com/a/276712/85334">emanresu A's approach</a> <a href="https://chat.stackexchange.com/transcript/message/66636599#66636599">as described in chat, before she actually posted it</a>.</p>
<pre><code>á¹¢U                    Sort the list descending.
        á¸Ÿ`            Starting with an empty list
          â‚¬}          for each [1 .. p],
       Æ’              reduce it by:
  SÃ                  Sort by sum,
      Â¥               then
    ;&quot;                zipwith append the implicitly-singleton new download.
              áº       Concatenate
             Ã„        the cumulative sums of each queue,
               á»¤      grade up,
                á»‹     and index into
            Âµ         the original queues
                 áº    concatenated.
</code></pre>
<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>38</s> 29 bytes</h1>
<pre><code>á¹¢U;S$â¹Â¡Å¼`á¹«á¸Šá¹¢á¸¢á¹–áº¡ÆŠá¹­@É—Æ’Â¥Æ¤á¸£É—á¹ªâ‚¬â‚¬á¸ŸÆ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///hzkWh1sEqjxp3Hlp4dE/Cw52rH@7oAgo@3LHo4c5pD3ctPAbkrXU4Of3YpENLjy15uGPxyekPd6561LQGiB7umH9s7v/Dy/Uf7uo7Ounhzhmakf//R3NFR5vqmOgY6xjF6iiYxOqA@AY6JgY6xgY6RgY6hoY4hHUMkTQYosnoGBqY4ZQ1BsnqmBqAjDMEihsBJYDChmZAjYYgOQsdkKVAA7hiAQ" rel="nofollow noreferrer" title="Jelly â€“ Try It Online">Try it online!</a></p>
<p><i>-9 by directly tracking the original identity of each in-progress download instead of inferring it afterwards. That's what took me the most time to get working in the first place ğŸ˜­ğŸ˜­ğŸ˜­</i></p>
<p>Takes the list on the left, and the max parallelism <span class="math-container">\$p\$</span> on the right. A &quot;&quot;&quot;simple&quot;&quot;&quot; iterative approach which reduces with the in-progress downloads as the accumulator state.</p>
<pre><code>á¹¢U                                Sort the list descending,
  ;S$                             then append the sum of the list
     â¹Â¡                           p times.
  ;S$â¹Â¡            Æ’              The sums fill in for idle threads,
           á¹¢á¸¢                     as they'll never be smaller than real downloads.
       Å¼`                         Pair every element with itself.
                     Æ¤            For every nonempty prefix of
         á¹«                        the p'th element onwards,
          á¸Š                       remove the first element
         á¹«á¸Š           á¸£           (so there's no overlap with the starting set,
          á¸Š        Æ’ Æ¤            and so the first reduce is a no-op)
                    Â¥             then
                      á¸£           starting with the first p downloads,
                  É—Æ’              reduce the prefix by:
           á¹¢                      Sort the current downloads ascending,
            á¸¢                     take the first element (= maximum),
             á¹–                    remove its last element,
              áº¡                   and subtract that from
             á¹–                    the first elements of
            á¸¢  ÆŠ                  every other element
             á¹–áº¡                   without affecting their last elements;
                á¹­@                append the next largest download to start.
                         á¹ª        Take the last element of
                          â‚¬       each pair
                           â‚¬      in each download set,
                            á¸ŸÆ    and return the one missing in each next step.
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 80 bytes</h1>
<h3>Thanks @att for -3</h3>
<pre class="lang-python prettyprint-override"><code>lambda l,p,S=sorted:S(l,key={x:(p:=[min(p)+x]+S(p)[1:])for x in S(l)[::-1]}.get)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZDNSsNAEIDx2qcYetrYadnNH21gfYIehN5c9xBposE0u7RRWsQn8VIQfSd9GmeSasFAhg0z3zczu2-f_tA-uOb4Xurbj6e2nM6_rut8c7fOoUaPK71z27ZYZytR42Nx0C_7TPhMm03VCB9M9nayotOozAal28IeqgaIDUyWTZV9nd0XbXDqe8PAkgHni0bIIBtBhQ40bHIviue8xuVs5-uqFWOYXsE4CEbgnC5FZaTFyih7SUFJv62aVpDr6NPanSYcvy9Kk2CMEYYWIeYmJkSI6B8hsSOTSIwlRhJDiUqdGUkQhVKUoTORAxZVOMTDHmetV9Q_BZVM_zRWGGedyE5nlZmhG7GLieQtFOVDKlBapdRWcW2OfIG0a80p4Dow0HVng1v38-LflU8j-Ulkt7bsqDltkEoa122woFnn2y56tVubIqWb9u_9Aw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Previously, cleaner but longer:</p>
<h3><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 83 bytes</h3>
<pre class="lang-python prettyprint-override"><code>lambda l,p,S=sorted:S(l,key={x:(p:=[min(p)+x]+S(p)[1:])[0]for x in S(l)[::-1]}.get)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZBNTsMwEEbFtqcYdeXQaWXnT20kc4LussN4EdQEItLYagNqhTgJm0oI7gSnYSZpqUSlWI7G730z9vuX33ePrj18VPru87mrpvPvvCnW96sCGvSY663bdOUqy0WDT-Vev-4y4TNt1nUrfDDZ2UlOu1GZDYy0ldvADuoWCA9Mlk2VfZs9lF1wjL5lYMmA82UrZJCNoEYHGtaFF-VL0eBytvVN3YkxTG9gHAQjcE5XoqZ0rI2y17So6Dd12wlyHX1au2OHw89VZRKMMcLQIsQcYkKEiP4REjsyicRYYiQxlKjUmZEE0VKKKrQn8oJFFV7i4YCzNijqn4JKpn8aK4yzTmSvs8rMpRuxi4nkKRTVQzqgskopVvHZHPkCaR_NJeBzYKBPZ4Ojh37xaeRjS34S2Y8te2pOE6SS2vUTLKjX-baLQe3HppXSTYf3_gU" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes the parallelism p in unary as a list of 1s.</p>
<h2>How?</h2>
<p>First builds a map (dictionary) download length -&gt; E.T.A. by going from longest to smallest dl while maintaining a list of the E.T.A.s of the currently downloading items. The input parameter p serves as this list initialised to all 1s. Once the map is built it is used as a key for sorting the download items by their E.T.A.s.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, <s>28</s> 27 bytes</h1>
<pre><code>{y@&lt;(&amp;x){-':y+\x@&lt;x}\y@:&gt;y}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxtjUEOgzAMBO95xZ5oK4Rkx0kEKaryD8iVNyRC/L0Oope2R8/srre41zTfu/LYh1us/VrSXI61pviqhzFmWyQvDAuBg0fIStzT6yGw10FwBCFYAvM/Bv5E+QuD6ZwMP0qagqc2xMqtCsUctMXNjbh+BdLY2Zw0k9/6Iize" rel="noreferrer">Try it online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/users/100664">emanresu A</a>'s <a href="https://codegolf.stackexchange.com/a/276712">Vyxal solution</a>.</p>
<pre><code>                    y@ &gt;y   descending times
y@&lt;                   :     sort by:
   (&amp;x){          }\          scan with initial state (empty):
              x@&lt;x              sort ascending
        -':y+\                  add new time to first position
</code></pre>
</div>
<div id="pu12" class="pu"><h1>JavaScript (ES6), 146 bytes</h1>
<p>Expects <code>(array)(n)</code> and returns a space-separated string.</p>
<p>Probably not the shortest algorithm.</p>

<pre class="lang-none prettyprint-override"><code>b=&gt;g=(n,a=b.sort((a,b)=&gt;b-a).map(s=&gt;[s,--n&lt;0&amp;&amp;n,s]))=&gt;(c=a.sort(([r,w],[R,W])=&gt;!w-!W||R-r).pop())?c[2]+&quot; &quot;+g(a.map(a=&gt;a[1]?a[1]++:a[0]-=c[0]),a):a
</code></pre>
<p><a href="https://tio.run/##lZJLbsIwEED3nGJggWxlEux8EII6rHoBNiwsL4YUaCuaRAkqG@6eegJtpRap1FJsaT7vZRK/0ju1RfNSH8Oyetp2O9NtTL43okQym6itmqMQhBtp8k1IMnqjWrQmty2GYfmgxuMSWyd9VhSGruW2wZNDu8K184nhKRyuz@dV2Miormoh5bKwsQtGMAr2gnoimZysdkvegmBOVrnQFH6XSHJO3cIOACzYDFNMMHYI/1op@I7JBGyMkCCkCJm7AhWmChOFsUKt7@Z@A5Un@kdrj/Vnpm6CUd/5zr/B8QXMgm@4/gFHraZ/C77gDGYoSzyrl7CAKbcNCRswUzyV9vHYJ3xYT71cc26G/PWm4KA3cBS4BLiml3ATGy7a9HO@q5l/i@pnVH3VzA3cINpVzSMVz/5KASGU4CSYHIqqbKvDNjpUe7ETJEUppVx0Hw" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>
<h2>Method</h2>
<h3>Initialization</h3>
<p>We first sort the input array from largest to smallest file size.</p>
<p>We turn each entry into a triplet <span class="math-container">\$(r,w,s)\$</span> where:</p>
<ul>
<li><span class="math-container">\$r\$</span> is the remaining number of bytes to download (initially set to the original size)</li>
<li><span class="math-container">\$w\$</span> is the waiting time, set to <span class="math-container">\$0\$</span> for the first <span class="math-container">\$n\$</span> files, and then <span class="math-container">\$-1\$</span>, <span class="math-container">\$-2\$</span>, ... and so forth for the next ones</li>
<li><span class="math-container">\$s\$</span> is the original size</li>
</ul>
<h3>Iterations</h3>
<p>At each iteration:</p>
<ul>
<li>We sort the triplets by their downloading status first (<span class="math-container">\$w=0\$</span> vs <span class="math-container">\$w\neq0\$</span>) and <span class="math-container">\$r\$</span> second.</li>
<li>We look for the triplet <span class="math-container">\$c\$</span> of the next completed file: the one with the smallest <span class="math-container">\$r\$</span> among those for which <span class="math-container">\$w=0\$</span>.</li>
<li>We remove this entry from the list and append the original file size <span class="math-container">\$c[2]\$</span> to the output.</li>
<li>We update all remaining triplets:
<ul>
<li>if <span class="math-container">\$w=0\$</span>, we subtract <span class="math-container">\$c[0]\$</span> (the number of bytes that has just been downloaded) from <span class="math-container">\$r\$</span></li>
<li>if <span class="math-container">\$w\neq0\$</span>, we increment <span class="math-container">\$w\$</span> (i.e. we make it advance by one position in the waiting queue)</li>
</ul>
</li>
</ul>
</div>
<div id="pu13" class="pu"><h1>Python3, 162 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(F,p):
 q,s=[],[]
 F=sorted(F)
 while F+q:
  q+=[[F.pop()]*2for _ in F[:p-len(q)]]
  Q=[]
  for a,b in q:
   if a:Q+=[(a-1,b)]
   else:s+=[b]
  q=Q
 return s
</code></pre>
<p><a href="https://tio.run/##dZLNboMwEITP8VOsokqxm01lkx9FkWhvHCvlTFAFilGcUDCYturTp7ukaQ9pD8jszDfrxcZ/9oemnq99dz7vbQmlTNCrjYAWQ5xmmGYCkjg0XW/3MlECPg6uspBMW2KgncZpmjz4xkuV3Udl08ELuBqSdONnla1lqzJqANuY@wD7ORZMDHFwJeSbLTWR@cxgoRgCWwW7CSQWXLbxVkBn@7euhnB2r55GoVoEiGE8Hot0iQucY5QhLGD2CGmEMKd3hGVGpsaFxrnGSKMxv4wmiB5jSKF1qW9YNNEtHl1wjv0dQaNXPzGOMB4NO1ziHGXmnywuNcuG9IgMks2KLMPeGvkDVkNrloB9YGDozglufdlvcR35e8th8mFsPVDrTPDp8Y04vo/SVb3t5HNTW4TwEHzlejnZ1RNFP8MoRyjovN1V5xkmSoyOCCfSO3s1cBfkU7zb36kJQk6EGPnO1b0spX3PK3lUCFyelFLnLw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="noreferrer">Bash</a> + <a href="https://www.gnu.org/software/parallel/" rel="noreferrer">GNU parallel</a>, 69 bytes</h1>
<p>+1 byte (nice): Neil points out <code>sort</code> needs <code>-n</code>, otherwise 100&lt;11</p>
<pre class="lang-bash prettyprint-override"><code>p=$1
shift
xargs -n1&lt;&lt;&lt;$@|sort -nr|parallel -j $p &quot;sleep {}&amp;&amp;echo {}&quot;
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kKbE4Y8GCpaUlaboWN10KbFUMuYozMtNKuCoSi9KLFXTzDG1sbFQcaorzi0oUdItqChKLEnNyUnMUdLMUVAoUlIpzUlMLFKpr1dRSkzPygQwliFlQI2FGAwA" rel="noreferrer">Attempt This Online!</a> (ATO does not ship parallel)</p>
<p>Call with max jobs as first argument, and then every number in any order as additionnal arguments (e.g. <code>par.bash 4 50 40 30 20 11 12</code>).</p>
<p>I tried to be better than this, unfortunately i am not good enough to do anything better. Sort of uses <a href="https://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort" rel="noreferrer">sleepsort</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276679/">276679</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




