<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::141913</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>013</td><td>Japt</td><td>170907T084110Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141970#141970">Shaggy</a></td></tr>
<tr d-ix="1"><td>035</td><td>Java 8</td><td>170907T131841Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141987#141987">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>037</td><td>C# .NET Core</td><td>170907T102602Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141978#141978">Ayb4btu</a></td></tr>
<tr d-ix="3"><td>032</td><td>QBIC</td><td>170907T175047Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/142030#142030">steenber</a></td></tr>
<tr d-ix="4"><td>091</td><td>Java OpenJDK 8</td><td>170907T133858Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141990#141990">Roberto </a></td></tr>
<tr d-ix="5"><td>038</td><td>Python 3</td><td>170906T211610Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141921#141921">hyperneu</a></td></tr>
<tr d-ix="6"><td>012</td><td>MATL</td><td>170906T213415Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141923#141923">Luis Men</a></td></tr>
<tr d-ix="7"><td>038</td><td>Python 3</td><td>170907T032439Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141945#141945">xnor</a></td></tr>
<tr d-ix="8"><td>052</td><td>C# Visual C# Compiler</td><td>170906T203603Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141920#141920">Kamil Dr</a></td></tr>
<tr d-ix="9"><td>010</td><td>Jelly</td><td>170906T235311Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141934#141934">Jonathan</a></td></tr>
<tr d-ix="10"><td>015</td><td>Jelly</td><td>170906T203413Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141919#141919">Jonathan</a></td></tr>
<tr d-ix="11"><td>023</td><td>Pyth</td><td>170906T221549Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141928#141928">Mr. Xcod</a></td></tr>
<tr d-ix="12"><td>052</td><td>Perl 5</td><td>170906T214729Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141924#141924">Xcali</a></td></tr>
<tr d-ix="13"><td>030</td><td>JavaScript ES6</td><td>170906T201616Z</td><td><a href="https://codegolf.stackexchange.com/questions/141913/totalling-troublesome-ts/141915#141915">ETHprodu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>14</s> 13 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>I tried a few different solutions based on <a href="https://codegolf.stackexchange.com/a/141915/58974">ETH's observations</a> but the shortest I've come up with (so far) is a straight port.</p>
<p>Takes input in the order <code>n,H,W,x</code>.</p>
<pre><code>´V?U+ßXnU:U*W
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=tFY/VSvfWG5VOlUqVw&amp;input=MzIgNCAzIDk" rel="nofollow noreferrer">Try it</a></p>
<pre><code>´V?U+ßXnU:U*W     :Implicit input of integers U=n, V=H, W &amp; X=x
´V                :Prefix decrement V
  ?               :If truthy (not zero)
   U+             :  Add U to
     ß            :  Recursive call with arguments
      XnU         :    Subtract X from U and pass as U (V, W &amp; X are implicit)
         :U*W     :Else return U*W
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Java 8, 35 bytes</h1>
<pre><code>(x,W,H,n)-&gt;~-H*(x*(1-H/2d-W)+n)+W*n
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/141978/52210"><em>@Ayb4btu</em> .Net C# answer</a>, after I golfed it a bit.</p>
<p><a href="https://tio.run/##LY4/D4IwEMV3P8WNLbQYwcUQnVlkYWAwDrVUU4SDQCEYg18dy5/k7pdc3r28l4te8KpWmGfvSRaibeEqNH53ABqNap5CKojnEyCrukehQBKrwMBmpgujhUhD@zbatdMaYbSEGBDOMJGBpSxiSPnlxyOHDA458GjvZzylLlI3dXAKV2NtM6xx8/eVzqC0hUhiGo2v2x0EXdskn9ao0qs649VWMgUS9CQ5sYAdWeDTrc04/QE" rel="nofollow noreferrer">Try it here.</a></p>
<hr />
<p>If <code>y</code> is a mandatory input-parameter, it will be <strong>37 bytes</strong> instead (<a href="https://tio.run/##LY5PD4IwDMXvfooeN@gw/rkQomcucvHAwXiYY5ohFiLDQIx@9TmQpP0lzetrXylfUtSNprK4O1XJtoWDNPReABiy@nmVSkM2jgBF3V0qDYp5BXocOUzMJ6YTiSd@@ePbV2ulNQoyINiBYz0OmGOKxMX@K9KA9QFbiXS5LkTOQ@JhHpBL/tbG//LW@cKrNgU8fDB2tE9Dt9MZJP@nOg6t1Y@o7mzUeMlWxChSLMYYN7jFzZrPiT7uBw" rel="nofollow noreferrer">Try it here</a>):</p>
<pre><code>(x,y,W,H,n)-&gt;~-H*(x*(1-H/2d-W)+n)+W*n
</code></pre>
<p>If outputting a double isn't allowed, it will be <strong>40 bytes</strong> instead (<a href="https://tio.run/##LY47D4IwFIV3f8UdW2gxgoshOrPIwsBgHGpBU4QLgUIwBv96LY/k3i@5j3NyCjEIXjc5FtnbyFJ0HVyFwu8OQKHO26eQOcTzuCxAkpkjm5kujBYiDe3PZNtWp4VWEmJAOIMhI0tZxJDyy49HDhmd2YOSA4/2fsZT6iJ1UwdNuKqb/lFa9WYy1CqDykYiiW4Vvm53EHTNk3w6nVde3WuvsSddIkFPkhML2JEFPt0iTeYP" rel="nofollow noreferrer">Try it here</a>):</p>
<pre><code>(x,W,H,n)-&gt;~-H*(x*(int)(1-H/2d-W)+n)+W*n
</code></pre>
<p>If having a function instead of a full program isn't allowed, it will be <strong>160 bytes</strong> instead (<a href="https://tio.run/##TYyxDoIwFEV/pWMLFhVYDGHHwYmhA@nQ0CcphFcCFWMI/nrt4EDudE5Obq9Wxe0E2OvBe4MO5qdqgTy2xSlnWrJao8moDNLazQa7Riq23UPXwUxEifAmf6KqSSU7VaVINLRWQxBZEHgUuWRF/VkcjIl9uWQKl45@eRXRQ3SRLKJXXp1TzQWLkcUiQlbsu/f@Fpb53GfpDw" rel="nofollow noreferrer">Try it here</a>):</p>
<pre><code>interface M{static void main(String[]a){Integer W=new Integer(a[2]),H=W.decode(a[3]),n=W.decode(a[4]);System.out.print(~-H*(W.decode(a[0])*(1-H/2d-W)+n)+W*n);}}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, <strike>49</strike> 37 bytes</h1>

<pre class="lang-cs prettyprint-override"><code>(x,y,W,H,n)=&gt;~-H*(x*(1-H/2d-W)+n)+W*n
</code></pre>
<p><a href="https://tio.run/##hcw9C4JAGMDxufsUN97pYy/am5guQTgUBAnOdh5xYM@Bd4Yi9tWNhpaGGv7bj78wntC1HBuj8EYvnbHyHhFRFcbQc0@MLawS9NCg2Cm08F2pm2slE5rRmI6shQ5ySAF5nDy91GGtwxZeOvNLL@cucjd3cIzI5/rQqqSnQiHjpCeTvUajKznNa2XlUaFkGQshhACWEPicR79IAOvVH7KB7fxNBjKMLw" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>
<p>A direct formula avoiding the need for looping or recursion. Unfortunately I had to use <code>2d</code> otherwise it was going to do integer division and truncate the fractional component. The <code>y</code> param is completely redundant and could be removed.</p>
<h3>Explanation</h3>
<pre class="lang-cs prettyprint-override"><code>(n-x*(H-1))*W             // Calculates the Top of the T
</code></pre>
<p><code>(n-x*(H-1))</code> gets the cell index by subtracting from <code>n</code> the number of rows to go up multiplied by the grid width. Multiplying this by <code>W</code> gets the sum of the top bar of the T.</p>
<pre class="lang-cs prettyprint-override"><code>n*(H-1)-x*(H-2)*(H-1)/2   // Calculates the Stem of the T 
</code></pre>
<p>I got this by using mathematical induction by trying to calculate the sum of <em>1, 10, 19, 28</em> where <code>n=28, H=4, x=9</code>. Which can be written as:</p>
<pre class="lang-cs prettyprint-override"><code>28 + (28-9) + (28-9-9) + (28-9-9-9)
28-9*0 + 28-9*1 + 28-9*2 + 28-9*3
28*4 -9*(0+1+2+3)
n*H -x*(1+2+3)
n*H -x*(3*(3+1)/2)
n*H -x*((H-1)*((H-1)+1)/2)
n*H -x*((H-1)*H/2)
</code></pre>
<p>but because we don't want to include the top cell of the stem (included in the formula for the Top of the T), <code>H</code> needs to be <code>H-1</code>. Making the formula</p>
<pre class="lang-cs prettyprint-override"><code>n*(H-1)-x*((H-2)*(H-1)/2)
</code></pre>
<p>Combining these two formulas gives</p>
<pre class="lang-cs prettyprint-override"><code>(n-x*(H-1))*W + n*(H-1)-x*((H-2)*(H-1)/2)
</code></pre>
<p>and simplifying it gives the formula used for the answer (though how it is rearranged can change how it looks).</p>
<h3>Acknowledgements</h3>
<p>Saved 12 bytes thanks to Kevin Cruijssen. Though I'm not sure if the <code>;</code> should be included or not.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://drive.google.com/drive/folders/0B0R1Jgqp8Gg4cVJCZkRkdEthZDQ" rel="nofollow noreferrer">QBIC</a>, 32 bytes</h1>

<pre><code>[0,:-1|i=:-(a*:)┘g=g+i}?i*:+g-i
</code></pre>

<p>This takes parameters in the order <code>h, n, x, w</code>, and <code>y</code> is ignored.</p>

<h2>Explanation</h2>

<p>Each time a variable is read from the cmd line in QBIC, using the <code>:</code> command, it is assigned a letter (a-z). For clarity, I will use <code>h, n, x, w</code> in the explanation instead of the <code>b,c,d,e</code> they would be assigned (<code>a</code> gets taken by the FOR-loop).</p>

<pre><code>First, we want to know the total of the stem
[0,h-1|     FOR a = 0 to the height - 1
  i=n-(a*x)     helper i holds an increment value: this is n, minus the 
                grid-width once for every row we go up.
  g=g+i         helper g is incremented by i for each row
  }         NEXT
  ?         PRINT
   i*w          the center on the top bar times the width (ie the average)
   -i           corrected for that ione i we already counted in the stem
   +g           plus the stem itself
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="http://openjdk.java.net/" rel="nofollow noreferrer">Java (OpenJDK 8)</a>, <s>100</s> <s>99</s> <s>96</s> 91 bytes</h1>



<pre class="lang-java prettyprint-override"><code>x-&gt;W-&gt;H-&gt;n-&gt;{int t=n,i=0,j=-W/2;for(;++i&lt;H;t+=n-x*i);for(;j&lt;W/2;t+=n-x*~-H+j++);return-~t;}
</code></pre>

<p><a href="https://tio.run/##nY89T8MwFEX3/AqPcR27qLAgJxlROjB16IAYTJpGzyS25bxU/VD614MLBjH3TVfnXj3paHVQ3LrG6N3nDL2zHokOTIwIndiPpkawRixkkrjxo4Oa1J0aBvKqwJBLQuINqDB0L3Gfrw02beOzO0kMZThyJsV85OWWlxUvDS8vYJBgYTIoHjJd8O1yJffWp5IxyCuJrDD8uAD6A3V@6yO88oppxqj0DY7e8CvKaQ5mN4NoF0UOFnakD47pBj2Y9u2dKN8O9J/y5jRg0ws7onBhgulZKOe6U/pMY3j8DU9/ZEWp/P4wJdP8BQ" rel="nofollow noreferrer" title="Java (OpenJDK 8) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 38 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda x,W,H,n:~-H*(x*(1-H/2-W)+n)+W*n
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/6fZhvzPycxNyklUaFCJ1zHQyfPqk7XQ0ujQkvDUNdD30g3XFM7T1M7XCvvf0FRZl6JRpqGpY6xjomOsZGm5n8A" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-4 bytes thanks to Jonathan Allan<br>
-4 bytes thanks to Kevin Cruijssen/Ayb4btu</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 12 bytes</h1>
<pre><code>:q*-t0)iq*hs
</code></pre>
<p>Inputs are: <code>H</code>, <code>x</code>, <code>n</code>, <code>W</code>.</p>
<p><a href="https://tio.run/##y00syfn/36pQS7fEQDOzUCuj@P9/Ey5LLmMjLmMA" rel="nofollow noreferrer" title="MATL – Try It Online"><strong>Try it online!</strong></a></p>
<h3>Explanation</h3>
<pre><code>:     % Implicit input: H. Push [1, 2, ..., H]
q     % Subtract 1. Gives [0, 1, ..., H-1]
*     % Implicit input: x. Multiply. Gives [0, x, ..., x*(H-1)]
-     % Implicit input: n. Subtract. Gives [n-0, n-x, ..., n-x*(H-1)]. This is
      % the stem, bottom to top
t     % Duplicate
0)    % Get last element, that is, n-x*(H-1). This is the center top of the &quot;T&quot;
i     % Input: W
q     % Subtract 1
*     % Multiply. Gives n-x*(H-1)*(w-1). This is the sum of the vertical bar
      % excluding its center, which is already accounted for in the stem
h     % Concatenate into a row vector
s     % Sum of vector. Implicit display
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 38 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda x,W,H,n:~-H*(n-x*(W-1+H/2))+n*W
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/6fZhvzPycxNyklUaFCJ1zHQyfPqk7XQ0sjT7dCSyNc11DbQ99IU1M7Tyv8f0FRZl6JRpqGpY6xjomOMVD4PwA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p><a href="https://codegolf.stackexchange.com/a/141921/20260">HyperNeutrino's arithmetic expression</a> with improved grouping.</p>
</div>
<div id="pu8" class="pu"><h1><a href="http://www.mono-project.com/docs/about-mono/releases/5.0.0/#csc" rel="nofollow noreferrer">C# (Visual C# Compiler)</a>, <s>64</s> 52 bytes</h1>



<pre class="lang-cs prettyprint-override"><code>(x,y,W,H,n)=&gt;{for(y=0;H--&gt;1;n-=x)y+=n;return y+W*n;}
</code></pre>

<p><a href="https://tio.run/##bcyxCsIwEIDh2TxFxsReRa1LiekiiINOFjqHeEpAr9JLxVD67BUHN/n51t9z7tlPPQe6yXPiiA8jyD2Qn86jjIPwd8csI@IgOLoYvNz35LeBIvxRyVraSb0hQQMHIG2r4dp2KtmlOeR5tTKU27dOmSXTYew7kilr5mTGyfz@rzZc5MkFUnoQs11L3N5x0XQh4jEQqlqVUEIBGyjWWhsxfps@" rel="nofollow noreferrer" title="C# (Visual C# Compiler) – Try It Online">Try it online!</a></p>

<p>The non-recursive answer did indeed turn out significantly shorter. Gross misuse of for loops and the fact that <code>y</code> is officially a mandatory input even though it's not used.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<p>A construction technique, which ends up much like <a href="https://codegolf.stackexchange.com/a/141923/53748">Luis Mendo's MATL answer</a></p>

<pre><code>Ḷ×ạ⁵µṪ×⁶+S
</code></pre>

<p>A full program taking <code>H</code>, <code>x</code>, <code>n</code>, <code>W</code> in that order (<code>y</code> may be appended if one so wishes).</p>

<p><strong><a href="https://tio.run/##ASkA1v9qZWxsef//4bi2w5fhuqHigbXCteG5qsOX4oG2K1P///80/zn/MzL/Mw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>

<h3>How?</h3>

<pre><code>Ḷ×ạ⁵µṪ×⁶+S - Main link: H, x
Ḷ          - lowered range                         [0,1,2,...,H-2,H-1]
 ×         - multiply (vectorises)                 [0,x,2x,...,(H-2)x,(H-1)x]
   ⁵       - program's 5th argument (3rd input)    n
  ạ        - absolute difference (vectorises)      [n,n-x,n-2x,...,n-(H-2)x,n-(H-1)x]
           -  (note: for an in-range T n&gt;(H-1)x)   (cells of the stem)
    µ      - monadic chain separation (call this stem)
     Ṫ     - tail (pop from AND modify stem)       n-(H-1)x
           -                                       (cell at intersection of stem and top)
       ⁶   - program's 6th argument (4th input)    W
      ×    - multiply                              Wn-W(H-1)x
           -                                       (total value of the top)
         S - sum (the modified stem)               n+n-x+n-2x+...+n-(H-2)x
           -                                       (total value of the stem w/o top cell)
        +  - add (add top to the stem w.o top cell)
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>&nbsp;18 16&nbsp;</s> 15 <a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">bytes</a></h1>

<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/41024/erik-the-outgolfer">Erik the Outgolfer</a> (use of chain separator)</p>

<pre><code>S’×⁵_ðc2Ḣ+⁸’P¤×
</code></pre>

<p>A full program taking <code>[H,W]</code>, <code>x</code>, <code>n</code> in that order (you can add <code>y</code> to the arguments if you like, it's not used).</p>

<p><strong><a href="https://tio.run/##ATEAzv9qZWxsef//U@KAmcOX4oG1X8OwYzLhuKIr4oG44oCZUMKkw5f///9bNCwzXf85/zMy" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>

<h3>How?</h3>

<p>The total is:</p>

<ul>
<li><code>n</code> multiplied by the number of squares used in the <strong>T</strong> (which is <code>W+H-1</code>)</li>
<li>minus the width of the grid, <code>x</code>, times the triangle number of the
height (<code>1+2+3+...+h</code>) to account for the lack as we go up the stem</li>
<li>minus the width of the grid, <code>x</code>, times one less that the height (<code>H-1</code>)
times one less that the width (<code>W-1</code>) to account for the lack at the
top of the <strong>T</strong>, excluding the lack we already accounted for at the top of the stem.</li>
</ul>

<p>That is:</p>

<pre><code>(W + H - 1) * n - ((H - 1) * (W - 1) + Triangle(H)) * x
</code></pre>

<p>The triangle number of <code>H</code> is its binomial with <strong>2</strong> A.K.A. <code>H-choose-2</code>.</p>

<pre><code>c2Ḣ+⁸’P¤× - Link 1: the x * (Triangle(H) + (H-1)*(W-1)): [H,W]; x    
S’×⁵_ðc2Ḣ+⁸’P¤× - Main link: [H,W], x
S               - sum                                    H+W
 ’              - decrement                              H+W-1
   ⁵            - program's fifth argument (3rd input)   n
  ×             - multiply                               (H+W-1)*n
     ð          - dyadic chain separation
      c2        - choose-2 (vectorises)                  [Triangle(H), Triangle(W)]
        Ḣ       - head                                   Triangle(H)
             ¤  - nilad followed by link(s) as a nilad:
           ⁸    -    chain's left argument               [H,W]
           ’    -    decrement (vectorises)              [H-1,W-1]
            P   -    product                             (H-1)*(W-1)
         +      - add                                    (H-1)*(W-1)+Triangle(H)
              × - multiply (by chain's right arg, x)     ((H-1)*(W-1)+Triangle(H))*x
    _           - subtract                               (H+W-1)*n-((H-1)*(W-1)+Triangle(H))*x
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://pyth.readthedocs.io" rel="nofollow noreferrer">Pyth</a>, 23 bytes</h1>
<pre><code>+-*KEQ**JEQctQ2*tE-K*Jt
</code></pre>
<p><strong><a href="https://pyth.herokuapp.com/?code=%2B-%2aKEQ%2a%2aJEQctQ2%2atE-K%2aJt&amp;input=4%0A32%0A9%0A3&amp;debug=0" rel="nofollow noreferrer">Try it here!</a></strong> (note the order of the inputs)</p>
<h1>How?</h1>
<pre>
+-*KEQ**JEQctQ2*tE-K*Jt    Full program. Q is input, E is evaluated input (reads a new line)

  *KEQ                     The second input * the first input.
       *JEQ                The third input * the first input.
           ctQ2            Float division of the the first input decremented by 1, by 2.
      *                    Product.
 -                         Difference.
                tE         The fourth input.
                    *Jt    The product of the third input and the first input decremented by 1...
                 -K        ... Subtracted from the second input
               *           Product.
+                          Sum.
                           Output implicitly.
</pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 52 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>($x,$y,$w,$h,$n)=&lt;&gt;;say$h*($n+$x*(.5-$h/2-$w))+$w*$n
</code></pre>

<p><a href="https://tio.run/##FcJLCoAgFAXQeeu4A/@V4UD67KBFNAgMQqMCc/O9iHOO9dwdEcOjUBSyQlCIfBym/loKgmCIEo9gxmmE2mpkziWyQCTyla@6n33TcW8pXqRnZ5q2@QA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h2>JavaScript (ES6), <s>32</s> 30 bytes</h2>

<p><em>Saved 2 bytes thanks to @Shaggy</em></p>

<pre><code>(w,h,x)=&gt;Q=n=&gt;--h?n+Q(n-x):n*w
</code></pre>

<p>Takes input in a curried format: <code>f(W,H,x,y)(n)</code></p>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>let f =
(w,h,x)=&gt;Q=n=&gt;--h?n+Q(n-x):n*w;

console.log(
  f(3, 4, 9, 9)(32)
);</code></pre>
</div>
</div>
</p>

<h3>How?</h3>

<p>First we note that the sum of the T starting at <strong>n</strong> with height <strong>H</strong> can be broken down into two sums:</p>

<ul>
<li><strong>n</strong></li>
<li>The sum of the T starting one row higher with height <strong>H - 1</strong></li>
</ul>

<p>By repeatedly adding <strong>n</strong> to the total, moving one row up, and subtracting <strong>1</strong> from <strong>H</strong> until it reaches <strong>1</strong>, we end up summing the vertical stem of the T. Moving one row up is accomplished by subtracting <strong>x</strong> from <strong>n</strong>, since it can be observed that the difference between any cell and the one above is <strong>x</strong>.</p>

<p>When <strong>H</strong> reaches <strong>1</strong>, we now have only the crossbar of width <strong>W</strong> left to sum. At this point <strong>n</strong> represents the center of the crossbar. We <em>could</em> sum the crossbar recursively as we did with the stem, but instead we take advantage of a fairly simple formula:</p>

<pre><code>sum(n - a : n + a) = (n - a) + (n - (a-1)) + ... + n + ... + (n + (a-1)) + (n + a)
                   = (n - a) + (n + a) + (n - (a-1)) + (n + (a-1)) + ... + n
                   = 2n + 2n + ... + n
                   = n * (2a + 1)
</code></pre>

<p>In this case, our <strong>a</strong> is <strong>(W - 1) / 2</strong>, which makes</p>

<pre><code>n * (2a + 1) = n * (((W - 1) / 2) * 2 + 1)
             = n * ((W - 1) + 1)
             = n * W
</code></pre>

<p>which is the sum of the crossbar.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/141913/">141913</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




