<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::166708</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>050</td><td>Perl 5 Minteger Mbigint</td><td>250612T155228Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/282261#282261">Xcali</a></td></tr>
<tr d-ix="1"><td>001</td><td>Vyxal 3</td><td>250612T095738Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/282259#282259">Themooni</a></td></tr>
<tr d-ix="2"><td>001</td><td>Vyxal</td><td>220611T020137Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/248468#248468">naffetS</a></td></tr>
<tr d-ix="3"><td>006</td><td>05AB1E</td><td>180612T113940Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166709#166709">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>087</td><td>Powershell</td><td>180612T144532Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166742#166742">mazzy</a></td></tr>
<tr d-ix="5"><td>017</td><td>x86 32bit machine code 32bit integers</td><td>180619T225215Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/167094#167094">Peter Co</a></td></tr>
<tr d-ix="6"><td>144</td><td>C++</td><td>180614T151227Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166852#166852">HatsuPoi</a></td></tr>
<tr d-ix="7"><td>112</td><td>D</td><td>180615T174004Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166899#166899">Adalynn</a></td></tr>
<tr d-ix="8"><td>017</td><td>Attache</td><td>180616T195353Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166931#166931">Conor O&</a></td></tr>
<tr d-ix="9"><td>012</td><td>APL Dyalog Unicode</td><td>180612T141524Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166734#166734">J. Sall&</a></td></tr>
<tr d-ix="10"><td>049</td><td>Bash + core utilities</td><td>180614T222222Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166864#166864">Sophia L</a></td></tr>
<tr d-ix="11"><td>032</td><td>Perl 6</td><td>180614T090203Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166835#166835">Jo King</a></td></tr>
<tr d-ix="12"><td>053</td><td>C89</td><td>180614T043225Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166831#166831">Peter Co</a></td></tr>
<tr d-ix="13"><td>007</td><td>Pyth</td><td>180612T150106Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166747#166747">user4854</a></td></tr>
<tr d-ix="14"><td>066</td><td>Twig</td><td>180613T143021Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166800#166800">Ismael M</a></td></tr>
<tr d-ix="15"><td>086</td><td>SimpleTemplate</td><td>180613T120124Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166791#166791">Ismael M</a></td></tr>
<tr d-ix="16"><td>001</td><td>Charcoal</td><td>180612T154646Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166756#166756">Neil</a></td></tr>
<tr d-ix="17"><td>039</td><td>Haskell</td><td>180612T132059Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166723#166723">ovs</a></td></tr>
<tr d-ix="18"><td>039</td><td>JavaScript</td><td>180612T160104Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166759#166759">Shaggy</a></td></tr>
<tr d-ix="19"><td>011</td><td>CJam</td><td>180612T160025Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166758#166758">NinjaBea</a></td></tr>
<tr d-ix="20"><td>110</td><td>C gcc</td><td>180612T145437Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166744#166744">LambdaBe</a></td></tr>
<tr d-ix="21"><td>049</td><td>Wolfram Language Mathematica</td><td>180612T145418Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166743#166743">JungHwan</a></td></tr>
<tr d-ix="22"><td>012</td><td>J</td><td>180612T134909Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166728#166728">Galen Iv</a></td></tr>
<tr d-ix="23"><td>048</td><td>JavaScript ES6</td><td>180612T134107Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166727#166727">Arnauld</a></td></tr>
<tr d-ix="24"><td>049</td><td>Python 3</td><td>180612T132901Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166725#166725">Romzie</a></td></tr>
<tr d-ix="25"><td>002</td><td>Stax</td><td>180612T132122Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166724#166724">recursiv</a></td></tr>
<tr d-ix="26"><td>002</td><td>MATL</td><td>180612T130100Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166721#166721">Luis Men</a></td></tr>
<tr d-ix="27"><td>050</td><td>Java 8</td><td>180612T114041Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166710#166710">Kevin Cr</a></td></tr>
<tr d-ix="28"><td>031</td><td>Ruby</td><td>180612T125535Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166720#166720">G B</a></td></tr>
<tr d-ix="29"><td>048</td><td>Python 2</td><td>180612T121420Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166718#166718">Rod</a></td></tr>
<tr d-ix="30"><td>010</td><td>SOGL V0.12</td><td>180612T122615Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166719#166719">dzaima</a></td></tr>
<tr d-ix="31"><td>002</td><td>Japt</td><td>180612T121201Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166717#166717">Shaggy</a></td></tr>
<tr d-ix="32"><td>005</td><td>Stax</td><td>180612T120533Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166715#166715">wastl</a></td></tr>
<tr d-ix="33"><td>007</td><td>Canvas</td><td>180612T121047Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166716#166716">dzaima</a></td></tr>
<tr d-ix="34"><td>004</td><td>Jelly</td><td>180612T115156Z</td><td><a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166711#166711">Mr. Xcod</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-Minteger -Mbigint</code>, 50 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{$b=shift;do{$r=$_[$b%@_].$r,$b/=@_}while$b;$r}
</code></pre>
<p><a href="https://tio.run/##FcftCsIgGIbhU5Hxlg1s7UNHJMJOoCOokCS3CWMbuogYO/VM/1zP/czaDsxDK7x7qxWUcL1pF/6aVrAC5A3UrpGPDCwBdRKN3D69GTQoDnbz3D2/aA/toaK0ZnlV1qymrDoXecFoURJ8wQQl9zEhCGchsYyICIqkkUOE4JT73zQvZhqdP15Zlhd5WDMuutM2lDJdOH8" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3/" rel="nofollow noreferrer">Vyxal 3</a>, 1 byte</h1>
<pre><code>⊢
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#H4sIAAAAAAAACk2QUU7DMAyGr1L5CaQwxY7jJJV45hBtNVVbxyZBM3UbL8AFOAZH4ySYpkN78WfL_y__8jvs8vTan6F2BvZDvx0mqAEMbPJ20O7n61uHXc7n62L30j-foG46A4fxeDn_9Q08TflyrBBMA00LHy2YFtYtdGqgwBa6zlxFtIg2s2g_136uuRgkxYR4a3GLpZpl7Tjj_4jWh-LERBE5OfISrHAg5oSE1oaYCJ2QCIoXGwXR2egTO5VTsj7pFFjEBh9TIJSQRG4j8BKh1nvVkkG5KlgXPBZUBfcFdwWmRHTM4q0jjcHeRbToGUkv6T_fhul0yKP-2a3CysLnLy87-gaeAQAA" rel="nofollow noreferrer">Vyxal It Online!</a></p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false" data-babel-preset-react="false" data-babel-preset-ts="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script type="vyxal3"&gt;
⊢ “¶p
##“¶p is display code for join-on-empty-string, prepend newline
&lt;/script&gt;
&lt;script&gt;
    args=[["[\"|\",\"_\"]","2740"],["[\"c\",\"h\",\"a\",\"o\"]","698911"],["[\" \",\"\n\",\"|\",\"_\",\"-\"]","1928149325670647244912100789213626616560861130859431492905908574660758972167966"],["[\":\", \"\n\", \".\", \"_\", \"=\", \" \", \")\", \"(\", \",\"]","3446503265645381015412"]]
&lt;/script&gt;
&lt;script src="https://themoonisacheese.github.io/snippeterpreter/snippet.js" type="module"/&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 1 byte</h1>
<pre><code>τ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLPhCIsIiIsIlwiOlxcbi5fPSApKCxcIlxuMzQ0NjUwMzI2NTY0NTM4MTAxNTQxMiJd" rel="nofollow noreferrer">Try it Online!</a></p>
<h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 3 bytes</h1>
<pre><code>ÅвJ
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//cOuFTV7//yspKVlx6cXbKmhq6ADZXMYmJmamBsZGZqZmJqbGFoYGhqYmhkYA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>7</s> 6 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>gв¹sèJ
</code></pre>
<p>Since it was inspired by an 05AB1E answer, an answer given in 05AB1E seems fitting. :)</p>
<p>-1 byte thanks to <em>@Emigna</em> by removing the foreach and doing this implicitly.</p>
<p><a href="https://tio.run/##MzBNTDJM/f8//cKmskM7Kw@vsP//X0lJyYpLL95WQVNDB8jmMjYxMTM1MDYyMzUzMTW2MDQwNDUxNAIA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##Fcw9CsJAEAXgfk8RUimozMzOryDpvEZQEe3sBCHeRxsLCw8QL@CN1g08eDx4fCC7PR4Lb8dnOf3e1/F1@z66ch8/XU0Z@kTGkA7n3SVpeCCmtm2bNPTL2gmDHDkyiRooGzEHEgKYB2FWUkUVBVfEDC7Bud4pQKIuY1Uw8TBCtVCd7HVa9ZtmPltMfmZWgUzVYMmOgMJIfw" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>g         # `l`: Take the length of the first (string) input
 в        # And then take the second input in base `l`
          # For each digit `y` of this base-converted number:
  ¹sè     #  Push the `y`'th character of the first input
     J    # Join everything together (and output implicitly)
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Powershell, <s>88</s> 87 bytes</h1>

<pre><code>$n,$a=$args;$d=0;for(;$n-ne0){$n=[bigint]::DivRem($n,$a.count,[ref]$d);$s=$a[$d]+$s};$s
</code></pre>

<p>implicit using a .NET class <a href="https://msdn.microsoft.com/en-us/library/system.numerics.biginteger" rel="nofollow noreferrer">BigInteger</a>.</p>

<p>Test script:</p>

<pre><code>$f = {
    $n,$a=$args;$d=0;for(;$n-ne0){$n=[bigint]::DivRem($n,$a.count,[ref]$d);$s=$a[$d]+$s};$s
}

@(
    @{
        n        = [bigint]::Parse("2740")
        ascii    = @("|", "_")
        expected = "_|_|_|__|_||"
    }
    @{
        n        = [bigint]::Parse("698911")
        ascii    = @("c", "h", "a", "o")
        expected = "aaaaaachoo"
    }
    @{
        n        = [bigint]::Parse("1928149325670647244912100789213626616560861130859431492905908574660758972167966")
        ascii    = @(" ", "`r`n", "|", "_", "-")
        expected = @"

    __   __    
   |  |_|  |   
___|       |___
-   -   -   -  
- - - - - - - 
- - - - - - - -
_______________

"@
    }
    @{
        n        = [bigint]::Parse("3446503265645381015412")
        ascii    = @(":", "`r`n", ".", "_", "=", " ", ")", "(", ",")
        expected = @"
_===_
(.,.)
( : )
( : )
"@
    }
) | % {
    $r = &amp;$f $_.n $_.ascii
    $r -eq $_.expected
    $r
}
</code></pre>

<p>output:</p>

<pre><code>True
_|_|_|__|_||
True
aaaaaachoo
True

    __   __
   |  |_|  |
___|       |___
-   -   -   -
 - - - - - - -
- - - - - - - -
_______________

True
_===_
(.,.)
( : )
( : )
</code></pre>

<h2>Explanation</h2>

<pre><code>$n,$a=$args                # let $n is first argument (expected [bigint])
                           # let $a is second argument (expected char array)
$d=0                       # define variable $d to use as reference value
for(;$n-ne0){              # while bigint $n not equals 0
    $n=[bigint]::DivRem($n,$a.count,[ref]$d);
                           # .NET function DivRem returns the quotient of the division
                           # and place remainder to $d
                           # https://msdn.microsoft.com/en-us/library/system.numerics.biginteger.divrem
    $s=$a[$d]+$s           # add a char to the string
}
$s                         # return string
</code></pre>
</div>
<div id="pu5" class="pu"><h1>x86 32-bit machine code (32-bit integers): 17 bytes.</h1>

<p>(also see other versions below, including 16 bytes for 32-bit or 64-bit, with a DF=1 calling convention.)</p>

<p>Caller passes args in registers, including a pointer to the <em>end</em> of an output buffer (like <a href="https://codegolf.stackexchange.com/questions/166708/ascii-art-uncompression-from-a-base-n-number/166831#166831">my C answer</a>; see it for justification and explanation of the algorithm.)  <a href="https://code.woboq.org/userspace/glibc/sysdeps/generic/_itoa.h.html#39" rel="nofollow noreferrer">glibc's internal <code>_itoa</code> does this</a>, so it's not just contrived for code-golf.  The arg-passing registers are close to x86-64 System V, except we have an arg in EAX instead of EDX.</p>

<p>On return, EDI points to the first byte of a 0-terminated C string in the output buffer.  The usual return-value register is EAX/RAX, but in assembly language you can use whatever calling convention is convenient for a function.  (<code>xchg eax,edi</code> at the end would add 1 byte).</p>

<p>The caller can calculate an explicit length if it wants, from <code>buffer_end - edi</code>.  But I don't think we can justify omitting the terminator unless the function actually returns both start+end pointers or pointer+length.  That would save 3 bytes in this version, but I don't think it's justifiable.</p>

<ul>
<li>EAX = n = number to decode.  (For <code>idiv</code>.  The other args aren't implicit operands.)</li>
<li>EDI = end of output buffer  (64-bit version still uses <code>dec edi</code>, so must be in the low 4GiB)</li>
<li>ESI/RSI = lookup table, aka LUT.  not clobbered.</li>
<li>ECX = length of table = base. not clobbered.</li>
</ul>

<p></p>

<p><code>nasm -felf32 ascii-compress-base.asm -l /dev/stdout | cut -b -30,$((30+10))-</code> (Hand edited to shrink comments, line numbering is weird.)</p>

<pre><code>   32-bit: 17 bytes        ;  64-bit: 18 bytes
                           ; same source assembles as 32 or 64-bit
 3                         %ifidn __OUTPUT_FORMAT__, elf32
 5                         %define rdi edi
 6   address               %define rsi esi
11          machine        %endif
14          code           %define DEF(funcname) funcname: global funcname
16          bytes           
22                         ;;; returns: pointer in RDI to the start of a 0-terminated string
24                         ;;; clobbers:; EDX (tmp remainder)
25                         DEF(ascii_compress_nostring)
27 00000000 C60700             mov     BYTE [rdi], 0
28                         .loop:                    ; do{
29 00000003 99                 cdq                    ; 1 byte shorter than   xor edx,edx / div
30 00000004 F7F9               idiv    ecx            ; edx=n%B   eax=n/B
31                         
32 00000006 8A1416             mov     dl, [rsi + rdx]   ; dl = LUT[n%B]
33 00000009 4F                 dec     edi               ; --output  ; 2B in x86-64
34 0000000A 8817               mov     [rdi], dl         ; *output = dl
35                         
36 0000000C 85C0               test    eax,eax           ; div/idiv don't write flags in practice, and the manual says they're undefined.
37 0000000E 75F3               jnz     .loop         ; }while(n);
38                         
39 00000010 C3                 ret
           0x11 bytes = 17
40 00000011 11             .size: db $ - .start
</code></pre>

<p>It's surprising that the simplest version with basically no speed/size tradeoffs is the smallest, but <code>std</code>/<code>cld</code> cost 2 bytes to use <code>stosb</code> to go in descending order and still follow the common DF=0 calling convention.  (And STOS decrements <em>after</em> storing, leaving the pointer pointing one byte too low on loop exit, costing us extra bytes to work around.)</p>

<h1>Versions:</h1>

<p>I came up with 4 significantly different implementation tricks (using simple <code>mov</code> load/store (above), using <code>lea</code>/<code>movsb</code> (neat but not optimal), using <code>xchg</code>/<code>xlatb</code>/<code>stosb</code>/<code>xchg</code>, and one that enters the loop with an overlapping-instruction hack. See code below).  The last needs a trailing <code>0</code> in the lookup table to copy as the output string terminator, so I'm counting that as +1 byte.  Depending on 32/64-bit (1-byte <code>inc</code> or not), and whether we can assume the caller sets DF=1 (<code>stosb</code> descending) or whatever, different versions are (tied for) shortest.</p>

<p>DF=1 to store in descending order makes it a win to xchg / stosb / xchg, but the caller often won't want that; It feels like offloading work to the caller in a hard-to-justify way.  (Unlike custom arg-passing and return-value registers, which typically don't cost an asm caller any extra work.)  But in 64-bit code, <code>cld</code> / <code>scasb</code> works as <code>inc rdi</code>, avoiding truncating the output pointer to 32-bit, so it's sometimes inconvenient to preserve DF=1 in 64-bit-clean functions.  .  (Pointers to static code/data are 32-bit in x86-64 non-PIE executables on Linux, and always in the Linux x32 ABI, so an x86-64 version using 32-bit pointers is usable in some cases.)  Anyway, this interaction makes it interesting to look at different combinations of requirements.</p>

<ul>
<li><strong>IA32 with a DF=0 on entry/exit calling convention: 17B (<code>nostring</code>)</strong>.</li>
<li>IA32: <strong>16B (with a DF=1 convention: <code>stosb_edx_arg</code> or <code>skew</code>)</strong>; or with incoming DF=dontcare, leaving it set: <strong>16+1B <code>stosb_decode_overlap</code></strong> or 17B <code>stosb_edx_arg</code></li>
<li><strong>x86-64 with 64-bit pointers, and a DF=0 on entry/exit calling convention: 17+1 bytes (<code>stosb_decode_overlap</code>)</strong>, 18B (<code>stosb_edx_arg</code> or <code>skew</code>)</li>
<li><p>x86-64 with 64-bit pointers, other DF handling: <strong>16B (DF=1 <code>skew</code>)</strong>, 17B (<code>nostring</code> with DF=1, using <code>scasb</code> instead of <code>dec</code>).  18B (<code>stosb_edx_arg</code> preserving DF=1 with 3-byte <code>inc rdi</code>).</p>

<p>Or if we allow returning a pointer to 1 byte before the string, <strong>15B</strong> (<code>stosb_edx_arg</code> without the <code>inc</code> at the end).  <strong>All set to call again and expand another string into the buffer with different base / table...</strong>  But that would make more sense if we didn't store a terminating <code>0</code> either, and you might put the function body inside a loop so that's really a separate problem.</p></li>
<li><p>x86-64 with 32-bit output pointer, DF=0 calling convention: no improvement over 64-bit output pointer, but 18B (<code>nostring</code>) ties now.</p></li>
<li>x86-64 with 32-bit output pointer: no improvement over the best 64-bit pointer versions, so 16B (DF=1 <code>skew</code>).  Or to set DF=1 and leave it, 17B for <code>skew</code> with <code>std</code> but not <code>cld</code>.  Or 17+1B for <code>stosb_decode_overlap</code> with <code>inc edi</code> at the end instead of <code>cld</code>/<code>scasb</code>.</li>
</ul>

<hr>

<h1>With a DF=1 calling convention: 16 bytes (IA32 or x86-64)</h1>

<p>Requires DF=1 on input, leaves it set.  <a href="https://codegolf.stackexchange.com/questions/132981/tips-for-golfing-in-x86-x64-machine-code/165020#165020">Barely plausible</a>, at least on a per-function basis.  Does the same thing as the above version, but with xchg to get the remainder in/out of AL before/after XLATB (table lookup with R/EBX as base) and STOSB (<code>*output-- = al</code>).</p>

<p>With a normal DF=0 on entry/exit convention, <strong>the <code>std</code> / <code>cld</code>/<code>scasb</code> version is 18 bytes for 32 and 64-bit code, and is 64-bit clean</strong> (works with a 64-bit output pointer).</p>

<p>Note that the input args are in different registers, including RBX for the table (for <code>xlatb</code>).  Also note that this loop starts by storing AL, and ends with the last char not stored yet (hence the <code>mov</code> at the end).  So the loop is "skewed" relative to the others, hence the name.</p>

<pre><code>                            ;DF=1 version.  Uncomment std/cld for DF=0
                            ;32-bit and 64-bit: 16B
157                         DEF(ascii_compress_skew)
158                         ;;; inputs
159                             ;; O in RDI = end of output buffer
160                             ;; I in RBX = lookup table  for xlatb
161                             ;; n in EDX = number to decode
162                             ;; B in ECX = length of table = modulus
163                         ;;; returns: pointer in RDI to the start of a 0-terminated string
164                         ;;; clobbers:; EDX=0, EAX=last char
165                         .start:
166                         ;    std
167 00000060 31C0               xor    eax,eax
168                         .loop:                    ; do{
169 00000062 AA                 stosb
170 00000063 92                 xchg    eax, edx
171                         
172 00000064 99                 cdq                    ; 1 byte shorter than   xor edx,edx / div
173 00000065 F7F9               idiv    ecx            ; edx=n%B   eax=n/B
174                         
175 00000067 92                 xchg    eax, edx       ; eax=n%B   edx=n/B
176 00000068 D7                 xlatb                  ; al = byte [rbx + al]
177                         
178 00000069 85D2               test    edx,edx
179 0000006B 75F5               jnz     .loop         ; }while(n = n/B);
180                         
181 0000006D 8807               mov     [rdi], al     ; stosb would move RDI away
182                         ;    cld
183 0000006F C3                 ret

184 00000070 10             .size: db $ - .start
</code></pre>

<p>A similar non-skewed version overshoots EDI/RDI and then fixes it up.</p>

<pre><code>                            ; 32-bit DF=1: 16B    64-bit: 17B (or 18B for DF=0)
70                         DEF(ascii_compress_stosb_edx_arg)  ; x86-64 SysV arg passing, but returns in RDI
71                             ;; O in RDI = end of output buffer
72                             ;; I in RBX = lookup table  for xlatb
73                             ;; n in EDX = number to decode
74                             ;; B in ECX = length of table
75                         ;;; clobbers EAX,EDX, preserves DF
76                             ; 32-bit mode: a DF=1 convention would save 2B (use inc edi instead of cld/scasb)
77                             ; 32-bit mode: call-clobbered DF would save 1B (still need STD, but INC EDI saves 1)
79                         .start:
80 00000040 31C0               xor     eax,eax
81                         ;    std
82 00000042 AA                 stosb
83                         .loop:
84 00000043 92                 xchg    eax, edx
85 00000044 99                 cdq
86 00000045 F7F9               idiv    ecx            ; edx=n%B   eax=n/B
87                         
88 00000047 92                 xchg    eax, edx       ; eax=n%B   edx=n/B
89 00000048 D7                 xlatb                  ; al = byte [rbx + al]
90 00000049 AA                 stosb                  ; *output-- = al
91                         
92 0000004A 85D2               test    edx,edx
93 0000004C 75F5               jnz     .loop
94                         
95 0000004E 47                 inc    edi
96                             ;; cld
97                             ;; scasb          ; rdi++
98 0000004F C3                 ret
99 00000050 10             .size: db $ - .start
    16 bytes for the 32-bit DF=1 version
</code></pre>

<p>I tried an alternate version of this with  <code>lea esi, [rbx+rdx]</code> / <code>movsb</code> as the inner loop body.  (RSI is reset every iteration, but RDI decrements).  But it can't use xor-zero / stos for the terminator, so it's 1 byte larger.  (And it's not 64-bit clean for the lookup table without a REX prefix on the LEA.)</p>

<hr>

<h1>LUT with explicit length <em>and</em> a 0 terminator: 16+1 bytes (32-bit)</h1>

<p>This version sets DF=1 and leaves it that way.  I'm counting the extra LUT byte required as part of the total byte count.</p>

<p>The cool trick here is <strong>having the same bytes decode two different ways</strong>.  We fall into the middle of the loop with remainder = base and quotient= input number, and copy the 0 terminator into place.</p>

<p>On the first time through the function, the first 3 bytes of the loop are consumed as the high bytes of a disp32 for an LEA.  That LEA copies the base (modulus) to EDX, <code>idiv</code> produces the remainder for later iterations.</p>

<p>The 2nd byte of <code>idiv ebp</code> is <code>FD</code>, which is the opcode for the <code>std</code> instruction that this function needs to work.  (This was a lucky discovery.  I had been looking at this with <code>div</code> earlier, which distinguishes itself from <code>idiv</code> using the <code>/r</code> bits in ModRM.  The 2nd byte of <code>div epb</code> decodes as <code>cmc</code>, which is harmless but not helpful.  But with <code>idiv ebp</code> can we actually remove the <code>std</code> from the top of the function.)</p>

<p>Note the input registers are difference once again: EBP for the base.</p>

<pre><code>103                         DEF(ascii_compress_stosb_decode_overlap)
104                         ;;; inputs
105                             ;; n in EAX = number to decode
106                             ;; O in RDI = end of output buffer
107                             ;; I in RBX = lookup table, 0-terminated.  (first iter copies LUT[base] as output terminator)
108                             ;; B in EBP = base = length of table
109                         ;;; returns: pointer in RDI to the start of a 0-terminated string
110                         ;;; clobbers: EDX (=0), EAX,  DF
111                             ;; Or a DF=1 convention allows idiv ecx (STC).  Or we could put xchg after stos and not run IDIV's modRM
112                         .start:
117                             ;2nd byte of div ebx = repz.  edx=repnz.
118                             ;            div ebp = cmc.   ecx=int1 = icebp (hardware-debug trap)
119                             ;2nd byte of idiv ebp = std = 0xfd.  ecx=stc
125                         
126                             ;lea    edx, [dword 0 + ebp]
127 00000040 8D9500             db  0x8d, 0x95, 0   ; opcode, modrm, 0 for lea edx, [rbp+disp32].  low byte = 0 so DL = BPL+0 = base
128                             ; skips xchg, cdq, and idiv.
129                             ; decode starts with the 2nd byte of idiv ebp, which decodes as the STD we need
130                         .loop:
131 00000043 92                 xchg    eax, edx
132 00000044 99                 cdq
133 00000045 F7FD               idiv    ebp            ; edx=n%B   eax=n/B;
134                             ;; on loop entry, 2nd byte of idiv ebp runs as STD.  n in EAX, like after idiv.  base in edx (fake remainder)
135                         
136 00000047 92                 xchg    eax, edx       ; eax=n%B   edx=n/B
137 00000048 D7                 xlatb                  ; al = byte [rbx + al]
138                         .do_stos:
139 00000049 AA                 stosb                  ; *output-- = al
140                         
141 0000004A 85D2               test    edx,edx
142 0000004C 75F5               jnz     .loop
143                         
144                         %ifidn __OUTPUT_FORMAT__, elf32
145 0000004E 47                 inc     edi         ; saves a byte in 32-bit.  Makes DF call-clobbered instead of normal DF=0
146                         %else
147                             cld
148                             scasb          ; rdi++
149                         %endif
150                         
151 0000004F C3                 ret
152 00000050 10             .size: db $ - .start
153 00000051 01                     db 1   ; +1 because we require an extra LUT byte
       # 16+1 bytes for a 32-bit version.
       # 17+1 bytes for a 64-bit version that ends with DF=0
</code></pre>

<p>This overlapping decode trick can also be used with <code>cmp eax, imm32</code>: it only takes 1 byte to effectively jump forward 4 bytes, only clobbering flags.  (This is terrible for performance on CPUs that mark instruction boundaries in L1i cache, BTW.)</p>

<p>But here, we're using 3 bytes to copy a register and jump into the loop.  That would normally take 2+2 (mov + jmp), and would let us jump into the loop right before the STOS instead of before the XLATB.  But then we'd need a separate STD, and it wouldn't be very interesting.</p>

<p><a href="https://tio.run/##zVlrbxpLEv3OryhFGxliwGB7vYkRH0Ls3IuUxJHt3M0q10I9Mw10PA8yPWMgu/vbs6eqZ2Bw8ONubrRryfIMVFfX45yq6rayVkdeuGzFykbfvj01YxPENBqdfbh8/@Fy9Prs/O3Ly9GoSTocH@zXeoPh5QXh4WmgxybWlAaGdGDW7xbvtvKuFqTVYv3u4d2rvPt49yvvAd4DvOs4MONajfDT69EkTDwV0jM1znT6jLKpplB5OiSTUZRA0mhLxpKKSS9mOjWRjjMsGGuV5aleqT85fV0f57Efq0g3qHw6LvWXH9RqLKisb8zIT6JZqq0dxYnNUhNPGrUeLDLxLM9saV@Mdzp9@ZH6FOeRp1PKEgq0nwS6FDljkfOTIUTgGyVjSvIMOsjLx2MsoHqUW7xplguTOaLcKNcOZe0Frw2T5DqfUaa8cKV6ILu/4t1DHU@yKWt3EmxqqhGD2B7TLDEx4lcaAhM5kDZTacYrFHVa@Doyscp0QM5b0eAjPHDKHvfo9ORjP1Qw1J@qtMk@9zu1tug4Fnui5Ib/0OAfl6f0Cfi4ahIkYPfsmLb89ChI/ikr/eDLdoEuecsMhk6TlM3Ppkgz0SJJGSpN/NIeBeZGlBg88F@AalMJxPrx0wF/pfC0N6htmBuETVgL9O4yBq@cYSEi@ubD5Sesu6r1WMxmgYu69ZX15BFpFg2gwXeWt1pFkov3LAXCEF1LR4ctD@AtUmI3bCmihu3Xmp4Vivr42FkOLaIX7jSZYvz8Of4q8hLuyup/z6cm1PW40XNrAQkkzXwF9AOP/kItcims1VABkC4VmklM3aNtPICV1mv8ecjfBPng4y2Qiwd1HykHNVS8hO2TJpZm1Hgk/kv0splN4LdJ7IhOb5CGk9dUt4qfuqLlYF/SgpoCHo5proHOeCdrPAzxItIwdCej3OpxHoZs7CxUvgZmjRQoKFSpdiJgFy386YS9mk91qlFkrYtaCTNBGd1BG@AOez@WWn@QHW08vg7VxFIeu@IZtB12Qq0c3q1hyniLXSFMr4xdCWlK4nBZxmubFwD1WauFpA0dwX4U1H54R9C4WrtY3Yv9sue8fDP85d0d4LdZYr0RojVS6aTBqhfPj1pHh3SxtL8htROaKcuZdRAtSm9BgD@LEGNUvkWoMm@ThCf3kfCHOOKUVMlxjG5x8rrfJT@Jb9BrTRLTPMlDtA2wifYHVAcHJO5cF01sM63EVWRpTzLU2KbVV2HYKoxBDwI9K1pB0brNTBhSrPHlxeWJi/Lw3St4P6SCyKXiosQKl@cGHt8C6LHzYHMHgCIFyqAbtAyYyFTq36gB3H1uAxWsdTvHSSYmwkjOVRkq@MacX4esWAVIFSx2qrkmFKplGPrvGFzbqmwtr1bygZMXcYbVNqoq7oXShpny6JIqvFqbv5XcDtTCcHW7ZxV9e12ozM2euCblluapwU5jqT9A1sX1MlTXuifzSqTiHNZYtbT8vtxB4azUqO8qRjFEMhRdl76vWPS4TOzuPtAkH1EiHPtGyY1OQzX7OTPjA4WiuTHPoaDXxyZF/A0PUX4y45mZpxtPWX1FypbKyzVJeqvDDt4zBiD98wdNqWb1fqchI2aTVkUIQUm31B5QK5lbxw6mRv3i8lUDLkMYLdcXhrNvrt/yKUKAKxxntmIuo@HJ8Lcdy/Xi/O0G13urqa9gfZX0vc8RmlI7SCTxBdj2oVbIAm/FJFCmz8PA17bjGx7jr@2iUFV@nPAMwn7ktx3P@whmF58Yn7@pY@4O5hgiWoH28glGSobXd7uatSYuS33qLMaMAdZnM7@wE7juLDwl40uvHG2YnGSi6GBfykRmyeHmQJRbyTkfwIRbsgpqoOfwebPUVihkbenRYRPK0CLJXpuZ5VTJ@rlaMjI4arBrgOREZjLNGIhzDRnEuvVVp8keAlyjO396Rc2SCq/C/oCVhgmaDV46PHPxHEKfcbjCMVEaqIiaaBYa32StAskOhWUCiyFHQvEpmCdpAI92OaCu6jmPnwfs8Yu/uvGvR8mM2dtkCKURf8jVn1U5Pak32w2MnR3sX8FjPuNJtpAbsgmdvMHT4P2b3U7BsgIdLmoM3CZ3gaZgltNbwsfVDEcv65zj@G5DQ5MwM/nTYonlWLModzvQhFvWH29E3uyBRtQrmZvEAhrUsixdNrcayEQUs2ASYlTWyCaF5loXxBXfyRUifM19pD5GewC/ImXQCVC3fn7vKxl//MNdcFvLeugiRjIQf3/w7BVDkHL2rk40iNdbhEgOPLdmrMpsFidpBGdRXDuYhsvDyAOtsnpVc2fLXNU3D6d5XruLQ732Fc9Xc87cl9yk2t3foKJxXxIPHuq113q@rbf@f03Y@AQVIQ9z@3PuYzruHmZ1LbNqXhtXFrd612OOjW403VoK/nc3Nj@V1Y/j55ZDKANjb1AeRW/d5KiwJKeUCXfggIyWvCt0Qpeqkml30uibkGAkL40aZl6Vh3zKDCu7Sq8BSKsf@fhIoBhXjvCpHODl46vq0R4243MQBmTZffH8qrCdy/UKYoxZBqvjE6rLxVSc8lDNY02LolSzSAlhPvp0uAc4/GN0cD7zPEB33LVWfdhIN6cPipkZhBHbYgYsWh9qESxCi9ly3qpesyHnTQ5BdQtukHwbXdLmHgu3Tfm1u6VRp4S5cmGOThAE/HmlMFXYTX8vJ1Y5k3IMpboJWG5UmGsuFROdFdfdGGMy2phiiquruYqz1bVNzxnGVbIIYDrhLPK1iHM498rk7xcxlmNYvUHjNImQWlRFXSlRMMKfav9absnQrXBu85M0zWeY5HSUpMvaHQNb6fIKMovF5a@no4vL8@G7X37vLHiPmH7vsCDvcthxk@dd@kxbt@@HXftxHbXClvKcWOHUYec2HA/d/qN35yMJ1QaW8H236NNcTTAtdtbFgZd3V2WZhfm/IqU0y5YVY2lHemGyeqdR3l@8HAwr3blAM3M5fYzN3Xts5tw7q7CtwwttQKHb5JyMisbF6hsCg9raFeioxo733D9wPX/Em7Izo0maoNk6XO3lNt3DLBPmgd5TNtrLYwPyjY4O29MttqxD4rQgMKsRxGpfToPtNAlUpmrFv3XcCdXdbKMwwtEvOe3/DbGRb45lLHnyr9GTIqwrmaMXz190uxtSr359efak3FCahZRVEedCvf7HDJ@t2Nwn6/P0k/JWyFs@qp6sHaq64ypzzf05psxEfOvV6fCOO4sdFySkyGKhKxeRjH6AjlZ2ueYt08Rxsb2iltMGxon9tW//AQ" rel="nofollow noreferrer" title="Assembly (nasm, x64, Linux) – Try It Online">Try it online! (with a <code>_start</code> caller that uses <code>sys_write</code> on the result)</a></p>

<p>It's best for debugging to run it under <code>strace</code>, or hexdump the output, so you can see verify that there's a <code>\0</code> terminator in the right place and so on.  But you can see this actually work, and produce <code>AAAAAACHOO</code> for an input of </p>

<pre><code>num  equ 698911
table:  db "CHAO"
%endif
    tablen equ $ - table
    db 0  ; "terminator" needed by ascii_compress_stosb_decode_overlap
</code></pre>

<p>(Actually <code>xxAAAAAACHOO\0x\0\0...</code>, because we're dumping from 2 bytes earlier in the buffer out to a fixed length.  So we can see that the function wrote the bytes it was supposed to and <em>didn't</em> step on any bytes it shouldn't have.  The start-pointer passed to the function was the 2nd-last <code>x</code> character, which was followed by zeros.)</p>
</div>
<div id="pu6" class="pu"><h2>C++, <s>150</s> 144 bytes, <code>uint64</code> input</h2>

<p>-6 bytes thanks to Zacharý</p>



<pre class="lang-cpp prettyprint-override"><code>#include&lt;string&gt;
using s=std::string;s u(uint64_t n,s b){s t;for(;n;n/=b.size())t=std::to_string(n%b.size())+t;for(auto&amp;a:t)a=b[a-48];return t;}
</code></pre>

<p>Using a variable to store the size would increase the bytecount by 1</p>

<p>To call the function :</p>

<pre class="lang-cpp prettyprint-override"><code>u(2740, "|_")
</code></pre>

<p>First the number, second is the string ( char array )</p>

<p>Test cases :</p>

<pre class="lang-cpp prettyprint-override"><code>std::cout &lt;&lt; u(2740, "|_") &lt;&lt; '\n' &lt;&lt; u(698911, "chao") &lt;&lt; '\n';
return 0;
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://dlang.org/" rel="nofollow noreferrer">D</a>, 112 bytes</h1>
<pre class="lang-d prettyprint-override"><code>import std.conv;C u(C,I)(I n,C b){C t;for(I l=b.length;n;n/=l)t=to!C(n%l)~t;foreach(ref c;t)c=b[c-48];return t;}
</code></pre>
<p><a href="https://tio.run/##Vc7BagIxEAbgs/sUo1CYgXVbi1gl7CknoUdvIiWbjd1ATCQ7sQe7ffVtKi3Uw1zm//hn2nG0p3OIDD23lQ7@IiQklOWWcAu@lNDQVQKLY4h54eqmcsa/cye88I@1I645TCX6B0dfN2WU7jCaI2jBpOtmr@fL9UFEwyn6XDSMKnEA1etOxR53hDvQBFf4E2GKP9H@QKhJwFAUl2BbOCnrMbti8u/hPDaIYvIRLRvnMeHzy/IpvZYw@3ybVb9HiO7IarPeLBY3lONwx4bxGw" rel="nofollow noreferrer" title="D – Try It Online">Try it online!</a></p>
<p>This is a port of <a href="https://codegolf.stackexchange.com/a/166852/55550">HatsuPointerKun's C++ answer</a></p>
<p>The calling style is <code>u(ulong(n), to!(char[])(b))</code>, where <code>n</code> and <code>b</code> are the left and right arguments</p>
<h2>D specific stuff</h2>
<p>Sadly, we need to import <code>std.conv</code> to do any type conversions above <strong>very</strong> basic type conversion.</p>
<p>Using the golfy template system, and giving the function the required types (which is why calling it is not just <code>u(n,b)</code>), we can shorten occurrences of <code>char[]</code> and <code>ulong</code> to <code>1</code> byte each, when inside f the function.</p>
<p>D initializes our types for us, so <code>C t;</code> is short for <code>C t=cast(char[])([])</code></p>
<p><code>to!C</code> converts the integer <code>n%l</code> to a character array (using codepoints), and <code>~</code> is concatenation</p>
<p><code>foreach(ref c;t)</code> is like C++'s <code>for(... : ...)</code> loop, but a little longer. <code>ref</code> is like <code>&amp;</code>, it treats <code>c</code> as copied-by-reference (i.e., we can modify <code>t</code>). Luckily, D infers the type of <code>c</code> without <em>any</em> keyword denoting type.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/ConorOBrien-Foxx/Attache" rel="nofollow noreferrer">Attache</a>, 17 bytes</h1>

<pre><code>{_[_2&amp;ToBase!#_]}
</code></pre>

<p><a href="https://tio.run/##RY7BTsMwDIbvfYoQ0AQioNhJnGTSpAluHBCH3UoUVaVlk1A30d7GePXisMMs@ZNs//bvZpqadtvNvViuxHzMdcbFZv/UjN3VdU6n@bXrPsb65nBoP1NVvX3vhmnTjdMzC8b6@NXf59P6Zb8b1ovfXom6Ehw1equ5kD9SySxTUuc2xRAByqDlwZaz4dxfBBAxgI0GHXlN1qO1ERC09iEiGEIiIEc6EIDRwUVrWI5Ru8iVt0TauxA9AvlIVJwEO7wPjPMvSj5c7Iy15LRBPmmdCaDBWcCytZRK/K8J@ViQC1YFouCu4LZA8bUqpfkP" rel="nofollow noreferrer" title="Attache – Try It Online">Try it online!</a></p>

<h2>Explanation</h2>

<pre><code>{_[_2&amp;ToBase!#_]}
{               }  ?? anonymous lambda; input: _ = dictionary, _2 = encoded
   _2&amp;ToBase       ?? convert _2 to base
            !#_    ?? ... Size[_]
 _[            ]   ?? and take those members from the dictionary
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>14 13 </s>12 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>⊢⌷⍨∘⊂⊥⍣¯1⍨∘≢
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkGXECWWxCQZWhkYf7/UdeiRz3bH/WueNQx41FX06OupY96Fx9abwgV6Vz0Pw2o9FFvH0R/V/Oh9caP2iYCecFBzkAyxMMz@L@RuYmBQpoCkOsV7O@nrlQTr6TOZWZpYWloiCycnJGYD5QwNjExMzUwNjIzNTMxNbYwNDA0NTE0QlZoFZOnF2@roKmho6QOAA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p>Infix tacit function; can't handle the largest test case because of floating point representation.</p>

<p>Saved <s>1</s> 2 bytes thanks to @Adám!</p>

<p><s>13 bytes added for the headers: <code>⎕IO←0</code>: <strong>I</strong>ndex <strong>O</strong>rigin = 0 and <code>⎕FR←1287</code>: <strong>F</strong>loat <strong>R</strong>epresentation = 128 bits.</s> (I'd forgotten that this <a href="https://codegolf.meta.stackexchange.com/a/14232/43319">doesn't apply.</a>)</p>

<h3>How?</h3>

<pre class="lang-apl prettyprint-override"><code>⊢⌷⍨∘⊂⊥⍣¯1⍨∘≢   ⍝ Tacit function, infix.
           ≢   ⍝ Tally (number of elements in) the right argument.
         ⍨∘    ⍝ Then swap the arguments of
     ⊥⍣¯1      ⍝ Base conversion (to base ≢&lt;r_arg&gt;)
    ⊂          ⍝ Enclose (convert to an array)
  ⍨∘           ⍝ Then swap the arguments of
 ⌷             ⍝ Index
⊢              ⍝ (Into) the right argument.
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash + core utilities</a>, 49 bytes</h1>



<pre class="lang-bash prettyprint-override"><code>dc -e`echo -en $2|wc -c`o$1p|tr -dc 0-9|tr 0-9 $2
</code></pre>

<p><a href="https://tio.run/##FYpLDsIwDAWvkkW3kWzHeY7vUolCqNRViwCJTe@emtW8zzzun22MZ095Xda@HcE9TXL@YunLMfHr/L5TDoGy/2Mg/jEGuzRWL1JhBDVRdRYmsubCBQIwKqiBuVCrriV0caoezRQgq81NGObAmElp3s9bvgA" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>

<h1>Comments/explanation</h1>

<p>This takes command-line arguments as input (the number in base 10, then a single string with the list of characters) and outputs to stdout. Special characters like space, newline, etc may be entered in octal notation (for example, <code>\040</code> for a space), or <code>\n</code> for a newline, <code>\t</code> for tab, or any other escape sequence that <code>echo -e</code> and <code>tr</code> interpret identically.</p>

<p>A lot of the bytes here are to handle special characters and larger test cases.  If I only have to handle non-terrible characters and the numbers are small (for example, the first test case), the following 24 bytes will do it:</p>

<pre class="lang-bash prettyprint-override"><code>dc -e${#2}o$1p|tr 0-9 $2
</code></pre>

<p>This uses parameter expansion <code>${#2}</code> to get the number of characters in the string, builds a dc program to do the base conversion, and then sends the converted number through <code>tr</code>.</p>

<p>This won't handle newlines or spaces or tabs, though, so to deal with escape sequences without affecting the base, I do a character count <code>wc -c</code> after interpreting the escapes with <code>echo -en</code>. This expands the program to 38 bytes:</p>

<pre class="lang-bash prettyprint-override"><code>dc -e`echo -en $2|wc -c`o$1p|tr 0-9 $2
</code></pre>

<p>Unfortunately, dc has an annoying "feature" where if it's outputting a large number, it will line wrap it with a slash+newline sequence, so the larger test cases have this extra output. To remove it, I pipe dc's output through <code>tr -dc 0-9</code> to remove non-numeric characters. And there we are.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, 32 bytes</h1>

<pre class="lang-perl6 prettyprint-override"><code>{$^a.base($^b).comb&gt;&gt;.&amp;{$b[$_]}}
</code></pre>
<p><a href="https://tio.run/##ZY7dTsMwDIXveYooqpZWClHsOE7MtL3I2Kp2GgLEVsSu0Nizl4Sfq134k61z7OP3w8cbz8dPtXhSKzVfmt3gxuF8aJvd2Ln9dBzXa7e4NOOm6bfX67w8D9XbYiJv1UZ/aat7ve3c6/RyWt79qSxZAKq@L/pzqaHUdOMDwQwkASMnz5SQSADB@5QFITAyA0f2mQGCz1EoFDuKj1KmRMw@xSwJgZMw10BVgh5PBb@fWX1/kxqIOPqA5TLFkMFDJMCybB6MVT/byrjSmr5iVaEquoq2wpr/o/M3" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<p>Anonymous code block that take an integer and a list of characters and returns a list of characters.</p>
<h3>Explanation:</h3>
<pre class="lang-perl6 prettyprint-override"><code>{                              }  #Anonymous code block
 $^a.base($^b)                    #Convert number to base (len(list))
              .comb               #Convert number to list of characters
                   &gt;&gt;             #Map each character to
                     .&amp;{$b[$_]}   #To the index of that character in the list
</code></pre>
</div>
<div id="pu12" class="pu"><h1>C89, limited-range signed <code>int n</code>, <s>64</s> 53 bytes</h1>
<ul>
<li>changelog: take a <code>char **out</code> and modify it, instead of taking and returning a <code>char *</code></li>
</ul>
<p>Takes the number as an <code>int</code>, the lookup table as an array + length.<br />
Output is written into a <code>char *outbuf</code>.  Caller passes (by reference) a pointer to the end of the buffer.  Function modifies that pointer to point to the first byte of the string on return.</p>
<pre><code>g(n,I,B,O)char*I,**O;{for(**O=0;n;n/=B)*--*O=I[n%B];}
</code></pre>
<p>This is valid C89, and works correctly even with optimization enabled.  i.e. doesn't depend on gcc <code>-O0</code> behaviour when falling off the end of a non-void function or have any other UB.</p>
<p>Passing a pointer to the end of a buffer is normal for an optimized int-&gt;string function, such as <a href="https://code.woboq.org/userspace/glibc/sysdeps/generic/_itoa.h.html#39" rel="nofollow noreferrer">glibc's internal <code>_itoa</code></a>.  See <a href="https://stackoverflow.com/questions/13166064/how-do-i-print-an-integer-in-assembly-level-programming-without-printf-from-the/46301894#46301894">this answer</a> for a detailed explanation of breaking an integer into digits with a div / mod loop like we're doing here, in C as well as x86-64 asm.  If the base is a power of 2, you can shift/mask to extract digits MSD first, but otherwise the only good option is least-significant-digit first (with modulo).</p>
<p><a href="https://tio.run/##lVRNb5tAEL3zK0aJ0gCF2E6rKJi6B/fQ@uRjD6kVLbDgVWGX7i5J3Mh/vXQG8FdaNSoHaz0fb2bevN00LNK0bQtXBotgHiy9dM20vwh8fxk/50q7eJiNYxnL0Wzu@WGIfxd38mK@irftPM67vNOs@cxYXXLpLrz4FQTHGflQTIE/1aVIhQ0xrbBrKJX63tRgWVLyAAZjzYzhGTADTCq75hqYLhzwIZ@CqP4FQCmATQlJ8SPHORc5jOHkw0YaWagyxxIPXBuhZBeKdiEtSJgB1gTZVAnXVJWsc7Qa8ZODymGB54QZTj6iA3yyCFk3tu/j4PCXO89INZYCcJLdfMkGNM@nFI0fdsGl1Zsp1Aor4tBWdY2UzFiMtV3tASVp8pzrq6PUJ2Gn8DI1F/oolyzjEN2VkMxiAz1R2N8pbMfcgxLZnqf7v6rGeXaoej8pISiD06JjR/PnU5Ibww26gaNh84hr5fDIyQpDMpalzAPWOD7d2773bpah6WGKIZl0uJOgs0tFLe4xB0USXK1V1qQcJv0MDLcDVlSoo4ynmle4D0I@qrXjd9cprbdHjp2tc85lJnKHVCfTssk4fDA2E@pq/fHUVIrkpY1mIJtDaquYkC4dUC1pMDCM54e7lTew3km1qbA@s0q4nXOy8uKjlfSKnEHnu17FzsGHPeOu76JoFcOfH1LDUtuwchAEyvRHI3pCQBi8c8V94koPsfHoYhveiA79a3Cg/bXPhygivEQUqH3VFGtaHy7h5n2YCEsz8oJuv8y6CwfXV/@B/ZVDpuSlxV@8HhZ3g1qsNU8FqTEm2ec4JmlQyXLTCdGIQmIUkUtPAgFVvDLcuj1jAVw@XQbYtvdCmSgMgxKn9jOeNEVxJMn9BenFgjBvo9t4eJt60RKHQf9QBPAGg3CR57ykN2bYNRJLT1D/3naBw66Lk1z0HgF0cqSgGuVlc/fswnyTZwH0/s6juW20xJvmbNv2JrqNJpP20xe2/JXmJStMGy7ftSFKdpbeRr8B" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a>.  Ungolfed version:</p>
<pre><code>/* int n = the number
 * int B = size of I = base
 * char I[] = input table
 * char **O = input/output arg passed by ref:
 *    on entry: pointer to the last byte of output buffer.
 *    on exit:  pointer to the first byte of the 0-terminated string in output buffer
 */
void ungolfed_g(n,I,B,O)char*I,**O;
{
    char *outpos = *O;     /* Golfed version uses *O everywhere we use outpos */
    *outpos = 0;           /* terminate the output string */
    for(;n;n/=B)
        *--outpos = I[n%B]; /* produce 1 char at a time, decrementing the output pointer */
    *O = outpos;
}
</code></pre>
<p>In this explicit-length version, the input is a <code>char table[]</code> which does <em>not</em> need a terminating 0 byte, because we never treat it as a string.  It could be an <code>int table[]</code> for all we care.  C doesn't have containers that know their own length, so pointer+length is the normal way to pass an array with a size.  So we choose that instead of needing to <code>strlen</code>.</p>
<p>The maximum buffer size is approximately <code>sizeof(int)*CHAR_BIT + 1</code>, so it's small and compile-time constant.  (We use this much space with base=2 and all the bits set to 1.)  e.g. 33 bytes for 32 bit integers, including the <code>0</code> terminator.</p>
<hr />
<h1>C89, signed <code>int</code>, table as an implicit-length C string, 65 bytes</h1>
<pre><code>B;f(n,I,O)char*I,**O;{B=strlen(I);for(**O=0;n;n/=B)*--*O=I[n%B];}
</code></pre>
<p>This is the same thing but the input is an implicit-length string so we have to find the length ourselves.</p>
</div>
<div id="pu13" class="pu"><h1>Pyth, <s>9</s> <s>8</s> 7 bytes</h1>

<pre><code>s@LQjEl
</code></pre>

<p>Saved a byte thanks to hakr14 and another thanks to Mr. Xcoder.<br>
<a href="http://pyth.herokuapp.com/?code=s%40LQjEl&amp;input=%5B%22+%22%2C%22%5Cn%22%2C%22%7C%22%2C%22_%22%2C%22-%22%5D%0A1928149325670647244912100789213626616560861130859431492905908574660758972167966&amp;debug=0" rel="nofollow noreferrer">Try it here</a></p>

<h3>Explanation</h3>

<pre><code>s@LQjEl
    jElQ      Convert the second input (the number) to the appropriate base.
 @LQ          Look up each digit in the list of strings.
s             Add them all together.
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Twig, 66 bytes</h1>
<p>Created a <code>macro</code> that must be <code>import</code>ed into a template.</p>
<pre><code>{%macro d(n,c)%}{%for N in n|split%}{{c[N]}}{%endfor%}{%endmacro%}
</code></pre>
<hr>
<h2>Values expected:</h2>
<p>For the first arguments (<code>n</code>):</p>
<ul>
<li>number</li>
<li>string</li>
</ul>
<p>For the second argument (<code>c</code>):</p>
<ul>
<li>Array of numbers</li>
<li>Array of strings</li>
</ul>
<hr>
<h2>How to use:</h2>
<ul>
<li>Create a <code>.twig</code> file</li>
<li>Add <code>{% import 'file.twig' as uncompress %}</code></li>
<li>Call the macro <code>uncompress.d()</code></li>
</ul>
<h2>Ungolfed (non-functional):</h2>
<pre><code>{% macro d(numbers, chars) %}
    {% for number in numbers|split %}
        {{ chars[number] }}
    {% endfor %}
{% endmacro %}
</code></pre>
<hr>
<hr>
<p>You can test this code on: <a href="https://twigfiddle.com/54a0i9" rel="nofollow noreferrer">https://twigfiddle.com/54a0i9</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/ismael-miguel/SimpleTemplate" rel="nofollow noreferrer">SimpleTemplate</a>, 86 bytes</h1>
<p>Wow, this was a huge challenge!</p>
<p>This was made hard due to the lack of direct access to specific indexes when the index is a variable.<br />
A bug also made it longer, requiring to store the values inside a variable.</p>
<pre><code>{@setA argv.1}{@eachargv.0}{@setC C,&quot;{@echoA.&quot;,_,&quot;}&quot;}{@calljoin intoC&quot;&quot;,C}{@/}{@evalC}
</code></pre>
<hr>
<h2>Values expected:</h2>
<p>The first argument (<code>argv.0</code>) can be:</p>
<ul>
<li>An integer</li>
<li>A string with numbers</li>
<li>An array of integers</li>
</ul>
<p>The second argument (<code>argv.1</code>) can be:</p>
<ul>
<li>A string</li>
<li>An array</li>
</ul>
<h2>How this works?</h2>
<p>It works this way:</p>
<ul>
<li>Cycles through the number/string passed as the first argument</li>
<li>Sets the variable <code>C</code> to be an array containing:
<ul>
<li>The previous value <code>C</code></li>
<li>The string <code>&quot;{@echoA.&quot;</code></li>
<li>The value of the loop</li>
<li>The string <code>&quot;}&quot;</code></li>
</ul>
</li>
<li>Joins everything together (using PHP's <code>join</code> function)<br />
This results in, for example, <code>C</code> containing <code>&quot;{@echoA.0}{@echoA.1}...&quot;</code></li>
<li>Evaluates the result of <code>C</code></li>
</ul>
<h2>Ungolfed:</h2>
<pre><code>{@set args argv.1}
{@each argv.0 as number}
    {@set code code, &quot;{@echo args.&quot;, number , &quot;}&quot;}
    {@call join into code &quot;&quot;, code}
{@/}
{@eval code}
</code></pre>
<hr>
<p>You can try this code on: <a href="https://ideone.com/NEKl2q" rel="nofollow noreferrer">https://ideone.com/NEKl2q</a></p>
<hr>
<h3>Optimal result</h3>
<p>If there weren't bugs, this would be the best result, accounting for the limitations (77 bytes):</p>
<pre><code>{@eachargv.0}{@setC C,&quot;{@echoargv.1.&quot;,_,&quot;}&quot;}{@calljoin intoC&quot;&quot;,C}{@/}{@evalC}
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>3</s> 1 bytes</h1>

<pre><code>⍘<s>θη</s></code></pre>

<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRMMpsTg1uATITNfQ1LT@/z/a2MTEzNTA2MjM1MzE1NjC0MDQ1MTQSEchWt1KXUdBPSYPROqBiHgQYQsiFECEJojQABE66rGx/3XLcgA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Edit: Saved 2 bytes thanks to @ASCII-only. Previous version before the builtin was added, 8 bytes:</p>

<pre><code>⭆↨θＬη§ηι
</code></pre>

<p><a href="https://tio.run/##FcXBCsIwDADQX8mtCURZ13aI4kFvgoLgcQ4ps6yDUXUW8e@rubzXRz/3Dz@Vcp7HlPGS/w0n/8S9fwd8MRxDGnLESMSwy4d0D1@MDCMRbUppjbWNq0zduMY6s9KVdlbXDK1aKwZ1TeJSuAlbAQQSUGDVdWXxmX4" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>

<pre><code>    η       Second input
   Ｌ        Length
  θ         First input
 ↨          Base convert to array
⭆           Map over values and join
      η     Second input
       ι    Current value
     §      Index into list
            Implicitly print result
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>40</s> 39 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>0!_=[]
n!l=cycle l!!n:div n(length l)!l
</code></pre>

<p><a href="https://tio.run/##y0gszk7Nyfn/30Ax3jY6litPMcc2uTI5J1UhR1Exzyols0whTyMnNS@9JEMhR1Mx539uYmaegq1CQWlJcEmRgoqCmaWFpaGholJyRmK@0n8A" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>As Haskell's <code>Int</code> type is limited to <code>9223372036854775807</code>, this fails for larger numbers.</p>

<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/56433/laikoni">Laikoni</a>.</p>

<h2>Ungolfed</h2>



<pre class="lang-hs prettyprint-override"><code>(!) :: Int -&gt; [Char] -&gt; [Char]

0 ! _ = []  -- If the number is 0, we reached the end. Base case: empty string
n ! l = 
  let newN = (n `div` length l) in   -- divide n by the base
    cycle l!!n                       -- return the char encoded by the LSD ... 
    : newN!l                         -- ... prepended to the rest of the output (computed recursively)
</code></pre>

<p><a href="https://tio.run/##dZA7a8MwFIV3/4qj0MGG2iRLaQzpkHYJlC4ZQ2hs@SYWkSUjyQn@9e61WujSatDjPr57jtrKX0nraUpFhrLEzgTkLzi8tpU7/t6SZAmBT2xwOAJ5jt0ZoSWYoavJQXksH3EnOKpkS03MkWkKbCtPkLyVoK4PI3xwylwSwzjNuATQFGDo/sGv1ODUqNuJY@YSWugMyiAO5LBqeCDqMdJrZnIzIEepCVqIufCvxc2OwuBM7JNsh6VJ27DMH9b7/g1FUSDyyihGaOB/3lzcO@rZ4mzWRoojH2C//8UOoR8CUmk7PrnGkRycVzfSYzZ1FbvagDP74PCAp/XzerUSC9ZmF9MX" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1>JavaScript, 39 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/166718/58974">Rod's Python solution</a>.</p>
<pre><code>s=&gt;g=n=&gt;n?g(n/(l=s.length)|0)+s[n%l]:&quot;&quot;
</code></pre>
<p><a href="https://tio.run/##BcFRCoMwDADQuxQGCUOnP2MK0YMMP0ptqxISMWVfu3t97/A/b@Haz9KIrrEmqkZTJqFJ5gzyAiZrOUouG/47fNpXHryMztWgYsqxZc2QwIXNq0N4D5@h7xHrDQ" rel="nofollow noreferrer">Try it online</a></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://sourceforge.net/p/cjam" rel="nofollow noreferrer">CJam</a>, 11 bytes</h1>

<pre><code>liq_,@\b\f=
</code></pre>

<p><a href="https://tio.run/##DcoxCgJRDATQfk/hARQy@ckkUwgeZGFRQVC0sPfu3y0fvPvr@pnz/fxux8t6Wx/nOSFvhIYnyxjlEYLDrFqOQSfBpDWBYZ2KsXeXpXZVkFbZKgdL5HJYftvpDw" rel="nofollow noreferrer" title="CJam – Try It Online">Try it online!</a> Takes input as the number, then a newline, then the characters in the ASCII art.</p>

<h2>Explanation</h2>

<pre><code>li           e# Read the first line and convert it to an integer
  q_,        e# Read the rest of the input and push its length n
     @\b     e# Convert the number to its base-n equivalent, as an array of numbers
        \f=  e# Map over the array, taking each element's index from the string
</code></pre>
</div>
<div id="pu20" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 110 bytes</h1>



<pre class="lang-c prettyprint-override"><code>char s[99],S[99];i;f(x,_)char*_;{i=strlen(_);*s=*S=0;while(x)sprintf(S,"%c%s",_[x%i],s),strcpy(s,S),x/=i;x=s;}
</code></pre>

<p><a href="https://tio.run/##LZDRasMwDEXf8xUmELCCxpo9lAbhr8hjaoJnksbQucVKW4/Sb/firHoQF46udJH9OFmbkp1NENy3rcYud3I0yYgDZFAP9HSKl3AevRyAalZ1p3b0mN15lBH4GpxfJtlhWdmKSxz6WDmNDLia7PVXMnaA8VM5iorpldZx8WOcl1mYcLIotgT1qu@9huJZiLUy/TY8CiXMcnFyo40G2ui/w86ZZvClqdjAO05Z8dGXKCaZd@QLAO@JMC634MWOildK@/bQNk1@weUP" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p>Description:</p>

<pre class="lang-c prettyprint-override"><code>char s[99],S[99];           // Two strings, s and S (capacity 99)
i;                          // A variable to store the length of the string
f(x,_)char*_;{              // f takes x and string _
    i=strlen(_);            // set i to the length of _
    *s=*S=0;                // empty s and S
    while(x)                // loop until x is zero
        sprintf(S,"%c%s",   // print into S a character, then a string
                _[x%i],s),  // character is the x%i'th character of _, the string is s
        strcpy(s,S),        // copy S into s
        x/=i;               // divide x by the length of the string (and loop)
    x=s;}                   // return the string in s
</code></pre>
</div>
<div id="pu21" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 49 bytes</h1>

<pre><code>Outer[Part,{#},#2~IntegerDigits~Tr[1^#]+1,1]&lt;&gt;""&amp;
</code></pre>

<p><a href="https://tio.run/##JY4xT8MwEIV3/4rIkapWGPCd7bMNFGVgYaIDWwhVVKVthgbJmCmkfz3YZLhPuvfe6d2ljefu0sb@0M7H7Xp@@4ldqHdtiGIsJ1Hi9XWI3akLL/2pj9/X91DDZ9ncgIDm6Znz1bx5ZLvQD7E@VlUpOOPN6r4aGRtH/ssF3/NJFGi1nESWDkk6p2nTfGWLvPMAi1kk8WNIWA4Fv80J8OhAe4WGrCRtUWsPCFJa5xEUIRGQIekIQElnvFYpjl4anzariaQ1zlsEsp5oqXrgovjvKvhdxj5jm1FkbDLWGSK/oLQmIxWmGm2UAwlGA06MTfMf" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu22" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 12 bytes</h1>

<pre><code>]{~#@]#.inv[
</code></pre>

<h2>How?</h2>

<pre><code>      #.inv    convert
           [   the left argument (the number)      
   #@]         to base the length of the right argument (the list of characters)    
  {~           and use the digits as indices to
]              the list of characters        
</code></pre>

<p><a href="https://tio.run/##NY3LCsJADEX3/Yqgi1GoQ5LJZCaFguAfuBUpIpbqQheCCD5@vdbX8h4u5xz69lx7QKgA@/XtOZ6vx35/vKz6aTHy4NraOyjhUUF7LordtjsBJ0Fowd0b9wVq2YjeaNttTg6@NIhoxMAaVWLIhBSF@Pq@Va6ExbIE55sappPy5yHjTGKBoyZUSSxixISYsjEFZVUabJiVKGCOJmG4s2G0YSVRxRSzJSZNpvpJwT91b2YO@hc" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu23" class="pu"><h1>JavaScript (ES6), 48 bytes</h1>
<p>Takes input in currying syntax <code>(c)(n)</code>, where <strong>c</strong> is a list of characters and <strong>n</strong> is an integer.</p>
<p>Safe only for <strong>n &lt; 2<sup>53</sup></strong>.</p>

<pre class="lang-javascript prettyprint-override"><code>c=&gt;n=&gt;n.toString(c.length).replace(/./g,i=&gt;c[i])
</code></pre>
<p><a href="https://tio.run/##XYpBCsIwEADvPiOnLNStFVF7SD/hsRQJa5pGwm5JQ0/@PcarMHOaedvdbpTCmo8sL1dmU8gMXMEsj5wCe00YHfu8ACa3RktOt9j6JpiBxjBBIeFNosMoXs96VB/VqKeaQJ9vlxPA4b9T7UvVVuX3Xft733UA5Qs" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 99 bytes</h1>
<h3><em>With support for big integers</em></h3>
<p>Takes input in currying syntax <code>(c)(a)</code>, where <strong>c</strong> is a list of characters and <strong>a</strong> is a list of decimal digits (as integers).</p>
<pre class="lang-javascript prettyprint-override"><code>c=&gt;g=(a,p=0,b=c.length,r=0)=&gt;1/a[p]?g(a.map((d,i)=&gt;(r=d+r*10,d=r/b|0,r%=b,d|i-p||p++,d)),p)+c[r]:''
</code></pre>
<p><a href="https://tio.run/##hY7LTsMwEEX3fAWKhGITN/X4MY4rufwBPxAi5DyaFrVJ5BZW@fdgXl2w6eJYmpHP3PvmP/y5CYfpshrGtlt2bmnctnfEs8lxVrsmP3ZDf9mz4Dh1W1j7cqqeeuLzk58IadkhbklwbRYegbPWhXU9cxYeXM3a@bCa5nnKMtZSyiaaNWWoNmm6NONwHo9dfhx7siNlMicseU0qSso8z1NhFE@r74Dn91PdBUrp3X@lico@4iPjVUVbWICb8n2UXob4/ASzZHW9AFYUoKwUGg1HZYRSFgRwbgorQKJABNTICwSQvNBWyfhdWK5tnIxC5EYX1ghAYxFvVtn8Vcl/q7jIVz8aIRF2rSaVQs2liPFKywI4aAXif8LyCQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu24" class="pu"><h1><a href="https://docs.python.org/3.5/" rel="noreferrer">Python 3</a>, 49 bytes</h1>

<p>Cannot comment yet, so I post the Python 2 answer adapted to Python 3.5.</p>

<pre><code>f=lambda n,s:n and f(n//len(s),s)+s[n%len(s)]or''
</code></pre>
</div>
<div id="pu25" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 2 bytes</h1>

<pre><code>:B
</code></pre>

<p><a href="https://staxlang.xyz/#c=%3AB&amp;i=1928149325670647244912100789213626616560861130859431492905908574660758972167966,+[%22+%22,%22%5Cn%22,%22%7C%22,%22_%22,%22-%22]%0A&amp;a=1" rel="nofollow noreferrer">Run and debug it</a></p>

<p><code>:B</code> is an instruction in stax that does this.  It would normally operate on a "string"* instead of an array of "strings".  In the end, this means that the output is an array of single character arrays.  But output implicitly flattens anyway.</p>

<p>*Stax doesn't actually have a string type.  Text is represented by integer arrays of codepoints.</p>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 2 bytes</h1>
<pre><code>YA
</code></pre>
<p><a href="https://tio.run/##y00syfn/P9Lx/38jcxMDLvWaeHUA" rel="nofollow noreferrer" title="MATL – Try It Online">Try it online!</a></p>
<p>Inputs are a number and a string.</p>
<p>Fails for numbers exceeding <code>2^53</code>, because of floating-point precision.</p>
<h3>Explanation</h3>
<p>What do <code>YA</code> know, a builtin (base conversion with specified target symbols).</p>
</div>
<div id="pu27" class="pu"><h1>Java 8, <s>72</s> 50 bytes</h1>

<pre class="lang-java prettyprint-override"><code>a-&gt;n-&gt;n.toString(a.length).chars().map(c-&gt;a[c-48])
</code></pre>
<p>-22 bytes thanks to <em>@OlivierGrégoire</em> by returning an <code>IntStream</code> instead of printing directly.</p>
<p><a href="https://tio.run/##fVFNa@MwEL3nVwyGBQlsIcmybG23gbZsYQ97yjEJQavaiVNHNpbSJbT97amcuPSDUtBhNG/mvXkzW/2gk@3d/dE02jn4q2v7OAFwXvvawDagZO/rhlR7a3zdWnI7Br/MRvfzZfxtzQnbab8h1/X6j/Xluuzfdzjfl3pHAjI7RdMpVHAJR51MbXjEtyFf2zXSpCnt2m8wGWQdwoG1QyaZ6rlJRLHEx4tJGLvb/2vC2OP0D219B7vgCJ1Z5kvQeHAH4EvnUfS0imKIeC5ohC/e5YNGOyBSFYqxjxgs7NMqGVCmeMGESnkmcypFzoVQjDNK80JxlkouJZOZpIVkLKVFpkQayrmimQq/XEhJ86xQOWcyV1J@lPm5sGR1CRjFg1QqhMxoygOdyNKCUZYJxs8dz5O3e50cnwjOjsHFMEZ2dF4R3XXNAbmw3Juwy6u@1weE8Zi25X/46mrIhpKq7X9rsxn2Pjs4X@5Iu/ekC/y@QtEPE8UGjy4@441F0cK@Tvx8fAE" rel="nofollow noreferrer">Try it online</a>.</p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>a-&gt;n-&gt;                  // Method with char-array and BigInteger parameters
  n.toString(a.length)  //  Convert the input-number to Base `amount_of_characters`
   .chars()             //  Loop over it's digits (as characters)
   .map(c-&gt;a[c          //   Convert each character to the `i`'th character of the input
              -48])     //   by first converting the digit-character to index-integer `i`
</code></pre>
</div>
<div id="pu28" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 31 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>-&gt;n,b{n.to_s(b.size).tr"0-9",b}
</code></pre>

<p><a href="https://tio.run/##NY7BbsIwDIbvfYooF2BKq9hxnBiJvUhXoXYa2g4riJbDoDx752rd4bPk3/5/@3rrfubTYS5fe9c9@mo8H4dtVw1f949dNV6tL8W67jnXNSbyztR2ss4ebdO4wtQsWQAW9V3VT6VVzusUBDOQBIycPFNCIgEE71MWhMDIDBzZZwYIPkehoOsoPop2iZh9ilkSAidhXs4YjX/rtfx94Wy53gpEHH1AzaMYMniIBLhY9v@WarUclCVnp2wVpxFN9d1ezGNqXTcVxpjLbRzMqdb2ZbNpimcx/wI" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu29" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>49</s> 48 bytes</h1>
<p><sup>-1 byte thanks to Jo King</sup></p>

<pre class="lang-python prettyprint-override"><code>f=lambda n,s:n and f(n/len(s),s)+s[n%len(s)]or''
</code></pre>
<p><a href="https://tio.run/##PZDdasMwDIXv@xQmMJJQb7P8I9uBPMCu9gCpKena0ELnhDi9GOzdMzmFXegDHdnSkaaf5TpGua5De@@/T@eeRZ6ayPp4ZkMV3@@XWKWap3qfuvjyzMI4l@W6XNKS2q6TVgvOuuK34MWxCIF36J0HyNoXaVeKnmLcauClA@2VNGgFaiu19iBBCOu8BIUSEdCgcAighDNeK3ouvTCeMqsRhTXOWwloPWIewqj5IRKeDnjxuk1SWqMRSlI3bZQDAUaDpA9lU3JWHmLmW8Yxo81gGXVGlcHLEMJuGOd8FHaLbNu52bFpvsWFFR9xeiwNzafyv/j5WDaVLO3pgvl02d76Bw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<h3>Alternative version (won't finish for large numbers), <s>45</s> 43 bytes</h3>
<p><sup>-2 bytes thanks to Jo King</sup></p>
<pre class="lang-python prettyprint-override"><code>f=lambda n,s:s*n and f(n/len(s),s)+(s*n)[n]
</code></pre>
<p><a href="https://tio.run/##PY9LasMwEIb3OYUQhNiN2mr0GEkGH6CrHsA2xm1iEkjHxlIWhdzdlbPobv4Hw//Nv@kykVrXsb4NP1@ngZGIVXwhNtCJjQW9385UxFLE8lhku2yoW9M5plg3jXJGCsYfPe9Eg8EHgCy/L8O0GdoYtFIrtGis9iDBGlCCHaqW3vqalYU45BoE5cEErSw6icYpYwIokNL5oECjQoT8QnoE0NLbYHSuqyBtyMoZROmsD04BuoCYB7CWHv0r77rdOC0bD7sSe26udmxerpQY/6D5nirGBQm@X/g@/ief9/SMWuLHzL@B83yvfw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/dzaima/SOGLOnline" rel="nofollow noreferrer">SOGL V0.12</a>, 10 <a href="https://github.com/dzaima/SOGL/blob/master/chartable.md" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>l;A─{IaWp}
</code></pre>

<p><a href="https://dzaima.github.io/SOGLOnline/?code=bCUzQkEldTI1MDAlN0JJYVdwJTdEZiUwQS4lMkMldTIxOTJm,inputs=MTkyODE0OTMyNTY3MDY0NzI0NDkxMjEwMDc4OTIxMzYyNjYxNjU2MDg2MTEzMDg1OTQzMTQ5MjkwNTkwODU3NDY2MDc1ODk3MjE2Nzk2NiUwQSUyMiUyMCU1Q24lN0NfLSUyMg__,v=0.12" rel="nofollow noreferrer">Try it Here!</a></p>

<p>Pretty long, considering the idea is pretty much implemented in the language: <a href="https://dzaima.github.io/SOGLOnline/compression/index.html" rel="nofollow noreferrer">here</a>, entering  </p>

<pre><code>¶    __   __    ¶   |  |_|  |   ¶___|       |___¶-   -   -   -  ¶ - - - - - - - ¶- - - - - - - -¶_______________¶
</code></pre>

<p>gives out a compressed string using this method.</p>
</div>
<div id="pu31" class="pu"><h1>Japt, 2 bytes</h1>
<p>Can take the second input as an array or a string. Fails the last 2 test cases as the numbers exceed JavaScript's max integer. Replace <code>s</code> with <code>ì</code> to output an array of characters instead.</p>
<pre><code>sV
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.5&amp;code=c1Y=&amp;input=Njk4OTExClsiYyIsImgiLCJhIiwibyJd" rel="noreferrer">Try it</a></p>
</div>
<div id="pu32" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, <s>6</s> 5 bytes</h1>

<pre><code>n%|E@
</code></pre>

<p><a href="https://staxlang.xyz/#c=n%25%7CE%40&amp;i=%22%7C_%22+2740%0A%22chao%22+698911%0A%22+%5Cn%7C_-%22+1928149325670647244912100789213626616560861130859431492905908574660758972167966%0A%22%3A%5Cn._%3D+%29%28,%22+3446503265645381015412&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>

<p>Explanation:</p>

<pre><code>n%|E@ Full program, implicit input in order list, number
n%    Copy the list to the top and get its length
  |E  Convert the number to that base
    @ Map: index
</code></pre>
</div>
<div id="pu33" class="pu"><h1><a href="https://github.com/dzaima/Canvas" rel="nofollow noreferrer">Canvas</a>, 7 <a href="https://github.com/dzaima/Canvas/blob/master/files/chartable.md" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>Ｌ┬｛╵⁸＠ｐ
</code></pre>

<p><a href="https://dzaima.github.io/Canvas/?u=JXVGRjJDJXUyNTJDJXVGRjVCJXUyNTc1JXUyMDc4JXVGRjIwJXVGRjUw,i=JTVCJTIyJTIwJTIyJTJDJTIyJTVDbiUyMiUyQyUyMiU3QyUyMiUyQyUyMl8lMjIlMkMlMjItJTIyJTVEJTBBMTkyODE0OTMyNTY3MDY0NzI0NDkxMjEwMDc4OTIxMzYyNjYxNjU2MDg2MTEzMDg1OTQzMTQ5MjkwNTkwODU3NDY2MDc1ODk3MjE2Nzk2Ng__,v=3" rel="nofollow noreferrer">Try it here!</a></p>

<p>Straight forward implementation:</p>

<pre><code>L┬{╵⁸@p
L      get the length of the input (popping the item)
 ┬     base decode the other input
  {    for each number there
   ╵     increment
    ⁸@   in the 1st input get that numbered item
      p  and output that
</code></pre>

<p>The input character set can be a string too as long as it doesn't contain a newline, because Canvas doesn't have a newline character &amp; automatically converts it to a 2D object.</p>
</div>
<div id="pu34" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 4 bytes</h1>

<pre><code>ṙ1ṃ@
</code></pre>

<p><a href="https://tio.run/##DYoxCgJRDAWvIr92IclPXpLOe6hYbSOLvWDnKTzKHmdPElPMwMA81217Vx37j4/9e6mq6ziN87i9Wp/m0SzjXpwSrDnF4AR1UU0WJvJI4QkBGAYKME8KS529S5JllytAbpEuDE/gDw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p><code>ṃ</code> is literally a built-in for this. The other three bytes account for Jelly's one-based indexing.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/166708/">166708</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




