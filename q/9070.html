<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::9070</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>132</td><td>APLNARS</td><td>250213T105540Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/278223#278223">Rosario</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>130626T133719Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/11949#11949">skeevey</a></td></tr>
<tr d-ix="2"><td>124</td><td>GolfScript</td><td>121128T214006Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/9109#9109">Peter Ta</a></td></tr>
<tr d-ix="3"><td>372</td><td>c</td><td>121126T061203Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/9086#9086">dmckee -</a></td></tr>
<tr d-ix="4"><td>133</td><td>Perl</td><td>121124T165536Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/9073#9073">primo</a></td></tr>
<tr d-ix="5"><td>127</td><td>Mathematica</td><td>121124T194403Z</td><td><a href="https://codegolf.stackexchange.com/questions/9070/normal-distribution-values/9074#9074">DavidC</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 132 chars</h1>
<pre><code>a←(0,40⍴1)\[1](0,10⍴1)\[2]40 10⍴{4⍕¯∞{(√2p1)÷⍨*¯2÷⍨⍵*2}∫⍵}¨∊{⍵+{(⍵÷10)+100÷⍨0,⍳9}¨0,⍳9}¨0,⍳3⋄a[1;]←0,0,100÷⍨⍳9⋄a[;1]←' ',0,10÷⍨⍳39⋄a
</code></pre>
<p>the function that make the integration is</p>
<pre><code>{4⍕¯∞{(√2p1)÷⍨*¯2÷⍨⍵*2}∫⍵}
</code></pre>
<p>the few start and end values of the table are these:</p>
<pre><code>           0    0.01    0.02    0.03    0.04    0.05    0.06    0.07    0.08    0.09 
 0    0.5000  0.5039  0.5079  0.5119  0.5159  0.5199  0.5239  0.5279  0.5318  0.5358 
 0.1  0.5398  0.5438  0.5477  0.5517  0.5556  0.5596  0.5635  0.5674  0.5714  0.5753 
 0.2  0.5792  0.5831  0.5870  0.5909  0.5948  0.5987  0.6025  0.6064  0.6102  0.6140 
.....................
 3.7  0.9998  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999 
 3.8  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999 
 3.9  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999  0.9999 
  
</code></pre>
</div>
<div id="pu1" class="pu"><h1>k</h1>

<p>This is based on the Zelen and Severo algorithm <a href="https://en.wikipedia.org/wiki/Normal_distribution#Numerical_approximations_for_the_normal_CDF" rel="nofollow">here</a>. 162 characters. Can improve the character count significantly by reducing precision.</p>

<pre><code>+`q`p!(q;{abs(x&gt;0)-(exp[-.5*x*x]%sqrt 2*acos -1)*t*.31938153+t*-.356563782+t*1.781477937+t*-1.821255978+1.330274429*t:1%1+.2316419*abs x}(q:0.1*!391)+\:0.01*!100)
</code></pre>

<p>Runs in about 15ms on a Pentium E2160.</p>
</div>
<div id="pu2" class="pu"><h2>GolfScript (124 chars)</h2>

<pre><code>10:&amp;,~]'    0.0'*40,{n\:I&amp;/'.'I&amp;%&amp;,{'   '\I&amp;*+&amp;8?:^*100/:x^54,-2%{:i*x.{*^/}:$~$i).)*/^\-}/$3989423$15000500+`5&lt;(49-'.'@}%}/
</code></pre>

<p>Note: the only whitespace in there are two tab characters. MarkDown is turning them into triple-spaces.</p>

<p>The interesting part (i.e. the calculation) is done in <code>x.8</code> fixpoint using <a href="http://people.math.sfu.ca/~cbm/aands/page_932.htm" rel="nofollow">identity 26.2.10 of <em>Abramowitz and Stegun (1972)</em></a>. The program runs in under 2 seconds on my machine.</p>
</div>
<div id="pu3" class="pu"><h2>c -- 372</h2>

<p>Just for interest this is an implementation of Peter's Monte Carlo suggestion from the comments</p>

<pre><code>#include "stdio.h"
#include "stdlib.h"
#include "math.h"
#define P printf
#define F(c,n) for(c=0;c&lt;n;++c)
long c=9e9,i,j,k;double a[400],b=.01,t;
double B(){return sqrt(-2*log(drand48()))*cos(2*M_PI*drand48());}main()
{srand48(time(0));F(i,c){t=B();F(k,400)a[k] += t&lt;b*k;}P("%4c",' ');F(j,10)
P("%4.2f    ",b*j);F(i,40){P("\n%3.1f ",10*i*b);F(j,10)
P("%6.4f  ",a[10*i+j]/c);}}
</code></pre>

<p>Lots of repetitive code. A very straight forward implementation, ungolfed it looks like </p>

<pre><code>#include "stdio.h"
#include "stdlib.h"
#include "math.h"

long c=9e9, i, j, k;  /* demands longs longer than 32 bits */

double a[400], bw=.01, t;

double B/*oxMuller*/(){
 /* normal distribution, centered on 0, std dev 1 */
  return sqrt(-2*log(drand48())) * cos(2*M_PI*drand48());
}

main(){
  srand48(time(0));
  for(i=0; i&lt;c; ++i) { /* compute the probabilities by MC integration */
    t=B/*oxMuller*/();
    for(k=0; k&lt;400; ++k) a[k] += t&lt;bw*k;
  }
  /* Print the table */
  printf("%4c",' ');
  for(j=0; j&lt;10; ++j) printf("%4.2f    ",bw*j);
  for(i=0; i&lt;40; ++i) {
    printf("\n%3.1f ",10*i*bw);
    for(j=0; j&lt;10; ++j) printf("%6.4f  ",a[10*i+j]/c);
  }
  printf("\n"); /* make the end pretty */
}
</code></pre>

<p>It is slow, about 60 seconds to do 100,000,000 throws with absolutely all the optimization bells and whistles turned on (<code>-m64 -Ofast</code>) on my 2.2 GHz Core 2 Duo laptop. Worse, it needs circa 50 times that many to provide real confidence that you have the right value in each and every bin. As written I'm asking for even more.</p>

<p>That seems too long to me, but I suspect that I underestimate how much work <code>drand48</code> is doing (and I have sacrificed about a factor of 2 in the random number generation at the alter of small code).</p>

<p>It also demands that long is a bit bigger than 32 bits (thus the <code>-m64</code> above).</p>
</div>
<div id="pu4" class="pu"><h2>Perl - <s>137</s> 133 bytes</h2>

<pre><code>print"\t0.0$_"for 0..9;for($f=2.506628;$i++&lt;80;$f*=-++$i){printf'
%.1f',$x,s;;+\$x**$i/$i/$f;;printf"\t%.4f",eval,$x+=.01for(.5.$_)x10}
</code></pre>

<p>(both \t should be replaced with a literal tab character.)</p>

<p>Uses a Taylor Series expansion<sup>[1]</sup>, adding one term per row, which seems to be good enough. The script produces the output exactly as expected, <s>although each row does have a trailing whitespace</s>. Runs in about 60ms on my lappy.</p>

<p>Edit as per comment by Peter Taylor.</p>

<p>[1] <a href="http://mathworld.wolfram.com/NormalDistributionFunction.html" rel="nofollow">http://mathworld.wolfram.com/NormalDistributionFunction.html</a> (formula 10)</p>
</div>
<div id="pu5" class="pu"><h1>Mathematica <strike>132 136</strike> 127</h1>
<p>If <code>Erfc</code> is acceptable, here's my attempt, accurate to 6 places:</p>
<pre><code>t=Table;TableForm[Partition[t[0.5 Erfc[-x/Sqrt[2]],{x,0,3.99,.01}],10], 
TableHeadings-&gt;{t[k,{k,0,3.9,.1}],t[k,{k,0,.09,.01}]}]
</code></pre>
<p><img src="https://i.sstatic.net/ITHKw.png" alt="enter image description here" /></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/9070/">9070</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




