<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::QNNN</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
  <!-- TXXX -->
<tr d-ix="0"><td>064</td><td>Charcoal</td><td>231015T225127Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266011#266011">Neil</a></td></tr>
<tr d-ix="1"><td>176</td><td>R</td><td>231016T210811Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266031#266031">Nick Ken</a></td></tr>
<tr d-ix="2"><td>176</td><td>JavaScript ES11</td><td>231016T170204Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266027#266027">Arnauld</a></td></tr>
<tr d-ix="3"><td>033</td><td>Jelly</td><td>231015T202544Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266007#266007">Jonathan</a></td></tr>
<tr d-ix="4"><td>183</td><td>Retina 0.8.2</td><td>231015T231022Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266013#266013">Neil</a></td></tr>
<tr d-ix="5"><td>nan</td><td>J</td><td>231016T063103Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266020#266020">Jonah</a></td></tr>
<tr d-ix="6"><td>245</td><td>JavaScript Node.js</td><td>231016T091825Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266024#266024">tsh</a></td></tr>
<tr d-ix="7"><td>061</td><td>05AB1E</td><td>231016T102231Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266025#266025">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>562</td><td>Python3</td><td>231015T215802Z</td><td><a href="https://codegolf.stackexchange.com/questions/266004/is-it-a-valid-crossword-grid/266010#266010">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>67</s> 64 bytes</h1>
<pre><code>Ｆθ⊞υＳ¿⁼υＥ⮌υ⮌ι¿⬤⁺υＥθ⭆θ§λκ∧№ι.⬤⪪ι#÷⊖Ｌλ²«Ｅυ⪫⪪ι.ψＪ⌕θ.⁰¤.¿‹ＬＫＡＬΣυ⎚«⎚¹
</code></pre>
<p><a href="https://tio.run/##TVDLboMwEDzjr7DCZS1R1PbaU5SHRJRKqPQHEGyCFWPA2KhVlW@nXh5NfbDHs7szYxdVboomV@N4aQyHTvDU9RW4iCe6dTazRuorCPHG5IXDoXO56qn6nrfwgQOaHsGJiK9YCr849W6VglS5v@4u4rPactnaRJf4BSriNxryjC5h1zhtQUZ8E2@I8iJZq@RMhUQl2u7lIEuEPRYGa9QWSzijvtoKFOm8iinEDwtS72eBDH2IUyP1P7FJ/1vQ04KTq9vPBo7SJ@jW2jNVjtInoLvH9Koz9v1qliLeKCB5LlTmav8d5L5TmBugMVQ9UpjgQS3BXgjf2X0c4zgOQ7@xmNAKaLGJ9yRbzvBRWnpnQGh8GtQv" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as a square array of strings and outputs a Charcoal boolean, i.e. <code>-</code> for valid, nothing if not. Explanation:</p>
<pre><code>Ｆθ⊞υＳ
</code></pre>
<p>Input the square array.</p>
<pre><code>¿⁼υＥ⮌υ⮌ι
</code></pre>
<p>Check that it's rotationally symmetric.</p>
<pre><code>¿⬤⁺υＥθ⭆θ§λκ∧№ι.⬤⪪ι#÷⊖Ｌλ²«
</code></pre>
<p>Concatenate the array with its transpose and check that each row contains a <code>.</code> but when split on <code>#</code>s does not contain runs of exactly <code>1</code> or <code>2</code> <code>.</code>s.</p>
<pre><code>Ｅυ⪫⪪ι.ψ
</code></pre>
<p>Write just the <code>#</code>s from the array to the canvas.</p>
<pre><code>Ｊ⌕θ.⁰
</code></pre>
<p>Jump to a position where there should be a <code>.</code>.</p>
<pre><code>¤.
</code></pre>
<p>Fill the canvas with <code>.</code>s starting from here.</p>
<pre><code>¿‹ＬＫＡＬΣυ⎚
</code></pre>
<p>If this didn't fill all of the original <code>.</code>s then just clear the canvas.</p>
<pre><code>«⎚¹
</code></pre>
<p>If all of the <code>.</code>s were connected then clear the canvas and output <code>-</code>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>196</s> <s>185</s> <s>184</s> <s>177</s> 176 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x,`~`=t,`+`=sum,a=apply,e=~which(x,T),i=~~e[,1],`?`=any){while(+i&lt;+(i=e[,a(e,2,\(y)?colSums((i-y)^2)&lt;2)]))1
+i-+e?x-rev(x)?a(rbind(x,~x),1,\(y,z=rle(y))?!(z$v*z$l-1)%/%2&amp;+y)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lVRBTuswEN2w8ilCBpCHOEXpikWtHAJ2bb8SwAVLaShJCkkRuQibfgn2XOf_S3AF3AYSJ60LjBSP7XnP82Zi-flvsnyZWAP3dZ5N3NN_byOas6AMeMYCJ-DpfMpCHs5mUcEELx9u5OWNApwjk7wsxZB5Yxb4AQ_jAh9VNBLUkQOHSq5iIRWsz0a0QP_yNjqbT1NKpVvgnz4O-jhG9IgjXUf4uZuIe5qjH9LkQsZXKkOZI_NWXLbgiTq1QPT36eLg_nhxELkeHp4c9o-cAp8q3f_33kWuqrCitVaaZkk6i2TWTGzotQzIaqhX6tu6URnpmYwA6LSaC2DmGM8yBcAUWDMAqvin65mWsDPHj0VW5wB8eV1nO6W-aPBEB2xhd-S3YOtN0m3HagP0bwPRQLUDofXrCECtsT00EX1YmXZjfug229_KCZvCN3NoVHON3QY3F7su0wgjeqoOAmAH8WtGTIq_sZq165Z2FWw1Att6-Qsj3Xp_64l2udZTm1n2aBTbOBx647Fa2Mgs9driNMwSmdPc4tyyewoWJ7cPFrfSuySjkYivM_XkojKSVo-byNkEq3dvuaz8Bw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A function taking a square matrix of logical values and returning a single logical value. This was inspired by and works more or less the same as <a href="https://codegolf.stackexchange.com/a/266007/42248">@JonathanAllan’s Jelly answer</a> so be sure to upvote that one too!</p>
<p>Thanks to <a href="https://codegolf.stackexchange.com/users/55372/pajonk">@pajonk</a> for saving 9 bytes!</p>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ES11), 176 bytes</h1>
<p><em>Saved 1 byte thanks to <a href="https://codegolf.stackexchange.com/users/44718/tsh">@tsh</a></em></p>
<p>Expects a binary matrix, with <code>1</code> for white cells and <code>0</code> for black cells. Returns a Boolean value.</p>
<pre class="lang-javascript prettyprint-override"><code>f=(m,i)=&gt;m&lt;(h=z=&gt;m=m.map((r,y)=&gt;r.map((v,x)=&gt;z?/^(0*222+)+0*$/.test(r.join``)?m[x][m.length-1-y]:z:v&amp;[-1,0,1,2].some(d=&gt;m[y+d%2]?.[x+~-d%2]==i)?i=2:v)))()?f(m,i):h``+&quot;&quot;==h(h``)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lVTLjpswFFWlrrzqJ1h42tiBeBKkSlWmHlZTqduO1A1DBUrMo-KRAsnkofRHZpPFzL6_0_maGggJEEhnroTvw_f43Htt8fAYRlO-2z3NU3vw6e8fm-FA8Qi7Dj5jl62FZgENrBnGsbIS4bhwFspSOGvt8gce9lVVlYk87F9c0pQnKY7pz8gLTZNogb409ID6PHRSdzAarIzxerz4oA9GylAZKapBkyjgeCpo9JU8fa8aGtWX8u9BZjLmEc1j6nhBCMFEs_PKxq5pypLEmIuFRYq6n9-8m0RhEvmc-pGDJf275XtTQyJXIOa_5l7MsWQnEqExt6ZfPJ_frsIJHhKaRrdp7IUOJjSZ-V6KpbtQpNlRfGNNXJxAdg03AELPzmwGJYnADaxx3YX613BR8sGYp_M4vIJbgfJ5Cu8hg8l-ArDfh0P6UYFBHgysVHB8487NcoZNurnY3G-3pgJ7To-QfM45v04pTYzcn2S-nCkGe1RkiQZhrRwxpCy43Q9m9_z2gZYCEKJtghBobCCQLQcvw7YF2qWgqZ-ICppOTOdZXRvtnZQItO-0bLjLRWc5XlxkcQ5Cpa7WWaesOsd8UE1oQTfKr6XlQdC8QAoqd5CbWQBVvxPIEVuhQLXLBAgdqq4vx53qkknl5bxQnV5IjbPlFZ9yVKDdPTZHfnzghzY700CVqpGB0BlgaYGuiv8jB9S5d9usoFUAapvlKwQ0-32tLn5S_wA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>How?</h3>
<p>The same helper function <code>h</code> is used to process two passes:</p>
<ol>
<li><p>We flood-fill the matrix, replacing <code>1</code>'s with <code>2</code>'s. We start at the first empty cell located on a border. If it doesn't exist, the grid is invalid anyway and will be identified as such during the next pass.</p>
</li>
<li><p>We rotate the matrix 3 times by 90°. We convert each resulting row to a string and make sure that it matches the following regular expression:</p>
<pre><code>/^(0*222+)+0*$/
</code></pre>
<p>i.e. the entire string is made of groups of three or more <code>2</code>'s (with at least one such group) and optional groups of <code>0</code>'s.</p>
<p>Finally, we make sure that the 3rd rotation leads to the same matrix as the 1st one to validate the 180° rotational symmetry.</p>
</li>
</ol>
<h3>Commented</h3>

<pre class="lang-javascript prettyprint-override"><code>f = (                        // f is a recursive function taking:
  m,                         //   m[] = input binary matrix
  i                          //   i = flag used during flood-filling,
) =&gt;                         //       initially undefined
m &lt; (                        // compare m[] with its updated version
  h = z =&gt;                   // h is a helper function ...
  m =                        // ... which updates m[]
  m.map((r, y) =&gt;            // for each row r[] at index y in m[]:
    r.map((v, x) =&gt;          //   for each value v at index x in r[]:
      z ?                    //     if z is truthy:
        /^(0*222+)+0*$/      //       if r[], once converted to a string,
        .test(r.join``) ?    //       matches this regular expression:
          m[x]               //         apply a 90° rotation
          [m.length - 1 - y] //
        :                    //       else:
          z                  //         force the final test to fail (*)
      :                      //     else:
        v &amp;                  //       if v = 1
        [-1, 0, 1, 2]        //       and there's some direction d
        .some(d =&gt;           //       such that:
          m[y + d % 2]       //         the neighbor cell
          ?.[x + ~-d % 2]    //         in that direction
          == i               //         is equal to i
        ) ?                  //       then:
          i = 2              //         set i and the cell to 2
        :                    //       else:
          v                  //         leave this cell unchanged
    )                        //   end of inner map()
  )                          // end of outer map()
)() ?                        // if m[] was modified after flood-filling:
  f(m, i)                    //   try to flood-fill some more
:                            // else:
  h`` + &quot;&quot; == h(h``)         //   do the 1st and 3rd rotation match?
</code></pre>
<p><sub>(*) For the 1st and 2nd rotations, <code>z</code> is set to <code>['']</code>, which is coerced to an empty string. For the 3rd rotation, it is set to the result of the 2nd rotation.</sub></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>40 35</s> 33 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>-5 thanks to <a href="https://codegolf.stackexchange.com/users/42248/nick-kennedy">Nick Kennedy</a>!</p>
<pre><code>;ZµŒg§’:2;§Ȧ
ŒṪḢạ§ỊẸʋƇ@ƬiƊȧÇȧU⁼ṚƊ
</code></pre>
<p>A monadic Link that accepts a list of lists of <code>1</code>s (white) and <code>0</code>s (black) that yields <code>1</code> if valid or <code>0</code> if not.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9866tDWo5PSDy1/1DDTysj60PITy7iOTnq4c9XDHYse7lp4aPnD3V0Pd@041X2s3eHYmsxjXSeWH24/sTz0UeOehztnHev6/3D3Fv@HO5oOrTnc/v@/srIeECgrcyEYehDABeaiM8CKuDB0AQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##pVK9bsIwEN7vNb4uLBk6lqUPgMTUhb2qWrF1YqMdiBQ2tnYrQy1VjEUKf4sjoqhvYV7EQFOcc7BNpJ7ku5zvvrvPl3u67/cHWrd7cr6dPEixG77dXLelKD5pO1GLL5VO1fJDCrVK1DL9GefxbT57zJNCZHEh7nYva7V4zxOtVt9y/tzJRnJz1VXpq5xlcUtrRJaAjsp4h@O8KIUinxDAYQYL@DHeWr4AggigjP@ZyOci/JKmJMs6wMlynnZL7lT5xBMc6Bp9K@33knBGqYyYQ7g0YpiJoHqX4WirKsLVUdjGNDTn47d6Ak7GcK8BEFiK@uRYP9bGmUa8VS0DCABPX@RjfEEMKrSlaFKbAOB/a@5e6caWYP847AE" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<pre><code>;ZµŒg§’:2;§Ȧ - Link 1 (check entry lengths &amp; presence): list of lists of 1/0, Grid
;Z           - concatenate the columns
  µ          - start a new monadic chain - f(rows + columns)
   Œg        - group runs of equal elements of each row/column
     §       - sums of each run
      ’      - decrement (i.e... all black: -1, 1:0, 2:1, 3:2, 4:3, 5: 4, ...)
       :2    - integer divide by two        -1    0    0    1,   1,    2, ...
          §  - {rows + columns} sums
         ;   - concatenate
           Ȧ - any and all? -&gt; 0 if either: an entry of length 1 or 2 exists, or
                                            any row or column has no entry
                               else 1

ŒṪḢạ§ỊẸʋƇ@ƬiƊȧÇȧU⁼ṚƊ - Main Link: list of lists of 1/0, Grid
ŒṪ                   - multidimensional truthy indices -&gt; &quot;WhiteCoordinates)
            Ɗ        - last three links as a monad - f(WhiteCoordinates):
  Ḣ                  -   head (first coordinate -&gt; initial &quot;Current&quot;)
          Ƭ          -   collect up while distinct, applying:
         @           -     with swapped arguments - i.e. f(WhiteCoordinates, Current):
        Ƈ            -       filter keep those (of WhiteCoordinates) for which:
       ʋ             -         last four links as a dyad - i.e. f(WhiteCoordinates, Current):
   ạ                 -           absolute difference (vectorises)
    §                -           sum each
     Ị               -           insignificant? (effectively &quot;in (0,1)?&quot;)
      Ẹ              -           any? - i.e. any are neighbours/same?
           i         -   index of {WhiteCoordinates} in that (or 0)
                        -&gt; 1 if white cells are fully connected else 0
              Ç      - call link 1
             ȧ       - logical AND
                   Ɗ - last three links as a monad - f(Grid):
                U    - {Grid} reverse each
                  Ṛ  - {Grid} reverse
                 ⁼   - equal? -&gt; 1 if 180-degree symmetry else 0
               ȧ     - logical AND
</code></pre>
<hr />
<p>Also at 33 as a lone Link (although it performs redundant checks):</p>
<pre><code>,ZµŒg§’:2;U⁼ṚƊ;ŒṪḢạ§ỊẸʋƇ@ƬiƊ$;§)Ȧ
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, <s>186</s> 183 bytes</h1>
<pre><code>\.
-
s`^(?!(.)+.?(?&lt;-1&gt;\1)+$(?(1)^)).+

ms`.*^#+$.*|.*(?&lt;!-)--?(?!-).*

O$`.
$.%`
ms`.*^#+$.*|.*(?&lt;!-)--?(?!-).*

1`-
@
+m`^((.)*)(@|-)(.*¶(?&lt;-2&gt;.)*(?(2)$))?(?!\3)[@-]
$1@$4@
^[¶#@]+$
</code></pre>
<p><a href="https://tio.run/##hY0xDsIwDEV336KKkeJEsZTCiJrcgAO0jcLAwAADZey5eoBeLDhQxIgH/6fvb/3H5Xm9n0sZGBxMOenQaCbLQYej893gyaIO2lMiYgtwmzKbpCyymdlIqHHknKRF2QCcMDMg7/LfpM8OItibdEqjIR1nR5rNutTqthNPiltCovo07KmPbgT0EQ8RUr8uKo4WS2FmpWQBV/pCHXj7YsKm6nfash@o9AI" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Takes input as a square array and outputs <code>1</code> for valid, <code>0</code> for invalid. Explanation:</p>
<pre><code>\.
-
</code></pre>
<p>Change <code>.</code>s to <code>-</code>s are they're easier to match.</p>
<pre><code>s`^(?!(.)+.?(?&lt;-1&gt;\1)+$(?(1)^)).+

</code></pre>
<p>Delete everything if it isn't rotationally symmetric.</p>
<pre><code>ms`.*^#+$.*|.*(?&lt;!-)--?(?!-).*

</code></pre>
<p>Delete everything if there is a row of <code>#</code>s or if there are one or two <code>-</code>s on their own.</p>
<pre><code>O$`.
$.%`
</code></pre>
<p>Transpose the array.</p>
<pre><code>ms`.*^#+$.*|.*(?&lt;!-)--?(?!-).*

</code></pre>
<p>Check the transpose for a row of <code>#</code>s or one or two <code>-</code>s on their own.</p>
<pre><code>1`-
@
</code></pre>
<p>Change one <code>-</code> to a <code>@</code>.</p>
<pre><code>+m`^((.)*)(@|-)(.*¶(?&lt;-2&gt;.)*(?(2)$))?(?!\3)[@-]
$1@$4@
</code></pre>
<p>Flood fill <code>-</code>s with <code>@</code>s. Note that I use <code>(?(2)$)</code> although I used <code>(?(1)^)</code> above because this is a multiline match and so the final character could be at the beginning of a line.</p>
<pre><code>^[¶#@]+$
</code></pre>
<p>Check that all of the <code>-</code>s were filled.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, <sup>95 93</sup> 92 bytes</h1>
<pre><code>(2&lt;*#])@((#;._2&quot;1@,.&amp;0,&amp;,0=1&amp;#.)@,|:)*/@,(-:|.&quot;1@|.),&amp;,[:(]+.+./ .*)^:_~1=[:|@-/~$j./@#:I.@,
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lVTBSsNAED15yVdsO5rNpskk6UHs2sCiUBDFg3hrYxGxLUUQtD0IoT_ipR78qPoBfoeRbZLdNEnTgd3J7rx9M7Mzm8-v-XpzfXuBxLI9YXX7NkRMWHCO4y6z_X7HY-1AOGj6wui1eBCdtniPUqONdEJCTihxiE94Mlwkl3c3g-_lYuKebUYZleTakjim44eBCciEE3OWuHQsl8eYmGNkiXXIraiDHfQI2uyBj1dBOOSxcL3V8Rw9AfwKhSN9_Bz9MmMWInHFCRdAohGhSM3QmCZ7Q04mO4bnp9krofdvy8XsgxpyOU1sqdBsC1AToCo4M4J2ptZSdIBVosQAKmNGC9CAZT97FQKqDPpRAAncKqxaQjOvh8cvmQFSraagB6EucrxetxRZQlPITIOBrPO2sQaPL-9qXxWvUmsvUEdl45UdVmIArUfUy8kS1acSiDr9S1lDN1Q1ddbCgd0sa7wqHA1upljJ_Elmd1IJU5lyXwUoQA1D-qUwVSSzR7JTjd5OMaZS0Wt_WDiVTAX_h-qcSedU8gEqf_frtdR_" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><em>-2 thanks to Neil's idea of catting transpose with input instead of using over</em></p>
<p>Takes input as a 0-1 matrix, where 1 means empty space.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 245 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;new Set([...s].map(p=(c,i,a)=&gt;c^1||[n=s.length**.5|0,(m=(s,t,v=a[t])=&gt;v&amp;&amp;''+v!=s?(b=v=&gt;v[0].at?b(v[0]):v)(s)[0]=v:s)(m(a[p=~i+~n]=[p],p-~n),p+1),+a.at(~i),a[i+~n]|a[i-~n]&amp;a[i-~n*2],a[i-1]|a[i+1]&amp;a[i+2]]).flat(1/0)).size&lt;4*!s[-p]*/^1/m.test(s)
</code></pre>
<p><a href="https://tio.run/##pVZfb9s2EH@OPsUVBCLSlim7Wx/mVAk6YAX2MGRAC@xBU1dapmwGMiWQtNMsbr56epIsW0rtBN0ISCTvz@@OdzySN2IjbGpU6Ua6mMvHLHq00aWWt/BBOhpzzm3CV6KkZUTTQAWCRZfpp8l2G@vI8lzqhVsOBvzNdhzQVURt4IJNJGKXoNzm/Nz3h5tXkb2is2iDhHiccOGuZrQasemGUctwFG2mltEVFXEZPajhg06iuEyCcvSgWVAOJywYCtSjD4oFIq4FttgjOzlv@sHrpOKMJjVjOKnpw9dJwniWo@YkHDPGrfpXvv158MrGozIZhJ8m4Yo7aR168RiGUBb5XabyHDJTrGDpXGmnYbhQbrme8bRYhS796ZewNEVZWJGPjERktZEjpefyi9KL0Uq6ZTEnLY6XFto6EA4iyNY6darQQDWDe@8MzX0sftdOLqShDMTMOiNSB0XpnWmU/0O4JXcGtSqF7RbGF7XSuzwvbkHLRW0aWtONy24pQeq5d6YytANvYcxAwzBChmqT1cBcX/8KIk2ltaAsLNbCCPRFzsEVYKRbGw1rhM6Ull24yhENlz1A9p3CzgR6Y26VlUEtXdm5WWM4dGFWIocqjNK4u50b3tkOpZKNdXLhfb3wrmc3MnW8gf1zp0DfGSPuOOq7wt2VCO8L5wdwDxuRr@UU4x3ArVFOzHKcYQxRROr1SpqGkom8cgqTk6nF2hzE4Cu78HZJK4WxEvOAOxqqfLSrhcEA@BsG0SVUxVH7ghlqaoT@E4CqeZbbXKWSKhiADgD7IUxYNWHcyDIXyAt5uAjgSyWOvygCn/twBROYQrVZbwqlqf@39g9OVXs1FVZadOizx9sGH9F5jxB@rBGyYz8hN9RqtCftoU5Sj7eO/b4V0rHPf7Q9r0ZeViO7iLSBOTUlL1v7MZ8bRELavpeNft@ZHOQPSSBHVttfRh@oK3I07RzeV7vf6@SqHh7IpPt1pI@vt@H30t3dBq0@2S@u/3vK7/6qdsAnvRW@1PX96sau48CRgjll77v8nY7D05SRju2OyaNiexjCT8gR8ox6O2phyAul8mxlkZNBPLKbn62JQ47/V2n1tiL5r/0O5jPerWpF8UlQ5so1x2x9hJv6ZK9Pf2paLvjVK4UFYDher/YvfBFQvyovnyXM8/bHMs8K85tIl5TGCu@cpL4K7j2o7hpb5JLnxYJmFF8xIPFUx@vm8Rs" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Input a multi line string, 1 for white cells, 0 for black cells, line break (<code>\n</code>) separate each rows. Output true or false.</p>
<hr />
<h1>JavaScript, 263 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;new Set(a.map((r,y)=&gt;[r.map(e=(c,x)=&gt;!c||[(m=(s,t,v=a[t])=&gt;v&amp;&amp;''+v!=s?(b=v=&gt;v[0][1]?v:b(v[0]))(s)[0]=v:s)(m(a[p=x+[,y]]=[p],[x-1,y]),[x,y-1]),e=a.at(~y).at(~x),a[y-1]?.[x]||a[y+1]?.[x]&amp;&amp;a[y+2]?.[x],r[x-1]||r[x+1]&amp;&amp;r[x+2]]),e,a.some(r=&gt;r[y])]).flat(1/0)).size&lt;3
</code></pre>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=

a=&gt;new Set(a.map((r,y)=&gt;[r.map(e=(c,x)=&gt;!c||[(m=(s,t,v=a[t])=&gt;v&amp;&amp;''+v!=s?(b=v=&gt;v[0][1]?v:b(v[0]))(s)[0]=v:s)(m(a[p=x+[,y]]=[p],[x-1,y]),[x,y-1]),e=a.at(~y).at(~x),a[y-1]?.[x]||a[y+1]?.[x]&amp;&amp;a[y+2]?.[x],r[x-1]||r[x+1]&amp;&amp;r[x+2]]),e,a.some(r=&gt;r[y])]).flat(1/0)).size&lt;3

const parse = (s, n = s.length ** .5) =&gt; [...Array(n)].map((_, i) =&gt; [...s.slice(i * n, (i + 1) * n)].map(v =&gt; v === '.'));
const testcases = `
......... True
##.....................## True
#..............# True
...#........#... True
...#........#... True
......................... True
##...#.............#...## True
................................................. True
........................#........................ True
....###.....##......##.....##......##.....###.... True
................................................................ True
##....####....##...........##......##...........##....####....## True
...##.......#...........##.....##.....##...........#.......##... True
#............... False
#...#......#...# False
#..##..##..##..# False
#........................ False
.......#...###...#....... False
######....#....#....#.... False
######...##...##...###### False
...#......#......#......#......#......#......#... False
.................###....#....###................. False
...#......#...............##..................... False
....#.......#.......#........######........#.......#.......#.... False
..#.........#.......#......##......#.......#.......#.........#.. False
.#......#..............................................#......#. False
...........................##......#............................ False
####............................................................ False
#......##......##......##......##......##......##......##......# False
`.trim().split('\n').map(r =&gt; [parse(r.split(' ')[0]), r.endsWith('True')])

testcases.forEach(([i, e]) =&gt; {
  console.log(f(i), e);
});</code></pre>
</div>
</div>
</p>
<p>Input boolean matrix, output true or false.</p>
<pre class="lang-javascript prettyprint-override"><code>a=&gt;new Set(
  a.map((r,y)=&gt;[
    r.map(e=(c,x)=&gt;!c||[ // for each cell, which is either empty or
      // generate an unique symbol for its connected area
      (m=(s,t,v=a[t])=&gt;v&amp;&amp;''+v!=s?(b=v=&gt;v[0][1]?v:b(v[0]))(s)[0]=v:s)(m(a[p=x+[,y]]=[p],[x-1,y]),[x,y-1]),
      // its 180 rotated position is non-empty
      e=a.at(~y).at(~x),
      // its ^ cell is non-empty or its v and vv cells are non-empty
      a[y-1]?.[x]||a[y+1]?.[x]&amp;&amp;a[y+2]?.[x],
      // its &lt; cell is non-empty or its &gt; and &gt;&gt; cells are non-empty
      r[x-1]||r[x+1]&amp;&amp;r[x+2]
    ]),
    // at least one non-empty cell this row
    e,
    // at least one non-empty cell this column
    a.some(r=&gt;r[y])
  ]).flat(1/0)
).size&lt;3 // if every non-empty cell connected, they have same symbol (count as 1)
         // if all other condition holds, they will be all true (count as 1)
</code></pre>
<p>Transpose the matrix also costs 263 bytes, maybe someone can golf one of them a bit</p>
<pre class="lang-javascript prettyprint-override"><code>m=&gt;new Set([m,m.map((r,y)=&gt;r.map((_,x)=&gt;m[x][y]))].map(a=&gt;a.map((r,y)=&gt;[r.map(e=(c,x)=&gt;!c||[a==m||(m=(s,t,v=a[t])=&gt;v&amp;&amp;''+v!=s?(b=v=&gt;v[0][1]?v:b(v[0]))(s)[0]=v:s)(m(a[p=x+[,y]]=[p],[x-1,y]),[x,y-1]),e=a.at(~y).at(~x),r[x-1]||r[x+1]&amp;&amp;r[x+2]]),e])).flat(1/0)).size&lt;3
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 61 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>˜ƶIgôΔ2Fø0δ.ø}2Fø€ü3}*εεÅsyøÅs«à]˜0KÙgIDø«εÅγsÏ3@DgĀª}˜`IÂíQP
</code></pre>
<p>Input as as matrix of <code>1</code>s for white squares and <code>0</code>s for black squares.<br />
Outputs a 05AB1E-truthy/falsey result, so <code>1</code> as truthy, and <code>0</code> or a positive integer as falsey.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//9Jxj2zzTD285N8XI7fAOg3Nb9A7vqAUxHzWtObzHuFbr3NZzWw@3Flce3gEkD60@vCD29BwD78Mz0z1dDu84tBokeW5z8eF@YweX9CMNh1bVnp6T4Hm46fDawID//6OjDXVA0AAIwaxYHaiIIRYRQ7gIXD1EJVgEiQ8WwdSFYi6KCMyuWAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##pVM9SwNBEO3zK8K@QpBzCaYTJAqHjYUJgo0EjHocAYkh2QgpAhKwtrERUthq9BqTcKDVrtgE7kf4R86c9@Gu7t1FHLid25l5b2Z3Zs@7jeOm5V@QasdirL/W7jRbzDotNlvtHtsoEqNv2kxMTP5iFMj2Ces1zhJf5WP4uL9Ca/x@s0D2eiyyEn8@ep9xxxYT72Z9R7glb0KFOwh@FwjxWh5wZ9WbelNx1e0Ld7Hysbirz0elXXFrc8cULh8HXu@5K67LW6b9dskfBvPREXfEUDzVqj6hBwafVfxDQmMhBgFVBAtToJJ9GEXTJGCADEhQQBYugy/NhRwMEEZEiqZtkZPnD6WGXECs5WrVtPLmOz66bGhOqFavssghv1sYmyD1IjRB/jRATReQXBnkYydHUBfZJy@BKIO1pNJ1SckMpNQO/cwAmRP084KlnFIqbdgXBWhKDJABjf8CCuTMeubTQM5YYxn2qIf/fRn6V7C0ljtC6p8" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Verify rule &quot;<em>All white squares must be joined in a single region.</em>&quot;:</p>
<pre class="lang-python prettyprint-override"><code>˜             # Flatten the (implicit) input-matrix to a single list
 ƶ            # Multiply each value by its 1-based index (so all 1s become unique)
  Igô         # Convert this list back into a matrix equal of the input-dimensions 
Δ             #  Loop until it no longer changes to flood-fill:
 2Fø0δ.ø}     #   Add a border of 0s around the matrix:
 2F     }     #    Loop 2 times:
   ø          #     Zip/transpose; swapping rows/columns
     δ        #     Map over each row:
    0 .ø      #      Add a leading/trailing 0
 2Fø€ü3}      #   Convert it into overlapping 3x3 blocks: 
 2F    }      #    Loop 2 times again:
   ø          #     Zip/transpose; swapping rows/columns
    €         #     Map over each inner list:
     ü3       #      Convert it to a list of overlapping triplets
 *            #   Multiply each 3x3 block by the value in the (implicit) input-matrix
              #   (so the 0s remain 0s)
 εεÅsyøÅs«à   #   Get the largest value from the horizontal/vertical cross of each 3x3
              #   block:
 εε           #    Nested map over each 3x3 block:
   Ås         #      Pop and push its middle row
     y        #      Push the 3x3 block again
      ø       #      Zip/transpose; swapping rows/columns
       Ås     #      Pop and push its middle rows as well (the middle column)
         «    #      Merge the middle row and column together to a single list
          à   #      Pop and push its maximum
]             #  Close the nested maps, flood-fill loop, and outer loop
 ˜            # Flatten the resulting flood-filled matrix
  0K          # Remove all 0s (the black squares)
    Ù         # Uniquify the values of each island
     g        # Pop and push its length (which is 1 if it was a single island of 1s)
</code></pre>
<p><a href="https://tio.run/##pVNBS8MwFL7vV4T3DoLUMPUmyBCGIF4UwYvsUF2shdGNJRN62EXwH3gRdvAqk522MdBTA14G/RH@kdratSaathMfJC/J@973XvJeuty@dFl0Cyd9JoS/1eu7nmBt4nq9gdgjYPlNR8hpM3i1anBwJQZ2J7c1Pu5ezjboafC8X4MjTsQN6zNiE@56TocRl3dsr02612SbN2I0RMvR@zyYOHIaPuwcykU9nFK5GCbLmEm@7Q6DyWY4C2fynvtyEc/BWD61lqP6sXx0IqDnLviMgxyD14WhFcwb0QXQTMACpJpgfJSofJ@iaJEkDKg65F6IZX4lfEUmrPBBTBErRYu2WBHnD6mmXIiZVrPVw6qbb/zqsdFwQz17nUWF/C5hdoRKLdIjVIfB0VAFzJ8M1WvnV9An1aZOiWiNtaYyVUmLjFiQO5p7BrG0g34@sBJTCWWEfVEgLcAglrhmq4QCK3q99GtgRVvjOuyrGv73Z5h/wdparQi0PgE" rel="nofollow noreferrer">Try just step 1 online for all test cases.</a></p>
<p>Step 2: Verify rules &quot;<em>All entries must be at least 3 squares long.</em>&quot; and &quot;<em>No row/column can be completely filled with black squares.</em>&quot;:</p>
<pre class="lang-python prettyprint-override"><code>I             # Push the input-matrix again
 D            # Duplicate it
  ø           # Zip/transpose the copy; swapping its rows/columns
   «          # Merge the two matrices together
    ε         # Map over each inner list:
     Åγ       #  Run-length encode it; pushing a list of values and lengths
       s      #  Swap so the values are at the top
        Ï     #  Only keep the lengths for the truthy (==1) values
         3@   #  Check for each whether it's &gt;= 3
         D    #  Duplicate this list
          g   #  Pop and push its length
           Ā  #  Check whether it's truthy (&gt;= 0)
            ª #  Append this check to the list
    }˜        # After the map: Flatten the list of lists
      `       # Pop and dump all values to the stack
...
P             # Take the product of all values on the stack
</code></pre>
<p><a href="https://tio.run/##pVPNSsNAEL77FMPOwUuMh94EqULOUhG8iGAa13Zxu6nJxpJDQQTPvoAvoPXmD4K3xJvQh/BFYmKauKv5qTiQnezMfN/M7sy6vt1nNDknPY9KGa6NPSYkPQYmxoHcAGKE1kDGj1b0aqyQbUcGNi993Y/L@71Vcze63Ux9HgWbc6BCeoz6YEvg1PYldMA/C2wvNXFXDGB7xwLmgxzSFCBc8NzJuuPyYCTAcUdjTiXlIZwwztMqJkwOoc9t57Qg6aZpSWLFL9Fs/hRfzR/8@LqzZQ3eLqK76fvNUS8h5j4jIfVJPCPCJVMjeu4mB8QshBgETU0wNWWq3OdRZp1kDKgCShRiE66Br86FLRjEPGKhzLottuT5Q6k5F2Kh1Wr1tOrmO35x2VhxQr16nUUN@d3CwoRKL3ITql8FsKILWF4Zqscuj6Avqk9dMtEGa0lV1SUtM2JN7Vg9M4iNE/TzgpWcSqrKsC8KNGtiEBugxV9GgS2z3vg0sGWscRn2RQ//@zKqX8HSWu0IOfwE" rel="nofollow noreferrer">Try just step 2 online for all test cases.</a></p>
<p>Step 3: Verify rule &quot;<em>They should have 180 degree rotational symmetry.</em>&quot;:</p>
<pre class="lang-python prettyprint-override"><code>I             # Push the input-matrix yet again
 Â            # Bifurcate it; short for Duplicate &amp; Reverse
  í           # Also reverse each inner row
   Q          # Check if the two matrices are still the same
</code></pre>
<p><a href="https://tio.run/##pVO9TsMwEN55ipNvYAlmYENCVaXOiAqJBTG4wbQWrl0ShyoDS98GARtiYWvehBcJCfnBBicp4qT44rv7vjv7zjpmM8Hze3IWcWPSg1UklOHXINQqMcdAgnQyN9nrZPse7JFxaBImW9/oY/N8vk@n28eTwhdxYFICVyYSPAZmQHIWGziC@C5hUWGSWs1hfDoBEYNZ8AKgNER6fRhqmSwVhHq5ktxwmcKNkLKoYi3MAmaShbcNyahIS/Jsk71Mc0IvBEl5TLInojR5CLZvo/yS0EZIQJA6goWpVO2@iqJdUjKgDWhRiH24Hr4uFw5gEKuIWtGuLQ7k@UOpFRdio@1q3bT25ju@vmz0nNCt3mWxQ363sDGh1YvKhPbnAXq6gO2VoX3s9gjuYvvspRRnsHZUvi45mRE7akf/zCD2TtDPC7ZyWqm8YV8USDtiEHugzV9JgQOz3vs0cGCscRf2uof/fRn@V7CztjtCrj4B" rel="nofollow noreferrer">Try just step 3 online for all test cases.</a></p>
<p>Step 4: Combine all checks and output the result:</p>
<pre class="lang-python prettyprint-override"><code>P             # Pop all values on the stack and push its product
              # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python3, 562 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def g(b,B):
 q=[(x,y)for x,y in B if b[x][y]=='.']
 Q=[q.pop(0)];S=[Q[0]]
 for x,y in Q:
  for X,Y in[(1,0),(-1,0),(0,-1),(0,1)]:
   u=(x+X,y+Y)
   if u in B and u not in S and'.'==b[x+X][y+Y]:Q+=[u];S+=[u]
 return not{*q}-{*S}
F=lambda x,l,c=0,k=0:k if not x else F(x[1:],l,(T:=c+(x[0]==l))*(x[0]==l),max(k,T))
def f(n,b):
 B=[(x,y)for x,r in E(b)for y,_ in E(r)]
 D=[(x,y)for x,y in B if'#'==b[x][y]]
 return all((n-x-1,n-y-1)in D for x,y in D)and g(b,B)and all(F(i,'.')&gt;2and F(i,'#')&lt;n for i in b)and all(F(i,'.')&gt;2and F(i,'#')&lt;n for i in zip(*b))
</code></pre>
<p><a href="https://tio.run/##pVZbb9owFH5efoVXS4sNDiKdJlV03kPV8jgJgbZWWdQmYGjU4FAnWWFtfzs7ThRIINxUS2Af51y@8/n4Mlskj5H8ejFTy@UNFzKdCuUlwhiJMZoQn13RjoGeuUPmbEHHkULQo0CiKxSMke/MXWfhcm62TNdAPe48t2bRjLSpe9nnTs9puzBdsuqBs0y@ZXcgO8RmbcqIlXdtZtlZZ1NXK6KUk3nzli2ad1SLEDHNY3tyBEMZJVrsaxEQcA54mreAqHnndnpN7qQAI@sMpESSKqlNXhvP79Zro/9udHnoTf2RB@hCNuRt9sTbnScdRnueIxHGAnXJ3LE7LmiQQYcPmyC2IeOQ0sZqyKbenDyxAaUZb2Mima95u6rwpjTYG@Jn4oLd56KigO66nmAT50lpktc5eGFIiLTmwJq0FkAZaF@XWb6mmp989fRIG3RJwIAj@uNcz2QSNul3mdkF2so/QfdfMCMNn9KlTjeJ7v3IUyMSQ86fJA9kQkIhQWw0Wt/oZUE9c2In6ARN6a78KE9OBCx4rs4kcGEMbvoDxNHZ2Znx0Craw9tApeLtlxcGkJkKRsYDblUarlHR06vv9V6OU9kLAq@tAUTXg6qpt99sdf5wGdDaL96H69h2gg98og@McwtckLFDxCfi@EBqeSyMi76cXRVWWVjr7ygWXMNQNduq17LK4SpuFQX0M0L2RRuNxEQJgeLFdCoStcj0cflX6J9boUgSoZCQiQpEzNA4CEMxsmCXDaMwncp4O9jRUSulWC7RwtAuwusTw97AotdixWv1b3/g7STQF6Sil5LD8p9uhcPuZva5ZVze8Ud2hcvfj0EC2J5TT4k4uyKGkUyCSRqlNXTX1HSFAox3rsI2f1u4tkp574JatQu6Wcm4hLMEr1btGE50FNza4QbjPd6LUW11nW@zgw8cWnvPOLyTd4ZeDqS32/cxkA4tEsYYf@xQPOC//jQ8ut@51wx9eRvG6pqHvQG0kp@RFAzp@70Vz8IgIeYfaVL9aPCYD@8hjoLiw5tJYTaOhUrgOdVYPTE8eItZtksp4hyJv14IzynDmCn95jATEScxmmmz0WeTLv8D" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<!-- TYYY -->

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/QNNN/">QNNN</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




