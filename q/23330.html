<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::23330</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>027</td><td>C gcc</td><td>250219T030427Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/278303#278303">ceilingc</a></td></tr>
<tr d-ix="1"><td>063</td><td>APLNARS</td><td>250215T102458Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/278241#278241">Rosario</a></td></tr>
<tr d-ix="2"><td>139</td><td>Axiom</td><td>170425T093624Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/117576#117576">user5898</a></td></tr>
<tr d-ix="3"><td>016</td><td>Perl 6</td><td>160309T230830Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/75237#75237">Hotkeys</a></td></tr>
<tr d-ix="4"><td>021</td><td>TI84 BASIC</td><td>160309T224846Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/75233#75233">SuperJed</a></td></tr>
<tr d-ix="5"><td>103</td><td>C#</td><td>140307T211003Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23418#23418">davidsbr</a></td></tr>
<tr d-ix="6"><td>nan</td><td></td><td>140307T162736Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23388#23388">Mukul Ku</a></td></tr>
<tr d-ix="7"><td>069</td><td>Python</td><td>140307T102854Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23336#23336">Abhijit</a></td></tr>
<tr d-ix="8"><td>070</td><td>Python</td><td>140307T213445Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23422#23422">Wrzlprmf</a></td></tr>
<tr d-ix="9"><td>nan</td><td></td><td>140307T120544Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23352#23352">Christop</a></td></tr>
<tr d-ix="10"><td>081</td><td>Java  108 /</td><td>140307T195101Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23408#23408">Mark Jer</a></td></tr>
<tr d-ix="11"><td>070</td><td>C</td><td>140307T175559Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23399#23399">orion</a></td></tr>
<tr d-ix="12"><td>056</td><td>Javascript</td><td>140307T144702Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23379#23379">Michael </a></td></tr>
<tr d-ix="13"><td>077</td><td>Javascript</td><td>140307T104159Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23337#23337">Julien C</a></td></tr>
<tr d-ix="14"><td>021</td><td>APL</td><td>140307T104412Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23340#23340">mniip</a></td></tr>
<tr d-ix="15"><td>080</td><td>R</td><td>140307T105020Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23341#23341">plannapu</a></td></tr>
<tr d-ix="16"><td>035</td><td>MATLAB</td><td>140307T104218Z</td><td><a href="https://codegolf.stackexchange.com/questions/23330/calculate-the-sine-of-a-float-in-radians/23338#23338">mmumboss</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>55</s> 27 bytes</h1>

<pre class="lang-c prettyprint-override"><code>#define S(x)-1i*cexpf(1i*x)
</code></pre>
<p>-28 thanks to @jdt</p>
<p><a href="https://tio.run/##VUy9CoMwGNx9iqAUEjWtdhNN9w6FgmuhfImJBjSKRhCKr940uBUO7rg/QVshnIsaqbSRqMYbobmOhdwmhb3YiIu0Ef3ayGoA2527WzCANph8AoTUOGNtLNIsK3XF8sxTkhyRD/sRLAJW48f7eY@vsb74Akk5W/z@zyuPwTT7L4XDk0IHXiZMIeWpAr5goJwcvT3Y3VeoHtrF0X5wlC62Ya1Zi@IH" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Permitting <code>exp</code> appears to be a very large loophole.</p>
</div>
<div id="pu1" class="pu"><h1>APL(NARS), 63 chars</h1>
<pre><code>r←s w;d;e;q;m
r←d←w⋄e←÷9*9⋄q←0,1⋄m←-w×w
r+←d×←m÷×/q+←2⋄→2×⍳e&lt;∣d
</code></pre>
<p>//14+26+23=63</p>
<p>I think it is 8 significative digits...</p>
<p>test:</p>
<pre><code>  s 1p1÷2
1
  1○ 1p1÷2
1
  s 1p1÷4
0.7071067812
  1○ 1p1÷4
0.7071067812
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Axiom, 139 bytes</h1>

<pre><code>s(x:Float):Complex Float==(digits()&gt;20=&gt;%i;x&gt;2*%pi=&gt;s(x-2*%pi);x&lt; -2*%pi=&gt;s(x+2*%pi);imag(reduce(+,[(%i*x)^k/factorial(k)for k in 0..40])))
</code></pre>

<p>I see this formula in the other solutions and I inplemented it in Axiom...
The formula i follow is this:</p>

<pre><code>                               +oo
                               ----
                               \      (i*x)^k
sin(x)=ImPart(e^(i*x))=imPart( /     --------  )
                               ----k     k!
                                 0
</code></pre>

<p>ungolf</p>

<pre><code>sin1(x:Float):Complex Float==
              digits()&gt;20=&gt;%i
              x&gt;  2*%pi  =&gt;sin1(x-2*%pi)
              x&lt; -2*%pi  =&gt;sin1(x+2*%pi)
              imag(reduce(+,[(%i*x)^k/factorial(k)for k in 0..40]))
</code></pre>

<p>there is some problem for the last 2 digits each number; some test cases:</p>

<pre><code>(79) -&gt; [-23, numeric(sin(-23)), s(-23) ]
   (79)  [- 23.0,0.8462204041 7517063524,0.8462204041 7517063514]
                                                 Type: List Complex Float
(80) -&gt; [ 23, numeric(sin( 23)), s( 23) ]
   (80)  [23.0,- 0.8462204041 7517063524,- 0.8462204041 7517063536]
                                                 Type: List Complex Float
(81) -&gt; [[x/2,numeric(sin(x/2)),s(x/2)] for x in 0..(7*2)]
   (81)
                  1
   [[0,0.0,0.0], [-,0.4794255386 0420300027,0.4794255386 0420300027],
                  2
    [1,0.8414709848 0789650665,0.8414709848 0789650665],
     3
    [-,0.9974949866 0405443094,0.9974949866 0405443093],
     2
    [2,0.9092974268 256816954,0.9092974268 256816954],
     5
    [-,0.5984721441 0395649405,0.5984721441 0395649405],
     2
    [3,0.1411200080 598672221,0.1411200080 5986722208],
     7
    [-,- 0.3507832276 8961984812,- 0.3507832276 8961984817],
     2
    [4,- 0.7568024953 0792825138,- 0.7568024953 0792825139],
     9
    [-,- 0.9775301176 6509705539,- 0.9775301176 6509705545],
     2
    [5,- 0.9589242746 6313846889,- 0.9589242746 6313846888],
     11
    [--,- 0.7055403255 7039190623,- 0.7055403255 7039190626],
      2
    [6,- 0.2794154981 9892587281,- 0.2794154981 9892587545],
     13
    [--,0.2151199880 878155243,0.2151199880 878155243],
      2
    [7,0.6569865987 187890904,0.6569865987 1878909041]]
                                                      Type: List List Any
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Perl 6, <s>17</s> 16 bytes</h1>

<pre class="lang-perl6 prettyprint-override"><code>{(e**(i*$_)).im}
</code></pre>
</div>
<div id="pu4" class="pu"><h1>TI-84 BASIC, 21 bytes</h1>

<pre><code>(e^(iAns)-e^(⁻iAns))/2i
</code></pre>
</div>
<div id="pu5" class="pu"><h1>C# - <strike>115</strike> 103</h1>

<p>This code uses an approximation of <a href="http://en.wikipedia.org/wiki/Taylor_series#List_of_Maclaurin_series_of_some_common_functions" rel="nofollow">Maclaurin series</a> calculation of the sine of x, and is accurate to 7 decimal places.</p>

<p><code>float x=0;for(int i=1;i&lt;96;i+=2){float n=i,d=1,p=a;while(n&gt;1){d*=n;n--;p*=a;}x+=((i+1)%4==0?-1:1)*p/d;}</code></p>

<p>Where <code>a</code> is the input in radians. </p>

<p>Here's the code with whitespaces:</p>

<pre><code>float x = 0; for (int i = 1; i &lt; 96; i += 2)
{
    float n = i, d = 1, p = a;
    while (n &gt; 1)
    {
        d *= n;
        n--;
        p *= a;
    }
    x += ((i+1)%4==0?-1:1)*p / d;
}
</code></pre>
</div>
<div id="pu6" class="pu"><h1>C++ <strike>80</strike>  68(excluding white-spaces + edit)</h1>
<h3>GOLFED</h3>
<pre><code>float S(float x){float z=x*x,y=x*(5040-(840+(42-z)*z)*z)/5040;return y;}  
</code></pre>
<h3>UNGOLFED</h3>
<p>both versions are different so that, it is easy to get output.</p>
<pre><code>#include&lt;iostream&gt;
int main()
{
    float x,y,z;
    for(;;)
    {
        std::cin&gt;&gt;x;
        z=x*x;
        y=(x*(5040-840*z+42*z-z*z*z))/5040;
        std::cout&lt;&lt;y&lt;&lt;'\n';
    }
}  
</code></pre>
<h3>Output</h3>
<pre><code>1.047197 ((pie)/3)
0.865096 (sin((pie)/3) = 1.73201/2 = 0.8660)
</code></pre>
</div>
<div id="pu7" class="pu"><h2>Python <strike>83</strike> 69</h2>

<p><em>Based on <a href="http://en.wikipedia.org/wiki/Bhaskara_I%27s_sine_approximation_formula" rel="nofollow noreferrer">Bhaskara I's sine approximation formula</a></em></p>

<p><strong>Implementation</strong></p>

<pre><code>def f(x):p=3.14;x,s=x%p,(4,-4,4)[int(x/p)];return s/(12.34/x/(p-x)-1)
</code></pre>

<p><strong>Ungolfed</strong></p>

<pre><code>def apxsine(radian):
    pi = 3.14 # Approximate to 2 decimal places
    sign = (4,-4,4)[radian % pi]
    return sign / (12.34/radian/(pi - radian) - 1))
</code></pre>

<p><strong>Deduction</strong></p>

<p><img src="https://i.sstatic.net/bCSUt.png" alt="enter image description here"></p>

<p><strong>Demo</strong></p>

<pre><code>&gt;&gt;&gt; from math import pi, sin
&gt;&gt;&gt; any(round(abs(f(e) - sin(e)), 2) for e in (e/180.*pi for e in range(0,360)))
False
</code></pre>

<p>JUst realized that if I would have opted for <a href="http://en.wikipedia.org/wiki/Euler%27s_formula" rel="nofollow noreferrer">Euler's formula</a> route, the code would be shorter (49 characters). But then it uses Complex numbers and am not sure if the call to the real method would be valid in the current question context.</p>

<pre><code>f=lambda x:((2.72**(x*1j)-2.72**(-x*1j))/2j).real
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python, 70 bytes</h1>
<p>Using sin(x) = Im(exp(ix)) and the series for the exponential function:</p>
<pre class="lang-python prettyprint-override"><code>def s(x):
    s,f=0,1
    for i in range(1,50):f*=1j*x/i;s+=f
    return s.imag
</code></pre>
<p>Note that <code>imag</code> is not a function here, strictly speaking.</p>
<p>Ungolfed:</p>
<pre class="lang-python prettyprint-override"><code>def s(x):
    s = 0
    f = 1
    for i in range(1,50):
        f *= 1j*x/i
        s += f
    return s.imag
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Haskell</h2>

<pre><code>import Prelude hiding (sin)
import Data.Complex
sin x=(\(_:+y) -&gt; y) $ exp (0 :+ x)
</code></pre>

<p>Uses Euler's formula. <code>(y :+ z)=y+zi</code> I think.</p>
</div>
<div id="pu10" class="pu"><h2>Java - 108 / 81</h2>

<pre class="lang-java prettyprint-override"><code>float s(float p){for(float q=p-=3.14,d=p=-p,i=1,m=1;i&lt;11;)p+=(q*=d*d)/(m*=++i*++i)*(((int)i&amp;2)-1);return p;}
</code></pre>

<p>Without the function declaration, it's just doing <code>p = sin(p)</code>:</p>

<pre class="lang-java prettyprint-override"><code>for(float q=p-=3.14,d=p=-p,i=1,m=1;i&lt;11;)p+=(q*=d*d)/(m*=++i*++i)*(((int)i&amp;2)-1);
</code></pre>

<p>The error is max ±0.00201 in the range 0..2π, much worse in either direction.</p>

<p>Ungolfed:</p>

<pre class="lang-java prettyprint-override"><code>float s(float p) {
    for (float q = p -= 3.14, d = p = -p, i = 1, m = 1; i &lt; 11;)
        p += (q *= d * d) / (m *= ++i * ++i) * (((int)i &amp; 2) - 1);
    return p;
}
</code></pre>

<p>Unobfuscated:</p>

<pre class="lang-java prettyprint-override"><code>float sin(double ph) {
    float [] dividers = {-1, 6, -120, 5040, -362880, 39916800L};
    ph -= Math.PI;
    double d = 0;
    for (int i = 0; i &lt; 6; i++)
        d += Math.pow(ph, i * 2 + 1) / dividers[i];
    return d;
}
</code></pre>
</div>
<div id="pu11" class="pu"><h1>C 70</h1>
<p>This one is not only golf but also useful in microcontrollers without floating point instructions or math libraries:</p>
<pre><code>float S(float a){float x,y=1,h=1e-4;while(x+=h*(y-=h*x),(a-=h)&gt;0);return x;}
</code></pre>
<p>Of course, the majority of the characters is taken by these annoyingly long type declarations and return. If the function declaration doesn't count, it's much shorter. If we take the value by pointer and overwrite it (removing the return statement), we get 71 characters.</p>
<pre><code>S(float*x){float a=*x,y=1,h=1e-4;*x=0;while(*x+=h*(y-=h**x),(a-=h)&gt;0);}
</code></pre>
<p>However, it complains about default return value.</p>
<p>EDIT: 70, for is shorter:</p>
<pre><code>S(float*x){float a=*x,y=1,h=1e-4;*x=0;for(;(a-=h)&gt;0;*x+=h*(y-=h**x));}
</code></pre>
<p>EDIT2: forgot ungolfed version</p>
<pre><code>float fake_sin(float a){
   float x=0,y=1;
   float h=1e-4;//adjust for accuracy
   while(a&gt;0){
      y-=h*x;
      x+=h*y;
      a-=h;
   }
   return x;//return y for cosine or y/x for tangent
}
</code></pre>
<p>It takes arbitrary positive angle, but doesn't work for negative.</p>
</div>
<div id="pu12" class="pu"><h2>Javascript (56)</h2>



<pre class="lang-javascript prettyprint-override"><code>j=x=+prompt(r=0);for(i=1;i&lt;99;j*=x/++i)r+=i&amp;1?i&amp;2?-j:j:0
</code></pre>

<p><a href="http://en.wikipedia.org/wiki/Taylor_series" rel="nofollow">Taylor series</a> used here.<br>
<code>x</code> is the input value,  <code>r</code> is the result, <code>j</code> contains <code>x^i/i!</code><br>
The result is output in console.</p>

<pre class="lang-javascript prettyprint-override"><code>x=prompt();
r=0;
j=1;
for(i=1;i&lt;99;i++) {
  j=j*x/i;
  if (i%2) {
    if (i%4 == 1) r+=j;
    else r-=j;
  }
}
alert(r);
</code></pre>

<p>If evaluation is needed for input (for example <code>3.141592653 / 2</code>) :  </p>

<pre class="lang-javascript prettyprint-override"><code>j=x=eval(prompt(r=0));for(i=1;i&lt;99;j*=x/++i)r+=i&amp;1?i&amp;2?-j:j:0
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Javascript <strike>114</strike> 77</h1>

<p>Using Taylor Series expansion at 0:</p>

<pre><code>function s(y){
    var p=2*Math.PI,
        // z = sign (y)
        z=(y&gt;0?1:-1),
        // x = (abs(y) mod 2 PI - PI) * sign(y) =&gt; put x in [-PI, PI] range
        x=-z*((z*y)%p-p/2),
        // u = x^2
        u=x*x; 
        // return Taylor Expansion
        return x*(1-(1-(1-(1-u/72)*u/42)*u/20)*u/6);
}
</code></pre>

<p>Golfed (114):</p>

<pre><code>function s(y){var z=(y&gt;0?1:-1),p=2*Math.PI,x=-z*((z*y)%p-p/2),u=x*x; return x*(1-(1-(1-(1-u/72)*u/42)*u/20)*u/6);}
</code></pre>

<p><strong>Edit</strong></p>

<p>"Improved" for y in [0,2PI], golfed (77) : </p>

<pre><code>function s(y){var x=3.14-y,u=x*x;return x*(1-(1-(1-(1-u/72)*u/42)*u/20)*u/6)}
</code></pre>

<p>Another version for more precision (varying k) : </p>

<pre><code>function s(y){
    var p=2*Math.PI,
        // z = sign (y)
        z=(y&gt;0?1:-1),
        // x = (abs(y) mod 2 PI - PI) * sign(y) =&gt; put x in [-PI, PI] range
        x=-z*((z*y)%p-p/2),
        // u = x^2
        u=x*x,
        // k = 2* expansion level +1
        k=9,
        // r = 1 initial value
        r = 1; 

        // Taylor Expansion
        // while k &gt; 1
        for(;k&gt;1;) { 
            r= 1 - r*u /k--/k--; 
        }
        return x*r;
 }
</code></pre>

<p>Golfed (114):</p>

<pre><code>function s(y){var z=(y&gt;0?1:-1),p=2*Math.PI,x=-z*((z*y)%p-p/2),u=x*x,k=9,r=1;for(;k&gt;1;)r=1-r*u/k--/k--;return x*r;}
</code></pre>
</div>
<div id="pu14" class="pu"><h1>APL - 21</h1>
<pre><code>{|{.5×⍵-+⍵}0J1*⍵÷○.5}
</code></pre>
<p>This uses the fact that <code>sin pi*x/2 = Im[(-1)^x]</code>.</p>
<p><a href="http://ngn.github.io/apl/web/#code=%7B%7C%7B.5%D7%u2375-+%u2375%7D0J1*%u2375%F7%u25CB2%7D%203.1415926535%D72" rel="nofollow noreferrer">Example test on ngn APL</a></p>
<p>Previous answer: 26</p>
<pre><code>{-/((×\9⍴⍵)÷×\1+⍳9)[2×⍳5]}
</code></pre>
<p>This uses the Taylor/Maclaurin series up to 9th term.</p>
<p><a href="http://ngn.github.io/apl/web/#code=%7B-/%28%28%D7%5C9%u2374%u2375%29%F7%D7%5C1+%u23739%29%5B2%D7%u23735%5D%7D%203.1415926535%F72" rel="nofollow noreferrer">Example test on ngn APL</a></p>
<p>Note about operators: only operators used were <code>/\⍴⍳</code> which don't have anything to do with arithmetic, and are mostly list manipulation tools, <code>○</code> which is <em>multiply by pi</em>, and <code>+-×÷*</code> which are permitted by the rules</p>
</div>
<div id="pu15" class="pu"><h3>R, 80 chars</h3>

<pre><code>f=function(x){a=seq(1,99,2);sum((-1)^(0:49)*(x^a)/sapply(mapply(`:`,1,a),prod))}
</code></pre>

<p>Uses <a href="http://www.math.utah.edu/~kitchen/1220F06/sine.html" rel="nofollow">Taylor approximation</a> at an order of 99. 
<code>sapply</code> and <code>mapply</code> are just functions to vectorize the operation, while <code>sum</code> and <code>prod</code> are just vectorized <code>+</code> and <code>*</code>.</p>

<pre><code>&gt; b=seq(0,2*pi,1e5)
&gt; all((f(b)-sin(b))&lt;.01)
[1] TRUE
</code></pre>

<p>If the <code>*apply</code> functions are a problem, here is a solution at 91 characters:</p>

<pre><code>f=function(x){a=0:100;b=c();for(i in 1:50)b[i]=(-1)^(i-1)*(x^a[2*i])/prod(1:a[2*i]);sum(b)}
</code></pre>
</div>
<div id="pu16" class="pu"><h2>MATLAB 35</h2>

<p>Too bad <code>e</code> is not a constant in Matlab. That would have saved me 10 characters. I will see if I can come up with a solution for this.</p>

<pre><code>@(x)(2.7183^(x*i)-2.7183^(-x*i))/2i
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/23330/">23330</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




