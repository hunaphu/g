<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::342</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>009</td><td>Vyxal 3</td><td>250506T202413Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/279553#279553">Themooni</a></td></tr>
<tr d-ix="1"><td>072</td><td>Tcl</td><td>250506T160101Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/279546#279546">sergiol</a></td></tr>
<tr d-ix="2"><td>079</td><td>Tcl</td><td>130601T220319Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/11804#11804">Johannes</a></td></tr>
<tr d-ix="3"><td>081</td><td>Tcl</td><td>171119T131358Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/148562#148562">sergiol</a></td></tr>
<tr d-ix="4"><td>010</td><td>Thunno 2</td><td>230625T163731Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/262191#262191">The Thon</a></td></tr>
<tr d-ix="5"><td>nan</td><td></td><td>230201T113648Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/257283#257283">The Thon</a></td></tr>
<tr d-ix="6"><td>020</td><td>Pyt</td><td>230201T021154Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/257272#257272">Kip the </a></td></tr>
<tr d-ix="7"><td>014</td><td>Japt</td><td>221027T143415Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/253812#253812">Shaggy</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>221027T141503Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/253811#253811">bigyihsu</a></td></tr>
<tr d-ix="9"><td>008</td><td>Vyxal</td><td>221027T112859Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/253810#253810">lyxal</a></td></tr>
<tr d-ix="10"><td>019</td><td>K ngn/k</td><td>210121T172315Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/217841#217841">coltim</a></td></tr>
<tr d-ix="11"><td>010</td><td>Jelly</td><td>210121T160806Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/217837#217837">caird co</a></td></tr>
<tr d-ix="12"><td>053</td><td>Perl</td><td>110210T001411Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/792#792">ninjalj</a></td></tr>
<tr d-ix="13"><td>048</td><td>Perl 5</td><td>200310T183123Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/200851#200851">Xcali</a></td></tr>
<tr d-ix="14"><td>011</td><td>05AB1E</td><td>200310T120812Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/200836#200836">Kevin Cr</a></td></tr>
<tr d-ix="15"><td>028</td><td>Perl 6</td><td>181022T142249Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174508#174508">nwellnho</a></td></tr>
<tr d-ix="16"><td>057</td><td>JavaScript</td><td>190309T214019Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/181232#181232">Max</a></td></tr>
<tr d-ix="17"><td>076</td><td>APLNARS</td><td>181024T065914Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174617#174617">user5898</a></td></tr>
<tr d-ix="18"><td>010</td><td>Stax</td><td>181022T214600Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174537#174537">recursiv</a></td></tr>
<tr d-ix="19"><td>024</td><td>><></td><td>190308T102134Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/181157#181157">Emigna</a></td></tr>
<tr d-ix="20"><td>025</td><td>dc</td><td>190306T175640Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/181014#181014">Sophia L</a></td></tr>
<tr d-ix="21"><td>069</td><td>Kotlin</td><td>190305T155330Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/180927#180927">Adam</a></td></tr>
<tr d-ix="22"><td>018</td><td>APL Dyalog Unicode</td><td>190305T141120Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/180921#180921">Ad&#225;</a></td></tr>
<tr d-ix="23"><td>021</td><td>J</td><td>181023T062330Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174553#174553">Bubbler</a></td></tr>
<tr d-ix="24"><td>106</td><td>MBASIC</td><td>181023T190217Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174592#174592">wooshiny</a></td></tr>
<tr d-ix="25"><td>038</td><td>J</td><td>110202T192632Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/384#384">Eelvex</a></td></tr>
<tr d-ix="26"><td>076</td><td>Python 2</td><td>181022T173507Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174523#174523">Triggern</a></td></tr>
<tr d-ix="27"><td>052</td><td>Powershell</td><td>181023T113912Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/174562#174562">mazzy</a></td></tr>
<tr d-ix="28"><td>016</td><td>Husk</td><td>171119T222431Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/148613#148613">ბიმო</a></td></tr>
<tr d-ix="29"><td>064</td><td>Tcl</td><td>171119T171846Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/148571#148571">sergiol</a></td></tr>
<tr d-ix="30"><td>057</td><td>Windows PowerShell</td><td>110210T000117Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/791#791">Joey</a></td></tr>
<tr d-ix="31"><td>241</td><td>Clojure 264 ></td><td>121030T185152Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/8855#8855">Programm</a></td></tr>
<tr d-ix="32"><td>nan</td><td></td><td>120331T182839Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5366#5366">Ashwini </a></td></tr>
<tr d-ix="33"><td>077</td><td>C# –</td><td>121003T161042Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/8587#8587">Mormegil</a></td></tr>
<tr d-ix="34"><td>161</td><td>Java  161 Characters</td><td>110209T232205Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/790#790">Octavian</a></td></tr>
<tr d-ix="35"><td>071</td><td>Javascript 73</td><td>120523T163346Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5940#5940">Paul</a></td></tr>
<tr d-ix="36"><td>025</td><td>APL</td><td>120523T154801Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5939#5939">marinus</a></td></tr>
<tr d-ix="37"><td>025</td><td>J</td><td>120331T200210Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5367#5367">ephemien</a></td></tr>
<tr d-ix="38"><td>066</td><td>Groovy</td><td>120331T083659Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5365#5365">Armand</a></td></tr>
<tr d-ix="39"><td>036</td><td>Q</td><td>120309T162953Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5106#5106">tmartin</a></td></tr>
<tr d-ix="40"><td>147</td><td>R</td><td>120319T134657Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5203#5203">Paolo</a></td></tr>
<tr d-ix="41"><td>065</td><td>Ruby</td><td>110201T222820Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/354#354">gnibbler</a></td></tr>
<tr d-ix="42"><td>082</td><td>MATLAB</td><td>120313T223821Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5145#5145">Griffin</a></td></tr>
<tr d-ix="43"><td>079</td><td>C</td><td>120311T171010Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5120#5120">han</a></td></tr>
<tr d-ix="44"><td>084</td><td>Scala</td><td>120311T001835Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5115#5115">user unk</a></td></tr>
<tr d-ix="45"><td>027</td><td>APL</td><td>120302T203450Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5032#5032">Dillon C</a></td></tr>
<tr d-ix="46"><td>044</td><td>Q</td><td>120302T182130Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/5031#5031">skeevey</a></td></tr>
<tr d-ix="47"><td>044</td><td>dc</td><td>110210T004728Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/793#793">ninjalj</a></td></tr>
<tr d-ix="48"><td>089</td><td>Python</td><td>110201T200125Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/346#346">grokus</a></td></tr>
<tr d-ix="49"><td>066</td><td>Haskell</td><td>110201T200933Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/347#347">sepp2k</a></td></tr>
<tr d-ix="50"><td>082</td><td>PHP</td><td>110201T193411Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/345#345">Aurel B&</a></td></tr>
<tr d-ix="51"><td>025</td><td>Golfscript</td><td>110201T201824Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/349#349">gnibbler</a></td></tr>
<tr d-ix="52"><td>054</td><td>Haskell</td><td>110202T043019Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/364#364">Joey Ada</a></td></tr>
<tr d-ix="53"><td>097</td><td>D</td><td>110202T002035Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/357#357">Jonathan</a></td></tr>
<tr d-ix="54"><td>094</td><td>C#</td><td>110201T235503Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/356#356">Nellius</a></td></tr>
<tr d-ix="55"><td>080</td><td>Ruby</td><td>110201T211320Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/352#352">Nemo157</a></td></tr>
<tr d-ix="56"><td>044</td><td>Python</td><td>110201T210621Z</td><td><a href="https://codegolf.stackexchange.com/questions/342/calculate-isbn-13-check-digit/350#350">gnibbler</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3/" rel="nofollow noreferrer">Vyxal 3</a>, 9 bytes</h1>
<pre><code>UDWf①-∑t&amp;
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#H4sIAAAAAAAACjWNsQ6CMABEf6W5wekkkAJFZn_BOJAORFolUWqguhh3V_7Ab-NLrE0Y7vJyudy9YN14az1qSVxM25kRNUCcXGcCHfZHu8zf7fKZ_SbE1jm_Vuy1PU-oG030w_3h_9yg2VEoiooipZCr5xFKioyiCKzBWFWsmFJG5cFLZiw0tA6jTzNOvRvCmUxUkuL9AxwXcQatAAAA" rel="nofollow noreferrer">Vyxal It Online!</a></p>
<p>I/O as lists of ints.</p>
<p>-1 byte by Weird Glyphs</p>
<pre><code>UDWf①-∑t&amp;­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁣⁡⁪‏‏​⁡⁠⁡‌⁢⁤​‎‏​⁢⁠⁡‌­
U          # ‎⁡uninterleave implicit input
 D         # ‎⁢triplicate leaf #2
  Wf       # ‎⁣wrap the entire stack and flatten it
    ①-     # ‎⁤substract 10 from every digit
      ∑    # ‎⁢⁡sum them
       t   # ‎⁢⁢keep the last digit (==%10)
        &amp;  # ‎⁢⁣prepend implicit input
# ‎⁢⁤implicit print
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false" data-babel-preset-react="false" data-babel-preset-ts="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script type="vyxal3"&gt;
UDWf①-∑t&amp;
&lt;/script&gt;
&lt;script&gt;
    args=[["[9,7,8,0,3,0,6,4,0,6,1,5]"],["[9,7,8,0,3,0,3,4,0,6,1,5]"]]
&lt;/script&gt;
&lt;script src="https://themoonisacheese.github.io/snippeterpreter/snippet.js" type="module"/&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu1" class="pu"><h1><a href="http://tcl.tk/" rel="nofollow noreferrer">Tcl</a>, 72 bytes</h1>
<pre><code>proc f c {list $c[expr -([lmap a\ b [split $c {}] {list +$a+3*$b}])%10]}
</code></pre>
<p><a href="https://tio.run/##LcpLCoAgFAXQrdyBQR8Cpf9azIFJQWD0SINAXLsRND7HG5sSXafBBoNgd@fBjFwfulDn0h6aoGcskI7s/hlCVH@smK6aki1RFZngKia6vYPcMA0jb3jf8l50Kr0" rel="nofollow noreferrer" title="Tcl – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>Tcl, 79</h1>
<pre><code>proc f c {lmap a\ b [split $c {}] {incr d [expr $a+3*$b]};list $c[expr -$d%10]}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="http://tcl.tk/" rel="nofollow noreferrer">Tcl</a>, 81 bytes</h1>
<pre><code>proc C s {list $s[expr -([lmap c [split $s &quot;&quot;] {list +$c*([incr i]%2?1:3)}])%10]}
</code></pre>
<p><a href="https://tio.run/##K0nO@f@/oCg/WcFZoVihOiezuERBpTg6taKgSEFXIzonN7FAIVkhurggJxMkoaCkFAtVpa2SrKURnZmXXKSQGatqZG9oZaxZG6upamgQW/u/oLSkWCHaWcHS3MLA2MDMxMDM0DT2PwA" rel="nofollow noreferrer" title="Tcl – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 10 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>zʂẸ3×+ṄT%a
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728JKM0Ly_faGm0kpdS7IKlpSVpuhYbqk41Pdy1w_jwdO2HO1tCVBOXFCclF0MlF6yxNLcwMDYwMzEwMzSFiAEA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>zʂẸ3×+ṄT%a  # Implicit input   -&gt;  978030640615
z           # Uninterleave     -&gt;  [[9,8,3,6,0,1],[7,0,0,4,6,5]]
 ʂ          # Sum each         -&gt;  [27,22]
  Ẹ         # Dump onto stack  -&gt;  27, 22
   3×       # Triple           -&gt;  27, 66
     +      # Add              -&gt;  93
      Ṅ     # Negate           -&gt;  -93
       T%   # Mod 10           -&gt;  7
         a  # Append to input  -&gt;  9780306406157
            # Implicit output
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Thunno/Thunno" rel="nofollow noreferrer">Thunno</a>, <span class="math-container">\$ 17 \log_{256}(96) \approx \$</span> 13.99 bytes</h1>
<pre><code>DZLdZl.SAu3*+n10%
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72sJKM0Ly9_wYKlpSVpuhYbXaJ8UqJy9IIdS421tPMMDVQh4lDpBWsszS0MjA3MTAzMDE0hYgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Port of Kevin Cruijssen's 05AB1E answer.</p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>DZLdZl.SAu3*+n10%  # Implicit input
DZL                # Print the input without a trailing newline
   dZl             # Convert it to a list of digits and uninterleave
      .SAu         # Sum each list and dump onto the stack
          3*+      # Multiply the top one by 3 and add together
             n10%  # Negate and mod by 10
                   # This is output implicitly, concatenated onto the input,
                   # which was output without a newline at the start
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/mudkip201/pyt" rel="nofollow noreferrer">Pyt</a>, 20 bytes</h1>
<pre><code>ĐąĐŁř⁺1∧2*⁺·1ᴇ%1ᴇ-~ǰ
</code></pre>
<p><a href="https://tio.run/##K6gs@f//yIQjrUcmHG08OvNR4y7DRx3LjbSAjEPbDR9uaVcFEbp1xzf8/29pbmFgbGBmYmBmaAoA" rel="nofollow noreferrer" title="Pyt – Try It Online">Try it online!</a></p>
<pre><code>Đ                          implicit input; Đuplicate
 ą                         convert to ąrray of digits
  ĐŁ                       Đuplicate and get Łength
    ř⁺1∧                   řangify [1,2,...,n], increment, and AND with 1
        2*⁺                double and increment (yielding [1,3,1,3,...])
           ·               dot product
            1ᴇ%            modulo 10
               1ᴇ-~        10 - previous result
                   ǰ       ǰoin stack with no delimiters; implicit print
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 14 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>I/O as a string.</p>
<pre><code>+¬xÈ*YgDìÃìÌnA
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=K6x4yCpZZ0Tsw%2bzMbkE&amp;input=Ijk3ODAzMDY0MDYxNSI" rel="nofollow noreferrer">Try it</a></p>
<pre><code>+¬xÈ*YgDìÃìÌnA     :Implicit input of string U
+                  :Append
 ¬                 :  Split U
  x                :  Reduce by addition
   È               :  After passing each element at index Y through the following function
    *              :    Multiply by
     Yg            :      Index Y into
       D           :        13
        ì          :        To digit array
         Ã         :  End reduction
          ì        :  To digit array
           Ì       :  Last element
            n      :  Subtract from
             A     :   Ten
</code></pre>
</div>
<div id="pu8" class="pu">
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 118 bytes</h1>
<pre class="lang-go prettyprint-override"><code>func f(n int)int{o,e:=0,0
for i,x:=1,n;i&lt;13;i++{if i%2==0{o+=x%10}else{e+=x%10}
x/=10}
return n*10+(10-(o+3*e)%10)%10}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZY5BasMwFET3OoUIBKRISb9qx3Gc6gztFUyQgkj8FRQ5GERO0o0p9BA9Sm9Tq_Wui2H4zPDnvX-c_Ph1bY_n9mRo1zokrrv6EDcL28XFZx_tuv6-2x6P1DKkDiOflLw0jQYJxPpAnRwarSQe3IsqDk6I5Cx1y2etIXmhh6WCh7ncTDLzQYYnnS2Y2AekuFIgmII186JYGT5Vsh7z-uvvemZjPBFs9H5XQwFVCZXakrcw8VyQocyAnBPMeaEqVdalgv_5_HYc__wH" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 8 bytes</h1>
<pre><code>⁽Tẇ∑N₀%J
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCLigb1U4bqH4oiRTuKCgCVKIiwiIiwiOTc4MDMwNjQwNjE1Il0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Port of Jelly</p>
<h2>Explained</h2>
<pre><code>⁽Tẇ∑N₀%J
⁽Tẇ       # Triple every second digit
   ∑N     # -sum of that
     ₀%   # modulo by 10
       J  # append that result to the original input
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://bitbucket.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 19 bytes</h1>
<pre><code>{x,$10!2+/x*12#9 7}
</code></pre>
<p><a href="https://tio.run/##VctLCsJAEEXRrWgb0GjE@nV9dD9xIGQckKy9UwYdOHiDw@O@rtNzam28v@ehQ9jT5TafkQ6xs6WNx1MJc2BQAcVaHkUrG2ku2JMYQFHVxYSSwaLG1c1IPtxa/rVJdMUwMvxS/Y/by8m@rQ" rel="nofollow noreferrer" title="K (ngn/k) – Try It Online">Try it online!</a></p>
<p>Uses the <code>9 7</code> instead of <code>1 3</code> trick from <a href="https://codegolf.stackexchange.com/a/174553/43319">@Bubbler's J answer</a>, as well as <code>2+/x...</code> to convert ASCII digits to usable numbers (e.g. &quot;0&quot; is 48, so adding two makes it 50 which allows it to work given the mod by 10 later).</p>
<ul>
<li><code>12#9 7</code> build a 12-length list of <code>9 7</code> repeated (i.e. <code>9 7 9 7 9 7 9 7 9 7 9 7</code>)</li>
<li><code>x*</code> multiply the underlying ASCII character values by this pattern</li>
<li><code>2+/</code> seed a sum with <code>2</code> to properly offset the input digits</li>
<li><code>10!</code> mod by 10</li>
<li><code>$</code> convert result to a string</li>
<li><code>x,</code> append it to the input and return</li>
</ul>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 bytes</h1>
<pre><code>ȮD×Ðe3SN%⁵
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///EOpfD0w9PSDUO9lN91Lj1/@H2//8tzS0MjA3MTAzMDE0B" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<h2>How it works</h2>
<pre><code>ȮD×Ðe3SN%⁵ - Main link. Takes n on the left
Ȯ          - Print n
 D         - Convert to digits
   Ðe      - To even indices:
  ×  3     -   Triple
      S    - Take the sum
       N   - Negate
        %⁵ - Mod 10
             Implicitly print this digit
</code></pre>
</div>
<div id="pu12" class="pu"><h2>Perl, 53 chars</h2>

<pre><code>sub i{($_)=@_;s/(.)(.)/$s+=$1+$2*3/ger;$_.(10-$s)%10}
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 48 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>sub f{"@_"=~s/(.)(.)/$t-=$1+3*$2/ger;"@_".$t%10}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/7@4NEkhrVrJIV7Jtq5YX0NPE4j0VUp0bVUMtY21VIz001OLrEHSeiolqoYGtf@LEysV0lTi/1uaWxgYG5iZGJgZmv7LLyjJzM8r/q/ra6pnYGjwXzcPAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>

<p>Doing this as a full program would be shorter:</p>

<h3><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-p</code>, 31 bytes</h3>



<pre class="lang-perl prettyprint-override"><code>s/(.)(.)/$\-=$1+3*$2/ger;$\%=10
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/79YX0NPE4j0VWJ0bVUMtY21VIz001OLrFViVG0NDf7/tzS3MDA2MDMxMDM0/ZdfUJKZn1f8X9fXVM8AKKtbAAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 11 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>SιO`3*+θTα«
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/@NxO/wRjLe1zO0LObTy0@v9/S3MLA2MDMxMDM0NTAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9TVmmvpPCobZKCkn2ly//gczv9E4y1tM/tCDm38dDq/zr/Lc0tDIwNzEwMzAxNucxMjc2NzIDY0tiCy9DSwMjS1MzCxNzEiMvS2MTM3NjUwtzcyAQA" rel="nofollow noreferrer">verify a few more test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>S            # Convert the (implicit) input to a list of digits
             #  i.e. 978030640615 → [9,7,8,0,3,0,6,4,0,6,1,5]
 ι           # Uninterleave it
             #  → [[9,8,3,6,0,1],[7,0,0,4,6,5]]
  O          # Sum each inner list
             #  → [27,22]
   `         # Push them both separated to the stack
    3*       # Multiply the top one by 3
             #  → 66
      +      # Sum them together
             #  → 93
       θ     # Only leave the last digit
             #  → 3
        Tα   # Take the absolute difference of this digit with 10
             #  → 7
          «  # And append this digit to the (implicit) input
             #  → 9780306406157
             # (after which it is output implicitly as result)
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, <s>29</s> 28 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{$_~:1[.comb «*»(9,7)]%10}
</code></pre>

<p><a href="https://tio.run/##DcNRCoJAEADQq8yHikrI7M7szE5UF4mQivZLMexLoi7UEfrzYlsP3v02D5LHBaoE@/ws@vfWHbvrNF5g/bTrt7aNNqfS4Ss/zgukuugbSNMMO9OIhMIoLoAEUi//RhGcobcgkZU9GLEohajq@ZB/" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
</div>
<div id="pu16" class="pu"><h1>JavaScript, 57 bytes</h1>

<pre><code>f=s=&gt;s+(10-s.split``.reduce((a,b,i)=&gt;a+b*(3-i%2*2),0)%10)
</code></pre>

<p>You can invoke it like this:</p>

<pre><code>f("978030640615")
</code></pre>

<p>Effectively, it goes through each (digit, index) pair (<code>b</code>, <code>i</code>), and works out <code>i % 2</code> (is <code>i</code> odd?), multiplies it by 2, and subtracts it from 3. Take a look at this:</p>

<p>For odd numbers:</p>

<ul>
<li><code>(i % 2)</code> is 1</li>
<li><code>((i % 2) * 2)</code> is 2</li>
<li><code>3 - ((i % 2) * 2)</code> is 1</li>
</ul>

<p>For even numbers:</p>

<ul>
<li><code>(i % 2)</code> is 0</li>
<li><code>((i % 2) * 2)</code> is 0</li>
<li><code>3 - ((i % 2) * 2)</code> is 3</li>
</ul>

<p>And so we have now generated the correct multipliers. From there it is simple, just add the current accumulator value, initialised at 0, to the current character multiplied by this generated multiplier. JavaScript automatically casts string to numbers when you do this multiplication.</p>

<p>Calculating the last digit is done by taking the last digit (by computing the value modulo 10), and subtracting this from 10. </p>
</div>
<div id="pu17" class="pu"><h1>APL(NARS), chars 38, bytes 76</h1>
<pre><code>{⍵,10∣10-10∣+/w,2×w[v/⍨∼2∣v←⍳≢w←⍎¨⍕⍵]}
</code></pre>
<p>I had some other test for see better and get definition from Wikipedia, and examples in the page:
<a href="https://isbn-information.com/check-digit-for-the-13-digit-isbn.html" rel="nofollow noreferrer">https://isbn-information.com/check-digit-for-the-13-digit-isbn.html</a>  test:</p>
<pre><code>  h←{⍵,10∣10-10∣+/w,2×w[v/⍨∼2∣v←⍳≢w←⍎¨⍕⍵]}
  h 978186197271
978186197271 2 
  h 978168197271
978168197271 8 
  h 978186197371      
978186197371 9 
  h 978186197375      
978186197375 7 
</code></pre>
<p>the formula i use would be in one not APL language if w is the argument =&gt;</p>
<pre><code>f(w)==w,(10-(sum(digit(w),2*digitsEVENINDICES(w))mod 10))mod 10
</code></pre>
<p>comment:</p>
<pre><code>{⍵,10∣10-10∣+/w,2×w[v/⍨∼2∣v←⍳≢w←⍎¨⍕⍵]}
                   v/⍨∼2∣v←⍳≢w←⍎¨⍕⍵] call w the array of digits of ⍵, return even index
               2×w[                  consider all the digit even of w and multipy for 2
             w,                      put above that array, the array w
           +/                        sum all
      10-10∣                          10 - (above sum)mod 10
    10∣                               above mod 10
 {⍵,                                 add as digit to the number of argument, and return all that
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, <s>11</s> 10 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>╣Γ♠☼ù≤m╒X₧
</code></pre>

<p><a href="https://staxlang.xyz/#p=b9e2060f97f36dd5589e&amp;i=978030640615%0A653726372938%0A190295684742%0A934673587724%0A&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>

<p>This is a complete program instead of a function, as stax does not implement functions.</p>

<p>Unpacked, ungolfed, and commented, it looks like this.</p>

<pre><code>q   print input without popping and without newline
E   explode into array of decimal digits
97E [9,7] (this will become the repetition counts)
:B  repeat elements; repetition counts wrap around to cover all input digits
|+  get sum of array with repeated digts
A%  modulus 10
P   print
</code></pre>

<p><a href="https://staxlang.xyz/#c=q++%09print+input+without+popping+and+without+newline%0AE++%09explode+into+array+of+decimal+digits%0A97E%09[9,7]+%28this+will+become+the+repetition+counts%29%0A%3AB+%09repeat+elements%3B+repetition+counts+wrap+around+to+cover+all+input+digits%0A%7C%2B+%09get+sum+of+array+with+repeated+digts%0AA%25+%09modulus+10%0AP++%09print&amp;i=978030640615%0A653726372938%0A190295684742%0A934673587724%0A&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run this one</a></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">>&lt;></a>, 24 bytes</h1>

<pre><code>0{:9)68**-:nl2%2*7+*+a%!
</code></pre>

<p><a href="https://tio.run/##S8sszvj/36DaylLTzEJLS9cqL8dI1UjLXFtLO1FV8f///7rFluYWBsYGZiYGZoamAA" rel="nofollow noreferrer" title="&gt;&lt;&gt; – Try It Online">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>0                      !  # initiates sum (final digit) as 0
 {                        # get the next digit
  :9)68**-                # convert from char to int for any iteration except the last
          :n              # print the digit
            l2%2*7+*      # multiply the digit by either 9 or 7 alternately
                    +     # add to sum
                     a%   # mod sum by 10
</code></pre>
</div>
<div id="pu20" class="pu"><h1><a href="https://www.gnu.org/software/bc/manual/dc-1.05/html_mono/dc.html" rel="nofollow noreferrer">dc</a>, 25 bytes</h1>

<pre><code>dn[A~9z^8+*rd0&lt;M+]dsMxA%p
</code></pre>

<p><a href="https://tio.run/##S0n@b2luYWBsYGZiYGZo@j8lL9qxzrIqzkJbqyjFwMZXOzal2LfCUbXg/38A" rel="nofollow noreferrer" title="dc – Try It Online">Try it online!</a></p>

<p>I know there's already a dc answer here, but 25&lt;44 so I guess I feel 19 bytes of okay about it. 
This uses the fact that <code>8+9^z</code> is equivalent to either <code>-3</code> or <code>-1</code> mod 10 depending on whether z is even or odd. So I use <code>A~</code> to break the number into digits on the stack, but as I build the stack I multiply each digit by <code>8+9^z</code> where z is the current stack size. Then I add them all as the <em>function</em> stack unrolls, and print the last digit.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://kotlinlang.org" rel="nofollow noreferrer">Kotlin</a>, <s>120</s> <s>108</s> <s>83</s> <s>77</s> 69 bytes</h1>

<pre><code>{s-&gt;s+(10-(s.map{it.toInt()-48}.chunked(2).sumBy{it[0]+3*it[1]})%10)}
</code></pre>

<p><a href="https://tio.run/##JY7BCoJAFEX3fsVDCOYlyphmJmjQLmjXMlwMOtWgjuKMQYjfPo31NvfCuXBe0@tWSPNmLTwmWWVAbnoU8ongF/CvkJtZ@YXySEh9ooKODbPQge4vUhP043QJqtckG16THQZq6s4fy@@09KKtzbBccBNSXIwVQMeEJAizA/ZWq@ZKQw4jZ/VVSG7ZKQPX/fHB6nUryfoZWYeIzmKOh5RGNIlpEu6/" rel="nofollow noreferrer">Try it online!</a></p>

<p><br>
Thanks to @ovs for removing 8 bytes!!</p>
</div>
<div id="pu22" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 18 <a href="https://codegolf.meta.stackexchange.com/a/9429/43319" title="When can APL characters be counted as 1 byte each?">bytes</a><sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer" title=".dyalog files using a single byte character set">SBCS</a></sup></h1>



<p>Anonymous tacit prefix function taking string as argument. Using <a href="https://codegolf.stackexchange.com/a/174553/43319">Bubbler's approach</a>.</p>

<pre class="lang-apl prettyprint-override"><code>⊢,∘⍕10|⍎¨+.×9 7⍴⍨≢
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT////1HXIp1HHTMe9U41NKh51Nt3aIW23uHplgrmj3q3POpd8ahz0f@0R20TgDKP@qZ6@j/qaj603vhR20QgLzjIGUiGeHgG/09TULc0tzAwNjAzMTAzNFUHAA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p><code>≢</code> length of argument (12)</p>

<p><code>9 7⍴⍨</code> cyclically reshape <code>[9,7]</code> to that length</p>

<p><code>+.×</code> dot product of the following with that:</p>

<p><code>⍎¨</code> `evaluate each character</p>

<p><code>10|</code> mod-10 of that</p>

<p><code>,∘⍕</code> prepend the following the the stringification of that:</p>

<p><code>⊢</code> the unmodified argument</p>
</div>
<div id="pu23" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 21 bytes</h1>

<pre><code>,10":@|1#."."+*9 7$~#
</code></pre>

<p><a href="https://tio.run/##y/qvpKegnqZga6WuoKNQa6VgoADE/3UMDZSsHGoMlfWU9JS0tSwVzFXqlP9rcnGlJmfkK6QpqFuaWxgYG5iZGJgZmqr/BwA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>,10":@|1#."."+*9 7$~#
                    #  Take length of input
               9 7$~   Repeat 9 7 that many times
          "."+*        Multiply (elementwise) to the digits
       1#.             Sum
 10   |                Modulo 10
   ":@                 Format to string
,                      Append to the end of the input string
</code></pre>

<p>The negative of <code>a + 3b + c + 3d + ...</code> modulo 10 is equal to <code>9a + 7b + 9c + 7d + ...</code> modulo 10.</p>
</div>
<div id="pu24" class="pu"><h1><a href="https://archive.org/details/BASIC-80_MBASIC_Reference_Manual" rel="nofollow noreferrer">MBASIC</a>, 106 bytes</h1>

<pre><code>1 INPUT T$:FOR I=1 TO 12 STEP 2:O=O+VAL(MID$(T$,I,1)):E=E+3*VAL(MID$(T$,I+1,1)):NEXT:PRINT 10-(O+E) MOD 10
</code></pre>

<p>It ain't pretty, but it works.</p>

<pre><code>? 978030640615
7
</code></pre>
</div>
<div id="pu25" class="pu"><h2>J - <strike>55</strike> <strike>45</strike> 38</h2>

<pre><code>f=:3 :'y,":10|10-10|+/(12$1 3)*"."0 y'
</code></pre>

<p>eg</p>

<pre><code>f '978030640615'
9780306406157
</code></pre>

<p>old way:</p>

<pre><code>f=:,":@(10(10&amp;|@-)(10&amp;|@+/@((12$1 3)*(i.12)&amp;(".@{))))
</code></pre>
</div>
<div id="pu26" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>78</s> 76 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:n+`10-(sum(int(a)+3*int(b)for a,b in zip(n[::2],n[1::2]))%10or 10)`
</code></pre>

<p><a href="https://tio.run/##XY7RCoIwFIav3VPsJraTCzYtrcGexAQnKQk6xc2Levnlkoi6Ov8HH@f/p4e7jybxrbr6Xg/1TWMjTVwJfqB2GWhnHNUQp/sQamjHGWtW487gZzdRU0iZlMwUIlyAneCrIDhU3jXWWVWgiJJLfuYpz448EyfC8A/nBNjXSf@cjTkBVCIUusNXhufGLr0LI94tEkXTvO7DLQ0M7BOU2kz/Ag" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Takes a string as an argument.</p>

<h1>Explanation:</h1>

<p>Using python slice notation, converts a string into a list of character pairs. ("978030640615" -> [("9","7"), ("8", "0"), ("3", "0"), ("6", "4"), ("0", "6"), ("1", "5")] )</p>

<p>For that list of pairs, converts each item into an integer and returns a+3b.</p>

<p>Sums all the results.</p>

<p>Gets the sum modulo 10, OR 10 if the remainder is 0. (This prevents the final digit from being 10 instead of 0.)</p>

<p>Removes the remainder from 10 to get the check digit.</p>

<p>Converts the calculated check digit to a string via deprecated backtick expression.</p>

<p>Returns the original number plus the calculated check digit.</p>

<h1>Edit:</h1>

<p>Saved 2 byes by removing spaces (thanks <a href="https://codegolf.stackexchange.com/users/76162/jo-king">Jo King</a>!).</p>
</div>
<div id="pu27" class="pu"><h1>Powershell, <s>55</s> <s>53</s> 52 bytes</h1>

<p><em>Inspired by <a href="https://codegolf.stackexchange.com/a/791/80745">Joey's answer</a>. I'm impressed with her regex.</em></p>



<pre class="lang-powershell prettyprint-override"><code>"$args"+($args-replace'(.)(.)','+40-$1-3*$2'|iex)%10
</code></pre>

<h2>Powershell, 55 bytes, whithout regex</h2>

<pre class="lang-powershell prettyprint-override"><code>param($s)$s[1,3,5,7,9,11*2+0..11]|%{$r+=58-$_};$s+$r%10
</code></pre>

<p>Explanation:</p>

<ul>
<li>the index range = (the even positions <code>1,3,5,7,9,11</code> repeated 2 times + all positions  <code>0..11</code>)</li>
<li><code>$r+=58-$_</code> makes a sum of supplements up to <code>10+[char]'0'</code></li>
<li><code>$s+$r%10</code> outputs the result</li>
</ul>

<p>Test script:</p>

<pre class="lang-powershell prettyprint-override"><code>$f = {

param($s)$s[1,3,5,7,9,11*2+0..11]|%{$r+=58-$_};$s+$r%10

}

@(
    ,("978030640615" , "9780306406157")

) | % {
    $s,$expected = $_
    $result = &amp;$f $s
    "$($result-eq$expected)"
    $s
    $result
}
</code></pre>

<p>Output:</p>

<pre class="lang-powershell prettyprint-override"><code>True
978030640615
9780306406157
</code></pre>
</div>
<div id="pu28" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 16 bytes</h1>

<pre><code>S:(→sΣz¤*or;¢"97
</code></pre>

<p><a href="https://tio.run/##yygtzv7/P9hK41HbpOJzi6sOLdHKL7I@tEjJ0vz///9A0sLA2MDMxMDM0FQJAA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<p>Instead of subtracting the sum from 10 I use negated coefficients, the rest is pretty self-explanatory: </p>

<pre><code>S:(              )  -- apply the following function and append result to itself:
   →s               -- mod 10 / last digit
     Σ              -- sum
      z      ¢"97   -- zip input with ['9','7','9','7'...] under:
       ¤ (r;)       --   convert both chars to number, then
        *           --   multiply
</code></pre>
</div>
<div id="pu29" class="pu"><h1><a href="http://tcl.tk/" rel="nofollow noreferrer">Tcl</a>, 64 bytes</h1>

<pre><code>proc C s {list $s[expr ([regsub -all (.)(.) $s {-\1-3*\2}])%10]}
</code></pre>

<p><a href="https://tio.run/##DclLCoAgFAXQrdxBQQWG9m/cMtRBRUQgJD6FIFq7CWd2/G5itO7esYDwmos8MpLHYx0K6Y6Twga2GoOiLpOUeJkSrK1U8@kyF1x/0QZPkAvmceItHzo@iF7HHw" rel="nofollow noreferrer" title="Tcl – Try It Online">Try it online!</a></p>
</div>
<div id="pu30" class="pu"><h2>Windows PowerShell, 57</h2>
<pre><code>filter i{$_+(990-($_-replace'(.)(.)','+$1+3*$2'|iex))%10}
</code></pre>
</div>
<div id="pu31" class="pu"><p><strong>Clojure 264 -> 241 characters:</strong> </p>

<pre><code>(defn s [a b] (let [c (count a)] (if (= 0 c) b (s (rest a) (+ b (* (if (= 0 (m c 2)) 1 3) (first a)))))))
(defn m [a b] (let [f (mod a b)] (if (= f 10) 0 f)))
(defn c [a] (str a (m (- 10 (m (s (map #(read-string %) (map str a)) 0) 10)) 10)))
</code></pre>

<p>Usage</p>

<pre><code>(c "978030640615")
</code></pre>

<p>Non minified:</p>

<pre><code>(defn sum [collection total]
  (let [len (count collection)]
    (if (= 0 len)
         total
         (sum (rest collection)
           (+ total
            (* (if (= 0 (mod len 2)) 1 3)
             (first collection)))))))

(defn mods [a b]
  (let [f (mod a b)]
    (if (= f 10) 
      0
      f)))


(defn create [isbn] 
  (str isbn
       (mods (- 10 (mods (sum (map #(read-string %) (map str isbn)) 0) 10)) 10))) 
</code></pre>

<p>Usage:</p>

<pre><code>(create "978030640615")
</code></pre>

<p>New to Clojure so I have to believe that can be knocked down.</p>
</div>
<div id="pu32" class="pu"><h2>Python</h2>

<pre><code>&gt;&gt;&gt;r=input()
&gt;&gt;&gt;a=0
&gt;&gt;&gt;for x in r[::2]:
    a+=int(x)
&gt;&gt;&gt;for x in r[1::2]:
    a+=int(x)*3
&gt;&gt;&gt;a=(10-(a%10))%10
print(r+str(a))
</code></pre>
</div>
<div id="pu33" class="pu"><h2>C# – <s>89</s> 77 characters</h2>

<pre class="lang-cs prettyprint-override"><code>string I(string s){return s+(9992-s.Sum(x=&gt;x-0)-2*s.Where((x,i)=&gt;i%2&gt;0).Sum(x=&gt;x-0))%10;}
</code></pre>

<p>Formatted for readability:</p>

<pre class="lang-cs prettyprint-override"><code>string I(string s)
{
    return s +
            (9992
            - s.Sum(x =&gt; x - 0)
            - 2 * s.Where((x, i) =&gt; i%2 &gt; 0).Sum(x =&gt; x - 0)
            ) % 10;
}
</code></pre>

<p>We do not multiply by one or three, we just add everything, plus we add all even-placed characters one more time, multiplied by two.</p>

<p>9992 is large enough so that the sum of all ASCII characters is less than that (so that we may mod by 10 and be sure the result is positive, no need to mod by 10 twice), and is not divisible by zero because we add up all those extra 2*12*48 (twelve ASCII digits, weighed by 1 and 3) == 1152, which allows us to spare one extra character (instead of twice subtracting 48, we subtract 0 just to convert from char to int, but instead of 990, we need to write 9992).</p>

<p>But then again, even though much less beautiful ;-), this old-school solution gets us to 80 characters (but this is almost C-compatible):</p>

<pre class="lang-cs prettyprint-override"><code>string T(string i){int s=2,j=0;for(;j&lt;12;)s+=i[j]*(9-j++%2*2);return i+s%10;}
</code></pre>
</div>
<div id="pu34" class="pu"><p><strong>Java - 161 Characters</strong> :(</p>

<pre><code>int b[]=new int[a.length];
int d=0,n=0,j=1;
for(char c:a.toCharArray())b[d++]=Integer.valueOf(c+"");
for(int i:b)n+=(j++%2==0)?(i*3):(i*1);
return a+(10-(n%10));
</code></pre>
</div>
<div id="pu35" class="pu"><p><strong>Javascript: <del>73</del> 71 chars</strong></p>

<pre><code>function _(b){for(i=s=0;12&gt;i;)s+=((i*2&amp;2)+1)*b[i++];return b+(10-s%10)}
</code></pre>

<p>Usage:</p>

<pre><code>_('978030640615') //"9780306406157"
</code></pre>
</div>
<div id="pu36" class="pu"><h3>APL (25)</h3>

<pre><code>{⍵,⍕10-10|+/(⍎¨⍵)×12⍴1,3}
</code></pre>
</div>
<div id="pu37" class="pu"><h1>J, 25</h1>

<pre><code>,[:":10|0(-+/)"."0*1 3$~#
</code></pre>

<pre>
   f =: ,[:":10|0(-+/)"."0*1 3$~#
   f '978030640615'
9780306406157
</pre>
</div>
<div id="pu38" class="pu"><h1>Groovy <strike>75</strike>, 66 chars</h1>

<pre><code>i={int i;it+(10-it.inject(0){t,c-&gt;t+(i++&amp;1?:3)*(c as int)}%10)%10}
</code></pre>

<p>use:</p>

<pre><code>String z = "978030640615"
println i(z)

-&gt; 9780306406157
</code></pre>
</div>
<div id="pu39" class="pu"><h1>Q, 36 chars</h1>

<pre><code>{x,-3!10-mod[;10]sum(12#1 3)*"I"$'x}
</code></pre>
</div>
<div id="pu40" class="pu"><h2>R, 147 characters</h2>

<pre><code>f=function(v){s=as.numeric(strsplit(v,"")[[1]]);t=0;for(i in 1:12)if(i%%2==0)t=t+s[i]*3 else t=t+s[i];paste(v,(10-(t%%10))%%10,collapse="",sep="")}
</code></pre>

<p>Usage:</p>

<pre><code>f("978030640615")
[1] "9780306406157"
</code></pre>
</div>
<div id="pu41" class="pu"><h2>Ruby - <s>73</s> 65 chars</h2>

<pre><code>f=-&gt;s{s+((2-(s+s.gsub(/.(.)/,'\1')*2).bytes.inject(:+))%10).to_s}
</code></pre>
</div>
<div id="pu42" class="pu"><h1>MATLAB - 82 chars</h1>

<pre><code>function c(i)
[i num2str(mod(10-mod(sum(str2num(i(:)).*repmat([1;3],6,1)),10),10))]
</code></pre>
</div>
<div id="pu43" class="pu"><h1>C, <strike>80</strike> 79 characters</h1>

<p>The function modifies the string in place, but returns the original string pointer to satisfy the problem requirements.</p>

<pre><code>s;char*f(char*p){for(s=2;*p;s+=7**p++)s+=9**p++;*p++=48+s%10;*p=0;return p-13;}
</code></pre>

<p>Some explanation: Instead of subtracting 48 (the ASCII value of the digit <code>0</code>) from each input character, the accumulator <code>s</code> is initialized so that it is modulo 10 equal to 48+3*48+48+3*48...+48+3*48 = 24*48 = 1152.  The step <code>10-sum</code> can be avoided by accumulating <code>s</code> by subtraction instead of addition.  However, the module operator <code>%</code> in C would not give a usable result if <code>s</code> was negative, so instead of using <code>s-=</code> the multipliers 3 and 1 are replaced by -3=7 modulo 10 and -1=9 modulo 10, respectively.</p>

<p>Test harness:</p>

<pre><code>#include &lt;stdio.h&gt;
#define N 12
int main()
{
     char b[N+2];
     fgets(b, N+1, stdin);
     puts(f(b));
     return 0;
}
</code></pre>
</div>
<div id="pu44" class="pu"><h2>Scala 84</h2>
<pre><code>def b(i:String)=i+(10-((i.sliding(2,2).map(_.toInt).map(k=&gt;k/10+k%10*3).sum)%10)%10)
</code></pre>
<p>Testing:</p>
<pre><code>val isbn=&quot;978030640615&quot;
b(isbn)
</code></pre>
<p>Result:</p>
<pre><code>&quot;9780306406157&quot;
</code></pre>
</div>
<div id="pu45" class="pu"><h2>APL (27 characters)</h2>
<pre><code>F←{⍵,⍕10|10-(12⍴1 3)+.×⍎¨⍵}
</code></pre>
<p>I'm using Dyalog APL as my interpreter. Here's a quick explanation, mostly from right to left (within the function definition, <code>F←{ ... }</code>):</p>
<ul>
<li><code>⍎¨⍵</code>: Execute/evaluate (<code>⍎</code>) each (<code>¨</code>) character given in the right argument (<code>⍵</code>).</li>
<li><code>(12⍴1 3)</code>: Reshape (<code>⍴</code>) the vector <code>1 3</code> into a <code>12</code>-element vector (repeating to fill the gaps).</li>
<li><code>+.×</code>: Take the dot product (<code>+.×</code>) of its left argument (<code>(12⍴1 3)</code>) and its right argument (<code>⍎¨⍵</code>).</li>
<li><code>10-</code>: Subtract from 10.</li>
<li><code>10|</code>: Find the remainder after division by <code>10</code>.</li>
<li><code>⍕</code>: Format the number (i.e., give a character representation).</li>
<li><code>⍵,</code>: Append (<code>,</code>) our calculated digit to the right argument.</li>
</ul>
</div>
<div id="pu46" class="pu"><h1>Q (44 chars)</h1>

<pre><code>f:{x,string 10-mod[;10]0+/sum@'2 cut"I"$/:x}
</code></pre>
</div>
<div id="pu47" class="pu"><h2>dc, 44 chars</h2>

<pre><code>[d0r[I~3*rI~rsn++lndZ0&lt;x]dsxx+I%Ir-I%rI*+]sI
</code></pre>

<p>Invoke as <code>lIx</code>, e.g:</p>

<pre><code>dc -e'[d0r[I~3*rI~rsn++lndZ0&lt;x]dsxx+I%Ir-I%rI*+]sI' -e '978030640615lIxp'
</code></pre>
</div>
<div id="pu48" class="pu"><p><strong>Python - <s>91</s>, 89</strong></p>

<pre><code>0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
|         |         |         |         |         |         |         |         |         |
 def c(i):return i+`(10-(sum(int(x)*3for x in i[1::2])+sum(int(x)for x in i[::2]))%10)%10`
</code></pre>
</div>
<div id="pu49" class="pu"><h2>Haskell, <s>78</s> <s>71</s> 66 characters</h2>

<pre><code>i s=s++(show$mod(2-sum(zipWith(*)(cycle[1,3])(map fromEnum s)))10)
</code></pre>
</div>
<div id="pu50" class="pu"><h2>PHP - <s>86</s> <s>85</s> 82 chars</h2>

<pre><code>function c($i){for($a=$s=0;$a&lt;12;)$s+=$i[$a]*($a++%2?3:1);return$i.(10-$s%10)%10;}
</code></pre>

<p>Re-format and explanation:</p>

<pre><code>function c($i){                     // function c, $i is the input

    for($a=$s=0;$a&lt;12;)             // for loop x12 - both $a and $s equal 0
                                    // notice there is no incrementation and
                                    // no curly braces as there is just one
                                    // command to loop through

        $s+=$i[$a]*($a++%2?3:1);    // $s (sum) is being incremented by
                                    // $ath character of $i (auto-casted to
                                    // int) multiplied by 3 or 1, depending
                                    // wheter $a is even or not (%2 results
                                    // either 1 or 0, but 0 == FALSE)
                                    // $a is incremented here, using the
                                    // post-incrementation - which means that
                                    // it is incremented, but AFTER the value
                                    // is returned

    return$i.(10-$s%10)%10;         // returns $i with the check digit
                                    // attached - first it is %'d by 10,
                                    // then the result is subtracted from
                                    // 10 and finally %'d by 10 again (which
                                    // effectively just replaces 10 with 0)
                                    // % has higher priority than -, so there
                                    // are no parentheses around $s%10
}
</code></pre>
</div>
<div id="pu51" class="pu"><h2>Golfscript - 25 chars</h2>

<pre><code>{...+(;2%+{+}*3-~10%`+}:f
</code></pre>

<p>Whole program version is only 19 chars</p>

<pre><code>...+(;2%+{+}*3-~10%
</code></pre>

<p>Check back here for analysis later. Meanwhile check out my old uninspired answer</p>

<p><strong>Golfscript - 32 chars</strong></p>

<p>Similar to the luhn number calculation</p>

<pre><code>{.{2+}%.(;2%{.+}%+{+}*~)10%`+}:f
</code></pre>

<p>Analysis for 978030640615</p>

<pre><code>{...}:f this is how you define the function in golfscript
.       store an extra copy of the input string
        '978030640615' '978030640615'
{2+}%   add 2 to each ascii digit, so '0'=&gt;50, I can get away with this instead
        of {15&amp;}% because we are doing mod 10 math on it later
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55]
.       duplicate that list
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55] [59 57 58 50 53 50 56 54 50 56 51 55]
(;      trim the first element off
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55] [57 58 50 53 50 56 54 50 56 51 55]
2%      select every second element
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55] [57 50 50 54 56 55]
{.+}%   double each element by adding to itself
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55] [114 100 100 108 112 110]
+       join the two lists together
        '978030640615' [59 57 58 50 53 50 56 54 50 56 51 55 114 100 100 108 112 110]
{+}*    add up the items in the list
        '978030640615' 1293
~       bitwise not
        '978030640615' -1294
)       add one
        '978030640615' -1293            
10%     mod 10
        '978030640615' 7
`       convert to str
        '978030640615' '7'
+       join the strings
        '9780306406157'
</code></pre>
</div>
<div id="pu52" class="pu"><h2>Haskell - 54 characters</h2>

<pre><code>i s=s++show(sum[-read[c]*m|c&lt;-s|m&lt;-cycle[1,3]]`mod`10)
</code></pre>

<p>This requires support for <a href="http://cvs.haskell.org/Hugs/pages/users_guide/hugs-ghc.html#ZIP-COMPREHENSION">parallel list comprehensions</a>, which is supported by GHC (with the <code>-XParallelListComp</code> flag) and Hugs (with the <code>-98</code> flag).</p>
</div>
<div id="pu53" class="pu"><p><strong>D - 97 characters</strong></p>

<pre><code>auto f(string s){int n;foreach(i,c;s)n+=((i&amp;1)*2+1)*(c-48);return s~cast(char)((10-n%10)%10+48);}
</code></pre>

<p>Formatted more legibly:</p>

<pre><code>auto f(string s)
{
    int n;

    foreach(i, c; s)
        n += ((i &amp; 1) * 2 + 1) * (c - 48);

    return s ~ cast(char)((10 - n % 10) % 10 + 48);
}
</code></pre>

<p>The verbosity of D's cast operator definitely makes it harder to write obsessively short code though.</p>
</div>
<div id="pu54" class="pu"><p><strong>C# (94 characters)</strong></p>

<pre><code>string I(string i){int s=0,j=0;for(;j&lt;12;)s+=(i[j]-48)*(j++%2&lt;1?1:3);return i+((10-s%10)%10);}
</code></pre>

<p>With linebreaks/whitespace for readability:</p>

<pre><code>string I(string i) 
{ 
    int s = 0, j = 0;
    for (; j &lt; 12; )
        s += (i[j] - 48) * (j++ % 2 &lt; 1 ? 1 : 3); 
    return i + ((10 - s % 10) % 10); 
}
</code></pre>

<p>Tested on several ISBNs from books on my shelf, so I know it's working!</p>
</div>
<div id="pu55" class="pu"><h2>Ruby - 80 characters</h2>

<pre><code>def f s;s+(10-s.bytes.zip([1,3]*6).map{|j,k|(j-48)*k}.inject(:+)%10).to_s[0];end
</code></pre>
</div>
<div id="pu56" class="pu"><h2>Python - 44 chars</h2>

<pre><code>f=lambda s:s+`-sum(map(int,s+s[1::2]*2))%10`
</code></pre>

<p>Python - 53 chars</p>

<pre><code>def f(s):d=map(int,s);return s+`-sum(d+d[1::2]*2)%10`
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/342/">342</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




