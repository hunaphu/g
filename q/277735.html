<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277735</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>027</td><td>Jelly</td><td>250118T220615Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277747#277747">Jonathan</a></td></tr>
<tr d-ix="1"><td>085</td><td>JavaScript ES6</td><td>250118T153211Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277740#277740">Arnauld</a></td></tr>
<tr d-ix="2"><td>050</td><td>Charcoal</td><td>250118T201738Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277745#277745">Neil</a></td></tr>
<tr d-ix="3"><td>068</td><td>Wolfram Language Mathematica</td><td>250118T193239Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277744#277744">Greg Mar</a></td></tr>
<tr d-ix="4"><td>072</td><td>Maple</td><td>250118T154018Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277741#277741">dharr</a></td></tr>
<tr d-ix="5"><td>116</td><td>Python</td><td>250118T141905Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277739#277739">Albert.L</a></td></tr>
<tr d-ix="6"><td>053</td><td>Perl 5 p</td><td>250118T064510Z</td><td><a href="https://codegolf.stackexchange.com/questions/277735/counting-rota-baxter-words/277736#277736">Xcali</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 28 </s> 27 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ḥc¥oc@P:⁸Ṫ
ŒHṪṚĖ’ç€)ṫ-§ṚḄȯ1
</code></pre>
<p>A monadic Link that accepts a positive integer, <span class="math-container">\$n\$</span>, and yields a positive integer, the number of Rota-Baxter words with <span class="math-container">\$n\$</span> <code>a</code>s.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hjiXJh5bmJzsEWD1q3PFw5yquo5M8gNTDnbOOTHvUMPPw8kdNazQf7lyte2g5UOzhjpYT6w3/H24Hiv7/b2QAAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<p>The number of Rota-Baxter words with <span class="math-container">\$n\$</span> <code>a</code>s with an <code>a</code> at only the left (or, equivalently, right) end is:</p>
<p><span class="math-container">$$S(n) = \sum_{i=1}^{\lfloor \frac{n}{2} \rfloor}{\frac{\binom{n}{i-1}\binom{2(n-i)}{n}}{n-i}}$$</span></p>
<p><span class="math-container">\$S(n-1)\$</span> also gives the number of Rota-Baxter words with <span class="math-container">\$n\$</span> <code>a</code>s with an <code>a</code> at <em>both</em> ends, except when <span class="math-container">\$n=1\$</span> we have <span class="math-container">\$S(0)=0\$</span> rather than the required result of <span class="math-container">\$1\$</span>.</p>
<p>The number of Rota-Baxter words with <span class="math-container">\$n&gt;1\$</span> <code>a</code>s is then <span class="math-container">\$2S(n)+S(n-1)\$</span>.</p>
<pre><code>Ḥc¥oc@P:⁸Ṫ - Helper Link: pairs of integers, L=[i-1,n-i]; integer N (N=n)
  ¥        - last two links as a dyad - f(L, N):
Ḥ          -   double {L} -&gt; [2(i-1),2(n-i)]
 c         -   {that} choose {N} -&gt; X = [C(2(i-1),N),C(2(n-i),N)]
                     (N.B. since 2(i-1)&lt;N this is [0,C(2(n-i),N)])
     @     - with swapped arguments:
    c      -   {N} choose {L}    -&gt; Y = [C(N,i-1),C(N,n-i)]
   o       - {X} logical OR {Y} (vectorises)
                                 -&gt; [C(N,i-1),C(2(n-i),N)]
      P    - product             -&gt;  C(N,i-1)×C(2(n-i),N)
       :⁸  - integer divide by L -&gt; [C(N,i-1)×C(2(n-i),N)÷(i-1),C(N,i-1)×C(2(n-i),N)÷(n-i)]
         Ṫ - tail                -&gt;  C(N,i-1)×C(2(n-i),N)÷(n-i)
                                 ( = C(n,i-1)×C(2(n-i),n)÷(n-i) )

ŒHṪṚĖ’ç€)ṫ-§ṚḄȯ1 - Main Lin: positive integer, N
        )        - for each {J in [1..N]}:
ŒH               -   split {[1..J]} into two (first half longer if J odd)
  Ṫ              -   tail {that} -&gt; [1+floor((J+1)÷2),...,J-1,J]
   Ṛ             -   reverse     -&gt; [J,J-1,...,1+floor((J+1)÷2]
    Ė            -   enumerate -&gt; [[1,J],[2,J-1],...,[floor(J÷2),1+floor((J+1)÷2)]
     ’           -   decrement -&gt; [[0,J-1],[1,J-2],...,floor(J÷2)-1,floor((J+1)÷2)]
       €         -   for each {[i,v] in that}:
      ç          -     call the Helper Link as a dyad - f([i,v], J)
         ṫ-      - tail from index -1 -&gt; [Values(N-1),Values(N)]
                                         (or when N=1 [Values(1)] = [[0]])
           §     - sums    -&gt; [CountDoubleEnded, CountSingleEnded]
            Ṛ    - reverse -&gt; [CountSingleEnded, CountDoubleEnded]
             Ḅ   - convert from binary -&gt; 2 × CountSingleEnded + CountDoubleEnded
              ȯ1 - logical OR with 1 (replaces the 0 calculated for N=1 with 1)
</code></pre>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), 85 bytes</h1>
<p>This is a port of <a href="https://codegolf.stackexchange.com/a/277739/58563">Albert.Lang's Python answer</a>, with even more recursion.</p>

<pre class="lang-none prettyprint-override"><code>f=n=&gt;n&gt;1?2*h(n-1)+h(n-2):n
g=(n,k=n)=&gt;--k&gt;1?h(k-1)*g(n-k)+g(n,k):v=f(n)
h=n=&gt;2*g(n)-v
</code></pre>
<p><a href="https://tio.run/##FYwxDoMwEAR7v8IFxR2OI@EScuQrIAImMTojQDSItzvnalba0fz6s9@H7bseluNnTGkippbb6u3KGdhWaDIc1qw8AT8CMVJrbRBlhiBC6UUIaHx@sT5pAkY1547LH9ozTXGDZTw0a9JVI3gJnQxjUF9K6yHyHpfxuUQPXQ/FxTeKW1w5dnfYqDv9AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 50 bytes</h1>
<pre><code>⊞υ⁰≔⟦⁰⟧θＦＮ«≔∨¬ιζη≔↨υ⁰ζ≔Σ×θ⮌υε⊞θ⁺⁺εη⊗ζ⊞υ⁺↨θ⁰ε»Ｉ⁺η⊗ζ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iOSOxKDk_MWfBgqWlJWm6Fje_BZQWZ2iU6igYaFpzORYXZ6bnaUQbxOooFAL5aflFChqeeQWlJX6luUmpRRqamgrVXJxQZf5FGn75JRqZmjoKVUCcAdQAk3JKLE6FGAqSQ4gHl-ZqhGTmphZrFOooBKWWpRaB1GlqApWlgpSBHQOUCsgpLdYAE6kgg3UUXPJLk3JSUzSqgGph6kqh6sCWFUIsSwVJ13IFFGXmlWg4JxaXQEzJQDVB03pJcVJyMTQMlkcr6ZblKMUuMjKBCAAA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: Port of @Albert.Lang's ungolfed code, converted to dynamic programming for the functions <code>e</code> and <code>j</code> (<code>b</code>, <code>o</code> and <code>n</code> are only needed transiently.)</p>
<pre><code>⊞υ⁰≔⟦⁰⟧θ
</code></pre>
<p>Start with <code>e[0]=0</code> and <code>j[0]=0</code>.</p>
<pre><code>ＦＮ«
</code></pre>
<p>Loop <code>n</code> times.</p>
<pre><code>≔∨¬ιζη
</code></pre>
<p><code>b(m)=1</code> if <code>m=1</code>, otherwise it equals <code>o(m-1)</code>, whose value would be still be in the variable <code>z</code> by this point on the second loop.</p>
<pre><code>≔↨υ⁰ζ
</code></pre>
<p><code>o(m)=j[m-1]</code>. (<code>AtIndex(u, i)</code> would also work here, but it wouldn't work below.)</p>
<pre><code>≔Σ×θ⮌υε
</code></pre>
<p><code>n(m)</code> is the dot product of <code>e[:m]</code> and <code>j[:m][::-1]</code>.</p>
<pre><code>⊞θ⁺⁺εη⊗ζ
</code></pre>
<p><code>e[m]=n(m)+b(m)+2*o(m)</code>.</p>
<pre><code>⊞υ⁺↨θ⁰ε
</code></pre>
<p><code>j[m]=e[m]+n(m)</code>.</p>
<pre><code>»Ｉ⁺η⊗ζ
</code></pre>
<p>Calculate the final number of Rota-Baxter words.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 68 bytes</h1>
<pre><code>SeriesCoefficient[(2-t-2t^2-(t+2)(1-4t-4t^2)^.5)/2/(t+1)^2,{t,0,#}]&amp;
</code></pre>
<p><a href="https://tio.run/##DctBCoAgEEDRwwShpFlDLVtEFwhahoLESLOowGYT0dlN@KsH//C84@GZNp/CkBaMhPd0YQi0EZ68CtCsgR1owRVI0eqOcw6kq3tpwGRupQP1smpU8dkyzZHyOMbonzUoaKxNPw" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a> Uses the generating function given in OEIS, like <a href="https://codegolf.stackexchange.com/a/277741/56178">dharr's answer</a>, but <code>SeriesCoefficient</code> does the coefficient extraction for us.</p>
<p>The outputs are given as real numbers, which appear in scientific notation (thus obscuring all the integer digits) for large inputs; this can be rectified, at the cost of 1 byte, by replacing <code>(1-4t-4t^2)^.5</code> with <code>Sqrt[1-4t-4t^2]</code>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 72 bytes</h1>
<pre><code>n-&gt;eval(diff((2-t-2*t^2-(t+2)*sqrt(1-4*t-4*t^2))/2/(t+1)^2,t$n)/n!,t=0);
</code></pre>
<p>The expression in t is the generating function given in OEIS. Differentiating n times, dividing by n!, and evaluating at t = 0 gives the appropriate coefficient in the series.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 116 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda m:m&gt;1and 2*j(m-1)+j(m-2)or m
n=lambda m:f(m)+sum(j(k)*n(m-1-k)for k in range(1,m-1))
j=lambda m:2*n(m)-f(m)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XZBNDoJADIX3nKLLKTiJkJgYEz2CVzAjMPLXDhmGhTvv4YaN3snbyBgIhlWbl_f6vvT5bu-uMDwMr95puf84fWwUXTMFdKBTrDiDJKwEyRgjPxI0FijgxaUFYdT1JCpRY8jeKmvUo62GksEqvuUi3vgLGFRLLvFelD4-dT-0NQS659QZ03RQUmusg8b2l1SlRR6MbPMuzoZzFBo9ykrkX89KrDDwTPTPtNviAVpbshMeY-KYf_EF" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>How?</h3>
<p>Here is an ungolfed version with an easier to understand recursion:</p>
<h4><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 704 bytes</h4>
<pre class="lang-python prettyprint-override"><code>lambda m:2*o(m)+b(m)

# helper counts; all count balanced strings containing m a's subject to condition:
# e: enclosable: anything that may be inside a pair of parens within a valid RB
# b: bothsided:valid rb that starts and ends with an a (the same if m=1)
# n: nonesided: any enclosable string that has no a at either end; these are exactly the ones enclosed in a pair of non matching parens
# o: onesided: valid RB that has an a at exactly one end
# j: juxtaposable: anything balanced that may occur next to an a in a valid RB

e=lambda m:m&gt;0 and n(m)+b(m)+2*o(m)
b=lambda m:m&gt;0 and m&lt;2 or j(m-2)
n=lambda m:m&gt;2 and sum(e(k)*(j(m-1-k)) for k in range(m))
o=lambda m:m&gt;1 and j(m-1)
j=lambda m:e(m)+n(m)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZVJLjtQwEJVY5hQlzYJ4mpbolpBGGXoWHIAFayTkOJWJ0_5EdgW6uQqblhDcgR3XgNNQtvvHzCZ2ylWv3ntV335Oexq8O3zvNx9_zNQv7_6--G2kbTsJtlnf-tqKRcufqrqBAc2EAZSfHcV7kMaUO7TSSKewg0hBu8fIYUdSO76DBfkyQpzbERUB-fTWadLeNQyJDaBTxkfZGr5Lx3RSFQ2SwMo9tAjaRd0hSJikDuB7PgO6CF90yuX4Z2l0Bx_eMV7bQOtpSAVdU-KhLWiRZKDILTpu2ZVy_uP6mgaEKC236sFuVoKBXAPOOyxAidcVz6PMAjvIyJmMwndkSDaI4e_5ESOTDgi4k4rMPkUgQR6R2K7M_qSK27FiUll_kcg8fAMXGiehl86Zf-p87MG5qT0Xjg2M847k9Mzb87TOJnul5gAOd3lAGfN_YyvcnJfCPrzOJrrTaizKmlTt8xz7dg0-wFjb5VpU7jphnRPibGust-K2Tjmr5VYI6LlimwgE6R6RkUXlrytXuTLni2q8vKTURWJVFvnPrz54C_3sFHlvImg7-UBgwvxJSTUgm2TRev0V07Q0m6kUGgySsGyHnwnUwCTKsHl6MylvMblxAqnfs-WixqzuSdBlek-Co6iSQHsRuHr1ZiUamHinqO6T3iLgcCjnPw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-p</code>, 53 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$b=/^a|a$/*!/aa|\)\(/;1while s/\(a+\)//g;$_=$b*/^a*$/
</code></pre>
<p><a href="https://tio.run/##RU5LCoMwEN17ihayyFjs6MKVeITeQFqeIK0gVWqhG8/eNJlM7CZ5vHm/ZXhNtXOmb/mKDYbzIwNbR53lpvo8xmk4rNxZnDpivjfm1po@99rcsHPILAgZ/JvZACkwHggpRDgGQkT@qjKBURkhqc2qT5MCGcPUJ7nRpxUpXX2xUHzaHcZhX0fYN8tupOFIy63QegTF/@9NwwnfeXmP83N1xaU@l1XpimX6AQ" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277735/">277735</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




