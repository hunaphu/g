<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::246722</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>035</td><td>Uiua</td><td>250830T160611Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/283401#283401">phidas</a></td></tr>
<tr d-ix="1"><td>325</td><td>Bespoke</td><td>250829T083245Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/283382#283382">Josiah W</a></td></tr>
<tr d-ix="2"><td>032</td><td>APLNARS</td><td>250819T232054Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/283226#283226">Rosario</a></td></tr>
<tr d-ix="3"><td>062</td><td>tinylisp 2</td><td>220501T021014Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246743#246743">DLosc</a></td></tr>
<tr d-ix="4"><td>025</td><td>Pip</td><td>220430T205415Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246725#246725">DLosc</a></td></tr>
<tr d-ix="5"><td>061</td><td>Wolfram LanguageMathematica</td><td>230416T011724Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/260133#260133">138 Aspe</a></td></tr>
<tr d-ix="6"><td>061</td><td>Rust</td><td>220502T150135Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246801#246801">JSorngar</a></td></tr>
<tr d-ix="7"><td>034</td><td>APLDyalog Unicode</td><td>220611T133219Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/248474#248474">Kamila S</a></td></tr>
<tr d-ix="8"><td>4238</td><td>Redirection</td><td>220528T105745Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/247946#247946">m90</a></td></tr>
<tr d-ix="9"><td>054</td><td>C</td><td>220501T032258Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246746#246746">littleb2</a></td></tr>
<tr d-ix="10"><td>152</td><td>Batch</td><td>220506T235955Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246976#246976">Youserna</a></td></tr>
<tr d-ix="11"><td>080</td><td>Desmos</td><td>220503T201813Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246865#246865">naffetS</a></td></tr>
<tr d-ix="12"><td>041</td><td>Burlesque</td><td>220503T193852Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246863#246863">DeathInc</a></td></tr>
<tr d-ix="13"><td>049</td><td>Haskell</td><td>220430T222804Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246732#246732">DLosc</a></td></tr>
<tr d-ix="14"><td>050</td><td>Python 3.8 prerelease</td><td>220502T191046Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246808#246808">loopy wa</a></td></tr>
<tr d-ix="15"><td>031</td><td>BQN</td><td>220430T221446Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246729#246729">DLosc</a></td></tr>
<tr d-ix="16"><td>058</td><td>R</td><td>220502T130353Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246798#246798">Dominic </a></td></tr>
<tr d-ix="17"><td>017</td><td>05AB1E</td><td>220502T084833Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246788#246788">Kevin Cr</a></td></tr>
<tr d-ix="18"><td>016</td><td>MathGolf</td><td>220502T081840Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246785#246785">Kevin Cr</a></td></tr>
<tr d-ix="19"><td>020</td><td>x86 32bit machine code</td><td>220501T152524Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246760#246760">m90</a></td></tr>
<tr d-ix="20"><td>041</td><td>JavaScript ES6</td><td>220430T210604Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246726#246726">Arnauld</a></td></tr>
<tr d-ix="21"><td>031</td><td>K ngn/k</td><td>220501T093006Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246752#246752">chrispsn</a></td></tr>
<tr d-ix="22"><td>046</td><td>K ngn/k</td><td>220501T034908Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246748#246748">doug</a></td></tr>
<tr d-ix="23"><td>059</td><td>Factor + math.extras projecteuler.014</td><td>220501T050457Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246750#246750">chunes</a></td></tr>
<tr d-ix="24"><td>1172</td><td>FRACTRAN</td><td>220501T032012Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246745#246745">benrg</a></td></tr>
<tr d-ix="25"><td>047</td><td>PARI/GP</td><td>220501T023851Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246744#246744">alephalp</a></td></tr>
<tr d-ix="26"><td>017</td><td>Husk</td><td>220501T012056Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246739#246739">Unrelate</a></td></tr>
<tr d-ix="27"><td>107</td><td>Haskell</td><td>220430T212615Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246727#246727">Qaziquza</a></td></tr>
<tr d-ix="28"><td>049</td><td>Python 2</td><td>220430T230202Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246734#246734">dingledo</a></td></tr>
<tr d-ix="29"><td>055</td><td>Python 3.8 prerelease</td><td>220430T204540Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246723#246723">EmilyR</a></td></tr>
<tr d-ix="30"><td>014</td><td>Jelly</td><td>220430T231039Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246735#246735">caird co</a></td></tr>
<tr d-ix="31"><td>049</td><td>C gcc</td><td>220430T231627Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246737#246737">Noodle9</a></td></tr>
<tr d-ix="32"><td>068</td><td>Retina 0.8.2</td><td>220430T222441Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246731#246731">Neil</a></td></tr>
<tr d-ix="33"><td>030</td><td>Charcoal</td><td>220430T221757Z</td><td><a href="https://codegolf.stackexchange.com/questions/246722/collatz-encoding/246730#246730">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 35 bytes</h1>
<pre><code>‚ãÖ¬∞‚ãØ‚ç¢(‚®¨(‚äô(‚äÇ0)√∑2)(‚äô(‚äÇ1)+1√ó3)‚óø2.|&gt;1):1
</code></pre>
<p><a href="https://uiua.org/pad?src=0_17_0-dev_2__Q29sbGF0ekVuY29kZSDihpAg4ouFwrDii6_ijaIo4qisKOKKmSjiioIwKcO3Miko4oqZKOKKgjEpKzHDlzMp4pe_Mi58PjEpOjEKIyBDb2xsYXR6IGVuY29kZSBjYW4ndCB0YWtlIGFycmF5cyBiZWNhdXNlIGRvJ3MgY29uZGl0aW9uIGNhbnQKQ29sbGF0ekVuY29kZSAxCkNvbGxhdHpFbmNvZGUgMgpDb2xsYXR6RW5jb2RlIDMKQ29sbGF0ekVuY29kZSA0CkNvbGxhdHpFbmNvZGUgNQpDb2xsYXR6RW5jb2RlIDYKQ29sbGF0ekVuY29kZSA3CkNvbGxhdHpFbmNvZGUgOApDb2xsYXR6RW5jb2RlIDkKQ29sbGF0ekVuY29kZSAxMApDb2xsYXR6RW5jb2RlIDExCkNvbGxhdHpFbmNvZGUgMTIKQ29sbGF0ekVuY29kZSAxMwpDb2xsYXR6RW5jb2RlIDE0CkNvbGxhdHpFbmNvZGUgMTUK" rel="nofollow noreferrer">pad</a></p>
<p>Explanation:</p>
<pre><code>:1#one is starting bit, swap stack for proper order
‚ç¢(#do
  ‚óø2.#duplicate and calculate is even
  ‚®¨(
    ‚äô(‚äÇ0)√∑2#divide by 2 and append 0 if even
  )(
    ‚äô(‚äÇ1)+1√ó3#multiply by 3 and add one and append one
)
|&gt;1)#while less than one
‚ãÖ¬∞‚ãØ#remove the first stack value, convert the second from bits-&gt;decimal
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/WinslowJosiah/bespokelang" rel="nofollow noreferrer">Bespoke</a>, 325 bytes</h1>
<pre><code>from a value N in this sequence,assuming Collatz would be true
each of possible values do have some form of&quot;codes&quot;in some encoding form
starting this with one,we doubled each moment;when odd,we added singular one
creating bijection here of integers;conjecture requires this if true
although unproven whether one is a forced N
</code></pre>
<p>Calculates <span class="math-container">\$D = n \% 2\$</span>, then changes the &quot;encoded&quot; result <span class="math-container">\$r\$</span> to <span class="math-container">\$2r + D\$</span> and the inputted number <span class="math-container">\$n\$</span> to <span class="math-container">\$\frac{6^D \times n}{2}\$</span> each iteration while <span class="math-container">\$n - 1\$</span> is nonzero.</p>
</div>
<div id="pu2" class="pu"><h1>APL(NARS), 32 chars</h1>
<pre><code>2‚ä•1,{‚çµ‚â§1:‚ç¨‚ãÑ2‚à£‚çµ:1,‚àá1+3√ó‚çµ‚ãÑ0,‚àá‚çµ√∑2}‚éï
</code></pre>
<p>Input one number &gt;0, output the number value of the question.
test:</p>
<pre><code>  2‚ä•1,{‚çµ‚â§1:‚ç¨‚ãÑ2‚à£‚çµ:1,‚àá1+3√ó‚çµ‚ãÑ0,‚àá‚çµ√∑2}‚éï
‚éï:
  1
1
  2‚ä•1,{‚çµ‚â§1:‚ç¨‚ãÑ2‚à£‚çµ:1,‚àá1+3√ó‚çµ‚ãÑ0,‚àá‚çµ√∑2}‚éï
‚éï:
  14
174352
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/dloscutoff/tinylisp2" rel="nofollow noreferrer">tinylisp 2</a>, 62 bytes</h1>
<pre><code>(d E(\(N(A 1))(?(= N 1)A(E(?(o N)(+(* 3 N)1)(/ N 2))(+(o N)A A
</code></pre>
<p><a href="https://do-stuff-online.github.io/do-stuff-online/#@WyJ0aW55bGlzcDIiLCIiLCIoZCBFKFxcKE4oQSAxKSkoPyg9IE4gMSlBKEUoPyhvIE4pKCsoKiAzIE4pMSkoLyBOIDIpKSgrKG8gTilBIEEiLCIobWFwIEUgKDF0byAxNSkpIiwiIiwiIl0=" rel="nofollow noreferrer">Try It Online!</a></p>
<h3>Ungolfed/explanation</h3>
<p>Another port of my BQN answer.</p>
<pre class="lang-lisp prettyprint-override"><code>(def encode           ; Define encode
 (lambda              ; as a lambda function
  (num (accum 1))     ; that takes a number and an accumulator that defaults to 1:
  (if (= num 1)       ;  If num is 1,
   accum              ;   return accum
   (encode            ;  Else, do a recursive call with these arguments:
    (if (odd? num)    ;   First argument: if num is odd,
     (+ (* 3 num) 1)  ;    3 * num + 1
     (/ num 2))       ;    else num / 2
    (+ (odd? num)     ;   Second argument: add 1 if num is odd, 0 otherwise
     accum            ;    to accum
     accum)))))       ;    and accum again--thus, 2 * accum + (num mod 2)
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, <s>27</s> <s>26</s> 25 bytes</h1>
<pre><code>Wa&gt;1Io+:o+Y%aa:6Ey*a/2+yo
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgwYKlpSVpuhY7wxPtDD3zta3ytSNVExOtzFwrtRL1jbQr8yHyUGWLo81joUwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<pre><code>Wa&gt;1Io+:o+Y%aa:6Ey*a/2+yo
                           a is first cmdline input; o is 1 (implicit)
W                          While
 a&gt;1                       a is greater than 1:
           %a               Parity of a (0 if even, 1 if odd)
          Y                 Yank into y variable
        o+                  Add current value of o
     o+:                    Add that total to o in-place
                            New value of o is 2*o+%a
    I                       If new value of o is truthy (which is always the case):
               6Ey           6 to the power of y (1 if a is even, 6 if odd)
                  *a         Times a
                    /2       Divided by 2 (a/2 if even, 3*a if odd)
                      +y     Plus y (a/2 if even, 3*a+1 if odd)
             a:              Assign that result back to a
                        o  Autoprint the final value of o
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language(Mathematica)</a>, 61 bytes</h1>
<p><a href="https://tio.run/##y00syUjNTSzJTE78/z8tOi9eJzPeyjDWytYTyLEx0snUSYsGMn3zU6LzdIxibW0NdYzztA118vSNYnWMMrVhErGx/13yowOKMvNKgHwFJQVdOwUlHQWgIbGxOgrVQCFDIDKtjf0PAA" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>f[n_,i_:1]:=If[n&lt;2,i,f[If[Mod[n,2]==1,3n+1,n/2],2i+Mod[n,2]]]
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.rust-lang.org/" rel="nofollow noreferrer">Rust</a>, <s>77 67</s> 61 bytes</h1>
<p>-10 bytes, thanks @alephalpha.<br />
-6 bytes, thanks @Juan Ignacio D√≠az</p>

<pre class="lang-rust prettyprint-override"><code>|mut n|{let mut b=1;while n&gt;1{b=2*b+n%2;n=[n/2,3*n+1][n%2]}b}
</code></pre>
<p><a href="https://tio.run/##TY1LCsIwGAb3PcVvQUgfVBIXLkq8SOmigRYD7afkgWCas8cWRZzVMJsx3ro0gZZBgxUUMtqY7oZAGsSbRorLt@48jIabcWB5iHlNLK2Ld4Q1zKOjXZXk7fOm55Fw5UFJUaoKR9FCdjiJ@lyi4n23lT6qmOiPgoEGS97q11j8hh@LWUxv" rel="nofollow noreferrer" title="Rust ‚Äì Try It Online">Try it online!</a></p>
<p>If overflows are not okay we can use <s>81</s> 74 (-6 bytes, thanks @Juan Ignacio D√≠az) bytes instead and write</p>
<pre class="lang-rust prettyprint-override"><code>|mut n|{let mut b=1.;while n!=1{if n%2&gt;0{b=2.*b+1.;n=3*n+1;}b*=2.;n/=2;}b}
</code></pre>
<p><a href="https://tio.run/##TY1BCsIwFAX3PcVvQUhaiSYuXJTvXQy0GEifUlNcpDl7TFHEWQ3zFm9eniGPoOnqICTFigrjfSaQA2ml2Jy/deMxOwSPWjQxNXsSeZ2WQFijHwJtalmr/nVzfiDUrKMbCTtzOUbLRrW2Kyv41KLTfbJtaT0ObIqnTH9IAfk7/ViqUn4D" rel="nofollow noreferrer" title="Rust ‚Äì Try It Online">Try it online!</a></p>
<p>which returns the value as a float, so it doesn't overflow for an input of 27. Instead it returns 4272797808638851700000000000000000, which is 137289440854955024 too small.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <s>40</s> 34 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>{‚ç∫‚Üê‚äÇ1‚ãÑ‚çµ=1:‚ç∫‚ãÑ(p+2√ó‚ç∫)‚àáp+‚çµ√∑2√∑6*p‚Üê2|‚çµ}
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=e9Q3NTP/UdsEAwA&amp;c=q37Uu@tR24RHXU2Gj7pbHvVutTW0Agl1t2gUaBsdng5kaz7qaC/QBkod3m50eLuZVgFQvVENkF8LAA&amp;f=S1MwNOBKUzA0BAA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>Reworked to use the same idea as BQN.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://esolangs.org/wiki/Re:direction" rel="nofollow noreferrer">Re:direction</a>, <del>42</del> 38 bytes</h1>
<pre><code>++v
v&gt;
&lt;
+&gt;+
&gt;v
+&gt; &gt;
v
+&gt; &gt;&gt;
&gt; &gt;v
+ &gt;&gt;
</code></pre>
<p><a href="https://tio.run/##K0rVTcksSk0uyczP@/9fW7uMq8yOy4ZL206by64MSCnYcUEoOy4gAWQCWf//mwMA" rel="nofollow noreferrer" title="Re:direction ‚Äì Try It Online">Try it online!</a></p>
<p>The following notation will be used for the contents of the queue: a number means that many <code>‚ñ∫</code>s, and <code>|</code> means one <code>‚ñº</code>. If the input number is N, the initial queue is <code>N|</code>, but for the purpose of this program, it's better to view it as <code>N|0</code>.</p>
<p>This program works through the Collatz iterations, while having the second number be 1 less than a number containing the result bits. It does two iterations at a time for odd numbers greater than 1. The possibilities are as shown:</p>
<p><a href="https://i.sstatic.net/NVUwG.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/NVUwG.png" alt="Execution path for 1" /></a></p>
<p><a href="https://i.sstatic.net/jYwu5.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/jYwu5.png" alt="Execution path for 2N" /></a>
<a href="https://i.sstatic.net/399Jy.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/399Jy.png" alt="Execution path for 2N+1" /></a></p>
</div>
<div id="pu9" class="pu"><h1>C, <s>75</s> 54 bytes</h1>
<p>Edit: 54 bytes, credit to ceilingcat.</p>
<pre class="lang-c prettyprint-override"><code>c(n,x){for(x=1;n&gt;1;n=n%2?x++,n*3+1:n/2)x+=x;return x;}
</code></pre>
<p>Works with gcc and clang.
Test main: <code>main(){for(int i=1;i&lt;16;i++) printf(&quot;%d\n&quot;,c(i));}</code></p>
<p>Takes and returns int16_t. Beware of the dreaded integer overflow.</p>
<p><strong>81 chars, not conforming to requirements, but no overflow:</strong></p>
<pre><code>#define P putchar(4
c(n){P 9);for(;n&gt;1;){if(n%2){n=n*3+1;P 9);}else{n/=2;P 8);}}}
</code></pre>
<p>Prints as binary to stdout.</p>
</div>
<div id="pu10" class="pu"><h1>Batch, 152 bytes</h1>
<pre><code>@if %1==1 echo 1&amp;exit/b0
@set n=%1&amp;set s=1
:l
@set/at=%n%%%2,s=%s%*2
@if %t%==1 (set/an=%n%*3+1,s=%s%+1)else set/an=%n%/2
@if %n% gtr 1 goto:l
@echo %s%
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.desmos.com" rel="nofollow noreferrer">Desmos</a>, <s>83</s> 80 bytes</h1>
<pre><code>i-&gt;i+si+sk,n-&gt;(floor(n/2)+kn+k)(k+1)s
s=max(0,sign(n-1))
k=mod(n,2)
i=1
n=\ans_0
</code></pre>
<p><a href="https://www.desmos.com/calculator/iknrh8ko9z" rel="nofollow noreferrer">Try it on Desmos!</a></p>
<p><em>-3 bytes thanks to Aiden Chow</em></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/FMNSSun/Burlesque" rel="nofollow noreferrer">Burlesque</a>, 41 bytes</h1>
<pre><code>1{J2dv{2./}{3.*+.}IE}C~J1Fi.+1+]m{2.%}2ug
</code></pre>
<p><a href="https://tio.run/##FY0xC8IwFIR3f0UWESzGvJe2SegoChZ3py6iSEFBK3FJ41@P76bv7l1yd4nT4/Z5x1tJq7nrNsM0Fko9X7@J9TYnq9eVzsd93v16Ooy6omp4SrTMHO8lvvL5VJQiNStaKMVCFlrQeFG1qFrYgDi0IqxtRTl8Mt4TjBeDOIAcHEkNGRgjAv3c@iAvCRtNQIwV56WdsEKutg3OmGLyxP4P" rel="nofollow noreferrer" title="Burlesque ‚Äì Try It Online">Try it online!</a></p>
<pre><code>1        # Continuation takes last (1) value from stack
{
 J       # Duplicate
 2dv     # Divisible by two
 {2./}   # Halve
 {3.*+.} # *3+1
 IE      # If else
}C~      # Continue infinitely
J        # Duplicate
1Fi      # Find index of 1
.+       # Take that many
1+]      # Prepend 1
m{2.%}   # Map mod 2
2ug      # Read as binary digits
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, <s>55</s> <s>53</s> 49 bytes</h1>
<p><em>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/85334">Unrelated String</a></em></p>
<pre><code>a?n|n&lt;2=a|p&lt;-mod n 2=(2*a+p)?(6^p*n`div`2+p)
(1?)
</code></pre>
<p>The solution is the anonymous function <code>(1?)</code>. <a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8GCpaUlaboWN80T7fNq8myMbBNr8lNSFPJsNYy0ErUNNe01jLXygHRNio0uUMQ2xT4ls0whT8GIK9VWw9BeE6J9T25iZp6CrUJBUWZeiYJGbmKBQqpCtKGenqFBLFQJzCYA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<p>Port of my BQN solution, essentially. We define an infix function <code>?</code> that takes an accumulator <code>a</code> and a number <code>n</code>:</p>
<pre><code>a ? n
</code></pre>
<p>When <code>n</code> is 1, just return the accumulator:</p>
<pre><code>    | n &lt; 2 = a
</code></pre>
<p>Otherwise, calculate <code>n</code> mod 2 and assign to <code>p</code> (for &quot;parity&quot;):</p>
<pre><code>    | p &lt;- mod n 2
</code></pre>
<p>Compute the new accumulator and number, and recurse:</p>
<pre><code>        = (2 * a + p) ? (6 ^ p * n `div` 2 + p)
</code></pre>
<p>The new accumulator is simply twice the current accumulator plus the parity (<code>2 * a + p</code>). The Collatz function calculation is a little more involved:</p>
<pre><code>6^p*n`div`2+p
6^p            6 to the power of the parity (1 if even, 6 if odd)
   *n          Times n (n if even, 6*n if odd)
     `div`2    Int-divided by 2 (n `div` 2 if even, 3*n if odd)
           +p  Plus the parity (n `div` 2 if even, 3*n+1 if odd)
</code></pre>
<p>Then our solution is simply <code>?</code> with a first argument (initial accumulator value) of 1.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 50 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x=0:4//n*x/2or f(1-6*n//(l:=n^-n),~x*l)
</code></pre>
<p><a href="https://tio.run/##HU3RboMwEHvnK@6tCaJLLoEQkPIrk5g2NiR6RDSVmFT119ndnuyzfXb@LT8b@Zj385zTOt0@Pieg5kh2bI2h@jBu22FWeA01GaPWMdH7lXTzOupVnzObBAvBPtH3l8IGMOixYiU3sD1KhgS3KauFSiPioyj9ds/rUtQFnnDRuoK8swtq5lDWkNL/nz4BkBNYAThGx@gFbWTWMmsZO0ERAhPvA7NenmyMKEfkQ@xB0A09cg1aOSwT6XchDpxE2egGsWWlj9yOsoJ96zuRZcphRBf/AA" rel="nofollow noreferrer" title="Python 3.8 (pre-release) ‚Äì Try It Online">Try it online!</a></p>
<p>Returns a float (+1 byte for int).</p>
<p>Test harness from @dingledooper or whoever they nicked it from ;-)</p>
<p>How?</p>
<p>Straight-forward recursion with one twist: Group n steps down, 1 step up into one iteration. This avoids branching at the expense of a slightly more complicated body. Detail: Recall that <code>n^-n</code> clears the lowest set bit in <code>n</code> and sets all above including the sign bit, so this is effectively the same as <code>-2 * (n&amp;-n)</code></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://mlochbaum.github.io/BQN/" rel="nofollow noreferrer">BQN</a>, <s>36</s> 31 bytes</h1>
<p><em>-5 bytes inspired by <a href="https://codegolf.stackexchange.com/users/64121/ovs">ovs</a></em></p>
<pre><code>1‚ä∏{aùïä1:a;(p+2√óùï®)ùïäp+ùï©√∑2√∑6‚ãÜp‚Üê2|ùï©}
</code></pre>
<p>Anonymous function that takes an integer and returns its Collatz encoding. <a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAgMeKKuHth8J2VijE6YTsocCsyw5fwnZWoKfCdlYpwK/CdlanDtzLDtzbii4Zw4oaQMnzwnZWpfQoKRsKoIDEr4oaVMTU=" rel="nofollow noreferrer">Try it at BQN online</a></p>
<h3>Explanation</h3>
<pre><code>1‚ä∏{aùïä1:a;(p+2√óùï®)ùïäp+ùï©√∑2√∑6‚ãÜp‚Üê2|ùï©}
  {                            }  Function of two arguments (right argument is the
                                  number, left argument calculates the answer):
   aùïä1:                            Given left argument a and right argument 1,
       a                           return a
        ;                          Otherwise,
                 ùïä                 call this function recursively
                                   with new right argument:
                            2|ùï©     Current number mod 2
                          p‚Üê        Store that value in p (for parity)
                        6‚ãÜ          6 to that power (1 for even numbers, 6 for odd)
                      2√∑            2 divided by that amount (2 or 1/3)
                    ùï©√∑              Current number divided by that (x/2 or x*3)
                  p+                Add p (x/2+0 or x*3+1)
         (      )                  and new left argument:
            2√óùï®                     Current accumulator times 2
          p+                         Plus p

1‚ä∏                                Call that function with a left argument of 1
</code></pre>
<p>Somewhat surprisingly, there seem to be no floating point errors from dividing by 3 until the numbers get too large to store as integers anyway.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 58 bytes</h1>

<pre class="lang-r prettyprint-override"><code>f=function(n,o=1,m=n%%2)`if`(n&gt;1,f((5*m+1)*n/2+m,2*o+m),o)
</code></pre>
<p><a href="https://tio.run/##LczLCcAgDADQaYREAyWCl4KdxSIVBE2kn0Ont5e@Ad45s7Z2SI6zxPJIvqsKCGlk6lGM8ZhqSSAbUwEItjtGK4t3nbxV15EU57WP0V7glQP9H84P" rel="nofollow noreferrer" title="R ‚Äì Try It Online">Try it online!</a></p>
<p>Recursive function.</p>
<hr />
<h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 58 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(n){while(n&gt;1){T=T*2+(m=n%%2)
n=(5*m+1)*n/2+m}
+T}
</code></pre>
<p><a href="https://tio.run/##K/qfnJ@Tk5qXbPs/rTQvuSQzP08jT7O6PCMzJ1Ujz85QszrENkTLSFsj1zZPVdVIkyvPVsNUK1fbUFMrT99IO7eWSzuk9n9xYkFBTqWGoZWhqQ7UPM3/AA" rel="nofollow noreferrer" title="R ‚Äì Try It Online">Try it online!</a></p>
<p>Non-recursive approach, same length.</p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>[D#√ê√âi3*&gt;√´;])√â√Å2Œ≤
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/2kX58ITDnZnGWnaHV1vHah7uPNxodG7T///GAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##ATQAy/9vc2FiaWX/MTVFTj8iIOKGkiAiP04i/1tEI8OQw4lpMyo@w6s7XSnDicOBMs6y/yIuViz/" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>[          # Loop indefinitely:
 D         #  Duplicate the current value
           #  (which will be the implicit input in the first iteration)
  #        #  If it's equal to 1: stop the infinite loop
   √ê       #  Triplicate the current value
    √âi     #  Pop one, and it it's odd:
      3*   #   Multiply the value by 3
        &gt;  #   And add 1
     √´     #  Else (it's even instead):
      ;    #   Halve it
]          # Close the if-else statement and loop
 )         # Wrap all values on the stack into a list
  √â        # Check for each value whether it's odd
   √Å       # Rotate the list once towards the right
    2Œ≤     # Convert it from a binary-list to an integer
           # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/maxbergmark/mathgolf/blob/master/math_golf.txt" rel="nofollow noreferrer">MathGolf</a>, 16 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>‚î¥√≤_‚ñ†_@&lt;\_‚î¥‚Üê¬¨]y‚ñë√•
</code></pre>
<p><a href="https://tio.run/##y00syUjPz0n7///RlC2HN8U/mrYg3sEmJh7Ie9Q24dCa2MpH0yYeXvr/vyGXEZcxlwmXKZcZlzmXBZcll6EBl6Ehl6ERl6Exl6EJl6EpAA" rel="nofollow noreferrer">Try it online.</a></p>
<p>Unfortunately there seem to be some bugs in MathGolf with the <code>‚Äº</code> and <code>√§</code> builtins, since this should have been possible in 12 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a> instead: <code>‚î¥√¥_‚ñ†‚Äº&lt;_‚î¥‚Üê¬¨]√§</code>..</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>‚î¥                # Check if the (implicit) input is equal to 1
          ‚Üê      # While false with pop,
 √≤               # execute the following 6 characters as inner code-block:
  _              #  Duplicate the current value
   ‚ñ†             #  Pop the copy, and push its Collatz value
    _            #  Duplicate that Collatz value
     @           #  Triple-swap the top three values on the stack: a,b,b ‚Üí b,a,b
      &lt;          #  Pop the top two and push a&lt;b
       \         #  Swap the top two values
        _        #  Duplicate the top value
         ‚î¥       #  Pop the copy, and check if it's equal to 1
           ¬¨     #  Rotate the stack once, so this duplicated 1 is at the front
            ]    # Wrap the entire stack into a list
             y   # Join it together to a number
              ‚ñë  # Convert it to a string
               √• # Convert it from a binary-string to an integer
                 # (after which the entire stack is output implicitly)
</code></pre>
</div>
<div id="pu19" class="pu"><h1>x86 32-bit machine code, 20 bytes</h1>
<pre><code>41 D1 E9 73 0A 6B C9 06 83 C1 04 0F 29 C0 F9 D1 D0 E2 ED C3
</code></pre>
<p><a href="https://tio.run/##XVFNT8MwDD3Hv8IUTUr2pbEhDhvjgsSNCyckhqY0TdugLJ2aFDJN/HWKuzIh8MFx3vPHk632@0mhVNteGqdsk2m89SEz1bS8gz@QNel/rDau6DDQMejaYXKf4HG7lYGYtAl6u@U8lz4oaa0QaFzAnHdeihW@VyZDz8XqE6TfIcenhMO0sFUqLebgl4wmoVYRmC/rLhjjFbA3AiUws2tsj90Ak1nWx9fApukhaJzF2QPkS@abFLUkhhz1CQrkktXK9iC1s1W1Rw@s1gFEgmIF0AncSeN6pXWhxqhKWeNwSJ93AUdAso6MuMbZGA/dszqhH6WxGvloFPF2jYu5OKGd7WlZIefJwODkDgdm45IxkoacRyH64nPKxj1KVRqnUVWZXiY/dPwdk1V4PGfjYDZ/pl6HNeeN86ZwOjsJHgovXuJo9EorPgs74AU1ifeLfyORk65uc170wn54WktDh6Wxn9C2Xyq3svDtZLeYk6Ozralc228" rel="noreferrer" title="C++ (gcc) ‚Äì Try It Online">Try it online!</a></p>
<p>Uses the <code>fastcall</code> calling convention ‚Äì argument in ECX, result in EAX.</p>
<p>In assembly:</p>
<pre><code>s:  inc ecx     # Add 1 to restore the value of ECX.
    shr ecx, 1  # Shift ECX right by 1; the low bit goes into CF.
    jnc a       # Jump if CF=0 (the number was even).
    imul ecx, 6 # Multiply ECX by 6.
    add ecx, 4  # Add 4 to ECX, producing 3n+1 where n is the original value
    .byte 0x0F  # Effectively skip an instruction by making it part of a harmless &quot;movaps xmm0, xmm0&quot;.
f:  sub eax, eax        # (Start here.) Set EAX to 0.
    stc         # Set CF to 1.
a:  rcl eax, 1  # Append CF to the bits of EAX.
    loop s      # Subtract 1 from ECX and jump if it's nonzero.
    ret         # Return.
</code></pre>
</div>
<div id="pu20" class="pu"><h1>JavaScript (ES6), 41 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(n,o=1)=&gt;n&gt;1?f(n&amp;1?n*3+1:n/2,2*o|n&amp;1):o
</code></pre>
<p><a href="https://tio.run/##DYyxDoJAEAV7vmIrc8uBZDE24MG3EOCMhrwlQGyUbz@3mskU8x4@wz5ur/UoodOcUgwOhQbh0KGTPjpcpEd@89Kgqos6158VbjRF3RwokLQEehjvJt4zfTOiUbHrMl8XfdqPbMOcnekP" rel="noreferrer" title="JavaScript (Node.js) ‚Äì Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (             // f is a recursive function taking:
  n,              //   n = input
  o = 1           //   o = output, initialized to 1
) =&gt;              //
n &gt; 1 ?           // if n is still greater than 1:
  f(              //   do a recursive call:
    n &amp; 1 ?       //     if n is odd:
      n * 3 + 1   //       use 3n + 1
    :             //     else:
      n / 2,      //       use n / 2
    2 * o | n &amp; 1 //     append the parity bit of n to the output
  )               //   end of recursive call
:                 // else:
  o               //   we're done: return the output
</code></pre>
</div>
<div id="pu21" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 31 bytes</h1>
<pre><code>2/1 :':2!(1&lt;){(-2!x;1+3*x)2!x}\
</code></pre>
<p><a href="https://ngn.bitbucket.io/k#eJwtzDsOwjAURNE+qxhXSYhQPM+/sWEpdCipKSgsobB2UtDd5ty92Uq0sZmbeJ8/09Vcv3EJlz6fdTyGYeuv7fluhMG8EBGFEDLoJWYIslpokIdl1YxUDUURLDGkE1E0/TfffeTimH5Y7Br3" rel="noreferrer">Try it online!</a></p>
</div>
<div id="pu22" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>53</s> <s>52</s> <s>48</s> 46 bytes</h1>
<pre><code>*|{$[1=n:*x;:x;*p;1+3*n;-2!n],2/|p:2 0!'x}/|1,
</code></pre>
<p><a href="https://ngn.bitbucket.io/k#eJxLs9KqqVaJNrTNs9KqsLaqsNYqsDbUNtbKs9Y1UsyL1THSrymwMlIwUFSvqNWvMdTh4srTUU9z0LfKszLUVjQ14AIASPYQlQ==" rel="nofollow noreferrer">Try it online!</a></p>
<p>Pretty straightforward stab at this. Recurse with accumulator carrying both the number and the encoding.</p>
<p>-1 found a byte by using encode<br/>
-4 trying to remember lessons coltim passed on. (use tacit)<br/>
-2 don‚Äôt need list syntax</p>
</div>
<div id="pu23" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a> + <code>math.extras project-euler.014</code>, 59 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ collatz [ &lt; ] monotonic-count rest 1 prefix 48 v+n bin&gt; ]
</code></pre>
<p><a href="https://tio.run/##JYwxD4IwFIR3fsXtCrEJJkaNq3FxMU6EoTQPxUBbXx8E/fMVZLlc7vJ9tTbiON5vl@t5D8/uRUZS6lvibKNydFqe/8hoFNYBgd49WUNhWb3mQLz0gWZXmCwk8vHcWFkO1vYxAYckUVsUal2VsYBxbavliwJHlOicdeJsY1Lj@oljCgI1q@pmRL7DsLKoGntCGTvtkcUf" rel="nofollow noreferrer" title="Factor ‚Äì Try It Online">Try it online!</a></p>
<p>There is no way Factor would be competitive using the mathy recursive algorithm. Too many symbols means too much whitespace. So we take advantage of the fact that Factor has a built-in collatz sequence word and a simple way to detect increases in a sequence.</p>
<h2>Explanation</h2>
<pre><code>                       ! 3
collatz                ! { 3 10 5 16 8 4 2 1 }
[ &lt; ] monotonic-count  ! { 0 1 0 1 0 0 0 0 }          (did it increase? then 1)
rest 1 prefix          ! { 1 1 0 1 0 0 0 0 }          (change first element to 1)
48 v+n                 ! { 49 49 48 49 48 48 48 48 }  (add 48 [equivalent to &quot;11010000&quot;])
bin&gt;                   ! 208                          (convert from binary)
</code></pre>
</div>
<div id="pu24" class="pu"><h1>FRACTRAN, 11 fractions (72 bytes) and reversible</h1>
<p><span class="math-container">$$\frac{7}{13},\frac{11}{17},\frac{247}{35},\frac{338}{441},\frac{104}{21},\frac{425}{209},\frac{153}{44},\frac{85}{49},\frac{169}{22},\frac{17}{7},\frac{195}{11}$$</span></p>
<p>The input is <span class="math-container">\$11\cdot 2^{n-1}\$</span> and the output is <span class="math-container">\$11\cdot 5^{k-1}\$</span> where <span class="math-container">\$k\$</span> is the Collatz encoding of <span class="math-container">\$n\$</span>. (Note: it doesn't halt there. It will go on to generate all the other redundant encodings of this technically multivalued function, for every number of <span class="math-container">\$4,2,1\$</span> cycles.)</p>
<p>If you replace all the instructions with their reciprocals and give it <span class="math-container">\$11\cdot 5^{k-1}\$</span> as input, it will compute <span class="math-container">\$11\cdot 2^{n-1}\$</span>.</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 47 bytes</h1>
<pre><code>f(n,i=1)=if(n&lt;2,i,f(if(n%2,3*n+1,n/2),2*i+n%2))</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMGCpaUlaboWN_XTNPJ0Mm0NNW0zgSwbI51MnTQNEFPVSMdYK0_bUCdP30hTx0grUxsopKkJ1aaSll-kkadgq2Coo2BoqqNQUJSZVwIUUFLQtQMSQP2aMLUwqwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 17 bytes</h1>
<pre><code>·∏ã:1m%2‚Üë‚Üê¬°?o‚Üí*3¬Ω%2
</code></pre>
<p><a href="https://tio.run/##ASwA0/9odXNr/23igoHhuKMxNf/huIs6MW0lMuKGkeKGkMKhP2/ihpIqM8K9JTL//w" rel="nofollow noreferrer" title="Husk ‚Äì Try It Online">Try it online!</a></p>
<p>Should be golfable. Ties <code>·∏ã:1hm%2U¬°?o‚Üí*3¬Ω%2</code> courtesy of @Razetime.</p>
<pre><code>        ¬°            Infinitely iterate on the argument:
         ?     %2    if even,
              ¬Ω      halve, else
          o‚Üí*3       3n+1.
      ‚Üë‚Üê             Take while != 1,
   m%2               map mod 2,
 :1                  prepend 1,
·∏ã                    convert from binary.
</code></pre>
<p>Only reason I thought to use Husk for this is this <em>almost</em> works:</p>
<h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 19 bytes</h1>
<pre><code>·∏ã:1‚Üît·∏ã‚Ç¨Œ£¬°·πÅ¬ßeDo/3‚Üê;1
</code></pre>
<p><a href="https://tio.run/##yygtzv6f@6ip8eGOxYam/x/u6LYyfNQ2pQTIeNS05tziQwsf7mw8tDzVJV/f@FHbBGvD//8B" rel="nofollow noreferrer" title="Husk ‚Äì Try It Online">Try it online!</a></p>
<p>Unfortunately manages to give 3840 instead of 829712 for 9, by virtue of not actually caring about the paths deterministically chosen (takes 28 to 85 as well as 14).</p>
<pre><code>        ¬°              Infinitely iterate
                 ;1    starting from [1]
         ·πÅ             concat-map
          ¬ße           \n -&gt; [   ,      ]
            D                 2*n
             o/3‚Üê                  n-1/3 ,
       Œ£               concatenate the iterations,
      ‚Ç¨                find the first 1-index of the input in them,
     ·∏ã                 convert to binary,
    t                  remove the leading 1,
   ‚Üî                   reverse,
 :1                    put the leading 1 back,
·∏ã                      and convert from binary.
</code></pre>
</div>
<div id="pu27" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, 107 bytes</h1>
<pre><code>s d 0=0
s(a:q)n=a*2^n+(s q$n-1)
f n|n&lt;2=[]|even n=0:f(div n 2)|1&gt;0=1:f(n*3+1)
r 1=1
r n=s(1:f n)$length$f n</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY5BCoMwFET3OcVfuEgUIdFNkf5epLQQMFbRjtVYV96kGzelt-g9epsGxFkMw2Ng5vWprW9d163r-zlV6eHXeipJsxZe2mJQYBtnVyTS0xAhNUpUhAXHjM-Xxc0OBNZFJctmJlCmFnPSbAJAnCehPZJhExzsZcAEFXUOt6mOQt4mv3fbgMueBO16jA0mkiPlSmyl_d8f" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>I am new to Haskell golf, so I apologize for any bits of this that are outrageously ungolfed.</p>
</div>
<div id="pu28" class="pu"><h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, 49 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x=1:1/n*x or f(n/2-n%2*~n,x-n%2*~x&lt;&lt;1)
</code></pre>
<p><a href="https://tio.run/##JY3NbsJADITveQpfKnZRgHjzt0Hss1RBbUokcFZhEalU9dXTcTnN2J89E7/TZRK3rkO49rfzR0@SL4GPfJDtQtNMg5GD28mb2/6CvMxyOrFdB1ChUWju5evTcE7c2GOGTcxpeqRIgW59NKOkHDfPd4BHMnZ/j9cxmQ390MbajOKMC/QAWwrh/3UlYnDOiBzUQUvVwsNVcBW0VtVFA1OWDVyrT4X3rIPHoLhTdV3LiOFChwJG813jO1yydtSdYm1pPdJZW7itylrXWuXYs/N/" rel="noreferrer" title="Python 2 ‚Äì Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>Notice the following: if <code>n</code> is odd, <code>3*n+1</code> must be even. This means that in the odd case, we can combine two steps into one, with <code>(3*n+1)/2</code>. Although it seems more complicated, the formula actually becomes much shorter:</p>
<pre class="lang-py prettyprint-override"><code>[n/2,(3*n+1)/2][n%2]
[n/2,n+n/2+1][n%2]
n/2+[0,n+1][n%2]
n/2+n%2*(n+1)
n/2+n%2*-~n
n/2-n%2*~n
</code></pre>
<p>Then, to calculate the Collatz encoding, we'll append <code>[0]</code> if <code>n</code> is even, and <code>[1, 0]</code> if <code>n</code> is odd. Working on integers, we see that <code>x</code> becomes <code>[x*2,x*4+2][n%2]</code>. This can be further reduced to <code>x-n%2*~x&lt;&lt;1</code> (proof is left as an exercise to the reader).</p>
<h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, 50 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x=1:1/n*x or f(n/2-n%2*~n&lt;&lt;n%2,x*2+n%2)
</code></pre>
<p><a href="https://tio.run/##HY3NTsQwDITvfQpf0CYlsLX7l642z4KKoEul3TQqWVEkxKuXMadv7LFn0nf@WKLs@xSu4@31baTotsAnPsZyo2WlycSjPMUHKX/j@Qy6rZRH0O4T7EhzpHWMl3fDjrizpwKb5Gi550SBbmMyc8wON18vMO7Z2OfPdJ2zOdAPHawtKK24QBFsSyH8v@5EDJ8LIgEFrJWVh2qgGrBV6qKDqOsOqtenynvWwWNQe1DK0DNiuNKhgtB86fyAS9aOdlBbW3qPdNYW7pu61bVWCXsW/wc" rel="noreferrer" title="Python 2 ‚Äì Try It Online">Try it online!</a></p>
<p>The &quot;obvious&quot; method to compute the next term would be <code>[n/2,3*n+1][n%2]</code>, but we can do better with a little bit magic: <code>n/2-n%2*~n&lt;&lt;n%2</code>. It can be derived by working backwards:</p>
<pre class="lang-py prettyprint-override"><code>[n/2,3*n+1][n%2]
[n/2,(3*n+1)/2][n%2]&lt;&lt;n%2
n/2+[0,n+1][n%2]&lt;&lt;n%2
n/2+n%2*(n+1)&lt;&lt;n%2
n/2+n%2*-~n&lt;&lt;n%2
n/2-n%2*~n&lt;&lt;n%2
</code></pre>
</div>
<div id="pu29" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 55 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,e=1:e*(n&lt;2)or f(n*3//(6-5*(c:=n%2))+c,2*e+c)
</code></pre>
<p><a href="https://tio.run/##DcrRCsIgFADQ977iMgjudcbS1QiZ/YuZlrDuRPYSa99uO88nf5f3zP0tl1qjndzn8XTAMlhlgkAeNc0FIrLouw6H01WgN5aPmqj1UovQeqpxLwkSQ3H8CqikGsgcYJdL4gVjsyZz7zf4wRoxkRkv5w0aqn8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) ‚Äì Try It Online">Try it online!</a></p>
<p>This one uses an extra byte to do integer division since otherwise the answers accrue floating point innacuracy. I decided to submit the one with the extra <code>/</code> because Python can handle arbitrarily large integers according to your memory.</p>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 14 bytes</h1>
<pre><code>√ó3‚Äò$H·∏Ç?‚Äô√ê¬ø·∏Ç·πô-·∏Ñ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///wdONHDTNUPB7uaLJ/1DDz8IRD@4HMhztn6j7c0fLf@nC7pvv//4amAA" rel="nofollow noreferrer" title="Jelly ‚Äì Try It Online">Try it online!</a></p>
<h2>How it works</h2>
<pre><code>√ó3‚Äò$H·∏Ç?‚Äô√ê¬ø·∏Ç·πô-·∏Ñ - Main link. Takes n on the left
        √ê¬ø     - While loop, collecting each iteration i:
       ‚Äô       -   Condition: i &gt; 1
      ?        -   Body: If:
     ·∏Ç         -     Condition: Bit; i % 2
   $           -     True:
√ó3             -       3i
  ‚Äò            -       3i+1
    H          -     False: Halve
          ·∏Ç    - Bit of each i
           ·πô-  - Rotate the final 1 to the front
             ·∏Ñ - Convert from binary
</code></pre>
</div>
<div id="pu31" class="pu"><h1><a href="https://gcc.gnu.org/" rel="noreferrer">C (gcc)</a>, 49 bytes</h1>

<pre class="lang-c prettyprint-override"><code>e;f(n){for(e=1;~-n;n=n%2?++e,3*n+1:n/2)e+=e;n=e;}
</code></pre>
<p><a href="https://tio.run/##XZDRToMwFIbv9xQnJEvKKNlaBhQremF8CreLpTtMonYLJZG44KOLB4Zkk6SF/uc/Xzm/CQ/GdB3qgln/XBwrhrnQ36HVNrdz@RgEyKOFDcSdXUofgxypgLrtSlvDx660zIfzDOjphRpd7V62kMNZcJAcIg5rDjGHhEPKQXHIOIgVLaoLMghyCLKIuNUTBpsTmhr31yS5UgNrTa8oSnqKUiIZmEpmaQ9TBJaJykiNMzqnqien6yjuAUIJqcZbzNG6GszrrlrQjuYNq8tl3qZ5lpsme6IVexyuz5E3dlNMwPofLe0eG2pb6fHzHlz5hceC/Y3gL0dhMSkagmBw@wPskt6UINEuKQ6Wrb6pOqoWrPZvVSR1iux/26kiS8G8@R7CB6B97jaWBqs5OD7N7vIctyO2nbXdjynedwfXhZ@/" rel="noreferrer" title="C (gcc) ‚Äì Try It Online">Try it online!</a></p>
<p>Inputs an integer.<br />
Returns its Collatz encoding.</p>
</div>
<div id="pu32" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, <s>72</s> 68 bytes</h1>
<pre><code>.+
$*1;1
{+`^(1+)\1;(1+)
$1;$2$2
^1;(1+)
$.1
(1+);(1+)
1$1$1$1;1$2$2
</code></pre>
<p><a href="https://tio.run/##K0otycxL/K@nzaWixWXIZaiScGgbl3uCHpeqhm@CIUTc0NqQq1o7IU7DUFszxtAaRHGpGFqrGKkYccXB@HqGXCAGhGeoAobWhiA1//8bmgIA" rel="nofollow noreferrer" title="Retina 0.8.2 ‚Äì Try It Online">Try it online!</a> Link is to test suite that computes the results from <code>1</code> to <code>n</code>. Explanation:</p>
<pre><code>.+
$*1;1
</code></pre>
<p>Convert <code>n</code> to unary and pair it with an initial output value of <code>1</code>.</p>
<pre><code>{`
</code></pre>
<p>Repeat while the input is paired.</p>
<pre><code>+`^(1+)\1;(1+)
$1;$2$2
</code></pre>
<p>While <code>n</code> is even, halve it and double the output value.</p>
<pre><code>^1;(1+)
$.1
</code></pre>
<p>If <code>n</code> is <code>1</code>, then delete it and convert the output to decimal.</p>
<pre><code>(1+);(1+)
1$1$1$1;1$2$2
</code></pre>
<p>Otherwise, triple <code>n</code>, double the output, and increment both of them.</p>
<p>After porting to <a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a> 1, it's possible to golf the answer down to 53 bytes, but for some reason it becomes inordinately slow:</p>
<pre><code>.+
_;$&amp;*
+`(_+);(_+)\2(_?)
$1$1$3;$2$.3*$(4*_5*$2
\G_
</code></pre>
<p><a href="https://tio.run/##FcQ7CoAwEAXA/p1jlXwguJsoQgrLXCKwsbCwsRDvH5WBuY/nvHbugymtBw/NNDr4ZtTb/FfF6GZB/ImZhEJ0ZJLT2ZGgFu2dIYhImLFgBU9gAccX" rel="nofollow noreferrer" title="Retina ‚Äì Try It Online">Try it online!</a> Link includes faster test cases. Explanation:</p>
<pre><code>.+
_;$&amp;*
</code></pre>
<p>Convert <code>n</code> to unary and pair an initial output value of <code>1</code> with it.</p>
<pre><code>+`(_+);(_+)\2(_?)
$1$1$3;$2$.3*$(4*_5*$2
</code></pre>
<p>While <code>n</code> is greater than <code>1</code>, perform a Collatz step on it, updating the output value appropriately. Here <code>$1</code> is the previous output value, <code>$2</code> is <code>n//2</code> (integer division) and <code>$3</code> is <code>n%2</code>, thus <code>n</code> is replaced by <code>n//2+n%2*(n//2*5+4)</code> which computes equal to <code>n*3+1</code> when <code>n</code> is odd.</p>
<pre><code>\G_
</code></pre>
<p>Convert the output value to decimal and delete <code>n</code>.</p>
</div>
<div id="pu33" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 30 bytes</h1>
<pre><code>ÔºÆŒ∏‚äûœÖ¬πÔº∑‚äñŒ∏‚âî‚éá‚Ü®‚Å∞‚äûÔºØœÖÔπ™Œ∏¬≤‚äï√ó¬≥Œ∏√∑Œ∏¬≤Œ∏Ôº©‚Ü®¬≤œÖ
</code></pre>
<p><a href="https://tio.run/##RY67DsIwDEV3vsKjIwUJyoQ6AV068Bj6A6G1aKQ0aZ2kiK8PqYrEZtnnHt@2V9w6ZVKq7RjDLQ5PYpxEuXlE32OUsM/zu9eGACtqmQaygbqMCDh5r18WG2Kr@INn5Ql3EpbkfSRWwfFiuLouGoeThEIIIaG2f02jB/J4kDCtl1DpWXf0g5d1bsLaBrwoH9YXhYSYRWVKx7SdzRc" rel="nofollow noreferrer" title="Charcoal ‚Äì Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ÔºÆŒ∏
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>‚äûœÖ¬π
</code></pre>
<p>Start with a Collatz encoding of <code>1</code>.</p>
<pre><code>Ôº∑‚äñŒ∏
</code></pre>
<p>Repeat until <code>n=1</code>.</p>
<pre><code>‚âî‚éá‚Ü®‚Å∞‚äûÔºØœÖÔπ™Œ∏¬≤‚äï√ó¬≥Œ∏√∑Œ∏¬≤Œ∏
</code></pre>
<p>Save <code>n%2</code> to the encoded value, and switch on that to halve or increment and triple <code>n</code> as appropriate. (Note that in order to avoid floating-point inaccuracy, I've used an integer halve, which is a byte longer than a floating-point halve.)</p>
<pre><code>Ôº©‚Ü®¬≤œÖ
</code></pre>
<p>Output the encoded value converted from base 2.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/246722/">246722</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




