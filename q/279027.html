<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::279027</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>150</td><td>Ruby</td><td>250618T021538Z</td><td><a href="https://codegolf.stackexchange.com/questions/279027/find-the-factor-to-use-for-shortest-simple-brainfuck-data-initialization-loop/282328#282328">Value In</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 150 bytes</h1>
<p>Just a quick implementation of the pseudocode to get things started with a few tweaks:</p>
<ol>
<li>Since all code has that constant +3, we just skip adding it. The length of code for each factor relative to each other stays the same regardless and we just want the factor, not the length of the final code.</li>
<li>Instead of removing trailing zeroes, it saved bytes to just calculate what the length <em>would</em> be by grabbing the index of the last nonzero element and adding 1. Except in 2/3 of the cases where the +1 would be used just results in a constant +3 that we can also cut! For the last case, <code>i+~s</code> saves a byte over <code>i-s-1</code>.</li>
</ol>
<pre class="lang-ruby prettyprint-override"><code>-&gt;a,i{z=-&gt;b{b.rindex{_1&gt;0}||-1}
(r=0..a.max).min_by{|f,*m|d=a.map{|n|m&lt;&lt;(n-f*c=r.min_by{(n-_1*f).abs}).abs;c}
f+d.sum+2*z[d]+m.sum+(i+~s=z[m]).abs+s}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ddDdToMwFADgeMtTnAvNgNIO2Jwk0nq3l-gawq-SDLLAptsAH8MbbxajD6VPY0c3fzI9pU1P0_P1hOfXahVtdi9T-rZaZth7f8IstPJmSzGLmohUeZmk6yZwmN21LXY6Ta-oTUhIinBtkCIvg2jTtJllFm1C96eLpi3bwvf1EmdmTKvjHZkHjpkZJIzqrl-v407LUELqVYFcc8sTgYo-0XP0WNMtL0R_D9Vdd-gufrjL5yncpstaA5CNWilQOA9IHYelPpxxPktAoJloZwkaGn076X04h8Ahy0ofwMC6sYxO1laybsqlIGSygMqCitJUS8tEPbX7OLvgNvw3HGHBFWAmtwAcC_YrkK9C4y6MYQIeOLYscOEkpLA_RYhjhhjaf_1Ui3IkrnHHhrEnDfvUOEJeD6k4cMoQcuf3xMiFySW4kz8hSTijb-KnoyimGhIMY_yFq9_1CQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/279027/">279027</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




