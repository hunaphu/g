<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::65409</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>097</td><td>APLNARS</td><td>250628T040659Z</td><td><a href="https://codegolf.stackexchange.com/questions/65409/implement-the-method-of-finite-differences/282442#282442">Rosario</a></td></tr>
<tr d-ix="1"><td>093</td><td>APL Dyalog Unicode</td><td>210107T085349Z</td><td><a href="https://codegolf.stackexchange.com/questions/65409/implement-the-method-of-finite-differences/217419#217419">Razetime</a></td></tr>
<tr d-ix="2"><td>068</td><td>CJam</td><td>151202T055015Z</td><td><a href="https://codegolf.stackexchange.com/questions/65409/implement-the-method-of-finite-differences/65513#65513">Reto Kor</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 97 chars</h1>
<pre><code>{z←' ',⍨⊃⍵,¨' '⍴⍨¨∊(k←⍴↑⍵)-⍴¨⍵⋄z[1;k,k+1]←'∣'(↑z[1;k])⋄z}∘{⍵,¨⌽+\↑¨¯1⌽¨⌽⍵}∘{1≥≢∪⍵:⊂⍵⋄(⊂⍵),∇-2-/⍵}
</code></pre>
<p>The problem was the align of the columns, so in pratice, align of column using matrix representation of the system, for me that
takes more chars that the function that calculate result as vector that would be this (39 chars)</p>
<pre><code>{⍵,¨⌽+\↑¨¯1⌽¨⌽⍵}∘{1≥≢∪⍵:⊂⍵⋄(⊂⍵),∇-2-/⍵}
</code></pre>
<p>Test:</p>
<pre><code>  h←{z←' ',⍨⊃⍵,¨' '⍴⍨¨∊(k←⍴↑⍵)-⍴¨⍵⋄z[1;k,k+1]←'∣'(↑z[1;k])⋄z}∘{⍵,¨⌽+\↑¨¯1⌽¨⌽⍵}∘{1≥≢∪⍵:⊂⍵⋄(⊂⍵),∇-2-/⍵}
  h 4 8 15 16 23 42 
  4   8  15  16  23 42 ∣ 46
  4   7   1   7  19  4     
  3  ¯6   6  12 ¯15        
 ¯9  12   6 ¯27            
 21  ¯6 ¯33                
¯27 ¯27                    
  h 2 5 10 17 26
2 5 10 17 26 ∣ 37
3 5  7  9 11     
2 2  2  2        
  h 1 2 
1 2 ∣ 3
1 1    
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 93 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{↑⍕¨¨{(⊂1⌽'|',⍨¯1⌽⊃⍵),(¯1↓1↓⍵),⊂(⊢,⊢/)⊃⌽⍵}⊃{(⊂⍺,(⊃⌽⍺)+⊃⌽⊃⍵),⍵}/⌽⊂@1⌽{⍵,⊂-2-/⊃⌽⍵}⍣{1≥≢∪⊃⌽⍺}⊂⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///v/pR28RHvVMPrTi0olrjUVeT4aOeveo16jqPelccWg/iPOpqftS7VVNHA8RtmwzCYD5QLVD9IiC9SF8TpAiotHdrLZAFNudR7y4dDZjwLk1tKBNqGEilPpjf5ACypBooADJR10hXH8ms3sXVho86lz7qXPSoYxXcsFqw8Vtr/6c9apvwqLcPbOiaR71bDq03Bvmmb2pwkDOQDPHwDP7vDlRTDeQAKXX1R90taQogrVzuCiYKFgqGpgqGZgpGxgomRkARIwUg10DB0FzByAwA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>The output format is a bit annoying, and takes up most of the space here.</p>
</div>
<div id="pu2" class="pu"><h1>CJam, <s>74</s> <s>73</s> <s>71</s> 68 bytes</h1>

<pre><code>q~]{_2ew::-Wf*_)-}g0]W%{_W=@W=++_}*;)"|"\++]W%z{:s_:,$W=)f{Se]}}%zN*
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=q~%5D%7B_2ew%3A%3A-Wf*_)-%7Dg0%5DW%25%7B_W%3D%40W%3D%2B%2B_%7D*%3B)%22%7C%22%5C%2B%2B%5DW%25z%7B%3As_%3A%2C%24W%3D)f%7BSe%5D%7D%7D%25zN*&amp;input=4%208%2015%2016%2023%2042" rel="nofollow">Try it online</a></p>

<p>The latest version uses the middle section of @MartinBüttner's proposed solution, which is 3 bytes shorter than what I had. The first part for calculating the difference rows was identical. The part for the final formatting was the same length, so I kept my original version. Martin's savings came from making the sum part of the list while the new values are calculated, and using a <code>*</code> instead of a <code>%</code> loop. That also simplified the insertion of the "|".</p>

<p>Explanation:</p>

<pre><code>l       Get one line of input.
~]      Interpret input and wrap in list.
{       While loop to construct additional lines.
  _2ew    Copy and build pairs of subsequent numbers.
  ::-     Reduce all number pairs by subtraction.
  Wf*     Multiply all of them by -1, since the reduction calculated 1st minus 2nd,
          but we need 2nd minus 1st.
  _)-     Check if all numbers in list are equal by popping off last and removing
          value from the list. This is truthy if all numbers are not equal.
}g      End of while loop to construct additional lines.
0       Add a 0 at the end, which will be the starting point of the sum for
        calculating the new values.
]       Wrap all lines in a list.
W%      Revert order of list, since adding the additional numbers in each row
        goes in bottom-up order.
{       Start of loop over rows.
  _W=     Get last value of row.
  @       Rotate previous row to top.
  W=      Extract last value as new increment. For the 0 that was added as an
          additional row, this is a comparison with -1, which gives the desired
          value of 0.
  +       Add increment to last value.
  +       Append value to list.
  _       Copy row for use in next loop iteration.
}*      End of loop over rows.
;       Remove extra copy of last row.
)       Pop off last value of last row.
"|"     Push the vertical bar.
\       Swap vertical bar and last value.
++      Concatenate the 3 parts.
W%      Revert order of list, to get the rows back in original order.
z       Transpose list for handling column alignment.
{       Loop over columns.
  :s      Convert values to strings.
  _:,     Copy and calculate the length of all values.
  $W=     Get maximum length by sorting and getting last value.
  )       Increment to add space between columns.
  f{      Apply to all values.
    Se]     Right pad to column width with spaces.
  }       End apply to all values.
}%      End loop over columns.
z       Transpose back to row order.
N*      Join rows with newlines.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/65409/">65409</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




