<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::891</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>033</td><td>GNU coreutils</td><td>170201T104902Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/108854#108854">Toby Spe</a></td></tr>
<tr d-ix="1"><td>022</td><td>Wolfram Language Mathematica</td><td>201016T230022Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/213713#213713">att</a></td></tr>
<tr d-ix="2"><td>105</td><td>Python</td><td>110212T210442Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/898#898">MrD</a></td></tr>
<tr d-ix="3"><td>011</td><td>APL Dyalog Extended</td><td>200919T164321Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/211319#211319">Razetime</a></td></tr>
<tr d-ix="4"><td>008</td><td>Japt x</td><td>201016T154610Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/213676#213676">Shaggy</a></td></tr>
<tr d-ix="5"><td>071</td><td>Python 2</td><td>141125T205232Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/41895#41895">xnor</a></td></tr>
<tr d-ix="6"><td>278</td><td>Java  278 Characters</td><td>141125T220706Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/41897#41897">Compass</a></td></tr>
<tr d-ix="7"><td>144</td><td>C 144 Chars</td><td>110214T053141Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/925#925">st0le</a></td></tr>
<tr d-ix="8"><td>114</td><td>Ruby</td><td>110212T183139Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/893#893">Arnaud L</a></td></tr>
<tr d-ix="9"><td>084</td><td>Python</td><td>110213T172820Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/919#919">Keith Ra</a></td></tr>
<tr d-ix="10"><td>021</td><td>J</td><td>110212T234010Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/906#906">Eelvex</a></td></tr>
<tr d-ix="11"><td>nan</td><td></td><td>110212T203607Z</td><td><a href="https://codegolf.stackexchange.com/questions/891/square-free-numbers/897#897">Aman Zee</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>GNU coreutils, <s>44</s> 33 bytes</h1>

<pre class="lang-sh prettyprint-override"><code>seq $1|factor -h|fgrep -cve^ -e$1
</code></pre>
<p>This factors every number up to and including N, and counts lines not containing <code>^</code> or the input value (to exclude N itself - no other line can contain that as a substring).  It requires a recent enough implementation of <code>factor</code> that has the <code>-h</code> option to gather repeated factors.</p>
<p>With N=1,000,000, this completes on my machine in about ⅕ second.</p>
<p>If the problem spec were <em>inclusive</em>, then we'd be able to do it in just 28 bytes:</p>
<pre class="lang-sh prettyprint-override"><code>seq $1|factor -h|fgrep -cv ^
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>24</s> 22 bytes</h1>
<pre><code>#.#&amp;@*MoebiusMu@*Range
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7X1lPWc1Byzc/NSmztNi31EErKDEvPfV/QFFmXkl0moOhAQjE/gcA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p><code>SquareFreeQ</code> is too long anyways.</p>
</div>
<div id="pu2" class="pu"><h1>Python - 105 bytes</h1>
<pre class="lang-py prettyprint-override"><code>s=input()
C=set()
for q in [k*k for k in range(2,s+1)]:
 i=1
 while q*i&lt;=s:C.add(q*i);i+=1
print s-len(C)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, 11 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>+/≡∘∪⍨⍤⍭¨⍤⍳
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTflfra1frfGoa9GjzoWPOlZpPupd@6h3a@2hFY96N4MYXEB5FOklQBVw2f/a@mCJGUC5R70rELJAevP/tEdtEx719j3qan7Uu@ZR75ZD640ftU181Dc1OMgZSIZ4eAb/T1MwNAABAA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>Bubbler's tacit form. (-4 bytes)</p>
<p>-1 byte from Adám.</p>
<h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, 16 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{+/{(⊢≡∪)⍭⍵}¨⍳⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/v1pbv1rjUdeiR50LH3Ws0nzUu/ZR79baQyse9W4GMf6nPWqb8Ki371FX86PeNY96txxab/yobeKjvqnBQc5AMsTDM/h/moKhAQgAAA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>Same approach as the J answer, <code>100000</code> runs under 10 secs on tio, so it should be all good.</p>
<h2>Explanation</h2>
<pre class="lang-apl prettyprint-override"><code>{+/{(⊢≡∪)⍭⍵}¨⍳⍵} 
   {(⊢≡∪)⍭⍵}     square-free checking function
   {     ⍭⍵}     prime factors of ⍵
    (⊢≡∪)        are the unique values equal to the originals?
                 function ends
            ¨⍳⍵  map function to range 1-n
 +/              sum the resulting boolean array
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-x</code></a>, 8 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>õ_=k)eZâ
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LXg&amp;code=9V89ayllWuI&amp;input=MTAwMDAw" rel="nofollow noreferrer">Try it</a></p>
<pre><code>õ_=k)eZâ     :Implicit input of integer U
õ            :Range [1,U]
 _           :Map each Z
  =          :  Reassign to Z
   k         :  Prime factors of Z
    )        :  End reassignment
     e       :  Test equality with
      Zâ     :  Z deduplicated
             :Implicit output of sum of resulting array
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Python 2: 71 chars</h2>

<pre class="lang-python prettyprint-override"><code>i=n=input()
A=[1]*n
while~-i:A[i*i::i*i]=~-n/i/i*[0];i-=1
print~-sum(A)
</code></pre>

<p>Basically an optimization of <a href="https://codegolf.stackexchange.com/a/919/20260">Keith Randall's solution</a> of zeroing out numbers that are multiples of squares. The main improvement is directly zeroing out the sublist <code>A[i*i::i*i]</code>, which requires awkwardly calculating its length or else Python refuses to do the slice assignment.</p>

<p>Lots of <code>~-</code> are used for <code>-1</code>. The <code>~-sum(A)</code> corrects for <code>0</code> being falsely counted as a squarefree number.</p>
</div>
<div id="pu6" class="pu"><h1>Java - 278 Characters</h1>
<p>A golfed version of the <a href="https://codegolf.stackexchange.com/a/897/32114">Java answer</a> already demonstrated here without changing the spirit of the answer, because the original poster's idea golfed could have saved 50%, which is huge compared to most other languages!</p>
<pre><code>class T {public static void main(String[] a) {int n,i,j;double k;n=Integer.parseInt(a[0]);int l[]=new int[n];for(i=0;i&lt;n;)l[i]=1+i++;for (i=1;i&lt;n;i++) {k=Math.sqrt(l[i]);if(k==Math.floor(k))for (j=i;j&lt;n;j+=i+1)l[j]=-1;}j=0;for(i=0;i&lt;n;)if(l[i++]!=-1)j++;System.out.println(j);}}
</code></pre>
<p>Specifically, a few Java golfing tricks were used to optimize this:</p>
<ul>
<li>Removed long variable names</li>
<li>Removed the use of a Reader in favor of using an argument (saves a huge amount of characters, including import, Exception handling, and casting the reader in general)</li>
<li>Removed extra brackets and parentheses using single-line actions for ifs and fors where applicable</li>
<li>Declare ints beforehand together to reduce calls to int</li>
<li>Declare a double and optimize square calculation</li>
<li>Extracted ++ where possible</li>
</ul>
<p>This shows that the original ungolfed solution of 565 characters can be brought down to a very respectable &lt;300 character answer even with a more structured language like Java.</p>
<h3>Ungolfed</h3>
<pre><code>class T {
    public static void main(String[] a) {
        int n, i, j;
        double k;
        n = Integer.parseInt(a[0]);
        int l[] = new int[n];
        for (i = 0; i &lt; n;)
            l[i] = 1 + i++;
        for (i = 1; i &lt; n; i++) {
            k = Math.sqrt(l[i]);
            if (k == Math.floor(k))
                for (j = i; j &lt; n; j += i + 1)
                    l[j] = -1;
        }
        j = 0;
        for (i = 0; i &lt; n;)
            if (l[i++] != -1)
                j++;
        System.out.println(j);
    }
}
</code></pre>
</div>
<div id="pu7" class="pu"><p><h2>C</h2> <strong>144 Chars</strong></p>

<pre><code>#define m 1000001
x[m];
main(s,o,f){
for(o=2;o*o&lt;m;o++)
for(f=s=o*o;f&lt;m;f+=s)x[f]=1;
scanf("%d",&amp;f);
for(s=0,o=1;o&lt;f;o++)if(!x[o])s++;
printf("%d",s);
}
</code></pre>

<p>Instantaneous Solution on my crummy PC! :)</p>
</div>
<div id="pu8" class="pu"><h1>Ruby - <s>119</s> 114</h1>

<pre><code>I=gets.to_i
m=[]
(s=-&gt;i{(I&gt;i*i)?s[i+1]+[i*i]:[]})[2].map{|s|(1..I).map{|x|s*x&lt;I||break;m&lt;&lt;s*x}}
p ([*1...I]-m).size
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Python, 84 characters</h2>

<pre><code>n=input()
R=range(n)
A=[1]*n
for i in R[2:]:
 for x in R[::i*i]:A[x]=0
print sum(A)
</code></pre>
</div>
<div id="pu10" class="pu"><h2>J, 21 chars</h2>

<pre><code>+/(]=&amp;#~.)@:q:"0&gt;:i.N
</code></pre>

<p>Checks for each integer from 1 to N if any prime factor appears more than once.</p>

<p>eg:</p>

<pre><code>+/(]=&amp;#~.)@:q:"0&gt;:i.10000
 6083
+/(]=&amp;#~.)@:q:"0&gt;:i.100000
 60794
</code></pre>

<p>Takes ~3secs for N=1,000,000 (@2GHz,1core)</p>
</div>
<div id="pu11" class="pu"><p><strong>Java Solution</strong></p>

<pre><code>import java.io.*;
    public class Main{
            public static void main(String[] args)throws Exception {
              int N=Integer.parseInt(new BufferedReader(new InputStreamReader(System.in)).readLine());
              int list[]=new int[N];
    for (int i=0;i&lt;N;i++){
    list[i]=(i+1);
    }
    for (int i=1;i&lt;N;i++){
    if (Math.sqrt(list[i])-Math.floor(Math.sqrt(list[i]))==0){
    for(int j=i;j&lt;N;j+=(i+1)){
    list[j]=-1;
    }}}
    int c=0;
    for (int i=0;i&lt;N;i++){
    if (list[i]!=-1){
    c++;
    }}System.out.println(c);}}
</code></pre>

<p>IDEONE  <a href="http://ideone.com/Yf467" rel="nofollow">http://ideone.com/Yf467</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/891/">891</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




