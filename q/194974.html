<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::194974</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>487</td><td>Python3</td><td>250312T030435Z</td><td><a href="https://codegolf.stackexchange.com/questions/194974/can-jimmy-escape-the-ghosts/278610#278610">Ajax1234</a></td></tr>
<tr d-ix="1"><td>212</td><td>Python 2</td><td>191031T034950Z</td><td><a href="https://codegolf.stackexchange.com/questions/194974/can-jimmy-escape-the-ghosts/195091#195091">Chas Bro</a></td></tr>
<tr d-ix="2"><td>089</td><td>Jelly</td><td>191031T083221Z</td><td><a href="https://codegolf.stackexchange.com/questions/194974/can-jimmy-escape-the-ghosts/195101#195101">Nick Ken</a></td></tr>
<tr d-ix="3"><td>208</td><td>Javascript ES6</td><td>191031T121349Z</td><td><a href="https://codegolf.stackexchange.com/questions/194974/can-jimmy-escape-the-ghosts/195106#195106">edc65</a></td></tr>
<tr d-ix="4"><td>199</td><td>Python 2</td><td>191031T075516Z</td><td><a href="https://codegolf.stackexchange.com/questions/194974/can-jimmy-escape-the-ghosts/195100#195100">Bubbler</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 487 bytes</h1>
<pre class="lang-py prettyprint-override"><code>import math
E=enumerate
M=[(0,1),(1,0),(0,-1),(-1,0)]
def f(b):
 d,D={},{}
 for x,r in E(b):
  for y,v in E(r):d[(x,y)]=v!='#';D[v]=D.get(v,[])+[(x,y)]
 O=D['o'][0]
 q=[(*O,[O],D)]
 for x,y,p,D in q:
  if x in[0,len(b)]or y in[0,len(b[0])]:return 1
  if len(G:=[o for J,K in D['g']if(o:=min([P for X,Y in M if(P:=(J+X,K+Y))in d],key=lambda X:math.dist((x,y),X)))!=(x,y)])==len(D['g']):
   for X,Y in M:
    if(P:=(x+X,y+Y))not in p and P not in G and d.get(P):q+=[(*P,p+[P],{**D,'g':G})]
</code></pre>
<p><a href="https://tio.run/##hVRdb9owFH2ef4ULD7HBjZLSD5rJb6kqtergkcqzJlASNxrEIUkRCPHbme18dmRaJCLfc8895/o6Jj0UHzKZTNPsfI43qcwKuFkWH@CJhsnnJsyWRQjeKEMOcTFBLnHU2yHXOrjWEQdBGMEIrbAHYEB8ejyR4wnASGZwTzIYJ/CpTBroQHYllGEvYGhPDpjT3RW1htZ3n@049W0RFmhHGMfjKg/gjPrMkhZnjgq2qpvRjLAZJ75Olk4HkhJfS2@1VRzBvQqYQ9Zhouy5tu4ASghzLwuLzyyBblmgE88eZdIovpBXraZ8hcXjCEmPbuIEsbnJLsi7zr6pOjT3KHoZL8jr@B1jBQac/A4PdL3crIIlXHh6nHYQ5wUy2yELjPEVLbeGKdW2pYsZ0hd5A9Qee@Vx0B6JLHQ2hcskgHNYhc8mDMz45tjbjvWY5iQdszknx9HIJ8rDez5hfs5dSOFgMADD5gG2eYT6gaEty0gvW7Tl6tL8ptawgRQlNIH0i2olqqtrGbMSpaIOZQ/W8Kpao3172fJQVI0OG1Qv6zq9bLkd9H9c43dX@dXtC/0Wsm4MdFq7b1tr5iarpeiihv3Q3UjNVh007Bo17GnFFrpdu/OS3dBkDf@xZ0z1mMXFGbpOc4jdqbYzqU6jmZQol@KfhEvUcOXwb2/9r1HIXyu5zAKUq0//W3UbGRvF3NyCWH/WUbwuwgz9kElIYG7n6ToukPUzsbC6@yDN4qRAEWqVXHW7euCbfnjSD9/2w3f98H0//NAPT/vhx37YdRR@/gM" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>236</s> <s>235</s> <s>227</s> 212 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f((x,y),G,M,U=[]):
 R=1-(len(M[0])-1&gt;x&gt;0&lt;y&lt;len(M)-1);H=[(u+cmp(x,u),v+cmp(y,v)*(u==x))for u,v in G];d,e=0,1
 for _ in' '*4*(R&lt;1&gt;((x,y)in H)):J=z,w=x+d,y+e;d,e=-e,d;R|=M[w][z]&gt;(J in U)&lt;f(J,H,M,U+[J])
 return R
</code></pre>

<p><a href="https://tio.run/##hVRNb@IwFDzjX2E1h9hgEKG0B8AcA0LiQukpG60QGEMFCcoHJdX@d/a9xEmAbrWWeDxPxuPhwXDKkl0Y9K7XjdrSLWMXkXExEXPxLj2fDwhdSKfNDipgc6/r87Yzvoy7o2yUI7Dlw6n0WNpaH09wNuXinLeZOPMmS6W8cL4NI5qKM90HdOIPN0LJrnAIRfg3gDa1m/0mW4yccXE98KacD2byS3zKS2sjspbKj7WV2AwXf@Tc@/S9L3/MZqj5zkdbNhNT9NzyZj4nNFJJGgV0cX1bOtK2batapJMvDS9idcJih22NVgsOEvK27OUKHRJqAzzfSRpFPFpq5J0u5HAb/gOreMUy0v0Ht5Y2Hq3KF7blKWxr7g36H25xm5vPprSuseqwNEVubLk9Y6saV2haTWrUcOvplFy4u@Ia1HDzj6vRZuemhLdbfGrYL4/DKUerv31p7mvxpd0Osh6DGX81HF20@kfCdzTnhtbjxRiidaRWiZqvTiyB/DRimXTi02GfMPtXYHPS@JSYnRjTNNwVPaBziNtwguVDsrYjIFmkgRHJRIS/chWkRxWBMLBBtXGMgAvvSLmI9T0lyimNPZiR0g7tAWhishBUBwNrezBpQXbxASqBJGw9R3R9D59bto/wHMBjBJ0J1Qf@OxByivZBQp@WUZrssieCNmI04UHkBIXUYHnG0vcHtGBvWbMeTsy5USm13NUhVvdaLmq5qOWiltvH8oLl9WfV618" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>-15 bytes thx to <a href="https://codegolf.stackexchange.com/users/78410/bubbler">Bubbler</a></p>

<p>As input, takes a tuple <code>(x,y)</code> as jimmy's initial position, a list <code>G == [(g1x,g1y), ...]</code> of initial ghost positions, and a list of lists <code>M</code> which is the 2-dimensional binary matrix where cells are <code>0</code> if they contain "an object" (i.e., <code>#</code>) and <code>1</code> otherwise.</p>

<p>Returns <code>1</code> for truthy, <code>0</code> for falsey.</p>

<p>Loosely speaking, the idea here is that we're going to depth-first recurse over down, left, up, right to seek a border cell. To start,</p>

<pre class="lang-python prettyprint-override"><code>R=1-(len(M[0])-1&gt;x&gt;0&lt;y&lt;len(M)-1)
</code></pre>

<p><code>R</code> is truthy if jimmy starts on a border cell. We could just return <code>R</code> if he does, but that would add an additional <code>return</code>. So in any case, we calculate where the ghosts would move to next.</p>

<pre class="lang-python prettyprint-override"><code>H=[(u+cmp(x,u),v+cmp(y,v)*(u==x))for u,v in G]
</code></pre>

<p><code>cmp(a,b)</code> returns the sign of <code>a-b</code> as <code>-1,0,1</code>; so this updates the ghosts positions with preference for horizontal movement if possible. Next,</p>

<pre class="lang-python prettyprint-override"><code>for _ in' '*4*(R&lt;1&gt;((x,y)in H)):
</code></pre>

<p>executes a loop 4 times (<code>' '*4</code> is shorter than <code>range(4)</code>). Note that if jimmy is on the boundary (not <code>R&lt;1</code>) or a ghost has landed on jimmy (not <code>1&gt;((x,y)in H</code>), then we skip the for loop and so we return <code>1</code> if jimmy has escaped, or <code>0</code> if a ghost got him. </p>

<pre class="lang-python prettyprint-override"><code>    J=z,w=x+d,y+e;d,e=-e,d
</code></pre>

<p><code>d,e</code> is the offset to jimmy's next position, starting as <code>0,1</code>; and each time through the loop, <code>d,e=-e,d</code> rotates us through the 4 possible orthogonal positions.</p>

<pre class="lang-python prettyprint-override"><code>    R|=M[w][z]&gt;(J in U)&lt;f(J,H,M,U+[J])
</code></pre>

<p><code>R</code> gets set to truthy if jimmy's next position <code>J</code> is not an on "object" (<code>M[w][z]&gt;0</code>), AND we haven't visited this position before (<code>1&gt;(J in U)</code>), AND via recursion, jimmy can escape starting at position <code>J</code> with ghosts at <code>H</code> (<code>0&lt;f(J,H,M,U+[J])</code>).</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>94</s> 89 bytes</h1>

<pre><code>Ø.,U$;N$+®ŒṬ€×8+®ŒṬ¤+&amp;7$Ç€Ẹ
&amp;Ɱ8,2ŒṪ€Ḣ©_¥/Ṡ01¦Ạ¡€+ƲṪŒṬḤ+&amp;13$ÑÇFṀ&gt;8Ʋ?
|Ø.¦4Z$⁺FṀ=12ƲÇFṀ&gt;8Ʋ?
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///wDD2dUBVrPxXtQ@uOTnq4c82jpjWHp1vAeIeWaKuZqxxuB4o@3LWDS@3RxnUWOkYgqVUgoR2LDq2MP7RU/@HOBQaGh5Y93LXg0EKguPaxTUAFYAMe7gCaYGiscnji4Xa3hzsb7CyObbLnqgFae2iZSZTKo8ZdIFFbQ6Njm5AU/P//cPeWhzu6HjXM0VNOV8h/1DA3E2g1CDXMBCIjrYc75v2P5oo21FHAgmJ1uKINdBTgyAjORpExQpaEysCVWhCvh5A9KCiWKxYA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>A full program that takes an integer matrix as its argument, with 0 as space, 1 as wall, 2 as ghost and 8 as Jimmy. Returns 1 for escape and 0 for no escape.</p>
</div>
<div id="pu3" class="pu"><h1>Javascript (ES6), 208 bytes</h1>
<p>Recursive, depth-first search. A breadth-first approach would be probably faster, but less golfy.
Input: a multi line string, using <code>1</code> for ghosts, <code>4</code> for solid objects, <code>6</code> for Jimmy and <code>2</code> for empty space.</p>
<pre class="lang-js prettyprint-override"><code>f=(s,l=-~s.search`
`,j=s.search(6),g=[...s],x=j%l)=&gt;j&lt;l|!g[j+l]|!x|x&gt;l-3||(g[j]=6,![...g].some((a,i)=&gt;a&amp;1&amp;&amp;(g[--g[i],t=i%l,i+=t&lt;x?1:t&gt;x?-1:i&lt;j?l:i&gt;j?-l:0]|=1,i==j))&amp;&amp;[l,-l,1,-1].some(d=&gt;2==g[d+=j]&amp;&amp;f(g,l,d)))
</code></pre>
<p><em>Less golfed</em></p>
<pre class="lang-js prettyprint-override"><code>// using parameters with default values instead of declared variables

f = (s,  // input board (as a string at first call, then as an array)
     l = -~g.search('\n'), // line size +1, that is distance to next line
     // at first call it is calculated, for recursive calls is passed
     j = g.search(6), // position of jimmy in grid
     // at first call it is calculated, for recursive calls is passed
     grid = [...s], // modifiable copy of board (converted to char array)
     x = j % l, // x position of jimmy, always obtained from j
) =&gt;
{
  // first, check if Jimmy is out
  if (j&lt;l | !grid[j+l] | !x | x&gt;l-3) // top,bottom,left,right border
  {
    return true
  }
  // move all ghosts and check if some ghost can take Jimmy
  // the loop is on a copy of grid, so I can safely modify grid during the loop
  var taken = [...grid].some( // check all ghosts
        (a,i) =&gt; a &amp; 1 &amp;&amp; ( // is it a ghost?
         --grid[i], // remove ghost from grid, as it will move
         t = i % l, // x position of ghost
         // move ghost towards Jimmy
         i += t &lt; x 
           ? 1 
           : t &gt; x 
             ? -1 
             : i &lt; j 
               ? l 
               : i &gt; j 
                 ? -l 
                 : 0,
         grid[i] |= 1, // put ghost on grid in its new position
         i == j // return true if it reached Jimmy
  )
  return !taken &amp;&amp; // if taken return false immediately
  // else recurse
  [l,-l,1,-1].some( // try to move Jimmy in all directions
    d =&gt; (
      d+=j, 2==g[d] &amp;&amp; f(grid, l, d))
    )
  )
}
</code></pre>
<p><strong>Test</strong></p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>cases=['##########\n......g...\n#.o.......\n#.....g...\n##########\n'
,'#.\nog\n'
,'#########\n.........\n....g....\n...g.g...\n....o....\n...g.g...\n....g....\n.........\n'
,'##########\n#g.o.....#\n########.#\n#........#\n#.########\n#........#\n########.#\n#........#\n#.########\n'
,'.....\n..g..\n.go..\n.....\n.....'
,'###.......\n\#o#......g\n###.......\n'
,'#####.....\n#o..#....g\n#####.....\n'
,'g#.#\n.#.#\n\.#.#\n.#o#\n.#.#\n.#.#\ng#.#\n'
,'##########\n#...o....g\n##########\n'
,'#.########\n#g.......#\n#....g...#\n#......g.#\n#..g.....#\n#....g...#\n#........#\n#....g...#\n#..g....o#\n##########\n'
]


f=(s,l=-~s.search`
`,j=s.search(6),g=[...s],x=j%l)=&gt;j&lt;l|!g[j+l]|!x|x&gt;l-3||(g[j]=6,![...g].some((a,i)=&gt;a&amp;1&amp;&amp;(g[--g[i],t=i%l,i+=t&lt;x?1:t&gt;x?-1:i&lt;j?l:i&gt;j?-l:0]|=1,i==j))&amp;&amp;[l,-l,1,-1].some(d=&gt;2==g[d+=j]&amp;&amp;f(g,l,d)))


cases.forEach(x=&gt; (
  console.log(x,
    f(x.replace(/#/g,4).replace(/\./g,2).replace(/o/,6).replace(/g/g,2|1)))
))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, 199 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def g(I,G,W,w,h):
 u,v=I.real,I.imag;R=1-(w-1&gt;u&gt;0&lt;v&lt;h-1);H=[z+cmp(u,z.real)+cmp(v,z.imag)*(u==z.real)*1jfor z in G]
 for d in(R&lt;1&gt;(I in H+W))*range(4):J=I+1j**d;R|=(J in W)&lt;g(J,H,W+[I],w,h)
 return R
</code></pre>

<p><a href="https://tio.run/##lVRNj6JAED3bv6IzHOhGJIPjzEFtL5ugmOzFMfHAciAjNhgEw4fKZP@72wUNMs7sbqYTK1WP16@LR5fHMg@SeHi9bv0d5sTW5/pGP@sBHSNc6CdmG6nvRbpthAePT1bMHJDzwJwVs8fpaRoMTDpZMOe9/3Y4kkJ/r8i0qk6igj1UIwVj8olm7ndJit9xGOO5izAUW1GQ1dScERvgRX9DqZZ6MffJiI6XzO6be03bTla/GVkCY0OnnCz1hb7pO7ZbNYtw6udFGuPV9XVtMlVVlXYho1pc/JBiJHUF6Q1tl9iI0Ot6WCkYKOESePogKRVha6NRZbyWgzL5Amt59ZLSo7tuFS57VNq@IG12QXrjdtD/cOvTrMqbpnUOkSdNU6jTljWUbbV2JTLl6IZK7s2dhivObrkSldzqdTm0aXRC0i3hqWQ/35vTWMs/fTTrpf5oXSNvNkj7W3N4nfK/Ej6jFTdR7g@GuXkTlzv3f3rHHyQXg9PLWG5kxyjMiforVinqiTvKIj8mmfPoUr3KBLphzqVfypm4wNWur/2ZAlDegICGO1VRGcuc0nUurosVHIVZjpMdPntRlKHe/Fta/GstHiRZLsT23xJLOmLi/YTeMjwcStSTM7lv/lMQOqZhnOOHdVrkQfmAQC0DNUdMrY7F4EF4gjByx7hmc6J1/M0olTKNmOVFmf9RzAIxC8QsELNGEJ4hvPxD9voH" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Rewrite of <a href="https://codegolf.stackexchange.com/a/195091/78410">Chas Brown's solution</a> using complex numbers.</p>

<p>All the coordinates are represented as a complex number <code>x+y*1j</code>. <code>I</code> is Jimmy's position, <code>G</code> is the list of ghosts and <code>W</code> is the list of walls. <code>w</code> and <code>h</code> are the width and height of the board, respectively.</p>

<p>The output values and the algorithm are the same as the linked solution.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/194974/">194974</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




