<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282109</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>189</td><td>JavaScript ES6</td><td>250603T233420Z</td><td><a href="https://codegolf.stackexchange.com/questions/282109/solve-tango-puzzle/282114#282114">Arnauld</a></td></tr>
<tr d-ix="1"><td>264</td><td>Julia</td><td>250604T182610Z</td><td><a href="https://codegolf.stackexchange.com/questions/282109/solve-tango-puzzle/282121#282121">Sort of </a></td></tr>
<tr d-ix="2"><td>599</td><td>Python3</td><td>250603T223415Z</td><td><a href="https://codegolf.stackexchange.com/questions/282109/solve-tango-puzzle/282112#282112">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 189 bytes</h1>
<p>Expects <code>(m)(A)</code>, where <strong>m</strong> is a matrix of characters and <strong>A</strong> is a list of 5-tuples <code>[i,y,x,Y,X]</code> with <strong>i=0</strong> for <em>equal</em> and <strong>i=1</strong> for <em>different</em>.</p>
<p>Prints all solutions as matrices of characters (only one solution in practice, given the constraints of the challenge).</p>

<pre class="lang-javascript prettyprint-override"><code>m=&gt;g=A=&gt;m.some((r,y)=&gt;r.some((c,x)=&gt;c&lt;g?r[g(A,r[x]=&quot;M&quot;),g(A,r[x]=&quot;S&quot;),x]=c:!A.every(([i,V,H,Y,X])=&gt;Y-y|X-x|m[V][H]==c^i)|/(\w)((\D*\1){3}|,\1,\1)/.test(r+0+m.map(r=&gt;r[x]))))||console.log(m)
</code></pre>
<p><a href="https://tio.run/##hZJRT8IwEMff@RSTp1aP2rXbi3EYEh946VMTAxkzIXMuGOfMIAhxfnbsdaNsaHRZSn7/43b3v@vLcrtcp9XqfTN6K5@yw3N0KKJxHk2iccHWZZERUsGeRuOqpRR2htLb/K6KczKBKt4l0VANKZxIGzK/6c3FhGXbrNoTEq/gAaYwh1li0uejfT0b7eoifkjiaRJF6eOK1tdk8UEJWdxfLnz6Kb9qWPjmpddsk603pLriVwUrlu@kMu2YQtQ8dZ2Wb@vyNWOvZU4Kengm8cDzYsbYkCmtFRsmcBSUOZjqCPpXQZ@ndAWmldLmo4OENpU4eD744AnwE7AoESWIJsnHuMC4wLhFiUfQokAUDiViANJhgHiMBmAPgfUHXet00HGurI8zG7pn1Ci92TCTovTZP3qzsbPSfeeicSZb59aKRGydS4xLZ0Y0@E/3jJ11/4ugme4JCvv/O6URut1zsNs47s0Ha4E7MyE2G7qtcpz8MRo06Dur9mPcLZnjKLjbG8c1nnZuS7WVLdpo6DC05d3UmvLuRoRYOXQ3IviBoSsUYhtdtIfo3iaj4VQO3w" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Method and performance</h3>
<p>This simply makes a guess on each empty cell but aborts as soon as an inconsistent state is detected, so it's still pretty fast (a few milliseconds for the test cases).</p>
<p>It's worth noting that there are only 11,222 valid grids<sup>(1)</sup>. Without any clue given in the input, this code can generate all of them in <a href="https://tio.run/##tY7BSsQwEIbvfYrY04ydZnfx5ppKwcNe7EVYdkkjlJgtlWazpGVtMT57DSL4BH4MDN8Pw/zvzbUZtO8uY352b2Y5icWKohWlKCwfnDUAnmYUhf81TVM0/dA@etlCSV5OSqTPKdKfvUSLW9/flNxcjZ8BZEd72tGRDiqeH/M5HPIpWLlXcqeE0K8dhhXUHwhQP93WG/y8@wpUb@Lgio9mGMFn68xy21zAxzrxEUZCyLJq6c3IKibYepucQCaMSc55yn9IFf1HkCgEqTDR7jy43vDetVDhdvkG" rel="nofollow noreferrer">~15 seconds on TIO</a>.</p>
<p><em><sub>(1) as confirmed <a href="https://github.com/zmxv/tangocount" rel="nofollow noreferrer">here</a></sub></em></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>m =&gt;                            // outer function taking m[]
g = A =&gt;                        // inner recursive function taking A[]
m.some((r, y) =&gt;                // for each row r[] at index y in m[]:
  r.some((c, x) =&gt;              //   for each character c at index x in r[]:
    c &lt; g ?                     //     if this cell is still empty (c is &quot;.&quot;):
      r[                        //       process two recursive calls:
        g(A, r[x] = &quot;M&quot;),       //         one with a moon inserted
        g(A, r[x] = &quot;S&quot;),       //         one with a sun inserted
        x                       //       then restore r[x] ...
      ] = c                     //       ... to &quot;.&quot;
    :                           //     else (c is &quot;M&quot; or &quot;S&quot;):
      !A.every(                 //       for each 5-tuple ...
        ([i, V, H, Y, X]) =&gt;    //       ... [i, V, H, Y, X] in A[]:
        Y - y | X - x |         //         tests whether (X, Y) matches (x, y)
        m[V][H] == c            //         and m[V][H] either does or doesn't
        ^ i                     //         match c, according to i
      ) |                       //       end of every()
      /(\w)((\D*\1){3}|,\1,\1)/ //       look for 4 identical symbols anywhere
      .test(                    //       or 3 consecutive identical symbols in:
        r +                     //         either the current row
        0 +                     //         (use 0 as a separator)
        m.map(r =&gt; r[x])        //         or the current column
      )                         //       end of test()
  )                             //   end of inner some()
)                               // end of outer some()
|| console.log(m)               // if falsy, print the matrix
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://julialang.org" rel="nofollow noreferrer">Julia</a>, 264 bytes</h1>
<pre><code>f(G,E,X)=while true
A=map(g-&gt;g∈&quot;MS&quot; ? g : rand(['M','S']),G)
(M,N)=map(Z-&gt;all(map(p-&gt;A[p[1]...]==A[p[2]...],zip(Z[1:2:end],Z[2:2:end]))),(E, X))
(P,Q)=map(D-&gt;all((A.!=circshift(A,D[1])).||(A.!=circshift(A,D[2]))),[(1,2),((0,1),(0,2))])
M&amp;&amp;!N&amp;&amp;P&amp;&amp;Q&amp;&amp;(return A)end
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVE9T8MwEBUb8q84OiR30jWi6YIqpSiCqpMRCIaKkCFqndZVMJFJBOJj5z-wsPCjYOSXcE1hQUi27t3d87Of7_V93Va2eHt7b5uyf_C5s1vilCc8o-RuZSsDjW-NSpProsZlf7z8ennp6fMeHMISRuALt8As1CGH52FOPCWFmk-oo1_2x0VV4QbW_XGa1dkgj6IoT5INjjvMD1aI2WAUj4xb5HyZxT-QiBgnDDMSzVM-22oebzUxjfaSufXz25UtG0z5WLSJoqenfzpxp5XhgGORxH0eSNiXhHJSOgj2ToLgNAjOggC9aVrvICV5wfZDPj4vIIFeT0xrpaNIRVpLptRUyrpovL1_PFoV_hlbtzAlw1AWqfLGA1qGyjpDYB0Y114bXzQGb-vKNnjBEF65UMxBx10zzP8Qu7MKYJpZXudy3VxJd6E2W00k_7EEGP8JQ8rVrCMMN2ZBQiwlVXvrGvwdMG0d_o7-Gw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>I checked the list of standard loopholes and this wasn't in there, so I hope it's ok. This function randomly fills the blanks of the grid with Ms and Ses, checking each time to see if the rules are satisfied, and returning if so.</p>
<p><code>M</code> is true if all of the <code>=</code> rules are satisfied; <code>N</code> is <em>false</em> if <code>x</code> is satisfied, <code>P</code> is true if no vertical triples exist, and <code>Q</code> is true if no horizontal triples exist.</p>
<p>The grid is input as a <code>Matrix{Char}</code> and the rules <code>=</code> and <code>x</code> are just a list of tuples. If I could &quot;pre-zip&quot; them into 2-tuples of 2-tuples, it would save a large number of bytes, but in the spirit of the question I'm taking them as a flat list.</p>
<p>Because of the slow execution time (exponential with the number of blanks in the grid), the link above demonstrates a 3x3 example with only 3 blanks.</p>
</div>
<div id="pu2" class="pu"><h1>Python3, 599 bytes</h1>
<pre class="lang-py prettyprint-override"><code>C=lambda x:[]if[]==x else[x[:2]]+C(x[2:])
E=enumerate
def f(a,b,c):
 A,B=dict(C(a)+[(k,j)for j,k in C(a)]),dict(C(b)+[(k,j)for j,k in C(b)])
 q,S=[(c,[(x,y)for x,r in E(c)for y,v in E(r)if'.'==v])],[]
 for c,l in q:
  if[]==l:return c
  (x,y),*l=l
  for t in'SM':
   e=eval(str(c));e[x][y]=t
   if all(all(m*3 not in''.join(k)for k in e+[*zip(*e)])for m in'SM')and all('.'in j or j.count('M')==j.count('S')for j in e+[*zip(*e)])and e not in S:
    F=0
    if(x,y)in A:X,Y=A[(x,y)];F=e[X][Y]in['.',t]
    elif(x,y)in B:X,Y=B[(x,y)];F=e[X][Y]=='.' or e[X][Y]!=t
    else:F=1
    if F:q+=[(e,l)];S+=[e]
</code></pre>
<p><a href="https://tio.run/##jVPJbtswED1XX8HmItJmBW0GCgU8JEF9Uy@8JGCJQrapVo4sObIS2P15d7gosmMfIsN4muXNvCFH20P/t22S79vueHxgdbFZrAq0z4SsSiEZ2yNV75TYiyyWcvqA9yLOJPF@MNW8blRX9MpbqRKVuKALuiSZh@7oPVtVyx4/4IJMBX6ma1K2HVrTZ1Q1SHsloS5jcTVjARkeeqGcCbykAu/pwSTsaacTfuClMQ/0zZodqUo/8Bl7k0RSIT2kw0ta6/ALaEJ2mDrrVP/aNWgJLlOVTmpWg6Hze8j2ee7rfKSYeitqvOs7aEZu4QSkOEjW61hVoqKusf5vJglqWsP0g3VbNfjZSDODqKmY/Ku2eKJgHu3duA6kaFamBIiGvDXSwwfL9rXpsQ9hxt4t7tujuainSyjXG3GjGc1ZaLAqzXAQuMse6RO7s0cob@dMiUcpnmTVCOhNe2nyVT0y7g3j/oLBGBC0UGd/tWdh1iObs8g1RvPsZQrXpmgNbA6vSh53EUM3NzdekHOeB14ewJN7/AS4dXIv4HnOA09ne7sYWV5uckwKBwIgVAnAmXNjQRVTizte4niBeUbg8AMRmvkhZnnpO49fplwFw9MfQN/@XrRFt8I7@Aa@uDUTYlJJs1uVvqWyqnvV4Z9toyjaBbttXcEN/2p8QqSt8kf1V8roFLtcm2KL3aLRHSGet@0q2JKRVmKBIxoRinBsIRkg1p8GBGMbNBDRxEJqnYmF1DKMlVpIrDMdILKgi46jRwQep8n/5k/SkFxVGA8ikhPQ/bTCxAaTIRiP8sdO8Sc7hVZoNEBoazqY2dIOQjvSOURGkysTWjGhlRbas3AQDRCeNXTO2QnEA4QnfZ2KdID00poNkJxZkYX45F5mRvZ4WsknT@t8OS4X6HQrQtsovBRxLtDNMAOw@5dcW7WPWzUunh7@dJbUzHL8Dw" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282109/">282109</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




