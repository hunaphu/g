<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282109</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>599</td><td>Python3</td><td>250603T223415Z</td><td><a href="https://codegolf.stackexchange.com/questions/282109/solve-tango-puzzle/282112#282112">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 599 bytes</h1>
<pre class="lang-py prettyprint-override"><code>C=lambda x:[]if[]==x else[x[:2]]+C(x[2:])
E=enumerate
def f(a,b,c):
 A,B=dict(C(a)+[(k,j)for j,k in C(a)]),dict(C(b)+[(k,j)for j,k in C(b)])
 q,S=[(c,[(x,y)for x,r in E(c)for y,v in E(r)if'.'==v])],[]
 for c,l in q:
  if[]==l:return c
  (x,y),*l=l
  for t in'SM':
   e=eval(str(c));e[x][y]=t
   if all(all(m*3 not in''.join(k)for k in e+[*zip(*e)])for m in'SM')and all('.'in j or j.count('M')==j.count('S')for j in e+[*zip(*e)])and e not in S:
    F=0
    if(x,y)in A:X,Y=A[(x,y)];F=e[X][Y]in['.',t]
    elif(x,y)in B:X,Y=B[(x,y)];F=e[X][Y]=='.' or e[X][Y]!=t
    else:F=1
    if F:q+=[(e,l)];S+=[e]
</code></pre>
<p><a href="https://tio.run/##jVJNb9swDD3Pv0LrxVKiGf4KMLjQoS2am3fRpYUmDI4jb04dO7XdItmfz6gPz@naw1wULyQfyUeKh9P4q2uTr4f@fL5jTbHfbAt0zISsKyEZOyLVDEocRRZLubzDRxFnknj3TLUve9UXo/K2qkIVLuiGliTz0A29Zdu6HPEdLshS4Ce6I1XXox19QnWLtFcS6hibDxkbYHjomXImcEkFPtKTIRxprwn3uDTmib5asyd15Qc@Y6@SSCqkh3S4pI0OP4MmZIdpsl6NL32LSnCZqnTRsAYMzR@B7fPc13ykmHotGjyMPTQj17ABKU6SjTpWV6hoGqz/94sEtZ3J9INdV7f4yUgzg6ilWPyuD3ihYB7t3bsOpGi3pgSIBt4O6eGDsntpR@xDmLG/Fvftat7V0yWU64240YzWLDRYV2Y4CNxkD/SR3dgVyus1U@JBikdZtwJ601EavmrmjFuTcfsugzFI0EKd/dnuwpxHtmaRa4zW2fMSnk3RBrI5/FTyPEQMXV1deUHOeR54eQBf7vEL4NbJvYDnOQ88zfaGGNm83HAMhUMCIFQJwJlzY0EVU4u7vMTlBeabgcMfiNCZ/8RMnj7ksfux6Yp@iwe45U/uXIRY1NLcSK23XdXNqHr8rWsVRUMwHJoaXup76xMibZWfavygjKbYI9kXB@wOhg6EeN6hr@G157QKCxzRiFCEYwvJBLE@cQjGNmggoomF1DoTC6nNMFZqIbHOdILIgi46jx4R@Jwm/4u/SEPyocJ4EpFcgO6nFSY2mEzBeJY/d4r/s1NohUYThLamg5Ut7SC0I72FyGhyZUIrJrTSQrsLB9EE4ZuGzrm6gHiC8KKvU5FOkL63VhMkb6zIQnzxLisje95WYrZ1/gM" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282109/">282109</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




