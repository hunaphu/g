<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::274532</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>061</td><td>R</td><td>240822T213313Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/275095#275095">Dominic </a></td></tr>
<tr d-ix="1"><td>6345</td><td>Wolfram Language Mathematica</td><td>240802T012857Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274629#274629">138 Aspe</a></td></tr>
<tr d-ix="2"><td>028</td><td>PARI/GP</td><td>240801T020553Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274607#274607">alephalp</a></td></tr>
<tr d-ix="3"><td>084</td><td>R</td><td>240801T191945Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274621#274621">int 21h </a></td></tr>
<tr d-ix="4"><td>nan</td><td></td><td>240801T081931Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274611#274611">Sohang C</a></td></tr>
<tr d-ix="5"><td>021</td><td>Kap</td><td>240801T084855Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274613#274613">Elias M&</a></td></tr>
<tr d-ix="6"><td>035</td><td>Ruby</td><td>240729T094539Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274550#274550">G B</a></td></tr>
<tr d-ix="7"><td>011</td><td>M</td><td>240729T183151Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274562#274562">caird co</a></td></tr>
<tr d-ix="8"><td>021</td><td>APLDyalog Unicode</td><td>240729T043716Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274543#274543">akamayu</a></td></tr>
<tr d-ix="9"><td>027</td><td>Charcoal</td><td>240729T063814Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274546#274546">Neil</a></td></tr>
<tr d-ix="10"><td>057</td><td>Python</td><td>240729T004501Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274535#274535">shape wa</a></td></tr>
<tr d-ix="11"><td>043</td><td>Raku Perl 6 rakudo</td><td>240729T001816Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274533#274533">bb94</a></td></tr>
<tr d-ix="12"><td>6375</td><td>Vyxal s</td><td>240729T003234Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274534#274534">lyxal</a></td></tr>
<tr d-ix="13"><td>043</td><td>JavaScript Node.js</td><td>240729T010514Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274539#274539">l4m2</a></td></tr>
<tr d-ix="14"><td>014</td><td>J</td><td>240729T005525Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274538#274538">Bubbler</a></td></tr>
<tr d-ix="15"><td>024</td><td>K ngn/k</td><td>240729T004954Z</td><td><a href="https://codegolf.stackexchange.com/questions/274532/rabinowitz-wagon-pi-formula/274537#274537">att</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>74</s> 61 bytes</h1>
<pre class="lang-r prettyprint-override"><code>`~`=\(n,m=1)`if`(m&gt;n,1,(a=n~m+1)[1]*(2*m+1)+m*a*0:1)*1:2^!m-1
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3bRPqEmxjNPJ0cm0NNRMy0xI0cu3ydAx1NBJt8-pytQ01ow1jtTSMtEBM7VytRC0DK0NNLUMrozjFXF1DiCHrihMLCnIqNYBSBjppmhDBBQsgNAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Recursive approach to construct the Rabinowitz-Wagon formula as stated in the question.</p>
<p>Outputs the (0-based) n-th non-simplified fraction of the sequence as two integers in the order (denominator, numerator).</p>
<p><strong>Ungolfed:</strong></p>
<pre><code>f=function(n){
    g=function(n,m=1){
        if(m&gt;n)c(1,1) else {
            x=g(n,m+1)
            a=x[1];b=x[2]
            c(2*m*b+b+m*a,2*m*b+b)
        }
    }
    g(n)*2:1
}
</code></pre>
<hr />
<h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>62</s> <s>60</s> 54 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(n){a=1
if(n)for(i in n:1)a=a*i+(T=T*2*i+T)
c(2*a,T)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3zWI08jSrE20NuTLTgKy0_CKNTIXMPIU8K0PNRNtErUxtjRDbEC0jICNEkytZw0grUSdEsxaie11xYkFBTqWGgZWhgU6aJkRwwQIIDQA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/274535/95126">shape warrior t's answer</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <del>63</del> 45 bytes</h1>
<p>Saved 18 bytes thanks to @att</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##RYzNCsIwEITveYqhhaJ1tU3vlQp9AA/eQg5RWiz0B9J4kJBnj2tB3MMwfN8yk3HPbjJueJjYo0b0FcnQLq5pLtaat/I@JVNX6UEG8iWZEDJK9YmrDFkUu/xqh9mBV2C79TW6Ff1iMdcSbkFV5ntxM/exU34m9GrWgfCtklgGjaKAQLuobUZ1/Kik1oQExzMSwkYqrX@4YCbA9xccbDwDQsqTWfwA" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>{2,1}Dot@@Array[{{#,a=2#+1},{0,a}}&amp;,#].{0,1}&amp;
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##bZDNaoQwGEX3PsVlCmVqbUddFqZQKrPrz6K7EIp1klYwicQ4tEie3X4ahSl0I3gT7jk3qnRfQpWurspx3MaFkLUWoAwU2vob0liU@KxPQkPHV1GID8Y@M/3OcbfHMOgEOQCNa2Q@wZCe//so2saPRrW9C8WtNce@cjAyMCrRQVqjoPcZnIEiynLnRT4tN5gKsAgH0xxZYRxxhjxBugAJlOCt/GgEO1fkdEp6ynM@eTy0bfMzW9DOsllHEnXKTqJyNJfqMk8ScoX@Y8Nxu2Cn2ldbazdXWNH1jevmZ1v25Cl1BbNJRZKUD1YZvVPqOXY72lUYNtcwQRdZxsl8g5t7bBLMSc75Gu/@ZPSZVlKQ4ILaLsfxFw" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>(*Define the matrix for a given n*)
matrixForN[n_] := {{n, 2   n + 1}, {0, 2   n + 1}}

(*Compute the product of matrices from n=1 to m*)
productOfMatrices[m_] := 
 Fold[Dot, {{2, 0}, {0, 1}}, Table[matrixForN[n], {n, m}]]

(*Apply the final matrix to the vector {0,1}*)
f[m_] := productOfMatrices[m] . {0, 1}

(*Print the results for n=1 to 20*)
Table[{n, f[n]}, {n, 1, 20}] // 
 Do[Print[ele[[1]], &quot; -&gt; &quot;, ele[[2]][[1]], &quot;/&quot;, ele[[2]][[2]]], {ele, #}] &amp;
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 28 bytes</h1>
<pre><code>n-&gt;(z=2)+sum(i=1,n,z/=2+1/i)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMHiNAXbpaUlaboWe_J07TSqbI00tYtLczUybQ118nSq9G2NtA31MzUhSm6qpOUXaeQp2CoY6CgYWuooFBRl5pUABZQUdO2ARJpGnqYmVO2CBRAaAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A port of <a href="https://codegolf.stackexchange.com/a/274550/9288">@G B's Ruby answer</a>.</p>
<p><span class="math-container">\$0\$</span>-indexed. Returns a rational number.</p>
<hr />
<h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 43 bytes</h1>
<pre><code>n-&gt;prod(i=0,n,[i+2*!i,!!i*k=2*i+1;0,k])[,2]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMGSNAVbhaWlJWm6Fje183TtCoryUzQybQ108nSiM7WNtBQzdRQVM7WybY20MrUNrQ10smM1o3WMYqFaVNLyizTygEYY6igYGegoFBRl5pUABZQUdO2ARJpGnqamJkTtggUQGgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><span class="math-container">\$1\$</span>-indexed. Returns a column vector of numerator and denominator.</p>
<p>Using the fact that composition of linear fractional transformations (<span class="math-container">\$x\mapsto\frac{ax+b}{cx+d}\$</span>) corresponds to matrix multiplication.</p>
<p>The <span class="math-container">\$n\$</span>-th output is <span class="math-container">\$\begin{bmatrix}2&amp;0\\0&amp;1\end{bmatrix}\begin{bmatrix}1&amp;3\\0&amp;3\end{bmatrix}\cdots\begin{bmatrix}n&amp;2n+1\\0&amp;2n+1\end{bmatrix}\begin{bmatrix}0\\1\end{bmatrix}\$</span>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 84 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(n,m=0:n*2+1)cbind(Reduce(\(a,b)a*b+2*prod(1:((b-1)/2)),c(2,m),,,T)[-1],cumprod(m))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3Q2I08nRybQ2s8rSMtA01k5My81I0glJTSpNTNWI0EnWSNBO1krSNtAqK8lM0DK00NJJ0DTX1jTQ1dZI1jHRyNXV0dEI0o3UNY3WSS3PBinI1NSFmL03TMDSAshcsgNAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>An anonymous function that takes an integer <span class="math-container">\$n\$</span> and outputs the first <span class="math-container">\$n+1\$</span> fractions of Rabinowitz-Wagon ğœ‹-formula as two columns side by side - the numerator and the denominator, respectively.</p>
</div>
<div id="pu4" class="pu"><p><strike>## APL, 36 bytes</strike></p>
<p><strike>This is a function that takes <code>n</code> as input and outputs a pair of integers representing the numerator and denominator of the answer:</strike></p>
<p><strike><code>{{âºÃ—âµ+âµ[2]0}/(âŠ‚2 1),(âŠ¢,1+2âˆ˜Ã—)Â¨â³âµ}</code></strike></p>
<h2>APL, 32 bytes</h2>
<p><strong>Updated Solution:</strong>: <code>â•â†{âºÃ—âµ+âµ[2]0}/(âŠ‚2 1),(âŠ¢,1++â¨)Â¨â³â•</code> - I converted from a function to stdin &amp; stdout, and used suggestion by <a href="https://codegolf.stackexchange.com/users/121128/akamayu">akamayu</a> (converted <code>2âˆ˜Ã—</code> â†’ <code>+â¨</code> to save a byte).</p>
<p><a href="https://tio.run/##SyzI0U2pTMzJT////1Hf1EdtE6of9e46PP1R71ZtII42ijWo1dd41NVkpGCoqQNkLNIx1AbKrNA8tOJR72aglv//jQE" rel="nofollow noreferrer" title="APL (Dyalog Unicode) â€“ Try It Online">Try it online!</a></p>
<p>I'll try to shorten it by using more tacit style to remove named arguments - any suggestions are welcome ğŸ™‚.</p>
</div>
<div id="pu5" class="pu"><h2>Kap: 21 characters</h2>
<pre><code>(1+)â›Ã—/âŒ½2,Ã·âˆ˜(1+2Ã—)1+â³
</code></pre>
<p>This function takes <code>n</code>, and returns a rational number. This takes advantage of the built-in support for rational numbers in Kap, where dividing integers always yields a rational. To convert the result to floating point, one can add <code>0.0</code> to the result.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>38</s> 35 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n{(z=2)+(1..n).sum{|x|z/=2+1r/x}}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1y6vWqPK1khTW8NQTy9PU6@4NLe6pqKmSt/WSNuwSL@itvZ/gYKpXklmbmqxXm5igYZamuZ/AA" rel="nofollow noreferrer" title="Ruby â€“ Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/m" rel="nofollow noreferrer">M</a>, 11 bytes</h1>
<pre><code>Rá¸¤â€˜Ä°Ã—RÃ—\Sâ€˜á¸¤
</code></pre>
<p><a href="https://tio.run/##y/3/P@jhjiWPGmYc2XB4etDh6THBQDZQ5H@QgfXh9kdNa/7/NwUA" rel="nofollow noreferrer" title="M â€“ Try It Online">Try it online!</a></p>
<p>Interestingly enough, the Jelly equivalent (which doesn't have rational number support) is <a href="https://tio.run/##y0rNyan8///hjiWPGmYc2XB4uubh6THBQDZQ5H/Q4fZHTWuOTnq4cwaQznrUMJfr/39TAA" rel="nofollow noreferrer">only 1 byte longer</a>. The TIO link demonstrates the results for each input <span class="math-container">\$0\$</span> to <span class="math-container">\$n\$</span>.</p>
<h2>How it works</h2>
<pre><code>Rá¸¤â€˜Ä°Ã—RÃ—\Sâ€˜á¸¤ - Main link. Takes an integer n on the left
R           - Generate the range [1, 2, ..., n]
 á¸¤          - Unhalve; [2, 4, ..., 2n]
  â€˜         - Increment; [3, 5, ..., 2n+1]
   Ä°        - Inverse; [1/3, 1/5, ..., 1/2n+1]
     R      - Range; [1, 2, ..., n]
    Ã—       - Multiply; [1/3, 2/5, ..., n/2n+1]
       \    - Scan by:
      Ã—     -   Product; [1/3, 1/3Ã—2/5, ...]
        S   - Sum; 1/3 + 1/3Ã—2/5 + ...
         â€˜  - Increment; 1 + 1/3 + 1/3Ã—2/5 + ...
          á¸¤ - Unhalve; 2 + 2Ã—1/3 + 2Ã—1/3Ã—2/5 + ...
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup> <strike>31</strike> <strike>27</strike><strike>24</strike> 21 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<p>It outputs the <span class="math-container">\$n\$</span>th term with the denominator comes before the numerator. Assumes <code>â•ioâ†0</code>. 24 -&gt; 21 bytes thanks to @att.</p>
<pre><code>âˆŠ2(Ã—âˆ˜(+â€)âŒ¿âŠ£@0,â¨Â¨1+Ã—)â³
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=e9Q3NTP/UdsEAwA&amp;c=ASYA2f/iiIoyKMOX4oiYKCvijYAp4oy/4oqjQDAs4o2owqgxK8OXKeKNsw&amp;f=S3/UNqH6Ue/Ww9sfdax41LMfyKxVeNQ7V6E4M7cgJzOtUiGtKDG5JDM/j@tR39SCAqByYwOuR20TNR51NannqSuop6Tm5edm5iWW5BcBeXmlualFUHZqcUlmbmJJaopCQaa6ps6j3qmHVhxakalzaIUG0DqgXR0zHvXsPbQiCyQHlMkCGp4OFEwDKgIyDbUf9W42NAYA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p><a href="https://razetime.github.io/APLgolf/?h=e9Q3NSDgUdsEYyOuR31TM/OBTAMA&amp;c=e9TRpXF4@qOOGRraj3obNB/1Ln3U0fWoZ7@Rg4HOo94Vh1YYagMlVmgCVTzq3QwA&amp;f=S3/UNqH6Ue/Ww9sfdax41LMfyKxVeNQ7V6E4M7cgJzOtUiGtKDG5JDM/j@tR20SNR11N6nnqCuopqXn5uZl5iSX5RUBeXmluahGUnVpckpmbWJKaolCQqa6p86h36qEVh1Zk6hxaoQG0A2hBx4xHPXsPrcgCyQFlsoAOSAcKpgEVAZmG2o96NxsaAwA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf! (24bytes)</a></p>
<p><a href="https://razetime.github.io/APLgolf/?h=e9Q3taDgUdsEYwMA&amp;c=e9TRpXF4@qOOGRraj3obNB/1Ln3U0fWoZ7/Go66mR72bjTR1gCQQrzi0wlDbCKiyd7MmAA&amp;f=S3/UNqH6Ue/Ww9sfdax41LMfyKxVeNQ7V6E4M7cgJzOtUiGtKDG5JDM/j@tR20SNR11N6nnqCuopqXn5uZl5iSX5RUBeXmluahGYramTqXNoxaPeqUCiY0Y6EKcdWpEJtMNA51HvZiMTAA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf! (27bytes)</a></p>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=qzZUMDo8/VFHV/Wj3l2Hp2s/6m141Lu19lHvUqDYo579hjqZOo96VxxaYagNVJf5qG3Co97NIBUA&amp;f=S3/UNqH6Ue/Ww9sfdax41LMfyKxVeNQ7V6E4M7cgJzOtUiGtKDG5JDM/j@tR20SNR11N6nnqCuopqXn5uZl5iSX5RUBeXmluahGYramTqXNoRfqjjhlph1ZkAs020HnUu9nQFAA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf! (31bytes)</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 27 bytes</h1>
<pre><code>ï¼®Î¸ï¼©ï¼¥Â²Î£ï¼¥âˆ¨Î¹âŠ•Î¸Î âŠ•âŠï¼¯ï¼¥Î¸â‡â€¹Î½Î»Î½âŠ—âŠ•Î½Â¬Î¹
</code></pre>
<p><a href="https://tio.run/##TYyxDoMwEEP3fkXGi5QurIztgtQCEv2BEE4CKVzgcqnUr09TuuDFluxnN1t2wfqcG9qStGkdkWHX9aXnhQRuNgo87QaVUUNaj9gxLEY15BhXJMGp7LVRPYcpOYFz0ac4dxuylcAHuxv1QibLH3hgjEBG@cIWu4c0@oKccdL699wGgUX/Vedc5evbfwE" rel="nofollow noreferrer" title="Charcoal â€“ Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Directly computes the numerator and denominator, inspired by @Bubbler's last approach.</p>
<pre><code>ï¼®Î¸                          Input as a number
    Â²                       Literal integer `2`
   ï¼¥                        Map over implicit range
        Î¹                   Current value
       âˆ¨                    Logical Or
          Î¸                 Input number
         âŠ•                  Incremented
      ï¼¥                     Map over implicit range
                Î¸           Input number
               ï¼¥            Map over implicit range
                   Î½        Innermost value
                  â€¹         Is less than
                    Î»       Inner value
                 â‡          If true then
                     Î½      Innermost value
                        Î½   Else innermost value
                       âŠ•    Incremented
                      âŠ—     Doubled
             âŠï¼¯             Append
                          Î¹ Current (outer) value
                         Â¬  Incremented
            âŠ•               Vectorised increment
           Î                 Take the product
     Î£                      Take the sum
  ï¼©                         Cast to string
                            Implicitly print
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.python.org" rel="noreferrer">Python</a>, <s>71</s> <s>70</s> <s>60</s> 57 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda n,q=1,p=1:n and f(n-1,q:=q*2*n+q,p*n+q)or(2*p,q)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NU4xDgIhEOzvFVsCcolQKQmtr7BBT5REFlix8C021-if_I0SuS0mmZnMzD7f-VEvCef5da9-3Hy23l5dPEwOUBarZLbKIDicwDMclSzGFqEFrorMDXkipkWWhfeCvacUwZM71pDwBiHmRBV2XRh8IkAICOTwfGJ6zc0Av8sSCti2wv-cAla2xFized9Ynv0C" rel="noreferrer">Attempt This Online!</a></p>
<p>Outputs the (0-indexed) nth term of the sequence as a (numerator, denominator) tuple.</p>
<p>Ungolfed algorithm:</p>
<pre class="lang-python prettyprint-override"><code>def f(n):
    numerator, denominator = 1, 1
    # i/(2i + 1) = n/(2n + 1), ..., 3/7, 2/5, 1/3
    for i in range(n, 0, -1):
        # multiply by i/(2i + 1)
        numerator *= i
        denominator *= 2 * i + 1
        # add 1 (p/q -&gt; (p + q)/q = p/q + q/q = p/q + 1)
        numerator += denominator
    return 2 * numerator, denominator
</code></pre>
<p>For n=3:</p>
<pre><code>  * 3/7     + 1      * 2/5       + 1       * 1/3        + 1         * 2
1 ----&gt; 3/7 --&gt; 10/7 ----&gt; 20/35 --&gt; 55/35 ----&gt; 55/105 --&gt; 160/105 --&gt; 320/105
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://raku.org" rel="nofollow noreferrer">Raku (Perl 6) (rakudo)</a>, <s>49</s> 43 bytes</h1>
<pre class="lang-perl prettyprint-override"><code>{2+2*[+] [\*] map {.FatRat/(2*$_+1)},1..$_}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lZHBToQwEIbjlacY1smGtktdMCYmFQ4efACvCE0PcDGshmUNhO2TeOGgD6VP49Blo8lGE0_9M5nvm2bm9a0xj7vx8-y27mFZJd45DHWPJonknWnvTaumLNDwALWI2EUQcwqXrHpqoClfymZbQoFaUdnYv-hiE6J2fIAukm2SFLj5htFPnCs4ClYD4ZqjH4ZutE-jrZSSswx17phYxDwTOWQPPAcCJbnTVC6HWTF_OWL20P6jef17834f2VN9bZ7h1LtyQ-37rq3C6w_xf-RGeW4VV2sYPAA6BXaQQEU7Z4oKW9PDAjUkKa2ok9PJLATYsYXyZsc4Ht4v" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a> <code>s</code>, 51 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 6.375 bytes</h1>
<pre><code>Æ›Æ›dâ€º/;Î d
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJzPSIsIiIsIsabxptk4oC6LzvOoGQiLCIiLCI3Il0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Bitstring:</p>
<pre><code>000001100001010101101101100001101101001010101111101
</code></pre>
<p>Ports the expanded formula from Bubbler's J answer.</p>
<h2>Explained</h2>
<pre><code>Æ›Æ›dâ€º/;Î dÂ­â¡â€‹â€â€âªâ¡âªâ âªâ¡âªâ€â€â€‹â¡â â¡â€Œâ¢â€‹â€â€âªâ¡âªâ âªâ¢âªâ€â â€âªâ¡âªâ âªâ¢â¢âªâ€â€â€‹â¡â â¡â€Œâ£â€‹â€âªâªâ â€âªâ¡âªâ âªâ¢â¡âªâ€â€â€‹â¡â â¡â€Œâ¤â€‹â€â€âªâ¡âªâ âªâ£âªâ€â â€âªâ¡âªâ âªâ¤âªâ€â€â€‹â¡â â¡â€Œâ¢â¡â€‹â€â€âªâ¡âªâ âªâ¢â£âªâ€â€â€‹â¡â â¡â€Œâ¢â¢â€‹â€â€âªâ¡âªâ âªâ¢â¤âªâ€â€â€‹â¡â â¡â€Œâ¢â£â€‹â€â€â€‹â¢â â¡â€ŒÂ­
Æ›         # â€â¡Over each n in the range [1, in]:
 Æ›   ;    # â€â¢  Over each m in the range [1, n]:
    /     # â€â£    m divided by
  dâ€º      # â€â¤    2m + 1
      Î    # â€â¢â¡  Product of each fraction
       d  # â€â¢â¢  Doubled
# â€â¢â£Summed by the s flag
ğŸ’
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 43 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>f=(n,p=q=1)=&gt;n?f(n-1,p*n+(q*=n-~n)):[p*2,q]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGCpaUlaboWN7XTbDXydApsC20NNW3t8uzTNPJ0DXUKtPK0NQq1bPN06_I0Na2iC7SMdApjoVqU0vKLNDJtDawzbYwMrLW1MzWT8_OK83NS9XLy0zXSNDI1NSEqYZYAAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Port of shape warrior t's answer</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.jsoftware.com" rel="noreferrer">J</a>, 14 bytes</h1>
<pre><code>2#.~1%2+1%]-i.
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FuJT0FdYU0BVsrIKWjYKBgBcS6egrOQT5uS0tL0nQt1hkp69UZqhppG6rG6mbqQQS3aXKlJmfkq9kppAGxobZCpp6CkUEFRHLBAggNAA" rel="noreferrer">Attempt This Online!</a></p>
<p>If we expand the formula entirely, we get <code>2 + 2*1/3 + 2*1/3*2/5 + 2*1/3*2/5*3/7 + ...</code>, which can be interpreted as a mixed base conversion of <code>[..., 2, 2, 2, 2]</code> in base <code>[..., 3/7, 2/5, 1/3]</code>.</p>
<hr />
<h1><a href="https://www.jsoftware.com" rel="noreferrer">J</a>, 19 bytes</h1>
<pre><code>2(*&gt;:)/@,1%2+1%1+i.
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FuJT0FdYU0BVsrIKWjYKBgBcS6egrOQT5uS0tL0nQtNhtpaNlZaeo76BiqGmkbqhpqZ-pBZDZqcqUmZ-Q7pKnZKWTqKRgZVEDEFyyA0AA" rel="noreferrer">Attempt This Online!</a></p>
<p>A straightforward implementation of the formula. Takes an arbitrary-precision integer, constructs the array that looks like <code>2 1/3 2/5 3/7</code>, and reduces from the right by <code>x * (1 + y)</code>.</p>
<h1><a href="https://www.jsoftware.com" rel="noreferrer">J</a>, 20 bytes</h1>
<pre><code>(&gt;:@+:#.0&amp;=,:2*!)@i.
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FuJT0FdYU0BVsrIKWjYKBgBcS6egrOQT5uS0tL0nQttmjYWTloWynrGajZ6lgZaSlqOmTqQaT2aHKlJmfkq9kpqNbpKxkqpAFZhtoKmXoKRgYVECULFkBoAA" rel="noreferrer">Attempt This Online!</a></p>
<p>Tried to be clever with some mixed-base magic:</p>
<pre><code>(1 + 1/3(1 + 2/5)) * 3*5 = 3*5 + 1*5 + 1*2
(1 + 1/3(1 + 2/5(1 + 3/7))) * 3*5*7 = 3*5*7 + 1*5*7 + 1*2*7 + 1*2*3
</code></pre>
<p>So the numerator can be computed by evaluating <code>[0!, 1!, 2!, 3!, ...]</code> in mixed base <code>[1, 3, 5, 7, ...]</code>. Then the denominator can also be represented using <code>[1, 0, 0, 0, ...]</code>. Might be useful in languages without rational number support.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 24 bytes</h1>
<pre><code>2 1*1(|+\|*)/+-\(1-)\!-:
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLszJSMNQy1KjRjqnR0tTX1o3RMNTVjFHUteLiSlMwAGJDIDYCYmMgNgFiUyA2A2JzAHt0DBU=" rel="noreferrer">Try it online!</a></p>
<p>Input <code>n</code>. Return the <span class="math-container">\$n\$</span>th term as an integer pair.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/274532/">274532</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




