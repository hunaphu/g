<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::276144</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>AArch64 machine code</td><td>250607T030425Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/282177#282177">鳴神裁四点一号</a></td></tr>
<tr d-ix="1"><td>039</td><td>AWK</td><td>241028T150842Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276369#276369">xrs</a></td></tr>
<tr d-ix="2"><td>028</td><td>Uiua</td><td>241028T021139Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276361#276361">noodle p</a></td></tr>
<tr d-ix="3"><td>054</td><td>J</td><td>241027T233154Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276358#276358">Conor O&</a></td></tr>
<tr d-ix="4"><td>075</td><td>JavaScript Node.js</td><td>241017T054212Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276174#276174">tsh</a></td></tr>
<tr d-ix="5"><td>049</td><td>JavaScript Node.js</td><td>241017T060415Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276175#276175">l4m2</a></td></tr>
<tr d-ix="6"><td>073</td><td>Python</td><td>241016T122302Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276156#276156">movatica</a></td></tr>
<tr d-ix="7"><td>099</td><td>Bash</td><td>241017T191033Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276182#276182">Ivan</a></td></tr>
<tr d-ix="8"><td>093</td><td>Java JDK</td><td>241016T133837Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276158#276158">mastaH</a></td></tr>
<tr d-ix="9"><td>079</td><td>JavaScript Node.js</td><td>241017T013857Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276172#276172">Jake</a></td></tr>
<tr d-ix="10"><td>024</td><td>Charcoal</td><td>241016T180034Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276163#276163">Neil</a></td></tr>
<tr d-ix="11"><td>026</td><td>Retina 0.8.2</td><td>241016T174935Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276162#276162">Neil</a></td></tr>
<tr d-ix="12"><td>070</td><td>C gcc</td><td>241016T131230Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276157#276157">jdt</a></td></tr>
<tr d-ix="13"><td>043</td><td>Perl</td><td>241016T092429Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276149#276149">Toto</a></td></tr>
<tr d-ix="14"><td>030</td><td>Perl 5 pl</td><td>241016T145635Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276160#276160">Xcali</a></td></tr>
<tr d-ix="15"><td>021</td><td>Japt</td><td>241016T100808Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276150#276150">Shaggy</a></td></tr>
<tr d-ix="16"><td>016</td><td>Vyxal</td><td>241016T080412Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276148#276148">lyxal</a></td></tr>
<tr d-ix="17"><td>022</td><td>05AB1E</td><td>241016T073412Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276146#276146">Kevin Cr</a></td></tr>
<tr d-ix="18"><td>068</td><td>Google Sheets</td><td>241016T071528Z</td><td><a href="https://codegolf.stackexchange.com/questions/276144/the-shortcut-hint/276145#276145">doubleun</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>AArch64 machine code, .text: 104 + .data: 6 = 110 bytes</h1>
<pre><code>$ objdump -ds f.o

f.o:     file format elf64-littleaarch64

Contents of section .text:
 0000 09150038 09144038 a9020034 0f048052  ...8..@8...4...R
 0010 22e80171 48485a3a e2479f1a 42840f1b  &quot;..qHHZ:.G..B...
 0020 2ae90171 48495a3a ea479f1a 4aa50f1b  *..qHIZ:.G..J...
 0030 5f000a6b 61feff54 0a000010 49050039  _..ka..T....I..9
 0040 49014079 09250078 02000014 09150038  I.@y.%.x.......8
 0050 09144038 c9ffff35 c0035fd6 00000010  ..@8...5.._.....
 0060 01040039 fbffff17                    ...9....
Contents of section .data:                                                         0000 283f2900 5f3f                        (?)._?
                                                                                  Disassembly of section .text:
                                                                                  0000000000000000 &lt;f-0x4&gt;:
   0:   38001509        strb    w9, [x8], #1

0000000000000004 &lt;f&gt;:                                                                4:   38401409        ldrb    w9, [x0], #1
   8:   340002a9        cbz     w9, 5c &lt;f+0x58&gt;
   c:   5280040f        mov     w15, #0x20                      // #32
  10:   7101e822        subs    w2, w1, #0x7a
  14:   3a5a4848        ccmn    w2, #0x1a, #0x8, mi     // mi = first
  18:   1a9f47e2        cset    w2, pl  // pl = nfrst
  1c:   1b0f8442        msub    w2, w2, w15, w1
  20:   7101e92a        subs    w10, w9, #0x7a
  24:   3a5a4948        ccmn    w10, #0x1a, #0x8, mi    // mi = first
  28:   1a9f47ea        cset    w10, pl // pl = nfrst
  2c:   1b0fa54a        msub    w10, w10, w15, w9
  30:   6b0a005f        cmp     w2, w10
  34:   54fffe61        b.ne    0 &lt;f-0x4&gt;  // b.any
  38:   1000000a        adr     x10, 0 &lt;f-0x4&gt;
  3c:   39000549        strb    w9, [x10, #1]
  40:   79400149        ldrh    w9, [x10]
  44:   78002509        strh    w9, [x8], #2
  48:   14000002        b       50 &lt;f+0x4c&gt;
  4c:   38001509        strb    w9, [x8], #1
  50:   38401409        ldrb    w9, [x0], #1
  54:   35ffffc9        cbnz    w9, 4c &lt;f+0x48&gt;                                     58:   d65f03c0        ret
  5c:   10000000        adr     x0, 0 &lt;f-0x4&gt;
  60:   39000401        strb    w1, [x0, #1]
  64:   17fffffb        b       50 &lt;f+0x4c&gt;
</code></pre>
<h2>Synopsis</h2>
<pre><code>adr x0,.L.string
adr x1,.L.char
ldrb w1,[x1]
adr x8,.L.buf // Output
bl f

mov x0,1
adr x1,.L.buf
mov x2,1024
mov x8,64
svc 0

mov x0,0
mov x8,93
svc 0

.data
.L.string: .asciz &quot;Search&quot;
.L.char = 'S'                                                               
.bss
.L.buf: .fill 1024
</code></pre>
<h2>Source</h2>
<pre><code>/// fn (x0: [*:0]const u8, w1: u8, x8: [*:0]u8) void
/// Writes result to x8[0..x0.len+4]
/// Expects @intFromPtr(x8) + x0.len &lt; @intFromPtr(x0) or
///   @intFromPtr(x8) &gt;= @intFromPtr(x0) + x0.len
.globl f

1:
strb w9,[x8],1
f:
ldrb w9,[x0],1
cbz w9,.L.NotFound

mov w15,32

subs w2,w1,'z'
ccmn w2,26,8,mi
cset w2,pl
msub w2,w2,w15,w1

subs w10,w9,'z'
ccmn w10,26,8,mi
cset w10,pl
msub w10,w10,w15,w9

cmp w2,w10
b.ne 1b

.L.Found:
adr x10,.L.Found.msg
strb w9,[x10,1]
ldrh w9,[x10]
strh w9,[x8],2
b .L.CopyRest

1:
strb w9,[x8],1
.L.CopyRest:
ldrb w9,[x0],1
cbnz w9,1b
ret

.L.NotFound:
adr x0,.L.NotFound.msg
strb w1,[x0,1]
b .L.CopyRest

.data
.L.NotFound.msg:
.asciz &quot;(?)&quot;
.L.Found.msg:
.ascii &quot;_?&quot;
</code></pre>
<h2>How to test</h2>
<p>Here is the base64 of my tarball. Save as <code>dist.tar.xz.base64</code>:</p>
<pre><code>/Td6WFoAAATm1rRGBMCJB4BQIQEWAAAAAAAAACts6fngJ/8DgV0AMwuKYA5QJwj87SsS4vWGI5bQ
b8vLTVj6v+rM+PCUEiLfeAlP/ZuvSSeHfT7G0GM/DVvBBJRXGVZ8SyYPk10w7F7K7FHLt/zdjWAJ
u9XKXBBYoPu9UCwks3dseqsiZvogpXevRO00hGFyG+UEa0qjVpb/PD5Bdai9c0YYRMWp1cRKKIKm
Cu4WdAawDdqZLjMKIUv1HEB6BfIaFKjibRvWPptOtUMLx47Pa3AxX0OwmL1hfA5Odm7caVBHRelq
ByQdne967lefm8ffLDhwhDzxsjjlDeZOIKoBi5GivRud+iuDyssflBJdvRGR32zhnN181nZAbUdl
9UeFZ2f1DcqJx3d1hYu03k6RGEdM8SuLUzZE7opaG9JK52iotv9tcIXwYAUf+6GssapmOsOSYFWO
A6PCQUz5yunV/uTSGvQdMz8zQsa8Wg1QycwWcxmgBw9V7/9fsHm7zQuwUCPdd28lQh+R0iw319+s
+c84DLcqpHeLGkFt7y+eYqFoCHScoRlFvDgg32mH9BQCcagmyHdKBPf5nHMXQsOI9so+NjeY7T64
jlcn9pAJTn9XOaK4j3iQrfZhaw1Z3be9xcPPqGgGy+ojA49gJAeVlTcBDfwWX0lZJ4FhhLllUzGL
xo03Siv+4uUyB+YD7VIqh0Qcg/RzZMmo0anU475/F1sgn40FR3WAZtnlgejxSXqJnaXQwgN9KPLS
ouAl2htU3N8syPVoSpTgrQGBLdKDgR1jFTCbEFDgcEUemWbBEbxyq1ceamIR/owbN9wiwgs3C0Ai
bMCPC9pNpcDaKZ4lZ8xV5jWMvVuIH+8/5vkkGPk6g82XnfsDM+wH87/3FH2ueSfuLS+bmVgQ3V26
IyBfkyHigNV/wuXnwtAbBS+g3kPOlBUMhtTBGJHH6vDKm2B31Gqg/RK13ymAiQpt0MBbp6ppFfqO
+QZ/d3vKBirl+fnXbXg5TMtqkCuGlLjdMB8hZlyUD6lu7PqAxiKFBX+OL9Ualm6Xt4exQ1h8BO4l
xCqNZlBuARgyfLZx9R/VxYzJSEzmzRRffAymT3HcXupFK7g7KBLEcpfGq5s2slx/zw7nxtv6qMsO
ZDg7Bj0vC1R+JMcxHC3JOWeT1iLf4Gb2rty6OXjRVJGCrdpC1fGoZcfTmFZ5CyL8ylmYEpzsmFgC
z4eSxWTvOCfHy6QP01PP2nxsQ5xrTjL6AAAAANRR1S5kq7VzAAGlB4BQAAAbEEG5scRn+wIAAAAA
BFla
</code></pre>
<p>Decode it and extract with mode <code>Jx</code>:</p>
<pre><code>$ cat dist.tar.xz.base64 | base64 -d | tar Jxf -
</code></pre>
<p>You will have four files:</p>
<pre><code>f.s
main.s
testcases.txt
test.sh
</code></pre>
<p>Assembled and link two files with your assembler and linker:</p>
<pre><code>$ as -o f.o f.s &amp;&amp; as -o main.o main.s &amp;&amp; ld -o main f.o main.o
</code></pre>
<p>Now you have an executable.
Finally run a test; you will have the following result:</p>
<pre><code>$ ./test.sh | tr -d '\0'
./main Search S
_Search

./main Translate N
Tra_nslate

./main Cut X
Cut(X)

./main Snap 10th 1
Snap _10th

./main Snap 50th 2
Snap 50th(2)

./main Excavate E
_Excavate

./main Cut(X) (
Cut_(X)

./main Cut(X) X
Cut(_X)

./main Cut(X) )
Cut(X_)

./main Cut(X) V
Cut(X)(V)

./main Test q
Test(q)

./main Test )
Test())

</code></pre>
<h2>History</h2>
<p>-4 bytes for position of label f</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, 39 bytes</h1>
<pre><code>$1~$2&amp;&amp;sub($2,&quot;_&quot;$2)||$0=$1&quot;($2)&quot;,$0=$1
</code></pre>
<p>This only seems to work on gawk, whereas mawk and nawk will throw you an error. Also, it runs on TIO, but prints out gibberish :-p</p>
</div>
<div id="pu2" class="pu"><h1>Uiua, 28 bytes</h1>
<pre><code>◌⍥:⊃∈(⊂⊂⊙@_⊃↙↘⊗:)⊃∩⌵⟜$&quot;_(_)&quot;
</code></pre>
<p>Try it: <a href="https://uiua.org/pad?src=0_13_0__RiDihpAg4peM4o2lOuKKg-KIiCjiioLiioLiiplAX-KKg-KGmeKGmOKKlzop4oqD4oip4oy14p-cJCJfKF8pIgoKRiAiU2VhcmNoIiBAUwpGICJUcmFuc2xhdGUiIEBOCkYgIkN1dCIgQFgKRiAiQ3V0KFgpIiBAKAo=" rel="nofollow noreferrer">Uiua pad</a></p>
<p><code>⊃∩⌵⟜$&quot;_(_)&quot;</code> puts on the stack the two uppercased inputs, the first input, and &quot;first(second)&quot;.</p>
<p><code>(⊂⊂⊙@_⊃↙↘⊗:)</code> first index of letter, fork split drop, join with underscore between.</p>
<p><code>◌⍥:⊃∈</code> check membership of the (both uppercased previously) letter in the string, flip the two stack items that many times, and pop. (Basically: if member, pop the parenthesis thing, otherwise pop the underscore thing)</p>
</div>
<div id="pu3" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 54 bytes</h1>
<pre><code>(F{.[),](')',~'(',[)`('_',])@.(*@#@])[}.~F=:i.&amp;tolower
</code></pre>
<p><a href="https://tio.run/##bZBPa8JAEMXvfoqhBWe3bFIVvCQoAdFT6aEWCYRlu4SkxkqiyfYPlOarpxN1I9Zedue932NmdjfNjYspTDxAMQAPBo47e3pYNGzx7UZcSIYcRY0MRcRfGCoUkgcuuwtuA8mjH7deTLzM7ZtiW3wmZcN7JqlM2y7tT@8D2cnIgyReF@B7AaY628JOVxXCLovfaojA8UACk1TJQy4QNSA4UzraStC9KbK8MmWWv0LEbfseqmWiy3iNcJiEJ@XjEnv4XGqVV1ttEovJORk@PlJi9m5YyC0lRX5I/jLXO1DDgTk3bp2D4ePQJsak2YhfZMbHzIgyav4V6w@aBkUJp1p1u1hI4flxFXW5S6t8@vrjmuofFtonqGvGu@ex1TVdtd9DFtt3rJVE9pbwv4Q6Nr8" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>I tried for hours to make this feel good. My second attempt, which tried to avoid the <code>F=:</code> assignment, was much longer, even after much golfing:</p>
<pre><code>;(,')',~'(',])&amp;&gt;/@[`(]({.,'_',}.)0&gt;@{[)@.(#@(0&gt;@{[)*@-])i.&amp;tolower
;(,')',~'(',])&amp;&gt;/@[`(]({.,'_',}.)F)@.(#@(F=:0&gt;@{[)*@-])i.&amp;tolower
,(}:,')',~'(',{:)@[`(]({.,'_',}.)}:@[)@.(#@}:@[*@-])i.&amp;tolower
i.&amp;tolower(}:,')',~'(',{:)@]`(({.,'_',}.)}:@])@.(#@}:@]*@-[),
i.&amp;tolower(}:,')',~'(',{:)@]`([({.,'_',}.)}:@])@.(#@}:@]&gt;[),
i.&amp;tolower(}:,')',~'(',{:)@]`([({.,'_',}.)}:@])@.(&lt;#@}:@]),
</code></pre>
<p>Agenda is probably not the way to go here, maybe there's more bytes to be saved by a completely different approach.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 75 bytes</h1>
<pre class="lang-js prettyprint-override"><code>c=&gt;g=s=&gt;s?s[U='toUpperCase']()[0]==c[U]()?'_'+s:s[0]+g(s.slice(1)):`(${c})`
</code></pre>
<p><a href="https://tio.run/##dZNbc9MwEIXf9SvWQ8HaqXGdQLm04xQnzSsD5EJwCIpHKKkZN3YtwzDT9rcHSbEdxw1ve75ztLv2SL@iP5HkeZwVLzfpT7Fd@Vvu99a@9HvySs4nvl2kkywT@SCSwl5QnHsL3@fziSqvbGafygup0OmaSlcmMRe0g3ixpCf3/BGX20LIgquTEnxYEjISUc5vHBiB3wO2U2ScRxuZRIVw4KPmSrMdIIPfhQMzDVVFZ0hGmyiDjleoHh2NjWYa7KxzY3VrS2vaRTL8y9WH6hFDM7rSkOZQ1syMU0McoOVEpkdWsF6DNSDWu7E9nO4XplMkY/UPHLgzn6ZKelchrBEiIcTrdF@9Pn/z9t37oD@4HjrgmVVb@Gks0LE9Zf@JhYcxQ2mIT4PWsaB1JAjHgoDk0@cvo/Fk@nX2LSzH7gkLD@3g0A5p0DrvtQNeK2C1A2rVAPrlegGD/k6aRqrSDQwwo1lQ@WHlh6VvVUA1tD48O3n@40UJWSn32DQvlR5QG0HTCBpG2DTChgFNQ/3NpVvk8S1FV2ZJXFD7@8ZG9zbKaKKDSYnPHHjQ@kHf6DPES1I/PXeV5sOI31A6lw5wB8TC3Lx7AhCvgFocgacbmSbCTdI1VWcBRCLFAV1RjlSqgz6oV1QqJI94uf0H" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 49 bytes</h1>
<pre class="lang-js prettyprint-override"><code>s=&gt;c=&gt;`${s}(${c})`.replace(/((.).*).\2.$/i,'_$1')
</code></pre>
<p><a href="https://tio.run/##dZNtb9MwFIW/@1fciEB9UUjTwnjRlIp061cEtJQSBm5kXBaUJVkcpkldf3ux3bw1K998nnNyz3WU/InuIsmLOC9fpNkvsd/4e@lPuD9Z21u5o/aW73DtFiJPIi7okFIX3efoXo1dexg7A2aPBrgvhSx5JIUEH9aEzEVU8GsH5uBPgB0UWRRRKpOoFA580FxpdgDk4m/pwEpDdaIrJPM0ymHklWrGSGOjmQYH68xY48bSmo6RzO65uo6umJnqWkNWQHVmpk6VOECrRqYra9iswToQm91YC5ftwnSJZKHegQO35mrqSG9rhA1CJIR4o/HLV2ev37x9F0wvLmcOeGbVHn4cC3Sspew/sfA4ZigN8XHQOhW0TgThVBCQfPz0eb74svy6@hZWtS1h4bEdHNshDXrPe/2A1wtY/YBaNYBptV7AYHqQZpA66QEGmGoW1H5Y@2HlWzVQA633T@ynP59VkFWyxWZ4pXRBYwRdI@gYYdcIOwZ0DfU2125ZxDcUXZkncUkHV@kA3Zsop4kOJhUeOvCg9YP@ooeI56T59dxNVswifk3pd@kAd0D8MF/elgDEG6AWR@BZKrNEuEn2m6pnAUQixRHdUIlUJX0f1F9UKSQ7PN//Aw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>From Arnauld's deleted answer</p>
<p>-7B from tsh</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 73 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda s,c:[s[:(i:=s.lower().find(c.lower()))]+'_'+s[i:],s+f'({c})'][i&lt;0]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZHNaoQwFIXpNk8R3CTBVEZhoEjtprjoZjZ2ITgimYwyglUxmf5Q-iClG6G079Q-TWPiH3SVe879uPce8vHdvshTU_efRbD_Osvi8urnrmIPhyODgnI_EYmPSz8QTtU85R0mTlHWR8wnSUhqowzZIin9lAq7QPiVvxGUJuX1JjUDfy_eORO5gAG0LCvKWcdPFEYwuIGZUeC-Y7WomMwp3A2-0pkxwO1ZUhgPpqpwTEBUsxa6G6lmuIOtdTYYprXVLW9uDRp7BITPnD3qFaFePWnYdHCss1wd6Ii2KiVG-xoRANqurCUuMDKXIooiRChE4-UKmYk5hIJ2GlpirDmVQxGxJkymdXeOpxhXM0vAf9zWcN7CjWnX5BRUgaG5fXaI-aG-N-8f" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Ungolfed for better understanding:</p>
<pre class="lang-python prettyprint-override"><code>def f(s,c):
 # case insensitive search, return index or -1 if not found
 i = s.lower().find(c.lower())
 # use the index to select the correct string
 # first option, selected if found, inserts a _ at position i
 return [s[:i]+'_'+s[i:], s+f'({c})'][i&lt;0]
</code></pre>
<h2>80 bytes using regexp</h2>
<ul>
<li><em>-3 bytes thanx to <a href="/users/81203/att">att</a></em></li>
<li><em>-6 bytes thanx to <a href="/users/73054/cursorcoercer">CursorCoercer</a></em></li>
</ul>
<pre class="lang-python prettyprint-override"><code>lambda s,c:(t:=re.sub(r'(?=\u%04X)'%ord(c),'_',s,1,2))+f'({c})'*(s==t)
import re
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bdBBS8MwFAdwvO5T9FLei8ayFgUZhBxkVxHqYYdByLLUDba2JKlMxE_ipSD6nfTTmCVjq-Ipef_8eO-Rt8_22a2aun-v2Pyjc9Xlzdf9Rm4XS5lYqiboJszozHYLNICczbt0fDUjkDZmiYpQEEAtzWlByEUF-KJeCZyjZcyR0XrbNsYlRse-32dpa9a1wwqh1NKoFVAogdAExKEmo6N4MLK2G-m0R3cB-UQcooG77ZwXsyD8Hf1ug9eylm2Sj91-VB5MSESI_rrr6IqT2ydY_Oo43Sn5FNeaxt2PyUAZ_ah33BseTCgF_1dkJ8Ex87Pib_V9PH8A" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Exploited regexp mechanics:</p>
<ul>
<li><code>'\u%04X'%ord(c)</code>: Convert the character to a Unicode escape sequence to prevent special characters breaking the regexp</li>
<li><code>(?=x)</code>: Lookahead to match the position before <code>x</code></li>
<li><code>re.IGNORECASE = 2</code>: Flag to make matching case-insensitive</li>
</ul>
<h2>87 bytes using partition</h2>
<pre class="lang-python prettyprint-override"><code>def f(s,c):h,d,t=min(map(s.partition,(c*2).title()));return[s+f'({c})',h+'_'+d+t][d&gt;'']
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZLBSsQwEIbx2qcIvUxiY3ELC6J0L9LrXipYWJcS2pQWumlJUlHEBxEve9F30qcxTbbtgrf5__mYmZ_k87t_1XUnjsevQVdXNz-PJa9QhRUtyG1NS6rjQyPwgfVYhT2TutFNJyguLiMSGtFyTAi5k1wPUuxUUAF-K94J0DqAHIIy0PtduQHYu_G_Fx8FU1yhGPm-n3Imi5qiFMUblDvlPUgmVMs0p2g7-kbnzvDuB01RNpqmwhnxUsF6tLrWZsZqtK3OR8O11rYVza1R44h4yUvBnu2KxK6eNOokOtU5NweGqm8bjeFJAPG8XjZC4wqDuxQopEAogtPlBpmJOYSBthZaYpxzJochMku4TOfdOZ5hVpZZAv7j1o6LFu6U9pycghowcbfPDnEvNH2EPw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>89 bytes using recursion</h2>
<pre class="lang-python prettyprint-override"><code>f=lambda s,c,h='':s and(s[0]in(c*2).title()and(h+'_'+s)or f(s[1:],c,h+s[0]))or h+f'({c})'
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZLNSsNAFIVxm6e4ZHNnzFiaQEEKcSPZdhMXES1hmiYkEKchMxVFfBBx042-kz6N85Ofgrs5534z9xySz-_uVdUHcTp9HVV1df1zX8Utf9rtOUhWsDpGXEvgYk_kw3LbCFJcRnShGtWWhBq7DjDHQNJDD5VmwvXWXAsMTY1ZBxWSt-Kdolvwe_FRcFlKiMH3_bTkfVEzSCG-gdwp767nQrZclQw2xtc6d4Z3e1QMMmPqE8molwreQbhU-o3Q2FbnxnCjlR1F08hoElEveSn4s12R2NWjBh15OOelDriQXdsogo8Cqed1fSMUqQi6pMgwRcoAh-QamYiphIY2FpprnHO6hyYyS7hO59OpnmZCy8wF_3Erx0UzN7Q9J8eiGkxc9smh7guNv8If" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash</a>, 99 bytes</h1>

<pre class="lang-bash prettyprint-override"><code>for((i=0;i&lt;${#1};i++));{ b=${1:i:1};[[ ${b,} =~ ${2,} ]]&amp;&amp;{ echo ${1/$b/_$b};exit;};}
echo &quot;$1($2)&quot;
</code></pre>
<p><a href="https://tio.run/##HclBCsIwEEDRvacI7VASKtQEV53mJKWIKdEOCpHoIjTEq4/B3ed9d31vzLcQpSR7Qpogt7og9b1SmIWzkPVIY6V5FpDdsQj7rWFqLEvXZeHXLVTQA7jhAq6gT/TBguXwPw1oCUY1zLyn5yPefTTnNe0UXmx@" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>
<h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash</a>, 101 bytes With special characters support</h1>

<pre class="lang-bash prettyprint-override"><code>for((i=0;i&lt;${#1};i++));{ b=${1:i:1};[[ ${b,} =~ &quot;${2,}&quot; ]]&amp;&amp;{ echo ${1/$b/_$b};exit;};}
echo &quot;$1($2)&quot;
</code></pre>
<p><a href="https://tio.run/##HcnRCsIgFADQ975C7DKUDZbS025@yRiRw9qlgWE9yOT26zZ6Pcff3kut95iUIndCukA5GkZqW62xCO@gmIGGncZRQPEdC/cVEortWIppapoiwrzE/UwPvr@CZwyZPsjIh/9IMAqslrXWLa/P9AjJnue8UXxV@AE" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK)</a>, 93 bytes</h1>

<pre class="lang-java prettyprint-override"><code>(s,c)-&gt;s.matches(&quot;(?i).*\\Q&quot;+c+&quot;\\E.*&quot;)?s.replaceFirst(&quot;(?i)(\\Q&quot;+c+&quot;\\E)&quot;,&quot;_$1&quot;):s+&quot;(&quot;+c+&quot;)&quot;
</code></pre>
<p><a href="https://tio.run/##nZFfS8MwFMXf9ylCEJZsXXCCL043cGxvClKRghW5ZtmammU1uR0O2Wev/Qf62O0@XQ7nB@dwUtjDKF19Fln@YbQk0oD35AG0JT89Up5HwFJPS5/IURuxzq1EvbPiXi/b9zZEp@0mIPMEHEhULiCNNCXru4L5QPLR1IstoEyUZ5TNNBeDOH6iQzmkcbwQA8pnXjiVGZBqqZ3HxsX@mTgN6PvFmPIbP6SsVjktqpCTXp217dBG3u/0imzLJqzJ8vpGwG08b4tVFx48qq3Y5Siy0oLGsrWALDMHRkMFTiY0IP2wz/mkE/PswHoDqCrssTM2z7ECos5AaCEj40us441Pw65b7KoztviW5fpNqcUppVjEK4adwURnMPwM5qX7tsrXK32dTPzlOvaOxS8" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a> , 79 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>x=&gt;([a,b]=x.split`, `,V=a.indexOf(b))&lt;0?a+` (${b})`:a.slice(0,V)+'_'+a.slice(V)
</code></pre>
<p><a href="https://tio.run/##NcjRCsIgFADQXxkj2L1osufK@oQeAl8i8uqsGaJjjnBE325PncfzojdlO/tp2cY0uLrKWuQRrsTNTRaRp@AXzRvNlSTh4@DK@QEG8dCfiOkGNh/zRb0jkYO3DnqukHX3jv1DYd3bFHMKToT0hBXai6PZjryhFrH@AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 24 bytes</h1>
<pre><code>≔⌕↥θ↥ηζ¿⊕ζ«…θζ_✂θζ»«θ(η)
</code></pre>
<p><a href="https://tio.run/##TYzNCsIwEITP5ilCT7ugT@BJCoIXEdSzhHQ1gTXNH4KVPntsQWyO38w3o42Kuldcyi4l@3Cwt66Dq/cUtUoEAddyIYMTDrgV9i7h4HSkJ7lMHQyI8iNWp2hdhvatmVrTewizPem/ork1C5zZavoboyROtHyEagXVylQ5zvlYyiUql1hlEseyefEX" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⌕↥θ↥ηζ
</code></pre>
<p>Case-insensitively find the position of the accelerator in the string.</p>
<pre><code>¿⊕ζ«
</code></pre>
<p>If the accelerator was found, then...</p>
<pre><code>…θζ_✂θζ
</code></pre>
<p>Output the first half of the string, then a <code>_</code>, then the second half.</p>
<pre><code>»«θ(η)
</code></pre>
<p>Otherwise output the string and the accelerator surrounded with <code>()</code>s.</p>
<p>Alternative solution, also 24 bytes:</p>
<pre><code>≔⌕↥θ↥ηζ⭆θ⁺…_⁼κζι¿‹ζ⁰⪫()η
</code></pre>
<p><a href="https://tio.run/##Rc29CsIwFAXgvU8ROt0LEdw7SdBBLBREcJMQYxsM@buJYF8@RhycDmf4zlGLTMpLW@uOyMwODsbd4RKCTkqShoic/duCra44dFMyLsM5t5hHGSByNtlCIN7KarH4AP2t52wfi7QEzy9q0iA2ax4MTpoIVs62iOy3dfTGQQ/YVHsZahUld9e6edkP" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⌕↥θ↥ηζ
</code></pre>
<p>Case-insensitively find the position of the accelerator in the string.</p>
<pre><code>⭆θ⁺…_⁼κζι
</code></pre>
<p>Output the string with the match (if any) preceded with <code>_</code>.</p>
<pre><code>¿‹ζ⁰⪫()η
</code></pre>
<p>If there was no match than output the accelerator surrounded with <code>()</code>s.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 26 bytes</h1>
<pre><code>i`((.).*)¶\2
_$1
¶(.)
($1)
</code></pre>
<p><a href="https://tio.run/##K0otycxL/K@qEZygo/A/M0FDQ09TT0vz0LYYI654FUOuQ9uAAlwaKoaa//8HpyYWJWfoKARzhRQl5hXnJJak6ij4cTmXlugoRHAF5yUWKBgalAAVGEI4pmCOEZdrRXJiGVixKwA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Takes input on separate lines but link is to test suite that splits on <code>, </code> for convenience. Explanation:</p>
<pre><code>i`((.).*)¶\2
_$1
</code></pre>
<p>If a matching character in the string can be found for the accelerator, precede the match with <code>_</code> and delete the accelerator.</p>
<pre><code>¶(.)
($1)
</code></pre>
<p>If the accelerator has not been deleted then wrap it in <code>()</code>s and join it to the end of the string.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>71</s> 70 bytes</h1>

<pre class="lang-c prettyprint-override"><code>i;f(s,c){printf(i?&quot;%.*s_%s&quot;:&quot;%.*s(%s)&quot;,i-s,s,i?:c,i=strcasestr(s,c));}
</code></pre>
<p><a href="https://tio.run/##XY/BasMwDIbveQphCNiZM5LCLjWhh9LrLt1hEMIwJm4NXRosdRuEvPoyxwtdmC4W32eJXyY/GTNNTlmO0oih964jy92OpY8ZvqXItrHjKQomXY4SpdttjXQVkjca2/DEUaHGKczCu3YdFzAkAGDO2mdA4Q/WDVQwwEznYsdWe3NmMnRM3umL1x1eNLWzeF6J/Y1m9LpCx073UBYUl5T/xdMiNitx@DL6Y1l@@OOFhAJGlfyGs1cPPAYPyauYXUFGCuih2ix3xbKc6qKRQHXZCHXH/Y2QM7aQMRmnb2Mv@oRT/vkD" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1>Perl, 43 bytes</h1>
<pre class="lang-perl prettyprint-override"><code>$c=pop;$_=pop;s/\Q$c/_$&amp;/i or$_.=&quot;($c)&quot;;say
</code></pre>
<ul>
<li>The arguments have to be separated by a space</li>
<li>If one argument contains sapce, it have to be surrounded by quote</li>
<li>For example: <code>Snap 10th, 1</code> should be passed as <code>&quot;Snap 10th&quot; 1</code></li>
</ul>
<pre class="lang-perl prettyprint-override"><code>$c=pop;         # retrieve the 2nd argument, the character 
$_=pop;         # retrieve the 1st argument, the string
s/\Q$c/_$&amp;/i      # find the character and add _ before, \Q escapes the character in order to work with .
 or             # OR, if it is not found
$_.=&quot;($c)&quot;;     # concat the character suround by parenthesis
say             # print the modified string
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.perl.org/" rel="noreferrer">Perl 5</a> <code>-pl</code>, 30 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$c=&lt;&gt;;s/\Q$c/_$c/i or$\=&quot;($c)&quot;
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/18l2dbGzrpYPyZQJVk/HogzFfKLVGJslTRUkjWV/v8PTk0sSs7gSv6XX1CSmZ9X/F/X11TPwNDgv25BDgA" rel="noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 21 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>There's <em>gotta</em> be a better way.</p>
<pre><code>i'_Uv bVv¹r&quot;_$&quot;&quot;({V})
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=aSdfVXYgYlZ2uXIiXyQiIih7Vn0p&amp;input=IlNlYXJjaCIKIngi" rel="nofollow noreferrer">Try it</a></p>
<pre><code>i'_Uv bVv¹r&quot;_$&quot;&quot;({V})     :Implicit input of strings U &amp; V
i'_                       :Insert &quot;_&quot; in U at index
   Uv                     :  Lowercase U
      b                   :  First 0-based index of, or -1 if not present
       Vv                 :    Lowercase V
         ¹                :End insert
          r               :Replace
           &quot;_$&quot;           :  RegEx /_$/
               &quot;({V})     :  With V interpolated between parentheses
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 16 bytes</h1>
<pre><code>⇩$⇩₌ḟc[\_Ṁ|_⁰øb+
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLih6kk4oep4oKM4bifY1tcXF/huYB8X+KBsMO4YisiLCIiLCJcIlNuYXAgMTB0aFwiXG5cIjFcIiJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Maybe something with assign and functions is shorter, but for now, insert works</p>
<h2>Explained</h2>
<pre><code>⇩$⇩₌ḟc[\_Ṁ|_⁰øb+­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁣⁣⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁣⁤⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁤⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏‏​⁡⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁤⁤⁪‏‏​⁡⁠⁡‌­
⇩$⇩               # ‎⁡Push both inputs lowercased. Stack will be [haystack, needle]
   ₌ḟc            # ‎⁢Push haystack.find(needle), needle in haystack
      [           # ‎⁣If needle in haystack (i.e the character is in the string case-insensitive):
       \_Ṁ        # ‎⁤  Insert a &quot;_&quot; at the index (0-indexed)
          |       # ‎⁢⁡Otherwise:
           _      # ‎⁢⁢  Pop the index (which will be -1)
            ⁰øb   # ‎⁢⁣  Surround the character in ()
               +  # ‎⁢⁤  And append it to the sentence
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>DlIlk©diD®è'_ì®ǝë&quot;ÿ(ÿ)
</code></pre>
<p>Case-insensitive replacing isn't really 05AB1E's strong suit..</p>
<p><a href="https://tio.run/##ATMAzP9vc2FiaWX//0RsSWxrwqlkaUTCrsOoJ1/DrMKux53DqyLDvyjDvyn//0V4Y2F2YXRlCmU" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVC6H@XnIic7EMrUzJdDq07vEI9/vCaQ@uOzz28OqJY6fB@jcP7Nf8rHVpRq/M/OlopODWxKDlDSUcpWClWJ1oppCgxrzgnsSQVKOIHFnEuLQGyI8Ds4LzEAgVDgxKQekOEiClExAgs4lqRnFgGMcAVXSBVKTYWAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>D                 # Duplicate the first (implicit) input-string
 l                # Convert the copy to lowercase
  Il              # Push the second input-character, as lowercase as well
    k             # Get the first 0-based index of this character in the string
                  # (or -1 if none were present)
     ©            # Store this index in variable `®` (without popping)
      di          # If the index is non-negative (aka, not -1):
        D         #  Duplicate the string on the stack again
         ®è       #  Pop and get the character at index `®`
           '_ì   '#  Prepend a &quot;_&quot;
              ®ǝ  #  Insert it back at index `®`
       ë          # Else:
        &quot;ÿ(ÿ)    &quot;#  Push string &quot;ÿ(ÿ)&quot;, where the first `ÿ` is the string on the stack,
                  #  and the second `ÿ` is the (implicit) second input-character
                  # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu18" class="pu"><h1>Google Sheets, 68 bytes</h1>
<pre><code>=let(t,regexreplace(A1,&quot;(?i)(&quot;&amp;B1&amp;&quot;)&quot;,&quot;_$1&quot;),t&amp;if(t=A1,&quot;(&quot;&amp;B1&amp;&quot;)&quot;,))
</code></pre>
<p><img src="https://i.sstatic.net/65LeUlPB.png" alt="screenshot" /></p>
<p>The formula will <em>&quot;Add an underline before <strong>any</strong> instance of the char, case-insensitive&quot;</em>, as specified, and thus adds multiple underscores when the character appears multiple times.</p>
<p>To only add an underscore before the <strong>first</strong> instance of the char, use this (<strong>74 bytes</strong>):</p>
<pre><code>=let(t,regexreplace(A1,&quot;(?i)(&quot;&amp;B1&amp;&quot;)(.*)&quot;,&quot;_$1$2&quot;),t&amp;if(t=A1,&quot;(&quot;&amp;B1&amp;&quot;)&quot;,))
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/276144/">276144</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




