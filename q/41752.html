<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::41752</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>335</td><td>Brainfuck</td><td>230720T204500Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/263090#263090">bsoelch</a></td></tr>
<tr d-ix="1"><td>053</td><td>Raku Perl 6 rakudo</td><td>230719T074939Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/263019#263019">bb94</a></td></tr>
<tr d-ix="2"><td>172</td><td>Clojure</td><td>220411T110013Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/246149#246149">Alexande</a></td></tr>
<tr d-ix="3"><td>066</td><td>Python 3</td><td>191228T171629Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/197546#197546">nealmcb</a></td></tr>
<tr d-ix="4"><td>052</td><td>APLNARS</td><td>190604T071158Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/186361#186361">user5898</a></td></tr>
<tr d-ix="5"><td>020</td><td>05AB1E</td><td>190529T164223Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/186218#186218">Grimmy</a></td></tr>
<tr d-ix="6"><td>014</td><td>Stax</td><td>180602T035644Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/165989#165989">recursiv</a></td></tr>
<tr d-ix="7"><td>017</td><td>Stax</td><td>180328T164256Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/160567#160567">Weijun Z</a></td></tr>
<tr d-ix="8"><td>167</td><td>8th</td><td>170107T181236Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/106012#106012">Chaos Ma</a></td></tr>
<tr d-ix="9"><td>051</td><td>JavaScript ES6</td><td>170109T012213Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/106166#106166">Grax32</a></td></tr>
<tr d-ix="10"><td>242</td><td>Clojure</td><td>161210T072805Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/102795#102795">clismiqu</a></td></tr>
<tr d-ix="11"><td>236</td><td>GNU sed</td><td>161209T202117Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/102745#102745">Jordan</a></td></tr>
<tr d-ix="12"><td>nan</td><td>JavaScript  102 ES6</td><td>141127T025050Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41954#41954">Eliseo D</a></td></tr>
<tr d-ix="13"><td>269</td><td>Java</td><td>141125T132338Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41867#41867">Thrax</a></td></tr>
<tr d-ix="14"><td>023</td><td>Pyth</td><td>141122T191758Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41759#41759">isaacg</a></td></tr>
<tr d-ix="15"><td>068</td><td>JavaScript</td><td>141124T213736Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41839#41839">edc65</a></td></tr>
<tr d-ix="16"><td>054</td><td>Mathematica</td><td>141124T145229Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41822#41822">miles</a></td></tr>
<tr d-ix="17"><td>128</td><td>Mathematica</td><td>141122T191147Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41758#41758">Tally</a></td></tr>
<tr d-ix="18"><td>058</td><td>Python 2</td><td>141122T194043Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41762#41762">xnor</a></td></tr>
<tr d-ix="19"><td>024</td><td>CJam</td><td>141122T204818Z</td><td><a href="https://codegolf.stackexchange.com/questions/41752/balanced-ternary-converter/41765#41765">Optimize</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Brainfuck, <s>406</s> <s>340</s> 335 bytes</h1>
<p>code (with added newlines for readability):</p>
<pre><code>-[+&gt;+[+&lt;]&gt;+]&gt;-&lt;,[-&gt;-&gt;+&lt;&lt;]+&gt;[[-]&lt;-&gt;]&lt;[&gt;&gt;,&lt;]&gt;[&lt;]&gt;&gt;&gt;&gt;++&lt;&lt;&lt;[&gt;-[&lt;-&gt;-----]&lt;+++&gt;&gt;&gt;[&gt;]&gt;&gt;++&gt;++&lt;&lt;&lt;&lt;[[-&gt;&gt;+&gt;&gt;+&lt;&lt;&lt;&lt;]&lt;]&gt;&gt;&gt;++&gt;++&lt;
[[-&lt;&lt;&lt;&lt;&lt;+&gt;&gt;&gt;&gt;&gt;]&lt;&lt;&lt;&lt;+++&lt;[-&gt;-[&gt;+&gt;&gt;]&gt;[+[-&lt;+&gt;]&gt;+&gt;&gt;]&lt;&lt;&lt;&lt;&lt;]-&gt;[-]--&gt;+[+[-&lt;&lt;+&gt;&gt;]&gt;]&gt;&gt;]&lt;&lt;&lt;&lt;&lt;&lt;[[-&gt;&gt;&gt;+&lt;&lt;&lt;]&lt;]&gt;,]
&lt;&lt;[&gt;&gt;&gt;&gt;&gt;[[-&lt;-&gt;]&gt;]&lt;&lt;[++++&lt;]&lt;]&gt;&gt;&gt;&gt;&gt;[&gt;]+[&lt;--[&gt;-&gt;]&gt;[-&lt;+&gt;]&lt;]&lt;&lt;++&gt;+&lt;[&gt;-]&gt;[-&lt;++&gt;&gt;]&lt;&lt;[&gt;&gt;--[&lt;+&gt;++++++]&lt;&lt;---[&gt;++&lt;++[&gt;+++&lt;-]]&gt;.[-]&lt;&lt;]
</code></pre>
<p>Takes input as decimal string with an optional leading <code>-</code>
This is my first non-trivial Brainfuck program so there is certainly room for improvement.</p>
<p><a href="https://tio.run/##NVDbCsJQDPugrIKPQsmPlD6oIMjAB8Hvn8mpFsbOyaXJdntfn6/H574fRxSIQjbRjNwqGERmg1XRGewscpOg9GggVlCUuPB0AhBRbLMjSLl1I9ell3U4EYbSFmq7j4a1rWxQECSBDvjx2UGViXBV25es/@xkrSQHbe1@HkeFlQLgkOmxqkL9FWh60kSmG/rbBpt4rZIw3d0jJGzUNsAvZHTz5J@VrR96vnwB" rel="nofollow noreferrer">Try it online</a></p>
<p>Commented version of code:</p>
<pre><code>-[+&gt;+[+&lt;]&gt;+]&gt;-  constant 45
&lt;,[-&gt;-&gt;+&lt;&lt;]+&gt;[[-]&lt;-&gt;]&lt;[&gt;&gt;,&lt;]&gt;[&lt;]&gt; remember sign
&gt;&gt;&gt;++&lt;&lt;&lt; load 2 in cell 3
[ while input is not EOF
&gt;-[&lt;-&gt;-----]&lt;+++ subtract 48 (ascii 0) from input
&gt;&gt;&gt;[&gt;]&gt;&gt;++&gt;++&lt;&lt;&lt;&lt;[[-&gt;&gt;+&gt;&gt;+&lt;&lt;&lt;&lt;]&lt;]&gt;&gt;&gt;++&gt;++&lt;  multiply by 10 (add number to shifted copy)
[  add next digit and handle carries
[-&lt;&lt;&lt;&lt;&lt;+&gt;&gt;&gt;&gt;&gt;]
&lt;&lt;&lt;&lt;+++&lt;[-&gt;-[&gt;+&gt;&gt;]&gt;[+[-&lt;+&gt;]&gt;+&gt;&gt;]&lt;&lt;&lt;&lt;&lt;] 
-&gt;[-]--&gt;+[+[-&lt;&lt;+&gt;&gt;]&gt;]&gt;&gt;
]
&lt;&lt;&lt;&lt;&lt;&lt;[[-&gt;&gt;&gt;+&lt;&lt;&lt;]&lt;]&gt;
,] reset to start of loop
&lt;&lt;[&gt;&gt;&gt;&gt;&gt;[[-&lt;-&gt;]&gt;]&lt;&lt;[++++&lt;]&lt;] flip number if negative
&gt;&gt;&gt;&gt;&gt;[&gt;]+[&lt;--[&gt;-&gt;]&gt;[-&lt;+&gt;]&lt;]&lt;&lt;++ strip leading zeros
&gt;+&lt;[&gt;-]&gt;[-&lt;++&gt;&gt;]&lt;&lt; ensure zero is printed
[ print the number
  &gt;&gt;--[&lt;+&gt;++++++]&lt; load 43 (char code of plus)
  &lt;---[&gt;++&lt;++[&gt;+++&lt;-]]&gt;.[-]&lt;&lt;
]
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://raku.org" rel="nofollow noreferrer">Raku (Perl 6) (rakudo)</a>, <s>52</s> 53 bytes</h1>
<pre class="lang-perl prettyprint-override"><code>{.&amp;(my&amp;g={$_??g(-+^$_ div 3)~ &lt;0 + -&gt;[$_%3]!!''})||0}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=lczLDgExFMbx_TxFJ6rTqva0hhhxewfshMkIMxGxcUukrRexmQXv4FW8DeKyYmF1_ovz-46nVbLY5tdLwZhBD3QEXICjVE6S9YyGrGz6QMc2sspqVgFDseKaFRuHyIGTUhofKuDYsCT0iDmvYJZ7krUNjrvdjAo-xjGE3Cp2QC2FOBKdIY6L4cj3g8A1cUyIJNmDSUL_kMxa5bw7SNvn7SYV0bX2dQFN5zsU_p54Ydn01skepbSqq-zduv5J9SnxeHiqPH_eGw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<pre><code>{.&amp;(my&amp;g={$_??g(-+^$_ div 3)~ &lt;0 + -&gt;[$_%3]!!''})||0}
    my&amp;g={$_??g(-+^$_ div 3)~ &lt;0 + -&gt;[$_%3]!!''}      # g returns '' for 0
              g(-+^$_ div 3)                          # g(($_ + 1) div 3)
 .&amp;(                                           )      # call g($_)
                                                ||0   # if this is falsy, then return 0
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Clojure, 172 bytes</h1>
<p><code>(let[s &quot;0+-&quot;](loop[x(Integer.(read-line))xs '()](if(= 0 x)(println(apply str xs))(let[y(mod x 3)x(int (Math/floor(/ x 3.0)))](recur(if(= y 2)(inc x)x)(cons(get s y)xs))))))</code></p>
<p>Readable version:</p>
<pre><code>(let [s &quot;0+-&quot;]
  (loop [x  (Integer. (read-line))
         xs '()]
    (if (= 0 x)
      (apply str xs)
      (let [y (mod x 3)
            x (int (Math/floor (/ x 3.0)))]
        (recur (if (= y 2) (inc x) x) (cons (get s y) xs))))))
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Python 3, 66</h1>
<p>Python 2 answer from xnor, ported to Python 3.
Note that official support for Python 2 ceases on January 1 2020.</p>
<pre><code>n=eval(input())
s=&quot;&quot;
while n:s=&quot;0+-&quot;[n%3]+s;n=-~n//3
print(s or 0)
</code></pre>
</div>
<div id="pu4" class="pu"><h1>APL(NARS), 26 chars, 52 bytes</h1>
<pre><code>{+/(3*¯1+⍳≢⍵)×¯2+⌽'-0+'⍳⍵}
</code></pre>
<p>test:</p>
<pre><code>  h←{+/(3*¯1+⍳≢⍵)×¯2+⌽'-0+'⍳⍵}
  h '+0-'
8
  h '+-0+'
19
  h '-+++'
¯14
  h ,'-'
¯1
  h ,'0'
0
  h ,'+'
1
</code></pre>
<p>possible it could be less if ⊥ is used but it is forbidden...</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 20 bytes</h1>

<pre><code>ΔYÝ&lt;ÀÅв3βÊ½¾}…0+-ÅвJ
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f//3JTIw3NtDjccbr2wyfjcpsNdh/Ye2lf7qGGZgbYuSMzr/39dEyMA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 14 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>ü♣ê⌠yù∞♪♦X=/ƒ├
</code></pre>

<p><a href="https://staxlang.xyz/#p=810588f47997ec0d04583d2f9fc3&amp;i=8%0A19%0A-14%0A0%0A&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, 17 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>ë1·âΓM¿├&gt;Ö≥Er☺à┤3
</code></pre>

<p><a href="https://staxlang.xyz/#p=8931fa83e24da8c33e99f245720185b433&amp;i=8%0A19%0A-14&amp;a=1&amp;m=2" rel="nofollow noreferrer">Run and debug it</a></p>

<p>Shortest answer so far, but should be easily beaten by some golfing languages. The algorithm is the same as @xnor's Python answer.</p>

<p>ASCII equivalent:</p>

<pre><code>z{"0+-";3%@+,^3/~;wr
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="http://8th-dev.com/" rel="nofollow noreferrer">8th</a>, <s>179</s> <s>171</s> 167 characters</h1>

<p>Here it is a complete program in <a href="http://8th-dev.com/" rel="nofollow noreferrer">8th</a> which takes a decimal signed integer as input and converts it to balanced ternary</p>

<pre> <code>
: f "" swap repeat dup 3 n:mod ["0","+","-"] swap caseof rot swap s:+ swap dup n:sgn n:+ 3 n:/mod nip while drop s:rev ;
"? " con:print 16 null con:accept >n
f cr . cr
</code> </pre>

<p><strong>Test</strong></p>

<pre> <code>
? 414
+--0+00
</code> </pre>

<p>The first time the program asks for a number to convert (as required). Then, it is possible to invoke the word <code>f</code> to convert more numbers as in the following line:</p>

<pre> <code>
[ 8 , 19 , -14 , ] ( nip dup . space f . cr ) a:each drop 
</code> </pre>

<p><strong>Output</strong></p>

<pre> <code>
8 +0-
19 +-0+
-14 -+++
</code> </pre>

<p><strong>Code explanation</strong></p>

<pre> <code>
"? " con:print 16 null con:accept >n
</code> </pre>

<p>This is the code for input handling. The core of the code is inside the word <code>f</code>. Away from the <em>golf course</em> I would have used the word <code>&gt;bt</code> instead of <code>f</code>. Here it is an ungolfed version of <code>f</code> (with comments):</p>

<pre> <code>
: f \ n -- s
    ""   \ used for the first symbol concatenation
    swap \ put number on TOS to be used by loop
    repeat
        dup 
        3 n:mod      \ return the remainder of the division by 3
        [ "0" , "+" , "-" , ] 
        swap caseof  \ use remainder to take proper symbol
        rot          \ put previous symbol on TOS 
        swap         \ this is required because "" should come first
        s:+          \ concatenate symbols
        swap         \ put number on TOS 
        dup
        n:sgn n:+    \ add 1 if positive or add -1 if negative
        3 n:/mod nip \ put quotient only on TOS
    while drop
    s:rev            \ reverse the result on TOS
;
</code> </pre>
</div>
<div id="pu9" class="pu"><h1>JavaScript (ES6), 51 bytes</h1>

<pre><code>v=&gt;[...v].map(x=&gt;t=3*t+((+x!=+x)?(x+1)-0:0),t=0)&amp;&amp;t
</code></pre>

<p>Loop through characters.  First multiply previous total times 3, then if isNaN(character) is true, convert the string (character + "1") to a number and add it, otherwise zero.</p>
</div>
<div id="pu10" class="pu"><h1>Clojure, 242 bytes</h1>

<pre class="lang-clojure prettyprint-override"><code>#(clojure.string/join""(map{1"+"0"0"-1"-"}(loop[x(vec(map read-string(clojure.string/split(Integer/toString % 3)#"")))](let[y(.indexOf x 2)](if(&lt; y 0)x(let[z(assoc x y -1)](recur(if(= y 0)(vec(cons 1 z))(assoc z(dec y)(inc(x(dec y))))))))))))
</code></pre>

<p>Is this the longest Clojure answer so far?</p>

<p>Ungolfed (with comments):</p>

<pre class="lang-clojure prettyprint-override"><code>(use '[clojure.string :only (split join)]);' (Stupid highlighter)
; Import functions

(defn ternary [n]
  (join ""
  ; Joins it all together
    (map {1 "+" 0 "0" -1 "-"}
    ; Converts 1 to +, 0 to 0, -1 to -
      (loop [x (vec (map read-string (split (Integer/toString n 3) #"")))]
      ; The above line converts a base 10 number into base 3,
      ; and splits the digits into a list (8 -&gt; [2 2])
        (let [y (.indexOf x 2)]
        ; The first occurrence of 2 in the list, if there is no 2,
        ; the .indexOf function returns -1
          (if (&lt; y 0) x
          ; Is there a 2? If not, then output the list to
          ; the map and join functions above.
            (let [z (assoc x y -1)]
            ; Converts where the 2 is to a -1 ([2 2] -&gt; [-1 2])
              (recur
                (if (= y 0) (vec (cons 1 z))
                  ; If 2 is at the 0th place (e.g. [2 2]),
                  ; prepend a 1 (e.g. [-1 2] -&gt; [1 -1 2])
                  (assoc z (dec y) (inc (x (dec y)))))))))))))
                  ; Else increment the previous index
                  ; (e.g. [1 -1 2] -&gt; [1 0 -1])
</code></pre>
</div>
<div id="pu11" class="pu"><h1>GNU sed, 236 bytes</h1>

<pre class="lang-sed prettyprint-override"><code>/^0/bV
:
s/\b9/;8/
s/\b8/;7/
s/\b7/;6/
s/\b6/;5/
s/\b5/;4/
s/\b4/;3/
s/\b3/;2/
s/\b2/;1/
s/\b1/;0/
s/\b0//
/[^;-]/s/;/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/g
t
y/;/1/
:V
s/111/3/g
s/3\b/3:/
s/311/33!/
s/31/3+/
y/3/1/
tV
s/1/+/
y/1:/!0/
/-/{s/-//
y/+!/!+/
}
y/!/-/
</code></pre>

<p><a href="http://sed.tryitonline.net/#code=L14wL2JWCjoKcy9cYjkvOzgvCnMvXGI4Lzs3LwpzL1xiNy87Ni8Kcy9cYjYvOzUvCnMvXGI1Lzs0LwpzL1xiNC87My8Kcy9cYjMvOzIvCnMvXGIyLzsxLwpzL1xiMS87MC8Kcy9cYjAvLwovW147LV0vcy87LyYmJiYmJiYmJiYvZwp0CnkvOy8xLwo6VgpzLzExMS8zL2cKcy8zXGIvMzovCnMvMzExLzMzIS8Kcy8zMS8zKy8KeS8zLzEvCnRWCnMvMS8rLwp5LzE6LyEwLwovLS97cy8tLy8KeS8rIS8hKy8KfQp5LyEvLS8&amp;input=OAoxOQotMTQ" rel="nofollow noreferrer">Try it online!</a></p>

<h1>Explanation</h1>

<p>The first half of the code (less the first line) translates decimal to unary and comes straight from "<a href="https://codegolf.stackexchange.com/questions/51323/tips-for-golfing-in-sed/51329#51329">Tips for golfing in sed</a>." Then it translates unary to balanced ternary one trit at a time, which I'll demonstrate by working an example manually.</p>

<p>Before the final output, the ternary digits <code>-</code>, <code>0</code>, and <code>+</code> are represented by <code>!</code>, <code>:</code>, and <code>+</code>, respectively.</p>

<p>For an interesting result, we start with <code>-48</code>, which has been converted to unary (with the <code>-</code> intact). To calculate the first (right-most) trit, we have to calculate the remainder of 48÷3. We can do this by replacing the <code>111</code>s with <code>3</code>s:</p>



<pre class="lang-none prettyprint-override"><code>-111111111111111111111111111111111111111111111111 │ s/111/3/g
# =&gt; -3333333333333333
</code></pre>

<p>48÷3 has no remainder, so no <code>1</code>s remain, and we know our first trit is <code>:</code> (for 0), so we replace it:</p>

<pre class="lang-none prettyprint-override"><code>-3333333333333333 │ s/3\b/3:/
# =&gt; -3333333333333333:
</code></pre>

<p>Now we have our "ones place," so we know the remaining <code>3</code>s represent the threes place. To keep the math working we have to divide them by 3, i.e. replace them with <code>1</code>s:</p>

<pre class="lang-none prettyprint-override"><code>-3333333333333333: │ y/3/1/
# =&gt; -1111111111111111:
</code></pre>

<p>Let's double-check our math: We have 16 (unary <code>1111111111111111</code>) in the threes place and zero (<code>:</code>) in the ones place. That's 3✕16 + 1✕0 = 48. So far so good.</p>

<p>Now we start again. Replace <code>111</code>s with <code>3</code>s:</p>

<pre class="lang-none prettyprint-override"><code>-1111111111111111: │ s/111/3/g
# =&gt; -333331:
</code></pre>

<p>This time our remainder is <code>1</code>, so we put <code>+</code> in the threes place and replace the remaining <code>3</code>s with <code>1</code>s:</p>

<pre class="lang-none prettyprint-override"><code>-333331: │ s/31/3+/; y/3/1/
# =&gt; -11111+:
</code></pre>

<p>Sanity check time: We have a 5 (unary <code>11111</code>) in the nines place, 1 (<code>+</code>) in the threes place, and 0 (<code>:</code>) in the ones place: 9✕5 + 3✕1 + 1✕0 = 48. Great! Again we replace the <code>111</code>s with <code>3</code>s:</p>

<pre class="lang-none prettyprint-override"><code>-11111+: │ s/111/3/g
# =&gt; -311+:
</code></pre>

<p>This time our remainder is 2 (<code>11</code>). That takes up two trits (<code>+!</code>), which means we have a carry. Just like in decimal arithmetic that means we take the rightmost digit and add the rest to the column to the left. In our system, that means we put <code>!</code> in the nines place and add another three to its left, then replace all of the <code>3</code>s with <code>1</code>s to represent the 27s place:</p>

<pre class="lang-none prettyprint-override"><code>-311+: │ s/311/33!/; y/3/1/
# =&gt; -11!+:
</code></pre>

<p>Now we don't have any 3s left, so we can replace any remaining unary digits with their corresponding trits. Two (<code>11</code>) is <code>+!</code>:</p>

<pre class="lang-none prettyprint-override"><code>-11!+: │ s/11/+!/
# =&gt; -+!!+:
</code></pre>

<p>In the actual code this is done in two steps, <code>s/1/+/</code> and <code>y/1:/!0/</code>, to save bytes. The second step also replaces <code>:</code>s with <code>0</code>s, so it actually does this:</p>

<pre class="lang-none prettyprint-override"><code>-11!+: │ s/1/+/; y/1:/+0/
# =&gt; -+!!+0
</code></pre>

<p>Now we check if we have a negative number. We do, so we have to get rid of the sign and then invert each trit:</p>

<pre class="lang-none prettyprint-override"><code>-+!!+0 │ /-/ { s/-//; y/+!/!+/; }
# =&gt; !++!0
</code></pre>

<p>Finally, we replace <code>!</code>s with <code>-</code>s:</p>

<pre class="lang-none prettyprint-override"><code>!++!0 │ y/!/-/
# =&gt; -++-0
</code></pre>

<p>That's it!</p>
</div>
<div id="pu12" class="pu"><h1>JavaScript <strike>108</strike> 102 (ES6, no recursive calls)</h1>

<pre><code>t=a=&gt;{v="";if(0==a)v="0";else for(a=(N=0&gt;a)?-a:a;a;)v="0+-"[r=(a%3+3)%3]+v,2==r&amp;&amp;++a,a=a/3|0;return v}
</code></pre>

<p>Original entry at 108</p>

<pre><code>t=a=&gt;{v="";if(0==a)v="0";else for(a=(N=0&gt;a)?-a:a;a;)v=(N?"0-+":"0+-")[r=a%3]+v,2==r&amp;&amp;++a,a/=3,a|=0;return v}
</code></pre>

<p>Not as fancy as @edc65's answer... I'd appreciate any help reducing this further...</p>
</div>
<div id="pu13" class="pu"><h2>Java, <s>327</s> 269 characters</h2>

<p>My first try in code golfing. I don't know any of those really short languages, so here's a solution in Java. I'd appreciate advice to further shorten it.</p>

<pre><code>import java.util.*;class a{public static void main(String[] h){int i=Integer.parseInt(new Scanner(System.in).nextLine());String r="";while(i!=0){if(i%3==2||i%3==-1){r="-"+r;}else if(i%3==1||i%3==-2){r="+"+r;}else{r="0"+r;}i=i&lt;0?(i-1)/3:(i+1)/3;}System.out.println(r);}}
</code></pre>

<p>Try it here : <a href="http://ideone.com/fxlBBb" rel="nofollow">http://ideone.com/fxlBBb</a></p>

<p><strong>EDIT</strong></p>

<p>Replaced <code>BufferedReader</code> by <code>Scanner</code>, allowing me to remove <code>throws</code> clause, but had to change import (+2 chars).
Replaced <code>Integer</code> by <code>int</code>. Unfortunately, program won't compile if there isn't <code>String[] h</code> in <code>main</code>.</p>
</div>
<div id="pu14" class="pu"><h1>Pyth, <s>71</s> <s>24</s> 23</h1>
<pre><code>L?+y/hb3@&quot;0+-&quot;%b3bk|yQ0
</code></pre>
<p>This is a recursive solution, based on @xnor's 40 character recursive function. <code>y</code> constructs the baanced ternary of the input, by finding the last digit using the mod 3 index, and then uses the fact that the rest of the digits are equal to the balanced ternary for (n+1)/3, using floored division. Then, it calls the function, returning the result, or 0 if the input is 0.</p>
<p><a href="http://isaacg.scripts.mit.edu/pyth/index.py" rel="nofollow noreferrer">Try it here.</a></p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (E6) 68</h1>
<p>A complete program, as requested, with I/O via popup. The core is the R function, 49 bytes.</p>
<p>Not so different from the other recursive solutions, I guess.
Taking advantage of the automatic conversion between string and number to avoid a special case for &quot;0&quot;</p>
<pre class="lang-js prettyprint-override"><code> alert((R=(n,d=(n%3+3)%3)=&gt;n?R((n-d)/3+(d&gt;1))+'0+-'[d]:'')(prompt()))
</code></pre>
<p><strong>Test</strong> in FireFox/FireBug console, using just the R function</p>
<pre><code>['0','8','19','-14','414'].map(x =&gt;x +': '+R(x))
</code></pre>
<p><em>Output</em></p>
<pre><code>[&quot;0: 0&quot;, &quot;8: +0-&quot;, &quot;19: +-0+&quot;, &quot;-14: -+++&quot;, &quot;414: +--0+00&quot;]
</code></pre>
</div>
<div id="pu16" class="pu"><h1>Mathematica, 54 characters</h1>

<p>Similar to xnor's recursion</p>

<p>Unicode symbols are used to replace <code>Floor</code>,<code>Part</code>,<code>!=</code></p>

<pre><code>If[(t=⌊(#+1)/3⌋)≠0,#0@t,""]&lt;&gt;{"0","+","-"}〚#~Mod~3+1〛&amp;
</code></pre>

<h2>Output</h2>

<p>Stored as <code>f</code> for brevity and written without unicode incase you can't view</p>

<pre><code>f=If[(t=Floor[(#+1)/3])!=0,#0@t,""]&lt;&gt;{"0","+","-"}[[#~Mod~3+1]]&amp;
f /@ {8, 19, -14, 414} // Column

+0-
+-0+
-+++
+--0+00
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Mathematica - <s>157</s> <s>154</s> <s>146</s> 128</h1>

<p>The golfed version:</p>

<pre><code>f=(s="";n=#;i=Ceiling@Log[3,Abs@#]~Max~0;While[i&gt;=0,s=s&lt;&gt;Which[n&gt;=(1+3^i)/2,n-=3^i;"+",n&gt;-(1+3^i)/2,"0",1&gt;0,n+=3^i;"-"];i--];s)&amp;
</code></pre>

<p>And with indentation for legibility:</p>

<pre><code>f = (s = ""; n = #; i = Ceiling@Log[3, Abs@#]~Max~0;
 While[i &gt;= 0, 
  s = s&lt;&gt;Which[
   n &gt;= (1 + 3^i)/2, n -= 3^i; "+",
   n &gt; -(1 + 3^i)/2, "0", 
   1 &gt; 0, n += 3^i; "-"
  ];
 i--];
s)&amp;
</code></pre>

<p>Usage:</p>

<pre><code>f[414]
</code></pre>

<p>Output:</p>

<pre><code>+--0+00
</code></pre>

<p>Many thanks to Martin Büttner in reducing the number of characters.</p>
</div>
<div id="pu18" class="pu"><h2>Python 2: 58 chars</h2>

<pre class="lang-python prettyprint-override"><code>n=input()
s=""
while n:s="0+-"[n%3]+s;n=-~n/3
print s or 0
</code></pre>

<p>Generates the balanced ternary digit-by-digit from the end. The last digit is given by the residue <code>n%3</code> being <code>-1</code>,<code>0</code>, or <code>+1</code>. We then remove the last digit and divide by 3 using Python's floor-divide <code>n=(n+1)/3</code>. Then, we proceed recursively with the new last digit until the number is 0.</p>

<p>A special case is needed for the input <code>0</code> to give <code>0</code> rather than the empty string.</p>

<hr>

<p>The specs don't allow this, but if one could write a function instead of a program and output the empty string for 0, a 40 char solution would be possible.</p>

<pre class="lang-python prettyprint-override"><code>g=lambda n:n and g(-~n/3)+"0+-"[n%3]or""
</code></pre>
</div>
<div id="pu19" class="pu"><h1>CJam, 24 bytes</h1>
<p>I came up with this independently and I think this is, most probably, the only way to handle this.</p>
<pre><code>li{_3%&quot;0+-&quot;=\_g+3/}h;]W%
</code></pre>
<p>Algorithmically, its similar to xnor's answer.</p>
<p><a href="http://cjam.aditsu.net/" rel="noreferrer">Try it online here</a></p>
<p><strong>How it works</strong>:</p>
<pre><code>li{               }h                 &quot;Read input, convert to integer and run the code block&quot;
                                     &quot;until stack has 0 on top&quot;;
   _3%                               &quot;Copy and get modulus 3&quot;;
      &quot;0+-&quot;=                         &quot;Take the correct character based on the above modulus&quot;;
            \_g+                     &quot;Swap, copy and take signum of the number and add&quot;
                                     &quot;that to it, incrementing the number if positive,&quot;
                                     &quot;decrementing otherwise&quot;;
                3/                   &quot;Integer divide by 3 and continue until 0&quot;;
                    ;]               &quot;Pop the residual 0 and wrap everything in array&quot;;
                      W%             &quot;Reverse to get in binary format (right handed)&quot;;
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/41752/">41752</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




