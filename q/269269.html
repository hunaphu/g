<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269269</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>8421</td><td>64bit Aarch64 assembly</td><td>250130T051856Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/277996#277996">petroleu</a></td></tr>
<tr d-ix="1"><td>093</td><td>Excel VBA</td><td>240129T203518Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269619#269619">Taylor R</a></td></tr>
<tr d-ix="2"><td>040</td><td>APLNARS</td><td>240121T065310Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269419#269419">Rosario</a></td></tr>
<tr d-ix="3"><td>094</td><td>Perl 5</td><td>240120T175541Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269413#269413">Kjetil S</a></td></tr>
<tr d-ix="4"><td>066</td><td>R</td><td>240118T034845Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269340#269340">qwr</a></td></tr>
<tr d-ix="5"><td>020</td><td>Pyth</td><td>240119T195651Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269380#269380">CursorCo</a></td></tr>
<tr d-ix="6"><td>4341</td><td>Uiua</td><td>240118T220822Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269362#269362">Maxim Kh</a></td></tr>
<tr d-ix="7"><td>096</td><td>Python 2</td><td>240116T200154Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269301#269301">Albert.L</a></td></tr>
<tr d-ix="8"><td>013</td><td>Jelly</td><td>240116T135441Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269290#269290">Nick Ken</a></td></tr>
<tr d-ix="9"><td>065</td><td>APL+WIN</td><td>240116T145709Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269292#269292">Graham</a></td></tr>
<tr d-ix="10"><td>022</td><td>05AB1E</td><td>240116T111154Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269289#269289">Kevin Cr</a></td></tr>
<tr d-ix="11"><td>088</td><td>Google Sheets</td><td>240115T225051Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269270#269270">doubleun</a></td></tr>
<tr d-ix="12"><td>087</td><td>Ruby</td><td>240116T084123Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269286#269286">G B</a></td></tr>
<tr d-ix="13"><td>110</td><td>Python 3.8 prerelease</td><td>240115T231529Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269274#269274">l4m2</a></td></tr>
<tr d-ix="14"><td>076</td><td>R</td><td>240116T025423Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269283#269283">Giuseppe</a></td></tr>
<tr d-ix="15"><td>nan</td><td>C gcc</td><td>240115T225814Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269273#269273">vengy</a></td></tr>
<tr d-ix="16"><td>064</td><td>PARI/GP</td><td>240116T014630Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269281#269281">alephalp</a></td></tr>
<tr d-ix="17"><td>nan</td><td>Wolfram LanguageMathematica</td><td>240116T011738Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269278#269278">138 Aspe</a></td></tr>
<tr d-ix="18"><td>084</td><td>Google Sheets</td><td>240116T004028Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269276#269276">z..</a></td></tr>
<tr d-ix="19"><td>046</td><td>Charcoal</td><td>240116T004033Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269277#269277">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>64-bit Aarch64 assembly, 84 bytes / 21 insns</h1>
<pre><code>f:
    mov  x0, xzr
    mov  x1, xzr
    fneg d2, d0      // x = -a
    fneg d3, d1      // y = -b
    fmov d4, #1.0
    fmul d5, d0, d0  // a^2
    fmul d6, d1, d1  // b^2

    1:
        fmul  d7,  d3,  d3 // y^2
        fdiv  d7,  d7,  d6 // y^2/b^2
        fdiv  d16, d2,  d5 // x  /a^2
        fmadd d16, d16, d2, d7 // x/a^2 * x + y^2/b^2
        fcmp  d16, d4
        cinc  x0, lt
        cinc  x1, eq
        fadd  d2, d2, d4
        fcmp  d2, d0
        b.le  1b
        fneg  d2, d0
        fadd  d3, d3, d4
        fcmp  d3, d1
        b.le  1b
    ret
</code></pre>
<p>This is a crude, brute-force search from (-a, -b) to (a, b) checking whether the lattice points match. It's not well-optimised, but I don't really see a better way out of it. It expects <code>a, b</code> as doubles in <code>d0, d1</code> and (hopefully*) returns the number of points on the interior in <code>x0</code> and on the perimiter in <code>x1</code>. Its signature would look something like <code>struct answer { uint64_t interior; uint64_t perimiter }; extern answer f(double, double);</code></p>
<p>It should* work for a reasonable range of input numbers.</p>
<p>Notes:</p>
<ul>
<li>*I haven't tested it, but the compiler emits what looks like closely enough similar code at a glance, but it wastes instructions setting up temporary registers for the return values, and doesn't perform a <code>fmadd</code> fuse instead choosing to just multiply and add separately (why? this is a conceptually pretty trivial optimisation that both GCC and Clang fail to do even on <code>-Os</code>)</li>
</ul>
</div>
<div id="pu1" class="pu"><h1>Excel VBA, 93 Bytes</h1>
<p>An immediate window function that takes input <span class="math-container">\$a\$</span> from <code>[A1]</code> and <span class="math-container">\$b\$</span> from <code>[B1]</code> of the activesheet object and outputs to the immediate window console.</p>
<p>Assumes a clean console environment. Maybe re-run after executing <code>u=0:v=0</code>.</p>
<p><sup> <i> Note: This solution has been restricted to 32-Bit versions of Excel VBA as <a href="https://codegolf.stackexchange.com/a/143645/61846"><code>^</code> is the <code>LongLong</code> type literal</a> in 64-Bit versions </i> </sup></p>

<pre class="lang-vb prettyprint-override"><code>For x=[-A1]To[A1]:For y=[-B1]To[B1]:t=x^2/[A1^2]+y^2/[B1^2]:u=u-(t&lt;1):v=v-(t=1):Next y,x:?u,v
</code></pre>
<h3>Commented Version</h3>
<pre class="lang-vb prettyprint-override"><code>For x=[-A1]To[A1]            '' iter over x axis
  For y=[-B1]To[B1]          '' iter over y axis
    t=x^2/[A1^2]+y^2/[B1^2]  '' calc lattice point sumsq
    u=u-(t&lt;1)                '' incr. internal point count if needed
    v=v-(t=1)                '' incr. boundary point count if needed
Next y,x                     '' loop
?u,v                         '' print point counts
</code></pre>
</div>
<div id="pu2" class="pu"><h1>APL(NARS), 40 chars</h1>
<pre><code>+/¨0(&gt;,=)⊂{+/¯1,2*⍨⍵÷k}¨,(⊂k+1)-⍳1+2×k←⎕
</code></pre>
<p>How to use and test:</p>
<pre><code>      +/¨0(&gt;,=)⊂{+/¯1,2*⍨⍵÷k}¨,(⊂k+1)-⍳1+2×k←⎕
⎕:
      5 3
41 4 

      {+/¨0(&gt;,=)⊂{+/¯1,2*⍨⍵÷k}¨,(⊂k+1)-⍳1+2×k←⍵}¨(5 3)(5 15)(8 5)(8 1)(9 15)(15 15)(20 20)
 41 4  221 12  119 4  15 4  417 4  697 12  1245 12 
 
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 94 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{($a,$b,@r)=@_;map{//;$r[1+($b*$b*$'*$'+$a*$a*$_*$_&lt;=&gt;$a*$a*$b*$b)]++for-$b..$b}-$a..$a;@r}
</code></pre>
<p><a href="https://tio.run/##bZLRasIwFIbv@xSHLWytrbp0OmezjrK7XexusAuRkmAdhZlIWhkiPnuXxCQdajjQLzn/@ZvkZFvJn2m3ayr4rJo2yz6ErEiA1nnX7NghRDRBLClklBcl2dDtYTwmSC5wHCI20HGvIkZ0oKNU8ZK/2pnOR8s4Xgs5RGw0Quw4RFR9KSnksSPBZg9Fq34KOYQBqHELFOxgDt55W8laSM1vYsdXVO6NeAHTxGoeHUywI8UAy@RciR2laS/Faa98dqt9CZ4n1zy9El@YnynnF4IJnl319AIPT/PZ1X2mD@4gDnA66ffslREJ1P2H5p6jg1na7G1X0S/lbVlzC0yoJqOSeJHO6MU7tD5VRKdc3Zgc@Hq4@VIEtW1V5jNazNXUkLG4@efBhPPQdPJgtsWZz@jHINTUkPc4BivBq1Ifq@bfpPsD" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Spaceship operator <code>&lt;=&gt;</code> comes in handy.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>68</s> 66 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(a,b,y=b/a*(a^2-(-a:a)^2)^.5)c(B&lt;-sum(!y%%1)-1,sum(y%/%1+.5)-B)*2
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGSNAVbhaWlJWm6FjedYjQSdZJ0Km2T9BO1NBLjjHQ1dBOtEjXjjDTj9Ew1kzWcbHSLS3M1FCtVVQ01dQ11QJxKVX1VQ22gtK6TppYR1CTLNA1THWNNBS4QbWgKZljowGhDTSBlCRIH0oamUIaRgY6RgSbEgAULIDQA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Total points of boundary plus interior is (up to precision error) <span class="math-container">$$\sum_{-a\le x \le a} \# \left\{ y \in \mathbb Z : |y| \le (b/a) \sqrt{a^2-x^2} \right\}$$</span></p>
<p><span class="math-container">$$ = \sum_{-a \le x \le a} \left( 2 \left\lfloor (b/a) \sqrt{a^2-x^2} \right\rfloor + 1 \right)$$</span></p>
<p><span class="math-container">\$B\$</span> counts boundary points, subtracting over-counted cases <span class="math-container">\$|y| = a\$</span>.</p>
<p><code>y=b*(1-(-a:a/a)^2)^.5</code> actually fails the test cases due to precision errors.</p>
<p><a href="https://codegolf.stackexchange.com/a/269339/17360">Floating point tricks in R</a></p>
<p>-2 bytes by rearranging some terms, credit Giuseppe.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 20 bytes</h1>
<pre><code>hMlBPx1Sm.acVdQ*Fm}_
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/P8M3xymgwjA4Vy8xOSwlUMsttzb@//9oUx3jWAA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Takes input in the form <code>[a, b]</code> and outputs as <code>[interior, boundary]</code>.</p>
<h3>Explanation</h3>
<pre><code>                           # implicitly assign Q = eval(input())
hMlBPx1Sm.acVdQ*Fm}_ddQ    # implicitly add ddQ
                 m    Q    # map lambda d over Q
                  }_dd     #   inclusive_range(-d, d)
               *F          # cartesian product of the two ranges
        m                  # map over lambda d
           cVdQ            #   vectorized divide d by Q
         .a                #   vector size
       S                   # sort
     x1                    # get list of indices where 1 appears
    P                      # remove the last element
  lB                       # bifurcate over length
hM                         # map to head, this will get the first element for the list and add one for the integer 
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Uiua, <del>43</del> 41 bytes</h1>
<p>Returns the number of interior points on the top of the stack, and the number of boundary points on the bottom.</p>
<pre><code>∩/+&lt;1:=1./+ⁿ2÷:-⍉☇1⇡+1×2..⊂
</code></pre>
<p><a href="https://uiua.org/pad?src=0_8_0__4oipLys8MTo9MS4vK-KBvzLDtzot4o2J4piHMeKHoSsxw5cyLi7iioI1IDMK" rel="nofollow noreferrer">Try It</a></p>
<pre><code>∩/+&lt;1:=1./+ⁿ2÷:-⍉☇1⇡+1×2..⊂
               -⍉☇1⇡+1×2..⊂ # generates a point array spanning the [-a,a]×[-b,b] rectangle, 
                             # we also leave a copy of a and b to divide the coordinates later
             ÷: # divide each x coordinate by a and each y by b
           ⁿ2 # square each coordinate
         /+ # sum each coordinate pair
        . # create a copy of the sums so we can check two conditions (interior and boundary)
      =1 # boundary check
   &lt;1: # the interior point check
∩/+ # since the checks return boolean masks, sum them to get a point count.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 96 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,b:divmod(sum((4j,4,0)[cmp(a*b,abs(x/a*a+x%a*b*1j))]for x in range(a*b+1))-2*a-2*b+1,1j)
</code></pre>
<p><a href="https://tio.run/##XY3LDoIwEEX3fEU3Jp0yKkVIFMOXqIupgEJ4NAUNfj226gJZTHLP5Mxc/RruXRtORXqeampURoxQJVn5bLqM94@G86jCCAM4XRvNSSgk1fNxS4L8cWVZyArgUnSGjaxsmaH2ljvPlwDrUJAdm9FaU5YXTGtTtgPXkNieVB8/yNyKNianGtBl9c2e99MLHuMOYI4ynvMeFyjneFjYcnkeBhgGf4Z7ML0B" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Returns boundary,interior. Test bed borrowed from @l4m2 and modified. Testing code prettifies integer valued complex numbers into actual integers.</p>
<h2>How?</h2>
<p>Uses complex numbers for two purposes:</p>
<ol>
<li><p>abs with complex argument for Euclidean norm</p>
</li>
<li><p>as a means of 2d vector summation without importing any libraries.
Special Python 2 semantics of div and mod for complex operands is used to recover real and imaginary parts after summing.</p>
</li>
</ol>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 13 bytes</h1>
<pre><code>rNŒp²÷²§’ṠĠẈṖ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/7/I7@ikgkObDm8/tOnQ8kcNMx/uXHBkwcNdHQ93Tvv/cOdiy4e7ew4tebhjsVHYo6Y1h7Y@3LnP@lHDHAVdO4VHDXOtD7cDBVS4Hu7ecrgdKB/5/78ppzGniSGnCZcpp6Epp5GRIaehEZcFJ5BnaAkUteA0BImbcFmCKUNzINMQrNTM0hyk1MiAE4gMjUyAgkYA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A monadic link that takes a pair of integers and returns a pair of integers. Works perfectly for all of the examples, but there is a theoretical risk of floating point inaccuracy.</p>
<h2>Explanation</h2>
<pre><code>rN            | Range from a to -a and b to -b
  Œp          | Cartesian product
    ²         | Squared
     ÷²       | Divide by a ** 2, b ** 2
       §      | Sum inner lists
        ’     | Subtract 1
         Ṡ    | Signs
          Ġ   | Indices of like items in groups
           Ẉ  | Lengths
            Ṗ | Remove last (those outside the border)
</code></pre>
<h2>Alternative <a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 16 bytes</h2>
<pre><code>rNŒp²Uḋ²_²P$ṠĠẈṖ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/7/I7@ikgkObQh/u6D60Kf7QpgCVhzsXHFnwcFfHw53T/j/cudjy4e6eQ0se7lhsFPaoac2hrQ937rN@1DBHQddO4VHDXOvD7UABFa6Hu7ccbgfKR/7/b8ppzGliyGnCZcppaMppZGTIaWjEZcEJ5BlaAkUtOA1B4iZclmDK0BzINAQrNbM0Byk1MuAEIkMjE6CgEQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>This version only uses integer arithmetic so should always be accurate even for large inputs (though like the other answer has <span class="math-container">\$O(m \times n)\$</span> complexity).</p>
</div>
<div id="pu9" class="pu"><h1>APL+WIN, 65 bytes</h1>
<p>Prompts for a followed by b and outputs boundary the interior:</p>
<pre><code>((1+2×a)++/2×⌊n)-⎕←2×¯1++/0=1|n←⎕×(1-(((⌽⍳a),0,⍳a)*2)÷(a←⎕)*2)*.5
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlyPWooz3tv4aGobbR4emJmtra@kD6UU9XnqYuUA1QBZB7aL0hUNzA1rAmDygAFD48XcNQV0ND41HP3ke9mxM1dQx0wLSWkebh7RqJEEUgnpae6X@gBVz/07hMuYy5QKShKZCy4IKQhkDSEiJkCJUyMgAiAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>23</s> 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ýí€ûnR**`âOIPns-.±{Åγ¦
</code></pre>
<p>Outputs the pair in reversed order, so <span class="math-container">\$[boundaryCount, interiorCount]\$</span>.</p>
<p><a href="https://tio.run/##AS8A0P9vc2FiaWX//8Odw63igqzDu25SKipgw6JPSVBucy0uwrF7w4XOs8Km//9bNSwzXQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeXhCf8Pzz289lHTmsO784K0tBIOL/KvDMgr1tU7tLH6cOu5zYeW/df5Hx1tqmMcqwMkDU2BlIUOhDQEkpYQIUOolJGBjpFBbCwA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Ý                # Convert both values in the (implicit) input-pair to [0,value]-ranged
                 # lists
 í               # Reverse each inner list
  €û             # Palindromize each inner list
    n            # Square each inner value
     R           # Reverse the list
      **         # Multiply each to the (implicit) input-pair twice
        `        # Pop and push both lists separately to the stack
         â       # Create all possible pairs using the cartesian product
          O      # Sum each inner pair together
           IP    # Push the product of the input-pair
             n   # Square that
              s- # Subtract the sums of the list from that value
.±               # Get the sign (-1 if negative; 0 if 0; 1 if positive) of each
  {              # Sort these -1s, 0s, and 1s
   Åγ            # Then run-length encode it, pushing list [-1,0,1] (which we won't use)
                 # and the list of lengths
     ¦           # Remove the first value (for the amount of -1s)
                 # (after which the resulting pair is output implicitly)
</code></pre>
<p><a href="https://tio.run/##bZK/bhNBEMZ7nmLkhiS6Q44QDRFKQYFSRIlCGUVi7RvfjbQ3e9k/tgIdEo9BQ0EFBUKiobN7HoIXMTO758SRKG/v@37ffDvrgpkRbreTMx5SfAmT6tX61@mTyWvHS/QRZi52EB0YuJ5WS2MT3tTecIsNWArZsPlcLFcojoCAZt4BMaN/kHwvkktjiRvvenr/X93fj982v4v07W0y/pEop6uKH@fFDmEw5MEtMiio5qpozpONNNi7wskEbaMW0sJ1NsYVzTP56Ghs79FEBGMtDC4EmtkSETRDzJJ6n/Ru82WcOPX746pe/1@M1VPocm7IxRoYvGvSPI7EvXHUdHbJO@gseiOyvQILuUDxUI4PdRG@wVjw1DIc1MdAC2BsTaQlnsBUP6cnkI@lEunxoWY/cJX2bP1jzHU@8/oKDDfgE9cWuZXHgDx3jcwbKxikE3Erj0NvQ2kZFOBg1ZFgVwiN46cRUpAw5ex0hZULfNh8@vNzt9HeLctCF3LZcdfX@Xxmepc42@vj@wySnSQvejYWPAZZ@KFi119Pt9vrF9Xzm38" rel="nofollow noreferrer">Try it online with step-by-step debug lines.</a></p>
</div>
<div id="pu11" class="pu"><h1>Google Sheets, 88 bytes</h1>
<pre><code>=frequency(sort(sequence(2*A1+1,1,-A1)^2/A1^2+sequence(1,2*B1+1,-B1)^2/B1^2),{1-9^-9,1})
</code></pre>
<p>Put <span class="math-container">\$a\$</span> in cell <code>A1</code>, <span class="math-container">\$b\$</span> in cell <code>B1</code> and the formula in cell <code>C1</code>. The output is in cells <code>C1:C2</code> with residue in <code>C3</code>.</p>
<p>Generates integer <span class="math-container">\$x\$</span> and <span class="math-container">\$y\$</span> sequences for lattice points in a rectangle that bounds the ellipse and calculates the distance from origin at each point. Uses <a href="https://support.google.com/docs/answer/3094286" rel="nofollow noreferrer">frequency()</a> to find points within and on the ellipse. The residue shows points within the bounding rectangle but outside the ellipse. Uses <a href="https://support.google.com/docs/answer/3093150" rel="nofollow noreferrer">sort()</a> but as an array enabler only.</p>
<p>Earlier proof-of-concept version to confirm that this is easily solvable in a spreadsheet (<strong>160 bytes</strong> golfed, 279 ungolfed):</p>
<pre><code>=let(a, A1, b, B1, r, 
  map(sequence(2 * a + 1, 1, -a), lambda(x, 
    map(sequence(1, 2 * b + 1, -b), lambda(y, let( 
      d, x^2 / a^2 + y^2 / b^2, 
      ifs( 
        d = 1, 2, 
        d &lt; 1, 1, 
        1, 0 
      ) 
    ))) 
  )), 
  { countif(r, 1), countif(r, 2) } 
)
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 87 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a,b{*r=0,0,w=a*b;(k=*-w..w).product(k).map{|x,y|r[w*w&lt;=&gt;x*x+y*y]+=1[x%a+y%b]};r[0,2]}
</code></pre>
<p><a href="https://tio.run/##LcqxCoMwEADQvV/RRdDLGaJFKNjzR8INSYuLlIagJEH99ijY7Q3PLzblkXI9GLQreFKoMJAB25cTQR2kDJV0/vdZ3nM5VfJr3LpFTJvXAcKLhghRJEgsqNGxMCIVlvfea4Ut79ndR93hg28Xmu7SE/9oz6Y4Hw" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 110 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,b,q=2:[sum(0&gt;(t:=x*x*b*b+y*y*a*a-a*a*b*b)or(q:=q+(t&lt;1))*0for x in range(-a,a)for y in range(-b,b)),q]
</code></pre>
<p><a href="https://tio.run/##XctBDsIgEAXQvadgydBpAm2a1Ea8iLoYotUmlhbEpJwerRvRxSze//PnGG6TrdvZp16zY7rTaM7ECA06XXWHx3Pkcs9DpxexCCNMEUUUJKh832qYPHeddgUPOwUgZD95trDBMk/2euElIcGaxSwzaADQndLsBxt4zxusATZfqSZji79Smba/r@pvWkmsZN5/xukF" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Consider four quarter</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.r-project.org/" rel="noreferrer">R</a>, 76 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b,z=c(a,b)^-2%*%t(expand.grid(-a:a,-b:b)^2))c(sum(z&lt;1),sum(z==1))
</code></pre>
<p><a href="https://tio.run/##HclNCoAgEEDhfadoE8zEGGkEIXmVQC2jRRb9QHR5S1ffg3cEl/csD@729lo2D5oMvcpGcWCiKIsLpmfXfqzmYxmBaamJGflfgWjhvFd4e46UQimOGBy01GAW4W20o4SoSdQYPg" rel="noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>May have issues due to numerical precision. Naive algorithm: loop over all lattice points in the <span class="math-container">\$2a \times 2b\$</span> grid centered around the origin, and count the points with the requisite relationship.</p>
<h1><a href="https://www.r-project.org/" rel="noreferrer">R</a>, 85 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b,p=a^2*b^2,z=c(b,a)^2%*%t(expand.grid(-a:a,-b:b)^2))c(sum(z&lt;p),sum(z==p))
</code></pre>
<p><a href="https://tio.run/##HclNCoMwEEDhfU/hRpiRidgpQhFzlcBMbIoLY/AHipdP1dX34C05FL0pctij38Y5gpBSsuK4Usd0WA9Kgo7Lqtzg80sSh/q7jAMY6YSMdnpORA/rPsHRJ6Q7rE2IOUBLL3xcPNvLN91wQ9xg/gM" rel="noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>More precise.</p>
</div>
<div id="pu15" class="pu"><h1>C (gcc), <del>133</del> 121 bytes</h1>
<p><em>-12 thanks to @Neil</em></p>
<pre><code>i,x,y,l,B;e(a,b){i=B=0;for(x=-a;x&lt;=a;x++)for(y=-b;y&lt;=b;y++)l=a*a*b*b-x*x*b*b-y*y*a*a,l?i+=l&gt;0:B++;printf(&quot;%d %d\n&quot;,i,B);}
</code></pre>
<p><a href="https://tio.run/##PYrLCsIwFET3foUIhTxuIK0U1DQK@Q43SV8EYpUqmFD668ZYqJs5w5mpWV/XMVrwEMCBEi3SYPBkpZJcdPcRecm08JVMQSn@mSCZEaGSKZJxUhNNDDHME78wkJCMBnexVLozPylKxWO0w6tDu6zZZs112IEFhcUcb9oOCE@bFpWwx2JhXi7lACvzhcd1yP@XgkPBU5vjp@6c7p@Rvb8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu16" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 64 bytes</h1>
<pre><code>f(a,b)=[1+vecsum(v=2*Vec(qfrep([a,0;0,b]^2,a^2*b^2)))-t=v[#v],t]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY_BCoJAFEV_5WGbGXuCMyEUYfQVbR5jjKIhWEw2DvYtbdxE39Tf5Giu7uXcy3vc18fotj5fzDC8O1tF2--xYhpznpJYu7J4dFfmUhmeyoLdq7Y0jDTG-xhzlUnUmQzzTHLOI5s6WjmFVv3vNNqY5sl6iA5g2vpmWU9CQYAQQE9ydD4JoJo4ToxzBKIEYTMCryLxZouwqG_SbgnEXFF8_rls-AE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Yes, PARI/GP has a built-in for this.</p>
<blockquote>
<p><code>qfrep(q,B,{flag=0})</code>: vector of (half) the number of vectors of norms from <code>1</code> to <code>B</code> for the integral and definite quadratic form <code>q</code>. If flag is <code>1</code>, count vectors of even norm from <code>1</code> to <code>2B</code>.</p>
</blockquote>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language(Mathematica)</a>, <del>135</del> 106 bytes</h1>
<p>Saved 29 bytes thanks to @vengy</p>
<hr />
<p>Here <code>a</code> and <code>b</code> both are positive integers.</p>
<p>Golfed version. <a href="https://tio.run/##hY7NT4NAEMXv/BVztGUaPkwTP7oX9EKipjcP69IMdJFN2l1TBi0h/O2INT0Zy2nmzXu/vNkTV3pPbAoahlLSBvONuhPPbtvstOxSEWIiwh4fnXw1XMmOxTGLA8pivx1nnsU9pqXkVYSp759WISJMfF8phd0RF4TUY9fiIse8V/ddikmvhgfXWH4iHov12hnLtSi9q/mL@8LWNVCQhabWwJWpoWxswcZZYAfFDzeeNex@Yfg40VC6A5Bt4c17N5/aAo1qC/l85v2tkkuEawVBsD6M8p9AtFQXAjcIU350yb@dKogmX4hDhDg8J4Zv" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>f[a_,b_]:=Module[{I=0,B=0},Do[With[{t=x^2/a^2+y^2/b^2},If[t&lt;1,I++,If[t==1,B++]]],{x,-a,a},{y,-b,b}];{I,B}]
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##hVJNb4JAEL3zK97JtLINQmNiPzj1ZNI2Nj3StVlgURLZbWBpIYbfTkdRG02VZJOZN/PezOzsZsIsZSZMGom2fdKlMs/CEJIznSpTBOJzqoxcyJwh3Lsc9z5edFyuZGABayLKPNV5J4GPEZGpVCzy@i/WMOLSeS@zjQqYJsGu4FtQcQwGOMCaM2w5W1Y19xwx92CjJi8k7xEuw3Fb2z5Izoh8f6M6Hsy2@U7UWc62Zl0x3AgG0TCsa/JDEjaU4g/dJU7ufFq2sXh7NXzVP6zWJSKhUBYSZpkWSEoVmVQrGI1os28KS6y6peOrW1eicwhV48NapN9SQRCKEQ6vrX@eaMxwy@E4s5zgGYI75hcIE4a@vHspf9fXwO0dwaM/4432jPYX" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>CountLatticePoints[a_Integer, b_Integer] := Module[
  {interiorPoints = 0, boundaryPoints = 0},
  
  Sum[
    If[IntegerQ[x] &amp;&amp; IntegerQ[y], 
      If[x^2/a^2 + y^2/b^2 &lt; 1, interiorPoints++, 
        If[x^2/a^2 + y^2/b^2 == 1, boundaryPoints++]
      ]
    ],
    {x, -a, a}, {y, -b, b}
  ];
  
  {interiorPoints, boundaryPoints}
]
</code></pre>
</div>
<div id="pu18" class="pu"><h1>Google Sheets, 84 bytes</h1>
<p>Assuming <span class="math-container">\$a\$</span> is in A1 and <span class="math-container">\$b\$</span> is in B1.</p>
<pre class="lang-cpp prettyprint-override"><code>=SORT(COUNTIF(SEQUENCE(2*A1+1,1,-A1)^2/A1^2+SEQUENCE(1,2*B1+1,-B1)^2/B1^2,{&quot;&lt;1&quot;,1}))
</code></pre>
<del>
92 bytes
<p>=SORT(COUNTIF(MAKEARRAY(2<em>A1+1,2</em>B1+1,LAMBDA(x,y,SUMSQ((x-A1-1)/A1,(y-B1-1)/B1))),{&quot;&lt;1&quot;,1}))
</del></p>
<del>
93 bytes
<p>=LET(a,A1,b,B1,SORT(COUNTIF(SEQUENCE(2<em>a+1,1,-a)^2/a^2+SEQUENCE(1,2</em>b+1,-b)^2/b^2,{&quot;&lt;1&quot;,1})))
</del></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 46 bytes</h1>
<pre><code>ＮθＮηＦＸ×η…·±θθ²ＦＸ×θ…·±ηη²⊞υ⁻Ｘ×θη²⁺ικＩ⟦ΣＥυ›ι⁰№υ⁰
</code></pre>
<p><a href="https://tio.run/##dY4xC8IwEEb3/oqMF4igQifHDtKhpaibOMQSm2Cbtkmu/vx4EQRRXA4efO9xrZauHWUfY2knDDUOV@Vg5rvskzXxbXQMmvFBeDKD8qAFK23bozeLOkjbKahVJ4MiW7CZ09lyzn60@Z@mydBvrUGvAQWrjEX/7evXSLCGKmAEu3NODzbO2ACF9AHORxygklMq7J2iuku7NU/5YkTaYcILeTHm2SaPq6V/Ag" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Similar approach to @vengy's C answer.</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>a</code> and <code>b</code>.</p>
<pre><code>ＦＸ×η…·±θθ²
</code></pre>
<p>Loop <code>x</code> from <code>-a</code> to <code>a</code> inclusive.</p>
<pre><code>ＦＸ×θ…·±ηη²
</code></pre>
<p>Loop <code>y</code> from <code>-b</code> to <code>b</code> inclusive.</p>
<pre><code>⊞υ⁻Ｘ×θη²⁺ικ
</code></pre>
<p>Calculate the squared distance in from the perimeter, multiplied by <code>a²b²</code>.</p>
<pre><code>Ｉ⟦ΣＥυ›ι⁰№υ⁰
</code></pre>
<p>Output the number of points for where this is positive and the number for where this is zero.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269269/">269269</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




