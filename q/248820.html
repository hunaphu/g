<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::248820</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>090</td><td>Desmos</td><td>220620T091105Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248827#248827">fireflam</a></td></tr>
<tr d-ix="1"><td>080</td><td>Desmos</td><td>250117T174510Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/277726#277726">fireflam</a></td></tr>
<tr d-ix="2"><td>072</td><td>Python 3.8 prerelease</td><td>231201T091050Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/267215#267215">att</a></td></tr>
<tr d-ix="3"><td>019</td><td>BQN</td><td>220621T073501Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248875#248875">Mama Fun</a></td></tr>
<tr d-ix="4"><td>080</td><td>JavaScript Node.js</td><td>231129T060529Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/267162#267162">l4m2</a></td></tr>
<tr d-ix="5"><td>019</td><td>Uiua</td><td>231129T013725Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/267160#267160">ronwnor</a></td></tr>
<tr d-ix="6"><td>7776</td><td>Python 3 with numpy</td><td>220620T121422Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248831#248831">m90</a></td></tr>
<tr d-ix="7"><td>190</td><td>brev</td><td>220621T113216Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248883#248883">Sandra</a></td></tr>
<tr d-ix="8"><td>052</td><td>PARI/GP</td><td>220620T081647Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248823#248823">alephalp</a></td></tr>
<tr d-ix="9"><td>020</td><td>Vyxal Ṁ</td><td>220621T012754Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248867#248867">naffetS</a></td></tr>
<tr d-ix="10"><td>026</td><td>Charcoal</td><td>220620T234131Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248862#248862">Neil</a></td></tr>
<tr d-ix="11"><td>111</td><td>Haskell</td><td>220620T213852Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248850#248850">matteo_c</a></td></tr>
<tr d-ix="12"><td>104</td><td>Python</td><td>220620T090618Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248826#248826">jezza_99</a></td></tr>
<tr d-ix="13"><td>015</td><td>Jelly</td><td>220620T181152Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248844#248844">Jonathan</a></td></tr>
<tr d-ix="14"><td>076</td><td>Python</td><td>220620T153006Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248836#248836">loopy wa</a></td></tr>
<tr d-ix="15"><td>017</td><td>05AB1E</td><td>220620T152408Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248835#248835">Kevin Cr</a></td></tr>
<tr d-ix="16"><td>095</td><td>JavaScript ES6</td><td>220620T083041Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248824#248824">Arnauld</a></td></tr>
<tr d-ix="17"><td>083</td><td>Factor</td><td>220620T091633Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248828#248828">chunes</a></td></tr>
<tr d-ix="18"><td>138</td><td>Python 3</td><td>220620T085005Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248825#248825">tsh</a></td></tr>
<tr d-ix="19"><td>021</td><td>K ngn/k</td><td>220620T073028Z</td><td><a href="https://codegolf.stackexchange.com/questions/248820/create-bernard-from-desmos/248821#248821">Bubbler</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, <s>94</s> <s>92</s> 90 bytes</h1>
<pre><code>f(n)=0^{0^{4^{round(u+.5log_4dd)-u}-x}}forx=L,y=L
d=3y-2^n2
u=(0^{0^d}+n)/2
L=[2^n...1]-.5
</code></pre>
<p><a href="https://www.desmos.com/calculator/enhm50syno" rel="nofollow noreferrer">Try it on Desmos!</a></p>
<p>The matrix is returned in row-major order.</p>
<p><em>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/96039/aiden-chow">@Aiden Chow</a> (<code>log_4(dd)/2</code> → <code>.5log_4dd</code>)</em></p>
<p><em>-2 bytes now that list comprehensions don't require brackets on the RHS of assignments</em></p>
<p>Golfing note: <code>0^{0^{E-x}</code> can be converted to <code>\{E&gt;x,0\}</code>, but this requires moving <code>E=round(u+.5log_4d)-u</code> to its own line and doing <code>\for </code> instead of just <code>for</code>, so that is equal or +1 byte.</p>
<h2>How it Works</h2>
<p>The top third of matrix Bernard consists of right-aligned blocks of height <span class="math-container">\$2^{n-2},2^{n-4},\ldots,2^{\operatorname{mod}(n,2)}\$</span>, and the bottom two-thirds consists of right-aligned blocks of height <span class="math-container">\$2^{n-1},2^{n-3},\ldots,2^{\operatorname{mod}(n+1,2)}\$</span>. Each block has width equal to twice its height, and the top and bottom converge near <code>y=m=2^n/3</code>.</p>
<p>The main difficulty is for each <code>y</code>, find the height of the current block.</p>
<p>First we find the distance of <code>y</code> from the convergence y-value <code>m</code>. This is <span class="math-container">\$D=y-\frac{2^n}{3}\$</span></p>
<p>To figure out how many steps this is away, consider a situation where <code>n</code> is even, so the top third has step sizes <span class="math-container">\$1,4,16,\ldots\$</span>. The partial sums of this geometric sequence are <span class="math-container">\$p(k)=\frac{4^k-1}{3}\$</span>, e.g. <span class="math-container">\$p(2)=\frac{4^2-1}{3}= 5 = 1+4\$</span>.</p>
<p>Then <span class="math-container">\$(x,y)\$</span> on the top third is in step size <span class="math-container">\$4^k\$</span> iff <span class="math-container">\$p(k)\leq D&lt;p(k+1)\$</span>. This can be re-arranged to <span class="math-container">\$4^k\leq 3D+1\leq 4^{k+1}\$</span>, so <span class="math-container">\$k=\operatorname{floor}(\log_4(3D+1))\$</span></p>
<p>Ignoring golfing and the bottom side, this would give <code>{x &lt; floor(log_4(3D+1)): 1, 0}</code> for the condition for filling in 1.</p>
<p>The final golfed code uses <span class="math-container">\$d=3y-2^{n+1}\approx 3D+1\$</span> (the <code>y</code> values are flipped, so this is really proportional to the distance of <code>y</code> from <code>2^n*2/3</code>, explaining <code>2^{n+1}</code> instead of <code>2^n</code>).</p>
<p>Hence we have <code>{x &lt; floor(log_4(d)): 1, 0}</code> as the current condition. See what it looks like <a href="https://www.desmos.com/calculator/dcf52qjsyc" rel="nofollow noreferrer">on Desmos</a>.</p>
<p>There's a few problems left: nothing is filled in for the bottom two-thirds, and the heights of the top third is twice as big as it should be for odd <code>n</code>.</p>
<p>Let's deal with the first problem first by just replacing <code>log_4(d)</code> with <code>log_4(abs(d))</code> to handle negative <code>d</code>, or equivalently <code>log_4(d^2)/2</code>, which golfs to <code>.5log_4dd</code>. Then our condition becomes <code>{x &lt; floor(log_4(d)): 1, 0}</code>. See <a href="https://www.desmos.com/calculator/anznvhmvyj" rel="nofollow noreferrer">on Desmos</a>.</p>
<p>The issue now is that the heights of the top third are twice too big for odd <code>n</code>, and the heights of the bottom two-thirds are twice too big for even <code>n</code>. The solution comes down to handling off-by-half in the exponent of <code>4^{...}</code> by adding and subtracting <code>u=(0^{0^d}+n)/2</code> withing/outside the <code>round</code>. If <code>d</code> is positive (top third) and <code>n</code> is even, then <code>u</code> is an integer, so it doesn't affect the <code>round</code>. If <code>d</code> is negative (bottom two-thirds) and <code>n</code> is odd, then <code>u</code> is an integer, so it doesn't affect the <code>round</code>. Otherwise, <code>n</code> is a half-integer, so it causes <code>round</code> to behave like <code>1+floor</code>, fixing the sizing issues.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, 80 bytes</h1>
<pre><code>f(n)=g(y,x)forx=L,y=L
g(y,x)=\{y&gt;0:g(1-2y,2x-1),xx&lt;1&gt;-y,0\}
L=([1...2^n]-.5)/2^n
</code></pre>
<p><a href="https://www.desmos.com/calculator/3ldcjfta1d" rel="nofollow noreferrer">Try it on Desmos!</a></p>
<p>The matrix is returned in row-major order.</p>
<p>The recursive function <code>g</code> can be plotted implicitly to get the plot on the square <code>(0,1)^2</code>: <a href="https://www.desmos.com/calculator/mnsmv7zt1w" rel="nofollow noreferrer">Try it on Desmos!</a>.</p>
<p>The key trick over my <a href="https://codegolf.stackexchange.com/a/248827/68261">previous solution</a> is to use recursion, which wasn't around at the time of that solution.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 72 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,z=0:[l:='0'*z+2**n*'1'][n:]or f(m:=n-1,z+2**m)[::-1]+2**m*[l]
</code></pre>
<p><a href="https://tio.run/##HYpBCsMgEAC/4m11ayC2FMoGX2I9WBJbQTciuTSft8XbMDP1e3x2vj1q6z3aHMprDYL1aWdymSzMgOflisgIBrxj8nsTURayPBk9UlGOaDJ@MLrse/w/SSQWLfB7k3dForbEh0x649UCPRnUgiVUObyOMiml@w8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>BQN, 19 bytes</h1>
<pre><code>{(∾⟜×⟜⋆0¨∾˘⌽)⍟𝕩≍≍1}
</code></pre>
<p><a href="https://mlochbaum.github.io/BQN/try.html#code=RiDihpAgeyjiiL7in5zDl+KfnOKLhjDCqOKIvsuY4oy9KeKNn/CdlaniiY3iiY0xfQoK4oCiU2hvd+KImEbCqDEr4oaVNApA" rel="nofollow noreferrer">Try it here!</a></p>
<p><em>-1 thanks to @att</em></p>
<h2>Explanation</h2>
<p>Input is <em>x</em>.</p>
<ul>
<li><code>(...)⍟𝕩≍≍1</code> execute <em>x</em> times on matrix <code>[[1]]</code>...</li>
<li><code>0¨⊸∾˘</code> row-wise prepend matrix of 0s</li>
<li><code>1¨⊸∾</code> column-wise prepend matrix of 1s</li>
<li><code>⌽</code> column-wise reverse</li>
</ul>
<p>Example of how one iteration works:</p>
<pre><code>0 1      # start
1 1

0 0 0 1  # 0¨⊸∾˘
0 0 1 1

1 1 1 1  # 1¨⊸∾
1 1 1 1
0 0 0 1
0 0 1 1

0 0 1 1  # ⌽
0 0 0 1
1 1 1 1
1 1 1 1
<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 80 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=n=&gt;n?f(n-1).reduce((v,e)=&gt;[p=[...e.map(_=&gt;0),...e],...v,p.map(_=&gt;1)],[]):[[1]]
</code></pre>
<p><a href="https://tio.run/##XU5LDoIwEN1zilmY0Am0kYUbcfAgtRECxUBwSoqyIZwdgejG5OX9ZjGvLcZiKH3TvyS7yi41rWDK@FoLlgkqb6t3aYUYY4uU6Z60UsqqZ9GLO2VHjLdoNh7j/lcnaGJt8Kx1YsxSOy8YCJIUGC4Ep1WjCGEKAErHg@us6txD5FIC02HiGaTMMf07r4Nwf@CBMvCqdQ2LEELEr71xiBDBrmkwLx8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 75 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,g=[]:n and f(n-1,[0]*(p:=2**~-n)+g)[::-1]+p*[g+[1,1]*p]or[g+[1]]
</code></pre>
<p><a href="https://tio.run/##LcnBCgIhEIDh@z7FHNXVyCIIwSeRORibJrTjMHjp0qsbVKefj59f49HpfGWZs8Rn3m9bBrI1JgwEmTYoipy36YhGcYgnY96O9Fp1CsF5XNmkuiZvPRrGLl8gzrZzlwHM0mgspQs0aASSqd6Vt3DRYYH/Pvyiimpazw8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua</a>, 19 bytes</h1>
<pre><code>⍥(⊂⊃∘=.⍉⊂⊃-⍉.⇌):¤¤1
</code></pre>
<p><a href="https://uiua.org/pad?src=0_3_1__QiDihpAg4o2lKOKKguKKg-KImD0u4o2J4oqC4oqDLeKNiS7ih4wpOsKkwqQxCkIzCkI4Cg==" rel="nofollow noreferrer">Try it online!</a></p>
<h2>How it works</h2>
<pre><code>⍥(⊂⊃∘=.⍉⊂⊃-⍉.⇌):¤¤1
                   ¤¤1 1x1 matrix containing a single 1 
                  :    flip the values on the stack, bringing n to the top of the stack
⍥                      repeat the following n times:
                ⇌      reverse the matrix's rows, flipping it vertically
               .       duplicate
           ⊃-⍉        apply subtraction from the duplicate and transpose in parallel
                       subtraction from the same matrix results in a 0 matrix
        ⊂             join the resulted matrices vertically
      ⍉               transpose back, reverting the previous transpose and making the join horizontal
      .               duplicate
   ⊃∘=                apply identity (keep, do nothing) and equality against the duplicate in parallel
                      equality against the same matrix results in a 1 matrix
  ⊂                   join
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a> with <a href="https://numpy.org/" rel="nofollow noreferrer">numpy</a>, <del>77</del> 76 bytes</h1>

<pre class="lang-python prettyprint-override"><code>from numpy import*
f=lambda n:n&lt;eye(1)or kron(c_[:4:2,1:3],f(n-1)[::-1]+1)&gt;1
</code></pre>
<p><a href="https://tio.run/##DcoxDsIwDADAnVd4jKEdTGGxKB@pKhQggQhiR1YY8vrQm6@0@laZeo@mGeSXS4OUi1rd7@L89fn@9CAsl9CCI1SDj6m4x23hEx8H4mkdopORcGEeaT0QXqnH7QkkAfPyCu6MDMWSVLdVxP4H" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<ul>
<li><code>n&lt;eye(1)</code> produces <code>[[True]]</code> for n=0, the base case, and <code>[[False]]</code> for positive n, causing the expression after it to be used.</li>
<li><code>c_[:4:2,1:3]</code> produces <span class="math-container">\$ \begin{pmatrix}0&amp;1\\2&amp;2\end{pmatrix}\$</span>, and is 1 byte shorter than the direct way of writing that matrix.</li>
<li>The grid for n-1 is recursively obtained and flipped vertically, and then 1 is added, making it consist of 1s and 2s. <code>kron</code> then produces a copy of it in the top-right quadrant (&gt;1 where the pre–+1 version had a 1), a doubled copy of it in each bottom quadrant (always &gt;1), and zero in the top-left quadrant (never &gt;1).</li>
</ul>
</div>
<div id="pu7" class="pu"><h1><a href="https://idiomdrottning.org/brev" rel="nofollow noreferrer">brev</a>, 190 bytes</h1>
<pre><code>(define(b n)(define(e d v)(make-list(expt 2(- n d))v)) `(,@(e 2 `(,@(e 1 0),@(e 1 1))),@((over(append(e 1 0)(e 2 0)x))(b(- n 2))),@(e 1(e 0 1))))(define(b 1)'((0 1)(1 1)))(define(b 0)'((1)))
</code></pre>
<p>236 with whitespace added back in:</p>
<pre><code>(define (b n)
  (define (e d v)
    (make-list
     (expt 2 (- n d)) v))
  `(,@(e 2 `(,@(e 1 0) ,@(e 1 1)))
    ,@((over (append (e 1 0) (e 2 0) x)) (b (- n 2)))
    ,@(e 1 (e 0 1))))

(define (b 1) '((0 1) (1 1)))
(define (b 0) '((1)))
</code></pre>
<p>Bonus! I like coming up with my own solution but here's my implementation of Bubbler's idea, at 135 bytes (displayed here with 15 unnecessary bytes of whitespace for readability)</p>
<pre><code>(define (u n) ((fn `(,@((over `(,@((over 0) x) ,@x)) (reverse x)) ,@((over `(,@((over 1) x) ,@((over 1) x))) x))) (u (- n 1))))

(define (u 0) '((1)))
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 52 bytes</h1>
<pre><code>n-&gt;matrix(l=2^n,,i,j,j+2^#binary(bitxor(i-1,l\3))&gt;l)</code></pre>
<p>For input <span class="math-container">\$n\$</span>, the number of <span class="math-container">\$1\$</span>s in the <span class="math-container">\$i\$</span>-th row (<span class="math-container">\$1\$</span>-index) is <span class="math-container">\$2^{\#\operatorname{binary}(\operatorname{bitxor}(i-1,\lfloor2^n/3\rfloor))}\$</span>, where <span class="math-container">\$\#\operatorname{binary}\$</span> means the number of the binary digits. This is because the binary representation of <span class="math-container">\$\lfloor2^n/3\rfloor\$</span> is <span class="math-container">\$(1010\dots)\$</span>.</p>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMHiNAXbpaUlaboWN03ydO1yE0uKMis0cmyN4vJ0dDJ1snSytI3ilJMy8xKLKjWSMksq8os0MnUNdXJijDU17XI0oXq10kDiCrYKhjoKJjoKBUWZeSUamToKSlZKmtYQboFGmkampiZUx4IFEBoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>Ṁ</code>, 20 bytes</h1>
<pre><code>0?(ṘnEn›ẋJ)E1vẋ0ÞṪṘ∩
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyLhuYAiLCIiLCIwPyjhuZhuRW7igLrhuotKKUUxduG6izDDnuG5quG5mOKIqSIsIuKBiyIsIjQiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 26 bytes</h1>
<pre><code>↑1ＦＥＮＸ²ι«‖↓ＵＯ⊗ιι1Ｍ⊕ι↑»‖ＵＢ0
</code></pre>
<p><a href="https://tio.run/##NY2xDoIwFEVn@IqG6TXBRI2TbobFASUaP6CUBzaWPtK0MBi/vb5Btntzc87VL@U1KZtS440LcHxOpSh2hTzlPXkBtZrg4qYYrnFs0YMsRUMLh30pjJRSfPLsjr1FzWxFi2Mwu7WW3AAVxdZiB4Yhs1qzmmZkpfY4ogv/mW95@@arissDw1np9@Apug6KLcMpHdJmtj8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Works by drawing the horizontal mirror image of Bernard, using the property that each Bernard is the vertical mirror image of the previous Bernard extended to the left with <code>0</code>s and then extended down with <code>1</code>s.</p>
<pre><code>↑1
</code></pre>
<p>Output the lone <code>1</code> on its own row, leaving the cursor above the row.</p>
<pre><code>ＦＥＮＸ²ι«
</code></pre>
<p>Loop <code>n</code> times, adding <code>2ⁱ</code> rows each time, thus resulting in a total of <code>2ⁿ</code> rows.</p>
<pre><code>‖↓
</code></pre>
<p>Reflect vertically, leaving the cursor below Bernard.</p>
<pre><code>ＵＯ⊗ιι1
</code></pre>
<p>Draw the next size rectangle of <code>1</code>s.</p>
<pre><code>Ｍ⊕ι↑
</code></pre>
<p>Move back to the top of the Bernard.</p>
<pre><code>»‖
</code></pre>
<p>Reflect horizontally to complete the Bernard.</p>
<pre><code>ＵＢ0
</code></pre>
<p>Fill the background with <code>0</code>s.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, 111 bytes</h1>
<pre><code>data T a=C a|Q(T a)(T a)(T a)(T a)
f 0=C 1
f 1=Q(C 0)(C 1)(C 1)$C 1
f n=Q(C 0)(Q(C 1)(C 1)(C 0)$f$n-2)(C 1)$C 1</code></pre>
<p>The matrix is represented as a <a href="https://en.wikipedia.org/wiki/Quadtree" rel="nofollow noreferrer">quadtree</a>. (I don't know if this output format is accepted).</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>121</s> 104 bytes</h1>
<pre>lambda n:[[*map(int,f&quot;{m:0{2**n}b}&quot;)]for m in g(n)]
g=lambda n:[1][n:]or g(n-1)[::-1]+2**~-n*[2**2**n-1]</pre>
<p><a href="https://ato.pxeger.com/run?1=RY3RCoIwGIWv8ymGN27LQQsCGfgkcxeTnA7a71C7CLEX6UaIeqfepplFV4dzDt85t6e_DE0L893kxeM8GJa9mpN25VEjEFJSpz22MKQmHp3YjXtKYSqnmCjTdsghC6jGQFRU53-KKwlChT5UjBMpBONqG9ArAyqDLish-v5ly5RdpjoNdYV5eiAi2vgu_GJqsCVpX_k8KSAhv_hjVn6eV30D" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This is a much more interesting method, but is not well golfed because Python isn't great at converting binary numbers into a matrix (at least as far as I am aware).</p>
<p>Works by taking a start list of <code>[1]</code>. For each integer <code>i</code> up to <code>n</code>, reverse the list and add to it <code>2**~-n*[2**2**n-1]</code>. This outputs the following pattern</p>
<pre><code>[1, 3]
[3, 1, 15, 15]
[15, 15, 1, 3, 255, 255, 255, 255]
[255, 255, 255, 255, 3, 1, 15, 15, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535]
</code></pre>
<p>Which is then converted into binary, with each item in the list forming a row in the matrix.</p>
<p>-17 bytes thanks to @pxeger</p>
<hr />
<h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>119</s> 117 bytes</h1>
<pre>f=lambda n:[[1]][n:]or-(-(p:=2**n)//4)*[(q:=p//2)*[0]+q*[1]]+[l+r for l,r in zip(p//4*[p//4*3*[0]],f(n-2))]+q*[[1]*p]</pre>
<p><a href="https://ato.pxeger.com/run?1=NY9BDoIwEEXXeorumJY2FcSENOlJahcYqTbBoVRY6FXcsNE7eRsBdTOZP3kvP_N4hVt_bnEcn0PvRPkenG6qy-FYEVTGZNYaVLaNAgQEpXPGkEpZUGagUzpImU_rxqYdm9nUNGkkro2k4ZF4JHcfYIIKZpa5nVnLHaDIKV2sSWPB_srLWfWzGCs81ZDxHVXrVYgee2AOPOXXOuhkjwn9n5fw9f9PfAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Follows the algorithm as outlined in the question<br />
-2 bytes thanks to pxeger</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 15 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>
<pre><code>2Ṛ;»Ṁ²ƊƊ¡’Bz0ZU
</code></pre>
<p>A full program that accepts a positive integer from STDIN and prints a list representation of the Bernard.</p>
<p><strong><a href="https://tio.run/##AScA2P9qZWxsef//MuG5mjvCu@G5gMKyxorGisKh4oCZQnowWlX/w4dH/zQ" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (The footer prints the result as a grid instead of in the raw list format.)</p>
<h3>How?</h3>
<p>Builds the Bernard in chunks consisting of the equal rows, starting with the row with the single <code>1</code>. At each step we reverse what we have so far and append the next chunk. Each new chunk has as many rows as we've built so far but with double the number of <code>1</code>s.</p>
<p>Under the hood, each row is first calculated as one more than its binary value. This starts at <code>2</code> and squares for each new chunk.</p>
<pre><code>2Ṛ;»Ṁ²ƊƊ¡’Bz0ZU - Main Link: no arguments
2               - literal two
        ¡       - repeat STDIN times starting with X=2:
       Ɗ        -   last three links as a monad - f(X):
 Ṛ              -     reverse the current list
                        (2 gives its decimal digits reversed = [2])
      Ɗ         -     last three links as a monad - f(Z=that):
    Ṁ           -       maximum of Z
   »            -       vectorised maximum with Z -&gt; an array of the same shape as
                                      Z, all populated with the maximum value in Z
     ²          -       square them
  ;             -     (reversed X) concatenate with (that)
         ’      - decrement all the values
          B     - convert them to binary lists
           z0   - transpose with filler zero  }
             Z  - transpose                   } prepends zeros
              U - reverse each
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.python.org" rel="noreferrer">Python</a>, 76 bytes</h1>
<pre>f=lambda n:(x:=1&lt;&lt;n&gt;&gt;1)and[x*[0]+j for j in f(n-1)[::-1]]+x*[x*[1,1]]or[[1]]</pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3fdJscxJzk1ISFfKsNCqsbA1tbPLs7Aw1E_NSoiu0og1itbMU0vKLFLIUMvMU0jTydA01o62sdA1jY7WB0kBkqANk5xdFRwMpqJkWaUX5uQoFBUWZeSUKmbkF-UUlUB4XyKhMkFFFiXnpqRqmmlYQCY00jUxNTYh-mNsA" rel="noreferrer">Attempt This Online!</a></p>
<p>Straight-forward recursion. Take the previous upside down, add a block of zeros on the left and a block of ones below.</p>
<p>Just seeing that @Bubbler used <a href="https://codegolf.stackexchange.com/a/248821/107561">the same recursion</a> a few hours before me.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÎF¼RNoF¾ª]oÅ10ζRø
</code></pre>
<p><a href="https://tio.run/##ASUA2v9vc2FiaWX//8OORsK8Uk5vRsK@wqpdb8OFMTDOtlLDuP/Cu/80" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##ATkAxv9vc2FiaWX/NUVOIm49w78iLCL/ME5GwrxSTm9Gwr7Cql1vw4UxMM62UsO4/yIuVsK7LMK2Py7Ctf8" rel="nofollow noreferrer">verify all test cases</a>. (The footer is to pretty-print the matrix.)</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Create alternating lists of <span class="math-container">\$2^x\$</span> amount of 0-based values depending on the input:</p>
<pre class="lang-python prettyprint-override"><code>Î          # Push 0 and the input
 F         # Loop `N` in the range [0, input):
  ¼        #  Increase `¾` by 1 (it's 0 by default)
   R       #  Reverse the current list (or 0 in the first iteration)
    No     #  Push 2 to the power `N`
      F    #  Inner loop that many times:
       ¾ª  #   Append `¾` to the list
           #   (`ª` will convert the 0 to [0] in the very first iteration)
 ]         # Close both loops
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/W/q6mevpPCobZKCkr3SfwM/t0N7gvzy3Q7tO7Qq9r@SXpiO3qGt/wE" rel="nofollow noreferrer">See just this step online for all test cases.</a></p>
<p>Step 2: Calculating <span class="math-container">\$2^v\$</span> for each of these values determines the amount of trailing <code>1</code>s per row:</p>
<pre class="lang-python prettyprint-override"><code>  o        # Map each value to 2 to the power that value
   Å1      # Then convert each inner value to a list of that many 1s
</code></pre>
<p><a href="https://tio.run/##ATMAzP9vc2FiaWX/NUVOIm49w78iLCL/ME5GwrxSTm9Gwr7Cql1vw4Ux/yIuVsK7LMK2Py7Ctf8" rel="nofollow noreferrer">See the first two steps online for all test cases.</a></p>
<p>Step 3: Add leading <code>0</code>s to each row, and output the resulting matrix:</p>
<pre class="lang-python prettyprint-override"><code>      ζ    # Zip/transpose this list of rows; swapping rows/columns,
     0     # using a 0 as filler-character for unequal length rows
       R   # Reverse the list of lists
        ø  # Zip/transpose the matrix back
           # (after which it is output implicitly as result)
</code></pre>
</div>
<div id="pu16" class="pu"><h1>JavaScript (ES6), 95 bytes</h1>
<p>A rather straightforward recursive construction.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;[...Array(1&lt;&lt;n)].map((_,y,a)=&gt;a.map(g=(k=n,x,_,Y=y)=&gt;k--?Y&gt;&gt;k|x&gt;&gt;k&amp;g(k,x%=m=1&lt;&lt;k,_,~Y%m):1))
</code></pre>
<p><a href="https://tio.run/##XU7LbsIwELzzFXsoZFexLeXQS5M14jMiisCiJAKTNTIIJQL668GKeuplZueh1Zzc3V338Xi5aQk/h7HhUdiujTGrGN2ARVUJbUznLohbNShHbN0kW0bPonq1VTUPyfZaL2tr/bNPsGjRq37OHacPPnV@63lHXwXR2ISIAgxFCQIVw2fiPCd4zAD2Qa7hfDDn0OJOaxD@eMgLtN5R@S9uUGgaEoEtRHMKR8EMMqK/81syghwmLmev8Q0" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>n =&gt;                  // n = input
[...Array(1 &lt;&lt; n)]    // build an array of 2 ** n entries
.map((_, y, a) =&gt;     // for each item at position y in this array a[]:
  a.map(              //   iterate over a[] again using ...
  g = (               //   ... the recursive callback function g taking:
    k = n,            //     k = dimension, initialized to n
    x,                //     x = horizontal position
    _,                //     (ignored reference to the array)
    Y = y             //     Y = vertical position
  ) =&gt;                //
    k-- ?             //     decrement k; if it was not 0:
      Y &gt;&gt; k |        //       insert a '1' if we are in the lower part (*)
      x &gt;&gt; k &amp;        //       or we are in the right part and the result
      g(              //       of this recursive call is also 1:
        k,            //         pass the new value of k
        x %=          //         update x to x modulo m,
          m = 1 &lt;&lt; k, //         where m = 2 ** k
        _,            //         (useless reference to the array)
        ~Y % m        //         update Y to (-Y - 1) modulo m
      )               //       end of recursive call
    :                 //     else:
      1               //       insert a '1' and stop the recursion
  )                   //   end of inner map()
)                     // end of outer map()
</code></pre>
<p><em><sub>(*) The sign of Y is inverted at each iteration, so the 'lower' part is actually the upper part when Y is negative.</sub></em></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://factorcode.org/" rel="nofollow noreferrer">Factor</a>, <s>90</s> <s>89</s> 83 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ 2^ 3 dupn iota -rot '[ _ 3 /i bitxor bit-length 2^ 1 &lt;array&gt; _ 0 pad-head ] map ]
</code></pre>
<p><a href="https://tio.run/##HY4xT8NADIX3/oq3dUppWlgAsSKWLlWnqkVO4iYnLndXn6OSIn57MJks@316/i5Ua5TpsP/YvT@jJ@2Q@TpwqDmj5cBC3t1JXQwZFxlnZFU5vbnMIBEaM5Kw6pjEBYWL@GIJ7PGyWPygxAZbPOIJv9MRm7MtzZCCYUooJCqWR3za9cHBWr@j/I/Cc2hNxfgSr/OXN6PWSNQUHVODk4kknKwzuz55LpQqzysEb1Ed@xRNj6nupj8" rel="nofollow noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>Port of @alephalpha's <a href="https://codegolf.stackexchange.com/a/248823/97916">PARI/GP answer</a>.</p>
</div>
<div id="pu18" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 138 bytes</h1>

<pre class="lang-python prettyprint-override"><code>import re
def f(n):r=[int(bin(i)[2:])for i in range(2**n)];return[[1-bool(re.match('1(13)*(12|0)',str(x+y+y+10**n)))for x in r]for y in r]
</code></pre>
<p><a href="https://tio.run/##XU7LDoIwELzzFb2xi0goxEuNX9JwAG2liWybtSaQ@O/IQy9mDjPJZB5hir2nep7dEDxHwSa5GSssECq@aEcROkfgUFeqQetZOOFIcEt3A1WWETZnNvHFpLU8dt4/gE0xtPHaQypB1piBrN4lpvkzMoyHaYEs1yBudeNW16xy2uXvSgi8zCd/mzIXJ1SJ@NrFTmCXizh/AA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 21 bytes</h1>
<pre><code>(|,/2\,'/4\10+)/[;+1]
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs9Ko0dE3itFR1zeJMTTQ1tSPttY2jOXiSlMwBGIjIDYGYhMAuhsIhw==" rel="noreferrer">Try it online!</a></p>
<p>Same algorithm, but uses a bit of base trick to generate the zero- and one-matrices at appropriate places.</p>
<pre><code>10+    Map 0 to 10 and 1 to 11
4\     Base 4; 10 becomes (2 2) and 11 becomes (2 3)
2\     Base 2; 2 becomes (1 0) and 3 becomes (1 1)
</code></pre>
<hr />
<h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 23 bytes</h1>
<pre><code>(,/(1|)\|,'/|^:\)/[;+1]
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs9LQ0dcwrNGMqdFR16+Js4rR1I+21jaM5eJKUzAEYiMgNgZiEwDeZgmn" rel="noreferrer">Try it online!</a></p>
<p>A straightforward implementation. Uses the recurrence pattern:</p>
<pre><code>f(n+1) = [ zeros, f(n) reversed ]
         [ ones,  ones          ]
</code></pre>
<h3>How it works</h3>
<pre><code>(,/(1|)\|,'/|^:\)/[;+1]    a function that takes n and
(               )/         applies the recurrence n times on
                    +1     the 1x1 matrix containing a single 1:
             ^:\    converge-scan using &quot;test if each atom is null&quot;; gives (mat; zeros)
         ,'/|       reverse the order and horizontally join the two matrices
        |           reverse vertically
   (1|)\      converge-scan using &quot;max with 1&quot;; gives (mat; ones)
 ,/           join vertically
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/248820/">248820</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




