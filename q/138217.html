<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::138217</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>033</td><td>Jelly</td><td>170809T150356Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138249#138249">Jonathan</a></td></tr>
<tr d-ix="1"><td>124</td><td>Python 3</td><td>170809T161621Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138268#138268">lynn</a></td></tr>
<tr d-ix="2"><td>066</td><td>APL Dyalog</td><td>170812T080259Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138687#138687">ngn</a></td></tr>
<tr d-ix="3"><td>087</td><td>APL Dyalog</td><td>170809T131944Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138222#138222">Ad&#225;</a></td></tr>
<tr d-ix="4"><td>053</td><td>Jelly</td><td>170809T142320Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138236#138236">Erik the</a></td></tr>
<tr d-ix="5"><td>nan</td><td>Perl 5</td><td>170809T183714Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138290#138290">Xcali</a></td></tr>
<tr d-ix="6"><td>164</td><td>JavaScript ES6</td><td>170809T132651Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138223#138223">ETHprodu</a></td></tr>
<tr d-ix="7"><td>060</td><td>MATL</td><td>170809T145946Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138246#138246">Luis Men</a></td></tr>
<tr d-ix="8"><td>125</td><td>Retina</td><td>170809T154339Z</td><td><a href="https://codegolf.stackexchange.com/questions/138217/which-tetromino-is-this/138261#138261">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 54 43 42 41 </s> 33 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>§TḢ⁸ṫZUµƬ¬Ṃj1Ḅ“6÷¥*fÆ-‘i’ị“¥Çıƭ⁵»
</code></pre>
<p>A monadic Link that accepts a list of four lists each of four integers from <span class="math-container">\$[0,1]\$</span> and yields a character from <code>zoistjlw</code> where <code>w</code> means &quot;not a tetromino&quot;.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///Q8pCHOxY9atzxcOfqqNBDW4@tObTm4c6mLMOHO1oeNcwxO7z90FKttMNtuo8aZmQ@apj5cHc3UPjQ0sPtRzYeW/uoceuh3f///4@ONtQx1DHQMYjl0ok20AFzIEwDhCiEGQsA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8///hrraHO2cFH573cOeqqNBDW4@tObTm4c6mLMOHO1oeNcwxO7z90FKttMNtuo8aZmQ@apj5cHc3UPjQ0sPtRzYeW/uoceuh3f@P7jnc/qhpjUokkAAibyDOetS479C2Q9v@/4@OjjbQAcNYHbwsIBOnvKGOIZxFvEpDDJWGcHl0Fj4zISxDJJWGSKK4WcSqxOZOZBcb4PS7IQ6V2MMTETYGKCz8thsSMBPVdEMCKg3R3IEZSoYYoYRquyFWv@NPS@hhgxDDp9IQxfTYWAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<p>The code firstly repeatedly:</p>
<ul>
<li>strips empty rows from the start of the input matrix</li>
<li>rotates that a quarter clockwise
until no change occurs, collecting the input and the results. For example:</li>
</ul>

<pre><code>[[0,0,0,0],  =&gt; [[0, 0, 0],  =&gt; [[0, 0, 0],  =&gt; [[0, 1],  =&gt;  [[1, 1, 0],
 [0,1,1,0],      [0, 0, 1],      [1, 1, 0],      [1, 1],       [0, 1, 1],
 [0,0,1,1],      [0, 1, 1],      [0, 1, 1],      [1, 0]       ]
 [0,0,0,0],      [0, 1, 0]]     ]               ]
]
</code></pre>
<p>Then it inverts the values in all of these and picks the minimum, which will be a consistent one of the set of distinct, fully stripped rotations inverted, in this case:</p>
<pre><code>[[0, 0, 1],
 [1, 0, 0],
]
</code></pre>
<p>We need to be able to differentiate an inputted <code>O</code> tetromino from any other inputted square of ones, but both will produce a square matrix of zeros, so rather than flattening and converting to binary the code joins the resulting rows with ones and converts to binary. It then looks for the resulting integer in a list of the integers produced by each of the seven tetrominoes and uses the index (or <code>0</code> if not found) to look up the name in a compression of the words &quot;zoist&quot; and &quot;jowl&quot; concatenated:</p>
<pre><code>§TḢ⁸ṫZUµƬ¬Ṃj1Ḅ“..‘i’ị“..» - Link: list of list of 0/1, M
       µƬ                 - collect while distinct under:
§                         -   sums of rows
 T                        -   get truthy indices
  Ḣ                       -   head -&gt; index of the first row with any ones
   ⁸ṫ                     -   tail the matrix from that row
     ZU                   -   rotate a quarter clockwise
         ¬                - logical NOT (vectorises)
          Ṃ               - minimum
           j1             - join with ones
             Ḅ            - convert from binary
              “..‘i       - first 1-indexed index of that in [54,28,4,42,102,13,45]
                            or 0 if not found (not a tetromino)
                   ’      - decrement 
                    ị“..» - index into &quot;zoistjowl&quot; (1-indexed and modular)
                              -&gt; -1: w; 0..6: lzoistj
</code></pre>
<p><code>“6÷¥*fÆ-‘</code> is a list of code-page indices, <code>[54,28,4,42,102,13,45]</code>.</p>
<p><code>“¥Çıƭ⁵»</code> is a compressed string of the words <code>zoist</code> and <code>jowl</code>.</p>
<hr />
<p><a href="https://tio.run/##AaYAWf9qZWxsef//wqdU4bii4oG44bmrWlXCtcaswqzhuYJqMeG4hOKAnDbDt8KlKmbDhi3igJhp4oCZ4buL4oCcwqXDh8Sxxq3igbXCu//igbQyKivigbhC4biKczTDhywpRuKAnXdlxorDkOG4n@G5om7huKLCpcadayTCtVpR4oKsxZLhuZjigqwywqZq4oCcOiDigJ0pWf//cmFuZ2UoMCwgMzI3Njcp" rel="nofollow noreferrer" title="Jelly – Try It Online">Here</a> is a script that will categorise all the numbers in a <code>range</code> to the tetrominoes (those not listed are those for which the code yielded <code>w</code>). It is too slow for all <span class="math-container">\$2^{16}\$</span> so either run locally or run it a second time with an argument of <code>range(32768, 65535)</code> to <a href="https://tio.run/##AaoAVf9qZWxsef//wqdU4bii4oG44bmrWlXCtcaswqzhuYJqMeG4hOKAnDbDt8KlKmbDhi3igJhp4oCZ4buL4oCcwqXDh8Sxxq3igbXCu//igbQyKivigbhC4biKczTDhywpRuKAnXdlxorDkOG4n@G5om7huKLCpcadayTCtVpR4oKsxZLhuZjigqwywqZq4oCcOiDigJ0pWf//cmFuZ2UoMzI3NjgsIDY1NTM1KQ" rel="nofollow noreferrer" title="Jelly – Try It Online">see the rest</a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 124 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(n):
 while n&amp;4369&lt;n/n:n&gt;&gt;=1
 while n&amp;15&lt;1:n&gt;&gt;=4
 return'TJLZSIO'["rēȣc6&#15;3ıGtĲȱᄑ@'̢̑@@@@Ȳq&#23;".index(chr(n))%7]
</code></pre>

<p><a href="https://tio.run/##TU4xTsNAEOyvoaQ9RQKfC0M257vYUYjSIRASBamCEIqcMz4JbcxxEUnPByJ@QF6QvMGFi3yCl5h1GhitZmdmV9ot175YoGyaucl5LjAcMP5R2FfD8TyWOh3iJQ5wNLqCvxzUEI5ZzLgzfukwmNzeTR9u7oPHjqu@6m2mT2S1u/bVvt79fG7GweH7sBkT6v3baefC4tysRFY4uhee9Z@afOH4M7fI3QxfjADVvsG9W7eN89JZ9CIXLVssl16EBBqZVWZK/38piKLMzd6LKArCpssUFTBIgUgxGaeqd2TJAHokQSesnyhyUjNFRicJkyolBbTb/QU" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>Expects an integer <strong>n</strong> representing a 4 × 4 binary matrix. Throws if no tetromino is found.</p>

<p>Line 2 slides the shape to the right until a 1 is in the rightmost column. (4369 is <code>0001 0001 0001 0001</code> in binary.) Line 3 lowers the shape until a 1 is in the bottom row. Together this turns e.g.:</p>

<pre class="lang-python prettyprint-override"><code>    0 1 0 0        0 0 0 0
    1 1 1 0  into  0 0 0 0
    0 0 0 0        0 0 1 0
    0 0 0 0        0 1 1 1
</code></pre>

<p>Then we look for the index of <code>n</code> in this list:</p>

<pre class="lang-python prettyprint-override"><code> [114  275  547   99   54   15   51
  305   71  116  306  561 4369   64
   39  802  785   64   64   64   64
  562  113   23]
#   T    J    L    Z    S    I    O
</code></pre>

<p>Each column of indices equivalent modulo 7 corresponds to a tetromino shape. 64 (<code>@</code>) is used as a padding value as <code>n</code> cannot be 64 at this point in the code.</p>

<p><strong>NB.</strong> An exception is thrown for input <code>0</code> by computing <code>n/n</code> instead of <code>1</code>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 66 bytes</h1>
<p><code>{'TIOJSLZ-'[(¯51 144 64,,∘+⍨12J96 ¯48J64)⍳×/(+/-4×⊢)⍵/,0j1⊥¨⍳4 4]}</code></p>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG@qp/@jtgkG/0NSS4ryczPz8oG8avUQT3@vYJ8oXfVojUPrTQ0VDE1MFMxMdHQedczQftS7wtDIy9JM4dB6EwsvMxPNR72bD0/X19DW1zU5PP1R1yKgwFZ9HYMsw0ddSw@tAMqaKJjE1v73zCsoLQGZDrQUSD3qXfOou0UHwgGqeNS7RcPQDEgaaT7qWgI0ohbhJgWwXgUDBQUudDFToCAWUUNsooaWhoZYRE2xqTU2sTQ1wipqjGmCoZERFhMMzSwwRc0tTLG5zNDYDIsvgAZgippZYBM1NrU0s8DiY1MjAwA" rel="nofollow noreferrer">Try it online!</a></p>
<p>The arg is a boolean vector.</p>
<p>Computes signed distances of the dots to their centre of gravity as complex numbers (real and imaginary part are ∆x,∆y) and multiplies the complex numbers together. This turns out to be a good enough invariant to distinguish among the tetrominoes.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, <s>95</s> <s>94</s> <s>93</s> <s>89</s> 87 bytes</h1>



<p>-2 thanks to <a href="https://codegolf.stackexchange.com/users/55550/zachar%c3%bd">Zacharý</a></p>

<p>Requires <code>⎕IO←0</code> which is default on many systems. Takes Boolean matrix (of any shape!) as argument. Returns nothing if the given number of bits is not four, and a blank line if the four given bits do not form a tetromino.</p>

<pre class="lang-apl prettyprint-override"><code>{4=+/,⍵:'OIZSJLT'/⍨∨/1∊¨(((2 2)4⍴¨1),(0 1⌽¨⊂K⌽2⊖J),(⍳3)⊖¨⊂J←1,⍪K←3↑1)∘.⍷⍵∘{⌽∘⍉⍣⍵⊢⍺}¨⍳4}
</code></pre>

<p><a href="https://tio.run/##bY/BSsNAEIbvPsXeusFqMrvZNRF8gKRCD/bkraCIUJsi9SAlF5ESoyt6UDxrD4t4qyIIXvIo8yJxUg@C2cvOv9/u/8/McDLaODgfjrKjGm8fkj7O74J6cDg9zU6OxxndZuHOut9F87Hd6Sf7e@nuoOOjsVhYH7AoK8s5F0x4IZr3yoLX5QEDvPmuLJYXPRICy8eUMJql9EivHlJKBkp97ZGQOL8HD4unTTSf1InUjIxU0FyheWlQ@YzmKyevWYZ5nYwnZ9NmOJqZCpo3vL781SFrJuGg6RTUb0Hu/G8jtrKygLG1/0wRdFBwUYgBHFS5/sowVsJJZTsBhHAkgI7adCtSrslAascWFNCmOnJRqWIdOTZWIvgB" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p>Works by creating all four rotations of the input, then looking for each tetromino in each rotation.</p>

<p><code>{</code>…<code>}</code> anonymous function where the argument is represented by <code>⍵</code>:</p>

<p> <code>,⍵</code> ravel (flatten) the argument</p>

<p> <code>+/</code> sum it</p>

<p> <code>4=</code> is four equal to that?</p>

<p> <code>:</code> if so, then (else return nothing):</p>

<p>  <code>⍳4</code> first four <strong>ɩ</strong>ndices;  <code>[0,1,2,3]</code></p>

<p>  <code>⍵∘{</code>…<code>}¨</code> apply the following function on each, using the input as fixed left argument</p>

<p>   <code>⍺</code> the left argument i.e. the input</p>

<p>   <code>⊢⍺</code> yield that (separates <code>⍵</code> from <code>⍺</code>)</p>

<p>   <code>⌽∘⍉⍣⍵</code> mirror and transpose (i.e. rotate 90°) <code>⍵</code> times</p>

<p>  <code>(</code>…<code>)∘.⍷</code> outer "product", but using Find*, of the following list and the rotations:</p>

<p>   <code>3↑1</code> take three elements from one, padding with zeros; <code>[1,0,0]</code></p>

<p>   <code>K←</code> store that as <code>K</code></p>

<p>   <code>⍪</code> table (make into column vector); <code>[[1],[0],[0]]</code></p>

<p>   <code>1,</code> prepend a one; <code>[[1,1],[1,0],[1,0]]</code> ("J")</p>

<p>   <code>J←</code> store as <code>J</code></p>

<p>   <code>(</code>…<code>)⊖¨⊂</code> rotate the entire J vertically, each of the following number of steps:</p>

<p>    <code>⍳3</code> first three <strong>ɩ</strong>ntegers; <code>[0,1,2]</code></p>

<p>   we have <code>[[[1,1],[1,0],[1,0]],[[1,0],[1,0],[1,1]],[[1,0],[1,1],[1,0]]]</code> ("J", "L, "T")</p>

<p>   <code>(</code>…<code>),</code> prepend the following list:</p>

<p>    <code>2⊖J</code> rotate <code>J</code> two steps vertically; <code>[[1,0],[1,1],[1,0]]</code> ("T")</p>

<p>    <code>K⌽</code> rotate the rows of that by 1, 0, and 0 steps respectively; <code>[[0,1],[1,1],[1,0]]</code> ("Z")</p>

<p>    <code>0 1⌽¨⊂</code> rotate the entire array vertically, no times and once; <code>[[[0,1],[1,1],[1,0]],[[1,0],[1,1],[0,1]]]</code> ("Z", "S")</p>

<p>    <code>(</code>…<code>),</code> prepend the following list:</p>

<p>     <code>(2 2)4⍴¨1</code> reshape a one into each of a 2×2 matrix and a 4-element list; <code>[[[1,1],[1,1]],[1,1,1,1]]</code> ("O", "I")</p>

<p>  <code>1∊¨</code> for each, is one a member?</p>

<p>  <code>∨/</code> horizontal OR reduction (i.e. across rotations; one Boolean for each shape)</p>

<p>  <code>'OIZSLJT'/⍨</code> use that to filter the string</p>

<p>* Find returns a Boolean array of same shape as its right argument, with ones indicating the top left corner of all subarrays identical to the left argument. </p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 53 bytes</h1>

<pre><code>ZL0ẋW⁸tZµ⁺ZU$3Ð¡“©©“œ“Ç¿“¦©¦“Æ½‘;Uḃ2$’¤iÐ€Ṁị“÷¶Ė¡µỵỤ»
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/z/Kx@Dhru7wR407SqIObX3UuCsqVMX48IRDCx81zDm08tBKIHV0MpA43H5oP0hoGVBwGYjfdmjvo4YZ1qEPdzQbqTxqmHloSebhCY@a1jzc2fBwdzdIxfZD245MO7Tw0NaHu4FoyaHd////j4421FEwgKBYHQUuBVL4sQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Full program. Takes a 4x4. Prints <code>m</code> if not a tetromino, otherwise prints lowercase.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 197 + 1 (-p) = 198 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>s/(0000)*$//;1while s/(...)0(...)0(...)0(...)0/0${1}0${2}0${3}0${4}/;$_={51,O,15,I,4369,I,54,S,561,S,99,Z,306,Z,547,L,23,L,785,L,116,L,275,J,113,J,802,J,71,J,114,T,562,T,39,T,609,T}-&gt;{oct("0b".$_)}
</code></pre>

<p><a href="https://tio.run/##Zc89T8MwEAbgv9JGkZqgi@/OX2kUtQMbiI8BJhCtoCo0atVETRFDZH465sKKh8fvvYOt67ang4vpepF9HrvXzT65NDqBMc3uZpCu88V3jysa2AfEj9OkeZ/i6pn45SLFOvaYkZxcBqz5a9ccthPplFI5/RcpHTgIesSM2IC1fD44hntgB1dgja/kchYewHkWqwqewJAXnS3hBrQRyrkTmf1YlA6uJRtxTlos@a@w8CiPaNFUgicxFMuh3ZyzhN4SJQuGGDXZn7Y7N@2xj8WtU8QUi@4X" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>

<p>Takes a 16 bit string as input.  Outputs nothing if input is not a single tetromino.</p>

<p><strong>How?</strong></p>

<p>The two substitutions "move" the input shape to the bottom right corner.  The resulting bit string is converted to an integer, then checked for in a hash of valid integers.</p>
</div>
<div id="pu6" class="pu"><h2>JavaScript (ES6), <s>242</s> <s>212</s> <s>172</s> 164 bytes</h2>

<pre><code>x=&gt;[...'OISZLJT'].filter((z,y)=&gt;x.match(`^0*(${'99,33825|15,51|2145,195|561,2115|57,1059|135,71|1073'.split`,`[y].replace(/\d+/g,C=x=&gt;x?x%2+C(x&gt;&gt;1)+x%2:'|')})0*$`))
</code></pre>

<p>Was supposed to be just to get the ball rolling, but I'm a little late for that ¯\_(ツ)_/¯</p>

<p>Takes a string of bits, with rows separated by <code>0</code>s (<code>'0001000110001000000'</code> representing <code>0001 0011 0010 0000</code>) and returns an array containing the character representing the tetromino, or an array containing nothing.</p>

<p>This works by checking each rotation of tetromino to see if the input at any point contains the tetromino, surrounded entirely by zeroes on either side. Each tetromino is represented by one or more binary numbers:</p>

<pre><code>0 0 0 0   -&gt; 0000 0110 1100 0000
0 1 1 0   -&gt; 0000001100110000000
1 1 0 0   -&gt; 110011
0 0 0 0   -&gt; 51

0 1 0 0   -&gt; 0100 0110 0010 0000
0 1 1 0   -&gt; 0100001100001000000
0 0 1 0   -&gt; 100001100001
0 0 0 0   -&gt; 2145
</code></pre>

<p>So to check if the input contains an S tetromino, we simply check whether it contains the binary representation of either <code>51</code> or <code>2145</code>, with only <code>0</code>s on either side.</p>

<p>A few of the tetrominoes have 4 orientations. If you look at the binary representations of these, each has 2 representations which are simply the mirror of the other two. To save space, the binary representation is built up forward and backward simultaneously with the recursive <code>C</code> function, allowing us to only put two of the orientations in and have the other two implied.</p>

<hr>

<p>Alternate approach with charcodes:</p>

<pre><code>x=&gt;[...'OISZLJT'].filter((z,y)=&gt;x.match(`^0*(${[...'÷,êÿ,óî,ûÝ,ëúüÏ,çöïþ,ßýíÞ'.split`,`[y]].map(c=&gt;(C=n=&gt;n?'1e'+(n%4+2)%5-0+C(n&gt;&gt;2):'')(c.charCodeAt())).join`|`})0*$`))
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 60 bytes</h1>
<pre><code>Itt6tIl7tl7H15vHe&quot;4:&quot;G@X!HYa]4$v@BIthYaEqY+4=aa]v'OSZLJTI'w)
</code></pre>
<p>Input is a binary 4×4 array (matrix), using <code>;</code> as row separator. Ouput is a letter or empty for no tetromino.</p>
<p><a href="https://tio.run/##y00syfn/37OkxKzEM8e8JMfcw9C0zCNVycRKyd0hQtEjMjHWRKXMwcmzJCMy0bUwUtvENjExtkzdPzjKxyvEU71c8///aAMdBUMdBSBpYK2AzDZEFYcihVgA" rel="nofollow noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmfEOFV8d@zpMSsxDPHvCTH3MPQtMwjVcnESsnLIULRIzIx1kSlzMHJsyQjMtG1MFLbxDYxMbZM3T84yscrxFO9XPO/up56hkvI/2gDHQUoUrBWIIoTy0VQkyEQIXPI0mSITZMhsjqsHCJsgnIMUTQZokkR5pChCZef0D1ogD/0DAlowhNPKKFsgMEhznmGRNqEYa0hkZoMsboVa5AbYg9yDOcZ4gs9LJoA" rel="nofollow noreferrer">verify all test cases</a> (output has a dot appended to allow identifying an empty result).</p>
<h3>Explanation</h3>
<p>The code builds 4 rotations of the input 4×4 array in steps of 90 degrees. Each rotated array is padded with 2 zeros up and down, which transforms it into a 8×4 array. The 4 arrays are vertically concatenated into a 32×4 array. The four rotated arrays within this concatenated array are &quot;isolated&quot; thanks to the zero-padding.</p>
<p>Each of the 7 possible patterns is tested to see if it is present in the 32×4 array. A loop is used for this. Each pattern is defined by two numbers, which expressed in binary give the appropriate 0/1 mask. For example, numbers <code>3</code>, <code>6</code> define the &quot;S&quot; shape.</p>
<p>The 7 sets of 2 numbers are arranged into a 2×7 matrix, from which the loop will pick each column sequentially. The matrix is defined by pushing all numbers to the stack, contatenating them into a vector, and reshaping into a 2-row matrix. Since the &quot;I&quot; shape is defined by number 15 followed by 0, putting it at the end allows the 0 to be implicitly filled by the reshaping function.</p>
<p>The mask is then padded with 3 zeros in the four directions. This is necessary so as to detect unwanted values in the input.</p>
<p>To see if the mask is present in the 32×4 array, the latter is transformed to bipolar form (i.e. −1/1 instead of 0/1) and convolved with the mask. Since the mask has 4 ones, matching occurs if some entry in the convolution result equals 4.</p>
<p>At the end of the loop, 7 false/true results have been obtained, at most one of which is true. This is used to index into a string containing the possible output letters.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 125 bytes</h1>

<pre><code>s`(.*1){5}.*

{s`.*1111.*
I
s`.*111(.{2,4})1.*
$.1
T`234`\LTJ
s`.*11(.{2,4})11.*
$.1
T`2-90`S\OZ4-9
s`.*4.*

O#$`.
$.%`
O#$^`
</code></pre>

<p><a href="https://tio.run/##TY5NCsIwEIX37xpGaVMNmebH5giK4EJXUmRcuHDjQt2FXMsDeLE6FRFDeLwvfDPkdn5crqdhWrFpoDQarqipe4LKVCwsgXAERaUtjK5MplhqKILJvkDNXs/hzpXRVOdQjAbynYXkCKzwBZlr577U46MyhD23znO/2a@/xk/4MxbJ8q7fHvwifSw/rt9OFBsxpjzWIw@DRZAr/0wkEeB8Cu0nHYhaqRQ7LLsg5CKCQOw6uJCkkbj2DQ" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases plus a header to convert from integers to a 4×4 matrix. Explanation:</p>

<pre><code>s`(.*1){5}.*
</code></pre>

<p>Delete the input if it contains 5 <code>1</code>s.</p>

<pre><code>{s`.*1111.*
I
</code></pre>

<p>Check all rotations of the input (see below). If the input contains four consecutive <code>1</code>s, it's an <code>I</code>.</p>

<pre><code>s`.*111(.{2,4})1.*
$.1
T`234`\LTJ
</code></pre>

<p>If it contains three consecutive <code>1</code>s plus a <code>1</code> on the next line underneath one of the three, then map the number of intermediate characters to the appropriate result letter.</p>

<pre><code>s`.*11(.{2,4})11.*
$.1
</code></pre>

<p>Similarly for two adjacent <code>1</code>s adjacent to two adjacent <code>1</code>s on the next line.</p>

<pre><code>T`2-90`S\OZ4-9
</code></pre>

<p>But also keep count of the number of rotations using the otherwise unused <code>0</code>s.</p>

<pre><code>s`.*4.*
</code></pre>

<p>And give up if too many rotations have been performed.</p>

<pre><code>O#$`.
$.%`
O#$^`
</code></pre>

<p>Transpose and reverse the array, thus rotating it.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/138217/">138217</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




