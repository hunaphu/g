<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::282053</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>024</td><td>APLDyalog Unicode</td><td>250531T110344Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282074#282074">Mat_rdv</a></td></tr>
<tr d-ix="1"><td>085</td><td>JavaScript ES6</td><td>250530T143023Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282065#282065">Arnauld</a></td></tr>
<tr d-ix="2"><td>033</td><td>APL+WIN</td><td>250530T093806Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282061#282061">Graham</a></td></tr>
<tr d-ix="3"><td>123</td><td>Google Sheets</td><td>250530T044906Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282054#282054">z..</a></td></tr>
<tr d-ix="4"><td>213</td><td>Go</td><td>250531T025659Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282070#282070">Ahamad</a></td></tr>
<tr d-ix="5"><td>064</td><td>Ruby</td><td>250530T055404Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282055#282055">G B</a></td></tr>
<tr d-ix="6"><td>007</td><td>Jelly</td><td>250530T192050Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282068#282068">Jonathan</a></td></tr>
<tr d-ix="7"><td>077</td><td>Maple</td><td>250530T191944Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282067#282067">dharr</a></td></tr>
<tr d-ix="8"><td>025</td><td>Charcoal</td><td>250530T160113Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282066#282066">Neil</a></td></tr>
<tr d-ix="9"><td>085</td><td>Desmos</td><td>250530T120551Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282063#282063">Aiden Ch</a></td></tr>
<tr d-ix="10"><td>011</td><td>Vyxal 3 l</td><td>250530T084826Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282060#282060">lyxal</a></td></tr>
<tr d-ix="11"><td>010</td><td>05AB1E</td><td>250530T081823Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282059#282059">Kevin Cr</a></td></tr>
<tr d-ix="12"><td>068</td><td>Python 2</td><td>250530T073349Z</td><td><a href="https://codegolf.stackexchange.com/questions/282053/maximum-contiguous-subarray-average/282057#282057">tata</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>24 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>{⌈/∊(⍺↓0,⍳≢⍵)(⌊+/÷⊣)¨⊂⍵}
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=q37U06H/qKNL41Hvrkdtkw10HvVuftS56FHvVk2NRz1d2vqHtz/qWqx5aMWjriagYC0A&amp;f=LcrBDYAwDEPRe6b4I5CENO1CXY8dmAyDODzJtpxsGmcQTIu/tbmSU2rBwg9LDfcVMmSKv9rqewbJST0&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>K is the left argument and an array is the right.</p>
<h2>Explanation</h2>
<pre><code>                      ⍵      the right argument (an array)
                     ⊂       Enclose (to treat the entire array as one scalar)
                    ¨        Each
             (     )         tacit function: X (e f g h) Y ←→ e (X f Y) g (X h Y)
                  ⊣          Left argument
                 ÷           Divide
                /            (n-wise) Reduction
               +        
               +/            n-wise sum
              ⌊              Round down
             (⌊+/÷⊣)        rounded down rolling average
    (       )           
           ⍵            
          ≢                 Tally (length)
         ⍳                   Index Generator (numbers from 1 to a right argument)
        ,                   Concatenate
       0                
      ↓                     Drop
     ⍺                      the left argument (K)
    (⍺↓0,⍳≢⍵)               numbers from K to the length of array
    (⍺↓0,⍳≢⍵)(⌊+/÷⊣)¨⊂⍵    averages of all contiguous subarrays of length at least K, combined by the length
   ∊                        Enlist (list all values in one vector)
  /                         Reduce
 ⌈                          Maximum
{⌈/∊(⍺↓0,⍳≢⍵)(⌊+/÷⊣)¨⊂⍵}  solution
</code></pre>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), 85 bytes</h1>
<p>Expects <code>(K)(array)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>k=&gt;g=([v,...a],n=0,s=0,i)=&gt;q=!i/v?g(a,n+1,s+v)&lt;g(a,n,s,n,v=q)?q:v:n&lt;k?g:s/n-(s%n&lt;0)|0
</code></pre>
<p><a href="https://tio.run/##dY7LDoIwEEX3fEVdmLRhCq2IKKHyIcYFUWgQUsSarvx3HIUYH3GSu5jk3MepcIU9XOrzlZvuWA6VGhq11YruHARBUOzBKAEWVTO17dWsDl2uaQHGl2B9x7LnAxblVM/yPnWpyZpcpzY0nNq5yQS7ieHQGdu1ZdB2mlY0YnSXAJFAVkAWQNZ7xsh0YUhi7xNfvPDkDfyLS8SRjRF/pm/QKiYj4lJ4v2s4chzH8DVKPjRWIc@/8@MxHx0RkCUWfa6Phjs" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>k =&gt;                // outer function taking k
g = (               // g = inner recursive function taking:
  [ v,              //   v = current value from the input array
    ...a            //   a[] = remaining values
  ],                //
  n = 0,            //   n = number of values in the subarray
  s = 0,            //   s = sum of all values in the subarray
  i                 //   i = flag set when the subarray is closed
) =&gt;                //
q =                 // save the result of this call in q
!i / v ?            // if i is not set and v is defined:
  g(                //   1st recursive call where:
    a, n + 1, s + v //     v is included in the subarray
  )                 //
  &lt;                 //   (compare)
  g(                //   2nd recursive call where:
    a, n, s,        //     v is not included in the subarray
    n,              //     i is set if n is not 0
    v = q           //     the result of the 1st call is saved in v
  ) ?               //   if v (1st call) is less than q (2nd call):
    q               //     return q
  :                 //   else:
    v               //     return v
:                   // else:
  n &lt; k ?           //   if n is less than the target k:
    g               //     invalidate this result
  :                 //   else:
    s / n           //     return s / n
    - (s % n &lt; 0)   //     -1 if this is a negative non-integer
    | 0             //     rounded toward 0 (*)
</code></pre>
<p><em><sub>(*) This is a twisted and 2-byte shorter way of just doing <code>Math.floor(s/n)</code>.</sub></em></p>
</div>
<div id="pu2" class="pu"><h1>APL+WIN, 33 bytes</h1>
<p>Prompts for k followed by vector of integers.</p>
<pre><code>⌈/⌊(∊⌈/¨k+/¨⊂n)÷k←k+0,⍳(⍴n←⎕)-k←⎕
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlyPWooz3t/6OeDv1HPV0ajzq6QMxDK7K1gcSjrqY8zcPbs4HqsrUNdB71btZ41LslD8gFatfUzYYw/gNN4PqfxmXEZa5gqGCmYKRgwQXjmQNZhlyGCqYK5kBxSwVDA6CAMdeh9UYKh9abAbEFEBuCMEilKVClkYKxgomCKRcXAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu3" class="pu"><h1>Google Sheets, 123 bytes</h1>
<pre class="lang-cpp prettyprint-override"><code>=SORT(MAX(MAP(A2:A,LAMBDA(a,MAP(SEQUENCE(1,COUNT(A2:A)-A1+1,A1),LAMBDA(i,IFERROR(INT(1/AVERAGE(N(OFFSET(a,,,i)))^-1))))))))
</code></pre>
<p>Expects K in <code>A1</code> and the array from <code>A2</code> onwards.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, 213 bytes</h1>
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=fY9PaoQwFMbXzSkeszKYqU4pdYhmzlDoUoYijpnGmCga3UjWPUQ3UughepAuepvGP10VGkheeN_7Hr_v7f1aT59NlsvsWoDKhEZCNXVrYMeV2X30hu-P31-81zlwr0rPQhsiwb3Y3VFwqArtVTiRY1uYvtUQWtRRtgyOFvG6BUFZGIuErZN7GQvfH41rLmo5q2Ui43Lu-qxKhV-e3RKWNU2hL15HDLZIUdal4XmxPJOBsjbTjribEYaTGhUbrEU5ZSqQSFPmYIn0Dxg5PT_pX7rcou2n7RbudQk3R_cwjOjG5b59bB1-pT3urUEiAgcCDwTuCBytKxhDEMDTS91XF6h70_QGov-80eZazx_vPdpwpmmtPw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-go prettyprint-override"><code>func f(l[]int,k int)int{if len(l)&lt;k{return 0}
s:=[]int{}
for i:=0;i&lt;=len(l)-k;i++{t:=0
for j:=0;j&lt;k;j++{t+=l[i+j]}
s=append(s,t)}
m:=s[0]
for _,v:=range s{if v&gt;m{m=v}}
c:=m/k
n:=f(l,k+1)
if c&gt;n{return c}
return n}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=fVTBjtMwED1xiD-B02hPiZqlXYToatkgARLigkAUwaGqkJU6jYtjR7aT7rLql3BZIfFTfA1jO2kTuqKqmtQzb-bNzBv__LVR9_e_G1ucX_559Lim-Xe6YVBRLgnhVa20hbOismeETKfwueQGikbmlisJORV5I6hlBmzpMDe8aiqgLdMuhiogV9KwvLG8ZcAEq5i0BrgEil-t6S00hssNnli2YRrWvOUGIxOXAopYcGNhuUJzCjsu12q34D-Yc0_cD9yRCEm9poYhF8OugBeeSfAF450NCKpddFtiWmd2YVPQzDZawoxEiBJM-mwJXA8zYYLo6LcnPt-bvmwfzGDFWCmjeTkqt-PgTF3hJGqpdv7mQ_HVW00ojkSF0sDhKoPZC3xeZ0c-50c2aJpMPCWX0znjq0NuO-R2RB7_d-7ef5L5upd8sl3h2T6EGVDJgNY1k-t4dJw6wsmh9rd4Ohq2C03xLB81pZdA_O9kMRIiF4E_vo2ToTVvtMZmvac3r7oYwdFBpoPqAp1P2G1tsN3iFooBtQOBHbcl0F4BA12QSLIbG_KOkwXZDQU3uUj6dF4KXkMhogqCszvVpzReT6dlvIQHEw4UdoJxXe-ND4HJ3i_lOyZqpHJYS6tCL_oRuX0DI3juV7KbiAk75kfgTV6Jh7XqVsKbEshQXie74Ab5hQrXMu-2nK2CkL-l0LpTTSUWGKI7MMZssQ0dzAuze8-gDZI81hssrsKOJ5dx4kB4Fz35qJGmkHERe9Z38xQuUniewtMULvf4SBLAxixK1Yg1qMbWjYX5_7DzDhU-J9hnZB-uyO6m7G_Mvw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-go prettyprint-override"><code>package main

import "fmt"

// This function calculates the maximum average of consecutive elements in an array using integer division
func f(list []int, windowSize int) int {
&#9;// Base case: if the window size is larger than the list, return 0
&#9;if len(list) &lt; windowSize {
&#9;&#9;return 0
&#9;}

&#9;// Calculate the sum of each consecutive window of elements
&#9;var sumsOfWindows []int
&#9;for i := 0; i &lt;= len(list)-windowSize; i++ {
&#9;&#9;sum := 0
&#9;&#9;for j := 0; j &lt; windowSize; j++ {
&#9;&#9;&#9;sum += list[i+j]
&#9;&#9;}
&#9;&#9;sumsOfWindows = append(sumsOfWindows, sum)
&#9;}

&#9;// Find the maximum sum and calculate the average (integer division)
&#9;maxSum := max(sumsOfWindows)
&#9;currentMaxAverage := maxSum / windowSize

&#9;// Recursively find the max average with a larger window size
&#9;nextWindowMaxAverage := f(list, windowSize+1)

&#9;// Return the larger of the two averages
&#9;if currentMaxAverage &gt; nextWindowMaxAverage {
&#9;&#9;return currentMaxAverage
&#9;}
&#9;return nextWindowMaxAverage
}

// Helper function to find maximum in a slice of integers
func max(slice []int) int {
&#9;if len(slice) == 0 {
&#9;&#9;return 0
&#9;}
&#9;maxVal := slice[0]
&#9;for _, v := range slice {
&#9;&#9;if v &gt; maxVal {
&#9;&#9;&#9;maxVal = v
&#9;&#9;}
&#9;}
&#9;return maxVal
}

func main() {
&#9;fmt.Println(f([]int{7, 1, 6, 2, 8}, 2)) // Should output 7
&#9;fmt.Println(f([]int{7, 1, 7}, 2))       // Should output 4
}
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 64 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;l,k{l[-k]?[l.each_cons(k).map(&amp;:sum).max/k,f[l,k+1]].max: 0}
</code></pre>
<p><a href="https://tio.run/##KypNqvz/P81W1y5HJ7s6J1o3O9Y@OkcvNTE5Iz45P69YI1tTLzexQEPNqrg0F8Ss0M/WSYsGKtY2jI0F8a0UDGr/FyikRUeb6xjqmOkY6VjE6hjFcsGFzEHc/wA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ẆṫƇÆmṀḞ
</code></pre>
<p>A dyadic Link that accepts the list of <span class="math-container">\$n\$</span> integers on the left and the minimal sublist length, <span class="math-container">\$k\$</span>, on the right and yields the maximal floored mean of the sublists of at least length <span class="math-container">\$k\$</span>.</p>
<p><strong><a href="https://tio.run/##ASwA0/9qZWxsef//4bqG4bmrxofDhm3huYDhuJ7///9bNywgMSwgNiwgMiwgOF3/Mg" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<pre><code>ẆṫƇÆmṀḞ - Link: list of integers, L; positive integer, K
Ẇ       - all non-empty, contiguous sublists of L
  Ƈ     - keep those for which:
 ṫ      -   tail from 1-index K (an empty list is falsey)
   Æm   - mean (vectorises)
     Ṁ  - maximum
      Ḟ - floor (towards -inf)
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.maplesoft.com/" rel="nofollow noreferrer">Maple</a>, 77 bytes</h1>
<pre><code>(A,K)-&gt;max(seq(seq(floor(add(A[i..i+k-1])/k),i=1..n-k+1),k=K..(n:=nops(A))));
</code></pre>
<p>Input is list A and positive integer K.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 25 bytes</h1>
<pre><code>Ｉ⌈Ｅ…·θＬη÷⌈Ｅ…·ιＬηΣ✂η⁻λιλ¹ι
</code></pre>
<p><a href="https://tio.run/##fYsxC8IwEIX/yo0XOAcdVHDUpWBB7Fg6hBiag/TUJg3@@3gdXXzL4733PRfs7J421nqbWTKebcrY2g9Py6T@wkZcXBIXf7cyenwTXL2MOWAwhqCRfOHCD//vw7@fTqkusvMYCFqWJWEkYF3UtmZF2Kw61drvCPqD1gR7Ag3HYaibEr8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>  Ｅ                         Map over
   …·                       Inclusive range from
     θ                      Input `K` to
       η                    Input array
      Ｌ                     Length
          Ｅ                 Map over
           …·               Inclusive range from
             ι              Current value to
               η            Input array
              Ｌ             Length
                  η         Input array
                 ✂    ¹     Sliced from
                    λ       Inner value
                   ⁻        Subtract
                     ι      Outer value
                      λ     To inner value
                Σ           Take the sum
         ⌈                  Take the maximum
        ÷                   Integer divided by
                        ι   Current value
 ⌈                          Take the maximum
Ｉ                           Cast to string
                            Implicitly print
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, 85 bytes</h1>
<pre><code>l=L.count
a=floor(L.total/l)
f(L,k)=\{l&gt;k:[f(L[2...],k),f(L[1...l-1],k),a],[a]\}.\max
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/282057/96039">tata's Python 2 answer</a> so make sure to upvote that as well.</p>
<p><a href="https://www.desmos.com/calculator/hj9hnulapi?nographpaper" rel="nofollow noreferrer">Try It On Desmos!</a></p>
<p><a href="https://www.desmos.com/calculator/rhpg9xi2cg?nographpaper" rel="nofollow noreferrer">Try It On Desmos! - Prettified</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3/" rel="nofollow noreferrer">Vyxal 3</a> <code>-l</code>, 11 (literate) bytes</h1>
<pre><code>sublists filter&lt; 
  length second-input &gt;=
} 
each: arithmetic-mean max-of 
floor
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#H4sIAAAAAAAAAzWNwQrCMBBEf2XZc1psCypBvfoRaQ-x3TSBNFuSVATpvxsFbzPMzJs3Go6Lzig7gZb0RBElosCRJyoqbQ_vUk5gnM8UL9AHAE9hzhYSjRymyoV1y3C79mEvKenRStDRZbtQdmO1kA6w6FfFpsTGM8eCN8z5f2W8nhNKhR4HgT_c1yq8R95WaFAoVCfRiKNoxXkoixaHoVSfFJPjUChdfaoPuH8A3h6scM4AAAA" rel="nofollow noreferrer">Vyxal It Online!</a></p>
<p>Could be a lot shorter if it wasn't at <em>least</em> K :p</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 10 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ŒʒgI@}ÅAàï
</code></pre>
<p>Inputs in the order <span class="math-container">\$list,K\$</span>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//6KRTk9I9HWoPtzoeXnB4/f//0eY6hjpmOkY6FrFcRgA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9WmVBsr6SQmJeioGQPZDxqmwRkVCaE/j866dSk9AiH2sOtjocXHF7/X@d/dHS0uY6hjpmOkY5FrI5RrI4CRMAcxIkFAA" rel="nofollow noreferrer">verify both test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Œ       # Get all sublists of the first (implicit) input-list
 ʒ      # Filter it by:
  g     #  Get the length of the current sublist
   I@   #  Check that it's &gt;= the second input-integer
 }ÅA    # After the filter: get the average of each remaining sublist
    à   # Pop and keep the maximum
     ï  # Floor it to an integer
        # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 68 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda a,k:max([sum(a)/len(a)]+(a[k:]and[f(a[1:],k),f(a[:-1],k)]))
</code></pre>
<p><a href="https://tio.run/##Vci7CoQwEEDRfr/CcgZnkaTQJeCXhClGNCgxWfEB@vXx0Vndw52Otf9HnZKrRwlNK5mQN0F2sMsWQLAYu3iFcxDrDUtsrbuoDJNHumm@6jYjpmke4goObEWKKiaN@Hm9kjT9np9O" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/282053/">282053</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




