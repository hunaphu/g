<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::132998</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>006</td><td>05AB1E</td><td>241030T110527Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/276401#276401">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>163</td><td>Python 2</td><td>170718T034410Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133022#133022">Chas Bro</a></td></tr>
<tr d-ix="2"><td>141</td><td>Mathematica</td><td>170718T080105Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133040#133040">ZaMoC</a></td></tr>
<tr d-ix="3"><td>088</td><td>Haskell</td><td>170718T134227Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133063#133063">Zgarb</a></td></tr>
<tr d-ix="4"><td>134</td><td>Python 3</td><td>170718T035745Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133023#133023">Leaky Nu</a></td></tr>
<tr d-ix="5"><td>008</td><td>Jelly</td><td>170717T235741Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133000#133000">Jonathan</a></td></tr>
<tr d-ix="6"><td>016</td><td>Pyth</td><td>170718T032447Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133020#133020">Leaky Nu</a></td></tr>
<tr d-ix="7"><td>135</td><td>Haskell</td><td>170718T021739Z</td><td><a href="https://codegolf.stackexchange.com/questions/132998/how-many-partitions-contain-only-perfect-squares/133015#133015">Wheat Wi</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 6 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>.œÅ²PO
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9f7@jkw62HNgX4//9vaGZiaWAAAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/vaOTD7ce2hTg/1/nf7ShmYmOoYEhEBvoGOoAsZmJpYFBLAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-none prettyprint-override"><code>.œ      # Get all partitions of the (implicit) input
  Å²    # Vectorized check whether each inner-most value is a square
    P   # Product on each inner list, to see if all checks were truthy
     O  # Sum, to get the amount of truthy values
        # (which is output implicitly as result)
</code></pre>
<p>PS: Outputting the valid partitions instead of the count would be 6 bytes as well, by removing the sum <code>O</code>, and adding a filter <code>ʒ</code> earlier on: <code>.œʒÅ²P</code>
<a href="https://tio.run/##yy9OTMpM/f9f7@jkU5MOtx7aFPD/v6GZiaWBAQA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/vaOTT0063HpoU8D/Wp3/0YZmJjqGBoZAbKBjqAPEZiaWBgaxAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>173</s> 163 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda s:len([l for l in[''.join(sum(zip(s,[','*(n&gt;&gt;i&amp;1)for i in range(len(s))]+['']),())).split(',')for n in range(2**~-len(s))]if {int(x)**.5%1for x in l}=={0}])
</code></pre>

<p><a href="https://tio.run/##VcvRCoIwFIDh@55iN7VzlskW1UWgL2JeGLlazDmcgSX26msLQrr84fvts7@1ZutldvK6as6Xirijrg0Umsi2I5ooU1Ca3ltlwD0aeCkLLiloQhmYPFcrgdGp4EhXmWsN8XaI5Tp8JSaAiKmzWvUQpi82M94y9t78DiXJqEwPAzKW7pci2iFaPWXZyKcSve0CIBKo4ILiYs7D7i85p@g/" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Edit: Saved 10 bytes due to ArnoldPalmer</p>
</div>
<div id="pu2" class="pu"><h1>Mathematica, 141 bytes</h1>

<pre><code>Count[FreeQ[IntegerQ/@Sqrt[FromDigits/@#],1&lt;0]&amp;/@(FoldPairList[TakeDrop,s,#]&amp;/@Flatten[Permutations/@IntegerPartitions[Length[s=#]],1]),1&gt;0]&amp;
</code></pre>

<p><br>
<strong>input</strong> (a list of digits)</p>

<blockquote>
  <p>[{1,6,4}]</p>
</blockquote>
</div>
<div id="pu3" class="pu"><h2><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, 88 bytes</h2>



<pre class="lang-hs prettyprint-override"><code>f x=sum[0.5|y&lt;-mapM(\c-&gt;[[c],c:" "])x,all((`elem`map(^2)[0..read x]).read).words$id=&lt;&lt;y]
</code></pre>

<p>Defines a function <code>f</code> that takes a string and returns a float.
Very slow.
<a href="https://tio.run/##HcvRCsIgGEDhV/mRXShsYlFBob3BnsCMiTqSdA1d5KB3t9HdufjOQ@enC6HWEYrI7ygZPX5X3kU99/hmuquURrXmggApUlodAsaDCy4Om8D3PdkGmpy2UBT5B6GfV7K58VZwvqoatZ9AwJz8tEADI6Dd6XBmDNUf" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<h2>Explanation</h2>

<p>I'm using <a href="https://codegolf.stackexchange.com/a/98446/32014">my Haskell tip</a> for computing all partitions of a string with <code>mapM</code> and <code>words</code>.
The snippet <code>mapM(\c-&gt;[[c],c:" "])x</code> replaces every character <code>'c'</code> of a string <code>x</code> with either the one-element string <code>"c"</code> or the two-element string <code>"c "</code>, and returns the list of all possible combinations.
If I take one of the results, <code>y</code>, concatenate it and call <code>words</code> on the result, it will be split at the spaces inserted by <code>mapM</code>.
In this way I obtain all partitions of <code>x</code> into contiguous substrings.
Then I just count those results where each partition element is a perfect square (by finding it in the list <code>[0,1,4,9,..,x^2]</code>).
A caveat is that each partition is counted twice, with and without a trailing space, so I take the sum of <code>0.5</code>s instead of <code>1</code>s; this is why the result type is a float.</p>

<pre class="lang-hs prettyprint-override"><code>f x=                       -- Define f x as
 sum[0.5|                  -- the sum of 0.5 for
  y&lt;-                      -- every y drawn from
  mapM(\c-&gt;[[c],c:" "])x,  -- this list (explained above)
                           -- (y is a list of one- and two-element strings)
  all(...)                 -- such that every element of
                 id=&lt;&lt;y]   -- concatenated y
          .words$          -- split at spaces satisfies this:
                           -- (the element is a string)
   (...).read              -- if we convert it to integer
    `elem`                 -- it is an element of
    map(^2)                -- the squares of
    [0..read x]            -- the numbers in this list.
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>148</s> <s>139</s> <s>135</s> 134 bytes</h1>

<p>10 bytes thanks to Arnold Palmer.</p>



<pre class="lang-python prettyprint-override"><code>def f(a):
 s=[a[:1]]
 for i in a[1:]:s=sum([[x+[i],x[:-1]+[x[-1]*10+i]]for x in s],[])
 return sum({n**.5%1for n in x}=={0}for x in s)
</code></pre>

<p><a href="https://tio.run/##ZYvLCsMgFET3foWbgia3RekDKvgll7sINFIXNUUTsIR8u42rknQ1zJk578/4HMK5lEfvuBOdNIwnix0aTcS4GyL33AfeoTZkkk3TSyDmFj1BRnPU1GLGNRqtWk9UhVyFRIAkGY/9OMW1rt4cmuZ0Pej6CfWTF2tntfwcWd7Rh1E4gRpucIE7KFAkJdvyHVGg/8jO2rS6lS8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 8 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>ŒṖḌÆ²Ạ€S
</code></pre>

<p>A monadic link taking a list of digits and returning a non-negative integer.</p>

<p><strong><a href="https://tio.run/##y0rNyan8///opIc7pz3c0XO47dCmh7sWPGpaE/z///9oEx0DIDSJBQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> or see the <a href="https://tio.run/##y0rNyan8///opIc7pz3c0XO47dCmh7sWPGpaE/z/6J7D7UBGFhA/apijoGun8KhhbuT//9HRhjoKZjoKJrE6CiCmgY6CIYJpAGaCCDDLBCKIohqKYmMB" rel="nofollow noreferrer" title="Jelly – Try It Online">test suite</a>.</p>

<h3>How?</h3>

<pre><code>ŒṖḌÆ²Ạ€S - Link: list of digits              e.g. [4,0,0,4]
ŒṖ       - all partitions                         [[4,0,0,4],[4,0,[0,4]],[4,[0,0],4],[4,[0,0,4]],[[4,0],0,4],[[4,0],[0,4]],[[4,0,0],4],[4,0,0,4]]
  Ḍ      - convert from decimal list (vectorises) [[4,0,0,4],[4,0,   4 ],[4,    0,4],[4,      4],[   40,0,4],[   40,    4],[    400,4],     4004]
   Æ²    - is square? (vectorises)                [[1,1,1,1],[1,1,   1 ],[1,    1,1],[1,      1],[    0,1,1],[    0,    1],[      1,1],        0]
     Ạ€  - all truthy? for €ach                   [        1,          1,          1,          1           0,            0,          1,        0]
       S - sum                                    5
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 16 bytes</h1>

<pre><code>lf!f!sI@sjkY2T./
</code></pre>

<p><a href="http://pyth.herokuapp.com/?code=lf%21f%21sI%40sjkY2T.%2F&amp;test_suite=1&amp;test_suite_input=%5B1%2C+6%2C+4%5D%0A%5B1%2C+0%2C+1%5D%0A%5B1%2C+0%2C+0%5D%0A%5B1%5D%0A%5B0%5D%0A%5B1%2C+6%2C+4%2C+9%2C+0%2C+0%5D&amp;debug=0" rel="nofollow noreferrer">Test suite</a>.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, 135 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>s x=any((x==).(^2))[0..x]
c(a:b:x)=a*10+b:x
c x=x
h[x]=1&gt;0
h x=(s.head)x
f x@(_:_:_)|y&lt;-until h c x=f(tail y)+f(c y)
f x=sum[1|any s x]
</code></pre>

<p><a href="https://tio.run/##FU7BCsIwFLv3K3rw8OrqaEUEhxX/o1Spc6XDrYjd4A327/WNHJJAQhJ9/nTDUErmaHxaANAYUcPjKIRVdY2OteCbV4PC@L1WFSnWUhZZtOiMvikWyUKuY@ffAlngeIdnQxDrcj3MaeoHHvnWCTB5MouoArREW9bkebR6pWlOF1wZfZ/M99enaReslmd5kheppHLlDw" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>Probably not well golfed yet but this is a surprisingly difficult problem</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/132998/">132998</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




