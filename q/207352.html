<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::207352</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>212</td><td>APLNARS</td><td>251006T050639Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/284012#284012">Rosario</a></td></tr>
<tr d-ix="1"><td>061</td><td>Perl 5 p MListUtil=min</td><td>200722T085321Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207382#207382">Nahuel F</a></td></tr>
<tr d-ix="2"><td>061</td><td>Python 3</td><td>200722T073112Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207379#207379">David Fo</a></td></tr>
<tr d-ix="3"><td>060</td><td>R</td><td>200722T082345Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207381#207381">Kirill L</a></td></tr>
<tr d-ix="4"><td>075</td><td>R</td><td>200725T083134Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207543#207543">Dominic </a></td></tr>
<tr d-ix="5"><td>066</td><td>Julia</td><td>200724T151232Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207498#207498">Federico</a></td></tr>
<tr d-ix="6"><td>169</td><td>Python 3.8</td><td>200722T140113Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207393#207393">Alexey B</a></td></tr>
<tr d-ix="7"><td>060</td><td>Wolfram Language Mathematica</td><td>200722T135419Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207392#207392">ZaMoC</a></td></tr>
<tr d-ix="8"><td>087</td><td>Python 2</td><td>200721T164444Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207354#207354">iLikeTra</a></td></tr>
<tr d-ix="9"><td>071</td><td>Python 3.8 prerelease</td><td>200722T001125Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207369#207369">Surculos</a></td></tr>
<tr d-ix="10"><td>078</td><td>Io</td><td>200722T012212Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207371#207371">user9206</a></td></tr>
<tr d-ix="11"><td>026</td><td>APL Dyalog Unicode</td><td>200722T021500Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207373#207373">Bubbler</a></td></tr>
<tr d-ix="12"><td>031</td><td>Charcoal</td><td>200721T231940Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207368#207368">Neil</a></td></tr>
<tr d-ix="13"><td>149</td><td>Zig 0.6.0</td><td>200721T205604Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207365#207365">pfg</a></td></tr>
<tr d-ix="14"><td>015</td><td>Japt v2.0a0 g</td><td>200721T172344Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207357#207357">Shaggy</a></td></tr>
<tr d-ix="15"><td>011</td><td>Jelly</td><td>200721T183120Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207361#207361">Jonathan</a></td></tr>
<tr d-ix="16"><td>011</td><td>05AB1E</td><td>200721T164551Z</td><td><a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207355#207355">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>APL(NARS), 212 chars</h1>
<pre><code>h←{⍬≡r←⍸⍺≥÷1∨¨k←⌽+∘÷\⍵:⍬⋄1≥i←¯2+↑r:k[↑r]⋄2&gt;≢r←i↓k:1↑r⋄2↑r}∘{∞≤∣⍵:⍬⋄m,∇÷⍵-m←⌊⍵}
v←{(i z)←(⌊,(1∘∣))÷/⍎¨⍕¨1∧¨⍵⋄w←({1∧⍵},{÷1∨⍵})⍵[2]⋄k/⍨⍺≥÷1∨¨k←⌽÷/¨{⍎(⍕⍵),'x'}¨¨{⌈w×⍵}¨1,z+0,⍳i}
p←{1≥≢m←⍺h⍵:m⋄m←⍺v m⋄m[↑⍸k=⌊/k←∣m-⍵]}
</code></pre>
<p>// +/79 95 38=212</p>
<p>the function 'p' has as input left [⍺] one positive integer (that would be the max denominator)
and as input right [⍵] one rational type, and return zilde or a rational type.</p>
<p>It would use the continue fraction expansion of the input ⍵, get from the expansions the 'sum'
more near to ⍵ that has denominator less than ⍺, and the 'sum' that follow that, the one more precise
it is not matter if denominator is &gt;⍺. For example</p>
<pre><code>  1000000 h 3.14159265359x
5419351r1725033 1146408r364913 
</code></pre>
<p>From this 2 rational numbers find the division of the two numerators among them for obtain a decimal number,
in example</p>
<pre><code>  5419351 ÷ 1146408 
4.727244576
</code></pre>
<p>and use the fractional part of it (0.727244576) for find the number that seems to be
the fraction that has min abs difference value from ⍵ with denominator ≤ ⍺.</p>
<p>Test:</p>
<pre><code>  8 p 1.21x
6r5 
  1000000 p 3.14159265359x
3126535r995207 
  12 p 3.14159265359x
22r7 
  225 p 0.0748947977x  
14r187 
  1000000 p 19.0x
19 
  100 p 2.7182818x
193r71 
  22 p 0.8193927511x 
9r11 
  20 p 0.2557463559x 
1r4 
  100 p 0.2557463559x 
11r43 
</code></pre>
<p>The code it seems break for denominators &gt; 100000000000x</p>
<pre><code>  ⎕fpc←1024
  1024÷3.322
308.2480433
  80⍕○1v
3.14159265358979323846264338327950288419716939937510582097494459230781640628620900
  aa←3.14159265358979323846264338327950288419716939937510582097494459230781640628620900x
  10000000000x p aa
10886058930r3465140179 
  100000000000x p aa
10886058930r3465140179 
  1000000000000x p aa
597964296r190337947 
  10000000000000x p aa
5912477861r1882000155 
  90⍕∣10886058930r3465140179-aa
0.000000000001506760081764004719735822028917648541680158284026944442004048915485730336859483
  90⍕∣5912477861r1882000155-aa
0.000000000001515505297419494124190885830197957760107654303699020598498454609419685389130586
</code></pre>
<p>Note that 10886058930r3465140179 is a better approssimation of the 'aa' number than 5912477861r1882000155
and it should not be that.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-p -MList::Util=min</code>, <s>65</s>, 61 bytes</h1>
<p>-4 bytes thanks to DomHastings</p>

<pre class="lang-perl prettyprint-override"><code>/ /;$_=min map abs($`-($-=.5+$_*$`)/$_).&quot; $-/$_&quot;,1..$';s;.* ;
</code></pre>
<p><a href="https://tio.run/##VY5BasMwEEX3PsWQDthOKlkz9kRShG/QLrszOC60IHASE3lTSq9e1aWr7v6D/@Atb/dZ8kN8r3CoP9P0gUPAoS/Lr9xAE3DsL/EKl2mB6TVVeFYVql7LAcc9nusGx1rvANU2do@kNZYhBb2HkDNpJnBFq6kj8XyUVjwQF6wtOXbkgIwpjHbkW89WiIB5Yxax3bGV7c3mP/8JxnbOd9ZbuwnyfVvWeLumrOYlq@enmNbT6WWN82/4Dw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>66</s> 61 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda x:Fraction(x).limit_denominator
from fractions import*
</code></pre>
<p><a href="https://tio.run/##ZY3PasQgEIfP9SmGPSVFRMe46sJe@xSFYmtChfgHIyX79GmyW3po5zLMb75vptzaZ05ym66v2@ziu3ewXl6q@2ghp27t2RxiaG9@TDmG5FquZKo5wvSDLBBiybU9b48Oy20hU66wUvAQEkRXuvHLzfTYsKX5kPoLeSo1pNYdEIVp/9P5fifGcj1ROPWbYCgoGCKZGISyeFZSWQqC34sIy/jvxP9RSJBpYdAIc6cIZ0ZYaVErsZ9F3ANUSg9nqQ4B@Z/g4XA9GDtoq/XhqG8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>The above function takes a floating point number and returns a bound function <code>Fraction.limit_denominator</code> which, in turn, takes the upper bound for the denominator to return a simplified, approximated fraction as requested.</p>
<p>As you can tell, I’m more of an API reader than a golfer.</p>
<hr />
<ul>
<li>minus 5 bytes <a href="/questions/207352/cleaning-up-decimal-numbers/207379#comment491671_207379">thanks to ovs</a></li>
</ul>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>61</s> 60 bytes</h1>
<p>With a byte saved by Dominic van Essen.</p>

<pre class="lang-r prettyprint-override"><code>function(x,d,n=round(1:d*x))c(m&lt;-order((x-n/1:d)^2)[1],n[m])
</code></pre>
<p><a href="https://tio.run/##dY/BasQgEIbvfQqhFy1GndHJOGX7JMv2smmghzUQdiFvn6qhhUI7p@H/5vvRdZ/VadjnR7neP5eiNzvZ8rYujzJpeJ1eNmOu@nYalnX6WLXehuJrbN7RnOFiy/l2Mfusg0MiTmMkEqswGPWswKenWYNDsCq3YPRUg@ggAQmOFNsthD6NR@ihFyEM3Fxx4efi6BQPf3RgY4i@SegYMmbI3Tyk6LlpweW6CzJBfRN2qxYe6L8P/CbflZXFDgOnLImFuTVSh8lD5v0L" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 75 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(x,d)c((n=rep(0:1,e=d)+(1:d*x)%/%1)[f&lt;-order((x-n/1:d)^2)[1]],f%%d)
</code></pre>
<p><a href="https://tio.run/##fY3RSsQwEEXf/QpBColmk8wk00kW@yXLKtK0sCCtZFfo39e06EMr7Dzee@bcPLef47W73t77/NE2c/89tLfLOIhJJdkKMTS5@xL2CKprknwRcEzPk6xMBfLUvx7GnLosxHQYTGnkG8oTnM@qr6okN2YBGkEF@fhUG3rYNE6DB4pYk6OowK5XQAdrZGIktLz9gajtH7qwEA3ctWKBEM1Og5ohYICwuFaNM7wTWR1KHJEJQOHiKVv/GCRiXzsqW7iajL@D/K4VyO0pyz5Ez5G5jNFCeQOB5x8" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Not a competitive answer as it's already beaten by <a href="https://codegolf.stackexchange.com/questions/207352/cleaning-up-decimal-numbers/207381#207381">Kirill</a>, but posting for fun anyway.</p>
<p>I didn't think of the <code>round()</code> function, so this approach rounds down &amp; then up to generate a double-length list of candidate numerators, and then finds the index of the closest fraction.  Since the index might be in the second (rounded-up) part of the list, the denominator is the index <em>mod</em> the length of the single-length list.</p>
<p>I think it's fair to conclude that the <code>round()</code> function indeed serves a useful role...</p>
</div>
<div id="pu5" class="pu"><h1>Julia, 66 bytes</h1>
<pre><code>r(x,m)=minimum((n=Int(round(x*d));(abs(x-n/d),n//d)) for d=1:m)[2]
</code></pre>
<p>or</p>
<pre><code>(x,m)-&gt;minimum((n=Int(round(x*d));(abs(x-n/d),n//d)) for d=1:m)[2]
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="noreferrer">Python 3.8</a>, 169 bytes</h1>
<p>Maybe the reason why there was no submissions using <a href="https://en.wikipedia.org/wiki/Farey_sequence" rel="noreferrer">Farey sequences</a> is that the code appears rather lengthy.</p>
<p>In short, every proper fraction <span class="math-container">\$\frac{m}{k}\$</span> in lowest terms appears in Farey sequence of order <span class="math-container">\$d\$</span> if and only if <span class="math-container">\$k\le d\$</span>.<br />
Farey sequences are constructed by taking <a href="https://en.wikipedia.org/wiki/Mediant_(mathematics)" rel="noreferrer">mediant</a> of neighboring terms of lower order: <span class="math-container">\$\left(\frac ab,\frac cd\right)\to\frac{a+c}{b+d}\$</span>, starting from <span class="math-container">\$\left(\frac 01,\frac 11\right)\$</span>.
And the target number is within one of the intervals <span class="math-container">\$\left[\frac ab,\frac{a+c}{b+d}\right]\$</span>, <span class="math-container">\$\left[\frac{a+c}{b+d},\frac cd\right]\$</span>, then we take the interval as a current one.</p>
<p>So the algorithm is:</p>
<ol>
<li>Take <span class="math-container">\$\left(\frac ab,\frac cd\right):=\left(\frac 01,\frac 11\right)\$</span>.</li>
<li>Take <span class="math-container">\$\frac{m}{k}:=\frac{a+c}{b+d}\$</span> and compare with target.</li>
<li>If <span class="math-container">\$\frac{m}{k}&gt;\$</span> target, replace <span class="math-container">\$\frac{a}{b}\$</span> by <span class="math-container">\$\frac{m}{k}\$</span>,</li>
<li>Else replace <span class="math-container">\$\frac{c}{d}\$</span> by <span class="math-container">\$\frac{m}{k}\$</span>.</li>
<li>If the next denominator <span class="math-container">\$b+d\$</span> is no more than denominator limit, repeat from 2.</li>
<li>Else return nearest from <span class="math-container">\$\frac ab,\frac cd\$</span> to the target.</li>
</ol>

<pre class="lang-python prettyprint-override"><code>def f(e,n,g,j):
&#9;if n==0:return e,1
&#9;x=[(0,1),(1,1)]
&#9;while True:
&#9;&#9;(a,b),(c,d)=x
&#9;&#9;if b+d&gt;j:break
&#9;&#9;m,k=a+c,b+d
&#9;&#9;x[m*g&gt;n*k]=(m,k)
&#9;m,k=x[2*n/g-a/b&gt;c/d]
&#9;return m+e*k,k
</code></pre>
<p><a href="https://tio.run/##ZZLNkqMgEMfP4Sm4CYYVQQmaKvIUe8vkgIqJEyUWmppM1b57tjXZPez2Aej/r7tpPsbv@XLzWTGG57NxLW6JY56d2Sfdo03XYm9Mug9uvgePHRNo8zBHkjJBGREwntDm69L1Dv8MdwcZG2JZBaxmDTUP8KFEtW0On/sqOHsFYWBXY7c1AxW8x3GIzwcfX0@GAKFo5Y@jjD0//7C8OtS8gU3eHQxbF1/Z9TmZEEWRSKRguMC/8I4rlCUiF6qUO5WpkmGRrgYwE6vGy1LJVCNRJulfvHBRcvFftgQgJddIJloUshDFmrOGZ1wLlCYFrEqplYAm5BIPdRZdKqXzXaaWOnLN4Pk/8rsSgAxIqvOizHWp9VJILSTnotAIzoi6YbyFGQeHBjvXFxdMcEl9G0a4dYIwGPjTvSIh@mi2EevtUDUWD/sQERBoxP4Euam2oyNTMo19N5Pow0f0mJ7oyt/2cihqbwHDSzJ4R@ZwBzf/2jxpO9/YvicT/I8l1E6Tg/Za0vmZWMqWCT6ASOO4d35ZLkpNqTFrSPMSHKXP3w" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Eats (entire_part,proper_numerator,proper_denominator,denominator_limit) and produces (numerator,denominator), like</p>
<pre class="lang-python prettyprint-override"><code>>>> f(3,141592653589793,10**len('141592653589793'),57)
(179, 57)</code></pre>
<p>P.S. Recursive version is nothing but shorter, even with all whitespace removed:</p>
<pre class="lang-python prettyprint-override"><code>f=(lambda e,n,g,j,a=0,b=1,c=1,d=1:
   n and(
       b+d>j and(lambda x,y:(x+e*y,y))(*([(a,b),(c,d)][2*n/g-a/b>c/d]))
       or((m:=a+c)*g>n*(k:=b+d))and f(e,n,g,j,a,b,m,k)or f(e,n,g,j,m,k,c,d)
       )or(e,1)
   )
</code></pre>
<p><a href="https://tio.run/##ZVLRjqQgEHznK3iTdnpVUAY1cX5kdh5QcdZdRYNzyU5y/z4H7uzmckdCaKqqi4Zmvd/eFpuXq3sMDXtMem57TQ1avOI76ibDtuHY@dk3vCaWatszQiltD/3pfd89cz7xXrPPg4nveAdgMTszjS0g67CHy1nENr2@6LQ9dWl/AQgei2Nsrht96CC@nmzMPurG@wJ4WzqwnyqwxRk/YHF/gR7A4Bx8PONxDg8gW@OiKOKJ4EhL@pseU0nyhBdcVuIoc1kh5dk@PJnzHUurSopMEV4l2Q8deF6l/L9s4QkhUkVEongpSl7uObs8TxUnWVL6qBJKcl@ECHrvE3AhpSqOuQw@Ys9Ii3/gp5Mncs9kqiirQlVKBSMZmCLlpSL@jmSc18XdqDNk1rfuzbjGmaRb5nWczN4iTyXbr5a56LU/RPjs01y7iHkAIvwWma3Tq2Fbsq3TeGPRq43gnF32t/0eXxsgg@9CaIh/ezR0tPR5eDKMttfTxDaod6neNuPLG9hob0wDhsV/B57F8WRsCAPSATTNLum/AAPw@AM" rel="noreferrer">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 60 bytes</h1>
<pre><code>(t=s=1;While[Denominator[s=Rationalize[#,1/t++]]&lt;#2,j=s];j)&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n277X6PEttjW0Do8IzMnNdolNS8/NzMvsSS/KLrYNgioKD8vMSezKjVaWcdQv0RbOzbWRtlIJ8u2ONY6S1Ptf0BRZl6JQ3q0sZ6hiaGppZGZqbGppY6CoVHs//8A" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>168, 135</s>, 87 bytes</h1>

<pre class="lang-python prettyprint-override"><code>z=i=1
def f(x,y):exec&quot;r=round(x*i);q=abs(r/i-x)\nif q&lt;z:z=q;t=r;u=i\ni+=1;&quot;*y;print t,u
</code></pre>
<p><a href="https://tio.run/##jY9BboMwEADPzSus5IJTStkFx3aIf9ILAbu12tgBjAR8nkAq5ZIeuseRZnb3OoYv73CeJ2UVbGptiImGeKRHPehq26rW966Ohr2lRaPKcxe17/ZtoB/OGtKcpuOkmiKotuiVXdirgmK7H4tra10gIe5nE0GCEBNBNzsTZQnkwCQeWMZkTCC9D33ZVf5y0S7omvg@kLOuyr7TxC6N8lt3JHhPfrz7XBsgk/ShLu7/5ef9SBeICQeBAsS9upI0ESAziZzBcjriL0PGeH7I2Gpi@swecspzIXMuOV9lRue/374B" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Thank you all for your recommendations on my first golf!</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="noreferrer">Python 3.8 (pre-release)</a>, <s>77</s> 71 bytes</h1>
<p><em>-6 bytes thanks to @ovs !</em></p>

<pre class="lang-python prettyprint-override"><code>lambda x,n:min([abs(x-(a:=round(x*b))/b),a,b]for b in range(1,n+1))[1:]
</code></pre>
<p><a href="https://tio.run/##ZY/RboMgGIXvfQrSK9iY@KMUMfFJul7gajcSRYJ0sUnf3YFbm2UzXuj5zndQdw0fky1r59dz@7oOeuxOGi3UNqOx@KC7GS8vWDetny72hJenjhDWEappdzxPHnXIWOS1fe8xUPsMhBygOa5mdJMPaL7OWWoNxvapGN/zOZyMbTKEFktRv7j@LfQn1KJROzwHH7k3jm5KPrvBBLy77QhJAkU2FvtPPeDFpuSXfjA24EBQOi6ks@7sPsJ25BiVePt@vgwhOmccfzTtOJ/s75w@ePvYICvkHCiq0Q3tmcjKHCoQiu9FKRRFUGxXhCVsGVNK8EJmoPLigRMHxeCfzSPgnMmM5xJqXkO9OVu9ZBKyIq/jk@JSQPwInvpxJ@VcCFntS5F2@Gaw6k/8sxRBGUkhq1pVUkmZhkQiFYNafgE" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Simply try all denominators from <code>1</code> to <code>n</code>, saving all results into a list where each element has the form <code>[error, numerator, denominator]</code>. By taking the min of the list, the fraction with the smallest error is selected.</p>
</div>
<div id="pu10" class="pu"><h1><a href="http://iolanguage.org/" rel="nofollow noreferrer">Io</a>, 78 bytes</h1>
<p>Port of Surculose Sputum's answer.</p>
<pre><code>method(x,y,Range 1to(y)map(a,list((x-(b :=(a*x)round)/a)abs,b,a))min slice(1))
</code></pre>
<p><a href="https://tio.run/##dcxBDoIwEEDRvafocsZU7AyUtiZewrWboqBNoCWACZ4edWM0xvX7@SEtjdjtxXHp6umazjDLuzz4eKkFTQnu2PkevGzDOAHMG6ieMfj1jEO6xTNuPfpqlJX0iF2IYmzDqQZCXBrIMypIOy51rp0UxCj6IcSpjasGODNk2ZJ9glKfojJLLndsNJEUzN/GWpuizPXryOq//UyVKawrjDPmNdVvXB4" rel="nofollow noreferrer" title="Io – Try It Online">Try it online!</a></p>
<h1><a href="http://iolanguage.org/" rel="nofollow noreferrer">Io</a>, 93 bytes</h1>
<pre><code>method(x,y,list(((q :=(r :=Range 0to(y)map(a,(x-(a*x)round/a)abs))indexOf(r min))*x)round,q))
</code></pre>
<p><a href="https://tio.run/##dcy9DoIwFIbh3avoeI6p2B4obU28BhNnlxpAm0D5NYGrRxg0GuPyLU@@19dzwQ5HdpmrfLjXGYx84qXvBwBoF4BumbMLt5yJoYYJK9eA4zDuwG1H7OpHyPYO3bVH9CHLx1OxXCofEF/MW8S5gDiSiVSWUhUry5kkZE3nw1CGTQEUaWnISLOAEJ8iIiNtbEkrKTkj@jZSSidprNYiif/2ExU6MTbRVus1qt44PwE" rel="nofollow noreferrer" title="Io – Try It Online">Try it online!</a></p>
<h2>Explanation (ungolfed):</h2>
<pre><code>method(x, y,                   // Take two operands
    r := Range 0 to(y) map(a,  // Map in range 0..y (set to r):
        (x-(a*x)round/a)abs    //     |x-round(a*x)/a|
    )                          //     (Aka find the appropriate numerator)
    q :=r indexOf(r min)       // Set q as the 0-index of the smallest number of r
    list((q*x)round,q)         // Output [numerator,denominator]
)                              // End function
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 26 <a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">bytes</a></h1>

<pre class="lang-apl prettyprint-override"><code>⌊.5+(⊃∘⍋1+|⍨⌊⊢-|⍨)∘÷∘⍳×1,⊣
</code></pre>
<p><a href="https://tio.run/##zZCxTsMwEIZ3P0XGhKZx7hzX9swCK@UFKqGyVIKpEqJMSBVKSQUDChMDLGwMFarESN7kXiSc0xZIGWAkiiLn/@67RP/gdNQ9OhuMTo7rc7rOE92h4g2qkvJLKmbjEDqUPzLoRuOqhAnDajmm6U21pGJBxeuF@EXjnK3ntrNSQogpf4qqMvTa1T2b0PHDjFnv@mPEOXseLuq19rdp/l2/vh7yl6mYs/T@omh6S/O7/sEuPw/39vs1JAjBMLAipHIGER8hbS4B7tvLF0UR7mzmRJpYcMqh0eC3IHKCWpusp7T2PqbbyUpLTWZdZpwxjaaFoOLhX93CNxMHNpgEPamFSiAD7bCnlXbxpheGCppMOqcxNdxakn5iz8FJ@GEjA0RpBCYGLFqwjdOMK2mgVWzMo0x4D7TK5LwxZLYVrzcxUK2q/SLtSSbBmg8" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>A dyadic tacit function that takes the decimal number on its left and the max denominator on its right, and gives a 2-element vector of <code>[denominator, numerator]</code>.</p>
<h3>How it works</h3>
<pre class="lang-apl prettyprint-override"><code>⌊.5+(⊃∘⍋1+|⍨⌊⊢-|⍨)∘÷∘⍳×1,⊣  ⍝ Left: x, Right: d
                  ∘÷∘⍳      ⍝ v←[1, 1/2, ..., 1/d]
    (          |⍨)          ⍝ Remainder of x divided by each of v
          |⍨⌊⊢-             ⍝ Min distance from x to some integer multiple of v
        1+                  ⍝ Add 1 to treat close enough numbers as same
                            ⍝ Otherwise it gives something like 5/20 due to FP error
     ⊃∘⍋                    ⍝ D←The index of minimum (the optimal denominator)
                      ×1,⊣  ⍝ Exact fraction (D,Dx)
⌊.5+                        ⍝ Round both

</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="noreferrer">Charcoal</a>, 31 bytes</h1>
<pre><code>Ｎθ⪫…⮌⌊ＥＥＮ⌊⁺·⁵×θ⊕κ⟦↔⁻θ∕ι⊕κ⊕κι⟧²/
</code></pre>
<p><a href="https://tio.run/##bYzLCsIwFET3fkVwdQOxWrWCdCUVoUJFxJ246OOCF/OoaVPw66NmJeKB2Qxzpr6Vtjal9D7XresPTlVo4cHT0dGS7mFvSEP2rCVmN9PCCQe0HUJBmpRTUJRtyLfMBdtJYywcpetgFiWCnUlhBw/Bcl1bVKh7bODOPwh22VSdka4Pry7MtjRQg0B/hN9KMLqGev7OeDrmPPV@EcXLOFnPV8kiWY/iWcBPBvkC" rel="noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｎθ                              Input decimal as a number
        Ｎ                       Input maximum denominator
       Ｅ                        Map over implicit range
                κ               Current index (0-indexed)
               ⊕                Increment (i.e. 1-indexed)
             ×                  Multiplied by
              θ                 Input decimal
         ⌊⁺·⁵                   Round to nearest integer
      Ｅ                         Map over results
                      ι         Current numerator
                     ∕          Divided by
                       ⊕κ       Current denominator
                    θ           Input decimal
                  ↔⁻            Absolute difference
                         ⊕κ     Current denominator
                           ι    Current numerator
                 ⟦          ⟧   Make into list
     ⌊                          Take the minimum (absolute difference)
    ⮌                           Reverse the list
   …                         ²  Take the first two entries
  ⪫                           / Join with literal `/`
                                Implicitly print
</code></pre>
<p>I'm not 100% sure that the algorithm is correct, so just in case, here's a 34-byte brute-force solution:</p>
<pre><code>ＮθＦＮＦ⊕⌈×θ⊕ι⊞υ⟦↔⁻θ∕κ⊕ι⊕ικ⟧Ｉ⊟⌊υ/Ｉ⊟⌊υ
</code></pre>
<p><a href="https://tio.run/##hY5LC4JAFIX3/oqh1R2w0sxAWoVtWhQu2kULH1NenIeOM/79KaNAIugsv/PglHWuS5Vz5w6yteZkRcE0dHTr3ZQmMIWUkjcrNRNMGlZBypCjvMMZBeuh88nURDqKZLavwfrksit6xa1hcERpX@k9DlgxaH70vpFPmuvzVaZRGkjz3kCm2nEJhRVgx8rHnS1n/5LORYtwHcbJahNHceKFQRC4@cAf" rel="noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Very slow, so test case is limited to a denominator of <code>1000</code>. Explanation:</p>
<pre><code>Ｎθ
</code></pre>
<p>Input the decimal.</p>
<pre><code>ＦＮ
</code></pre>
<p>Loop over the possible denominators (except 0-indexed, so all of the references to the loop variable have to be incremented).</p>
<pre><code>Ｆ⊕⌈×θ⊕ι
</code></pre>
<p>Loop until the nearest numerator above.</p>
<pre><code>⊞υ⟦↔⁻θ∕κ⊕ι⊕ικ⟧
</code></pre>
<p>Save the fraction difference and the denominator and numerator.</p>
<pre><code>Ｉ⊟⌊υ/Ｉ⊟⌊υ
</code></pre>
<p>Print the numerator and denominator of the fraction with the minimum difference.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://ziglang.org" rel="nofollow noreferrer">Zig 0.6.0</a>, 149 bytes</h1>
<pre class="lang-rust prettyprint-override"><code>fn a(e:f64,m:f64)[2]f64{var n:f64=1;var d=n;var b=d;var c=b;while(d&lt;m){if(n/d&gt;e)d+=1 else n+=1;if(@fabs(n/d-e)&lt;@fabs(b/c-e)){b=n;c=d;}}return.{b,c};}
</code></pre>
<p><a href="https://godbolt.org/z/9MYE8b" rel="nofollow noreferrer">Try it</a></p>
<p>Formatted:</p>
<pre class="lang-rust prettyprint-override"><code>fn a(e: f64, m: f64) [2]f64 {
    var n: f64 = 1;
    var d = n;
    var b = d;
    var c = b;
    while (d &lt; m) {
        if (n / d &gt; e) d += 1 else n += 1;
        if (@fabs(n / d - e) &lt; @fabs(b / c - e)) {
            b = n;
            c = d;
        }
    }
    return .{ b, c };
}
</code></pre>
<p>Variable declarations are annoying.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> v2.0a0 <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-g</code></a>, 15 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>mc ×õ ï ñ@ÎaXr÷
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=2.0a0&amp;flags=LWc&amp;code=bWMg1/Ug7yDxQM5hWHL3&amp;input=WzEuMjEsIDhd" rel="nofollow noreferrer">Try it</a></p>
<pre><code>mc ×õ ï ñ@ÎaXr÷     :Implicit input of array U
m                   :Map
 c                  :  Ceiling
   ×                :Reduce by multiplication
    õ               :Range [1,result]
      ï             :Cartesian product with itself
        ñ           :Sort by
         @          :Passing each pair X through the following function
          Î         :  First element of U
           a        :  Absolute difference with
            Xr÷     :  X reduced by division
                    :Implicit output of first pair
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 11 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ċ×⁹p÷/ạ¥Þ⁸Ḣ
</code></pre>
<p>A dyadic Link accepting the decimal [evaluated as a float] on the left and the denominator limit on the right which yields a pair <code>[numerator, denominator]</code> representing the simplified fraction.</p>
<p><strong><a href="https://tio.run/##ATIAzf9qZWxsef//xIrDl@KBuXDDty/huqHCpcOe4oG44bii////My4xNDE1OTI2NTM1Of8xMg" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##ZcuxDcIwEADAPlNkAMvxv/359yyWSxqUgpYylCxAhwQSoqEnUGIWiRcxsZBoaE@69WoYtqW89@mQx8cm3bv5eXpd0jGP0zydS7p2eXcrJQTQCKqV2KhgNTggjz1Z8qoFrIiaQVBAFjCmitEC3npkgmUifg2J2PWW6kTzb79s2Il37JlrptjEDw" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a> (big denominator limit cases removed due to inefficiency.)</p>
<h3>How?</h3>
<pre><code>Ċ×⁹p÷/ạ¥Þ⁸Ḣ - Link: v, d
Ċ           - ceil (of the decimal value, v)
 ×⁹         - multiplied by chain's right argument (denominator limit, d)
   p        - Cartesian power (d) -&gt; all pairs [[1,1],...,[1,d],[2,1],...,[Ċ×⁹,d]]
                  (note that any pair representing a non-simplified fraction is to
                   the right of its simplified form)
        Þ   - (stable) sort by:
       ¥    -   last two links as a dyad:
     /      -     reduce by:
    ÷       -       division (i.e. evaluate the fraction)
      ạ  ⁸  -     absolute difference with the chain's left argument (v)
          Ḣ - head
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="noreferrer">05AB1E</a>, 11 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="noreferrer">bytes</a></h1>
<pre><code>î*LãΣ`/¹α}н
</code></pre>
<p><a href="https://tio.run/##ASsA1P9vc2FiaWX//8OuKkzDo86jYC/Cuc6xfdC9//8wLjI1NTc0NjM1NTkKMTAw" rel="noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWXCoZX/D6/T8jm8@NziBP1D685trL2w97/O/@hoCx1DPSPDWJ1oQyMdYz1DE0NTSyMzU2NTS5CQgYGOkZ65oYWRhaEFkG9kpGOgZ2FoaWxpZG5qCNJkZAAUMTI1NTcxMzaF60ETMjIyBQoZmJtYWJqYW5qbx8YCAA" rel="noreferrer">verify all test cases</a> (except for the two <code>1000000</code> test cases, which take too long).</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>î          # Ceil the (implicit) input-decimal
 *         # Multiply it by the (implicit) input-integer
  L        # Pop and push a list in the range [1, ceil(decimal)*int]
   ã       # Create all possible pairs of this list by taking the cartesian product
    Σ      # Sort this list of pairs by:
     `     #  Pop and push both values separated to the stack
      /    #  Divide them by one another
       ¹α  #  Get the absolute difference with the first input-decimal
    }н     # After the sort: leave only the first pair
           # (after which it is output implicitly as result)
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/207352/">207352</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




