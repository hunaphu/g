<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::277493</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>350</td><td>Ruby</td><td>250103T192921Z</td><td><a href="https://codegolf.stackexchange.com/questions/277493/how-many-free-polyominos-without-holes/277505#277505">Level Ri</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 350 bytes</h1>

<pre class="lang-none prettyprint-override"><code>f=-&gt;n,p=[[2]],s=1{z=[w=n*3,w-1,-1,~w,-w,1-w,1,-~w];p p.size
#p.map{|a|t=(?.*~-w+$/)*s;a.map{|k|t[k]=?#};puts t,$/}
s&lt;n&amp;&amp;(q=[]
p.map{|a|(s*4).times{|i|d=z[i%4*2]+a[i/4]
a.index(d)||(c=a+[d];r=[];g=a.count(d-~w);h=0
8.times{|j|c=c.map!{|k|j%2&lt;1?k-k%w*2:k%w*w+k/w}.sort!.map{|m|m-(c[0])+n};r&lt;&lt;c*1
h+=g^g=a.count(d+z[j])}
h&lt;3&amp;&amp;q&lt;&lt;r.min)}}
f[n,q&amp;q,s+1])
}
</code></pre>
<p><a href="https://tio.run/##TY7dboIwGIbPexUalVBaiqAHy6DzQpou6cCfSqhAa7ph660ziXFZ8n7vyZc879Nfv37G8UDjD4VbyljGOdY0vQ2UWaqiDbZxih@5WxxbnE6H47vleTtriZbDHixa0oj25oQzNNyR6B5btExgpHPxfNTOsJrT3cLn7dXomcHLxANdqCAIO8o4@AOEOtpCYmSz1zcnXUUHJlfbKONIMJlsORBEqmr/HVbQubCkArGK5/2DkR@pIOXlqkxYPfRgfqJr8PZCnV1Jy2lkPtmcV1mR7uq4Xtkoe5/aojqxnuhLb@ZPl8Y1cViyNYdI@bwvijJKwQnR4@e/ITSwM4cenIpNEHRF0ZNGKug9ODCFu6DDGqUcAj8eWJrx8Rc" rel="nofollow noreferrer" title="Ruby â€“ Try It Online">Try it online!</a></p>
<p>First working version, adapted from my answer to a <a href="https://codegolf.stackexchange.com/a/246311/15599">previous question</a> about polyiamonds (shapes composed of equilateral triangles). This version prints the full sequence from 1 to n. It will even print the polyiamonds themselves if you uncomment the second line. Golfed version to follow.</p>
<p>This is a recursive function taking required size of polyominos <code>n</code> as an argument, plus two additional arguments: an array <code>p</code> of smaller polyominos and <code>s</code> the number of squares in the smaller polyominos. The initial value of these corresponds to the seed polyomino of just one square.</p>
<p>The main new feature is the avoidance of holes. The polyomino is grown by adding a new square beside any existing square in any of the four orthogonal directions. The new square is rejected if it bridges across to another existing square. This is detected by walking around the 8 spaces adjacent to the new square and counting the number of changes from full square to empty square. There should be exactly 2 changes. If there are more, the new square is bridging and the polyomino is rejected.</p>
<p>At the same time, the polyomino is reflected 8 times orthogonally and diagonally to generate all 8 possible orientations. If the polyomino is not rejected, it is added to the new list of larger polyominos <code>q</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/277493/">277493</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




