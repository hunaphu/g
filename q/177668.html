<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::177668</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>048</td><td>Wolfram Language Mathematica</td><td>181217T061805Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177687#177687">att</a></td></tr>
<tr d-ix="1"><td>103</td><td>Clojure</td><td>240903T144735Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/275322#275322">NikoNyrh</a></td></tr>
<tr d-ix="2"><td>026</td><td>Charcoal</td><td>181216T234838Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177682#177682">Neil</a></td></tr>
<tr d-ix="3"><td>078</td><td>Python 2</td><td>181218T034609Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177719#177719">Chas Bro</a></td></tr>
<tr d-ix="4"><td>010</td><td>Jelly</td><td>181216T234943Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177683#177683">Jonathan</a></td></tr>
<tr d-ix="5"><td>012</td><td>Jelly</td><td>181216T193333Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177670#177670">Erik the</a></td></tr>
<tr d-ix="6"><td>090</td><td>JavaScript ES6</td><td>181216T213612Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177675#177675">Arnauld</a></td></tr>
<tr d-ix="7"><td>015</td><td>05AB1E</td><td>181217T101910Z</td><td><a href="https://codegolf.stackexchange.com/questions/177668/approximate-the-proportion-of-integers-with-neighboring-factors/177694#177694">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>69 ... 52 51</s>  48 bytes</h1>
<pre><code>(-##&amp;@@@-1^#).GCD@@@(#!/(#+2)!)&amp;@*Subsets@*Range
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7X0NXWVnNwcFB1zBOWVPP3dkFyNZQVtTXUNY20lTUVHPQCi5NKk4tKXbQCkrMS0/9H1CUmVcSraxrl@agHKtWF5ycmFcHlok2NI79DwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>1-indexed. Much faster than the previous version.</p>
<p>Fairly straightforward implementation of inclusion-exclusion.</p>
<pre><code>                                @*Subsets@*Range    subsets of 1..n
 -##&amp;@@@-1^#                                        include/exclude?
                     #!/(#+2)!                      index -&gt; inverse neighbor-product
              GCD@@@(         )                     subset density
             .                                      collect
</code></pre>
<p><code>GCD</code> evaluates to <code>0</code> with no arguments, in contrast to <code>LCM</code> which does not evaluate.</p>
</div>
<div id="pu1" class="pu"><h1>Clojure, 103 bytes</h1>
<pre><code>#(/(count(for[i(range 1000000):when(first(for[j(range 2 %):when(=(mod i(*(inc j)j))0)]j))]i))1000000.0)
</code></pre>
<p>The input is &quot;3-indexed&quot;, so you need to call it like this to test the case n = 12:</p>
<pre><code>(def f #(...))
((comp f (partial + 3)) 12)
; 0.215085
</code></pre>
<p><a href="https://tio.run/##LY3BCsIwEETv/YoFEXYValopiOKXSA@hTXRDuwkxxc@PQTOHubxh3rR4t0WTM87GgoUdnnDymyS0Pj4Yo5angU79QtfPywhaju8/d5X3sK/sjqufgfGALBM4ckSKxtIjE9WbVhE1DYbIkhYBLMI1FDcGHRPrBY5wJoKuL7MbqLbvBnUZcv4C" rel="nofollow noreferrer">TIO</a>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 26 bytes</h1>

<pre><code>ＦＮ⊞υ×⁺²ι⁺³ιＩ∕ＬΦΠυ¬⌊Ｅυ﹪ιλΠυ
</code></pre>

<p><a href="https://tio.run/##PY07DsIwEER7TuFyLZmG0FGCkJBI5IILmMTglfyJ7N1c39gpmGqk0XszO5PnZHytn5QFPOLKNHF42wxSCs3FASvxwmALaM8FTkqgVGLvQ@9SXg46YyS4mkJwww0XC08bv@Tgjp6aSue08EzAjZwSwYgRAwcYzdr1Y1t9AlTCyz3N/yf6Qa3netz8Dw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Hopelessly inefficient (O(n!²)) so only works up to <code>n=4</code> on TIO. Explanation:</p>

<pre><code>ＦＮ⊞υ×⁺²ι⁺³ι
</code></pre>

<p>Input <code>n</code> and calculate the first <code>n</code> products of neighbouring factors.</p>

<pre><code>Ｉ∕ＬΦΠυ¬⌊Ｅυ﹪ιλΠυ
</code></pre>

<p>Take the product of all of those factors and use that to calculate the proportion of numbers having at least one of those factors.</p>

<p>30-byte less slow version is only O(n!) so can do up to <code>n=6</code> on TIO:</p>

<pre><code>Ｆ⊕Ｎ⊞υ⁺²ιＩ∕ＬΦΠυΣＥυ∧μ¬﹪ι×λ§υ⊖μΠυ
</code></pre>

<p><a href="https://tio.run/##RY7NCsIwEITvPkWOG4gXD156EotQsCWgLxCT1QbyU5JN8e1jeqlzGphvhtGzSjoqV@s7JgZD0Ak9BkLT/FJoKv6FCTjnTJY8QxFMupLhJJjlvDvIZAPBVWWC3q7WINwxfGiGm3XUijJFUzRB4YI9iodRLdvGJRjwgk2RYGyAi2AFe1qPGVxLaQgGvxvY4/@Q57vai324qav1XI@r@wE" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code.</p>

<p><s>46-byte faster version is only O(lcm(1..n+2)) so can do up to <code>n=10</code> on TIO:</p>

<pre><code>ＦＮ⊞υ×⁺²ι⁺³ι≔⁰η≔⁰ζＷ∨¬η⌈Ｅυ﹪ηκ«≦⊕η≧⁺⌈Ｅυ¬﹪ηκζ»Ｉ∕ζη
</code></pre>

<p><a href="https://tio.run/##ZY/NTsMwEITP5Cn2uJaMlMKRE4JLDmkjxAu4iVuv6p/KPwEF8eyu3SKhtnua0Wi/nR2V8KMTOued84CdPaa4TmYrPTIGQwoKE4dPMjLgoFPAJw7EOJz1c9WMvTSvIdDeYstBXbmluC9FWgJuPK5dRFV2e/FNJhnsxbHCezcl7VBxOLA68NM8lOiP0tnRSyNtlNOF/p990F7Fc6s7Zj11w720@W0GTzbimwgR32mmSeJSweWNnFdtfpz1CQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code.</s></p>

<p>45-byte faster version is only O(2ⁿ) so can do up to <code>n=13</code> on TIO:</p>

<pre><code>⊞υ±¹ＦＥＮ×⁺²ι⁺³ιＦ⮌υ⊞υ±÷×ικ⌈Φ⊕ι∧λ¬∨﹪ιλ﹪κλＩΣ∕¹✂υ¹
</code></pre>

<p><a href="https://tio.run/##XY69DsIwDIR3niKjK4WhdOyEQEgdChXlBUJrwCI/VX4q3j4kFBY8@U6@7zw8hB2MkDF2wT0gcHbEu/AIZVHUq5uxDFoxQaOn4I9BXdFCwdmFFDroZHCw4YyS89mrvKdhn9wZZ7QOISTjD95ov6eZRoSFRJw9E6QVL1JBwYGkT0WNHiwq1B5HyB1bPYJMDOPhZKE1Y5AmR2WOLuqZ1W/qVWdJe9gJ56FP3G9nyVkvacD8ULlcxlhWcT3LNw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code.</p>

<p>54-byte fastest version uses more efficient LCM so can do up to <code>n=18</code> on TIO:</p>

<pre><code>⊞υ±¹ＦＥＮ×⁺²ι⁺³ιＦＥυ⟦κι⟧«Ｗ⊟κ⊞⊞Ｏκλ﹪§κ±²λ⊞υ±÷Π…κ²⊟κ»ＩΣ∕¹✂υ¹
</code></pre>

<p><a href="https://tio.run/##XU87a8MwEJ7jX6HxBMrgZAlkKsniIYkg2UIHVb7EwrJlZCkPSn@7ejKmQ284jo/vdbpRXjtlU5JxbCAKdsS7Cggl59vi5jyDgxqg6ocYjrH7Qg9csIvpcARp4wgrwQwh073ONw3705HftSX0k8DvYvFsjEUG0g3QEjJF5nUa0KvgPBDXktvB1dE6@AhVX@Mro3OrFeeZQdUW//pWfdibh6kRpCe1DrB7a4u7JmcJNgnnXFL/FNKbnjhqDHCOHczaUrCzNRqzcZlf4duUyk1aPuwv" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 78 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:sum(any(-~i%(j*-~j)&lt;1for j in range(2,n+2))for i in range(10**7))/1e7
</code></pre>

<p><a href="https://tio.run/##RcixDkAwEADQX7lFcleEdmki/ImlQmnDkarB4tcrJm98xx2XnVWyXZ9Wsw2jAW7Oa0PDN5aPy9CL8vHUSrsH8OAYguF5QlVwroi@df/KWghNVMlJpyM4jmBRaUov" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Returns the approximate decimal to +5 digits; uses the naive brute force approach <a href="https://codegolf.stackexchange.com/users/20260/xnor">xnor</a> suggests in comments on the question.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 14 13 </s> 10 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p>-1 using Erik the Outgolfer's idea to take the mean of a list of zeros and ones.<br />
-3 by using 3-indexing (as allowed in the question) - thanks to Dennis for pointing this out.</p>
<pre><code>ḊPƝḍⱮ!Ẹ€Æm
</code></pre>
<p>A monadic Link accepting an integer, <code>n+2</code>, which yields a float.</p>
<p><strong><a href="https://tio.run/##ASEA3v9qZWxsef//4biKUMad4biN4rGuIeG6uOKCrMOGbf///zk" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (very inefficient since it tests divisibility over the range <span class="math-container">\$[2, (n+2)!]\$</span>)</p>
<p>(Started out as <code>+2µḊPƝḍⱮ!§T,$Ẉ</code>, taking <code>n</code> and yielding <code>[numerator, denominator]</code>, unreduced)</p>
<h3>How?</h3>
<pre><code>ḊPƝḍⱮ!Ẹ€Æm - Link: integer, x=n+2
Ḋ          - dequeue (implicit range of) x  - i.e. [2,3,4,...,n+2]
  Ɲ        - apply to neighbours:
 P         -   product                             [2×3,3×4,...,(n+1)×(n+2)]
     !     - factorial of x                        x!
    Ɱ      - map across (implicit range of) x! with:
   ḍ       -   divides?                            [[2×3ḍ1,3×4ḍ1,...,(n+1)×(n+2)ḍ1],[2×3ḍ2,3×4ḍ2,...,(n+1)×(n+2)ḍ2],...,[2×3ḍ(x!),3×4ḍ(x!),...,(n+1)×(n+2)ḍ(x!)]]
       €   - for each:
      Ẹ    -   any?  (1 if divisible by any of the neighbour products else 0)
        Æm - mean
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 12 bytes</h1>

<pre><code>Ḋ×‘$ḍẸ¥ⱮP$Æm
</code></pre>

<p><a href="https://tio.run/##ASQA2/9qZWxsef//4biKw5figJgk4biN4bq4wqXisa5QJMOGbf///zU" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>-2 thanks to <a href="https://codegolf.stackexchange.com/users/53748/jonathan-allan">Jonathan Allan</a>'s suggestion to replace the LCM with the product (i.e. the LCM multiplied by an integer).</p>

<p><a href="https://codegolf.stackexchange.com/users/12012/dennis">Dennis</a> noticed I can 2-index as well.</p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), <s> 94 92 </s> 90 bytes</h1>
<p><em>Saved 2 bytes thanks to @Shaggy + 2 more bytes from there</em></p>
<p>Returns a decimal approximation.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;(x=2,g=a=&gt;n--?g([...a,x*++x]):[...Array(1e6)].map((_,k)=&gt;n+=a.some(d=&gt;k%d&lt;1))&amp;&amp;n/1e6)``
</code></pre>
<p><a href="https://tio.run/##FYpLDoIwFAD3nqILNO9JqQEF46cYF3oJQ@QFCv5oCRCDIZwdYTGLmcyLvlQn1bNsHG1SNWRy0DKEVno8lyRD7TinHG5CCOLt0rbbCPeTnauKfuCqACNRUAlw528cd1uSqE2hIJXhe54eXcTFQq@mMY6Hw83lbM1ZwNmOM9cb8TnzxuhtRrbRTGSmulDyAM1kyBKja/NR4mNyiAmsTvc4davLQKNozPXZqhR87GPE4Q8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 131 bytes</h1>
<p>A much longer solution that returns an exact result as a pair <span class="math-container">\$[numerator, denominator]\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,a=[],p=x=1)=&gt;n?f(n-1,[...a,q=++x*-~x],p*q/(g=(a,b)=&gt;a?g(b%a,a):b)(p,q)):[...Array(p)].map((_,k)=&gt;n+=a.some(d=&gt;-~k%d&lt;1))&amp;&amp;[n,p]
</code></pre>
<p><a href="https://tio.run/##FU7JTsMwEL3zFT50mWkmLgGBRMGpOPAVltVOVrrZjoNQUJX8ekgO7/BWvTP/cpuHk/@JrSvKcawUWGKlDXnVqQRVavcV2DghLaVkalQUdZt46KbAptlCrYApm2K8ryFbMjHuMgRPDeJurnyGwH/g0cgbe4ADXebNSLFs3a2EQqXxcFkWHwniaqUteTO@64TEM4lXEm8kkqcJL@ZBVi58cf4NVqhU5M627lrKq6vhyLC42x5nfXGHIJSYLiPKsztZWIutWGMvBjWZQT@aiQedmP6IOP4D" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 15 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ì©!Lε®LüP¦Öà}ÅA
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/177683/52210"><em>@JonathanAllan</em>'s Jelly answer</a>, so also extremely slow.</p>
<p><a href="https://tio.run/##ASMA3P9vc2FiaWX//8OMwqkhTM61wq5Mw7xQwqbDlsOgfcOFQf//Ng" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##ATUAyv9vc2FiaWX/fHZ5PyIg4oaSICI/ef/DjMKpIUzOtcKuTMO8UMKmw5bDoH3DhUH/LP8xCjMKNg" rel="nofollow noreferrer">verify the first three test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Ì                 # Add 2 to the (implicit) input
                  #  i.e. 3 → 5
 ©                # Store this in the register (without popping)
  !               # Take the factorial of it
                  #  i.e. 5 → 120
   L              # Create a list in the range [1, (input+2)!]
                  #   i.e. 120 → [1,2,3,...,118,119,120]
    ε       }     #  Map over each value in this list
     ®            #  Push the input+2 from the register
      L           #  Create a list in the range [1, input+2]
                  #   i.e. 5 → [1,2,3,4,5]
       ü          #  Take each pair
                  #    i.e. [1,2,3,4,5] → [[1,2],[2,3],[3,4],[4,5]]
        P         #   And take the product of that pair
                  #    i.e. [[1,2],[2,3],[3,4],[4,5]] → [2,6,12,20]
         ¦        #  Then remove the first value from this product-pair list
                  #   i.e. [2,6,12,20] → [6,12,20]
          Ö       #  Check for each product-pair if it divides the current map-value
                  #  (1 if truthy; 0 if falsey)
                  #   i.e. [1,2,3,...,118,119,120] and [6,12,20]
                  #    → [[0,0,0],[0,0,0],[0,0,0],...,[0,0,0],[0,0,0],[1,1,1]]
           à      #  And check if it's truthy for any by taking the maximum
                  #   i.e. [[0,0,0],[0,0,0],[0,0,0],...,[0,0,0],[0,0,0],[1,1,1]]
                  #    → [0,0,0,...,0,0,1]
             ÅA   # After the map, take the mean (and output implicitly)
                  #  i.e. [0,0,0,...,0,0,1] → 0.2
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/177668/">177668</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




