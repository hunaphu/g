<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::17294</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>090</td><td>Japt R</td><td>180601T092243Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/165896#165896">Shaggy</a></td></tr>
<tr d-ix="1"><td>098</td><td>Japt</td><td>191127T013507Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/196400#196400">Gymhgy</a></td></tr>
<tr d-ix="2"><td>219</td><td>Perl 5</td><td>140106T221505Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17819#17819">Dom Hast</a></td></tr>
<tr d-ix="3"><td>116</td><td>Pyth</td><td>180608T145811Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/166536#166536">Sok</a></td></tr>
<tr d-ix="4"><td>328</td><td>JavaScript Node.js</td><td>180601T115541Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/165906#165906">Muhammad</a></td></tr>
<tr d-ix="5"><td>108</td><td>Japt v2.0a0</td><td>180531T062956Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/165790#165790">Bubbler</a></td></tr>
<tr d-ix="6"><td>199</td><td>Ruby</td><td>150825T010450Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/55265#55265">Justin</a></td></tr>
<tr d-ix="7"><td>198</td><td>Ruby  225 202 203</td><td>140107T235243Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17930#17930">Paul Pre</a></td></tr>
<tr d-ix="8"><td>281</td><td>Julia</td><td>150816T200250Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/54797#54797">kevinsa5</a></td></tr>
<tr d-ix="9"><td>668</td><td>C++</td><td>150707T115509Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/52733#52733">TobiasR.</a></td></tr>
<tr d-ix="10"><td>319</td><td>Python 2.7</td><td>150705T094017Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/52635#52635">Beta Dec</a></td></tr>
<tr d-ix="11"><td>422</td><td>Racket</td><td>140112T030328Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18289#18289">Sylweste</a></td></tr>
<tr d-ix="12"><td>376</td><td>Javascript</td><td>140111T220934Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18271#18271">logic8</a></td></tr>
<tr d-ix="13"><td>218</td><td>Ruby</td><td>140112T013901Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18285#18285">Darren S</a></td></tr>
<tr d-ix="14"><td>420</td><td>Haskell</td><td>140111T135244Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18245#18245">Toeofdoo</a></td></tr>
<tr d-ix="15"><td>nan</td><td>Scala</td><td>140103T191530Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17360#17360">Rob Star</a></td></tr>
<tr d-ix="16"><td>314</td><td>Groovy</td><td>140109T171515Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18090#18090">FGreg</a></td></tr>
<tr d-ix="17"><td>331</td><td>C</td><td>140110T195526Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18213#18213">Sammo</a></td></tr>
<tr d-ix="18"><td>nan</td><td></td><td>140110T093801Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18170#18170">brother </a></td></tr>
<tr d-ix="19"><td>291</td><td> R</td><td>140110T140157Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18187#18187">plannapu</a></td></tr>
<tr d-ix="20"><td>331</td><td>C</td><td>140108T221325Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18023#18023">Christia</a></td></tr>
<tr d-ix="21"><td>321</td><td>Python</td><td>140103T223108Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17387#17387">PsHegger</a></td></tr>
<tr d-ix="22"><td>167</td><td>Golfscript 168</td><td>140109T222230Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18127#18127">Joachim </a></td></tr>
<tr d-ix="23"><td>415</td><td>PHP 429 426 421</td><td>140107T184852Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17906#17906">Einacio</a></td></tr>
<tr d-ix="24"><td>282</td><td>Python</td><td>140103T115523Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17296#17296">Noelkd</a></td></tr>
<tr d-ix="25"><td>256</td><td>C</td><td>140108T170747Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17996#17996">Art</a></td></tr>
<tr d-ix="26"><td>534</td><td>Java</td><td>140109T142630Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/18076#18076">Radiodef</a></td></tr>
<tr d-ix="27"><td>238</td><td>R</td><td>140103T172459Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17343#17343">Henrik</a></td></tr>
<tr d-ix="28"><td>246</td><td>JavaScript</td><td>140106T220636Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17816#17816">apsiller</a></td></tr>
<tr d-ix="29"><td>312</td><td>JavaScript</td><td>140108T085652Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17957#17957">rory</a></td></tr>
<tr d-ix="30"><td>632</td><td>Java</td><td>140108T121313Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17968#17968">javatarz</a></td></tr>
<tr d-ix="31"><td>374</td><td>SAS</td><td>140108T055753Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17945#17945">Joe</a></td></tr>
<tr d-ix="32"><td>207</td><td>GolfScript</td><td>140108T032207Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17943#17943">Ben Reic</a></td></tr>
<tr d-ix="33"><td>284</td><td>Python</td><td>140107T192629Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17911#17911">Sudharsa</a></td></tr>
<tr d-ix="34"><td>436</td><td>C#</td><td>140107T175336Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17902#17902">tia</a></td></tr>
<tr d-ix="35"><td>167</td><td>K</td><td>140107T140324Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17885#17885">tmartin</a></td></tr>
<tr d-ix="36"><td>143</td><td>APL</td><td>140103T132220Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17306#17306">marinus</a></td></tr>
<tr d-ix="37"><td>225</td><td>Mathematica</td><td>140106T235552Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17831#17831">ybeltuko</a></td></tr>
<tr d-ix="38"><td>410</td><td>Ruby</td><td>140106T234706Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17829#17829">user1148</a></td></tr>
<tr d-ix="39"><td>502</td><td>Lua 5.1</td><td>140105T201056Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17656#17656">finnbar</a></td></tr>
<tr d-ix="40"><td>273</td><td>Python</td><td>140103T203204Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17370#17370">tecywiz1</a></td></tr>
<tr d-ix="41"><td>442</td><td>PHP</td><td>140103T190034Z</td><td><a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program/17358#17358">Sammitch</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-R</code></a>, <s>94</s> <s>91</s> 90 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>Been trying to break 94 for <em>years</em>, and I finally did it :D</p>
<p>A different approach to, but with a little inspiration from, <a href="https://codegolf.stackexchange.com/a/165790/58974">Bubbler's solution</a>.</p>
<pre><code>;B±S ¬ö28
@=#dÆ£20ö ?X:BöÃÃñèV o)Ê¶G}a@NpX+`: {¬} -- sÖ: {G=UèV=ÈoYg`Ú0ks   ¦ke a Øâel
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LVI&amp;code=O0KxUyCs9jI4CkA9I2TGozIw9iA/WDpC9sPD8ehWIG8pyrZHfWFATnBYK2A6IHusfSAtLSBz1hA6IHtHPVXoVj3Ib1lnYNowiGtzIIogiSCma2UgYSDY4mVs" rel="nofollow noreferrer">Test it</a></p>
<hr />
<h2>(Outdated) Explanation</h2>
<h3>Line 1</h3>
<pre><code>;B±S ¬ö28
;B            :Uppercase alphabet
  ±           :Append and reassign result to variable B
   S          :  Space
     ¬        :Split
      ö28     :Generate an array of 28 random characters
              :Assign that array to variable U
</code></pre>
<h3>Line2</h3>
<pre><code>ÈoYg`...`
È             :Function taking a character string (X) and an index (Y) as arguments
 o            :  Case insensitively keep the characters in X that appear in
  Yg          :    Index Y into
    `...`     :      Compressed string &quot;methinks it is like a weasel&quot;
              :Assign that function to variable V
</code></pre>
<h3>Line 3</h3>
<pre><code>@=#dÆ£20ö ?X:BöÃÃñèV o)Ê¶G}a@Np[X+':U¬'-²`...`G=UèV]¸
@                                                         :Left function
 =                                                        :  Reassign to U
  #d                                                      :    100
    Æ                                                     :    Map the range [0,100)
     £                                                    :      Map each X in U
      20ö                                                 :        Random integer in the range [0,20)
          ?X                                              :        If truthy (not 0) return X
            :Bö                                           :        Else return a random character from B
               Ã                                          :      End inner map
                Ã                                         :    End outer map
                 ñ                                        :    Sort by
                  èV                                      :      Count of elements that return truthy (non-empty string) when passed through V
                     o                                    :    Pop the last element
                      )                                   :  End reassignment
                       Ê                                  :  Length
                        ¶                                 :  Is equal to
                         G                                :    Variable G (see below)
                          }                               :End left function
                           a                              :Repeatedly run the right function then the left until the latter returns tue
                            @                             :Right function
                             N                            :  Array of all inputs (initially empty)
                              p                           :  Push
                               [                          :    Array containing
                                X+':                      :      A colon appended to the current 0-based iteration index,
                                    U¬                    :      U joined to a string,
                                      '-²                 :      A hyphen repeated twice,
                                         `...`            :      Compressed string &quot;score&quot;, and,
                                              G=          :      Assign to variable G
                                               UèV        :        Count of elements in U that return truthy when passed through V
                                                  ]       :    End array
                                                   ¸      :    Join with spaces
                                                          :Implicit output of N joined with newlines
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 98 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>;ªBiS ö28
=#dÆ£20ö ?X:BiS)öÃÃñL=_¬xÈ¶Yg`Ú0ks   ¦ke a Øâel`u
mL o
=o
Op[T°+':X'-²`sÖ`W]¸
W&lt;28©ß
</code></pre>
<p>Not a winner, but I really wanted to answer this fun challenge.</p>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=O6pCaVMg9jI4Cj0jZMajMjD2ID9YOkJpUyn2w8PxTD1frHjItllnYNowiGtzIIogiSCma2UgYSDY4mVsYHUKbUwgbwo9bwpPcFtUsCsnOlgnLbJgc9YQYFdduApXPDI4qd8" rel="nofollow noreferrer">Test it</a></p>
</div>
<div id="pu2" class="pu"><h2><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 219 bytes</h2>



<pre class="lang-perl prettyprint-override"><code>$_="METHINKS IT IS LIKE A WEASEL";sub r{(A..Z,$")[rand 27]};sub t{~~grep/$t[$-++%28]/,pop=~/./g}$}.=r for@t=/./g;printf"%3d: %s -- score: %d
",$i++,(($})=sort{t($b)&lt;=&gt;t$a}map s/./rand&gt;.05?$&amp;:r/ger,($})x100),t$}until/$}/
</code></pre>

<p><a href="https://tio.run/##HY5Ra4MwFIXf9ysu4ToUY@I6yka7dPNBmLTbi4VCSxl2WhE6DTcpDCT@dVf3eM53@Di6ost8HPFLsY90@559rnPItpDlsMnWKSSwS5M83bCluZ6Aej8RYs@RBQcq2hJmT0f3T2w/DDVVWqI9YBSG3uz5KLnutBqkkLVDJxTBuaM3q6Ziqalp7Zl5j@UCPANRBOa7o@oWyjvGsQlD7vvoAmU6sr318RS8qJXFwv0UGszNMR1YiXj@ivcLknVFfNr/PsRxwC26a2ubi0Qnx/EP" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 116 bytes</h1>
<pre><code>Ls.bqNY&quot;METHINKS IT IS LIKE A WEASEL&quot;bj.e%&quot;%d: %s -- score: %s&quot;[ksbyb).W&lt;yeH28+Z]eoyNmmO.[O+r1G\ k20eZ100]mO+r1G\ 28
</code></pre>
<p><a href="https://pyth.herokuapp.com/?code=Ls.bqNY%22METHINKS%20IT%20IS%20LIKE%20A%20WEASEL%22bj.e%25%22%25d%3A%20%25s%20--%20score%3A%20%25s%22%5Bksbyb%29.W%3CyeH28%2BZ%5DeoyNmmO.%5BO%2Br1G%5C%20k20eZ100%5DmO%2Br1G%5C%2028&amp;debug=0" rel="nofollow noreferrer">Try it online.</a></p>
<pre><code>Ls.bqNY&quot;...&quot;bj.e%&quot;...&quot;[ksbyb).W&lt;yeH28+Z]eoyNmmO.[O+r1G\ k20eZ100]mO+r1G\ 28   
                                                                              
L                                                                             Define fitness function, y(b):
       &quot;...&quot;                                                                    The target string
  .b        b                                                                   Map over characters of the above and b:
    qNY                                                                           Are they equal? True = 1, False = 0
 s                                                                              Take the sum
                                                                    r1G       The uppercase alphabet
                                                                   +   \      Append a space
                                                                  O           Choose one at random
                                                                ]m       28   Create an array of 28 of the above, wrap in array
                             .W                                               Functional while, with above as initial value
                                                                                Continue condition (current value = H):
                                 eH                                               Last value of H
                                y                                                 Apply fitness function to the above
                               &lt;   28                                             Check the above is less than 28
                                                                                Function body (current value = Z)
                                             m             eZ                     Map each character (as k) in the last value in Z over:
                                                 O+r1G\                             Choose random char/space (as above)
                                               .[       k20                         Pad the above to length 20 using k
                                              O                                     Choose one of the above at random
                                            m                100                  Do the above 100 times
                                         oyN                                      Order the above by the fitness function
                                       ]e                                         Take the last of the above, wrap in array
                                     +Z                                           Append to Z
                                                                              Return value of while is array of all steps taken
              .e                                                              Map each entry with its index over:
                       k                                                        Current index
                        sb                                                      Current entry joined on empty string
                          yb                                                    Fitness of current entry
                      [     )                                                   Wrap the above 3 results in an array
                %&quot;...&quot;                                                          String formatting using the output string
             j                                                                Join on newlines, implicit output
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 328 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>t="METHINKS IT IS LIKE A WEASEL";z=0;m=Math.random;r=_=&gt;(n=0|27*m())?String.fromCharCode(64+n):" ";for(s="";28&gt;s[l="length"];s+=r())for(;28&gt;z;){for(a=[s];100&gt;a[l];){for(x="";28&gt;x[l];)x+=.95&lt;=m()?r():s.substr(x[l],1);a.push(x)}for(i=0;100&gt;i;i++){for(j=b=0;28&gt;j;j++)b+=a[i][j]==t[j];b&gt;z&amp;&amp;(alert(a[i]+" -- score: "+b),z=b,s=a[i])}}
</code></pre>

<p><a href="https://tio.run/##LZBfa8IwFMW/SsiDJIuWKvtrdisihZXpXirsoZSRarUtbSJJHKWbn71LnS@Xyzn3/C73VuJbmJ0uT3Yi1T7vRZ1rCzsljapzr1bH3gLehNu36OM9RtEWRTFaR@8hWqLPcBmHa8w78HkDG2ELTwu5Vw3X8AUBkeD/zp7uGkLpIra6lEfvoFWzKoReuVXk8Z5JOscI84PSxADGfPYcmKQGXOfyaAuccsNAu/wwMJgdpz9DLyAxKZ/6fiCSOr2J7Y3QXqWWgffy8Apu/cIh5sYz58xYN@bs8ZRy4Z3OpiAtvQzh0h0x8EpeMvbPqyBzogNWvHJaxkAkZZpUKYB1lWdBNxqR68PI4DCMJhNkdkrnc4RZRscdZGNzTdHLpe//AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>

<p>This is rather long and can be shortened, just haven't gotten around to that.</p>

<hr>

<h1>Explanation :</h1>

<p>This is not exactly an explanation but it is better indented and can </p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>t = "METHINKS IT IS LIKE A WEASEL";
z = 0;
m = Math.random;
r = _ =&gt; (n = 0 | 27 * m()) ? String.fromCharCode(64 + n) : " ";
for (s = ""; 28 &gt; s[l = "length"]; s += r())
	for (; 28 &gt; z;) {
		for (a = [s]; 100 &gt; a[l];) {
			for (x = ""; 28 &gt; x[l];) x += .95 &lt;= m() ? r() : s.substr(x[l], 1);
			a.push(x)
		}
		for (i = 0; 100 &gt; i; i++) {
			for (j = b = 0; 28 &gt; j; j++) b += a[i][j] == t[j];
			b &gt; z &amp;&amp; (alert(a[i] + " -- score: " + b), z = b, s = a[i])
		}
	}</code></pre>
</div>
</div>
</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> v2.0a0, <s>112</s> 108 bytes</h1>

<pre><code>ª(T=Si26õdI q¹ö28
_¬í¥`Ú0&#136;ks &#138; &#137; ¦ke a Øâel`u q)x
(OpW+`: {U} -- sÖ&#16;: `+(K=[U]xV¹WÄ
K&lt;28©ßLÆ®p513 iT ö}ÃñV o
</code></pre>

<p><a href="https://ethproductions.github.io/japt/?v=2.0a0&amp;code=qihUPVNpMjb1ZEkgcbn2MjgKX6ztYNowiGtzIIogiSCma2UgYSDY4mVsYHUgrCI9PSIgeAooT3BXK2A6IHtVfSAtLSBz1hA6IGArKEs9K1tVXW1WuVfECks8Mjip30zGrnA1MTMgaVQg9n3D8VYgbw==&amp;input=" rel="nofollow noreferrer">Try it online!</a></p>

<p>-4 bytes thanks to @ETHproductions.</p>

<h3>Unpacked &amp; How it works</h3>

<pre><code>U||(T=Si26õdI q) ö28  Initialize primary input
U||                   If U is not initialized...
        26õdI           Generate uppercase alphabets
              q         Convert to string
      Si                Add space
   (T=         )        Assign to variable T
                 ö28    Sample 28 random chars from T and form a string
                        Implicitly assign to U

_q í==`Ú0&#136;ks &#138; &#137; ¦ke a Øâel`u q)x  Match counting function
_                                  Declare a function...
 q í==                         )     Convert to array of chars and pair with the next,
                                     and map with equality...
      `Ú0&#136;ks &#138; &#137; ¦ke a Øâel`u q        "methinks it is like a weasel" to uppercase
                                        split into chars
                                x    Sum (true == 1, false == 0)
                                   Implicitly assign to V

(OpW+`: {U} -- sÖ&#16;: `+(K=[U]xV) W+1  Output and increment counter
(Op                           )      Output with newline...
   W+`: {U} -- sÖ&#16;: `+                 `{W}: {U} -- score: `
                         [U]xV         Call V on [U] and force cast to number
                      (K=     )        Assign to K
                                W+1  Add 1 to W and implicitly assign to W

K&lt;28&amp;&amp;ßLo@Um_p513 iT ö}} ñV o  Termination check and recursion
K&lt;28&amp;&amp;                         If the match count is less than 28...
      ß                          Recurse the program with...
          Um_                      Map over chars of U...
             p513 iT                 The char repeated 513 times plus T
                     ö}              Sample a char from it
       Lo@             }           Generate array of 100 of the above
                         ñV o      Sort by V, pop the largest, pass it as U
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Ruby, <s>206</s> <s>200</s> 199</h1>

<pre><code>q,i,*R=*-2..27
puts"#{i+=1}: #{$.,s=(-2..q).map{x=R.map{|j|!s||rand&lt;0.05?[*?A..?Z,' '].sample: s[j]};[R.count{|i|x[i]=='METHINKS IT IS LIKE A WEASEL'[i]},x]}.max;q=97;s.join} -- score: #$."until$.&gt;27
</code></pre>

<p>The first line is simply a fancy way to define <code>q=-2</code>, <code>i=-1</code>, and <code>R=(0..27).to_a</code>. All the work is done in the 2nd line:</p>

<pre><code>puts"..."until$.&gt;27 # Prints the string in quotes until we reach the desired score
     ^
     |
 +---+
 |
"#{i+=1}: #{...} -- score: #$."
   ^        ^               ^  
   +--------|---------------|-- Generation counter
 +----------+---------------|-- Current string
 |                          +-- Score of current string (interpolates the `$.` variable)
 |   
 #{$.,s=(-2..q).map{...}.max;q=97;s.join} # Generate the score &amp; string
   ^         ^  ^   ^    ^   ^    ^
   +---------|--|---|----|---|----|------ Store the score; this variable makes
             |  |   |    |   |    |       string interpolation shorter.
             +--|---|----|---+----|------ `q` automatically takes care of generating
                |   |    |        |        the string vs randomizing the string.
                +---|----|--------|------  Make 100 (or 1 the first time) strings,
                    |    |        |        and compute their score.
                    |    +--------|------- Take the string with the max score.
 +------------------+             +------- `s` is stored as an array
 |
 x=R.map{...};[R.count{...},x] # Compute string and its score, store in array
   ^     ^    ^^       ^
   +-----|----|+-------|------ `R` is 0..27, we use the constant to save chars.
         |    +--------|------ `max` orders by first element, then second. We clearly want
         |             |       the highest score, so make the score first.
 +-------+-------------|------ Generate the string, store in `x`.
 |                     +------ Count the number of chars that overlap with 'METHINKS...'
 |                     |
 |                    {|i|x[i]=='METHINKS IT IS LIKE A WEASEL'[i]}
{|j|!s||rand&lt;0.05?[*?A..?Z,' '].sample: s[j]}
    ^   ^         ^             ^       ^
    +---+---------|-------------|-------|---- 5% chance of randomizing, or 100% for
                  |             |       |     first string.
                  +-------------+-------|---- Sample from alphabet + ' '.
                                        +---- Don't alter the string 95% of the time
</code></pre>
</div>
<div id="pu7" class="pu"><h2>Ruby - <del>225</del> <del>202</del> <del>203</del> 198 chars</h2>

<p>Ruby seems under-represented in this challenge so far so I thought I would give it a try!  Improvements welcome.</p>

<pre class="lang-ruby prettyprint-override"><code>g=-1
s=[]
puts"#{g+=1}: #{$.,s=(0..99).map{n=(r=0..27).map{|i|x=[' ',*?A..?Z].sample;rand&lt;0.05?x:s[i]||=x};[r.count{|i|n[i]=='METHINKS IT IS LIKE A WEASEL'[i]},n*'']}.max;s} -- score: #$."until$.&gt;27
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Julia, 281 bytes</h1>

<p>Golfed:</p>



<pre class="lang-julia prettyprint-override"><code>r=n-&gt;['A':'Z',' '][rand(1:27,n)]
s=a-&gt;sum(a.=="METHINKS IT IS LIKE A WEASEL".data)
p=(z,a,s)-&gt;println(z,": ",join(a)," -- score: ",s)
a = r(28)
b = s(a)
z = 0
p(z,a,b)
while b&lt;28
c=b
d=a
for i=1:100
e=[rand()&lt;.95?i:r(1)[1]for i=a]
f=s(e)
if(f&gt;c)
c=f
d=e
end
end
a=d
b=c
p(z,a,b)
z+=1
end
</code></pre>

<p>The algorithm itself isn't very clever, but there are some cool bits in here.  Combining a character range with another character, then indexing into it: <code>['A':'Z',' '][rand(1:27,n)]</code> and taking the sum of an array of booleans (common, but I still love the idea): <code>sum(a.=="METHINKS IT IS LIKE A WEASEL".data)</code>.  Glad I got under 300!</p>

<p>Ungolfed:</p>

<pre class="lang-julia prettyprint-override"><code>randchar = n -&gt; ['A':'Z',' '][rand(1:27,n)]
score = a -&gt; sum(a.=="METHINKS IT IS LIKE A WEASEL".data)
myprint = (z,a,s) -&gt; println(z,": ",join(a)," -- score: ",s)
currentarray = randchar(28)
currentscore = score(currentarray)
z = 0
myprint(z,currentarray,currentscore)
while currentscore &lt; 28
    bestscore = currentscore
    bestarray = currentarray
    for i = 1:100
        temparray = [rand()&lt;.95?i:randchar(1)[1]for i=currentarray]
        tempscore = score(temparray)
        if(tempscore &gt; bestscore)
            bestscore = tempscore
            bestarray = temparray
        end
    end
    currentarray = bestarray
    currentscore = bestscore
    myprint(z,currentarray,currentscore)
    z+=1
end
</code></pre>
</div>
<div id="pu9" class="pu"><h1>C++ 668</h1>
<p>Not really short, but the only one in c++. (:</p>
<pre><code>#include &quot;stdafx.h&quot;
using namespace std;int _tmain(){srand(time(NULL));string z=&quot;METHINKS IT IS LIKE A WEASEL&quot;;string a(28,' ');for(int i=0;i&lt;28;++i){a[i]='A'+(rand()%26);}while(1){vector&lt;std::pair&lt;int,string&gt;&gt;d;for(int i=0;i&lt;100;++i){d.push_back(std::pair&lt;int,string&gt;(0,&quot;&quot;));for(int j=0;j&lt;28;++j){int b=rand()%100;if(b&lt;6){if(b&lt;2){d[i].second+=' ';}else{d[i].second+='A'+(rand()%26);}}else {d[i].second+=a[j];}}}for(int i=0;i&lt;100;++i){for(int j=0;j&lt;28;++j){if(d[i].second[j]==z[j]){d[i].first++;}}}int y=0;for(int i=0;i&lt;100;++i){if(d[i].first==28){cout&lt;&lt;d[i].second&lt;&lt;&quot; &quot;&lt;&lt;d[i].first;exit(1);}else if(d[i].first&gt;y){y=d[i].first;a=d[i].second;}}cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;y&lt;&lt;endl;}}
</code></pre>
<p>more readable version:</p>
<pre><code>#include &quot;stdafx.h&quot;
#include &lt;string&gt;
#include &lt;stdlib.h&gt;
#include &lt;vector&gt;
#include &lt;iostream&gt;
#include &lt;time.h&gt;
using namespace std;


int _tmain()
{
  srand(time(NULL));
  string z = &quot;METHINKS IT IS LIKE A WEASEL&quot;;
  string a(28, ' ');
  for (int i = 0; i &lt; 28; ++i)
  {
    a[i] = 'A' + (rand() % 26);
  }
  while(1)
  {
    vector&lt;std::pair&lt;int, string &gt;&gt; d;
    for (int i = 0; i &lt; 100; ++i)
    {
      d.push_back(std::pair&lt;int, string&gt;(0, &quot;&quot;));
      for (int j = 0; j &lt; 28; ++j)
      {
        int b = rand() % 100;
        if (b &lt; 6)
        {
          if (b &lt; 2)
          {
            d[i].second += ' ';
          }
          else {
            d[i].second += 'A' + (rand() % 26);
          }
        }
        else {
          d[i].second += a[j];
        }
      }
    }
    for (int i = 0; i &lt; 100; ++i)
    {
      for (int j = 0; j &lt; 28; ++j)
      {
        if (d[i].second[j] == z[j])
        {
          d[i].first++;
        }
      }
    }
    int y = 0;
    for (int i = 0; i &lt; 100; ++i)
    {
      if (d[i].first == 28)
      {
        cout &lt;&lt; d[i].second &lt;&lt; &quot; &quot; &lt;&lt; d[i].first;
        exit(1);
      }
      else if (d[i].first &gt; y)
      {
        y = d[i].first;
        a = d[i].second;
      }
    }
    cout &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; endl;
  }
}
</code></pre>
<p>Output:</p>
<pre><code>VEBVTEWX CEWMYLTAJTYPFYYXBDQ 2
 EBVTEWX CEWMYLTAJT PFYYXBDQ 3
 EBVTEKX CEWMYLTAJT PFYYXBDQ 4
 EBVTEKX CEWM  TAJT PFYYXBDQ 5
 EBVTEKX CE M  TAJT P YYX DQ 7
MEPVTEKX CE M  TAJT P YY  D  8
MEPVT KX CE M  TAJT A YY  D  9
MEPVI KX CE M  UAJT A YY  D  10
MEPSI KX CE M  UAJT A YY  D  10
MEPSI K  CE M  UAJE A YY  DE 11
MEPSI K  CE M  UAJE A YY  DL 12
MEPPI K  CE I  UDJE A YY  DL 13
MEPRI K  CE IS UDJE A YY  DL 14
MEPRI K  CE IS UDJE A  Y  DL 14
MEPHI K  CE IS UDJE A  Y  DL 15
MEPHI K  CE IS UDJE A  Y  DL 15
MEPHI K  CE IS RDBE A  E  DL 16
MEPHIQK  CE IS RD E A  E  DL 16
MEPHIQK  CE IS RD E A  E  DL 16
ME HIQK  CE IS RDXE A  E  DL 16
ME HIQK  CE IS W XE A  E  DL 16
ME HIQK  CE IS W XE A  E  EL 17
ME HIQK  CE IS W XE A  E  EL 17
ME HIQK  CE IS   XE A  E  EL 17
MEGHIQK  CE IS   XE A WEO EL 18
MEGHIQK  CE IS   XE A WEO EL 18
MEGHIQK  CE IS   XE A WEO EL 18
MEGHIQK  CE IS   XE A WE  EL 18
MEGHIQK  CE IS   XE A WE SEL 19
MEGHIQK  CE IS L XE A WE SEL 20
MEGHINK  CE IS L XE A WE SEL 21
MEGHINK  CE IS L XE A WE SEL 21
MEGHINK  CN IS L XE A WEASEL 22
MEGHINK   H IS L XE A WEASEL 22
MEGHINK   H IS L XE A WEASEL 22
METHINK   H IS L XE A WEASEL 23
METHINK   H IS L XE A WEASEL 23
METHINK   H IS L XE A WEASEL 23
METHINK   H IS L XE A WEASEL 23
METHINK   H IS L XE A WEASEL 23
METHINK   H IS L XE A WEASEL 23
METHINK  ZH IS L XE A WEASEL 23
METHINK  ZH IS LIXE A WEASEL 24
METHINK  ZH IS LIKE A WEASEL 25
METHINKD ZH IS LIKE A WEASEL 25
METHINKD ZH IS LIKE A WEASEL 25
METHINKD ZH IS LIKE A WEASEL 25
METHINKD ZH IS LIKE A WEASEL 25
METHINKD ZT IS LIKE A WEASEL 26
METHINKD ZT IS LIKE A WEASEL 26
METHINKD ZT IS LIKE A WEASEL 26
METHINKS ZT IS LIKE A WEASEL 27
METHINKS IT IS LIKE A WEASEL 28
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Python 2.7 - 319 bytes</h1>

<p>Sure it's not the smallest, but it was fun to program.</p>

<pre><code>from random import*
a=map(chr,range(65,91))+[' ']
c,i,y=choice,0,{}
s=[c(a)for i in[0]*28]
while 1:
 for j in[0]*100:v=[c(a)if .05&gt;random()else x for x in s];y[sum(1if'METHINKS IT IS LIKE A WEASEL'[k]==v[k]else 0for k in range(28))]=v
 v=max(y.keys());s=y[v];print"%d: %s -- score: %d"%(i,''.join(y[v]),v);i+=1
 if v==28:break
</code></pre>

<p>Uses a recursing function, so it may reach the maximum recursion depth if there is some kind of weird devolution with the string.</p>

<pre><code>ubuntu@ubuntu-OptiPlex-980:~$ python weasel.py
0: VPBHBSPWFTOG HAXSESCDNFPKWYE -- score: 1
1: VABHBSPWFTOG HAXSESCDNWPKWYE -- score: 2
2: VAWHBSPWFTOGIHAXSESSDNWPKWYE -- score: 3
3: VAWHBSPWFTOGIHAXSEFSGNWPKWYL -- score: 4
4: XAWHBSPYFTOGIHAXSEFSGNWPKWYL -- score: 4
5: XAWHBSKYFTOGIHAXSEFSGNWPKWYL -- score: 5
6: XAWHBSKYFTOGIHAXSEF GNWPKWYL -- score: 6
7: XAWHBSKYFTOGIHALSEF ANWPKWYL -- score: 8
8: XAKHBSKYFTTGIHALSEY ANWPKWYL -- score: 9
9: XAKHISKYFTTGIHALSEE ANWPKWYL -- score: 11
10: XAKHISKSFTTGIHALSEE ANWPKWYL -- score: 12
11: XAKHISKSFTTGIHALSBE ANWPKWKL -- score: 12
12: XAQHISKSFRT IHALSBE ANWPKWKL -- score: 13
13: XAQHISKSFIT IHALSBE ANWPKWKL -- score: 14
14: XAQHISKSFIT IHALSBE ANWPKWKL -- score: 14
15: XAQHISKSFIT IHALSBE ANWPKWKL -- score: 14
16: XALHISKSFIT ISALSBE ANWPKWKL -- score: 15
17: JALHISKSFIT ISALSBE ANWPAWKL -- score: 16
18: JALHISKSFIT ISALIBE ANWPAWKL -- score: 17
19: JALHISKSFIT ISALIBE ANWPAWKL -- score: 17
20: JALHISKSFIT ISALIBE ANWPAWKL -- score: 17
21: JALHISKSFIT ISALIKE ANWPAWYL -- score: 18
22: JALHISKSFIT IS LIKE ANWPAWYL -- score: 19
23: JALHISKSFIT IS LIKE ANWEAWYL -- score: 20
24: JALHISKSFIT IS LIKE ANWEAWYL -- score: 20
25: JALHISKSFIT IS LIKE ANWEAWZL -- score: 20
26: JALHISKS IT IS LIKE ANWEAAZL -- score: 21
27: JACHISKS IT IS LIKE ANWEASZL -- score: 22
28: JACHISKS IT IS LIKE ANWEASZL -- score: 22
29: MACHISKS IT IS LIKE ANWEASZL -- score: 23
30: MACHISKS IT IS LIKE ANWEASZL -- score: 23
31: MACHISKS IT IS LIKE AUWEASZL -- score: 23
32: MACHISKS IT IS LIKE AUWEASZL -- score: 23
33: MACHISKS IT IS LIKE AJWEASZL -- score: 23
34: MACHISKS IT IS LIKE A WEASZL -- score: 24
35: MACHISKS IT IS LIKE A WEASZL -- score: 24
36: MACHINKS IT IS LIKE A WEASZL -- score: 25
37: MACHINKS IT IS LIKE A WEASZL -- score: 25
38: MACHINKS IT IS LIKE A WEASZL -- score: 25
39: MBCHINKS IT IS LIKE A WEASZL -- score: 25
40: MBCHINKS IT IS LIKE A WEASZL -- score: 25
41: MBCHINKS IT IS LIKE A WEASZL -- score: 25
42: MBCHINKS IT IS LIKE A WEASZL -- score: 25
43: MBCHINKS IT IS LIKE A WEASZL -- score: 25
44: MBCHINKS IT IS LIKE A WEASZL -- score: 25
45: MECHINKS IT IS LIKE A WEASCL -- score: 26
46: MECHINKS IT IS LIKE A WEASCL -- score: 26
47: MECHINKS IT IS LIKE A WEASCL -- score: 26
48: MECHINKS IT IS LIKE A WEASCL -- score: 26
49: MECHINKS IT IS LIKE A WEASCL -- score: 26
50: MECHINKS IT IS LIKE A WEASCL -- score: 26
51: MEQHINKS IT IS LIKE A WEASCL -- score: 26
52: MEQHINKS IT IS LIKE A WEASCL -- score: 26
53: MEQHINKS IT IS LIKE A WEASCL -- score: 26
54: MEQHINKS IT IS LIKE A WEASCL -- score: 26
55: MEQHINKS IT IS LIKE A WEASCL -- score: 26
56: MEQHINKS IT IS LIKE A WEASCL -- score: 26
57: METHINKS IT IS LIKE A WEASCL -- score: 27
58: METHINKS IT IS LIKE A WEASCL -- score: 27
59: METHINKS IT IS LIKE A WEASCL -- score: 27
60: METHINKS IT IS LIKE A WEASCL -- score: 27
61: METHINKS IT IS LIKE A WEASCL -- score: 27
62: METHINKS IT IS LIKE A WEASCL -- score: 27
63: METHINKS IT IS LIKE A WEASCL -- score: 27
64: METHINKS IT IS LIKE A WEASCL -- score: 27
65: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>

<p>Massive thanks to Sp3000 for golfing help.</p>
</div>
<div id="pu11" class="pu"><h1>Racket: <s>426</s> 422 bytes</h1>
<pre><code>(let*((r random)(m map)(L&quot; ABCDEFGHIJKLMONPQRSTUVWXYZ&quot;)(P(string-&gt;list&quot;METHINKS IT IS LIKE A WEASEL&quot;))(c(λ(l p)(m(λ(x)(if(&lt;(r)p)(string-ref L(r 27))x))l)))(s(λ(l P p)(cons(foldl(λ(x y a)(if(eqv? x y)(+ a 1)a))0 l P)l))))(let r((g 0)(o (c P 1)))(let*((o(sort(m(λ(x)(s(c o 0.05)P 0))(range 100))(λ g(apply &gt;(m car g)))))(p(caar o))(c(cdar o)))(printf&quot;~a: ~a -- score: ~a
&quot;g(list-&gt;string c)p)(if(= p 28)p(r(+ g 1)c)))))
</code></pre>
<p>Ungolfed:</p>
<pre><code>(let* ((r random)
       (m map)
       (L &quot; ABCDEFGHIJKLMONPQRSTUVWXYZ&quot;)
       (P (string-&gt;list &quot;METHINKS IT IS LIKE A WEASEL&quot;))
       (c (λ (l p) 
            (m (λ (x)
                 (if (&lt; (r) p)
                     (string-ref L (r 27))
                     x))
               l)))
       (s (λ (l P p)
            (cons (foldl (λ (x y a)
                           (if (eqv? x y)
                               (+ a 1)
                               a))
                         0 
                         l 
                         P)
                  l))))
  (let r ((g 0) (o (c P 1)))
    (let* ((o (sort (m (λ (x)
                         (s(c o 0.05)P 0))
                       (range 100))
                    (λ g
                      (apply &gt;(m car g)))))
           (p (caar o))
           (c (cdar o)))
      (printf&quot;~a: ~a -- score: ~a\n&quot; g (list-&gt;string c) p)
      (if (= p 28)
          p
          (r (+ g 1) c)))))
</code></pre>
</div>
<div id="pu12" class="pu"><h2>Javascript (<s>411</s> <s>389</s> 376)</h2>

<p>Shorter than some, longer than most.. [Methinks it will end.] <strong><em>EDIT:</em></strong> it wasn't ending due to an error. fixed it and ended up dropping the count too -- cool.</p>

<pre><code>t='METHINKS IT IS LIKE A WEASEL';z=0;m=Math.random;r=function(){n=Math.floor(m()*27);return n?String.fromCharCode(64+n):' '};for(s='';s.length&lt;28;s+=r());while(z&lt;28){a=[s];while(a.length&lt;100){x='';while(x.length&lt;28){x+=m()&gt;=.95?r():s.substr(x.length,1)}a.push(x)}for(i=0;i&lt;100;i++){b=0;for(j=0;j&lt;28;j++){b+=a[i][j]==t[j]?1:0;}if(b&gt;z){alert(a[i]+' -- score: '+b);z=b;s=a[i]}}};
</code></pre>

<p>expanded:</p>

<pre><code>t = 'METHINKS IT IS LIKE A WEASEL';
z = 0;
m = Math.random;
r = function(){
    n = Math.floor(m()*27);
    return n ? String.fromCharCode(64+n) : ' '
};
for(s='';s.length&lt;28;s+=r());
while( z &lt; 28 ){
    a = [s];
    while( a.length &lt; 100 ){
        x = '';
        while( x.length &lt; 28 ){
            x += m() &gt;= .95 ? r() : s.substr(x.length, 1)
        }
        a.push(x)
    }
    for( i = 0; i &lt; 100; i++ ){
        b = 0;
        for( j = 0; j &lt; 28; j++ ){
            b += a[i][j] == t[j] ? 1 : 0;
        }
        if( b &gt; z ){
            console.log( a[i] + ' -- score: ' + b);
            z = b;
            s = a[i]
        }
    }
};
</code></pre>

<p><hr>
[original:]</p>

<pre><code>t='METHINKS IT IS LIKE A WEASEL';s='';z=0;m=Math.random;r=function(){n=Math.floor(m()*27);return n?String.fromCharCode(64+n):' '};c=function(){a=[s];while(a.length&lt;100){x='';while(x.length&lt;28){x+=m()&gt;=.95?r():s.substr(x.length?x.length-1:0,1)}a.push(x)}for(i=0;i&lt;100;i++){b=0;for(j=0;j&lt;28;j++){b+=a[i][j]==t[j]?1:0;}if(b&gt;z){alert(a[i]+' -- score: '+b);z=b;s=a[i]}i++}};while(s.length&lt;28){s+=r()}while(z&lt;28){c()}
</code></pre>
</div>
<div id="pu13" class="pu"><h2>Ruby, 218</h2>

<pre><code>g,s,p,t=-1,'',1;while t!=28;t,b=-1;100.times{|i|m,n='',0
28.times{|j|n+=1if(m[j]=(rand&lt;p ?[*?A..?Z,' '].sample: s[j]))=="METHINKS IT IS LIKE A WEASEL"[j]}
b,t=m,n if n&gt;t};puts"#{g+=1}: #{s=b} -- score: #{t}";p=0.05;end
</code></pre>

<p>example run</p>

<pre><code>0: LRAZZMKL IKUOGEHLKPWEVNEAZWX -- score: 6
1: LRAZZMKL IKUIGEALKMWEVNEAZWX -- score: 7
2: HRAGZMKL IKUIGEALKMWEVNEAZWX -- score: 7
3: HVAGZMKL IKUISAALKYWEVNEAZWX -- score: 8
                  ...
48: METHIUKS IT IS LIKEIA WEASEL -- score: 26
49: METHINKS IT IS LIKEIA WEASEL -- score: 27
50: METHINKS IT IS LIKEIA WEASEL -- score: 27
51: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>
</div>
<div id="pu14" class="pu"><h2>Haskell - 420 characters</h2>

<p>This is more verbose than most; I'd put that down to my inexperience with randomness in haskell and proper use of monads.</p>



<pre class="lang-hs prettyprint-override"><code>import System.Random
r=randomRIO
z=zipWith
c=fmap((' ':['A'..'Z'])!!)$r(0,26)
y=(i.).replicate
i=mapM id
s=sum.z((fromEnum.).(==))"METHINKS IT IS LIKE A WEASEL"
u a n|n==0=c|True=return a
b n a|s n&gt;s a=n|True=a
g=fmap(foldr1 b).y 100.mapM((r(0,20)&gt;&gt;=).u)
e x=do n&lt;-g$x!!0;if(s$x!!0)==28 then return(n:x)else e(n:x)
main=y 28 c&gt;&gt;=(\a-&gt;e[a])&gt;&gt;=(i.z(\n x-&gt;putStrLn$shows n$": "++x++" -- score: "++(show$s x))[0..]).reverse
</code></pre>
</div>
<div id="pu15" class="pu"><h2>Scala, <del>347</del> <del>341</del> 337 chars:</h2>

<pre><code>import util.Random.{nextInt=&gt;r}
val t="METHINKS IT IS LIKE A WEASEL"
def c="ABCDEFGHIJKLMNOPQRSTUVWXYZ "(r(27))
def s(a:String)=t.zip(a).map{x=&gt;if(x._1==x._2) 1 else 0}.sum
def w(a:String,i:Int=0){println(f"$i%2d: $a -- score: ${s(a)}")
if(s(a)!=28){w((0 to 99).map{_=&gt;a.map(o=&gt;if(r(20)&lt;1) c else o)}.sortBy(s).last,i+1)}}
w(t.map(_=&gt;c))
</code></pre>

<p>=></p>

<pre><code> 0: PGSHWAEPALQFTCORUKANPNUTRVXH -- score: 2
 1: PGSHWAEPALQ TCOQUKANPNUTRVXH -- score: 3
...
47: METHINKS WT IS LIKE A WEASEL -- score: 27
48: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>
</div>
<div id="pu16" class="pu"><h2>Groovy: 314</h2>

<pre><code>def(r,o,g)=[new Random(),{(0..27).sum{x-&gt;"METHINKS IT IS LIKE A WEASEL"[x]==it[x]?1:0}},0]
def q={([' ']+('A'..'Z'))[r.nextInt(27)]}
def s=q()*28
for(;;){println"${g++}: $s -- score: ${o(s)}"
if(o(s)==28)break
s=([s]*100).collect{it.collect{5&gt;r.nextInt(100)?q():it}.sum()}.groupBy{o(it)}.max{it.key}.value[0]}
</code></pre>

<p>Output:</p>

<pre><code>0:                              -- score: 5
1:          B               S   -- score: 6
2:  E       B               S M -- score: 7
3:  E       B               S M -- score: 7
4:  E       BT      X       S M -- score: 8
...
68: METHINKS IT IS LIKE L WEASEL -- score: 27
69: METHINKS IT IS LIKE L WEASEL -- score: 27
70: METHINKS IT IS LIKE L WEASEL -- score: 27
71: METHINKS IT IS LIKE L WEASEL -- score: 27
72: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>

<p>I feel like this is cheating so I'm not counting it as my 'real' answer; but I can save a few chars by passing "METHINKS IT IS LIKE A WEASEL" and " -- score: " as arguments to my script. Although technically it is 'externalizing strings'... which everyone knows is good practice :).</p>

<h2>Groovy: 290</h2>

<pre><code>def(r,o,g)=[new Random(),{(0..27).sum{x-&gt;args[0][x]==it[x]?1:0}},0]
def q={([' ']+('A'..'Z'))[r.nextInt(27)]}
def s=q()*28
for(;;){println"${g++}: $s${args[1]}${o(s)}"
if(o(s)==28)break
s=([s]*100).collect{it.collect{5&gt;r.nextInt(100)?q():it}.sum()}.groupBy{o(it)}.max{it.key}.value[0]}
</code></pre>

<p>Run like <code>groovy script.groovy "METHINKS IT IS LIKE A WEASEL" " -- score: "</code></p>
</div>
<div id="pu17" class="pu"><h1>C 331</h1>
<p>Another C solution that comes out to 331 characters. I think I might be able to improve it if I look a bit closer. Anyway the solution follows:</p>
<pre><code>char l[29],b[29],*a=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ &quot;,i,j,*t=&quot;METHINKS IT IS LIKE A WEASEL&quot;,s,m=0;main(){for(i=0;i&lt;28;i++)l[i]=a[rand()%27];while(strcpy(l,b))for(i=0;i&lt;100;i++){for(j=s=0;j&lt;28;j++){if(rand()%20==0)l[j]=a[rand()%27];if(l[j]==t[j])s++;}printf(&quot;%s -- score: %d\n&quot;,l,s);if(s&gt;m){m=s;strcpy(b,l);}if(!strcmp(b,t))goto e;}e:;}
</code></pre>
</div>
<div id="pu18" class="pu"><p><strong>PHP (<strike>381 397 323 319</strike> 312):</strong></p>

<pre class="lang-php prettyprint-override"><code>&lt;? function s(&amp;$s,&amp;$i=0){$t='METHINKS IT IS LIKE A WEASEL';$i=0;$c=$s;$f=28;while($f--){$n=rand(0,26);$i+=($s[$f]=($c=='_'||!rand(0,19)?chr($n?$n+64:32):$s[$f]))==$t[$f];}}$s='_';s($s);$x=$y=0;do{$f=100;while($f--){$m=$s;s($m,$i);if($i&gt;$y){$y=$i;$l=$m;}}printf("%2d: %s -- score: $y\n",$x++,$s=$l);}while($y&lt;28);
</code></pre>

<p>Readable version:</p>

<pre class="lang-php prettyprint-override"><code>&lt;?
function s(&amp;$s, &amp;$i = 0) {
    $t = 'METHINKS IT IS LIKE A WEASEL';
    $i = 0;
    $c = $s;
    $f = 28; while ($f--) {
        $n = rand(0, 26);
        $i += ($s[$f] = ($c == '_' || !rand(0, 19) ? chr($n ? $n + 64 : 32) : $s[$f])) == $t[$f];
    }
}

$s = '_';
s($s);
$x = $y = 0;

do {
    $f = 100; while ($f--) {
        $m = $s;
        s($m, $i);

        if ($i &gt; $y) {
            $y = $i;
            $l = $m;
        }
    }

    printf("%2d: %s -- score: $y\n", $x++, $s = $l);
} while ($y &lt; 28);
</code></pre>

<p>Optimization credits (319):</p>

<ul>
<li>@GigaWatt <a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program#comment34957_17358">in this comment</a></li>
<li>@Einacio for !rand(0,19) <a href="https://codegolf.stackexchange.com/questions/17294/golfing-a-weasel-program#17906">taken from here</a></li>
</ul>

<p>Optimization credits (312):</p>

<ul>
<li>@Einacio's comments</li>
</ul>
</div>
<div id="pu19" class="pu"><h3> R, 291 characters </h3>

<p>Longer than the <a href="https://codegolf.stackexchange.com/a/17343/6741">previously proposed R answer</a> but significantly different to be (I think) of interest:</p>

<pre><code>a=sample;b=a(c&lt;-c(LETTERS,' '),28,T);d=0;h=function(x)sum(x==strsplit("METHINKS IT IS LIKE A WEASEL",'')[[1]]);while(h(b)!=28){if(d){f=replicate(100,{e=runif(28)&gt;.05;S=a(c,28,T);S[e]=b[e];S});g=f[,which.max(apply(f,2,h))];if(h(g)&gt;h(b))b=g};cat(d,': ',b,' -- score: ',h(b),'\n',sep='');d=d+1}
</code></pre>

<p>With indentations:</p>

<pre class="lang-r prettyprint-override"><code>a=sample
b=a(c&lt;-c(LETTERS,' '),28,T)
d=0
h=function(x)sum(x==strsplit("METHINKS IT IS LIKE A WEASEL",'')[[1]])
while(h(b)!=28){
    if(d){
        f=replicate(100,{e=runif(28)&gt;.05;S=a(c,28,T);S[e]=b[e];S})
        g=f[,which.max(apply(f,2,h))]
        if(h(g)&gt;h(b))b=g
        }
    cat(d,': ',b,' -- score: ',h(b),'\n',sep='')
    d=d+1
    }
</code></pre>

<p>Outputs:</p>

<pre><code>0: OUZ IT HNGNMSKIHSMCQUGXTOYVZ -- score: 1
1: OUZ IT HNGNMSKYHSMCQUGWXOYVZ -- score: 2
2: OUZ IT HNGNMSKYLSMCQUGWXOYVZ -- score: 3
3: OUZ IT HNGNMSKYLSMC UGWXOYVZ -- score: 4
...
68: METHINKS IT ES LIKE A WEASEL -- score: 27
69: METHINKS IT ES LIKE A WEASEL -- score: 27
70: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>

<p>The key here is the line <code>f=replicate(100,{e=runif(28)&gt;.05;S=a(c,28,T);S[e]=b[e];S})</code>:<br>
<code>e=runif(28)&gt;.05</code> draws randomly 28 numbers between 0 and 1 on a uniform distribution, and gives TRUE if over 5% and FALSE if under 5%. <code>S=a(c,28,T)</code> draws 28 new letters/spaces, while <code>S[e]=b[e]</code> replaces those for which the value was over 5% by the corresponding letter from the previous generation (i .e. those for which the value was less than 5% are therefore new).Then we replicate the operation 100 times.
On the following line (<code>g=f[,which.max(apply(f,2,h))]</code>) we compute the score for each of the 100 replicates and keep the one that has the maximum score (in case of equality the first one is kept) to be compared with the previous generation.</p>
</div>
<div id="pu20" class="pu"><h2>C <s>361</s> 331</h2>

<p>Not as good as Art's solution, but here's my (newbie) attempt at a C solution. 361 characters if you remove newlines and tabs.</p>

<pre><code>char*w="METHINKS IT IS LIKE A WEASEL";char b[101][29];t,s,n,i,j,x,a;main(){for(;i&lt;28;i++)b[0][i]=w[rand()%28];while(s&lt;28){for(j=1;j&lt;101;j++){x=0;for(i=0;i&lt;28;i++){if(!(rand()%20))b[j][i]=w[rand()%28];else b[j][i]=b[0][i];if(b[j][i]==w[i])x++;}if(x&gt;s){s=x;t=j;}}printf("%d: %s -- score %d\n",n++,b[t],s);for(;i&gt;=0;--i){a=b[0][i];b[0][i]=b[t][i];b[t][i]=a;}t=0;}}
</code></pre>

<p>Edit: Got rid of the nested loop and used a 1D array. Was hoping it would make a bigger difference, but it only saved me 30 characters. Here's the code:</p>

<pre><code>char*w="METHINKS IT IS LIKE A WEASEL";char b[2929];t,s,n,i,x;main(){for(;i&lt;28;i++)b[i]=w[rand()%28];while(s&lt;28){for(;i&lt;2929;i++){if((i+1)%29){if(!(i%29))x=0;b[i]=rand()%20?b[i%29]:w[rand()%28]; x+=b[i]==w[i%29];if(x&gt;s){s=x;t=i/29;}}}for(i=0;i&lt;29;i++){x=b[i+t*29];b[i+t*29]=b[i];b[i]=x;}printf("%d: %s -- score %d\n",n++,b,s);t=0;}}
</code></pre>

<p>Edit: This is the original, ungolfed code, for those who are interested in knowing how the "golfing" was done. The code produces no warnings when compiled with GCC with -Wall and C99 enabled. Maybe you're a golfing newbie like me, or a C newbie like me, or maybe you're just curious. :) <a href="https://gist.github.com/cpx/97edbce4db3cb30c306a" rel="nofollow">https://gist.github.com/cpx/97edbce4db3cb30c306a</a></p>
</div>
<div id="pu21" class="pu"><h1>Python (<s>330</s> 321)</h1>
<pre><code>def b(i,s):print i,':',''.join(s),'-- score:',p(s)
from random import*;a=&quot; ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;i,s,t=0,choice(a)*28,&quot;METHINKS IT IS LIKE A WEASEL&quot;;p=lambda n:sum(n[c]==t[c]for c in range(28))
while p(s)&lt;28:b(i,s);s=sorted([[(c,choice(a))[random()&lt;.05]for c in s]for k in[1]*100],key=lambda n:p(n))[-1];i+=1
b(i,s)
</code></pre>
<p>Readable version:</p>
<pre><code>def b(i,s):
    print i,':',''.join(s),'-- score:',p(s)

import random as r
a=&quot; ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;
i,s,t=0,r.choice(a)*28,&quot;METHINKS IT IS LIKE A WEASEL&quot;
p=lambda n:sum(1for c in range(28)if n[c]==t[c])
while p(s)&lt;28:
    b(i,s)
    s=sorted([[(c,r.choice(a))[r.random()&lt;.05]for c in s]for k in[1]*100],key=lambda n:p(n))[-1];i+=1
b(i,s)
</code></pre>
<p>Example output:</p>
<pre><code>0 : SSSSSSSSSSSSSSSSSSSSSSSSSSSS -- score: 3
1 : SSSQSSSSSSSSSSSSISSSSSSSSSSS -- score: 4
2 : SSSQISSSSSSSSSSSISSSSSSSSSSS -- score: 5
3 : SSSQISSSSSSSSSSSIKSSSSSSSSSS -- score: 6
4 : SMSQISSSSSSSISSSIKSSSSGSSSSS -- score: 7
...
53 : METHINKS IT IS UIKE A WEASEL -- score: 27
54 : METHINKS IT IS UIKE A WEASEL -- score: 27
55 : METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>
<p>edit: removed a few characters based on AMKs and Timtechs answer</p>
</div>
<div id="pu22" class="pu"><p><b>Golfscript (<b>168</b> 167)</b></p>

<pre><code>:x;0['METHINKS IT IS LIKE A WEASEL'{}/]:o{;{27rand.!96*+64^}:r~}%{o=!}{100,{;.{20rand{}{;r}if}%}%{{[o\]zip{~=},,}:s~}$)@;\;x 2$+': '+1$+' -- score: '+1$s+n+:x;\)\}/;;x
</code></pre>

<p>Sadly, I can't seem to compress it quite to APL's level, but it's afaict currently a shared second place.</p>

<p>This is what it does;</p>

<pre><code># Grab the empty parameter string as initially empty output string.
:x;
# Start count at row #0
0
# Store the target string as an array in 'o'
['METHINKS IT IS LIKE A WEASEL'{}/]:o
# Create a random starting string, and define 'r' as a function generating a random char.
{;{27rand.!96*+64^}:r~}%
# Unfold as long as the latest string is different from the target string.
{o=!}
{
  // Generate 100 strings, sort by score and keep the highest.
  100,{;.{20rand{}{;r}if}%}%{{[o\]zip{~=},,}:s~}$)@;\;
  // Append the row to the output string, and increase the row number    
  x 2$+': '+1$+' -- score: '+1$s+n+:x;\)\
}/
// Clean some junk on the stack
;; 
// Output string
x
</code></pre>
</div>
<div id="pu23" class="pu"><p><strong>PHP <del>429</del> <del>426</del> <del>421</del> 415</strong></p>

<pre><code>&lt;? function t(){$a="ABCDEFGHIJKLMNOPQRSTUVWXYZ ";return $a{rand(0,26)};}$c='';$j=$g=0;$i=28;while($i--)$c.=t();function r($s){$i=28;while($i--)!rand(0,19)&amp;&amp;$s{$i}=t();return $s;}function s($s,&amp;$r){$c="METHINKS IT IS LIKE A WEASEL";$i=28;$r=0;while($i--)$r+=$s{$i}==$c{$i};}while($g&lt;28){$n='';$v=0;$i=100;while($i--){s($t=r($c),$a);($a&gt;$v)&amp;&amp;($v=$a)&amp;($n=$t);}($v&gt;$g)&amp;&amp;($g=$v)&amp;($c=$n);echo $j++.": $c -- score: $g\n";}
</code></pre>

<p>pretty print</p>

<pre><code>&lt;?php 
function t(){
    $a="ABCDEFGHIJKLMNOPQRSTUVWXYZ ";
    return $a{rand(0,26)};
}
$c='';
$j=$g=0;
$i=28;
while($i--)
    $c.=t();
function r($s){
    $i=28;
    while($i--)
        !rand(0,19)&amp;&amp;$s{$i}=t();
    return $s;
}
function s($s,&amp;$r){
    $c="METHINKS IT IS LIKE A WEASEL";
    $i=28;
    $r=0;
    while($i--)
        $r+=+($s{$i}==$c{$i});
}
while($g&lt;28){
    $n='';
    $v=0;
    $i=100;
    while($i--){
        s($t=r($c),$a);
        ($a&gt;$v)&amp;&amp;($v=$a)&amp;($n=$t);
    }
    ($v&gt;$g)&amp;&amp;($g=$v)&amp;($c=$n);
    echo $j++.": $c -- score: $g\n";
}
</code></pre>

<p>I'll need a less verbose language next time</p>
</div>
<div id="pu24" class="pu"><h1>Python: 282 characters no semi colons</h1>

<pre><code>from random import*
g,r,l,c=0,0,"ABCDEFGHIJKLMNOPQRSTUVWXYZ ",choice
k=map(c,[l]*28)
while(r!=28):
 r,k=max((sum(i==j for i,j in zip(t,"METHINKS IT IS LIKE A WEASEL")),t)for t in[[c(l)if random()&lt;.05 else i for i in k]for i in[1]*100])
 print`g`+":","".join(k),"-- score:",`r`
 g+=1
</code></pre>

<h1>278 with:</h1>

<pre><code>from random import*;g,r,l,c=0,0,"ABCDEFGHIJKLMNOPQRSTUVWXYZ ",choice;k=map(c,[l]*28)
while(r!=28):r,k=max((sum(i==j for i,j in zip(t,"METHINKS IT IS LIKE A WEASEL")),t)for t in[[c(l)if random()&lt;.05 else i for i in k]for i in[1]*100]);print`g`+":","".join(k),"-- score:",`r`;g+=1
</code></pre>
</div>
<div id="pu25" class="pu"><h1>C 256</h1>
<pre><code>char c[101][29],s,n,z,b,j,i,w;g;main(){for(;w&lt;28;printf(&quot;%d: %s -- score: %d\n&quot;,g++,c[b=n],w))for(i=w=0;i&lt;101;i++)for(s=j=0;j&lt;28&amp;&amp;!(i==b&amp;&amp;g);j++)(s+=(c[i][j]=g&amp;&amp;rand()%20?c[b][j]:(z=rand()%27)?'A'+z-1:' ')==&quot;METHINKS IT IS LIKE A WEASEL&quot;[j])&gt;w?n=i,w=s:0;}
</code></pre>
<p>Simple three loops, initialization, generation of new strings from parent and score calculated by the same statement. It's not very readable even with indentation.</p>
<h1>C 252</h1>
<pre><code>i,g,n,b,o,s,w,z;char c[2929];main(){for(;(o=i%29)|i|w&lt;28;(i=(i+1)%2929)||printf(&quot;%d: %s -- score: %d\n&quot;,g++,&amp;c[b=n],w))(s+=o&gt;27?-s:((i-o!=b||!g)&amp;&amp;(c[i]=g&amp;&amp;rand()%20?c[b+o]:(z=rand()%27)?'A'+z-1:' ')==&quot;METHINKS IT IS LIKE A WEASEL&quot;[o]))&gt;w?n=i-o,w=s:0;}
</code></pre>
<p>One loop, with one array holding all 101 strings.</p>
<p>This second version breaks the rules because it prints the string from (the equivalent of) step 1, but it was either that or not print the last string. I'm stumped how to fix it without exploding in size. I'm posting it anyway for inspiration.</p>
<h1>C 256</h1>
<pre><code>struct{char d[29];}p,t,n;i,j=-1,z,s,w,g;main(){for(;w&lt;28;j&gt;1&amp;&amp;printf(&quot;%d: %s -- score: %d\n&quot;,g++,(p=n).d,w))for(;j++%100;p=j?p:t)for(s=0,i=28;i--;)(s+=(t.d[i]=j&amp;&amp;rand()%20?p.d[i]:(z=rand()%27)?'A'+z-1:' ')==&quot;METHINKS IT IS LIKE A WEASEL&quot;[i])&gt;w?n=t,w=s:0;}
</code></pre>
<p>Different approach, instead of making an array to hold 101 strings just regenerate the string 100 times and use struct assignment for easy copying. Initialization is done by starting the &quot;repeat 100 times&quot; counter at -1 and handling it carefully by strategically chosen post-increment. Despite a very different approach it ends up exactly the same as the first attempt - 256 characters.</p>
</div>
<div id="pu26" class="pu"><h2>Java: <s>557</s> 534</h2>
<pre><code>enum W{W;public static void main(String[]a){char[]c=new char[28],h,d[];int i,k,e,s=W.s(c);for(i=0;i&lt;28;i++)c[i]=W.r();for(i=0;;){W.p(i++,h=c,s);if(s&gt;27)break;d=new char[100][28];for(char[]b:d){for(k=0;k&lt;28;k++)b[k]=Math.random()&lt;.05?W.r():h[k];if((e=W.s(b))&gt;s){s=e;c=b;}}}}int s(char[]c){int s=0,k;for(k=0;k&lt;28;k++)if(c[k]==&quot;METHINKS IT IS LIKE A WEASEL&quot;.charAt(k))s++;return s;}void p(int i,char[]c,int s){System.out.println(i+&quot;: &quot;+new String(c)+&quot; -- score: &quot;+s);}char r(){int i=(int)(Math.random()*27);return(char)(i==26?32:i+65);}}
</code></pre>
<p>Unwrapped:</p>
<pre><code>enum W {
    W;

    public static void main(String[] a) {
        char[] c = new char[28], h, d[];

        int i, k, e, s = W.s(c);

        for(i = 0; i &lt; 28; i++)
            c[i] = W.r();

        for(i = 0;;) {
            W.p(i++, h = c, s);

            if(s &gt; 27)
                break;

            d = new char[100][28];

            for(char[] b : d) {
                for(k = 0; k &lt; 28; k++)
                    b[k] = Math.random() &lt; .05 ? W.r() : h[k];

                if((e = W.s(b)) &gt; s) {
                    s = e;
                    c = b;
                }
            }
        }
    }

    int s(char[] c) {
        int s = 0, k;
        for(k = 0; k &lt; 28; k++)
            if(c[k] == &quot;METHINKS IT IS LIKE A WEASEL&quot;.charAt(k))
                s++;

        return s;
    }

    void p(int i, char[] c, int s) {
        System.out.println(i + &quot;: &quot; + new String(c) + &quot; -- score: &quot; + s);
    }

    char r() {
        int i = (int)(Math.random() * 27);
        return (char)(i == 26 ? 32 : i + 65);
    }
}
</code></pre>
</div>
<div id="pu27" class="pu"><h2>R (<s>245</s> <s>239</s> 238 characters)</h2>

<pre><code>t=strsplit("METHINKS IT IS LIKE A WEASEL","")[[1]]
h=sample
s=h(f&lt;-c(LETTERS," "),28,T)
c=0
while(!all(s==t)){for(i in 1:100){z=ifelse(runif(28)&lt;.05,h(f,1),s)
y=sum(s==t)
if(sum(z==t)&gt;y)s=z}
cat(c&lt;-c+1,": ",s," -- score: ",y,"\n",sep="")}
</code></pre>

<p>Gives:</p>

<pre><code>1: HSSSIMJM ETJISGBSCIELUYPLSED -- score: 7
2: HSSSIMJM ETJISGBSKIELUYPLSED -- score: 8
3: EETLITLM ETJISTBSKIELUYLLSEL -- score: 11
</code></pre>

<p>...</p>

<pre><code>78: METHINKS IT IS LIKEEA WEASEL -- score: 27
79: METHINKS IT IS LIKEEA WEASEL -- score: 27
80: METHINKS IT IS LIKEEA WEASEL -- score: 27
81: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>
</div>
<div id="pu28" class="pu"><h1>JavaScript, <s>277</s> 246</h1>
<pre><code>c=m=&gt;&quot; ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;[0|Math.random()*m];for(s=[k=28];e=k;s[--k]=c(27));for(;alert(k+++&quot;: &quot;+s.join(&quot;&quot;)+&quot; -- score: &quot;+e),e&lt;28;s=t)for(z=100;f=0,z--;f&gt;e&amp;&amp;(t=n,e=f))n=s.map((h,p)=&gt;(h=c(540)||h,f+=h==&quot;METHINKS IT IS LIKE A WEASEL&quot;[p],h))
</code></pre>
<p>(requires arrow function support; indentation added only for readability)</p>
<pre><code>// c() returns a random char using `m` as an index max
c=m=&gt;&quot; ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;[0|Math.random()*m];

// generate base string `s`
for(s=[k=28];e=k;s[--k]=c(27));

// while score `e` is &lt; 28
for(;alert(k+++&quot;: &quot;+s.join(&quot;&quot;)+&quot; -- score: &quot;+e),e&lt;28;s=t)
    for(z=100;f=0,z--;f&gt;e&amp;&amp;(t=n,e=f))            // do 100 mutations; keep best score
        n=s.map((h,p)=&gt;(                         // map `s` to `n` with 5% mutation
            h=c(540)||h,                         // change the char in 5% of cases
            f+=h==&quot;METHINKS IT IS LIKE A WEASEL&quot;[p],  // score++ if char matches
            h                                    // arrow function return character
        ))
</code></pre>
<p>Feel free to change <code>alert</code> to <code>console.log</code> if you want a more pleasant execution experience.</p>
<p>There are some nifty golfy bits in here:</p>
<ul>
<li><p>The function <code>c</code> returns a random character from the alphabet string <code>&quot; ABC...&quot;</code>. The function takes an argument to use as an upper bound for the random index selection. When generating the base string, we use <code>27</code>, so the function behaves normally.</p>
<p>However, we abuse this behavior by asking for a random upper bound of 540 in <code>h = c(540) || h</code>. Only 5% of the time will <code>c</code> actually return a string (because 540 * .05 = 27); the other 95% of the time, the randomly-chosen index falls beyond the length of the string, so the function returns <code>undefined</code>. This falsey value causes a logical-OR cascade in <code>c(540) || h</code>, so the original <code>map</code> value <code>h</code> is used (i.e., no replacement occurs).</p>
</li>
<li><p>The score-summing operation does <code>f+=h==&quot;METHINKS IT IS LIKE A WEASEL&quot;[p]</code>, which says &quot;add <code>true</code> to <code>f</code> if the current <code>map</code> character <code>h</code> matches the <code>p</code><sup>th</sup> character of the WEASEL string&quot;. The number-plus-boolean addition coerces the boolean result to either <code>0</code> or <code>1</code>, which means that <code>f</code> is incremented only when there is a match against the target WEASEL string.</p>
</li>
</ul>
</div>
<div id="pu29" class="pu"><h1>JavaScript - 312</h1>

<p>There is already a shorter JS solution above but it is using experimental pointer functions, so I thought I'd throw in another solution that is running in any JS environment:</p>

<pre><code>for(r=Math.random,R=function(){return'METHINKS CODZAWFLBUGYQRXVJP'[~~(r()*27)]},_=[],_.$=n=0,D=function(s){for(c=[],c.$=i=0;i&lt;28;){c[i]=s&amp;&amp;r()&lt;.95?s[i]:R();_=(c.$+=c[i]=='METHINKS IT IS LIKE A WEASEL'[i++])&gt;_.$?c:_};return c},D();_.$&lt;28;){for(j=0;j++&lt;1e2;)D(_);console.log(n+++': '+_.join('')+' -- score: '+_.$)}
</code></pre>
</div>
<div id="pu30" class="pu"><h1>Java (632)</h1>

<pre><code>class C {public static void main(String[] a){String b="AAAAAAAAAAAAAAAAAAAAAAAAAAAA";for(int i=1;;i++){String c=w(b);int s=s(c);if(s==28)break;if(s(b)&lt;s){b=c;System.out.println(i+": "+c+" -- score: "+s);}}}public static String w(String b) {StringBuffer c = new StringBuffer(b);int max = 0;for (int i=0;i&lt;100;i++){for(int j=0;j&lt;28;j++)if(Math.random()&lt;.06){double d=Math.random();c.setCharAt(j,(char)(d==1?32:d*26+65));}String d=c.toString();int s=s(d);if(s&gt;max){max=s;b=d;}}return b;}public static int s(String s){String b="METHINKS IT IS LIKE A WEASEL";int sum=0;for(int j=0;j&lt;28;j++)sum+=s.charAt(j)==b.charAt(j)?1:0;return sum;}}
</code></pre>

<p>Java is such a verbose language.. :(</p>
</div>
<div id="pu31" class="pu"><h2>SAS - 374</h2>

<pre><code>%macro r;ranuni(7)%mend;%macro s;r=int(%r*27);substr(x,t,1)=byte(ifn(r,64+r,32));%mend;%macro y;char(y,t)=char(x,t)%mend;options nonotes nosource;data x;length x$28;do t=1to 28;%s;end;y="METHINKS IT IS LIKE A WEASEL";do z=1by 1;o=x;do i=1to 100;c=0;x=o;do t=1to 28;if %r&lt;=.05then do;%s;end;c+%y;end;if c&gt;m then do;m=c;v=x;end;end;x=v;put z":" x"-- score:" m;if m&lt;28;end;run;
</code></pre>

<p>-></p>

<pre><code>1 :GUUVLNUSILSRZLRBXVVCWXX HXKC -- score:2
2 :MUUVLNUSILSRZLRBXVMCWXX HXKC -- score:3
3 :MUUVLNESILSRILRBXVMCWXX HXKC -- score:4
4 :MEUVLNESILSRIRRBXVMCWXX HXKC -- score:5
....
95 :METHINKS IT IS LIKE A XEASEL -- score:27
96 :METHINKS IT IS LIKE A XEASEL -- score:27
97 :METHINKS IT IS LIKE A XEASEL -- score:27
98 :METHINKS IT IS LIKE A WEASEL -- score:28
</code></pre>

<p>With linebreaks/indent/comments:</p>

<pre><code>%macro r;
 ranuni(7)   /* seed 0 will make new each time (seed=clock), otherwise fixed results */
%mend;
%macro s;  /* does the rand char, used both to initialize and replace; */
 r=int(%r*27); 
 substr(x,t,1)=byte(ifn(r,64+r,32)); *r=0 becomes space otherwise upper char;
%mend;
%macro y;  /*compares using new to 9.2 CHAR function which is equivalent to substr(str,start,1) */
 char(y,t)=char(x,t)
%mend;
options nonotes nosource; /*cheapest way to get clean log */
data x;
 length x$28; /*annoyingly necessary*/
 do t=1to 28;%s;end; /*initialize string*/
 y="METHINKS IT IS LIKE A WEASEL"; /*compare string */
 do z=1by 1; /*start iterating */
  o=x; /*save this iteration's string */
  do i=1to 100;
   c=0; /*score for this iteration*/
   x=o; /*string to fudge about start out clean, reusing x so no params to macro*/
   do t=1to 28;
    if %r&lt;=.05then do;%s;end; /*if 5% then change the char out */
    c+%y; /*score that character*/
   end;
   if c&gt;m then do; /*if on better scoring line, save it */
    m=c;
    v=x;
   end;
  end;
  x=v; *for next iter - this is cheaper than other options involving o=v due to first iter;
  put z":" x"-- score:" m;
  if m&lt;28; *quit at 28;
 end;
run;
</code></pre>
</div>
<div id="pu32" class="pu"><h2>GolfScript 207</h2>

<pre><code>{91,{64&gt;},32+''+27rand=}:g;'METHINKS IT IS LIKE A WEASEL':s;{`{\.@\=s@==}+s,,\%{+}*}:c;0:k;{k):k\.': '@@c' -- score: '\++++n+}:f;[{g}]28*{~}%{s=!}{{`100,\{\;{100rand 5&gt;{ }{;g}if}%''+}+}~%{c}$)\;{ }%}/{f}/s f
</code></pre>

<p>Below is a slightly unpacked version of the above GolfScript with explanation.  Since I don't think it could beat the APL or some other answers, I didn't bother to truly minify it.  I think that with inlining variable declarations, eliminating unnecessary variables, and other such tricks, this code could achieve approximately 190 characters without really changing the algorithm.  I think about about 10-15 characters could be removed if I better sorted out the conversion between arrays of ASCII values and strings.</p>

<pre><code>#g is a function that returns the ASCII value of a random character or space. 
#The ASCII values for capital letters are 65-90, and 32 is space.
{91,{64&gt;},32+''+27rand=}:g; 

#s is the string of interest.
'METHINKS IT IS LIKE A WEASEL':s;

#c is a function that returns the 'score' of a given string
#(the number of correct characters in the correct place).
{`{\.@\=s@==}+s,,\%{+}*}:c;

#t is a function that transforms a given string according to 
#the specification (by replacing characters with a random character 5% of the times).
{{100rand 5&gt;{ }{;g}if}%''+}:t;

#i is the initial random string.
[{g}]28*{~}%:i;

#Use '/' to unfold the initial value until the string is equal to the string of interest.
#Every loop, do the transformation 100 times, then sort by score c, and then take the top scoring string.
#Aggregate the results into an array a.
i{s=!}{{`100,\{\;t}+}~%{c}$)\;{ }%}/:a;

#Instantiate a counter variable k
0:k;

#f is the formatting function, that takes a string and formats it according to the spec.
{k):k\.': '@@c' -- score: '\++++n+}:f;

#Format every string in the array, and then format the string of interest
a{f}/
s f
</code></pre>
</div>
<div id="pu33" class="pu"><h2>Python 284</h2>

<pre><code>from random import*
C=choice
A=map(chr,range(65,91)+[32])
s=[C(A)for i in[0]*28]
N=x=0
while N!=28:N,s=max((len([i for i,j in zip(X,"METHINKS IT IS LIKE A WEASEL")if i==j]),X)for X in[[c if random()&lt;.95 else C(A)for c in s]for i in[0]*100]);print`x`+":",''.join(s),"-- score:",N;x+=1
</code></pre>
</div>
<div id="pu34" class="pu"><h2>C# - 436</h2>

<pre><code>namespace System.Linq{class W{static void Main(){var r=new Random();
Func&lt;char&gt;c=()=&gt;(char)(r.Next(33,60)%59+32);var s="";
while(s.Length&lt;28)s+=c();var a="METHINKS IT IS LIKE A WEASEL";int b=0;
while (s!=a){int m=-1;var f=s;for(int i=0;i&lt;100;i++){
var l=string.Join("",s.Select(j=&gt;(r.Next(20)!=0?j:c()).ToString()));
int o=Enumerable.Range(0,28).Sum(j=&gt;l[j]==a[j]?1:0);if(o&gt;m){f=l;m=o;}}
Console.WriteLine(b+++": "+(s=f)+" -- score: "+m);}}}}
</code></pre>
</div>
<div id="pu35" class="pu"><h1>K, <strike> 173</strike> 167</h1>

<pre><code>o:"METHINKS IT IS LIKE A WEASEL"
i:0;{~x~o}{-1($i),": ",(r:a@*&amp;b=c)," -- score: ",$c:max@b:+/'o=/:a:{x{if[0~*1?20;x[y]:*1?s];x}/!#x}'100#,x;i+:1;r}/28?s:"c"$32,65+!26;
</code></pre>

<p>/</p>

<pre><code>0: FQRZPHACDIBHZOUUCYKKFBJWVNVI -- score: 1
1: FQRZP ACDITHCOUUCYKKFBJWVNVI -- score: 2
2: FQRZP AFDIT COUUCYKKFBJWVNVI -- score: 3
...
51: METHINKS IT IS LIKECA WEASEL -- score: 27
52: METHINKS IT IS LIKECA WEASEL -- score: 27
53: METHINKS IT IS LIKE A WEASEL -- score: 28
</code></pre>
</div>
<div id="pu36" class="pu"><h2>APL (143)</h2>

<pre><code>0{⍵≢T←'METHINKS IT IS LIKE A WEASEL':c∇⍨1+⍺⊣⎕←(⍕⍺),':'c'-- score:',s⊣c←⊃c/⍨G=s←⌈/G←{+/⍵=T}¨c←{⍵{⍵:⍺⋄C[?27]}¨9≠?28/20}¨100⍴⊂⍵}⊃∘(C←27↑⎕A)¨?28/27
</code></pre>

<p>Explanation:</p>

<ul>
<li><p><code>0{</code>...<code>}⊃∘(C←27↑⎕A)¨?28/27</code>: set <code>C</code> to the first 27 capital letters. There are only 26, so the 27th element will be a space. Select 28 random items from <code>C</code>. This will be the first <code>⍵</code>. The first <code>⍺</code> (generation) will be <code>0</code>.</p></li>
<li><p><code>⍵≢T←'METHINKS IT IS LIKE A WEASEL</code>: set <code>T</code> to the string <code>'METHINKS IT IS LIKE A WEASEL'</code>. As long as <code>⍵</code> is not equal to <code>T</code>:</p>

<ul>
<li><code>{</code>...<code>}¨100⍴⊂⍵</code>: Make 100 copies of <code>⍵</code>. For each of these...
<ul>
<li><code>9≠?28/20</code>: select 28 random numbers from 1 to 20. Make a bitmask where each <code>1</code> means that the random number was not equal to <code>9</code>. (This means 5% chance of a <code>0</code>). </li>
<li><code>⍵{⍵:⍺⋄C[?27]}¨</code>: for each letter in <code>⍵</code>, if the corresponding bit was <code>1</code>, keep that letter, otherwise replace it with a randomly chosen element from <code>C</code>.</li>
</ul></li>
<li><code>c←</code>: store the 100 mutated strings in <code>c</code>.</li>
<li><code>G←{+/⍵=T}¨c</code>: for each element in <code>c</code>, calculate the score (amount of characters that match <code>T</code>) and store the scores in <code>G</code>.</li>
<li><code>s←⌈/G</code>: find the maximum score and store that in <code>s</code>.</li>
<li><code>c←⊃c/⍨G=s</code>: select the first item from <code>c</code> whose score is equal to <code>s</code> (the maximum), and store it in <code>c</code> again.</li>
<li><code>⎕←(⍕⍺),':'c'-- score:',s</code>: print the generation in the given format (<code>⍺</code> is current generation, <code>c</code> is current best string, <code>s</code> is score)</li>
<li><code>c∇⍨1+⍺</code>: Increment the generation and run the mutation again using the current best string (<code>c</code>) as input. </li>
</ul></li>
</ul>
</div>
<div id="pu37" class="pu"><h1>Mathematica - <s>238</s> <s>236</s> 225</h1>
<pre><code>c:=&quot;@&quot;~CharacterRange~&quot;Z&quot;~RandomChoice~28/.&quot;@&quot;-&gt;&quot; &quot;
For[s=&quot;&quot;&lt;&gt;c;i=0,{d,s}=Sort[{#~HammingDistance~&quot;METHINKS IT IS LIKE A WEASEL&quot;,#}&amp;@
StringReplace[s,_/;20Random[]&lt;1:&gt;c〚1〛]&amp;~Array~100]〚1〛;
d&gt;0Print[i++,&quot;:&quot;s,&quot; -- score: &quot;,28-d],]
</code></pre>
<p>Example output</p>
<pre><code>0:  CYPMEIHADXRXVTFHERYOZNRVFCSQ  -- score: 0
1:  CYPMEIHADIRXVTFBERYOZNRVFCSQ  -- score: 1
2:  CYPMEIHA IRXVTFBIRYOZNRVFCSQ  -- score: 3
...
50:  METHINKS IT IS LIKE A WEASEL  -- score: 28
</code></pre>
</div>
<div id="pu38" class="pu"><h1>Ruby - 410</h1>
<pre><code>#!/usr/bin/env ruby
C,RC=[32]+(65..90).to_a,-&gt;{C[rand(27)].chr}
T,CO,CH,OU,s,sc,a,aa,z,TR=&quot;METHINKS IT IS LIKE A WEASEL&quot;,-&gt;x{a=0;(0...28).each{|z|a+=1 if x[z]==T[z]};a},-&gt;{a[aa.rindex(sc)]},-&gt;x,y{print x;print &quot; Score: &quot;;puts y},(0...28).map{RC[]}.join,0,[0],[0],0,-&gt;{rand(20)==0}
until sc==28
a=[s]*100;aa=[0]*100;(0...100).each{|x|(0...28).each{|y|a[x][y]=RC[] if TR[]};z=CO[a[x]];aa[x]=CO[a[x]];OU[a[x],z]};sc=aa.max;s=CH[] end
</code></pre>
<p>Edit* It's currently failing (for some reason a[any] is being set to 0 (type=&gt;fixnum)). However, the actual design is right, I just need to find the bug causing this to happen (it's very mysterious)</p>
</div>
<div id="pu39" class="pu"><p><strong>Lua 5.1 (502)</strong></p>

<p>The minimised version:</p>

<pre><code>s,t,b,c,i,q,a,d,f="ABCDFGHJYUEGKSHNCOLPQIEJUSNC","METHINKS IT IS LIKE A WEASEL",1,math.random,table.insert,1,string.sub,100,28 while q~=f do r,p={},{} for x=1,d do i(r,s) i(p,0) e="" for o=1,f do if c(1,20)==1 then if c(1,27)==1 then e=e.." " else e=e..string.char(c(65,90)) end else e=e..a(r[x],o,o) end end r[x]=e for y=1,f do if a(r[x],y,y)==a(t,y,y) then p[x]=p[x]+1 end end if p[x]==f then s=r[x] end end for x=1,d do if p[x]&gt;=q then s,q=r[x],p[x] end end print(b..":",s,"-- score: "..q) b=b+1 end
</code></pre>

<p>and the easier to read version (with comments!):</p>

<pre><code>s,t,b,c,i,q,a,d,f="ABCDFGHJYUEGKSHNCOLPQIEJUSNC","METHINKS IT IS LIKE A WEASEL",1,math.random,table.insert,1,string.sub,100,28
--s=random string, t=target, b=counter, c=reference to math.random, i=reference to table.insert, q=top score,a=reference to string.sub, d=constant (100), f=constant (28)
while q~=f do
    r,p={},{}
    for x=1,d do  --add 100 copies to the table of strings
        i(r,s)
        i(p,0)
        e=""
        for o=1,f do  --for each character in string
            if c(1,20)==1 then  -- 5% chance
                if c(1,27)==1 then e=e.." " else e=e..string.char(c(65,90)) end  --set it to an ASCII char between 65 and 90 (A-Z) or a space character
            else
                e=e..a(r[x],o,o)
            end
        end
        r[x]=e  --current string = mutations
        for y=1,f do
            if a(r[x],y,y)==a(t,y,y) then p[x]=p[x]+1 end
        end  --for each char increment score if it is correct
        if p[x]==f then
            s=r[x]
        end  --if 28 then final string is this!
    end
    for x=1,d do
        if p[x]&gt;=q then s,q=r[x],p[x] end  --if this is the highest score so far, then make the string equal to this
    end
    print(b..":",s,"-- score: "..q)  --print it!
    b=b+1  --add one to the counter!
end
</code></pre>

<p>To be honest even though this definitely won't win, I was just glad to find and minimise a <em>reasonably</em> short solution for this problem! (emphasis on reasonably) :p</p>
</div>
<div id="pu40" class="pu"><h1>Python (273)</h1>

<pre><code>from random import choice as c
n=range
a=map(chr,n(65,91)+[32])
s=map(c,[a]*28)
p=x=0
while p&lt;28:
 p,s=max((sum(g==r for g,r in zip(y,'METHINKS IT IS LIKE A WEASEL')),y)for y in ([c(a+[x]*513)for x in s]for _ in n(100)));print '%d: %s -- score: %d' % (x,''.join(s),p);x+=1
</code></pre>
</div>
<div id="pu41" class="pu"><h2>PHP 442</h2>
<pre class="lang-php prettyprint-override"><code>&lt;? function r(){$n=rand(65,91);if($n==91) return ' ';else return chr($n);}function s($s){$c=0;$t='METHINKS IT IS LIKE A WEASEL';for($i=0;$i&lt;28;$i++) if($s[$i]==$t[$i]) $c++;return $c;}function m($s){for($i=0;$i&lt;28;$i++) if(rand(0,99)&lt;5) $s[$i]=r();return $s;}$s='';for($i=0;$i&lt;28;$i++) $s.=r();for($i=0;;$i++){$l=s($s);printf(&quot;%2d: %s -- score: %d\n&quot;,$i,$s,$l);if($l==28) break;$x=$s;for($j=0;$j&lt;100;$j++){$t=m($s);if(s($t)&gt;$l) $x=$t;}$s=$x;}
</code></pre>
<p>Readbly:</p>
<pre class="lang-php prettyprint-override"><code>&lt;?
//random char
function r(){
    $n=rand(65,91);
    if($n==91) return ' ';
    else return chr($n);
}
//score
function s($s){
    $c=0;
    $t='METHINKS IT IS LIKE A WEASEL';
    for($i=0;$i&lt;28;$i++)
        if($s[$i]==$t[$i]) $c++;
    return $c;
}
//mutate
function m($s){
    for($i=0;$i&lt;28;$i++)
    if(rand(0,99)&lt;5) $s[$i]=r();
    return $s;
}
$s='';
for($i=0;$i&lt;28;$i++) $s.=r();
for($i=0;;$i++){
    $l=s($s);
    printf(&quot;%2d: %s -- score: %d\n&quot;,$i,$s,$l);
    if($l==28) break;
    $x=$s;
    for($j=0;$j&lt;100;$j++){
        $t=m($s);
        if(s($t)&gt;$l) $x=$t;
    }
    $s=$x;
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/17294/">17294</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




