<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::5790</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>046</td><td>Janet</td><td>250320T094834Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/278799#278799">xigoi</a></td></tr>
<tr d-ix="1"><td>060</td><td>Python 3</td><td>250319T230910Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/278788#278788">CrSb0001</a></td></tr>
<tr d-ix="2"><td>045</td><td>JavaScript ES6</td><td>191006T010114Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/194004#194004">targumon</a></td></tr>
<tr d-ix="3"><td>073</td><td>R</td><td>180501T145255Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/163912#163912">JayCe</a></td></tr>
<tr d-ix="4"><td>005</td><td>Husk</td><td>180517T145400Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/164970#164970">user4854</a></td></tr>
<tr d-ix="5"><td>023</td><td>K ngn/k</td><td>180517T143736Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/164968#164968">ngn</a></td></tr>
<tr d-ix="6"><td>019</td><td>APL Dyalog Classic</td><td>180430T210945Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/163861#163861">ngn</a></td></tr>
<tr d-ix="7"><td>005</td><td>Jelly</td><td>171129T225730Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/149522#149522">user7641</a></td></tr>
<tr d-ix="8"><td>023</td><td>J</td><td>171129T060532Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/149446#149446">Jonah</a></td></tr>
<tr d-ix="9"><td>063</td><td>SML</td><td>140607T010744Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/30324#30324">someonr</a></td></tr>
<tr d-ix="10"><td>024</td><td>GolfScript</td><td>120511T171446Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5796#5796">Peter Ta</a></td></tr>
<tr d-ix="11"><td>087</td><td>C</td><td>120513T124846Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5822#5822">ugoren</a></td></tr>
<tr d-ix="12"><td>087</td><td>Scala</td><td>120511T114108Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5793#5793">Prince J</a></td></tr>
<tr d-ix="13"><td>096</td><td>Bash script</td><td>120511T224922Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5799#5799">Prince J</a></td></tr>
<tr d-ix="14"><td>064</td><td>Bash</td><td>120511T233153Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5800#5800">Peter Ta</a></td></tr>
<tr d-ix="15"><td>072</td><td>Awk</td><td>120511T213109Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5798#5798">Prince J</a></td></tr>
<tr d-ix="16"><td>054</td><td>Perl</td><td>120511T170856Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5795#5795">Geoff Re</a></td></tr>
<tr d-ix="17"><td>075</td><td>Perl</td><td>120511T064527Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5792#5792">breadbox</a></td></tr>
<tr d-ix="18"><td>076</td><td>Python</td><td>120511T034300Z</td><td><a href="https://codegolf.stackexchange.com/questions/5790/tower-of-hanoi-solver/5791#5791">Keith Ra</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://janet-lang.org/" rel="nofollow noreferrer">Janet</a>, 46 bytes</h1>
<pre class="lang-none prettyprint-override"><code>(fn h[n](case n 0[][;(h(dec n))n;(h(dec n))]))
</code></pre>
<p>Outputs the sequence <code>(1 2 1 3 1 2 1 4 1 2 1 3 1 2 1 …)</code>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 60 bytes</h1>

<pre class="lang-python prettyprint-override"><code>def t(n,a,b):
 if n:t(n-1,a,6-a-b);print(a,b);t(n-1,6-a-b,b)
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/PyU1TaFEI08nUSdJ04pLITNNIc8KyNc1BIqY6SbqJmlaFxRl5pVogBRYQ2TA4kDu/xINUx1DHWPN/wA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>The code in the footer on the TIO site contains the input <code>t(5,1,3)</code>, which corresponds to a game of Tower of Hanoi with 5 disks, with the starting rod <code>1</code> and destination rod <code>3</code>.</p>
<p>In turn, this prints the numerical values of the rods, <code>a</code> being the rod we move a disk from, and <code>b</code> being where it is moved to.</p>
<hr />
<p>Note that for the parameters <code>a</code> and <code>b</code> (representing the source and destination rods, respectively), we can actually have them be any number where <span class="math-container">$$1\le a,b\le3\\a\ne b$$</span>because the <code>6-a-b</code> guarantees that unless <code>a</code> and <code>b</code> don't satisfy these parameters, we will never have to deal with either going in an infinite loop or accidentally moving a disk to/from a rod that doesn't exist.</p>
<p>And since <code>n</code> isn't affected by <code>a</code> or <code>b</code>, we don't have to worry about ever accidentally putting a larger disk on a smaller disk.</p>
<hr />
<p>If we require <code>a</code> and <code>b</code> to be default params, we still really only waste 4 bytes setting <code>a=1</code> and <code>b=3</code>. Either way, something tells me that I would actually only waste 2 bytes in that case because I do get to omit <code>b</code> in <code>t(n-1,6-a-b,b)</code> in the final line.</p>
<hr />
<hr />
<h3>Python 3, 115 bytes</h3>
<p>Here's my 115 byte solution, which is a one-liner lambda that I created before adapting <a href="https://codegolf.stackexchange.com/a/5791/120105">@KeithRandall's answer</a> to Python3:</p>
<pre class="lang-python prettyprint-override"><code>x=lambda n,l=[1,3,2]:f'{x(n-1,[l[0],l[2],l[1]])}\n{n} {l[0]} {l[1]}\n{x(n-1,l[::-1])}'if~-n else f'1 {l[0]} {l[1]}'
</code></pre>
<p>Ungolfed:</p>
<pre class="lang-python prettyprint-override"><code>def toh_solver(n, s_d_a = [1, 3, 2]):
    '''
    s_d_a -&gt; SOURCE_DESTINATION_AUXILLARY
             ROD    ROD         ROD
    '''
    _solver_str = ''
    if n == 1:
        return f&quot;Move disk 1 from rod {s_d_a[0]} to rod {s_d_a[1]}&quot;
    
    _solver_str += f'{toh_solver(n - 1, [s_d_a[0], s_d_a[2], s_d_a[1]])}\n'
    _solver_str += f'Move disk {n} from rod {s_d_a[0]} to rod {s_d_a[1]}\n'
    _solver_str += f'{toh_solver(n - 1, s_d_a[::-1])}'
    return _solver_str
</code></pre>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ES6), 45b</h1>

<pre><code>h=(n,f,a,t)=&gt;n?h(--n,f,t,a)+f+t+h(n,a,f,t):''
</code></pre>

<p>e.g. calling <code>h(4, 'A', 'B', 'C')</code> (move 4 discs from peg A to peg C using auxiliary peg B)</p>

<p>returns <code>'ABACBCABCACBABACBCBACABCABACBC'</code> (move a disc from peg A to peg B, move a disc from peg A to peg C, move a disc from peg B to peg C, etc.)</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 73 bytes</h1>

<p>Putting R on the map. Inspired by [Keith Randall's answer][1] with simplified input, print only end and start peg to save 2 bytes. Also 0-indexed pegs.</p>



<pre class="lang-r prettyprint-override"><code>f=function(n,s=0,e=2){if(n){f(n-1,s,3-s-e)
print(c(s,e))
f(n-1,3-s-e,e)}}
</code></pre>

<p><a href="https://tio.run/##JckxCsAgDEDR3ZMkEKGts6eRBFxiMXYSz55Ku3z4vO4uWR4tozYFJcsHcb5wVgHFuRNPMkrRImO4e9UBBYwYMfz40f61XCChvw" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 5 bytes</h1>

<pre><code>↑≠⁰İr
</code></pre>

<p><a href="https://tio.run/##yygtzv7//1HbxEedCx41bjiyoej////GAA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a><br>
Each <code>n</code> in the output represents moving disk <code>n</code> to the next available peg (wrapping cyclically).</p>

<h3>Explanation</h3>

<pre><code>   İr   The ruler sequence [0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, ...]
↑       Take while...
 ≠⁰     ... not equal to the input.
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 23 bytes</h1>

<pre><code>{3!x{-x,(,0 2),1+x}/()}
</code></pre>

<p><a href="https://tio.run/##y9bNS8/7/z/NqtpYsaJat0JHQ8dAwUhTx1C7olZfQ7P2f5qC6X8A" rel="nofollow noreferrer" title="K (ngn/k) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, 19 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>3|(-⍪0 1⍪2∘-)⍣⎕,⍨⍪⍬
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob2pm/qO2CQZcjzra0/4b12joPupdZaBgCCSNHnXM0NV81LsYqEjnUe8KoNCj3jX/gQr/p3GZAgA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>

<p>output is a 2-column matrix of ints in {0,1,2} - from peg, to peg</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 5 bytes</h1>

<pre><code>2*Ṗọ2
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/99I6@HOaQ939xr9///fFAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p><code>0</code> move the smallest disk one space to the right (wrapping back to the start if necessary)<br>
<code>1</code> move the second-smallest disk to the only other legal column<br>
<code>2</code> move the third-smallest disk to the only other legal column<br>
etc.</p>

<h2>Algorithm</h2>

<p>We can see the solution of the Towers of Hanoi problem recursively; to move a stack of size <em>n</em> from <em>A</em> to <em>B</em>, move a stack of size <em>n</em>-1 from <em>A</em> to <em>C</em>, then the disk of size <em>n</em> from <em>A</em> to <em>B</em>, then move a stack of size <em>n</em>-1 from <em>B</em> to <em>C</em>. This produces a pattern of the following form (in the output format used by this program):</p>

<pre><code>0, 1, 0, 2, 0, 1, 0, 3, 0, 1, 0, 2 …
</code></pre>

<p>We can observe that this sequence is <a href="http://oeis.org/A007814" rel="nofollow noreferrer">A007814</a> on the OEIS. Another possible definition of the sequence is "the <em>k</em>th (1-based) element of the sequence is the number of zeroes at the end of the number <em>k</em> when it's written in binary". And that's what the program here is calculating.</p>

<h2>Explanation</h2>

<p>First, we calculate the number of moves in the solution, 2<sup><em>n</em></sup>-1. It turns out to be shortest to actually calculate one extra move and discard it later, so this is <code>2*</code>, i.e. 2 to the power of something. (The only input we've taken so far is the command line argument, so that gets used by default.)</p>

<p>Next, we use Jelly's builtin for calculating the number of zeroes at the end of a number in base <em>b</em>; that's <code>ọ<i>b</i></code>. As we're calculating in binary, it's <code>ọ2</code>. All we need to do is to apply this builtin to the numbers from 1 to 2<sup><em>n</em></sup>-1 inclusive.</p>

<p>There are two simple ways to iterate over a range of numbers in Jelly, <code>€</code> and <code>R</code>, and my earlier attempts at this problem used one of these. However, in this case, it's possible to go slightly shorter: <code>Ṗ</code>, when given a number as input, will let you do an iteration that stops one element short (in general, <code>Ṗ</code> is a builtin used to process all but one element of something). That's exactly what we want in this case (because <code>2*</code> generates one too many elments), so using it to link <code>2*</code> and <code>ọ2</code> into <code>2*Ṗọ2</code> gives us a 5-byte solution to the problem.</p>
</div>
<div id="pu8" class="pu"><h1>J, 23 bytes</h1>
<h2>binary numbers solution</h2>
<pre><code>2&amp;(+/@:~:/\)@#:@i.@^~&amp;2
</code></pre>
<p>This solution uses the binary counting method described <a href="https://www.youtube.com/watch?v=2SUvWfNJSsM" rel="nofollow noreferrer">in this video</a>.</p>
<p>Which is to say, I generate the binary digits from <code>1</code> up to <code>2^n</code>, then take infixes of length 2 and compare each bit to the corresponding bit of the previous number, and check if they're unequal.  The number of unequal bits is the output for that move.</p>
<p>Output, eg, for 3 disks, where smallest disk is labeled 1:</p>
<pre><code>1 2 1 3 1 2 1
</code></pre>
<p><code>1</code> means &quot;move the smallest disk one peg right, looping back to the first peg if needed&quot;</p>
<p><code>n</code>, for all other <code>n</code>, means &quot;move disk <code>n</code> to a legal peg&quot; (there will always be exactly one)</p>
<p><a href="https://tio.run/##y/qfVqxga6VgoADE/43UNLT1HazqrPRjNB2UrRwy9Rzi6tSM/mtyKekpqKfZWqkr6CjUWimkFXNxpSZn5CukKRj/BwA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<h2>recursive solution</h2>
<pre><code>((],[,])$:@&lt;:)`]@.(1=])
</code></pre>
<p>Same output as the above solution, but the logic here makes the recursive nature of the problem clearer.</p>
<p>Visualizing it as a tree also emphasizes this point:</p>
<pre><code>              4
             / \
            /   \
           /     \
          /       \
         /         \
        /           \
       /             \
      3               3      
     / \             / \    
    /   \           /   \
   /     \         /     \ 
  2       2       2       2  
 / \     / \     / \     / \
1   1   1   1   1   1   1   1
</code></pre>
<p><a href="https://tio.run/##y/qfVqxga6VgoADE/zU0YnWidWI1VawcbKw0E2Id9DQMbWM1/2tyKekpqKfZWqkr6CjUWimkFXNxpSZn5CukKRj/BwA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1>SML, 63</h1>
<pre><code>fun f(0,_,_)=[]|f(n,s,t)=f(n-1,s,6-s-t)@[n,s,t]@f(n-1,6-s-t,t);
</code></pre>
<p>call function <code>f(n,s,t)</code> with:</p>
<ul>
<li>n number of disks</li>
<li>s starting point</li>
<li>t goal point</li>
</ul>
</div>
<div id="pu10" class="pu"><h2>GolfScript (<strike>31 25</strike> 24 chars)</h2>

<pre><code>])~{{~3%}%.{)3%}%2,@++}*
</code></pre>

<p>With thanks to Ilmari Karonen for pointing out that my original <code>tr</code>s/permutations could be shortened by 6 chars. By decomposing them as a product of two permutations I managed to save one more.</p>

<p>Note that factoring out the <code>3%</code> increases length by one character:</p>

<pre><code>])~{{~}%.{)}%2,@++}*{3%}%
</code></pre>

<hr>

<p>Some people have really complicated output formats. This outputs the peg moved from (numbered 0, 1, 2) and the peg moved to. The spec doesn't say to which peg to move, so it moves to peg 1.</p>

<p>E.g.</p>

<pre><code>$ golfscript hanoi.gs &lt;&lt;&lt;"3"
01021201202101
</code></pre>
</div>
<div id="pu11" class="pu"><h2>C, <strike>98</strike> <strike>92</strike> 87 chars</h2>

<p>Implements the most trivial algorithm.<br>
Output is in the form <code>ab ab ab</code> where each pair means "move the top disc from peg a to peg b".<br>
<strong>EDIT</strong>: Moves are now encoded in hex - 0x12 means move from peg 1 to peg 2. Saved some characeters.<br>
<strong>EDIT</strong>: Reads the number from stdin, rather than parameter. Shorter.<br>
Example:<br>
<code>% echo 3 | ./hanoi</code><br>
<code>13 12 32 13 21 23 13</code></p>

<pre><code>n;
h(d){n--&amp;&amp;h(d^d%16*16,printf("%02x ",d,h(d^d/16))),n++;}
main(){scanf("%d",&amp;n);h(19);}
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Scala,<s>92</s> <s>88</s> 87 chars</h1>
<pre><code>def?(n:Int,a:Int,b:Int){if(n&gt;0){?(n-1,a,a^b)
print(n,a,b);?(n-1,a^b,b)}};?(readInt,1,3)
</code></pre>
<p><strong>Output format</strong></p>
<p>Say number of disk=3 then,</p>
<pre><code>(1,1,3)(2,1,2)(1,3,2)(3,1,3)(1,2,1)(2,2,3)(1,1,3) (disk number,from peg, to peg)
                                                   \---------------------------/       
                                                            Move 1              ... Move n
</code></pre>
</div>
<div id="pu13" class="pu"><h3>Bash script, <s>100</s> 96 chars</h3>
<pre><code>t(){ [[ $1&lt;1 ]] &amp;&amp; return
t $(($1-1)) $2 $(($2^$3))
echo $@
t $(($1-1)) $(($2^$3)) $3
}
t $1 1 3
</code></pre>
<p>Output format is same as <a href="https://codegolf.stackexchange.com/users/67/keith-randall">Keith Randall</a>'s one.</p>
<pre><code>1 1 3
2 1 2
1 3 2
3 1 3
1 2 1
2 2 3
1 1 3
</code></pre>
<p><strong>Edit</strong>: Saved 4 chars by <a href="https://codegolf.stackexchange.com/users/194/peter-taylor">peter</a>'s comment.</p>
</div>
<div id="pu14" class="pu"><h2>Bash (64 chars)</h2>

<pre><code>t(){ tr 2$1 $12 &lt;&lt;&lt;$s;};for((i=$1;i--;))do s=`t 1`01`t 0`;done;t
</code></pre>

<p>Posting this one despite being more than twice the length of the GolfScript one because I like the reuse of <code>t</code> to serve as <code>echo $s</code>.</p>
</div>
<div id="pu15" class="pu"><h2>Awk, 72 chars</h2>
<pre><code>function t(n,a,b){if(n){t(n-1,a,a^b);print n,a,b;t(n-1,a^b,b)}}t($0,1,3)
</code></pre>
<p>Output format is same as <a href="https://codegolf.stackexchange.com/users/67/keith-randall">Keith Randall</a>'s one.</p>
<pre><code>awk -f tower.awk &lt;&lt;&lt; &quot;3&quot;    
1 1 1
2 1 1
1 1 1
3 1 3
1 1 1
2 1 3
1 1 3
</code></pre>
</div>
<div id="pu16" class="pu"><h2>Perl - 54 chars</h2>

<pre><code>for(2..1&lt;&lt;&lt;&gt;){$_--;$x=$_&amp;-$_;say(($_-$x)%3,($_+$x)%3)}
</code></pre>

<p>Run with <code>perl -M5.010</code> and enter the number of discs on stdin.</p>

<p>Output format:</p>

<p>One line per move, first digit is from peg, second digit is to peg (starting from 0)</p>

<p>Example:</p>

<pre><code>02 -- move from peg 0 to peg 2
01
21
02
10
12
02
</code></pre>
</div>
<div id="pu17" class="pu"><h2>Perl, 75 <strike>79</strike> chars</h2>

<p>Totally stealing Keith Randall's output format:</p>

<pre><code>sub h{my($n,$p,$q)=@_;h($n,$p^$q^h($n,$p,$p^$q),$q*say"@_")if$n--}h pop,1,3
</code></pre>

<p>Invoke with <code>-M5.010</code> for the <code>say</code>.</p>

<p>(I think this can be improved if you can find a way to make use of the function's return value instead of just suppressing it.)</p>
</div>
<div id="pu18" class="pu"><h2>Python, 76 chars</h2>

<pre><code>def S(n,a,b):
 if n:S(n-1,a,6-a-b);print n,a,b;S(n-1,6-a-b,b)
S(input(),1,3)
</code></pre>

<p>For instance, for N=3 it returns:</p>

<pre><code>1 1 3  (move disk 1 from peg 1 to peg 3)
2 1 2  (move disk 2 from peg 1 to peg 2)
1 3 2  (move disk 1 from peg 3 to peg 2)
3 1 3  ...
1 2 1
2 2 3
1 1 3
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/5790/">5790</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




