<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::QNNN</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
  <!-- TXXX -->
<tr d-ix="0"><td>192</td><td>TypeScript's type system</td><td>240819T142443Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/275053#275053">noodle p</a></td></tr>
<tr d-ix="1"><td>128</td><td>Lexurgy</td><td>230510T133232Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/260846#260846">bigyihsu</a></td></tr>
<tr d-ix="2"><td>417</td><td>TypeScript Compiler</td><td>211022T034722Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/236513#236513">Bbrk24</a></td></tr>
<tr d-ix="3"><td>049</td><td>Pip</td><td>210829T031759Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/233817#233817">DLosc</a></td></tr>
<tr d-ix="4"><td>047</td><td>Pyth</td><td>160119T235955Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/69717#69717">lirtosia</a></td></tr>
<tr d-ix="5"><td>052</td><td>Retina</td><td>160120T082109Z</td><td><a href="https://codegolf.stackexchange.com/questions/69714/is-it-a-valid-consonant-cluster-in-lojban/69743#69743">Martin E</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>TypeScript's type system, <s>202</s> 192 bytes</h1>
<pre><code>type F&lt;S,Z=[&quot;p&quot;|&quot;t&quot;|&quot;k&quot;|&quot;f&quot;|&quot;c&quot;|&quot;s&quot;|&quot;x&quot;,&quot;b&quot;|&quot;d&quot;|&quot;g&quot;|&quot;v&quot;|&quot;j&quot;|&quot;z&quot;]|[&quot;c&quot;|&quot;k&quot;,&quot;x&quot;]|(&quot;c&quot;|&quot;j&quot;|&quot;s&quot;|&quot;z&quot;)[]&gt;=S extends`${infer A}${infer B}`?A extends B?0:[A,B]extends[&quot;m&quot;,&quot;z&quot;]|Z?0:[B,A]extends Z?0:1:0
</code></pre>
<p>Try it online: <a href="https://www.typescriptlang.org/play/?ssl=1&amp;ssc=193&amp;pln=1&amp;pc=1#code/C4TwDgpgBAYgPAZQDQC0C8BtARGLAfLYfLAa2IDNiBjYgZ2IA8sksAjYgE2IHNiA3YgCtiALywBdPNhoEyLJpIAUWGVmEF6BMQEoM4gHxoEUCA2AQAdh1oADACQBvAJYXyEAE5QAggF9HLt08AIR8bAH4vEzNLayggsIAGAC4MLyQg8VNzK1psAFtmLDFJFESUoKQvTOicqFLkgEYkhIBYACh20EgoABUIWmAEqDRYODYufXaAeimoOYA9MM7waD6BhuHRrHJ6SbaZuahF5e614AAmTfgsBgAbLD2DhaW2rtX+4ABmK7HbpkfZs92id3gMACw-baUAGHY6vFa9D4AVkhtAm00BRxeb0RAwAbJDWNCMbDsQizgB2SFUMQwoHw04fAAckIYZDpWJBuOAAE5IXlaST6UA" rel="nofollow noreferrer">TypeScript Playground</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.lexurgy.com/sc" rel="nofollow noreferrer">Lexurgy</a>, 128 bytes</h1>
<pre class="lang-bash prettyprint-override"><code>Class U {p,t,k,f,c,s,x}
Class V {b,d,g,v,j,z}
Class J {c,j,s,z}
R:
{{@U,@V,l,m,n,r}$1 $1,@V @U,@U @V,@J @J,{cx,kx,xc,xk,mz}}=&gt;*
</code></pre>
<p>Replaces invalid clusters with an empty string.</p>
<h2>Ungolfed</h2>
<pre class="lang-bash prettyprint-override"><code>Class U {p,t,k,f,c,s,x}
Class V {b,d,g,v,j,z}
Class C {@U,@V,l,m,n,r}
Class J {c,j,s,z}

replace:
@C$1 $1 =&gt; * # no dups
@V @U =&gt; * # no UV/VU pairs
@U @V =&gt; *
@J @J =&gt; * # no both cjsz
{cx,kx,xc,xk,mz} =&gt; * # specific pairs
</code></pre>
</div>
<div id="pu2" class="pu"><h2>TypeScript Compiler, <s> 427</s> 417 bytes</h2>
<pre><code>type U=&quot;p&quot;|&quot;t&quot;|&quot;k&quot;|&quot;f&quot;|&quot;c&quot;|&quot;s&quot;|&quot;x&quot;
type V=&quot;b&quot;|&quot;d&quot;|&quot;g&quot;|&quot;v&quot;|&quot;j&quot;|&quot;z&quot;
type S=&quot;c&quot;|&quot;s&quot;|&quot;j&quot;|&quot;z&quot;
type G&lt;T,W&gt;=T extends W?0:T extends&quot;l&quot;|&quot;r&quot;|&quot;m&quot;|&quot;n&quot;?1:T extends U?W extends V?0:1:W extends U?0:1
type H&lt;T,W&gt;=T extends&quot;x&quot;?W extends&quot;k&quot;|&quot;c&quot;?0:G&lt;T,W&gt;:T extends&quot;k&quot;|&quot;c&quot;?W extends&quot;x&quot;?0:G&lt;T,W&gt;:T extends&quot;m&quot;?W extends&quot;z&quot;?0:G&lt;T,W&gt;:G&lt;T,W&gt;
type L&lt;T&gt;=T extends`${infer A}${infer B}`?A extends S?B extends S?0:H&lt;A,B&gt;:H&lt;A,B&gt;:0
let y:L&lt;&quot;bd&quot;&gt;=1
</code></pre>
<p><a href="https://www.typescriptlang.org/play?#code/C4TwDgpgBAqgvAIjAgPg4qEGtMDNMDGmAzpgB4ICwAUKJFAGqIBGmAJpgOaYBumAVpgBeVWuGgBlRETSk0gtCJp1oAcQA8AFQA0AdQB8cTVAhlgEAHZtiUXQH4ADAC5jp81dIAbTACdMAW0wLBDsARhcTM0trWDtdSPcYhkcncPi3aJsYFNDlcSgACS09Q1cojwQKOITM7EIQ5w0dAwiMipw0Imq260qGpyaS1vLewO6R0hEUwZaZ-Tz6ABktUpqPAAMAEgBvAEsLXAgfKABBAF8d-cPjgCEz9bsTtZiJOxvnm1fnIpPtG-0nD8-gCHDRPBBgFAQE5lghmBxDKEgA" rel="nofollow noreferrer">Playground link</a></p>
<p>If you replace the <code>bd</code> on the last line with an illegal pair of consonants, the code will not compile. I may well have missed some optimizations, but I'm just content with the fact that the <code>`${infer A}${infer B}`</code> works as intended. Interestingly, any single character is considered valid.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 49 bytes</h1>
<pre><code>$Qa|`[ptkfcsx][bdgvjz]|[ck]x`NPZa|a~=`[cjsz]+|mz`
</code></pre>
<p>Outputs with the <a href="https://codegolf.meta.stackexchange.com/a/19205/16766">truthy and falsey values switched</a> (i.e. truthy if the consonant cluster is <em>not</em> valid, falsey if it is valid). If that's not considered acceptable for this challenge because it predates the linked consensus, then tack <code>!:</code> on the front for +2 bytes.</p>
<p>Verify all test cases: <a href="https://tio.run/##DZJLjh03EAT3fYrAQDtDuoGOIMHeajDSDIsgYf5QYBE0UX721Z96m8hNRob@rc9fX@zLv89Pf3083l911SR23l5DzLv42@NV6tt5//7nj4/Hx/9f31@lmL/98ej@/vyPb9fjwctFiIRMKIRG6IRBmIRNcCQhFWlIRwaiyEQWMRAzsRAbsRMHcRL3RXSSkCqpkTppkJQ0SUZapEMO5Egu5Ebu5EGe5E12SqBESqY0Sr8ogzIpmyrURG3UTh1UpU6qURct0IQWaYmWaYVWaZ02aEqbNKOti7Zph@b0QBd6pCd6phd6pTf6oCt90o2@6Jt@GIEhjMhIjMwojHoxGqMzlDEZxliMzbjbjgqa0Io2tKMDnaihCz3MwBRmZCZmZpaLWZmN2ZmDqUxjLuZm3m3HElaxhnVsYIpNbGGHJazEqqzG6qxxsZQ1WcY67MCO7Mwu7Mbu7MGebOckTuN0zuAoZ3KMs/CARzzj7cI7PvCJ7@s2JBCEkAiVoAQjLMJBAiJIRDJSEEM2cudOFGIkJmIlKtGItzbnIgVSJCVSJhXSJjlZyImcyZWsZCMv8qEIJVEKpVKUYpRFuXOnhosaqZlaqJV6e3KoTrvP7HRn3PQDGtGMFlTRjTrzZhgwwSKWsYLZhW3MWYEVWZlVWIu1Wc4WdmJXtrKNvdibfTiBI5zIyZzCqZzNuTcexwVPeMErrrjhN@KD@/XCT/55Pj@33w" rel="nofollow noreferrer" title="Pip – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>The input <code>a</code> is an invalid cluster if...</p>
<pre><code>$Qa |
</code></pre>
<p>... its two characters are string-equal; or...</p>
<pre><code>`[ptkfcsx][bdgvjz]|[ck]x` N PZa |
</code></pre>
<p>... the input <code>P</code>alindromi<code>Z</code>ed (e.g. <code>xc</code> -&gt; <code>xcx</code>) contains an unvoiced consonant <code>[ptkfcsx]</code> followed by a voiced consonant <code>[bdgvjz]</code> or one of <code>[ck]</code> followed by <code>x</code>; or...</p>
<pre><code>a~=`[cjsz]+|mz`
</code></pre>
<p>... the input consists entirely of one or more (in this case, two) characters from the set <code>[cjsz]</code>, or consists entirely of the sequence <code>mz</code>.</p>
</div>
<div id="pu4" class="pu"><h2>Pyth, <s>53</s> <s>48</s> 47 bytes</h2>
<pre><code>!}z+&quot;mz&quot;s.pMs[+VGGc&quot;xcxkcsjz&quot;2*&quot;ptkfcsx&quot;&quot;bdgvjz
</code></pre>
<p>This generates a list of all invalid pairs based on the rules above, then checks if the input is one of them.</p>
<pre><code>! }                        A not in B
    z                      input
    +
      &quot;mz&quot;                  &quot;mz&quot;
      s                    flattened
        .pM                permutations of each:
            s [               flatten the three-element array:
                +V              Alphabet vectorized concat with itself.
                   G            That is, duplicate letters
                   G
                c&quot;xcxkcsjz&quot;2     That string chopped every 2
                *               outer product of
                  &quot;ptkfcsx&quot;      voiced letters
                  &quot;bdgvjz        and unvoiced letters
</code></pre>
<p>Try it <a href="https://pyth.herokuapp.com/?code=%21%7Dz%2B%22mz%22s.pMs%5B%2BVGGc%22xcxkcsjz%222%2a%22ptkfcsx%22%22bdgvjz&amp;input=ct&amp;debug=0" rel="nofollow noreferrer">here</a>.</p>
</div>
<div id="pu5" class="pu"><h2><a href="https://github.com/mbuettner/retina/" rel="nofollow">Retina</a>, <s>59</s> <s>57</s> <s>54</s> <s>53</s> 52 bytes</h2>

<pre><code>(.)\1|[cjsz]{2}|mz

T`fb-jz`svkv
kx|xk|^v?[kpstx]v?

</code></pre>

<p>The trailing linefeed is significant. For valid clusters, this outputs a non-empty string; for invalid ones the output is empty.</p>

<p><a href="http://retina.tryitonline.net/#code=KC4pXDF8W2Nqc3pdezJ9fG16CgpUYGZiLWp6YHN2a3YKa3h8eGt8XGJ2P1trcHN0eF12Pwo&amp;input=VmFsaWQgY29uc29uYW50IGNsdXN0ZXJzOgogYmQgYmcgYmogYmwgYm0gYm4gYnIgYnYgYnogY2YgY2sgY2wgY20gY24gY3AgY3IgY3QgZGIgZGcgZGogZGwgZG0gZG4gZHIgZHYKIGR6IGZjIGZrIGZsIGZtIGZuIGZwIGZyIGZzIGZ0IGZ4IGdiIGdkIGdqIGdsIGdtIGduIGdyIGd2IGd6IGpiIGpkIGpnIGpsIGptCiBqbiBqciBqdiBrYyBrZiBrbCBrbSBrbiBrcCBrciBrcyBrdCBsYiBsYyBsZCBsZiBsZyBsaiBsayBsbSBsbiBscCBsciBscyBsdAogbHYgbHggbHogbWIgbWMgbWQgbWYgbWcgbWogbWsgbWwgbW4gbXAgbXIgbXMgbXQgbXYgbXggbmIgbmMgbmQgbmYgbmcgbmogbmsKIG5sIG5tIG5wIG5yIG5zIG50IG52IG54IG56IHBjIHBmIHBrIHBsIHBtIHBuIHByIHBzIHB0IHB4IHJiIHJjIHJkIHJmIHJnIHJqCiByayBybCBybSBybiBycCBycyBydCBydiByeCByeiBzZiBzayBzbCBzbSBzbiBzcCBzciBzdCBzeCB0YyB0ZiB0ayB0bCB0bSB0bgogdHAgdHIgdHMgdHggdmIgdmQgdmcgdmogdmwgdm0gdm4gdnIgdnogeGYgeGwgeG0geG4geHAgeHIgeHMgeHQgemIgemQgemcgemwKIHptIHpuIHpyIHp2CgpJbnZhbGlkIGNvbnNvbmFudCBjbHVzdGVyczoKIGJiIGJjIGJmIGJrIGJwIGJzIGJ0IGJ4IGNiIGNjIGNkIGNnIGNqIGNzIGN2IGN4IGN6IGRjIGRkIGRmIGRrIGRwIGRzIGR0IGR4CiBmYiBmZCBmZiBmZyBmaiBmdiBmeiBnYyBnZiBnZyBnayBncCBncyBndCBneCBqYyBqZiBqaiBqayBqcCBqcyBqdCBqeCBqeiBrYgoga2Qga2cga2oga2sga3Yga3gga3ogbGwgbW0gbXogbm4gcGIgcGQgcGcgcGogcHAgcHYgcHogcnIgc2Igc2Mgc2Qgc2cgc2ogc3MKIHN2IHN6IHRiIHRkIHRnIHRqIHR0IHR2IHR6IHZjIHZmIHZrIHZwIHZzIHZ0IHZ2IHZ4IHhiIHhjIHhkIHhnIHhqIHhrIHh2IHh4CiB4eiB6YyB6ZiB6aiB6ayB6cCB6cyB6dCB6eCB6eg" rel="nofollow">Try it online!</a> This tests all clusters at once (removing all the invalid ones and leaving all the valid ones intact). To make that possible I've had to replace the <code>^</code> anchor with a <code>\b</code> word boundary.</p>

<p>Another solution for the same byte count:</p>

<pre><code>(.)\1|[cjsz]{2}|mz

T`fk-dbz`scv
cx|xc|^v?[cpstx]v?

</code></pre>

<h3>Explanation</h3>

<p>The goal is to remove all invalid pairs completely. We can do with the valid pairs whatever we want as long as at least one character remains.</p>

<pre><code>(.)\1|[cjsz]{2}|mz

</code></pre>

<p>This takes care of three rules: <code>(.)\1</code> matches any pair violating rule 1. <code>[cjsz]{2}</code> matches any pair violating 3. <code>mz</code> matches the specifically disallowed pair from rule 4.</p>

<p>That leaves only rule two and the other specific pairs <code>xk</code>, <code>kx</code>, <code>xc</code> and <code>cx</code>. We can save a bunch of bytes by doing some preprocessing so we have to handle fewer cases:</p>

<pre><code>T`fb-jz`svkv
</code></pre>

<p>The idea is to collapse all voiced consonants into one, as well <code>k</code> and <code>c</code>. I'm also turning <code>f</code> into <code>s</code> out of necessity. This is a transliteration stage which will substitute individual characters for other characters. To see the actual mapping we need to expand the range and remember that the last character of the target list is repeated indefinitely:</p>

<pre><code>fbcdefghijz
svkvvvvvvvv
</code></pre>

<p>The initial <code>f =&gt; s</code> is necessary, because it overrides the later <code>f =&gt; v</code> which would turn <code>f</code> into a voiced consonant. We also see that <code>c</code> is turned into <code>k</code>. And all the voiced consontants <code>bdgjz</code> are turned into <code>v</code>. That leaves <code>ehi</code>... luckily these are either vowels or unused in Lojban. The same could also have been achieved with</p>

<pre><code>T`fcb-jz`skv
</code></pre>

<p>Alternatively, check out the other solution I posted above that uses a very different transliteration (with a reverse range, and it also turns <code>k</code> into <code>c</code> instead).</p>

<p>Now the remaining invalid combinations can be checked much more easily:</p>

<pre><code>kx|xk|^v?[kpstx]v?

</code></pre>

<p><code>cx</code> and <code>cx</code> have become <code>kx</code> and <code>xk</code> so we only need to check two cases now. For rule 2, we try to match the entire pair, starting from the beginning with an optional voiced consonant (reduced to <code>v</code>), a mandatory unvoiced consonant (where we don't need to check for <code>f</code> and <code>c</code> separately) and another optional voiced consonant. If the pair is a mix of voiced and unvoiced one of the two optional <code>v</code>s will match and the entire pair is removed. Otherwise, this can only match if the pair starts with a voiced consonant (and has anything else second) - in that case only the first character will be removed, and the other one will remain, still giving a truthy result.</p>
</div>
<!-- TYYY -->

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/QNNN/">QNNN</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




