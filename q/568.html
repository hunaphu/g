<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::568</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>079</td><td>AWK</td><td>250909T143312Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/283598#283598">xrs</a></td></tr>
<tr d-ix="1"><td>014</td><td>ZX81 BASIC might be cheating</td><td>230604T094507Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/261538#261538">Shaun Be</a></td></tr>
<tr d-ix="2"><td>145</td><td>Java 10</td><td>190213T074703Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/179831#179831">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>214</td><td>C# 234 231 229 223</td><td>110205T221306Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/574#574">Sklivvz</a></td></tr>
<tr d-ix="4"><td>030</td><td>05AB1E</td><td>190213T083429Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/179832#179832">Kevin Cr</a></td></tr>
<tr d-ix="5"><td>087</td><td>JavaScript</td><td>190213T041722Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/179829#179829">Yair Ran</a></td></tr>
<tr d-ix="6"><td>105</td><td>Python 3</td><td>121019T014607Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/8747#8747">daniero</a></td></tr>
<tr d-ix="7"><td>nan</td><td></td><td>140106T151104Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/17771#17771">swish</a></td></tr>
<tr d-ix="8"><td>208</td><td>JavaScript</td><td>140106T130926Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/17756#17756">IQAndrea</a></td></tr>
<tr d-ix="9"><td>048</td><td>Tcl 8.6</td><td>130419T194437Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/11414#11414">Johannes</a></td></tr>
<tr d-ix="10"><td>308</td><td>Python</td><td>131019T072334Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/12901#12901">golfer93</a></td></tr>
<tr d-ix="11"><td>108</td><td>C</td><td>130420T135033Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/11423#11423">Fors</a></td></tr>
<tr d-ix="12"><td>114</td><td>Haskell</td><td>130419T184501Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/11413#11413">Fors</a></td></tr>
<tr d-ix="13"><td>145</td><td>PostScript</td><td>121019T052341Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/8750#8750">Thomas W</a></td></tr>
<tr d-ix="14"><td>340</td><td>Postscript</td><td>121015T052850Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/8723#8723">luser dr</a></td></tr>
<tr d-ix="15"><td>097</td><td>Perl</td><td>110206T032826Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/587#587">Ming-Tan</a></td></tr>
<tr d-ix="16"><td>126</td><td>C</td><td>110205T233040Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/580#580">Arnaud L</a></td></tr>
<tr d-ix="17"><td>065</td><td>Ruby</td><td>110205T223013Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/575#575">Arnaud L</a></td></tr>
<tr d-ix="18"><td>114</td><td>Befunge   38 x 3 =</td><td>110205T232849Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/579#579">Nemo157</a></td></tr>
<tr d-ix="19"><td>194</td><td>C++0x</td><td>110206T001020Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/582#582">Loki Ast</a></td></tr>
<tr d-ix="20"><td>156</td><td>Python</td><td>110205T214157Z</td><td><a href="https://codegolf.stackexchange.com/questions/568/basic-calculator/571#571">Hoa Long</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/gawk/" rel="nofollow noreferrer">AWK</a>, 79 bytes (stdin)</h1>
<pre><code>{for(x=$1;i++&lt;NF-2;x=a~&quot;+&quot;?x+b:a~&quot;-&quot;?x-b:a~&quot;*&quot;?x*b:x/b){a=$(++i);b=$(i+1)}}$0=x
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m704sTx7wYKlpSVpuhY3_avT8os0KmxVDK0ztbVt_Nx0jawrbBPrlLSV7Cu0k6yALF0gSxfM0gKytJKsKvSTNKsTbVU0tLUzNa2TgIxMbUPN2loVA9sKiLFQ0xfs1TVS0FYwU9BXMFLQUrBQ0FUwBLH1TEEsC4giAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h1>111 bytes (getline)</h1>
<pre><code>BEGIN{getline _;l=split(_,s);for(x=s[1];i++&lt;l-2;x=a~&quot;+&quot;?x+b:a~&quot;-&quot;?x-b:a~&quot;*&quot;?x*b:x/b){a=s[++i];b=s[i+1]}print x}
</code></pre>
</div>
<div id="pu1" class="pu"><h1>ZX81 BASIC (might be cheating, so just for fun/non-competing), ~14 Tokenised BASIC bytes, 6 key entries without <em>new line</em> (ZX81 speak for enter)</h1>
<pre><code>1 INPUT A
2 PRINT A
</code></pre>
<p>Whilst this does not explicitly use any kind of &quot;eval&quot; functions, ZX81 BASIC evaluates any mathematical expressions in its ROM <em>if you are inputing to a floating point variable</em> of which <code>A</code> would be (like most 8-bit BASIC variants, string variables will have a <code>$</code> at the end of the variable name). So when you enter the program and <code>RUN</code> it, you can type like <code>12+10*6</code> and this will output <code>72</code> (note the ZX81 keyboard has some odd key placements for +, /, - and * etc).</p>
<p>The byte count is as follows: as I recall, each line number is stored as 4 bytes, and <code>INPUT</code> is a single token, as is <code>PRINT</code> (you cannot free type in ZX81 BASIC to enter BASIC commands, so to enter the <code>INPUT</code> command, press I, and to enter the <code>PRINT</code> command, press P). I don't recall how many bytes are stored at the end of each BASIC line entered, but let's assume that it is a single byte, hence my estimate of 14 tokenised BASIC bytes. I'll find out the exact number at a later time (if this is not cheating).</p>
<p>You may try this online with the <a href="http://www.zx81stuff.org.uk/zx81/jtyone.html" rel="nofollow noreferrer">JtyOne Online ZX81 Emulator</a> which helpfully has an interactive keyboard below the running emulator.</p>
</div>
<div id="pu2" class="pu"><h1>Java 10, <s>151</s> 145 (as lambda function)</h1>

<pre class="lang-java prettyprint-override"><code>s-&gt;{float r=0,t,o=0,q;for(var x:s.split(&quot; &quot;)){if(x.length()&gt;1|(q=x.charAt(0)-43)&gt;4){t=new Float(x);r=o&lt;0?r*t:o&lt;1?r+t:o&lt;3?r-t:r/t;}o=q;}return r;}
</code></pre>
<p>-6 bytes thanks to <em>@ceilingcat</em>.</p>
<p>Lambda function taking a String input and outputting a float.</p>
<p><a href="https://tio.run/##jU@7csIwEOz9FTdUEmCBeSQMwjBp0oWGkkmhGBtEjASnw3HG8bc78uA6k@aeuzu7Z1Wo8Hz4bJJcOQdvSpsqANCGUsxUksK2XQGy3CqChO0ItTmC49Kf68AXR4p0AlswEEPjwnX1wGI8HtLQ@nqTmUVWKIRy6YS75ppYD3qcVzpjpchTc6QT4@voh93iUiQnhS/ExjycTfl6xiuKTfoFr60qK7nE2K7GG@zT0q6iDQ7aPt1gSEsckaxtfJM1pnRHAyjrRrYmr/eP3JvsvBZWH@Dio3Zx9u@g@CPn7ttRehH2TuLqX5QbZkTCeuEMBjD3nuXfsGcxhxFMxD@gE6/41IKhDwsIIXoQ22nRseugbn4B" rel="nofollow noreferrer">Try it online.</a></p>
<h1>Java 10, <s>241</s> 235 bytes (as full program with asked I/O)</h1>
<pre class="lang-java prettyprint-override"><code>interface M{static void main(String[]a){float r=0,t;int o=43,q;for(var x:new java.util.Scanner(System.in).nextLine().split(&quot; &quot;)){if(x.length()&gt;1|(q=x.charAt(0))&gt;47){t=new Float(x);r=o&lt;43?r*t:o&lt;44?r+t:o&lt;46?r-t:r/t;}o=q;}System.out.print(r);}}
</code></pre>
<p>Full program taking a String-line through STDIN and outputting to STDOUT.</p>
<p><a href="https://tio.run/##LY/BboJAFEV/5cXVPHVGUNsYEEk3XbUrlk0XExx0KM7I40lpKN9OIenm3rs6J7fUrZbl@WscrWNDhc4NvPcNa7Y5tN6e4aatExmTdZePT419UXnNQEmw5rWfso4LT6LVBF3kzDeUE1E92FYqy7VzhkT207C5KetQOdPxm3VGoGrulWWxgAVibwvRqcq4C18FnsJfUSedyq@aXlgEKPc7PO2x52Tmv85@0WFMiT8GKS058scwpdXcu5QkR7ThePBJHQ//av9gdZ8esCCMh2Ec5RZW8Awb2MISDiAhnLd6mtfhDw" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>interface M{                  // Class
  static void main(String[]a){//  Mandatory main-method
    float r=0,                //   Result float, starting at 0
          t,                  //   Temp float
          o=0,                //   Operator flag, starting at '+'
          q;                  //   Temp operator flag
    for(var x:new java.util.Scanner(System.in)
                              //   Create an STDIN-reader
               .nextLine()    //   Get the user input
               .split(&quot; &quot;)){  //   Split it on spaces, and loop over it:
      if(x.length()&gt;1         //    If the current String length is larger than 1
                              //    (work-around for negative values)
         |(q=x.charAt(0)-43)&gt;4){
                              //    Or the first character is an operator
                              //    (and set `q` to this first character at the same time)
        t=new Float(x);       //     Convert the String to a float, and set it to `t`
        r=                    //     Change `r` to:
          o&lt;0?                //      If `o` is a '*':
            r*t               //       Multiply `r` by `t`
          :o&lt;1?               //      Else-if `o` is a '+':
            r+t               //       Add `r` and `t` together
          :o&lt;3?               //      Else-if `o` is a '-':
            r-t               //       Subtract `t` from `r`
          :                   //      Else (`o` is a '/'):
            r/t;}             //       Divide `r` by `t`
      o=q;}                   //    And at the end of every iteration: set `o` to `q`
    System.out.print(r);}}    //    Print the result `r` to STDOUT
</code></pre>
</div>
<div id="pu3" class="pu"><h2>C# <del>(234)</del> <del>(231)</del> <del>(229)</del> <del>(223)</del> (214)</h2>

<pre><code>class A{void Main(string[]s){var n=1;var o="";var r=0F;foreach(var t in s){if(n&gt;0){var v=float.Parse(t);if(o=="")r=v;if(o=="+")r+=v;if(o=="-")r-=v;if(o=="*")r*=v;if(o=="/")r/=v;}o=t;n=-n;}System.Console.Write(r);}}
</code></pre>

<hr>

<pre><code>class A{
    void Main(string[] s)
    {
      var n = 1;
      var o = "";
      var r = 0F;

      foreach (var t in s)
      {
        if (n &gt; 0)
        {
          var v = float.Parse(t);
          if (o == "") r = v;
          if (o == "+") r += v;
          if (o == "-") r -= v;
          if (o == "*") r *= v;
          if (o == "/") r /= v;
        }
        o = t;
        n = -n;
      }
      System.Console.Write(r);
    }
}
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 30 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>#ćs2ôívy`…+-*sk©i-ë®&gt;i+ë®&lt;i*ë/
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9f@Uh7sdHhLYfXllUmPGpYpq2rVZx9aGWm7uHVh9bZZWqDKJtMrcOr9f//1zVS0FYwU9BXMFLQUrBQ0FUwBLH1TEEsCwA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeV/5SPtxUaHtxxeW1aZ8KhhmbauVnH2oZWZuodXH1pnl6kNomwytQ6v1v9fCwQ6/6OVdE0UtBVMlXQUlHTN9UwV9BWM9CA8I6C4GYivoKVgoaCrYAiRA7EslGIB" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>#           # Split the (implicit) input-string by spaces
 ć          # Pop the list, and push the remainder and first item separated to the stack
  s         # Swap so the remainder is at the top of the stack
   2ô       # Split it into parts of size 2 (operator + number pairs)
     í      # Reverse each pair so the numbers are before the operators
v           # Loop over each of the pairs:
 y`         #  Push the number and operator separated to the stack
   …+-*     #  Push a string &quot;+-*&quot;
       sk   #  Get the index of the operator in this string
         ©  #  Store this index in the register (without popping)
   i        #  If the index is 1 (the &quot;-&quot;):
    -       #   Subtract the numbers from each other
   ë®&gt;i     #  Else-if the index is 0 (the &quot;+&quot;):
       +    #   Add the numbers together
   ë®&lt;i     #  Else-if the index is 2 (the &quot;*&quot;):
       *    #   Multiply the numbers with each other
   ë        #  Else (the index is -1, so &quot;/&quot;):
    /       #   Divide the numbers from each other
            # (and output the result implicitly)
</code></pre>

<hr />
<p>If an <code>eval</code> builtin was allowed, this could be an alternative approach (<strong>16 bytes</strong>):</p>
<pre class="lang-none prettyprint-override"><code>#ćs2ôJv…(ÿ)y«}.E
</code></pre>
<p><a href="https://tio.run/##MzBNTDJM/f9f@Uh7sdHhLV5ljxqWaRzer1l5aHWtnuv//7pGCtoKZgr6CkYKWgoWCroKhiC2nimIZQEA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##MzBNTDJM/V9Waa@k8KhtkoKSfeV/5SPtxUaHt3iVPWpYpnF4v2blodW1eq7/df5HK@maKGgrmCrpKCjpmuuZKugrGOlBeEZAcTMQX0FLwUJBV8EQIgdiWSjFAgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>#ćs2ô    # Same as above
     J   # Join each operator+number pair together to a single string
v        # Loop over the operator+number strings:
 …(ÿ)    #  Surround the top of the stack in parenthesis
     y«  #  And append the operator+number string
}.E      # After the loop: evaluate the string using a Python-eval
</code></pre>
<p>This would change <code>&quot;-2 + 6 / 2 * 8 - 1 / 2.5 - 18&quot;</code> to <code>&quot;((((((-2)+6)/2)*8)-1)/2.5)-18&quot;</code> before using the <code>eval</code> builtin (using <code>.E</code> directly would give operator precedence of <code>*/</code> over <code>+-</code>, hence the conversion with parenthesis first).</p>
</div>
<div id="pu5" class="pu"><h1>JavaScript (87 characters)</h1>

<pre><code>alert(prompt().split(/ +/).reduce((a,b,i)=&gt;i%2?(o=b,a):o+1-0?a-b*-(o+1):o&lt;'/'?a*b:a/b))
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Python 3, 105 bytes</h1>

<p>Manages the four basic operations, but it only costs 5 characters each to add <code>^</code> or <code>%</code>.</p>

<pre class="lang-python prettyprint-override"><code>f=float
x,*l=input().split()
while l:o,y,*l=l;x,y=f(x),f(y);x=[x+y,x-y,x*y,x/y]['+-*/'.find(o)]
print(x)
</code></pre>

<p>Precedence of operations is left to right.</p>
</div>
<div id="pu7" class="pu"><h1> Haskell - 124 </h1>

<pre><code>let p=let f[x]=Just$read x;f(x:o:r)=lookup o[("-",(-)),("+",(+)),("*",(*)),("/",(/))]&lt;*&gt;f r&lt;*&gt;Just(read x)in f.reverse.words
</code></pre>

<p>The result will be wrapped in <code>Maybe</code> monad</p>

<pre><code>λ: p"-2 + 6 / 2 * 8 - 1 / 2.5 - 18"
Just (-12.0)
</code></pre>

<p>Also it requires importing <code>&lt;*&gt;</code> from <code>Control.Applicative</code>, but imports can be done outside the code, so I hope it's allowed.</p>
</div>
<div id="pu8" class="pu"><h2>JavaScript (208 characters compacted)</h2>

<p>For clarity, this is the code <em>before</em> I compacted it down (<a href="http://jsfiddle.net/IQAndreas/Td83k/1/" rel="nofollow">JS-Fiddle of it</a>):</p>

<pre><code>function math(match, leftDigit, operator, rightDigit, offset, string) {
    var L = parseFloat(leftDigit)
    var R = parseFloat(rightDigit)
    switch (operator)
    {
        case '*': return L*R;
        case '/': return L/R;
        case '+': return L+R;
        case '-': return L-R;
    }
};

str = prompt("Enter some math:", "-2 + 6 / 2 * 8 - 1 / 2.5 - 18").replace(/ /g, "");
var mathRegex = /(\-?\d+\.?\d*)([\*\/\+\-])(\-?\d+\.?\d*)/;
while(mathRegex.test(str)) {
    str = str.replace(mathRegex, math);
}
alert(str)
</code></pre>

<p>Here it is compacted down to 208 characters (<a href="http://jsfiddle.net/IQAndreas/Td83k/3/" rel="nofollow">JS-Fiddle of it</a>):</p>

<pre><code>function m(x,l,o,r){
    L=(f=parseFloat)(l);
    R=f(r);
    return o=='*'?L*R:o=='/'?L/R:o=='+'?L+R:L-R;
};

M=/(\-?\d+\.?\d*)([\*\/\+\-])(\-?\d+\.?\d*)/;
for(s=prompt().replace(/ /g, "");M.test(s);s=s.replace(M,m)){};
alert(s)
</code></pre>

<p>Since I'm ending lines with semi-colons, all <em>removable</em> whitespace was ignored for character counting, but left in for clarity.</p>
</div>
<div id="pu9" class="pu"><h1>Tcl 8.6, <s>57</s> 48 chars.</h1>

<ul>
<li><p>Input from arguments:</p>

<pre><code>lm o\ b [las $argv a] {set a [exp $a$o$b]};pu $a
</code></pre></li>
<li><p>From Stdin (<s>64</s> <strong>53</strong>)</p>

<pre><code>lm o\ b [las [ge stdin] a] {set a [exp $a$o$b]};pu $a
</code></pre></li>
</ul>

<p><strong>You have to use the interactive shell for both solutions.</strong></p>

<p>I treat the input as list (Tcl uses spaces as delimiter) take the first element and assign it to <code>a</code>, then I walk over the rest, taking 2 elements each time, the operator and a second number, apply the operator on <code>$a</code> and <code>$b</code> and assign the result to <code>a</code>. At the end the result is in <code>a</code>.</p>
</div>
<div id="pu10" class="pu"><h1>Python - 308</h1>

<pre><code>import sys;i=sys.argv[1].split();o=[];s=[];a=o.append;b=s.pop;c=s.append
for t in i:
 if t in"+-*/":
  if s!=[]:a(b())
  c(t)
 else:a(t)
if s!=[]:a(b())
for t in o:
 if t=="+":c(b()+b())
 elif t=="-":m=b();c(b()-m)
 elif t=="*":c(b()*b())
 elif t=="/":m=b();c(b()/m)
 else:c(float(t))
print(b())
</code></pre>

<p>Readable version:</p>

<pre><code># Infix expression calc

import sys

# Shunting-yard algorithm
input = sys.argv[1].split()
output = []
stack = []

for tkn in input:
    if tkn in "+-*/":
        while stack != []:
            output.append(stack.pop())
        stack.append(tkn)
    else:
        output.append(tkn)

while stack != []:
    output.append(stack.pop())

# Eval postfix notation
for tkn in output:
    if tkn == "+":
        stack.append(stack.pop() + stack.pop())
    elif tkn == "-":
        tmp = stack.pop()
        stack.append(stack.pop() - tmp)
    elif tkn == "*":
        stack.append(stack.pop() * stack.pop())
    elif tkn == "/":
        tmp = stack.pop()
        stack.append(stack.pop()/tmp)
    else:
        stack.append(float(tkn))

print(stack.pop())
</code></pre>

<p>Takes expression as command-line argument, output on standard output.</p>
</div>
<div id="pu11" class="pu"><h1>C: <strike>111</strike> 108 characters</h1>

<pre><code>main(c){float a,b;for(scanf("%f ",&amp;a);~scanf("%c%f ",&amp;c,&amp;b);a=c^43?c%5?c%2?a/b:a*b:a-b:a+b);printf("%f",a);}
</code></pre>

<p>It fulfills all the requirements, usage:</p>

<pre><code>&gt; ./calc &lt;&lt;&lt; "-43 - 56 + 14.123 / -13.22"
6.420348
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Haskell: <strike>124</strike> 114 characters</h1>

<pre><code>j[o]=o
j(u:m:b:o)=j$show((case m of{"+"-&gt;(+);"-"-&gt;(-);"*"-&gt;(*);"/"-&gt;(/)})(read u)(read b)):o
main=interact$j.words
</code></pre>

<p>A rather straight-forward answer, using pattern matching and a simple case statement for the heavy lifting. Usage:</p>

<pre><code>&gt; ./calc &lt;&lt;&lt; "123 - 12 + -12 / 12.124 * 9.99 - 1"
80.57456285054437
</code></pre>
</div>
<div id="pu13" class="pu"><p><strong>PostScript (145)</strong></p>

<p>Another PostScript entry (thanks to luser droog for digging the golfs interesting for PostScript!):</p>

<pre><code>[/+{add}/-{sub}/*{mul}/{div}&gt;&gt;begin(%stdin)(r)file
999 string readline
pop{token not{exit}if
count 4 eq{3 1 roll
4 1 roll
cvx exec}if
exch}loop
=
</code></pre>

<p>Un-golfed:</p>

<pre><code>[/+{add}/-{sub}/*{mul}/ {div}&gt;&gt;begin
% Read the input
(%stdin)(r)file 999 string readline pop
{                        % .. string
  token not{exit}if      % .. string token
  % If we have 4 objects on the stack, we have two operands, one operator
  % and the input string. This means, we can calculate now.
  count 4 eq{            % a op string b
    % perform operation a op b = c (where op can be +,-,*,/)
    3 1 roll             % a b op string
    4 1 roll             % string a b op 
    cvx exec             % string c
  }if                    % string token (or c)
  exch                   % token string
}loop
=
</code></pre>
</div>
<div id="pu14" class="pu"><p><strong>Postscript (340)</strong></p>

<pre><code>/D&lt;&lt;/+{add}/-{sub}/*{mul}/ {div}&gt;&gt;def/eval{/P null def{token not{exit}if exch/rem exch def
dup D exch known{/P load null ne{D/P load get exch/P exch def exec}{/P exch def}ifelse}if
rem}loop/P load null ne{D/P load get exec}if}def {(&gt; )print flush{(%lineedit)(r)file
dup bytesavailable string readline pop eval == flush}stopped{quit}if}loop
</code></pre>

<p>And a little more readable:</p>

<pre><code>%!
/oper&lt;&lt;/+{add}/-{sub}/*{mul}/ {div}&gt;&gt;def

/eval{
    /op null def
    {
        token not {exit} if
        exch /rem exch def
        dup oper exch known {
            /op load null ne {
                oper /op load get
                exch /op exch def
                exec
            }{
                /op exch def
            } ifelse
        } if
        rem
    } loop
    /op load null ne { oper /op load get exec } if
} def

{
    (&gt; )print flush
    {
    (%lineedit)(r)file
    dup bytesavailable string readline pop
    eval == flush
    } stopped { quit } if
} loop
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Perl (97)</h1>

<p><strike></p>

<pre><code>$b=shift;eval"\$b$r=$s"while($r=shift,$s=shift);print$b
</code></pre>

<p></strike></p>

<p>read from arguments</p>

<pre><code>$b=shift;$b=($r eq'+'?$b+$s:$r eq'-'?$b-$s:$r eq'*'?$b*$s:$b/$s)while($r=shift,$s=shift);print$b;
</code></pre>

<p>read from input</p>

<pre><code>@_=split/ /,&lt;&gt;;$b=shift@_;$b=($r eq'+'?$b+$s:$r eq'-'?$b-$s:$r eq'*'?$b*$s:$b/$s)while($r=shift@_,$s=shift@_);print$b
</code></pre>
</div>
<div id="pu16" class="pu"><h1>C - <s>168</s> 126 characters</h1>

<pre><code>main(c){float a,b;scanf("%f",&amp;a);while(scanf("%s%f",&amp;c,&amp;b)!=-1)c=='+'?a+=b:c=='-'?(a-=b):c=='*'?(a*=b):(a/=b);printf("%f",a);}
</code></pre>
</div>
<div id="pu17" class="pu"><h1>Ruby - <s>74</s> <s>69</s> <s>67</s> 65 characters</h1>

<pre><code>a=0
("+ "+$&lt;.read).split.each_slice 2{|b,c|a=a.send b,c.to_f}
p a
</code></pre>
</div>
<div id="pu18" class="pu"><h2>Befunge - <strike>37 x 5 = 185</strike> 38 x 3 = 114 characters</h2>

<p>This is limited to integer numbers as Befunge has no floating point support.</p>

<pre><code>&amp;v      /&amp; _ #`&amp;# "-"$# -#&lt;          v
 &gt;~:0`!#v_:" "`! #v_:","`#^_"*"`#v_&amp;*&gt;
 ^      &gt;# $ .# @#&lt;              &gt;&amp;+ 
</code></pre>

<h3>Explanation</h3>

<p>The biggest distinguishing feature of <a href="http://en.wikipedia.org/wiki/Befunge">Befunge</a> is that instead of being a linear set of instructions like most languages; it is a 2d grid of single character instructions, where control can flow in any direction.</p>

<p>The first <code>&amp;</code> simply inputs the first number.  The <code>v</code> and <code>&gt;</code> then redirect control to the main path on the second row.</p>

<pre><code>~:0`!#v_
</code></pre>

<p>This inputs a character (<code>~</code>), duplicates it (<code>:</code>), pushes zero onto the stack (<code>0</code>), pops the top two elements and determines if the second is greater than the first (<code>`</code> <em>I'm surprised you can't use ``` to get code backticks.</em>), inverts the truthiness of the top element (<code>!</code>), then goes right if it is zero, down otherwise (<code>#v_</code>).</p>

<p>Basically it's checking whether the input is <code>-1</code> representing no more input.</p>

<pre><code>&gt;# $ .# @
</code></pre>

<p>If the input was <code>-1</code> then the duplicated input value is discarded (<code>$</code>), the top of the stack is output as an integer (<code>.</code>) and the program is halted (<code>@</code>).</p>

<pre><code>:" "`! #v_
</code></pre>

<p>Otherwise a similar process is repeated to determine if the input is less than or equal to a space.  If it is a space then control goes down, otherwise control heads right.</p>

<pre><code>^      &gt;# $ .# @#&lt;
</code></pre>

<p>If it is a space then it's redirected left (<code>&lt;</code>); the program halt (<code>@</code>), output (<code>.</code>) and right redirection (<code>&gt;</code>) are all skipped using <code>#</code>; but the discard is executed to remove the space from the stack.  Finally it's redirected up to begin the next execution (<code>^</code>).</p>

<pre><code>:","`#^_
</code></pre>

<p>If it wasn't a space the same process is used to split on if it is in <code>[+, *]</code> or in <code>[-, \]</code> going right and up respectively.</p>

<pre><code> &gt;~                         "*"`#v_&amp;*&gt;
 ^                               &gt;&amp;+
</code></pre>

<p>For <code>[+, *]</code> it is again split to determine whether it is a <code>+</code> or a <code>*</code>.  If <code>+</code> it is directed down then the next number is input (<code>&amp;</code>) and they are added (<code>+</code>), the control then wraps around and is redirected up to the main path for the next character.  If <code>*</code> then it inputs (<code>&amp;</code>) and multiplies (<code>*</code>) then directly wraps around.</p>

<pre><code>/&amp; _ #`&amp;# "-"$# -#&lt;
</code></pre>

<p>For <code>[-, \]</code> it starts on the right heading left.  The <code>#</code>'s skip the character after them so the initial path is <code>"-"`_</code> which simply determines if it is <code>-</code> or <code>/</code>.  If it is <code>/</code> then it continues left to input (<code>&amp;</code>) and divide (<code>/</code>).  If it is <code>-</code> then it heads right, again skipping characters so that it executes <code>&amp;"-"$-</code> resulting in the number being input (<code>&amp;</code>) the <code>-</code> character being pushed onto the stack then discarded (<code>"-"$</code>) and then the subtraction being calculated (<code>-</code>).  The control is then redirected back to the main path.</p>
</div>
<div id="pu19" class="pu"><h3>C++0x <strike>205</strike> <strike>203</strike> <strike>198</strike> 194 chars</h3>
<pre><code>#include&lt;iostream&gt;
#define P [](F l,F r){return l
int main(){typedef float F;F r,v,(*a[])(F,F)={P*r;},P+r;},0,P-r;},0,P/r;}};std::cin&gt;&gt;r;for(char o;std::cin&gt;&gt;o&gt;&gt;v;)r=a[o-42](r,v);std::cout&lt;&lt;r;}
</code></pre>
<p>Nicely formatted:</p>
<pre><code>#include&lt;iostream&gt;

int main()
{
    float r,v;
    float (*a[])(float,float)   ={  [](float l,float r){return l*r;},
                                    [](float l,float r){return l+r;},
                                    0,
                                    [](float l,float r){return l-r;},
                                    0,
                                    [](float l,float r){return l/r;}
                                 };

    std::cin&gt;&gt;r;
    for(char o;std::cin&gt;&gt;o&gt;&gt;v;)
        r=a[o-42](r,v);

    std::cout&lt;&lt;r;
}
</code></pre>
</div>
<div id="pu20" class="pu"><h2>Python (156)</h2>

<pre><code>from operator import*
while 1:
 l=raw_input().split();f=float
 while len(l)&gt;2:l[:3]=({'*':mul,'/':div,'+':add,'-':sub}[l[1]](f(l[0]),f(l[2])),)
 print l[0]
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/568/">568</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




