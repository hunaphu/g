<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::169555</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>040</td><td>Japt</td><td>180731T162227Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169661#169661">Shaggy</a></td></tr>
<tr d-ix="1"><td>150</td><td>Excel VBA</td><td>180731T153655Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169656#169656">Taylor R</a></td></tr>
<tr d-ix="2"><td>546</td><td>Java</td><td>180802T170900Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169860#169860">Magic Oc</a></td></tr>
<tr d-ix="3"><td>009</td><td>Emacs Lisp</td><td>180802T154730Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169850#169850">Winny</a></td></tr>
<tr d-ix="4"><td>004</td><td>Bash+acpi</td><td>180730T221047Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169584#169584">algmyr</a></td></tr>
<tr d-ix="5"><td>028</td><td>PowerShell</td><td>180730T201031Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169557#169557">Ad&#225;</a></td></tr>
<tr d-ix="6"><td>078</td><td>C win32</td><td>180801T072110Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169691#169691">Felix Pa</a></td></tr>
<tr d-ix="7"><td>050</td><td>JavaScript browser</td><td>180731T105011Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169626#169626">Night2</a></td></tr>
<tr d-ix="8"><td>016</td><td>Bash</td><td>180730T202329Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169562#169562">Okx</a></td></tr>
<tr d-ix="9"><td>133</td><td>QPython for Android</td><td>180731T194414Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169673#169673">Sundar R</a></td></tr>
<tr d-ix="10"><td>080</td><td>Python 3.6 + psutil</td><td>180730T202233Z</td><td><a href="https://codegolf.stackexchange.com/questions/169555/display-percent-battery-remaining/169561#169561">mbomb007</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>60</s> 40 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ox`nàÀÓ&amp;.getBÂjry().È(x=&gt;O.q(L*x.¤vel))
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=T3hgbuDA0yYuZ2V0QsJqcnkoKS7IASh4PT5PLnEoTCp4LqR2ZWwpKQ" rel="nofollow noreferrer">Test it</a></p>
</div>
<div id="pu1" class="pu"><h1>Excel VBA, 150 bytes</h1>
 
<p>Restricted to 32-Bit Windows Installs of office, because the windows Kernel32 call is not 64-bit pointer safe.</p>
<p>Outputs to the cell <code>A1</code> on the ActiveSheet.</p>
<pre class="lang-vb prettyprint-override"><code>Declare Sub GetSystemPowerStatus Lib&quot;kernel32&quot;(f As t)
Type t
i As Integer
b As Byte
End Type
Sub d
Dim e As t
GetSystemPowerStatus e
[A1]=e.b
End Sub
</code></pre>
<p>-26 bytes thanks to flexible output</p>
<p>-7 bytes thanks to <a href="https://codegolf.stackexchange.com/users/17602/neil">@Neil</a> for using an Int instead of 2 bytes</p>
</div>
<div id="pu2" class="pu"><h1>Java, 546 bytes (Windows XP or Higher)</h1>
<p>The powercfg utility came into play for WindowsXP, I have no idea what utilities were available prior to this. I must also be run as administrator. This is god-awful and I didn't make an extreme golfing attempt...</p>
<pre><code>import java.io.*;import java.util.Scanner;public class J {public static void main(String[] args)throws Exception{Process p=Runtime.getRuntime().exec(&quot;powercfg energy&quot;);p.waitFor();Scanner s=new Scanner(new File(&quot;C:\\windows\\system32\\energy-report.html&quot;));String x;double a=0,b=0;while(s.hasNextLine()){x=s.nextLine();if(x.contains(&quot;Design Capacity&quot;)){s.nextLine();b=Integer.parseInt(s.nextLine().replaceAll(&quot;\\D+&quot;,&quot;&quot;));}else if(x.contains(&quot;Last Full Charge&quot;)){s.nextLine();a=Integer.parseInt(s.nextLine().replaceAll(&quot;\\D+&quot;,&quot;&quot;));}}System.out.print(a/b*100);}}
</code></pre>
<p>Formatted / commented...</p>
<pre><code>import java.io.*;
import java.util.Scanner;

public class J {
    public static void main(String[] args) throws Exception {
        Process p = Runtime.getRuntime().exec(&quot;powercfg energy&quot;); // Run CMD sys32 app.
        p.waitFor();                                              // Wait for it.
        Scanner s = new Scanner(new File(
                &quot;C:\\windows\\system32\\energy-report.html&quot;));    // Read output.
        String x;
        double a = 0, b = 0;
        while (s.hasNextLine()) {
            x = s.nextLine();
            if (x.contains(&quot;Design Capacity&quot;)) {                   // Find max capacity.
                s.nextLine();
                b = Integer.parseInt(s.nextLine().replaceAll(&quot;\\D+&quot;, &quot;&quot;));
            } else if (x.contains(&quot;Last Full Charge&quot;)) {           // Find current capacity.
                s.nextLine();
                a = Integer.parseInt(s.nextLine().replaceAll(&quot;\\D+&quot;, &quot;&quot;));
            }
        }
        System.out.print(a / b * 100); // Calculate %.
    }
}
</code></pre>
<p>Honestly I was more interested to see if it was even possible in Java.</p>
</div>
<div id="pu3" class="pu"><h1>Emacs Lisp, 9 bytes</h1>



<pre><code>(battery)
</code></pre>

<p>Shows current battery status in mini-buffer at the bottom (or to stdout when using <code>--batch</code>) in format such as: <code>Power N/A, battery Unknown (99.1% load, remaining time N/A)</code>.</p>

<p>Should work on Windows, OSX, BSD , and Linux. </p>
</div>
<div id="pu4" class="pu"><h1>Bash+acpi, <s>43</s> 4 bytes</h1>

<h2>New rules</h2>

<pre><code>acpi
</code></pre>

<p>output on form</p>

<pre><code>Battery 0: Charging, 92%, 00:05:37 until charged
</code></pre>

<p>not sure if the rule change makes things more interesting, couldn't you dump any text that contains all strings 0 to 100 which would be valid output? Seems to lose the original intent if so.</p>

<h2>Old rules</h2>

<pre><code>set `acpi`;echo Remaining battery is ${4%,}
</code></pre>

<p>output on form</p>

<pre><code>Remaining battery is 92%
</code></pre>

<p>Don't ask me why set works like this, but it does.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="noreferrer">PowerShell</a>, 28 bytes</h1>



<p>-26 (!) thanks to AdmBorkBork. Previous version -3 thanks to colsw.</p>

<pre class="lang-powershell prettyprint-override"><code>((gwmi win32_battery)|% e*g)
</code></pre>

<p><a href="https://i.sstatic.net/Haocv.png" rel="noreferrer"><img src="https://i.sstatic.net/Haocv.png" alt="enter image description here"></a></p>

<p><code>gwmi</code> is short for <code>Get-WmiObject</code></p>

<p><code>|%</code> takes the pattern <code>e*g</code> and finds the only matching property; <code>estimatedChargeRemaining</code></p>
</div>
<div id="pu6" class="pu"><h1>C (win32, gcc i686-w64-mingw32), 78 bytes</h1>
<pre class="lang-c prettyprint-override"><code>#include&lt;windows.h&gt;
main(s){GetSystemPowerStatus(&amp;s);printf(&quot;%hhu&quot;,s&gt;&gt;16);}
</code></pre>
<p>Abuses the win32 API by letting <code>GetSystemPowerStatus()</code> write &quot;somewhere&quot; on the stack, the interesting member is in the third byte, according to the <a href="https://docs.microsoft.com/de-de/windows/desktop/api/winbase/ns-winbase-_system_power_status" rel="noreferrer"><code>SYSTEM_POWER_STATUS</code> struct</a>.</p>
<p>Unfortunately, the <code>#include</code> seems to be needed, probably because of calling conventions.</p>
<p>Example output:</p>
<pre><code>&gt; bat.exe
90
</code></pre>
<p>Displays <code>255</code> on systems without a battery.</p>
</div>
<div id="pu7" class="pu"><h1>JavaScript (browser), <s>78</s> <s>77</s> 50 bytes</h1>
<p>(-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/38454/benoit-esnard">Benoit Esnard</a>)</p>
<p>(-27 bytes since the output format is flexible now)</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>navigator.getBattery().then(b=&gt;alert(b.level*100))</code></pre>
</div>
</div>
</p>
<h1>JavaScript (browser), 46 bytes, by returning a promise</h1>
<p>(Suggested by <a href="https://codegolf.stackexchange.com/users/58974/shaggy">Shaggy</a>, requires a header and footer)</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
_=&gt;navigator.getBattery().then(b=&gt;b.level*100)
f().then(alert)</code></pre>
</div>
</div>
</p>
<hr />
<p><strong>Note:</strong> Only works on Google Chrome &gt;= 38 (desktop and Android) or any other browser that supports <a href="https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API" rel="noreferrer">Battery API</a>. FireFox has removed this API due to privacy concerns.</p>
<p><strong>Example on Android (old output format):</strong></p>
<p><a href="https://i.sstatic.net/jN9Zi.png" rel="noreferrer"><img src="https://i.sstatic.net/jN9Zi.png" alt="enter image description here" /></a></p>
<p><strong>Example on a Windows laptop (old output format):</strong></p>
<p><a href="https://i.sstatic.net/7jdq6.png" rel="noreferrer"><img src="https://i.sstatic.net/7jdq6.png" alt="enter image description here" /></a></p>
</div>
<div id="pu8" class="pu"><h1>Bash, <s>70</s> <s>67</s> <s>50</s> <s>46</s> <s>43</s> 16 bytes</h1>

<pre><code>`&lt;/*/*/*/B*/c*y`
</code></pre>

<p>Outputs: <code>&lt;battery 0-100&gt;: command not found</code></p>

<p>Reads the file <code>/sys/class/power_supply/BAT1/capacity</code>.</p>

<p>Tested using Ubuntu 18.04 on a LENOVO ideapad 500.</p>

<p>Takes a while (since it searches the entire filesystem) - but it saves a byte!</p>

<h3>Old answer:</h3>

<pre><code>echo Remaining battery is `&lt;/*/*/*/B*/c*y`%
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="http://www.qpython.org/index.html" rel="nofollow noreferrer">QPython for Android</a>, 133 bytes</h1>

<pre><code>from androidhelper import*
d=Android()
d.batteryStartMonitoring()
d.dialogCreateAlert(str(d.batteryGetLevel()[1])+"%")
d.dialogShow()
</code></pre>

<p><a href="https://i.sstatic.net/Oxy2E.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/Oxy2E.png" alt="Code screen"></a></p>

<p><a href="https://i.sstatic.net/AK1BG.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/AK1BG.png" alt="Output screen"></a></p>

<p>The <code>+"%"</code> isn't strictly necessary since it uses the newer more flexible output format anyway, but it makes for slightly nicer output at just +4 bytes. </p>
</div>
<div id="pu10" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3.6</a> + <a href="https://pypi.org/project/psutil/" rel="noreferrer"><code>psutil</code></a>, 80 bytes</h1>



<pre class="lang-python prettyprint-override"><code>import psutil
print(f"Remaining battery is {psutil.sensors_battery().percent}%")
</code></pre>

<p><a href="https://tio.run/##LcoxCoAwDADA3VcUQWiXLv7ED0iVqAGbhiQORXx7HXS@42pHobE1zFzEHOtleHYsSOa3foKckJB2tyQzkOpQ3f2lqEBaROeffIgMsgLZM/ShtRc" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>If the machine has no battery (like on TIO), the program will throw an error, because <code>psutil.sensors_battery()</code> returns <code>None</code>.</p>

<p>This requires Python 3.6 for <a href="https://www.python.org/dev/peps/pep-0498/" rel="noreferrer">string interpolation</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/169555/">169555</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




