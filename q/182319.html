<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::182319</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>085</td><td>Dyalog APL</td><td>250804T224405Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/282956#282956">Aaron</a></td></tr>
<tr d-ix="1"><td>018</td><td>Uiua</td><td>250721T030636Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/282722#282722">nyxbird</a></td></tr>
<tr d-ix="2"><td>280</td><td>Python3</td><td>250720T174220Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/282718#282718">Ajax1234</a></td></tr>
<tr d-ix="3"><td>038</td><td>Jelly</td><td>190401T230139Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/182524#182524">Jonathan</a></td></tr>
<tr d-ix="4"><td>191</td><td>TSQL query</td><td>190328T155837Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/182384#182384">t-clause</a></td></tr>
<tr d-ix="5"><td>059</td><td>Jelly</td><td>190328T132056Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/182376#182376">Nick Ken</a></td></tr>
<tr d-ix="6"><td>113</td><td>JavaScript ES7</td><td>190328T020921Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/182356#182356">Arnauld</a></td></tr>
<tr d-ix="7"><td>220</td><td>Python 2</td><td>190327T220350Z</td><td><a href="https://codegolf.stackexchange.com/questions/182319/terrain-reachability/182345#182345">Chas Bro</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Dyalog APL, ⎕IO←0, 85 chars</h1>
<pre><code>{f[⊂{⊃⍸c∊⊂⍵}¨1↓⍺]≤⊃⍺⊣f←d{⍺⌊.+⍵}⍣≡d←∘.{⍺≡⍵:0⋄1≥|⍺-⍥{{⍺+⍵×0J1}/⍵}⍵:m[⊂⍵]⋄101}⍨c←,⍳⍴m←⍵}
</code></pre>
<p>Expects the speed, start coords, and end coords as a triplet on the left and the terrain map (matrix) on the right with unreachables as 101.</p>
<p>Explanation:</p>
<pre><code>{f[⊂{⊃⍸c∊⊂⍵}¨1↓⍺]≤⊃⍺⊣f←d{⍺⌊.+⍵}⍣≡d←∘.{⍺≡⍵:0⋄1≥|⍺-⍥{{⍺+⍵×0J1}/⍵}⍵:m[⊂⍵]⋄101}⍨c←,⍳⍴m←⍵}
                                                                                m←⍵  Save the input map for later
                                                                           c←,⍳⍴     Ravel the indices of its rank, store in c for later; i.e. a 2x3 matrix would give (0 0) (0 1) (0 2) (1 0) (1 1) (1 2)
                                 d←∘.{                                   }⍨          Apply to both sides of this outer product, storing in d
                                      ⍺≡⍵:0                                          For each combo of indices
                                                                                         If its the same index, return 0 (distance to myself is 0)
                                            1≥|⍺-⍥{{⍺+⍵×0J1}/⍵}⍵:m[⊂⍵]                   If its one of my four neighbors, return the value from the original map
                                                                       101               Else return 101 (unreachable)
                     f←d{⍺⌊.+⍵}⍣≡d                                                   Do a minimum-sum inner product on this distances map until the results converge, store in f
                 ≤⊃⍺                                                                 Test if my speed is greater than
 f[             ]                                                                        the final value in my distances map at
             1↓⍺                                                                         the start and end coordinates
   ⊂{⊃⍸c∊⊂⍵}¨                                                                            converted to their indices on the distances map
</code></pre>
<p>I kinda liked this for finding the orthogonal neighbors.  Left and right args are coordinates (a pair of numbers), so to check that they are neighbors without worrying about bounds, I convert to complex numbers:</p>
<pre><code>1≥|⍺-⍥{{⍺+⍵×0J1}/⍵}⍵

1≥|                    The magnitude of the number is less than/equal to 1
   ⍺-⍥{           }⍵   their difference over the slight modification of
                /⍵         between the elements of the argument
       {⍺+⍵×0J1}           add left to right multiplied by i, effectively, making it a complex number
       
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, 18 bytes</h1>
<pre><code>≥◌path(⤚𝄐⬚∞⊡⧋+A₂)≍
</code></pre>
<p>Takes inputs as <code>start end grid speed</code><br />
<a href="https://www.uiua.org/pad?src=0_17_0-dev_1__IyBFeHBlcmltZW50YWwhCmYg4oaQIOKJpeKXjHBhdGgo4qSa8J2EkOKsmuKInuKKoeKniytB4oKCKeKJjQoKR-KCgSDihpAgW1sxIDEgMiAxIOKInl0KICAgICAgWzEgMiAyIDEgMV0KICAgICAgWzIgMSAxIDIgMV0KICAgICAgW-KIniDiiJ4g4oieIDEgMl1dCuKNpOKkmeKJjTEgZiAyXzMgMF8xIEfigoEgNQrijaTipJniiY0wIGYgMl8zIDBfMSBH4oKBIDQK4o2k4qSZ4omNMCBmIDBfMSAyXzMgR-KCgSA1CgpH4oKCIOKGkCBbWzMgNiAxIDEg4oieIDQgMSAyIDEg4oieXQogICAgICBbNSAxIDIgMiAxIDEgMSDiiJ4gMSA1XQogICAgICBbMiAxIDEgMSAyIDEgMSAxIOKIniAxXQogICAgICBbMiAxIDEgMyAxIDIgMyA0IDEgMl0KICAgICAgWzEgMSAyIDEgMSA0IDEgMSAxIDJdCiAgICAgIFszIDIgMyA1IDYgMSAxIOKIniAxIDRdXQrijaTipJniiY0xIGYgM180IDJfMSBH4oKCIDcK4o2k4qSZ4omNMCBmIDNfNCAyXzEgR-KCgiA0CuKNpOKkmeKJjTEgZiAxXzggMl83IEfigoIgNwoKR-KCgyDihpAgW1syIDEgMSAyXQogICAgICBbMiAzIDMgMV1dCuKNpOKkmeKJjTAgZiAwXzAgMV8xIEfigoMgMwrijaTipJniiY0xIGYgMV8xIDBfMCBH4oKDIDMK" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>path(   # find the cheapest path:
  ⧋+A₂  #   by choosing neighbors
  ⤚𝄐⬚∞⊡ #   and picking from the grid (oob-&gt;infinity)
)≍      # ending at the given point
≥◌      # is the speed ≥ the cost?
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Python3, 280 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b,s,e,m):
 d={(x,y):int([0,v][v!='X'])for x,r in E(b)for y,v in E(r)}
 q=[(*s,m,[s])]
 for x,y,m,p in q:
  if(x,y)==e:
   if m&gt;=0:return 1
   continue
  q+=[(*V,m-d[V],p+[V])for X,Y in[(1,0),(-1,0),(0,1),(0,-1)]if d.get(V:=(x+X,y+Y))and V not in p and m-d[V]&gt;=0]
</code></pre>
<p><a href="https://tio.run/##jZLBjpswEIbP9VNMc4ndTFY4JN1VJPe21x4jVhRVSTEt0mKIcaKgqs@eeozJ9tBIK4Ttmfn@34NNN7hfrUmfOnu9PittTo22e6dZqSuo@AF71NiILYNS/eYXHMS2No7nCZ6L/PxRzbN5IarWwgUt1Aae@SGEA57H0Io/DI4q5596bDDvC1EwGAWDT3REHb091FWwV0pT5ENovqhka7U7WQOScj9a42pz0n59XJDlDptlme8K7BZ@DBtn@OItcy4xEciX45SgDONSisIblw8/teO7reKXRYbD4kWIvSlhB6Z11E8HFI7Wvofi2ktQMJvNmAQJK/9mjGZaSRZGWrMM6PFrRmy/iqIUPgckg/VNvoGbQahI2LAp@icbc2nIpqOevTHrSeH3oPrmtpOvjU2ksYnYJSPM24Ui3bFrvx/avS157y/5QzztvH7ou9facRGuqqZDqepXpy3/2hqN0Mf6/JuZC3@jrLP0W1T8zc6fOPAVQkpzgkDxRoh3kuv7ZCQmxf89V0Sk5DOSpHh8N7m@T0qEp0g@3vWcviSJCvJM75ORmBSevP4F" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 38 bytes</h1>

<pre><code>ạƝṢ€Ḅ’¬Ạ
ŒṪ’ḟŒPŒ!€ẎW€j¥@€ÇƇḊ€‘œị⁸§Ṃ’&lt;⁵
</code></pre>

<p>An extremely inefficient full program accepting the terrain (with unvisitables as 101) then the start and end co-ordinates then the speed.</p>

<p><strong><a href="https://tio.run/##y0rNyan8///hroXH5j7cuehR05qHO1oeNcw8tObhrgVcRyc93LkKyHu4Y/7RSQFHJymC5Hf1hQOprENLHYDU4fZj7Q93dAFZjxpmHJ38cHf3o8Ydh5Y/3NkE1GbzqHHr////o6MVFBQMdYCEEYgwjOXSgYkYGoAJJBGocGwsUBuQaRSroxAN1GYIFDAHAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (not much point trying most of the test cases!)</p>

<h3>How?</h3>

<p>Creates a list of all permutations of each of the power-set of "all terrain locations except the start &amp; end", surrounds each of these with the start &amp; end, filters to those which make only orthogonal moves of distance one, drops the start from each, indexes back into the terrain, sums each, takes the minimum, subtracts one and tests that this is less than the speed.</p>
</div>
<div id="pu4" class="pu"><h1>TSQL query, <s>205</s> 191 bytes</h1>
<p>Input is a table variable @t</p>
<p>@x=start xpos, @y=start ypos
@i=end xpos  , @j=end ypos
@ =speed</p>
<pre class="lang-sql prettyprint-override"><code>DECLARE @t table(x int,y int,v int)
INSERT @t
values
(0,0,1),(0,1,1),(0,2,2),(0,3,1),(0,4,null),
(1,0,1),(1,1,2),(1,2,2),(1,3,1),(1,4,1),
(2,0,2),(2,1,1),(2,2,1),(2,3,2),(2,4,1),
(3,0,null),(2,1,null),(2,2,null),(2,3,1),(2,4,2)

DECLARE @x INT=2,@y INT=3,@i INT=0,@j INT=1,@ INT=5;

WITH C as(SELECT @y f,@x r,@ s
UNION ALL
SELECT f+a,r+b,s-v FROM C
JOIN(values(1,0),(0,1),(-1,0),(0,-1))x(a,b)ON
s&gt;0JOIN @t
ON f+a=x and r+b=y)SELECT
max(iif(S&gt;=0and f=@j and r=@i,1,0))FROM c
</code></pre>
<p><strong><a href="https://data.stackexchange.com/stackoverflow/query/1019423/terrain-reachability" rel="nofollow noreferrer">Try it online</a></strong> ungolfed version</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 59 bytes</h1>

<pre><code>+2¦µ_2ịæ.Ø½œị$Ʋ+5ịƲ$4¦01Ñḣ3Ḋ⁼/Ɗ?ḣ2=/ẸƊoF&lt;0ẸƊƊ?
çⱮØ.,U$;N$¤Ẹ
</code></pre>

<p><a href="https://tio.run/##zVI9S8NQFN37Kzpk66NN3kcr1tKtbjoJSigOmkVaIrYObtWlECd16aCTUgdFsKA0fizv0fyP5I/Em/tKElonXUp49953zr3nHh45cjqdszguUTmWb/s0/LxU47Iaye/ZDdRGMCkJyMHE4HJsWuoqnN6zcOpF51@VwGvCjTYq4cc08NzWhokFwAX1GL2@qFGZ7Bj1LUM@ABGH/pOIBre70eBO@o1mdPFsmabZy3Zt1oGW760Tt7tehK564mZ2HfqjwEuoYt9FmC3AvWPHOUSGJzJaZfu0f@B2HS2khhqEuqCGsHkvjm3b5kS0iU0Jg2gSq00EseCjSQRrWNIMyhFZIBSGl5X4/5RQQ@v92VMVbpAZ4SgFgjXCSBWnsI/nx0VOOV0lUmCB0FeGFcuE5pGnQwyPyG@10M8v7vjqubPIGrqrrdbbUUwm0Rbh6VgqkYww/HnmXcjr3uWu9g8" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Not terribly fast; tries all paths until the speed units are exhausted, even retracing its steps. However, this avoids the need to check whether spaces are visited. Input is provided as <code>[nrows, ncols],[start_row, start_col],[end_row, end_col],speed,flattened matrix column-major</code></p>

<h3>Explanation</h3>

<p>Helper link  </p>

<pre><code>+2¦                                       | add the right argument to the second item in the left argument (current location)
   µ                                      | start a new monadic chain with the modified left argument
                    4¦                    | for the fourth item (speed)...
    _                                     |   subtract...
                 ịƲ$                      |     the item located at...
     2ịæ.Ø½œị$Ʋ                           |       the dot product of the current position and (number of columns,
                                          |       right-padded with 1)
               +5                         |       plus five
                                        ? | Now, if...
                                       Ɗ  |   next three as a monad
                           ḣ2=/ẸƊ         |   either current row or current column are equal to nrows/ncolumns respectively
                                 o        | or
                                  F&lt;0ẸƊ   |   any value is negative
                 0                        | return zero
                          ?               | else if...
                   ḣ3Ḋ⁼/Ɗ                 | the second and third items (current and end pos) are equal
                  1                       | return 1
                   Ñ                      | else pass the current list back to the main link
</code></pre>

<p>Main link</p>

<pre><code>ç             | call the helper link with the current list...
 Ɱ            |   and each of
  Ø.,U$;N$¤   |   [0,1],[1,0],[0,-1],[-1,0]
           Ẹ  | Check if any are true
</code></pre>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES7), <s> 116 </s> 113 bytes</h1>
<p>Takes input as <code>(matrix)([endRow, endCol])(speed, startRow, startCol)</code>. Expects large values for unreachable squares. Returns <span class="math-container">\$0\$</span> or <span class="math-container">\$1\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>m=&gt;e=&gt;o=g=(s,y,x)=&gt;m.map((r,Y)=&gt;r.map((v,X)=&gt;r[s&lt;v|(x-X)**2+(y-Y)**2-1||g(s-v,Y,X,r[X]=1/0),X]=v),o|=y+[,x]==e)|o
</code></pre>
<p><a href="https://tio.run/##fVLBjoIwFLzzFb3Z6kNtC@smu/WyZ@8YwoG4aHYD1lCXaMK/s9SiFkO5lLZvZpj3pr9plapd@XM6@0f5nTV70RRinYm1FAeBFVzhQsS6mBfpCeMStu2hNIcKIn2I1WdV44sfkemUzfDV3@qNT@v6gJVfwRYiKOMoEXSxJNB@KwKyFtdZDJdEiIzUstkggWIPoRghCqhbWLdreQlYRWYX2@VetK6eCFNsJW463XJHJF7y4Xk7eVQyz@a5PODJV6oyRCekd7vHG4JjzU4IDkFLc0LQYoHO5V/mhgY2dJ/magirEUZWs2ysZ42Fa8NvdoddJ8HYvMJ@8WVCtD@O0DFIOk51sHifyl@89hId@kMwZOLO4n3d0DUco@SKmQ3GzEx2K9DawWjM7BHzEzoS88rItqbeLVk7Zebo99mqGaurIz7YETU2@e2FLcdtaoTB0sdr1Dabfw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>m =&gt;                        // m[] = matrix
e =&gt;                        // e[] = target coordinates
  o =                       // o   = success flag, initialized to a non-numeric value
  g = (                     // g   = recursive depth-first search function taking:
    s,                      //   s    = speed
    y, x                    //   y, x = starting coordinates
  ) =&gt;                      //
    m.map((r, Y) =&gt;         // for each row r[] at position Y in m[]:
      r.map((v, X) =&gt;       //   for each value v at position X in r[]:
        r[                  //     this statement ultimately updates r[X]:
          s &lt; v |           //       abort if s is less than v
          (x - X) ** 2 +    //       or the quadrance between (x, y)
          (y - Y) ** 2 - 1  //       and (X, Y) is not equal to 1
          || g(             //       otherwise, do a recursive call to g:
               s - v,       //         subtract v from s
               Y, X,        //         pass (Y, X) as the new coordinates
               r[X] = 1 / 0 //         temporarily make this cell unreachable
             ),             //       end of recursive call 
          X                 //       restore r[X] ...
        ] = v               //     ... to its original value
      ),                    //   end of inner map()
      o |= y + [, x] == e   //   set the flag o if (y + ',' + x) matches (e + '')
    ) | o                   // end of outer map(); return o
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 220 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(m,a,w,h,r,c,R,C):
 T=[w*[999]for _ in' '*h];T[r][c]=0;P=[(r,c)];j,k=1,0
 for u,v in P:exec"U,V=u+j,v+k;j,k=-k,j\nif h&gt;U&gt;-1&lt;V&lt;w:q=T[U][V];T[U][V]=min(T[u][v]+m[U][V],q);P+=[(U,V)]*(q&gt;T[U][V])\n"*4
 return a&gt;=T[R][C]
</code></pre>

<p><a href="https://tio.run/##zZJNb@IwEIbP@FeMeokN0xUhoSzQcKnErRKqACEZa5UFI76ShiSE7q9nx4mB3Va99LKrWLJnPO8zH3HyK1@/xq3zealXsOIRhnjCNaa4wBd8Ej0G40Ce6rLb7arVawo/YBM74NTXqj@WqZILFTT7o0ByUgjV3@IucLHJwMQesaBoGPX0m17cTXAaHBtbLBq7Mux@h9t5vFnBejAZ3LuP08dT7xCM5UTJqYGXexBtYj6WRyUL1YgqHx5Ef9SglEQUqs4PAxss5vFd3WeQ6vyYxhAOiPai5JM6Pwf7MPq5DCHryShMuLWKHrUFVEIRBM7MAb3PNFWc80Jg/i1L9pucC1H2kptOMutz5rEjFDMjG/IMCyy7R24mhvot0YtcL2l2tQgCeOYky9NNQihWS3VGPjPoAvc65pFsKlGdxHXqrJakVAY1kiFceIwNueM4zAW4LWO1yuUZq9qr5Zs7rwwzFkmxg7yJLhXqYUvgOD1qcaO6RHFhxsxuToZmvWwG5qOzobSRt9ATlgVfxfgIxAECAZHAoIYh/YCvsKB9g1ygf8M8eCilM/Cv2DZcweWNC212sf7wWp9Xer1Kz24x/kVBOcx9@5rJraYOHSrKQ/Btce670f/L0vwPpf1nc3MRvtviOu8fm30MzKgpS6nxqofQFJX2Y0OfiWzwRWwTnX8D" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Takes an array <code>m</code> of integers, with <code>'X'</code> as a larger-than-100 value;, a speed <code>a</code>, <code>m</code> having width <code>w</code> and height <code>h</code>; and returns whteher we can start at the zero-indexed row/column cell <code>(r,c)</code> and get to the final cell <code>(R,C)</code>.</p>

<p>The algorithm is a modified flood-fill.
Slightly ungolfed code:</p>

<pre class="lang-python prettyprint-override"><code>def f(m,a,w,h,r,c,R,C):
 T = [w*[999]for _ in ' '*h] # make an array same size as m, with all 
                             #   values 999, whose values will represent
                             #   the cost of getting to each cell.
 T[r][c] = 0                 # set the starting location to a cost of 0
 P = [(r,c)]                 # initialize a set of cells whose neighbors'
                             #   cost might need to be be updated
 j,k = 1,0                   # and also j,k which will take on values:
                             #  (1,0), (0,1), (-1,0), (0,1), used to 
                             #  probe orthogonal neighbors
 for u,v in P:               # scan the cells in P
    for _ in '1234':         # look at each of 4 orthogonal positions
        U,V = u+j,v+k        # U and V get the indexes of a neighbor 
                             #   of the current cell.
        j,k = -k,j           # this 'rotates' the j,k pairing.
        if h&gt;U&gt;-1&lt;V&lt;w:       # if the coordinates are in bounds...
            q = T[U][V]      # save the current 'cost' of getting to cell (U,V)
                             # see if we can reduce that cost, which is calculated 
                             #   by taking the cost of the currently scanned cell 
                             #   + the value from m for the neighbor cell. 
            T[U][V] = min(T[u][v]+m[U][V] ,q)
                             # if we can reduce the cost, add the neighbor
                             #   to P because **it's** neighbors might,
                             #   in turn, need updating.
            P += [(U,V)]*(q&gt;T[U][V])
 return a&gt;=T[R][C]           # return if speed is enough for the cost.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/182319/">182319</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




