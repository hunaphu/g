<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::159895</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>127</td><td>Python 3</td><td>180324T162356Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/160171#160171">Vincent</a></td></tr>
<tr d-ix="1"><td>228</td><td>Java 8</td><td>180322T133908Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159928#159928">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>179</td><td>VBA</td><td>180604T003814Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/166093#166093">Ben</a></td></tr>
<tr d-ix="3"><td>175</td><td>Julia 0.6</td><td>180329T191915Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/160727#160727">niczky12</a></td></tr>
<tr d-ix="4"><td>159</td><td>PHP 7.1</td><td>180322T221508Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/160002#160002">Chris Fo</a></td></tr>
<tr d-ix="5"><td>204</td><td>Haskell</td><td>180324T173830Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/160177#160177">puhlen</a></td></tr>
<tr d-ix="6"><td>235</td><td>F#</td><td>180323T180447Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/160090#160090">Ciaran_M</a></td></tr>
<tr d-ix="7"><td>141</td><td>C gcc</td><td>180322T124547Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159921#159921">user7740</a></td></tr>
<tr d-ix="8"><td>087</td><td>Perl 5</td><td>180322T122328Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159918#159918">Ton Hosp</a></td></tr>
<tr d-ix="9"><td>174</td><td>Batch</td><td>180322T205841Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159993#159993">Neil</a></td></tr>
<tr d-ix="10"><td>131</td><td>Python 3</td><td>180322T103330Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159903#159903">hyperneu</a></td></tr>
<tr d-ix="11"><td>049</td><td>05AB1E</td><td>180322T102921Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159902#159902">Emigna</a></td></tr>
<tr d-ix="12"><td>142</td><td>C gcc</td><td>180322T145105Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159941#159941">nwellnho</a></td></tr>
<tr d-ix="13"><td>180</td><td>Java JDK 10</td><td>180322T104252Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159906#159906">Olivier </a></td></tr>
<tr d-ix="14"><td>091</td><td>Ruby</td><td>180322T104019Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159905#159905">Cristian</a></td></tr>
<tr d-ix="15"><td>122</td><td>JavaScript ES6</td><td>180322T102825Z</td><td><a href="https://codegolf.stackexchange.com/questions/159895/alice-and-bob-have-a-fight/159901#159901">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 127 bytes</h1>
<p><em>This is an improvement on <a href="https://codegolf.stackexchange.com/a/159903/20064">@HyperNeutrino answer</a> that wouldn't fit in a comment. See the explanation below.</em></p>

<pre class="lang-python prettyprint-override"><code>x,y=&quot;AB&quot;
s=id(0)
X=Y=10
p=print
while X&gt;0:p(x,&quot;a&quot;,y);s=s**7%~-2**67;d=s%6+1;p(x,&quot;r&quot;,d);Y-=d;p(y,&quot;h&quot;,Y);x,y,X,Y=y,x,Y,X
p(y,&quot;w&quot;)
</code></pre>
<p><a href="https://tio.run/##HY1BCsIwFAX3OYV8KDTxFVKFFgxf0FMkSyFCClJDU2iy8eqxdDnMwMSyhu98rTWjMD2eJBJPvtVSWHbcaxE5LtO8ii1Mn/fJ3vUtthn0IhRpEielxubXXZQaRuM5NcO5N0exELw0rmO/cwEFgpNm38DCcUGGgxWH2kjW@gc" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<hr />
<h2>An epic quest for a shorter python dice roll</h2>
<p><strong>TL;DR: It's possible to shave 4 bytes off the standard python dice roll by using RSA encryption.</strong></p>
<p>I wanted to see if the standard python dice roll (<strong>32 bytes</strong>) could be shortened a bit:</p>
<pre class="lang-python prettyprint-override"><code>from random import*;randint(1,6)
</code></pre>
<p>In particular, <code>id(x)</code> is quite convenient to bring some non-deterministic value into the program. My idea then was to somehow hash this value to create some actual randomness. I tried a few approaches, and one of them paid off: <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)#Encryption" rel="nofollow noreferrer">RSA encryption</a>.</p>
<p>RSA encryption, due to its simplicity, only requires a few bytes: <code>m**e%n</code>. The next random value can then be created by encrypting the previous one. Assuming the <code>(e,n)</code> key is available, the dice roll can be written with <strong>22 bytes</strong>:</p>
<pre class="lang-python prettyprint-override"><code>s=id(0);s=s**e%n;s%6+1
</code></pre>
<p>That means we have about 10 bytes to define a valid RSA key. Here I got lucky. During my experiments, I started to use the <a href="https://en.wikipedia.org/wiki/Mersenne_prime" rel="nofollow noreferrer">Mersenne prime</a> <strong>M67</strong> only to realize later on that <a href="https://en.wikipedia.org/wiki/Mersenne_prime#History" rel="nofollow noreferrer">Mersenne made a mistake</a> including <strong>M67</strong> in his list. It turns out to be the product of <code>p=193707721</code> and <code>q=761838257287</code>. I had found my modulus:</p>
<pre class="lang-python prettyprint-override"><code>n=~-2**67
</code></pre>
<p>Now, the exponent and the <a href="https://en.wikipedia.org/wiki/Carmichael_function" rel="nofollow noreferrer">Charmichael totient</a> <code>lcm(p-1,q-1)</code> need to be coprime. Luckily again, the first prime number that do not divide the totient of n is only one digit long: 7. The dice roll can then be written using <strong>28 bytes</strong> (4 bytes less than the standard approach):</p>
<pre class="lang-python prettyprint-override"><code>s=id(0);s=s**7%~-2**67;s%6+1
</code></pre>
<p>One good thing with <strong>M67</strong> is that the random value generated has 66 bits, which is more than the usual 64 bits RNG. Also, the use of RSA makes it possible to go back in time by decrypting the current value multiple times. Here are the encrypting and decrypting keys:</p>
<pre class="lang-python prettyprint-override"><code>Encryption: (7,                    147573952589676412927)
Decryption: (42163986236469842263, 147573952589676412927)
</code></pre>
<p>Interestingly, this seems to produce a decent RNG according to the <a href="https://en.wikipedia.org/wiki/Diehard_tests" rel="nofollow noreferrer">diehard test suite</a>:</p>
<pre class="lang-shell prettyprint-override"><code>± echo -e &quot;import os;s=id(os)\nwhile 1:s=s**7%~-2**65+os.write(1,bytes([s%256]))&quot; \
  | python \
  | dieharder -g 200 -a
#=============================================================================#
#            dieharder version 3.31.1 Copyright 2003 Robert G. Brown          #
#=============================================================================#
   rng_name    |rands/second|   Seed   |
stdin_input_raw|  1.46e+05  | 208008526|
#=============================================================================#
        test_name   |ntup| tsamples |psamples|  p-value |Assessment
#=============================================================================#
   diehard_birthdays|   0|       100|     100|0.10415526|  PASSED  
...
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Java 8, <s>230</s> <s>229</s> 228 bytes</h1>

<pre class="lang-java prettyprint-override"><code>v-&gt;{for(int h=104,a=h,x=0,y=1,A=10,B=A,r=0,t=0,T;a&lt;119;System.out.printf(&quot;%c %3$c %c%n&quot;,x+65,y=(a&lt;98?t=r+=Math.random()*6-r+1:a&gt;h?(T=x&lt;1?A-=t:(B-=t))&lt;0?0:T:A*B&lt;1?-16:(x^1)+17)+48,a=a&lt;98?114:a&gt;h?h:A*B&lt;1?119:97))x^=a&gt;h|A*B&lt;1?1:0;}
</code></pre>
<p>-2 bytes thanks to <em>@ceilingcat</em>.</p>
<p>Note: there is already <a href="https://codegolf.stackexchange.com/a/159906/52210">a much shorter Java answer, so make sure to upvote his</a>! I use a completely different approach however, so figured it was worth posting as well.</p>
<p><strong>Explanation:</strong></p>
<p><a href="https://tio.run/##LVDfb4IwEH7fX9GYmbRSCM2cPwqV4Lu@SPayzKQrMHBYTKkE4/zb2akkd9f0u/su930H2Uq3PmX6kP72qpJNgzay1NcXhEptM5NLlaHt/YtQW5cpUvjj/rQkAOwGCdFYaUuFtkgjgfrWXV3z2mDgo0Iwf0qlKGgnfHoRjMaA0LWIqQHAQiaBDBlbBrtLY7OjV5@tdzLAzfForND47RWKGusR7ZzZO6zAMlwuIiuMIzbSFp6ROq2PmExmrnEYl6siwonoQhbFrrAcr6ESEvqRzxMeT9bQcNmM427PiMPmxJku4MDHUsamD34xzMFZfDknpNsLgP8GkPvBrQ@eyk/n7wqUDwY8DDqCfXhnQcLP55ckT@u0p7A@V9Xg2q3/Bw" rel="nofollow noreferrer">Try it online.</a></p>
<pre class="lang-java prettyprint-override"><code>v-&gt;{                     // Method with empty unused parameter and no return-type
  for(int h=104,         //  Temp integer with unicode for 'h' to save bytes
          a=h,           //  Second part (Action)
          x=0,           //  First part
          y=1,           //  Third part
          A=10,          //  Score player A, starting at 10
          B=A,           //  Score player B, starting at 10
          r=0,           //  Random dice-roll
          t=0,           //  Previous dice-roll
          T;             //  Temp integer
      a&lt;119              //  Loop until there is a winner:
      ;                  //    After every iteration:
       System.out.printf(//     Print:
        &quot;%c %3$c %c,%n&quot;, //      The three parts with spaces, and a new-line
                         //      First part:
        x+65,            //       Add 65 to `x` to convert 0/1 to 65/66 
                         //       (unicode values of A/B)
        (y=              //      Third part (after set-up):
           (a&lt;98?        //       If the previous action was 'a'
             t=r+=Math.random()*6-r+1
                         //        Roll the dice, and save it in `t`
            :a&gt;h?        //       Else-if the previous action was 'r':
             (T=x&lt;1?     //        If the first part changed to player A:
              A-=t       //         Subtract the previous dice-roll from A
             :           //        Else:
              (B-=t))    //         Subtract the previous dice-roll from B
             &lt;0?         //        If this score is below 0:
              0          //         Use 0
             :           //        Else:
              T          //         Use this score
           :             //       Else (the previous action was 'h'):
            A*B&lt;1?       //        Is there a winner:
             -16         //         Change the third part to a space
            :            //        Else:
             (x^1)+17)   //         Change the third part to the other player
         +48,            //       Add 48 to convert it to unicode
         a=              //      Second part:
           a&lt;98?         //       If the previous action was 'a': 
            114          //        Change it to 'r'
           :a&gt;h?         //       Else-if the previous action was 'r':
            h            //        Change it to 'h'
           :             //       Else (the previous action was 'h'):
            A*B&lt;1?       //        If either score is 0:
             119         //         Use 'w'
            :            //        Else:
             97))        //         Use 'a'
    x^=                  //   First part set-up:
       a&gt;h               //    If the previous action is 'r',
       |A*B&lt;1?           //    or there is a winner:
         1               //     Change A→B or B→A
       :                 //    Else:
         0;}             //     A/B remains unchanged
</code></pre>
</div>
<div id="pu2" class="pu"><h2>VBA, <s>222</s> <s>185</s> 179 Bytes</h2>

<p>This recursive solution involves 3 subs</p>

<ol>
<li>g is the <em>game start</em> that kicks off the first turn</li>
<li>t is called for each <em>turn</em>.  It uses recursion.  </li>
<li><s>p is shorter than Debug.Print when used more than 3 times (only 4 in this solution)</s> <em>Edit:</em> Now that I learned that <code>Debug.?</code> is an acceptable alternative to <code>Debug.Print</code>, <code>Debug.?x</code> is shorter than calling a Sub to print.</li>
</ol>



<pre class="lang-vb prettyprint-override"><code>Sub g()
t "A",10,"B",10
End Sub
Sub t(i,j,x,h)
d=Int(Rnd()*6)+1
Debug.?i &amp;" a "&amp;x
Debug.?i &amp;" r "&amp;d
h=h-d
If h&lt;1Then
Debug.?i &amp;" w"
Else
Debug.?x &amp;" h "&amp;h
t x,h,i,j
End If
End Sub
</code></pre>

<p>This was a fun challenge. If you know of an online interpreter like TIO for VB6/VBScript/VBA please leave a comment.  Then I can post a link to a working solution.</p>

<p>If you want to test this code and have Microsoft Excel, Word, Access, or Outlook installed (Windows only), press Alt+F11 to open the VBA IDE. Insert a new code module (Alt+I,M) and clear out Option Explicit. Then paste in the code and press F5 to run it. The results should appear in the Immediate Window (press Ctrl+G if you don't see it).</p>

<p><em>Edit 1:</em>  Removed whitespace that the VBA editor will automatically add back in.  Reduced by 37 bytes<br>
<em>Edit 2:</em>  Removed Sub p()* to save 6 bytes after learning <code>Debug.?</code> is an acceptable alternative to <code>Debug.Print</code>.  Calling a <a href="https://codegolf.stackexchange.com/a/166127/69061">Sub</a> to handle <code>Debug.?</code> only saves bytes after more than six calls.</p>
</div>
<div id="pu3" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 0.6</a>, 175 bytes</h1>



<pre class="lang-julia prettyprint-override"><code>p=println()
f(l="AB",h=[10,10],a=1)=(while min(h...)&gt;0;d=3-a;p(l[a]," a ",l[d]);r=rand(1:6);h[d]-=r;p(l[a]," r ",r);p(l[d]," h ",max(h[d],0));a=d;end;p(l[findmax(h)[2]]," w"))
</code></pre>

<p><a href="https://tio.run/##RcpBCsIwEIXhvacoWc1AWhKFLgwj6DVCFgPTkkgMJSj19rHtxuX/3vf85MRjawstNZV3LoCnGTKp@0PpSN4abU3QTBYJ1pjy1L1SgTgMA96ME7r07BbInoNWHXdKZy8BXaXKRcBeR3RxW3qqf1Y3VvFo2Ttu/eIv7FAbRMckbipyiDkVOU7057DrVSG29gM" rel="nofollow noreferrer" title="Julia 0.6 – Try It Online">Try it online!</a></p>

<p>Long, ungolfed version:</p>

<pre class="lang-julia prettyprint-override"><code>function status(player, health)
    println("$player h $(max(0,health))")
end

function roll(player)
    x = rand(1:6)
    println("$player r $x")
    x
end

function play()
    players = ["A","B"]
    healths = [10, 10]
    attacker = 1

    while min(healths...) &gt; 0
        println("$(players[attacker]) a $(players[3-attacker])")
        healths[3-attacker]-=roll(players[attacker])
        status(players[3-attacker], healths[3-attacker])

        attacker = 3 - attacker
    end

    winner = findmax(healths)[2]
    println("$(players[winner]) w")
end
</code></pre>
</div>
<div id="pu4" class="pu"><h1>PHP 7.1: 159 bytes</h1>

<pre><code>&lt;?php $A=$B=10;$t='AB';while($A&gt;0&amp;&amp;$B&gt;0){$a=$t[0];$b=$t[1];$d=rand(1,6);$$b-=$d;echo"$a a $b\n$a r $d\n$b h {$$b}\n";$t=strrev($t);}echo($A&gt;0?'A':'B')." w\n";
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/79a833581d55a878c3e79a8da8cfb5a8a5cc1303" rel="nofollow noreferrer">Run it in the browser here!</a></p>

<h1>PHP 5.6: 156 bytes</h1>

<pre><code>&lt;?php $A=$B=10;$t='AB';while($A&gt;0&amp;&amp;$B&gt;0){list($a,$b)=$t;$d=rand(1,6);$$b-=$d;echo"$a a $b\n$a r $d\n$b h {$$b}\n";$t=strrev($t);}echo($A&gt;0?'A':'B')." w\n";
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/ad3752f87c8167f19b29920b4309d5728f413706" rel="nofollow noreferrer">Run it in the browser here!</a></p>

<p>Here's what the PHP 5.6 solution looks like with formatting and comments:</p>

<pre><code>&lt;?php
// Initialize both HP counters
$A = $B = 10;

// Set the turn order as a string (which 5.6 allows to be unpacked into a list)
$t = 'AB';

// Run this loop as long as both players have HP
while ($A &gt; 0 &amp;&amp; $B &gt; 0) {
    // Unpack the turn string into $a and $b variables; on the first run, $a = 'A'
    // and $b = 'B'. This is no longer possible in PHP 7.0, so the PHP 7.0
    // solution needed to use an array instead.
    list($a, $b) = $t;

    // Set damage to a random number between 1 and 6
    $d = rand(1, 6);

    // Subtract the damage from the referenced value $b. On the first turn, this
    // is 'B', so this ends up subtracting $d from $B. Next turn, $b will be 'A',
    // so it'll subtract $d from $A
    $$b -= $d;

    // Echo the string (interpolated values)
    echo "$a a $b\n$a r $d\n$b h {$$b}\n";

    // Reverse the turn order string ('AB' becomes 'BA', which will affect the
    // call to list in the first line of the while-loop)
    $t = strrev($t);
}

// Someone's run out of HP; figure out whom by figuring out who still has HP
echo ($A &gt; 0 ? 'A' : 'B') . " w\n";
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 204 bytes</h1>

<p>My attempt with Haskell, I wasn't able to get it more competitive unfortunately </p>



<pre class="lang-hs prettyprint-override"><code>import System.Random
main=getStdGen&gt;&gt;= \g-&gt;putStr$q(randomRs(1,6)g)10(10::Int)"A ""B "
(!)=(++)
l="\n"
q(x:z)a b p o=p!"a "!o!l!p!"r "!show x!l!o!"h "!show n!l!if n&lt;1then p!"w"else q z n a o p where n=b-x
</code></pre>

<p><a href="https://tio.run/##NYw9y8IwFEb3/oqbi0OCH9jFoZiCLuKqq0vEa1NMb9ok0uqfr@GFdzvn4fBYE1/k3Dy3Xe9DgusnJuo2F8MP3xWdaVk3lK7pcSKuaw23Zl337zyExSDDX3WJslztVKPKrSy3VXXmpPAAiEfAQgql5XKpCqfxxlgMcqq@ysAdevC6F2gAhRdOZAwZo/UjTNm9QPvvnL19Au/LZIkhpyOSiwQDfIHBgM9vo6VAwPq@nub5Bw" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>Explanations:
</p>

<pre class="lang-hs prettyprint-override"><code>import System.Random  --import random module
main=                        --main function, program entry point
 getStdGen                   -- get the global random number generator
   &gt;&gt;= \g-&gt;                  --using the random generator g
       putStr $ q            --print the result of function q, passing in ..
          (randomRs (1,6) g) --an infinite list of random numbers, 1 to 6 generated by g
           10 (10::Int)      --the starting health of both players, 
                             --type annotation sadly seems to be required
           "A " "B "         --The names of the players,
                             --with an extra space for formatting
(!)=(++) --define the operator ! for list (String) concatenation, 
         -- we do this a lot so we save a bit by having a one byte operator
l="\n"   -- define l as the newline character

q      --define function q                         
 (x:z) --our list of random numbers, split into the next number (x) and the rest (z)
 a     -- the health of the active player
 b     -- the health of the player getting attacked
 p     -- the name of the active player
 o     -- the name of the player getting attacked
=
  p!"a "!o!l --create the attack action string with a newline
 !p!"r "!show x!l -- append the roll action
 !o!"h "!show n!l -- append the health remaining
 !           -- append the result of the following if
  if n&lt;1     -- if the player being attacked has been defeated
  then p!"w" -- append the win string for the active player
  else q z n a o p  --otherwise append the result of calling q again with 
                    --rest of the random numbers, and the active players swapped
  where n=b-x -- define the attacked player's new health n
              -- their current health b - the random roll x
</code></pre>
</div>
<div id="pu6" class="pu"><h1>F#, <strike>238</strike> 235 bytes</h1>
<p>I thought I was doing well, but you've all far outclassed me!</p>
<pre><code>let p=printfn
let mutable A=10
let mutable B=A
let x h a d=
 p&quot;%s a %s&quot;a d
 let i=(new System.Random()).Next(1,7)
 let j=h-i
 p&quot;%s r %i&quot;a i
 p&quot;%s h %i&quot;d j
 if j&lt;=0 then p&quot;%s w&quot;a
 j
while A*B&gt;0 do
 B&lt;-x B&quot;A&quot;&quot;B&quot;
 if B&gt;0 then A&lt;-x A&quot;B&quot;&quot;A&quot;
</code></pre>
<p><a href="https://tio.run/##VY9RS8MwFIXf@ysOkbFVXNs9CbIMWtAnEXG@iQ/Zmi4pbRLSzG2/vt6sKviW833nXm6aYbm3Xo55jmcpvEFPCWJnjwFPNxABKgT3kOfNoIR3mfWHhLpbKRGUxJw678dgvRbdHM7bVu4DGuunPUp2LkuSj/WjCf7yarUJm8@kkwG90AbCH77AMSISx50n35jkGvtjELtOouSr4j@peDmBMxQEap4Ajs0Ges8GRoBy1JovjDxhexmC7LM3YWrbL9I0e5HnsFjd3ac/vZarpf7d4THTtOMvq5hrtJR1g3bNi/hvM8kTE8TJnZSOp95WmwK1JVatl2dUrGSsYtNoVNfJMqqSONkRxfgN" rel="nofollow noreferrer">Try it online!</a></p>
<p>Thanks to Rogem for the brilliant advice to use A*B&gt;0 instead of A&gt;0&amp;&amp;B&gt;0 (takes off 3 bytes).</p>
<p>Thank you also to officialaimm, whose hint about predefining printf in the Python answer helped me shave a few bytes off too.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>146</s> 141 bytes</h1>



<pre class="lang-c prettyprint-override"><code>f(A,B,r,t,a,b){for(A=B=10;r=1+clock()%6,A*B&gt;0;t=!t)printf("%c a %c\n%c r %u\n%c h %i\n",a=65+t,b=66-t,a,r,b,t?A-=r:(B-=r));printf("%c w",a);}
</code></pre>

<p><a href="https://tio.run/##TYyxDsIgFAB3vwKbkPDsI2kHGSRo4CdculASaiNSgxiHpr8uVieXyy13jg/OleKZRoMJM1rsYfZTYloZ1TYyqbZ2YXJXBlSg3pljI7PaZrinMWbPKuqIJdR1cZVE6PMnF0LHLlZoldjXGXslBP@@E/aYT5qrdGBmJYD8@7zWAORSbnaMDOaNZyA3S3k7H@zwKPxsQ/gA" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p>De-golf:</p>

<pre class="lang-c prettyprint-override"><code>f(A,B,r,t,a,b){
    for(A=B=10; //Initialize HP
        r=1+clock()%6, // Get the number of processor cycles the program has consumed. This is relatively random, so I call it good enough.
        A*B&gt;0;t=!t) // Flip t for change of turns
        printf("%c a %c\n%c r %u\n%c h %i\n", // Print the turn
            a=65+t,b=65+!t,a,r,b, // 65 is ASCII for 'A', 66 for 'B'
            t?A-=r:(B-=r)); // Deduct the damage.
    printf("%c w",a); // Print the winner
}
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, <s>93</s> <s>88</s> 87 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>$A=$B=10;$_=B;${$_^=v3}-=$%=1+rand 6,say"$_ a $'
$_ r $%
$' h $$_"until//&gt;$$_;say"$_ w"
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/1/F0VbFydbQwFol3tbJWqVaJT7Otsy4VtdWRdXWULsoMS9FwUynOLFSSSVeIVFBRZ0LSBcpqKhyqagrZCioqMQrleaVZObo69sB2dZQheVK////yy8oyczPK/6v62uqZ2igZwAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h2>Batch, 174 bytes</h2>

<pre><code>@set/aA=B=10
@set c=A
@set d=B
:g
@set/ar=%random%%%6+1,h=%d%-=r
@echo %c% a %d%
@echo %c% r %r%
@echo %d% h %h%
@if %h% gtr 0 set c=%d%&amp;set d=%c%&amp;goto g
@echo %c% w
</code></pre>

<p>Explanation: <code>%</code> variable references are substituted at parse time. This has two useful benefits:</p>

<ul>
<li><code>%d%-=r</code> subtracts <code>r</code> from the variable named by <code>d</code> (i.e. indirect reference)</li>
<li><code>set c=%d%&amp;set d=%c%</code> is simply a straight swap.</li>
</ul>
</div>
<div id="pu10" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 131 bytes</h1>



<pre class="lang-python prettyprint-override"><code>x,y="AB"
from random import*
X=Y=10
p=print
while X&gt;0:p(x,"a",y);d=randint(1,6);p(x,"r",d);Y-=d;p(y,"h",Y);x,y,X,Y=y,x,Y,X
p(y,"w")
</code></pre>

<p><a href="https://tio.run/##Hc1BCsMgFATQvacIfxXLFBIKXVR@oD2FLgO2KDRGRIie3tqshuExTKzZ7eHWWkFler5IfNK@DWkNtoff4p7yRWg2PE8ickw@ZHE4/30PepkecSyglVClsvwfdR5n3KU6JRGsVObKtvcKcgQjVb@ChuGKAgMtTjpItvYD" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-8 bytes thanks to officialaimm<br>
-2 bytes thanks to ChooJeremy</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 49 bytes</h1>

<pre><code>"BaABr0Aha"S3ô»D„ABÂ‡[6LΩ©Tǝ¤H®-©16ǝ=®0‹#s]н…ÿ w?
</code></pre>

<p><a href="https://tio.run/##AVAAr/8wNWFiMWX//yJCYUFCcjBBaGEiUzPDtMK7ROKAnkFCw4LigKFbNkzOqcKpVMedwqRIwq4twqkxNsedPcKuMOKAuSNzXdC94oCmw78gdz///w" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>"BaABr0Aha"                                        # push the initial state of B
           S                                       # split to list of characters
            3ô                                     # divide into 3 parts
              »                                    # join each part on space and all on nl
               D„ABÂ‡                              # make a copy with A and B inverted
                     [                             # start a loop
                      6LΩ©                         # pick a random number in [1 ... 6]
                          Tǝ                       # insert at position 10 of the string
                            ¤H                     # get the last char of the string and
                                                   # convert from hex
                              ®-©                  # subtract the random number
                                 16ǝ=              # insert at position 16 and print
                                     ®0‹#          # if the hp is less than 0, break
                                         s         # swap the other string to the stack top
                                          ]        # end loop
                                           н…ÿ w?  # print the winner
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 142 bytes</h1>



<pre class="lang-c prettyprint-override"><code>#define R(c,t)r=rand()%6+1,c&amp;&amp;printf(#c" a "#t"\n"#c" r %d\n"#t" h %d\n",r,t-=t&lt;r?t:r),t||puts(#c" w")
f(A,B,r){for(A=B=10;A*B;R(B,A))R(A,B);}
</code></pre>

<p><a href="https://tio.run/##RY7BasMwEETP8VcsMgnaVgLn0kMVE@xP8KWXUnBlKxW1ZbNe00OSX68apYVehplZlnlWn6yNMe9650MPjbSKkUpqQydx@/S4V3a3m8kHdjK3AloQOYvXIFIg2HbJsoCPX6tIsS75QEd@JlR8ucwrL/fPL4GZk5WqFeHZTSSrsi73hakeatPIWlWITTqjucbbHIytDxLhnG2WOw37sZcFwhvYYbKfEtFkGyeT/vElrP@Sel4pQGGya/y2bmhPS9QvYdJ@nAdvPUftbul99QP78AM" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK 10)</a>, 180 bytes</h1>



<pre class="lang-java prettyprint-override"><code>v-&gt;{var r="";int p=0,H[]={10,10},h=0;for(;H[0]*H[1]&gt;0;)r+=r.format("%3$c a %4$c%n%3$c r %d%n%4$c h %d%n",h+=Math.random()*6-h+1,H[p]-=h,p+65,(p^=1)+65);return r+(char)(66-p)+" w";}
</code></pre>

<p><a href="https://tio.run/##LY8xb4MwEIX3/IoTCpIdjAVqy@I6Y5UlU6QuiEouhNjUGMsYqijit1OXdrrv3r270@vELNKu@VprLcYRzkIZeOwA7PSpVQ2jFz6UeVAN9GGGLt4pcysrEO424s0K0IUjdPJK03YytVeDoW//8PoeVsnf1hFavs7p8TELB45HEVPGg@UZOZUVf@QZybOFSJ6xdnCIncqsOpzKvDpmDLuEOxrkXngUxU/7GgTEz/s6NlvjIG4CBgHkhhGRCT8LL6kTphl6hA9FKpM8vLJVyiWxSfFCkP3gOQ6Embv6yRlwCaqlcBgVRWpxEsF3xJaVbTEv99FfezpMntqQx2uDWiqs1XdkJq0x/rUtu2X9AQ" rel="nofollow noreferrer" title="Java (JDK 10) – Try It Online">Try it online!</a></p>

<h2>Credits</h2>

<ul>
<li>-8 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">Kevin Cruijssen</a></li>
</ul>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>122 120 96 92</s> 91 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>f=-&gt;x=?A,y=?B,m=10,n=m{p [x,?a,y],[x,?r,r=1+rand(6)],[y,?h,t=n-r]
t&lt;1?p([x,?w]):f[y,x,t,m]}
</code></pre>

<p><sup>Saved 1 byte thanks to <a href="https://codegolf.stackexchange.com/users/77598/asone-tuhid">Asone Tuhid</a>.</sup></p>

<p><a href="https://tio.run/##KypNqvz/P81W167C1t5Rp9LW3kkn19bQQCfPNre6QCG6Qsc@UacyVgfEKNIpsjXULkrMS9Ew0wQKVerYZ@iU2ObpFsVyldgY2hdogFSVx2papQHlKnRKdHJja/@nRcf@BwA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (ES6), 122 bytes</h1>
<pre class="lang-js prettyprint-override"><code>f=(h=[10,10,p=0])=&gt;`${x='AB'[p]} a ${y='BA'[p]}
${x} r ${d=Math.random()*6+1|0}
${y} h ${H=h[p^=1]-=d}
${H&lt;1?x+' w':f(h)}`
</code></pre>
<p><a href="https://tio.run/##HcmxDoIwFIXh3afoQNJWhNDFwXg1MLH4BARDQynVIG2AKAT77LWYnOX835O/@VgPDzNFvRaNcxKIgoIlBz8DSUnhUgXrDDjNcGFKizgK1gVwlv7vzptFg28CbnxS8cB7oV@E7o8h@yabLxYp7zmowtyBlRGILedndp1DjD74JImitnK17kfdNXGnWyIJpe4H" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/159895/">159895</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




