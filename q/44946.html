<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::44946</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>070</td><td>JavaScript Node.js</td><td>240718T065742Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/274236#274236">l4m2</a></td></tr>
<tr d-ix="1"><td>130</td><td>Python 3</td><td>240716T082401Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/274193#274193">Jitse</a></td></tr>
<tr d-ix="2"><td>217</td><td>Scala 3</td><td>240716T122025Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/274196#274196">138 Aspe</a></td></tr>
<tr d-ix="3"><td>229</td><td>Python3</td><td>240715T223722Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/274186#274186">Ajax1234</a></td></tr>
<tr d-ix="4"><td>154</td><td>Python 2</td><td>150126T063449Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/44952#44952">Sp3000</a></td></tr>
<tr d-ix="5"><td>196</td><td>Haskell</td><td>150126T045305Z</td><td><a href="https://codegolf.stackexchange.com/questions/44946/trucks-in-a-parking-lot/44948#44948">MtnViewM</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 70 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>L=&gt;g=([c,...A],T,n=L)=&gt;T?1/c?Math.min(g(A,T),c+g(A,T-!--n,n||L)):1/0:0
</code></pre>
<p><a href="https://tio.run/##ZYyxDoIwEIZ338KtF6@l1biQFMJet26kA6lQIdgaIU68ezUVXciXu/zJ/90NzauZ7LN/zNSHaxs7GZUsnCS1RcZYZVCjlwpkoUuR2fLSzDd27z1xpEINaA8p0D2lHv2yKIBcZDzn0QY/hbFlY3CkIycgtUCO3xEGBcBuq6Tyo/DfNnjciOdV5H/Wrys8HcU3" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Output Infinity if no solution. Slower than brute force but reasonable for test cases</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 130 bytes</h1>

<pre class="lang-python prettyprint-override"><code>p,t,l=map(int,input().split())
q=[(input(),0)]
for s,n in q:q+=[(s[s.count('.'*l)&gt;=t&gt;exit(n):x]+'.'+s[x+1:],n+1)for x in range(p)]
</code></pre>
<p><a href="https://tio.run/##LYxBCsMgFET3nkJwEX@VT9OSjWAuElyEkrZC@mOiAXt6q9DZDLzhTfim90b3UoJOerWfOUhPSXsKZ5KAMay@NrDdTvIP9RUce24Hj5q4J76bXdU1ThEf20lJdthdVhhtGpdcbQKTnapQxSmr3jhNqod2kJt@zPRaZABXSj/wGx8YCmwRKFrwBw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Full program, outputs via <a href="https://codegolf.meta.stackexchange.com/a/5330/87681">exit code</a></p>
<hr />
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 89 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda p,t,l,q:min(bin(x).count('1')for x in range(q+1)if f'{x^q:0{p}b}'.count('0'*l)&gt;=t)
</code></pre>
<p><a href="https://tio.run/##NcpNCoMwEEDhq8wumXYoRhFE0JNIIWmbNhDzRwoR8eypmy7e5uOFLX@866qelmrlqp4SAmWyFMfVOK7OCt4e/usyZ4Kh9gkKGAdJuveLx6tAo0Gzvdzj2OzhUAf77w27WJynjDUkc4LmoqeWehq6oUWsPw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Uses more lenient input restrictions: here, <code>q</code> is a bitmap representing the occupied parking spots, so <code>8382</code> represents <code>10000010111110</code>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 217 bytes</h1>
<p>A port of <a href="http://pastebin.com/ugv4zujB" rel="nofollow noreferrer">@Etaoin Shrdlu's Python code</a> in Scala.</p>
<p>217 bytes, it can be golfed more.</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=fZC_TsMwEMb3PMUpHWoLx21aFQGpkToiAQtsCFWOScCp66SxW_5EfYW-AEsXWHiivg12G4YunG3Z33e_O9n-_DaCKz78eQgjXb7yWoePu3GZFpmwcMOlhuzNZvrJwKSqoAmCFVcgLtCVtuRv3dla6mfMLp0A9rW0eXS226GKzIgiC-c3K14DZwtqy2tpbOJlyiZ1zd9pLpVCM4yQIn2Mk7yskRxHfbAlzKIYN94oWoNTIz-ySOFG5sgJJUWGClKcKExFudQWTRnrdrp4nCKJ6dSV-wP7lyUFXifrhDNOK27FCzrUDsitVES5XErnvEJT346a5XzdPnATAPR6cJ8ZC4KbzDhduY-wSiOBTgnEBIYEwg51oxNi7On4CDonMDhAjqDUz5YbHHHxaA-O9iD14Vu6oC0-DNpbbbeH_Rc" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>(p,k,l,q)=&gt;{var a=q.toList;var b=Array.fill(k)((l,0));for(i&lt;-0 to k-1){for(j&lt;-0 to a.size-l){if(a.slice(j,j+l).count(_=='#')&lt;b(i)._1){b(i)=(a.slice(j,j+l).count(_=='#'),j)};};a=a.patch(b(i)._2,Nil,l)};b.map(_._1).sum}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=jVJdT8IwFE183K84gQfaOAqDYJTAA4-GaST6aELq6KBL2ZatGI3hl_jCi_4of41dVz5MeLBrctdzzzm3ub2f32XEFe_vdl8bHbevfy6es5dERBp3XKYQb1qkixKTPMeHByxEDMOPNoprQR6GuE21j6mLoYuzIR51IdMltQDGVgu88gKzUJYVMmM6q34PCWXASVHwdxZLpciUEhL66FLqWUqcFSASoza62KRaKkyps3XJ5DRJbB2mRLrUK7QR4hIBPSoAGe9JpZKRIImPxJBCyqLMeJA5xmO0mi2KERSRlM2DUzksaO78PxOD04N26_2Nh55Yp5zraEXqkj0f91KZztbibd0LxdY8J_PqRqzcrD2X6HTwJIxRxEtRmnNunkCrlBwf7MpH4KPvo9Fk5ms2TEeMKjhLvvHRq8mGyVi1Hb93lh8MrGBgBaxaVQmzmJP1vW09ZG7W9jP3Cw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main extends App {
  def calculate(P: Int, K: Int, L: Int, Q: String): Int = {
    var QList = Q.toList
    var l = Array.fill(K)((L, 0))

    for (i &lt;- 0 until K) {
      for (j &lt;- 0 until (QList.length - L + 1)) {
        if (QList.slice(j, j + L).count(_ == '#') &lt; l(i)._1) {
          l(i) = (QList.slice(j, j + L).count(_ == '#'), j)
        }
      }
      QList = QList.patch(l(i)._2, Nil, L)
    }

    l.map(_._1).sum
  }

  // Test cases
  println(calculate(6, 1, 3, &quot;#.#.##&quot;)) // 1
  println(calculate(9, 2, 3, &quot;.##..#..#&quot;)) // 2
  println(calculate(15, 2, 5, &quot;.#.....#.#####.&quot;)) // 3
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Python3, 229 bytes</h1>
<pre class="lang-py prettyprint-override"><code>from itertools import*
def f(b,t,l):
 q,s=[(b,0)],[]
 for b,c in q:
  for i,a in enumerate(b):
   if a and(B:=b[:i]+[0]+b[i+1:])not in s:
    if sum(len([*k])//l for j,k in groupby(B)if 0==j)&gt;=t:return c+1
    q+=[(B,c+1)];s+=[B]
</code></pre>
<p><a href="https://tio.run/##bU5BbsMgELz7FXuEeKVA01aVK/fgbyAOJoGWxAYb40Ne74KrtklraXa1o53ZneEaP7w7vAxhWUzwPdioQ/S@m8D2gw9xV5y0AUMURuxoVcCIUy0SZVSikAUYH0DhEayDMa1XbrHNXLu516GNmqjsBLAGWmjdiTRVrURlZSmYLJWwJa8kdT5m17RKs3aae9JpR8TuIul@3623z3jJqvfg50FdSUOTkNX1mb7VsQo6zsHBseTrjbFMURtMlMrXKZFGLkOwLhJDBEeGX8VlagdKi58dQ@Ar2IrfQeLDlpLdg3/3W7DsffrjvX3E/9nZVobNj3eBJT7iM6XLJw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>Python 2, 154 bytes</h1>
<pre class="lang-py prettyprint-override"><code>I,R=raw_input,range
P,T,L=map(int,I().split())
S=I()
D=R(P+1)
for r in R(P):D[1:r+2]=[min([D[c],D[c-1]+(S[r]&lt;&quot;.&quot;)][c%L&gt;0:])for c in R(1,r+2)]
print D[T*L]
</code></pre>
<p>A straightforward DP approach. A fair chunk of the program is just reading input.</p>
<p><strong>Explanation</strong></p>
<p>We calculate a 2D dynamic programming table where each row corresponds to the first <code>n</code> parking spots, and each column corresponds to the number of trucks (or parts of a truck) placed so far. In particular, column <code>k</code> means that we've placed <code>k//L</code> full trucks so far, and we're <code>k%L</code> along the way for a new truck. Each cell is then the minimal number of cars to clear to reach the state <code>(n,k)</code>, and our target state is <code>(P, L*T)</code>.</p>
<p>The idea behind the DP recurrence is the following:</p>
<ul>
<li>If we're <code>k%L &gt; 0</code> spaces along for a new truck, then our only option is to have come from being <code>k%L-1</code> spaces along for a new truck</li>
<li>Otherwise if <code>k%L == 0</code> then we have either just finished a new truck, or we'd already finished the last truck and have since skipped a few parking spots. We take the minimum of the two options.</li>
</ul>
<p>If <code>k &gt; n</code>, i.e. we've placed more truck squares than there are parking spots, then we put <code>∞</code> for state <code>(n,k)</code>. But for the purposes of golfing, we put <code>k</code> since this is the worst case of removing every car, and also serves as an upper bound.</p>
<p>This was quite a mouthful, so let's have an example, say:</p>
<pre><code>5 1 3
..##.
</code></pre>
<p>The last two rows of the table are</p>
<pre><code>[0, 1, 2, 1, 2, ∞]
[0, 0, 1, 1, 1, 2]
</code></pre>
<p>The entry at index 2 of the second last row is 2, because to reach a state of <code>2//3 = 0</code> full trucks placed and being <code>2%3 = 2</code> spaces along for a new truck, this is the only option:</p>
<pre><code>  TT
..XX
</code></pre>
<p>But the entry at index 3 of the second last row is 1, because to reach a state of <code>3//3 = 1</code> full trucks placed and being <code>3%3 = 0</code> spaces along for a new truck, the optimal is</p>
<pre><code>TTT
..X#
</code></pre>
<p>The entry at index 3 of the last row looks at the above two cells as options — do we take the case where we are 2 spaces along for a new truck and finish it off, or do we take the case where we have a full truck already finished?</p>
<pre><code>  TTT            TTT
..XX.     vs     ..X#.
</code></pre>
<p>Clearly the latter is better, so we put down a 1.</p>
<h2>Pyth, 70 bytes</h2>
<pre><code>JmvdczdKw=GUhhJVhJ=HGFTUhN XHhThS&gt;,@GhT+@GTq@KN\#&gt;%hT@J2Z)=GH)@G*@J1eJ
</code></pre>
<p>Basically a port of the above code. Not very well golfed yet. <a href="https://pyth.herokuapp.com/" rel="nofollow noreferrer">Try it online</a></p>
<p><strong>Expanded</strong></p>
<pre><code>Jmvdczd              J = map(eval, input().split(&quot; &quot;))
Kw                   K = input()
=GUhhJ               G = range(J[0]+1)
VhJ                  for N in range(J[0]):
=HG                    H = G[:]
FTUhN                  for T in range(N+1):
 XHhT                    H[T+1] =
hS                                sorted(                                        )[0]
&gt;                                                                 [            :]
,                                        (      ,                )
@GhT                                      G[T+1]
+@GTq@KN\#                                       G[T]+(K[N]==&quot;#&quot;)
&gt;%hT@J2Z                                                           (T+1)%J[2]&gt;0
)=GH                   G = H[:]
)@G*@J1eJ            print(G[J[1]*J[-1]])
</code></pre>
<p>Now, if only Pyth had multiple assignment to &gt;2 variables...</p>
</div>
<div id="pu5" class="pu"><h2>Haskell, 196 characters</h2>

<pre><code>import Data.List
f=filter
m=map
q[_,t,l]=f((&gt;=t).sum.m((`div`l).length).f(&gt;"-").group).sequence.m(:".")
k[a,p]=minimum.m(sum.m fromEnum.zipWith(/=)p)$q(m read$words a)p
main=interact$show.k.lines
</code></pre>

<p>Runs all examples</p>

<pre><code>&amp; (echo 6 1 3 ; echo "#.#.##" )  | runhaskell 44946-Trucks.hs 
1

&amp; (echo 9 2 3 ; echo ".##..#..#" )  | runhaskell 44946-Trucks.hs 
2

&amp; (echo 15 2 5 ; echo ".#.....#.#####." )  | runhaskell 44946-Trucks.hs 
3
</code></pre>

<p>Somewhat slow: <strong>O(2^P)</strong> were P is the size of the lot.</p>

<p>Probably plenty left to golf here.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/44946/">44946</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




